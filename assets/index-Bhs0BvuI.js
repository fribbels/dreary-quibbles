var sf=Object.defineProperty;var of=(e,a,t)=>a in e?sf(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t;var tt=(e,a,t)=>of(e,typeof a!="symbol"?a+"":a,t);import{s as Du,i as Y,v as Yr,t as Sc,P as rf,d as zt,j as i,F as D,D as Ut,u as ee,M as Vt,B as se,T as _e,a as xt,R as Lt,b as As,S as vn,c as Hn,e as Qa,f as q,r as W,g as ne,h as ma,k as No,l as go,m as Cu,n as bo,o as bl,I as Eu,p as Ua,q as Tu,w as Xt,x as qt,C as hi,y as Si,z as Zi,A as Ru,E as Bu,G as lf,H as Iu,J as yu,K as nt,L as Kn,N as ca,O as oi,Q as Mu,U as pi,V as pc,W as Uo,X as cf,Y as uf,Z as Gu,_ as Dl,$ as Pu,a0 as jo,a1 as gc,a2 as ws,a3 as df,a4 as _u,a5 as Cl,a6 as Au,a7 as xu,a8 as mf,a9 as ff,aa as hf,ab as Sf,ac as xs,ad as ri,ae as pf,af as gf,ag as Lu,ah as bf,ai as Ou,aj as Df,ak as El,al as Cf,am as Ef,an as Tf,ao as Rf,ap as Bf,aq as Cs,ar as If,as as yf,at as bc,au as vu,av as Hu,aw as Fu,ax as Mf,ay as Gf,az as wu,aA as Pf,aB as rs,aC as Ra,aD as ea,aE as Jr,aF as Xa,aG as ku,aH as an,aI as nn,aJ as _f,aK as Af,aL as Ku,aM as Tl,aN as xf,aO as Lf,aP as Of,aQ as vf,aR as Hf,aS as Do,aT as fo,aU as Ff,aV as wf,aW as kf,aX as Nu,aY as Rl,aZ as Kf,a_ as Nf,a$ as Uu,b0 as Uf,b1 as jf,b2 as Wf,b3 as Vf,b4 as Zf,b5 as ju,b6 as zf,b7 as Dc,b8 as Wu,b9 as Cc,ba as Xf,bb as Bl,bc as Yf,bd as Jf,be as Qf,bf as $f}from"./vendor-PqicMVLa.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function t(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(o){if(o.ep)return;o.ep=!0;const r=t(o);fetch(o.href,r)}})();const qf={1001:{id:"1001",name:"March 7th",rarity:4,path:"Preservation",element:"Ice",traces:{"Ice DMG Boost":.224,"DEF%":.225,"Effect RES":.1},traceTree:[{id:"1001201",stat:"Ice DMG Boost",value:.032,pre:null,children:[]},{id:"1001202",stat:"DEF%",value:.05,pre:null,children:[{id:"1001203",stat:"Ice DMG Boost",value:.032,pre:"1001202",children:[]}]},{id:"1001204",stat:"Effect RES",value:.04,pre:null,children:[]},{id:"1001205",stat:"Ice DMG Boost",value:.048,pre:null,children:[{id:"1001206",stat:"Effect RES",value:.06,pre:"1001205",children:[]}]},{id:"1001207",stat:"DEF%",value:.075,pre:null,children:[]},{id:"1001208",stat:"Ice DMG Boost",value:.048,pre:null,children:[{id:"1001209",stat:"Ice DMG Boost",value:.064,pre:"1001208",children:[]},{id:"1001210",stat:"DEF%",value:.1,pre:"1001208",children:[]}]}],max_sp:120,stats:{HP:1058.4,ATK:511.56,DEF:573.3,SPD:101,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1002:{id:"1002",name:"Dan Heng",rarity:4,path:"Hunt",element:"Wind",traces:{"DEF%":.125,"Wind DMG Boost":.224,"ATK%":.18},traceTree:[{id:"1002201",stat:"Wind DMG Boost",value:.032,pre:null,children:[]},{id:"1002202",stat:"ATK%",value:.04,pre:null,children:[{id:"1002203",stat:"Wind DMG Boost",value:.032,pre:"1002202",children:[]}]},{id:"1002204",stat:"DEF%",value:.05,pre:null,children:[]},{id:"1002205",stat:"Wind DMG Boost",value:.048,pre:null,children:[{id:"1002206",stat:"ATK%",value:.06,pre:"1002205",children:[]}]},{id:"1002207",stat:"Wind DMG Boost",value:.048,pre:null,children:[]},{id:"1002208",stat:"DEF%",value:.075,pre:null,children:[{id:"1002209",stat:"ATK%",value:.08,pre:"1002208",children:[]},{id:"1002210",stat:"Wind DMG Boost",value:.064,pre:"1002208",children:[]}]}],max_sp:100,stats:{HP:882,ATK:546.84,DEF:396.9,SPD:110,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1003:{id:"1003",name:"Himeko",rarity:5,path:"Erudition",element:"Fire",traces:{"Fire DMG Boost":.224,"ATK%":.18,"Effect RES":.1},traceTree:[{id:"1003201",stat:"Fire DMG Boost",value:.032,pre:null,children:[]},{id:"1003202",stat:"ATK%",value:.04,pre:null,children:[{id:"1003203",stat:"Fire DMG Boost",value:.032,pre:"1003202",children:[]},{id:"1003204",stat:"Effect RES",value:.04,pre:"1003202",children:[]}]},{id:"1003205",stat:"Fire DMG Boost",value:.048,pre:null,children:[{id:"1003206",stat:"ATK%",value:.06,pre:"1003205",children:[]},{id:"1003207",stat:"Fire DMG Boost",value:.048,pre:"1003205",children:[]}]},{id:"1003208",stat:"Effect RES",value:.06,pre:null,children:[]},{id:"1003209",stat:"ATK%",value:.08,pre:null,children:[]},{id:"1003210",stat:"Fire DMG Boost",value:.064,pre:null,children:[]}],max_sp:120,stats:{HP:1047.816,ATK:756.756,DEF:436.59,SPD:96,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1004:{id:"1004",name:"Welt",rarity:5,path:"Nihility",element:"Imaginary",traces:{"Imaginary DMG Boost":.144,"Effect RES":.1,"ATK%":.28},traceTree:[{id:"1004201",stat:"ATK%",value:.04,pre:null,children:[{id:"1004210",stat:"ATK%",value:.08,pre:"1004201",children:[]}]},{id:"1004202",stat:"Imaginary DMG Boost",value:.032,pre:null,children:[{id:"1004203",stat:"ATK%",value:.04,pre:"1004202",children:[{id:"1004204",stat:"Effect RES",value:.04,pre:"1004203",children:[]}]}]},{id:"1004205",stat:"ATK%",value:.06,pre:null,children:[{id:"1004206",stat:"Imaginary DMG Boost",value:.048,pre:"1004205",children:[{id:"1004207",stat:"ATK%",value:.06,pre:"1004206",children:[]}]}]},{id:"1004208",stat:"Effect RES",value:.06,pre:null,children:[]},{id:"1004209",stat:"Imaginary DMG Boost",value:.064,pre:null,children:[]}],max_sp:120,stats:{HP:1125.432,ATK:620.928,DEF:509.355,SPD:102,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1005:{id:"1005",name:"Kafka",rarity:5,path:"Nihility",element:"Lightning",traces:{"Effect Hit Rate":.18,"HP%":.1,"ATK%":.28},traceTree:[{id:"1005201",stat:"ATK%",value:.04,pre:null,children:[{id:"1005210",stat:"ATK%",value:.08,pre:"1005201",children:[]}]},{id:"1005202",stat:"Effect Hit Rate",value:.04,pre:null,children:[{id:"1005203",stat:"ATK%",value:.04,pre:"1005202",children:[{id:"1005204",stat:"HP%",value:.04,pre:"1005203",children:[]}]}]},{id:"1005205",stat:"ATK%",value:.06,pre:null,children:[{id:"1005206",stat:"Effect Hit Rate",value:.06,pre:"1005205",children:[{id:"1005207",stat:"ATK%",value:.06,pre:"1005206",children:[]}]}]},{id:"1005208",stat:"HP%",value:.06,pre:null,children:[]},{id:"1005209",stat:"Effect Hit Rate",value:.08,pre:null,children:[]}],max_sp:120,stats:{HP:1086.624,ATK:679.14,DEF:485.1,SPD:100,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1006:{id:"1006",name:"Silver Wolf",rarity:5,path:"Nihility",element:"Quantum",traces:{"Effect Hit Rate":.18,"Quantum DMG Boost":.08,"ATK%":.28},traceTree:[{id:"1006201",stat:"ATK%",value:.04,pre:null,children:[{id:"1006210",stat:"ATK%",value:.08,pre:"1006201",children:[]}]},{id:"1006202",stat:"Effect Hit Rate",value:.04,pre:null,children:[{id:"1006203",stat:"ATK%",value:.04,pre:"1006202",children:[{id:"1006204",stat:"Quantum DMG Boost",value:.032,pre:"1006203",children:[]}]}]},{id:"1006205",stat:"ATK%",value:.06,pre:null,children:[{id:"1006206",stat:"Effect Hit Rate",value:.06,pre:"1006205",children:[{id:"1006207",stat:"ATK%",value:.06,pre:"1006206",children:[]}]}]},{id:"1006208",stat:"Quantum DMG Boost",value:.048,pre:null,children:[]},{id:"1006209",stat:"Effect Hit Rate",value:.08,pre:null,children:[]}],max_sp:110,stats:{HP:1047.816,ATK:640.332,DEF:460.845,SPD:107,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1008:{id:"1008",name:"Arlan",rarity:4,path:"Destruction",element:"Lightning",traces:{"HP%":.1,"ATK%":.28,"Effect RES":.18},traceTree:[{id:"1008201",stat:"ATK%",value:.04,pre:null,children:[]},{id:"1008202",stat:"Effect RES",value:.04,pre:null,children:[{id:"1008203",stat:"ATK%",value:.04,pre:"1008202",children:[{id:"1008204",stat:"HP%",value:.04,pre:"1008203",children:[]}]}]},{id:"1008205",stat:"ATK%",value:.06,pre:null,children:[{id:"1008206",stat:"Effect RES",value:.06,pre:"1008205",children:[{id:"1008207",stat:"ATK%",value:.06,pre:"1008206",children:[]}]}]},{id:"1008208",stat:"HP%",value:.06,pre:null,children:[{id:"1008209",stat:"Effect RES",value:.08,pre:"1008208",children:[]},{id:"1008210",stat:"ATK%",value:.08,pre:"1008208",children:[]}]}],max_sp:110,stats:{HP:1199.52,ATK:599.76,DEF:330.75,SPD:102,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1009:{id:"1009",name:"Asta",rarity:4,path:"Harmony",element:"Fire",traces:{"CRIT Rate":.067,"Fire DMG Boost":.224,"DEF%":.225},traceTree:[{id:"1009201",stat:"Fire DMG Boost",value:.032,pre:null,children:[{id:"1009204",stat:"CRIT Rate",value:.027,pre:"1009201",children:[]},{id:"1009207",stat:"Fire DMG Boost",value:.048,pre:"1009201",children:[]}]},{id:"1009202",stat:"DEF%",value:.05,pre:null,children:[{id:"1009203",stat:"Fire DMG Boost",value:.032,pre:"1009202",children:[]}]},{id:"1009205",stat:"Fire DMG Boost",value:.048,pre:null,children:[{id:"1009206",stat:"DEF%",value:.075,pre:"1009205",children:[]}]},{id:"1009208",stat:"CRIT Rate",value:.04,pre:null,children:[{id:"1009209",stat:"DEF%",value:.1,pre:"1009208",children:[]},{id:"1009210",stat:"Fire DMG Boost",value:.064,pre:"1009208",children:[]}]}],max_sp:120,stats:{HP:1023.12,ATK:511.56,DEF:463.05,SPD:106,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1013:{id:"1013",name:"Herta",rarity:4,path:"Erudition",element:"Ice",traces:{"Ice DMG Boost":.224,"DEF%":.225,"CRIT Rate":.067},traceTree:[{id:"1013201",stat:"Ice DMG Boost",value:.032,pre:null,children:[]},{id:"1013202",stat:"DEF%",value:.05,pre:null,children:[{id:"1013203",stat:"Ice DMG Boost",value:.032,pre:"1013202",children:[]},{id:"1013204",stat:"CRIT Rate",value:.027,pre:"1013202",children:[]}]},{id:"1013205",stat:"Ice DMG Boost",value:.048,pre:null,children:[{id:"1013206",stat:"DEF%",value:.075,pre:"1013205",children:[]},{id:"1013207",stat:"Ice DMG Boost",value:.048,pre:"1013205",children:[]}]},{id:"1013208",stat:"CRIT Rate",value:.04,pre:null,children:[]},{id:"1013209",stat:"DEF%",value:.1,pre:null,children:[]},{id:"1013210",stat:"Ice DMG Boost",value:.064,pre:null,children:[]}],max_sp:110,stats:{HP:952.56,ATK:582.12,DEF:396.9,SPD:100,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1101:{id:"1101",name:"Bronya",rarity:5,path:"Harmony",element:"Wind",traces:{"Effect RES":.1,"Wind DMG Boost":.224,"CRIT DMG":.24},traceTree:[{id:"1101201",stat:"Wind DMG Boost",value:.032,pre:null,children:[{id:"1101204",stat:"Effect RES",value:.04,pre:"1101201",children:[]},{id:"1101207",stat:"Wind DMG Boost",value:.048,pre:"1101201",children:[]}]},{id:"1101202",stat:"CRIT DMG",value:.053,pre:null,children:[{id:"1101203",stat:"Wind DMG Boost",value:.032,pre:"1101202",children:[]}]},{id:"1101205",stat:"Wind DMG Boost",value:.048,pre:null,children:[{id:"1101206",stat:"CRIT DMG",value:.08,pre:"1101205",children:[]}]},{id:"1101208",stat:"Effect RES",value:.06,pre:null,children:[{id:"1101209",stat:"CRIT DMG",value:.107,pre:"1101208",children:[]},{id:"1101210",stat:"Wind DMG Boost",value:.064,pre:"1101208",children:[]}]}],max_sp:120,stats:{HP:1241.856,ATK:582.12,DEF:533.61,SPD:99,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1102:{id:"1102",name:"Seele",rarity:5,path:"Hunt",element:"Quantum",traces:{"DEF%":.125,"ATK%":.28,"CRIT DMG":.24},traceTree:[{id:"1102201",stat:"ATK%",value:.04,pre:null,children:[]},{id:"1102202",stat:"CRIT DMG",value:.053,pre:null,children:[{id:"1102203",stat:"ATK%",value:.04,pre:"1102202",children:[]}]},{id:"1102204",stat:"DEF%",value:.05,pre:null,children:[]},{id:"1102205",stat:"ATK%",value:.06,pre:null,children:[{id:"1102206",stat:"CRIT DMG",value:.08,pre:"1102205",children:[]}]},{id:"1102207",stat:"ATK%",value:.06,pre:null,children:[]},{id:"1102208",stat:"DEF%",value:.075,pre:null,children:[{id:"1102209",stat:"CRIT DMG",value:.107,pre:"1102208",children:[]},{id:"1102210",stat:"ATK%",value:.08,pre:"1102208",children:[]}]}],max_sp:120,stats:{HP:931.392,ATK:640.332,DEF:363.825,SPD:115,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1103:{id:"1103",name:"Serval",rarity:4,path:"Erudition",element:"Lightning",traces:{"CRIT Rate":.187,"Effect Hit Rate":.18,"Effect RES":.1},traceTree:[{id:"1103201",stat:"CRIT Rate",value:.027,pre:null,children:[]},{id:"1103202",stat:"Effect Hit Rate",value:.04,pre:null,children:[{id:"1103203",stat:"CRIT Rate",value:.027,pre:"1103202",children:[]},{id:"1103204",stat:"Effect RES",value:.04,pre:"1103202",children:[]}]},{id:"1103205",stat:"CRIT Rate",value:.04,pre:null,children:[{id:"1103206",stat:"Effect Hit Rate",value:.06,pre:"1103205",children:[]},{id:"1103207",stat:"CRIT Rate",value:.04,pre:"1103205",children:[]}]},{id:"1103208",stat:"Effect RES",value:.06,pre:null,children:[]},{id:"1103209",stat:"Effect Hit Rate",value:.08,pre:null,children:[]},{id:"1103210",stat:"CRIT Rate",value:.053,pre:null,children:[]}],max_sp:100,stats:{HP:917.28,ATK:652.68,DEF:374.85,SPD:104,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1104:{id:"1104",name:"Gepard",rarity:5,path:"Preservation",element:"Ice",traces:{"DEF%":.125,"Ice DMG Boost":.224,"Effect RES":.18},traceTree:[{id:"1104201",stat:"Ice DMG Boost",value:.032,pre:null,children:[]},{id:"1104202",stat:"Effect RES",value:.04,pre:null,children:[{id:"1104203",stat:"Ice DMG Boost",value:.032,pre:"1104202",children:[]}]},{id:"1104204",stat:"DEF%",value:.05,pre:null,children:[]},{id:"1104205",stat:"Ice DMG Boost",value:.048,pre:null,children:[{id:"1104206",stat:"Effect RES",value:.06,pre:"1104205",children:[]}]},{id:"1104207",stat:"Ice DMG Boost",value:.048,pre:null,children:[]},{id:"1104208",stat:"DEF%",value:.075,pre:null,children:[{id:"1104209",stat:"Effect RES",value:.08,pre:"1104208",children:[]},{id:"1104210",stat:"Ice DMG Boost",value:.064,pre:"1104208",children:[]}]}],max_sp:100,stats:{HP:1397.088,ATK:543.312,DEF:654.885,SPD:92,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1105:{id:"1105",name:"Natasha",rarity:4,path:"Abundance",element:"Physical",traces:{"HP%":.28,"Effect RES":.18,"DEF%":.125},traceTree:[{id:"1105201",stat:"HP%",value:.04,pre:null,children:[]},{id:"1105202",stat:"Effect RES",value:.04,pre:null,children:[{id:"1105203",stat:"HP%",value:.04,pre:"1105202",children:[{id:"1105204",stat:"DEF%",value:.05,pre:"1105203",children:[]}]}]},{id:"1105205",stat:"HP%",value:.06,pre:null,children:[{id:"1105206",stat:"Effect RES",value:.06,pre:"1105205",children:[{id:"1105207",stat:"HP%",value:.06,pre:"1105206",children:[]}]}]},{id:"1105208",stat:"DEF%",value:.075,pre:null,children:[]},{id:"1105209",stat:"Effect RES",value:.08,pre:null,children:[]},{id:"1105210",stat:"HP%",value:.08,pre:null,children:[]}],max_sp:90,stats:{HP:1164.24,ATK:476.28,DEF:507.15,SPD:98,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1106:{id:"1106",name:"Pela",rarity:4,path:"Nihility",element:"Ice",traces:{"ATK%":.18,"Effect Hit Rate":.1,"Ice DMG Boost":.224},traceTree:[{id:"1106201",stat:"Ice DMG Boost",value:.032,pre:null,children:[{id:"1106210",stat:"Ice DMG Boost",value:.064,pre:"1106201",children:[]}]},{id:"1106202",stat:"ATK%",value:.04,pre:null,children:[{id:"1106203",stat:"Ice DMG Boost",value:.032,pre:"1106202",children:[{id:"1106204",stat:"Effect Hit Rate",value:.04,pre:"1106203",children:[]}]}]},{id:"1106205",stat:"Ice DMG Boost",value:.048,pre:null,children:[{id:"1106206",stat:"ATK%",value:.06,pre:"1106205",children:[{id:"1106207",stat:"Ice DMG Boost",value:.048,pre:"1106206",children:[]}]}]},{id:"1106208",stat:"Effect Hit Rate",value:.06,pre:null,children:[]},{id:"1106209",stat:"ATK%",value:.08,pre:null,children:[]}],max_sp:110,stats:{HP:987.84,ATK:546.84,DEF:463.05,SPD:105,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1107:{id:"1107",name:"Clara",rarity:5,path:"Destruction",element:"Physical",traces:{"HP%":.1,"ATK%":.28,"Physical DMG Boost":.144},traceTree:[{id:"1107201",stat:"ATK%",value:.04,pre:null,children:[]},{id:"1107202",stat:"Physical DMG Boost",value:.032,pre:null,children:[{id:"1107203",stat:"ATK%",value:.04,pre:"1107202",children:[{id:"1107204",stat:"HP%",value:.04,pre:"1107203",children:[]}]}]},{id:"1107205",stat:"ATK%",value:.06,pre:null,children:[{id:"1107206",stat:"Physical DMG Boost",value:.048,pre:"1107205",children:[{id:"1107207",stat:"ATK%",value:.06,pre:"1107206",children:[]}]}]},{id:"1107208",stat:"HP%",value:.06,pre:null,children:[{id:"1107209",stat:"Physical DMG Boost",value:.064,pre:"1107208",children:[]},{id:"1107210",stat:"ATK%",value:.08,pre:"1107208",children:[]}]}],max_sp:110,stats:{HP:1241.856,ATK:737.352,DEF:485.1,SPD:90,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1108:{id:"1108",name:"Sampo",rarity:4,path:"Nihility",element:"Wind",traces:{"Effect Hit Rate":.18,"Effect RES":.1,"ATK%":.28},traceTree:[{id:"1108201",stat:"ATK%",value:.04,pre:null,children:[{id:"1108210",stat:"ATK%",value:.08,pre:"1108201",children:[]}]},{id:"1108202",stat:"Effect Hit Rate",value:.04,pre:null,children:[{id:"1108203",stat:"ATK%",value:.04,pre:"1108202",children:[{id:"1108204",stat:"Effect RES",value:.04,pre:"1108203",children:[]}]}]},{id:"1108205",stat:"ATK%",value:.06,pre:null,children:[{id:"1108206",stat:"Effect Hit Rate",value:.06,pre:"1108205",children:[{id:"1108207",stat:"ATK%",value:.06,pre:"1108206",children:[]}]}]},{id:"1108208",stat:"Effect RES",value:.06,pre:null,children:[]},{id:"1108209",stat:"Effect Hit Rate",value:.08,pre:null,children:[]}],max_sp:120,stats:{HP:1023.12,ATK:617.4,DEF:396.9,SPD:102,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1109:{id:"1109",name:"Hook",rarity:4,path:"Destruction",element:"Fire",traces:{"CRIT DMG":.133,"ATK%":.28,"HP%":.18},traceTree:[{id:"1109201",stat:"ATK%",value:.04,pre:null,children:[]},{id:"1109202",stat:"HP%",value:.04,pre:null,children:[{id:"1109203",stat:"ATK%",value:.04,pre:"1109202",children:[{id:"1109204",stat:"CRIT DMG",value:.053,pre:"1109203",children:[]}]}]},{id:"1109205",stat:"ATK%",value:.06,pre:null,children:[{id:"1109206",stat:"HP%",value:.06,pre:"1109205",children:[{id:"1109207",stat:"ATK%",value:.06,pre:"1109206",children:[]}]}]},{id:"1109208",stat:"CRIT DMG",value:.08,pre:null,children:[{id:"1109209",stat:"HP%",value:.08,pre:"1109208",children:[]},{id:"1109210",stat:"ATK%",value:.08,pre:"1109208",children:[]}]}],max_sp:120,stats:{HP:1340.64,ATK:617.4,DEF:352.8,SPD:94,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1110:{id:"1110",name:"Lynx",rarity:4,path:"Abundance",element:"Quantum",traces:{"HP%":.28,"DEF%":.225,"Effect RES":.1},traceTree:[{id:"1110201",stat:"HP%",value:.04,pre:null,children:[]},{id:"1110202",stat:"DEF%",value:.05,pre:null,children:[{id:"1110203",stat:"HP%",value:.04,pre:"1110202",children:[{id:"1110204",stat:"Effect RES",value:.04,pre:"1110203",children:[]}]}]},{id:"1110205",stat:"HP%",value:.06,pre:null,children:[{id:"1110206",stat:"DEF%",value:.075,pre:"1110205",children:[{id:"1110207",stat:"HP%",value:.06,pre:"1110206",children:[]}]}]},{id:"1110208",stat:"Effect RES",value:.06,pre:null,children:[]},{id:"1110209",stat:"DEF%",value:.1,pre:null,children:[]},{id:"1110210",stat:"HP%",value:.08,pre:null,children:[]}],max_sp:100,stats:{HP:1058.4,ATK:493.92,DEF:551.25,SPD:100,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1111:{id:"1111",name:"Luka",rarity:4,path:"Nihility",element:"Physical",traces:{"Effect Hit Rate":.18,"DEF%":.125,"ATK%":.28},traceTree:[{id:"1111201",stat:"ATK%",value:.04,pre:null,children:[{id:"1111210",stat:"ATK%",value:.08,pre:"1111201",children:[]}]},{id:"1111202",stat:"Effect Hit Rate",value:.04,pre:null,children:[{id:"1111203",stat:"ATK%",value:.04,pre:"1111202",children:[{id:"1111204",stat:"DEF%",value:.05,pre:"1111203",children:[]}]}]},{id:"1111205",stat:"ATK%",value:.06,pre:null,children:[{id:"1111206",stat:"Effect Hit Rate",value:.06,pre:"1111205",children:[{id:"1111207",stat:"ATK%",value:.06,pre:"1111206",children:[]}]}]},{id:"1111208",stat:"DEF%",value:.075,pre:null,children:[]},{id:"1111209",stat:"Effect Hit Rate",value:.08,pre:null,children:[]}],max_sp:130,stats:{HP:917.28,ATK:582.12,DEF:485.1,SPD:103,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1112:{id:"1112",name:"Topaz & Numby",rarity:5,path:"Hunt",element:"Fire",traces:{"HP%":.1,"Fire DMG Boost":.224,"CRIT Rate":.12},traceTree:[{id:"1112201",stat:"Fire DMG Boost",value:.032,pre:null,children:[]},{id:"1112202",stat:"CRIT Rate",value:.027,pre:null,children:[{id:"1112203",stat:"Fire DMG Boost",value:.032,pre:"1112202",children:[]}]},{id:"1112204",stat:"HP%",value:.04,pre:null,children:[]},{id:"1112205",stat:"Fire DMG Boost",value:.048,pre:null,children:[{id:"1112206",stat:"CRIT Rate",value:.04,pre:"1112205",children:[]}]},{id:"1112207",stat:"Fire DMG Boost",value:.048,pre:null,children:[]},{id:"1112208",stat:"HP%",value:.06,pre:null,children:[{id:"1112209",stat:"CRIT Rate",value:.053,pre:"1112208",children:[]},{id:"1112210",stat:"Fire DMG Boost",value:.064,pre:"1112208",children:[]}]}],max_sp:130,stats:{HP:931.392,ATK:620.928,DEF:412.335,SPD:110,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1201:{id:"1201",name:"Qingque",rarity:4,path:"Erudition",element:"Quantum",traces:{"ATK%":.28,"Quantum DMG Boost":.144,"DEF%":.125},traceTree:[{id:"1201201",stat:"ATK%",value:.04,pre:null,children:[]},{id:"1201202",stat:"Quantum DMG Boost",value:.032,pre:null,children:[{id:"1201203",stat:"ATK%",value:.04,pre:"1201202",children:[]},{id:"1201204",stat:"DEF%",value:.05,pre:"1201202",children:[]}]},{id:"1201205",stat:"ATK%",value:.06,pre:null,children:[{id:"1201206",stat:"Quantum DMG Boost",value:.048,pre:"1201205",children:[]},{id:"1201207",stat:"ATK%",value:.06,pre:"1201205",children:[]}]},{id:"1201208",stat:"DEF%",value:.075,pre:null,children:[]},{id:"1201209",stat:"Quantum DMG Boost",value:.064,pre:null,children:[]},{id:"1201210",stat:"ATK%",value:.08,pre:null,children:[]}],max_sp:140,stats:{HP:1023.12,ATK:652.68,DEF:441,SPD:98,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1202:{id:"1202",name:"Tingyun",rarity:4,path:"Harmony",element:"Lightning",traces:{"Lightning DMG Boost":.08,"ATK%":.28,"DEF%":.225},traceTree:[{id:"1202201",stat:"ATK%",value:.04,pre:null,children:[{id:"1202204",stat:"Lightning DMG Boost",value:.032,pre:"1202201",children:[]},{id:"1202207",stat:"ATK%",value:.06,pre:"1202201",children:[]}]},{id:"1202202",stat:"DEF%",value:.05,pre:null,children:[{id:"1202203",stat:"ATK%",value:.04,pre:"1202202",children:[]}]},{id:"1202205",stat:"ATK%",value:.06,pre:null,children:[{id:"1202206",stat:"DEF%",value:.075,pre:"1202205",children:[]}]},{id:"1202208",stat:"Lightning DMG Boost",value:.048,pre:null,children:[{id:"1202209",stat:"DEF%",value:.1,pre:"1202208",children:[]},{id:"1202210",stat:"ATK%",value:.08,pre:"1202208",children:[]}]}],max_sp:130,stats:{HP:846.72,ATK:529.2,DEF:396.9,SPD:112,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1203:{id:"1203",name:"Luocha",rarity:5,path:"Abundance",element:"Imaginary",traces:{"ATK%":.28,"HP%":.18,"DEF%":.125},traceTree:[{id:"1203201",stat:"ATK%",value:.04,pre:null,children:[]},{id:"1203202",stat:"HP%",value:.04,pre:null,children:[{id:"1203203",stat:"ATK%",value:.04,pre:"1203202",children:[{id:"1203204",stat:"DEF%",value:.05,pre:"1203203",children:[]}]}]},{id:"1203205",stat:"ATK%",value:.06,pre:null,children:[{id:"1203206",stat:"HP%",value:.06,pre:"1203205",children:[{id:"1203207",stat:"ATK%",value:.06,pre:"1203206",children:[]}]}]},{id:"1203208",stat:"DEF%",value:.075,pre:null,children:[]},{id:"1203209",stat:"HP%",value:.08,pre:null,children:[]},{id:"1203210",stat:"ATK%",value:.08,pre:null,children:[]}],max_sp:100,stats:{HP:1280.664,ATK:756.756,DEF:363.825,SPD:101,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1204:{id:"1204",name:"Jing Yuan",rarity:5,path:"Erudition",element:"Lightning",traces:{"ATK%":.28,"CRIT Rate":.12,"DEF%":.125},traceTree:[{id:"1204201",stat:"ATK%",value:.04,pre:null,children:[]},{id:"1204202",stat:"CRIT Rate",value:.027,pre:null,children:[{id:"1204203",stat:"ATK%",value:.04,pre:"1204202",children:[]},{id:"1204204",stat:"DEF%",value:.05,pre:"1204202",children:[]}]},{id:"1204205",stat:"ATK%",value:.06,pre:null,children:[{id:"1204206",stat:"CRIT Rate",value:.04,pre:"1204205",children:[]},{id:"1204207",stat:"ATK%",value:.06,pre:"1204205",children:[]}]},{id:"1204208",stat:"DEF%",value:.075,pre:null,children:[]},{id:"1204209",stat:"CRIT Rate",value:.053,pre:null,children:[]},{id:"1204210",stat:"ATK%",value:.08,pre:null,children:[]}],max_sp:130,stats:{HP:1164.24,ATK:698.544,DEF:485.1,SPD:99,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1205:{id:"1205",name:"Blade",rarity:5,path:"Destruction",element:"Wind",traces:{"Effect RES":.1,"HP%":.28,"CRIT Rate":.12},traceTree:[{id:"1205201",stat:"HP%",value:.04,pre:null,children:[]},{id:"1205202",stat:"CRIT Rate",value:.027,pre:null,children:[{id:"1205203",stat:"HP%",value:.04,pre:"1205202",children:[{id:"1205204",stat:"Effect RES",value:.04,pre:"1205203",children:[]}]}]},{id:"1205205",stat:"HP%",value:.06,pre:null,children:[{id:"1205206",stat:"CRIT Rate",value:.04,pre:"1205205",children:[{id:"1205207",stat:"HP%",value:.06,pre:"1205206",children:[]}]}]},{id:"1205208",stat:"Effect RES",value:.06,pre:null,children:[{id:"1205209",stat:"CRIT Rate",value:.053,pre:"1205208",children:[]},{id:"1205210",stat:"HP%",value:.08,pre:"1205208",children:[]}]}],max_sp:130,stats:{HP:1358.28,ATK:543.312,DEF:485.1,SPD:97,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1206:{id:"1206",name:"Sushang",rarity:4,path:"Hunt",element:"Physical",traces:{"DEF%":.125,"ATK%":.28,"HP%":.18},traceTree:[{id:"1206201",stat:"ATK%",value:.04,pre:null,children:[]},{id:"1206202",stat:"HP%",value:.04,pre:null,children:[{id:"1206203",stat:"ATK%",value:.04,pre:"1206202",children:[]}]},{id:"1206204",stat:"DEF%",value:.05,pre:null,children:[]},{id:"1206205",stat:"ATK%",value:.06,pre:null,children:[{id:"1206206",stat:"HP%",value:.06,pre:"1206205",children:[]}]},{id:"1206207",stat:"ATK%",value:.06,pre:null,children:[]},{id:"1206208",stat:"DEF%",value:.075,pre:null,children:[{id:"1206209",stat:"HP%",value:.08,pre:"1206208",children:[]},{id:"1206210",stat:"ATK%",value:.08,pre:"1206208",children:[]}]}],max_sp:120,stats:{HP:917.28,ATK:564.48,DEF:418.95,SPD:107,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1207:{id:"1207",name:"Yukong",rarity:4,path:"Harmony",element:"Imaginary",traces:{"ATK%":.1,"Imaginary DMG Boost":.224,"HP%":.18},traceTree:[{id:"1207201",stat:"Imaginary DMG Boost",value:.032,pre:null,children:[{id:"1207204",stat:"ATK%",value:.04,pre:"1207201",children:[]},{id:"1207207",stat:"Imaginary DMG Boost",value:.048,pre:"1207201",children:[]}]},{id:"1207202",stat:"HP%",value:.04,pre:null,children:[{id:"1207203",stat:"Imaginary DMG Boost",value:.032,pre:"1207202",children:[]}]},{id:"1207205",stat:"Imaginary DMG Boost",value:.048,pre:null,children:[{id:"1207206",stat:"HP%",value:.06,pre:"1207205",children:[]}]},{id:"1207208",stat:"ATK%",value:.06,pre:null,children:[{id:"1207209",stat:"HP%",value:.08,pre:"1207208",children:[]},{id:"1207210",stat:"Imaginary DMG Boost",value:.064,pre:"1207208",children:[]}]}],max_sp:130,stats:{HP:917.28,ATK:599.76,DEF:374.85,SPD:107,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1208:{id:"1208",name:"Fu Xuan",rarity:5,path:"Preservation",element:"Quantum",traces:{"Effect RES":.1,"CRIT Rate":.187,"HP%":.18},traceTree:[{id:"1208201",stat:"CRIT Rate",value:.027,pre:null,children:[]},{id:"1208202",stat:"HP%",value:.04,pre:null,children:[{id:"1208203",stat:"CRIT Rate",value:.027,pre:"1208202",children:[]}]},{id:"1208204",stat:"Effect RES",value:.04,pre:null,children:[]},{id:"1208205",stat:"CRIT Rate",value:.04,pre:null,children:[{id:"1208206",stat:"HP%",value:.06,pre:"1208205",children:[]}]},{id:"1208207",stat:"CRIT Rate",value:.04,pre:null,children:[]},{id:"1208208",stat:"Effect RES",value:.06,pre:null,children:[{id:"1208209",stat:"HP%",value:.08,pre:"1208208",children:[]},{id:"1208210",stat:"CRIT Rate",value:.053,pre:"1208208",children:[]}]}],max_sp:135,stats:{HP:1474.704,ATK:465.696,DEF:606.375,SPD:100,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1209:{id:"1209",name:"Yanqing",rarity:5,path:"Hunt",element:"Ice",traces:{"HP%":.1,"ATK%":.28,"Ice DMG Boost":.144},traceTree:[{id:"1209201",stat:"ATK%",value:.04,pre:null,children:[]},{id:"1209202",stat:"Ice DMG Boost",value:.032,pre:null,children:[{id:"1209203",stat:"ATK%",value:.04,pre:"1209202",children:[]}]},{id:"1209204",stat:"HP%",value:.04,pre:null,children:[]},{id:"1209205",stat:"ATK%",value:.06,pre:null,children:[{id:"1209206",stat:"Ice DMG Boost",value:.048,pre:"1209205",children:[]}]},{id:"1209207",stat:"ATK%",value:.06,pre:null,children:[]},{id:"1209208",stat:"HP%",value:.06,pre:null,children:[{id:"1209209",stat:"Ice DMG Boost",value:.064,pre:"1209208",children:[]},{id:"1209210",stat:"ATK%",value:.08,pre:"1209208",children:[]}]}],max_sp:140,stats:{HP:892.584,ATK:679.14,DEF:412.335,SPD:109,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1210:{id:"1210",name:"Guinaifen",rarity:4,path:"Nihility",element:"Fire",traces:{"Break Effect":.24,"Effect Hit Rate":.1,"Fire DMG Boost":.224},traceTree:[{id:"1210201",stat:"Fire DMG Boost",value:.032,pre:null,children:[{id:"1210210",stat:"Fire DMG Boost",value:.064,pre:"1210201",children:[]}]},{id:"1210202",stat:"Break Effect",value:.053,pre:null,children:[{id:"1210203",stat:"Fire DMG Boost",value:.032,pre:"1210202",children:[{id:"1210204",stat:"Effect Hit Rate",value:.04,pre:"1210203",children:[]}]}]},{id:"1210205",stat:"Fire DMG Boost",value:.048,pre:null,children:[{id:"1210206",stat:"Break Effect",value:.08,pre:"1210205",children:[{id:"1210207",stat:"Fire DMG Boost",value:.048,pre:"1210206",children:[]}]}]},{id:"1210208",stat:"Effect Hit Rate",value:.06,pre:null,children:[]},{id:"1210209",stat:"Break Effect",value:.107,pre:null,children:[]}],max_sp:120,stats:{HP:882,ATK:582.12,DEF:441,SPD:106,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1211:{id:"1211",name:"Bailu",rarity:5,path:"Abundance",element:"Lightning",traces:{"HP%":.28,"DEF%":.225,"Effect RES":.1},traceTree:[{id:"1211201",stat:"HP%",value:.04,pre:null,children:[]},{id:"1211202",stat:"DEF%",value:.05,pre:null,children:[{id:"1211203",stat:"HP%",value:.04,pre:"1211202",children:[{id:"1211204",stat:"Effect RES",value:.04,pre:"1211203",children:[]}]}]},{id:"1211205",stat:"HP%",value:.06,pre:null,children:[{id:"1211206",stat:"DEF%",value:.075,pre:"1211205",children:[{id:"1211207",stat:"HP%",value:.06,pre:"1211206",children:[]}]}]},{id:"1211208",stat:"Effect RES",value:.06,pre:null,children:[]},{id:"1211209",stat:"DEF%",value:.1,pre:null,children:[]},{id:"1211210",stat:"HP%",value:.08,pre:null,children:[]}],max_sp:100,stats:{HP:1319.472,ATK:562.716,DEF:485.1,SPD:98,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1212:{id:"1212",name:"Jingliu",rarity:5,path:"Destruction",element:"Ice",traces:{"HP%":.1,"CRIT DMG":.373,SPD:9},traceTree:[{id:"1212201",stat:"CRIT DMG",value:.053,pre:null,children:[]},{id:"1212202",stat:"SPD",value:2,pre:null,children:[{id:"1212203",stat:"CRIT DMG",value:.053,pre:"1212202",children:[{id:"1212204",stat:"HP%",value:.04,pre:"1212203",children:[]}]}]},{id:"1212205",stat:"CRIT DMG",value:.08,pre:null,children:[{id:"1212206",stat:"SPD",value:3,pre:"1212205",children:[{id:"1212207",stat:"CRIT DMG",value:.08,pre:"1212206",children:[]}]}]},{id:"1212208",stat:"HP%",value:.06,pre:null,children:[{id:"1212209",stat:"SPD",value:4,pre:"1212208",children:[]},{id:"1212210",stat:"CRIT DMG",value:.107,pre:"1212208",children:[]}]}],max_sp:140,stats:{HP:1435.896,ATK:679.14,DEF:485.1,SPD:96,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1213:{id:"1213",name:"Dan Heng • Imbibitor Lunae",rarity:5,path:"Destruction",element:"Imaginary",traces:{"HP%":.1,"Imaginary DMG Boost":.224,"CRIT Rate":.12},traceTree:[{id:"1213201",stat:"Imaginary DMG Boost",value:.032,pre:null,children:[]},{id:"1213202",stat:"CRIT Rate",value:.027,pre:null,children:[{id:"1213203",stat:"Imaginary DMG Boost",value:.032,pre:"1213202",children:[{id:"1213204",stat:"HP%",value:.04,pre:"1213203",children:[]}]}]},{id:"1213205",stat:"Imaginary DMG Boost",value:.048,pre:null,children:[{id:"1213206",stat:"CRIT Rate",value:.04,pre:"1213205",children:[{id:"1213207",stat:"Imaginary DMG Boost",value:.048,pre:"1213206",children:[]}]}]},{id:"1213208",stat:"HP%",value:.06,pre:null,children:[{id:"1213209",stat:"CRIT Rate",value:.053,pre:"1213208",children:[]},{id:"1213210",stat:"Imaginary DMG Boost",value:.064,pre:"1213208",children:[]}]}],max_sp:140,stats:{HP:1241.856,ATK:698.544,DEF:363.825,SPD:102,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1214:{id:"1214",name:"Xueyi",rarity:4,path:"Destruction",element:"Quantum",traces:{"Quantum DMG Boost":.08,"Break Effect":.373,"HP%":.18},traceTree:[{id:"1214201",stat:"Break Effect",value:.053,pre:null,children:[]},{id:"1214202",stat:"HP%",value:.04,pre:null,children:[{id:"1214203",stat:"Break Effect",value:.053,pre:"1214202",children:[{id:"1214204",stat:"Quantum DMG Boost",value:.032,pre:"1214203",children:[]}]}]},{id:"1214205",stat:"Break Effect",value:.08,pre:null,children:[{id:"1214206",stat:"HP%",value:.06,pre:"1214205",children:[{id:"1214207",stat:"Break Effect",value:.08,pre:"1214206",children:[]}]}]},{id:"1214208",stat:"Quantum DMG Boost",value:.048,pre:null,children:[{id:"1214209",stat:"HP%",value:.08,pre:"1214208",children:[]},{id:"1214210",stat:"Break Effect",value:.107,pre:"1214208",children:[]}]}],max_sp:120,stats:{HP:1058.4,ATK:599.76,DEF:396.9,SPD:103,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1215:{id:"1215",name:"Hanya",rarity:4,path:"Harmony",element:"Physical",traces:{"HP%":.1,"ATK%":.28,SPD:9},traceTree:[{id:"1215201",stat:"ATK%",value:.04,pre:null,children:[{id:"1215204",stat:"HP%",value:.04,pre:"1215201",children:[]},{id:"1215207",stat:"ATK%",value:.06,pre:"1215201",children:[]}]},{id:"1215202",stat:"SPD",value:2,pre:null,children:[{id:"1215203",stat:"ATK%",value:.04,pre:"1215202",children:[]}]},{id:"1215205",stat:"ATK%",value:.06,pre:null,children:[{id:"1215206",stat:"SPD",value:3,pre:"1215205",children:[]}]},{id:"1215208",stat:"HP%",value:.06,pre:null,children:[{id:"1215209",stat:"SPD",value:4,pre:"1215208",children:[]},{id:"1215210",stat:"ATK%",value:.08,pre:"1215208",children:[]}]}],max_sp:140,stats:{HP:917.28,ATK:564.48,DEF:352.8,SPD:110,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1217:{id:"1217",name:"Huohuo",rarity:5,path:"Abundance",element:"Wind",traces:{"HP%":.28,"Effect RES":.18,SPD:5},traceTree:[{id:"1217201",stat:"HP%",value:.04,pre:null,children:[]},{id:"1217202",stat:"Effect RES",value:.04,pre:null,children:[{id:"1217203",stat:"HP%",value:.04,pre:"1217202",children:[{id:"1217204",stat:"SPD",value:2,pre:"1217203",children:[]}]}]},{id:"1217205",stat:"HP%",value:.06,pre:null,children:[{id:"1217206",stat:"Effect RES",value:.06,pre:"1217205",children:[{id:"1217207",stat:"HP%",value:.06,pre:"1217206",children:[]}]}]},{id:"1217208",stat:"SPD",value:3,pre:null,children:[]},{id:"1217209",stat:"Effect RES",value:.08,pre:null,children:[]},{id:"1217210",stat:"HP%",value:.08,pre:null,children:[]}],max_sp:140,stats:{HP:1358.28,ATK:601.524,DEF:509.355,SPD:98,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1218:{id:"1218",name:"Jiaoqiu",rarity:5,path:"Nihility",element:"Fire",traces:{"Fire DMG Boost":.144,SPD:5,"Effect Hit Rate":.28},traceTree:[{id:"1218201",stat:"Effect Hit Rate",value:.04,pre:null,children:[{id:"1218210",stat:"Effect Hit Rate",value:.08,pre:"1218201",children:[]}]},{id:"1218202",stat:"Fire DMG Boost",value:.032,pre:null,children:[{id:"1218203",stat:"Effect Hit Rate",value:.04,pre:"1218202",children:[{id:"1218204",stat:"SPD",value:2,pre:"1218203",children:[]}]}]},{id:"1218205",stat:"Effect Hit Rate",value:.06,pre:null,children:[{id:"1218206",stat:"Fire DMG Boost",value:.048,pre:"1218205",children:[{id:"1218207",stat:"Effect Hit Rate",value:.06,pre:"1218206",children:[]}]}]},{id:"1218208",stat:"SPD",value:3,pre:null,children:[]},{id:"1218209",stat:"Fire DMG Boost",value:.064,pre:null,children:[]}],max_sp:100,stats:{HP:1358.28,ATK:601.524,DEF:509.355,SPD:98,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1220:{id:"1220",name:"Feixiao",rarity:5,path:"Hunt",element:"Wind",traces:{"DEF%":.125,"ATK%":.28,"CRIT Rate":.12},traceTree:[{id:"1220201",stat:"ATK%",value:.04,pre:null,children:[]},{id:"1220202",stat:"CRIT Rate",value:.027,pre:null,children:[{id:"1220203",stat:"ATK%",value:.04,pre:"1220202",children:[]}]},{id:"1220204",stat:"DEF%",value:.05,pre:null,children:[]},{id:"1220205",stat:"ATK%",value:.06,pre:null,children:[{id:"1220206",stat:"CRIT Rate",value:.04,pre:"1220205",children:[]}]},{id:"1220207",stat:"ATK%",value:.06,pre:null,children:[]},{id:"1220208",stat:"DEF%",value:.075,pre:null,children:[{id:"1220209",stat:"CRIT Rate",value:.053,pre:"1220208",children:[]},{id:"1220210",stat:"ATK%",value:.08,pre:"1220208",children:[]}]}],max_sp:12,stats:{HP:1047.816,ATK:601.524,DEF:388.08,SPD:112,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1221:{id:"1221",name:"Yunli",rarity:5,path:"Destruction",element:"Physical",traces:{"CRIT Rate":.067,"ATK%":.28,"HP%":.18},traceTree:[{id:"1221201",stat:"ATK%",value:.04,pre:null,children:[]},{id:"1221202",stat:"HP%",value:.04,pre:null,children:[{id:"1221203",stat:"ATK%",value:.04,pre:"1221202",children:[{id:"1221204",stat:"CRIT Rate",value:.027,pre:"1221203",children:[]}]}]},{id:"1221205",stat:"ATK%",value:.06,pre:null,children:[{id:"1221206",stat:"HP%",value:.06,pre:"1221205",children:[{id:"1221207",stat:"ATK%",value:.06,pre:"1221206",children:[]}]}]},{id:"1221208",stat:"CRIT Rate",value:.04,pre:null,children:[{id:"1221209",stat:"HP%",value:.08,pre:"1221208",children:[]},{id:"1221210",stat:"ATK%",value:.08,pre:"1221208",children:[]}]}],max_sp:240,stats:{HP:1358.28,ATK:679.14,DEF:460.845,SPD:94,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1222:{id:"1222",name:"Lingsha",rarity:5,path:"Abundance",element:"Fire",traces:{"Break Effect":.373,"HP%":.18,"ATK%":.1},traceTree:[{id:"1222201",stat:"Break Effect",value:.053,pre:null,children:[]},{id:"1222202",stat:"HP%",value:.04,pre:null,children:[{id:"1222203",stat:"Break Effect",value:.053,pre:"1222202",children:[{id:"1222204",stat:"ATK%",value:.04,pre:"1222203",children:[]}]}]},{id:"1222205",stat:"Break Effect",value:.08,pre:null,children:[{id:"1222206",stat:"HP%",value:.06,pre:"1222205",children:[{id:"1222207",stat:"Break Effect",value:.08,pre:"1222206",children:[]}]}]},{id:"1222208",stat:"ATK%",value:.06,pre:null,children:[]},{id:"1222209",stat:"HP%",value:.08,pre:null,children:[]},{id:"1222210",stat:"Break Effect",value:.107,pre:null,children:[]}],max_sp:110,stats:{HP:1358.28,ATK:679.14,DEF:436.59,SPD:98,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1223:{id:"1223",name:"Moze",rarity:4,path:"Hunt",element:"Lightning",traces:{"HP%":.1,"CRIT DMG":.373,"ATK%":.18},traceTree:[{id:"1223201",stat:"CRIT DMG",value:.053,pre:null,children:[]},{id:"1223202",stat:"ATK%",value:.04,pre:null,children:[{id:"1223203",stat:"CRIT DMG",value:.053,pre:"1223202",children:[]}]},{id:"1223204",stat:"HP%",value:.04,pre:null,children:[]},{id:"1223205",stat:"CRIT DMG",value:.08,pre:null,children:[{id:"1223206",stat:"ATK%",value:.06,pre:"1223205",children:[]}]},{id:"1223207",stat:"CRIT DMG",value:.08,pre:null,children:[]},{id:"1223208",stat:"HP%",value:.06,pre:null,children:[{id:"1223209",stat:"ATK%",value:.08,pre:"1223208",children:[]},{id:"1223210",stat:"CRIT DMG",value:.107,pre:"1223208",children:[]}]}],max_sp:120,stats:{HP:811.44,ATK:599.76,DEF:352.8,SPD:111,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1224:{id:"1224",name:"March 7th",rarity:4,path:"Hunt",element:"Imaginary",traces:{"DEF%":.125,"ATK%":.28,"CRIT DMG":.24},traceTree:[{id:"1224201",stat:"ATK%",value:.04,pre:null,children:[]},{id:"1224202",stat:"CRIT DMG",value:.053,pre:null,children:[{id:"1224203",stat:"ATK%",value:.04,pre:"1224202",children:[]}]},{id:"1224204",stat:"DEF%",value:.05,pre:null,children:[]},{id:"1224205",stat:"ATK%",value:.06,pre:null,children:[{id:"1224206",stat:"CRIT DMG",value:.08,pre:"1224205",children:[]}]},{id:"1224207",stat:"ATK%",value:.06,pre:null,children:[]},{id:"1224208",stat:"DEF%",value:.075,pre:null,children:[{id:"1224209",stat:"CRIT DMG",value:.107,pre:"1224208",children:[]},{id:"1224210",stat:"ATK%",value:.08,pre:"1224208",children:[]}]}],max_sp:110,stats:{HP:1058.4,ATK:564.48,DEF:441,SPD:102,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1225:{id:"1225",name:"Fugue",rarity:5,path:"Nihility",element:"Fire",traces:{"Break Effect":.24,"HP%":.1,SPD:14},traceTree:[{id:"1225201",stat:"SPD",value:2,pre:null,children:[{id:"1225210",stat:"SPD",value:4,pre:"1225201",children:[]}]},{id:"1225202",stat:"Break Effect",value:.053,pre:null,children:[{id:"1225203",stat:"SPD",value:2,pre:"1225202",children:[{id:"1225204",stat:"HP%",value:.04,pre:"1225203",children:[]}]}]},{id:"1225205",stat:"SPD",value:3,pre:null,children:[{id:"1225206",stat:"Break Effect",value:.08,pre:"1225205",children:[{id:"1225207",stat:"SPD",value:3,pre:"1225206",children:[]}]}]},{id:"1225208",stat:"HP%",value:.06,pre:null,children:[]},{id:"1225209",stat:"Break Effect",value:.107,pre:null,children:[]}],max_sp:130,stats:{HP:1125.432,ATK:582.12,DEF:557.865,SPD:102,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1301:{id:"1301",name:"Gallagher",rarity:4,path:"Abundance",element:"Fire",traces:{"HP%":.18,"Effect RES":.28,"Break Effect":.133},traceTree:[{id:"1301201",stat:"Effect RES",value:.04,pre:null,children:[]},{id:"1301202",stat:"Break Effect",value:.053,pre:null,children:[{id:"1301203",stat:"Effect RES",value:.04,pre:"1301202",children:[{id:"1301204",stat:"HP%",value:.04,pre:"1301203",children:[]}]}]},{id:"1301205",stat:"Effect RES",value:.06,pre:null,children:[{id:"1301206",stat:"Break Effect",value:.08,pre:"1301205",children:[{id:"1301207",stat:"Effect RES",value:.06,pre:"1301206",children:[]}]}]},{id:"1301208",stat:"HP%",value:.06,pre:null,children:[]},{id:"1301209",stat:"Effect RES",value:.08,pre:null,children:[]},{id:"1301210",stat:"HP%",value:.08,pre:null,children:[]}],max_sp:110,stats:{HP:1305.36,ATK:529.2,DEF:441,SPD:98,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1302:{id:"1302",name:"Argenti",rarity:5,path:"Erudition",element:"Physical",traces:{"ATK%":.28,"Physical DMG Boost":.144,"HP%":.1},traceTree:[{id:"1302201",stat:"ATK%",value:.04,pre:null,children:[]},{id:"1302202",stat:"Physical DMG Boost",value:.032,pre:null,children:[{id:"1302203",stat:"ATK%",value:.04,pre:"1302202",children:[]},{id:"1302204",stat:"HP%",value:.04,pre:"1302202",children:[]}]},{id:"1302205",stat:"ATK%",value:.06,pre:null,children:[{id:"1302206",stat:"Physical DMG Boost",value:.048,pre:"1302205",children:[]},{id:"1302207",stat:"ATK%",value:.06,pre:"1302205",children:[]}]},{id:"1302208",stat:"HP%",value:.06,pre:null,children:[]},{id:"1302209",stat:"Physical DMG Boost",value:.064,pre:null,children:[]},{id:"1302210",stat:"ATK%",value:.08,pre:null,children:[]}],max_sp:180,stats:{HP:1047.816,ATK:737.352,DEF:363.825,SPD:103,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1303:{id:"1303",name:"Ruan Mei",rarity:5,path:"Harmony",element:"Ice",traces:{SPD:5,"Break Effect":.373,"DEF%":.225},traceTree:[{id:"1303201",stat:"Break Effect",value:.053,pre:null,children:[{id:"1303204",stat:"SPD",value:2,pre:"1303201",children:[]},{id:"1303207",stat:"Break Effect",value:.08,pre:"1303201",children:[]}]},{id:"1303202",stat:"DEF%",value:.05,pre:null,children:[{id:"1303203",stat:"Break Effect",value:.053,pre:"1303202",children:[]}]},{id:"1303205",stat:"Break Effect",value:.08,pre:null,children:[{id:"1303206",stat:"DEF%",value:.075,pre:"1303205",children:[]}]},{id:"1303208",stat:"SPD",value:3,pre:null,children:[{id:"1303209",stat:"DEF%",value:.1,pre:"1303208",children:[]},{id:"1303210",stat:"Break Effect",value:.107,pre:"1303208",children:[]}]}],max_sp:130,stats:{HP:1086.624,ATK:659.736,DEF:485.1,SPD:104,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1304:{id:"1304",name:"Aventurine",rarity:5,path:"Preservation",element:"Imaginary",traces:{"Effect RES":.1,"DEF%":.35,"Imaginary DMG Boost":.144},traceTree:[{id:"1304201",stat:"DEF%",value:.05,pre:null,children:[]},{id:"1304202",stat:"Imaginary DMG Boost",value:.032,pre:null,children:[{id:"1304203",stat:"DEF%",value:.05,pre:"1304202",children:[]}]},{id:"1304204",stat:"Effect RES",value:.04,pre:null,children:[]},{id:"1304205",stat:"DEF%",value:.075,pre:null,children:[{id:"1304206",stat:"Imaginary DMG Boost",value:.048,pre:"1304205",children:[]}]},{id:"1304207",stat:"DEF%",value:.075,pre:null,children:[]},{id:"1304208",stat:"Effect RES",value:.06,pre:null,children:[{id:"1304209",stat:"Imaginary DMG Boost",value:.064,pre:"1304208",children:[]},{id:"1304210",stat:"DEF%",value:.1,pre:"1304208",children:[]}]}],max_sp:110,stats:{HP:1203.048,ATK:446.292,DEF:654.885,SPD:106,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1305:{id:"1305",name:"Dr. Ratio",rarity:5,path:"Hunt",element:"Imaginary",traces:{"DEF%":.125,"ATK%":.28,"CRIT Rate":.12},traceTree:[{id:"1305201",stat:"ATK%",value:.04,pre:null,children:[]},{id:"1305202",stat:"CRIT Rate",value:.027,pre:null,children:[{id:"1305203",stat:"ATK%",value:.04,pre:"1305202",children:[]}]},{id:"1305204",stat:"DEF%",value:.05,pre:null,children:[]},{id:"1305205",stat:"ATK%",value:.06,pre:null,children:[{id:"1305206",stat:"CRIT Rate",value:.04,pre:"1305205",children:[]}]},{id:"1305207",stat:"ATK%",value:.06,pre:null,children:[]},{id:"1305208",stat:"DEF%",value:.075,pre:null,children:[{id:"1305209",stat:"CRIT Rate",value:.053,pre:"1305208",children:[]},{id:"1305210",stat:"ATK%",value:.08,pre:"1305208",children:[]}]}],max_sp:140,stats:{HP:1047.816,ATK:776.16,DEF:460.845,SPD:103,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1306:{id:"1306",name:"Sparkle",rarity:5,path:"Harmony",element:"Quantum",traces:{"Effect RES":.1,"HP%":.28,"CRIT DMG":.24},traceTree:[{id:"1306201",stat:"HP%",value:.04,pre:null,children:[{id:"1306204",stat:"Effect RES",value:.04,pre:"1306201",children:[]},{id:"1306207",stat:"HP%",value:.06,pre:"1306201",children:[]}]},{id:"1306202",stat:"CRIT DMG",value:.053,pre:null,children:[{id:"1306203",stat:"HP%",value:.04,pre:"1306202",children:[]}]},{id:"1306205",stat:"HP%",value:.06,pre:null,children:[{id:"1306206",stat:"CRIT DMG",value:.08,pre:"1306205",children:[]}]},{id:"1306208",stat:"Effect RES",value:.06,pre:null,children:[{id:"1306209",stat:"CRIT DMG",value:.107,pre:"1306208",children:[]},{id:"1306210",stat:"HP%",value:.08,pre:"1306208",children:[]}]}],max_sp:110,stats:{HP:1397.088,ATK:523.908,DEF:485.1,SPD:101,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1307:{id:"1307",name:"Black Swan",rarity:5,path:"Nihility",element:"Wind",traces:{"Wind DMG Boost":.144,"Effect Hit Rate":.1,"ATK%":.28},traceTree:[{id:"1307201",stat:"ATK%",value:.04,pre:null,children:[{id:"1307210",stat:"ATK%",value:.08,pre:"1307201",children:[]}]},{id:"1307202",stat:"Wind DMG Boost",value:.032,pre:null,children:[{id:"1307203",stat:"ATK%",value:.04,pre:"1307202",children:[{id:"1307204",stat:"Effect Hit Rate",value:.04,pre:"1307203",children:[]}]}]},{id:"1307205",stat:"ATK%",value:.06,pre:null,children:[{id:"1307206",stat:"Wind DMG Boost",value:.048,pre:"1307205",children:[{id:"1307207",stat:"ATK%",value:.06,pre:"1307206",children:[]}]}]},{id:"1307208",stat:"Effect Hit Rate",value:.06,pre:null,children:[]},{id:"1307209",stat:"Wind DMG Boost",value:.064,pre:null,children:[]}],max_sp:120,stats:{HP:1086.624,ATK:659.736,DEF:485.1,SPD:102,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1308:{id:"1308",name:"Acheron",rarity:5,path:"Nihility",element:"Lightning",traces:{"CRIT DMG":.24,"Lightning DMG Boost":.08,"ATK%":.28},traceTree:[{id:"1308201",stat:"ATK%",value:.04,pre:null,children:[{id:"1308210",stat:"ATK%",value:.08,pre:"1308201",children:[]}]},{id:"1308202",stat:"CRIT DMG",value:.053,pre:null,children:[{id:"1308203",stat:"ATK%",value:.04,pre:"1308202",children:[{id:"1308204",stat:"Lightning DMG Boost",value:.032,pre:"1308203",children:[]}]}]},{id:"1308205",stat:"ATK%",value:.06,pre:null,children:[{id:"1308206",stat:"CRIT DMG",value:.08,pre:"1308205",children:[{id:"1308207",stat:"ATK%",value:.06,pre:"1308206",children:[]}]}]},{id:"1308208",stat:"Lightning DMG Boost",value:.048,pre:null,children:[]},{id:"1308209",stat:"CRIT DMG",value:.107,pre:null,children:[]}],max_sp:9,stats:{HP:1125.432,ATK:698.544,DEF:436.59,SPD:101,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1309:{id:"1309",name:"Robin",rarity:5,path:"Harmony",element:"Physical",traces:{SPD:5,"ATK%":.28,"HP%":.18},traceTree:[{id:"1309201",stat:"ATK%",value:.04,pre:null,children:[{id:"1309204",stat:"SPD",value:2,pre:"1309201",children:[]},{id:"1309207",stat:"ATK%",value:.06,pre:"1309201",children:[]}]},{id:"1309202",stat:"HP%",value:.04,pre:null,children:[{id:"1309203",stat:"ATK%",value:.04,pre:"1309202",children:[]}]},{id:"1309205",stat:"ATK%",value:.06,pre:null,children:[{id:"1309206",stat:"HP%",value:.06,pre:"1309205",children:[]}]},{id:"1309208",stat:"SPD",value:3,pre:null,children:[{id:"1309209",stat:"HP%",value:.08,pre:"1309208",children:[]},{id:"1309210",stat:"ATK%",value:.08,pre:"1309208",children:[]}]}],max_sp:160,stats:{HP:1280.664,ATK:640.332,DEF:485.1,SPD:102,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1310:{id:"1310",name:"Firefly",rarity:5,path:"Destruction",element:"Fire",traces:{SPD:5,"Break Effect":.373,"Effect RES":.18},traceTree:[{id:"1310201",stat:"Break Effect",value:.053,pre:null,children:[]},{id:"1310202",stat:"Effect RES",value:.04,pre:null,children:[{id:"1310203",stat:"Break Effect",value:.053,pre:"1310202",children:[{id:"1310204",stat:"SPD",value:2,pre:"1310203",children:[]}]}]},{id:"1310205",stat:"Break Effect",value:.08,pre:null,children:[{id:"1310206",stat:"Effect RES",value:.06,pre:"1310205",children:[{id:"1310207",stat:"Break Effect",value:.08,pre:"1310206",children:[]}]}]},{id:"1310208",stat:"SPD",value:3,pre:null,children:[{id:"1310209",stat:"Effect RES",value:.08,pre:"1310208",children:[]},{id:"1310210",stat:"Break Effect",value:.107,pre:"1310208",children:[]}]}],max_sp:240,stats:{HP:814.968,ATK:523.908,DEF:776.16,SPD:104,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1312:{id:"1312",name:"Misha",rarity:4,path:"Destruction",element:"Ice",traces:{"CRIT Rate":.067,"Ice DMG Boost":.224,"DEF%":.225},traceTree:[{id:"1312201",stat:"Ice DMG Boost",value:.032,pre:null,children:[]},{id:"1312202",stat:"DEF%",value:.05,pre:null,children:[{id:"1312203",stat:"Ice DMG Boost",value:.032,pre:"1312202",children:[{id:"1312204",stat:"CRIT Rate",value:.027,pre:"1312203",children:[]}]}]},{id:"1312205",stat:"Ice DMG Boost",value:.048,pre:null,children:[{id:"1312206",stat:"DEF%",value:.075,pre:"1312205",children:[{id:"1312207",stat:"Ice DMG Boost",value:.048,pre:"1312206",children:[]}]}]},{id:"1312208",stat:"CRIT Rate",value:.04,pre:null,children:[{id:"1312209",stat:"DEF%",value:.1,pre:"1312208",children:[]},{id:"1312210",stat:"Ice DMG Boost",value:.064,pre:"1312208",children:[]}]}],max_sp:100,stats:{HP:1270.08,ATK:599.76,DEF:396.9,SPD:96,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1313:{id:"1313",name:"Sunday",rarity:5,path:"Harmony",element:"Imaginary",traces:{"DEF%":.125,"CRIT DMG":.373,"Effect RES":.18},traceTree:[{id:"1313201",stat:"CRIT DMG",value:.053,pre:null,children:[{id:"1313204",stat:"DEF%",value:.05,pre:"1313201",children:[]},{id:"1313207",stat:"CRIT DMG",value:.08,pre:"1313201",children:[]}]},{id:"1313202",stat:"Effect RES",value:.04,pre:null,children:[{id:"1313203",stat:"CRIT DMG",value:.053,pre:"1313202",children:[]}]},{id:"1313205",stat:"CRIT DMG",value:.08,pre:null,children:[{id:"1313206",stat:"Effect RES",value:.06,pre:"1313205",children:[]}]},{id:"1313208",stat:"DEF%",value:.075,pre:null,children:[{id:"1313209",stat:"Effect RES",value:.08,pre:"1313208",children:[]},{id:"1313210",stat:"CRIT DMG",value:.107,pre:"1313208",children:[]}]}],max_sp:130,stats:{HP:1241.856,ATK:640.332,DEF:533.61,SPD:96,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1314:{id:"1314",name:"Jade",rarity:5,path:"Erudition",element:"Quantum",traces:{"Quantum DMG Boost":.224,"ATK%":.18,"Effect RES":.1},traceTree:[{id:"1314201",stat:"Quantum DMG Boost",value:.032,pre:null,children:[]},{id:"1314202",stat:"ATK%",value:.04,pre:null,children:[{id:"1314203",stat:"Quantum DMG Boost",value:.032,pre:"1314202",children:[]},{id:"1314204",stat:"Effect RES",value:.04,pre:"1314202",children:[]}]},{id:"1314205",stat:"Quantum DMG Boost",value:.048,pre:null,children:[{id:"1314206",stat:"ATK%",value:.06,pre:"1314205",children:[]},{id:"1314207",stat:"Quantum DMG Boost",value:.048,pre:"1314205",children:[]}]},{id:"1314208",stat:"Effect RES",value:.06,pre:null,children:[]},{id:"1314209",stat:"ATK%",value:.08,pre:null,children:[]},{id:"1314210",stat:"Quantum DMG Boost",value:.064,pre:null,children:[]}],max_sp:140,stats:{HP:1086.624,ATK:659.736,DEF:509.355,SPD:103,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1315:{id:"1315",name:"Boothill",rarity:5,path:"Hunt",element:"Physical",traces:{"HP%":.1,"Break Effect":.373,"ATK%":.18},traceTree:[{id:"1315201",stat:"Break Effect",value:.053,pre:null,children:[]},{id:"1315202",stat:"ATK%",value:.04,pre:null,children:[{id:"1315203",stat:"Break Effect",value:.053,pre:"1315202",children:[]}]},{id:"1315204",stat:"HP%",value:.04,pre:null,children:[]},{id:"1315205",stat:"Break Effect",value:.08,pre:null,children:[{id:"1315206",stat:"ATK%",value:.06,pre:"1315205",children:[]}]},{id:"1315207",stat:"Break Effect",value:.08,pre:null,children:[]},{id:"1315208",stat:"HP%",value:.06,pre:null,children:[{id:"1315209",stat:"ATK%",value:.08,pre:"1315208",children:[]},{id:"1315210",stat:"Break Effect",value:.107,pre:"1315208",children:[]}]}],max_sp:115,stats:{HP:1203.048,ATK:620.928,DEF:436.59,SPD:107,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1317:{id:"1317",name:"Rappa",rarity:5,path:"Erudition",element:"Imaginary",traces:{"ATK%":.28,SPD:9,"Break Effect":.133},traceTree:[{id:"1317201",stat:"ATK%",value:.04,pre:null,children:[]},{id:"1317202",stat:"SPD",value:2,pre:null,children:[{id:"1317203",stat:"ATK%",value:.04,pre:"1317202",children:[]},{id:"1317204",stat:"Break Effect",value:.053,pre:"1317202",children:[]}]},{id:"1317205",stat:"ATK%",value:.06,pre:null,children:[{id:"1317206",stat:"SPD",value:3,pre:"1317205",children:[]},{id:"1317207",stat:"ATK%",value:.06,pre:"1317205",children:[]}]},{id:"1317208",stat:"Break Effect",value:.08,pre:null,children:[]},{id:"1317209",stat:"SPD",value:4,pre:null,children:[]},{id:"1317210",stat:"ATK%",value:.08,pre:null,children:[]}],max_sp:140,stats:{HP:1086.624,ATK:717.948,DEF:460.845,SPD:96,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1401:{id:"1401",name:"The Herta",rarity:5,path:"Erudition",element:"Ice",traces:{"Ice DMG Boost":.224,"ATK%":.18,SPD:5},traceTree:[{id:"1401201",stat:"Ice DMG Boost",value:.032,pre:null,children:[]},{id:"1401202",stat:"ATK%",value:.04,pre:null,children:[{id:"1401203",stat:"Ice DMG Boost",value:.032,pre:"1401202",children:[]},{id:"1401204",stat:"SPD",value:2,pre:"1401202",children:[]}]},{id:"1401205",stat:"Ice DMG Boost",value:.048,pre:null,children:[{id:"1401206",stat:"ATK%",value:.06,pre:"1401205",children:[]},{id:"1401207",stat:"Ice DMG Boost",value:.048,pre:"1401205",children:[]}]},{id:"1401208",stat:"SPD",value:3,pre:null,children:[]},{id:"1401209",stat:"ATK%",value:.08,pre:null,children:[]},{id:"1401210",stat:"Ice DMG Boost",value:.064,pre:null,children:[]}],max_sp:220,stats:{HP:1164.24,ATK:679.14,DEF:485.1,SPD:99,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1402:{id:"1402",name:"Aglaea",rarity:5,path:"Remembrance",element:"Lightning",traces:{"DEF%":.125,"CRIT Rate":.12,"Lightning DMG Boost":.224},traceTree:[{id:"1402201",stat:"Lightning DMG Boost",value:.032,pre:null,children:[{id:"1402202",stat:"CRIT Rate",value:.027,pre:"1402201",children:[]},{id:"1402203",stat:"Lightning DMG Boost",value:.032,pre:"1402201",children:[]}]},{id:"1402204",stat:"DEF%",value:.05,pre:null,children:[]},{id:"1402205",stat:"Lightning DMG Boost",value:.048,pre:null,children:[]},{id:"1402206",stat:"CRIT Rate",value:.04,pre:null,children:[]},{id:"1402207",stat:"Lightning DMG Boost",value:.048,pre:null,children:[]},{id:"1402208",stat:"DEF%",value:.075,pre:null,children:[{id:"1402209",stat:"CRIT Rate",value:.053,pre:"1402208",children:[{id:"1402210",stat:"Lightning DMG Boost",value:.064,pre:"1402209",children:[]}]}]}],max_sp:350,stats:{HP:1241.856,ATK:698.544,DEF:485.1,SPD:102,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1403:{id:"1403",name:"Tribbie",rarity:5,path:"Harmony",element:"Quantum",traces:{"HP%":.1,"CRIT DMG":.373,"CRIT Rate":.12},traceTree:[{id:"1403201",stat:"CRIT DMG",value:.053,pre:null,children:[{id:"1403204",stat:"HP%",value:.04,pre:"1403201",children:[]},{id:"1403207",stat:"CRIT DMG",value:.08,pre:"1403201",children:[]}]},{id:"1403202",stat:"CRIT Rate",value:.027,pre:null,children:[{id:"1403203",stat:"CRIT DMG",value:.053,pre:"1403202",children:[]}]},{id:"1403205",stat:"CRIT DMG",value:.08,pre:null,children:[{id:"1403206",stat:"CRIT Rate",value:.04,pre:"1403205",children:[]}]},{id:"1403208",stat:"HP%",value:.06,pre:null,children:[{id:"1403209",stat:"CRIT Rate",value:.053,pre:"1403208",children:[]},{id:"1403210",stat:"CRIT DMG",value:.107,pre:"1403208",children:[]}]}],max_sp:120,stats:{HP:1047.816,ATK:523.908,DEF:727.65,SPD:96,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1404:{id:"1404",name:"Mydei",rarity:5,path:"Destruction",element:"Imaginary",traces:{SPD:5,"CRIT DMG":.373,"HP%":.18},traceTree:[{id:"1404201",stat:"CRIT DMG",value:.053,pre:null,children:[]},{id:"1404202",stat:"HP%",value:.04,pre:null,children:[{id:"1404203",stat:"CRIT DMG",value:.053,pre:"1404202",children:[{id:"1404204",stat:"SPD",value:2,pre:"1404203",children:[]}]}]},{id:"1404205",stat:"CRIT DMG",value:.08,pre:null,children:[{id:"1404206",stat:"HP%",value:.06,pre:"1404205",children:[{id:"1404207",stat:"CRIT DMG",value:.08,pre:"1404206",children:[]}]}]},{id:"1404208",stat:"SPD",value:3,pre:null,children:[{id:"1404209",stat:"HP%",value:.08,pre:"1404208",children:[]},{id:"1404210",stat:"CRIT DMG",value:.107,pre:"1404208",children:[]}]}],max_sp:160,stats:{HP:1552.32,ATK:426.888,DEF:194.04,SPD:95,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1405:{id:"1405",name:"Anaxa",rarity:5,path:"Erudition",element:"Wind",traces:{"Wind DMG Boost":.224,"CRIT Rate":.12,"HP%":.1},traceTree:[{id:"1405201_3.2v4",stat:"Wind DMG Boost",value:.032,pre:null,children:[]},{id:"1405202_3.2v4",stat:"CRIT Rate",value:.027,pre:null,children:[{id:"1405203_3.2v4",stat:"Wind DMG Boost",value:.032,pre:"1405202_3.2v4",children:[]},{id:"1405204_3.2v4",stat:"HP%",value:.04,pre:"1405202_3.2v4",children:[]}]},{id:"1405205_3.2v4",stat:"Wind DMG Boost",value:.048,pre:null,children:[{id:"1405206_3.2v4",stat:"CRIT Rate",value:.04,pre:"1405205_3.2v4",children:[]},{id:"1405207_3.2v4",stat:"Wind DMG Boost",value:.048,pre:"1405205_3.2v4",children:[]}]},{id:"1405208_3.2v4",stat:"HP%",value:.06,pre:null,children:[]},{id:"1405209_3.2v4",stat:"CRIT Rate",value:.053,pre:null,children:[]},{id:"1405210_3.2v4",stat:"Wind DMG Boost",value:.064,pre:null,children:[]}],max_sp:140,stats:{HP:970.2,ATK:756.756,DEF:557.865,SPD:97,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!0},1407:{id:"1407",name:"Castorice",rarity:5,path:"Remembrance",element:"Quantum",traces:{"CRIT DMG":.133,"Quantum DMG Boost":.144,"CRIT Rate":.187},traceTree:[{id:"1407201_3.2v4",stat:"CRIT Rate",value:.027,pre:null,children:[{id:"1407202_3.2v4",stat:"Quantum DMG Boost",value:.032,pre:"1407201_3.2v4",children:[]},{id:"1407203_3.2v4",stat:"CRIT Rate",value:.027,pre:"1407201_3.2v4",children:[]}]},{id:"1407204_3.2v4",stat:"CRIT DMG",value:.053,pre:null,children:[]},{id:"1407205_3.2v4",stat:"CRIT Rate",value:.04,pre:null,children:[]},{id:"1407206_3.2v4",stat:"Quantum DMG Boost",value:.048,pre:null,children:[]},{id:"1407207_3.2v4",stat:"CRIT Rate",value:.04,pre:null,children:[]},{id:"1407208_3.2v4",stat:"CRIT DMG",value:.08,pre:null,children:[{id:"1407209_3.2v4",stat:"Quantum DMG Boost",value:.064,pre:"1407208_3.2v4",children:[{id:"1407210_3.2v4",stat:"CRIT Rate",value:.053,pre:"1407209_3.2v4",children:[]}]}]}],max_sp:0,stats:{HP:1629.936,ATK:523.908,DEF:485.1,SPD:95,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!0},8001:{id:"8001",name:"Trailblazer",rarity:5,path:"Destruction",element:"Physical",traces:{"DEF%":.125,"ATK%":.28,"HP%":.18},traceTree:[{id:"8001201",stat:"ATK%",value:.04,pre:null,children:[]},{id:"8001202",stat:"HP%",value:.04,pre:null,children:[{id:"8001203",stat:"ATK%",value:.04,pre:"8001202",children:[{id:"8001204",stat:"DEF%",value:.05,pre:"8001203",children:[]}]}]},{id:"8001205",stat:"ATK%",value:.06,pre:null,children:[{id:"8001206",stat:"HP%",value:.06,pre:"8001205",children:[{id:"8001207",stat:"ATK%",value:.06,pre:"8001206",children:[]}]}]},{id:"8001208",stat:"DEF%",value:.075,pre:null,children:[{id:"8001209",stat:"HP%",value:.08,pre:"8001208",children:[]},{id:"8001210",stat:"ATK%",value:.08,pre:"8001208",children:[]}]}],max_sp:120,stats:{HP:1203.048,ATK:620.928,DEF:460.845,SPD:100,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},8002:{id:"8002",name:"Trailblazer",rarity:5,path:"Destruction",element:"Physical",traces:{"DEF%":.125,"ATK%":.28,"HP%":.18},traceTree:[{id:"8002201",stat:"ATK%",value:.04,pre:null,children:[]},{id:"8002202",stat:"HP%",value:.04,pre:null,children:[{id:"8002203",stat:"ATK%",value:.04,pre:"8002202",children:[{id:"8002204",stat:"DEF%",value:.05,pre:"8002203",children:[]}]}]},{id:"8002205",stat:"ATK%",value:.06,pre:null,children:[{id:"8002206",stat:"HP%",value:.06,pre:"8002205",children:[{id:"8002207",stat:"ATK%",value:.06,pre:"8002206",children:[]}]}]},{id:"8002208",stat:"DEF%",value:.075,pre:null,children:[{id:"8002209",stat:"HP%",value:.08,pre:"8002208",children:[]},{id:"8002210",stat:"ATK%",value:.08,pre:"8002208",children:[]}]}],max_sp:120,stats:{HP:1203.048,ATK:620.928,DEF:460.845,SPD:100,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},8003:{id:"8003",name:"Trailblazer",rarity:5,path:"Preservation",element:"Fire",traces:{"HP%":.1,"DEF%":.35,"ATK%":.18},traceTree:[{id:"8003201",stat:"DEF%",value:.05,pre:null,children:[]},{id:"8003202",stat:"ATK%",value:.04,pre:null,children:[{id:"8003203",stat:"DEF%",value:.05,pre:"8003202",children:[]}]},{id:"8003204",stat:"HP%",value:.04,pre:null,children:[]},{id:"8003205",stat:"DEF%",value:.075,pre:null,children:[{id:"8003206",stat:"ATK%",value:.06,pre:"8003205",children:[]}]},{id:"8003207",stat:"DEF%",value:.075,pre:null,children:[]},{id:"8003208",stat:"HP%",value:.06,pre:null,children:[{id:"8003209",stat:"ATK%",value:.08,pre:"8003208",children:[]},{id:"8003210",stat:"DEF%",value:.1,pre:"8003208",children:[]}]}],max_sp:120,stats:{HP:1241.856,ATK:601.524,DEF:606.375,SPD:95,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},8004:{id:"8004",name:"Trailblazer",rarity:5,path:"Preservation",element:"Fire",traces:{"HP%":.1,"DEF%":.35,"ATK%":.18},traceTree:[{id:"8004201",stat:"DEF%",value:.05,pre:null,children:[]},{id:"8004202",stat:"ATK%",value:.04,pre:null,children:[{id:"8004203",stat:"DEF%",value:.05,pre:"8004202",children:[]}]},{id:"8004204",stat:"HP%",value:.04,pre:null,children:[]},{id:"8004205",stat:"DEF%",value:.075,pre:null,children:[{id:"8004206",stat:"ATK%",value:.06,pre:"8004205",children:[]}]},{id:"8004207",stat:"DEF%",value:.075,pre:null,children:[]},{id:"8004208",stat:"HP%",value:.06,pre:null,children:[{id:"8004209",stat:"ATK%",value:.08,pre:"8004208",children:[]},{id:"8004210",stat:"DEF%",value:.1,pre:"8004208",children:[]}]}],max_sp:120,stats:{HP:1241.856,ATK:601.524,DEF:606.375,SPD:95,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},8005:{id:"8005",name:"Trailblazer",rarity:5,path:"Harmony",element:"Imaginary",traces:{"Effect RES":.1,"Break Effect":.373,"Imaginary DMG Boost":.144},traceTree:[{id:"8005201",stat:"Break Effect",value:.053,pre:null,children:[{id:"8005204",stat:"Effect RES",value:.04,pre:"8005201",children:[]},{id:"8005207",stat:"Break Effect",value:.08,pre:"8005201",children:[]}]},{id:"8005202",stat:"Imaginary DMG Boost",value:.032,pre:null,children:[{id:"8005203",stat:"Break Effect",value:.053,pre:"8005202",children:[]}]},{id:"8005205",stat:"Break Effect",value:.08,pre:null,children:[{id:"8005206",stat:"Imaginary DMG Boost",value:.048,pre:"8005205",children:[]}]},{id:"8005208",stat:"Effect RES",value:.06,pre:null,children:[{id:"8005209",stat:"Imaginary DMG Boost",value:.064,pre:"8005208",children:[]},{id:"8005210",stat:"Break Effect",value:.107,pre:"8005208",children:[]}]}],max_sp:140,stats:{HP:1086.624,ATK:446.292,DEF:679.14,SPD:105,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},8006:{id:"8006",name:"Trailblazer",rarity:5,path:"Harmony",element:"Imaginary",traces:{"Effect RES":.1,"Break Effect":.373,"Imaginary DMG Boost":.144},traceTree:[{id:"8006201",stat:"Break Effect",value:.053,pre:null,children:[{id:"8006204",stat:"Effect RES",value:.04,pre:"8006201",children:[]},{id:"8006207",stat:"Break Effect",value:.08,pre:"8006201",children:[]}]},{id:"8006202",stat:"Imaginary DMG Boost",value:.032,pre:null,children:[{id:"8006203",stat:"Break Effect",value:.053,pre:"8006202",children:[]}]},{id:"8006205",stat:"Break Effect",value:.08,pre:null,children:[{id:"8006206",stat:"Imaginary DMG Boost",value:.048,pre:"8006205",children:[]}]},{id:"8006208",stat:"Effect RES",value:.06,pre:null,children:[{id:"8006209",stat:"Imaginary DMG Boost",value:.064,pre:"8006208",children:[]},{id:"8006210",stat:"Break Effect",value:.107,pre:"8006208",children:[]}]}],max_sp:140,stats:{HP:1086.624,ATK:446.292,DEF:679.14,SPD:105,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},8007:{id:"8007",name:"Trailblazer",rarity:5,path:"Remembrance",element:"Ice",traces:{"ATK%":.14,"HP%":.14,"CRIT DMG":.373},traceTree:[{id:"8007201",stat:"CRIT DMG",value:.053,pre:null,children:[{id:"8007202",stat:"ATK%",value:.04,pre:"8007201",children:[]},{id:"8007203",stat:"CRIT DMG",value:.053,pre:"8007201",children:[]}]},{id:"8007204",stat:"ATK%",value:.04,pre:null,children:[]},{id:"8007205",stat:"CRIT DMG",value:.08,pre:null,children:[]},{id:"8007206",stat:"HP%",value:.06,pre:null,children:[]},{id:"8007207",stat:"CRIT DMG",value:.08,pre:null,children:[]},{id:"8007208",stat:"ATK%",value:.06,pre:null,children:[{id:"8007209",stat:"HP%",value:.08,pre:"8007208",children:[{id:"8007210",stat:"CRIT DMG",value:.107,pre:"8007209",children:[]}]}]}],max_sp:160,stats:{HP:1047.816,ATK:543.312,DEF:630.63,SPD:103,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},8008:{id:"8008",name:"Trailblazer",rarity:5,path:"Remembrance",element:"Ice",traces:{"ATK%":.14,"HP%":.14,"CRIT DMG":.373},traceTree:[{id:"8008201",stat:"CRIT DMG",value:.053,pre:null,children:[{id:"8008202",stat:"ATK%",value:.04,pre:"8008201",children:[]},{id:"8008203",stat:"CRIT DMG",value:.053,pre:"8008201",children:[]}]},{id:"8008204",stat:"ATK%",value:.04,pre:null,children:[]},{id:"8008205",stat:"CRIT DMG",value:.08,pre:null,children:[]},{id:"8008206",stat:"HP%",value:.06,pre:null,children:[]},{id:"8008207",stat:"CRIT DMG",value:.08,pre:null,children:[]},{id:"8008208",stat:"ATK%",value:.06,pre:null,children:[{id:"8008209",stat:"HP%",value:.08,pre:"8008208",children:[{id:"8008210",stat:"CRIT DMG",value:.107,pre:"8008209",children:[]}]}]}],max_sp:160,stats:{HP:1047.816,ATK:543.312,DEF:630.63,SPD:103,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1}},eh={2e4:{id:"20000",name:"Arrows",rarity:3,path:"Hunt",stats:{HP:846.72,ATK:317.52,DEF:264.6},unreleased:!1},20001:{id:"20001",name:"Cornucopia",rarity:3,path:"Abundance",stats:{HP:952.56,ATK:264.6,DEF:264.6},unreleased:!1},20002:{id:"20002",name:"Collapsing Sky",rarity:3,path:"Destruction",stats:{HP:846.72,ATK:370.44,DEF:198.45},unreleased:!1},20003:{id:"20003",name:"Amber",rarity:3,path:"Preservation",stats:{HP:846.72,ATK:264.6,DEF:330.75},unreleased:!1},20004:{id:"20004",name:"Void",rarity:3,path:"Nihility",stats:{HP:846.72,ATK:317.52,DEF:264.6},unreleased:!1},20005:{id:"20005",name:"Chorus",rarity:3,path:"Harmony",stats:{HP:846.72,ATK:317.52,DEF:264.6},unreleased:!1},20006:{id:"20006",name:"Data Bank",rarity:3,path:"Erudition",stats:{HP:740.88,ATK:370.44,DEF:264.6},unreleased:!1},20007:{id:"20007",name:"Darting Arrow",rarity:3,path:"Hunt",stats:{HP:740.88,ATK:370.44,DEF:264.6},unreleased:!1},20008:{id:"20008",name:"Fine Fruit",rarity:3,path:"Abundance",stats:{HP:952.56,ATK:317.52,DEF:198.45},unreleased:!1},20009:{id:"20009",name:"Shattered Home",rarity:3,path:"Destruction",stats:{HP:846.72,ATK:370.44,DEF:198.45},unreleased:!1},20010:{id:"20010",name:"Defense",rarity:3,path:"Preservation",stats:{HP:952.56,ATK:264.6,DEF:264.6},unreleased:!1},20011:{id:"20011",name:"Loop",rarity:3,path:"Nihility",stats:{HP:846.72,ATK:317.52,DEF:264.6},unreleased:!1},20012:{id:"20012",name:"Meshing Cogs",rarity:3,path:"Harmony",stats:{HP:846.72,ATK:317.52,DEF:264.6},unreleased:!1},20013:{id:"20013",name:"Passkey",rarity:3,path:"Erudition",stats:{HP:740.88,ATK:370.44,DEF:264.6},unreleased:!1},20014:{id:"20014",name:"Adversarial",rarity:3,path:"Hunt",stats:{HP:740.88,ATK:370.44,DEF:264.6},unreleased:!1},20015:{id:"20015",name:"Multiplication",rarity:3,path:"Abundance",stats:{HP:952.56,ATK:317.52,DEF:198.45},unreleased:!1},20016:{id:"20016",name:"Mutual Demise",rarity:3,path:"Destruction",stats:{HP:846.72,ATK:370.44,DEF:198.45},unreleased:!1},20017:{id:"20017",name:"Pioneering",rarity:3,path:"Preservation",stats:{HP:952.56,ATK:264.6,DEF:264.6},unreleased:!1},20018:{id:"20018",name:"Hidden Shadow",rarity:3,path:"Nihility",stats:{HP:846.72,ATK:317.52,DEF:264.6},unreleased:!1},20019:{id:"20019",name:"Mediation",rarity:3,path:"Harmony",stats:{HP:846.72,ATK:317.52,DEF:264.6},unreleased:!1},20020:{id:"20020",name:"Sagacity",rarity:3,path:"Erudition",stats:{HP:740.88,ATK:370.44,DEF:264.6},unreleased:!1},20021:{id:"20021",name:"Shadowburn",rarity:3,path:"Remembrance",stats:{HP:846.72,ATK:317.52,DEF:264.6},unreleased:!1},20022:{id:"20022",name:"Reminiscence",rarity:3,path:"Remembrance",stats:{HP:635.04,ATK:423.36,DEF:264.6},unreleased:!1},21e3:{id:"21000",name:"Post-Op Conversation",rarity:4,path:"Abundance",stats:{HP:1058.4,ATK:423.36,DEF:330.75},unreleased:!1},21001:{id:"21001",name:"Good Night and Sleep Well",rarity:4,path:"Nihility",stats:{HP:952.56,ATK:476.28,DEF:330.75},unreleased:!1},21002:{id:"21002",name:"Day One of My New Life",rarity:4,path:"Preservation",stats:{HP:952.56,ATK:370.44,DEF:463.05},unreleased:!1},21003:{id:"21003",name:"Only Silence Remains",rarity:4,path:"Hunt",stats:{HP:952.56,ATK:476.28,DEF:330.75},unreleased:!1},21004:{id:"21004",name:"Memories of the Past",rarity:4,path:"Harmony",stats:{HP:952.56,ATK:423.36,DEF:396.9},unreleased:!1},21005:{id:"21005",name:"The Moles Welcome You",rarity:4,path:"Destruction",stats:{HP:1058.4,ATK:476.28,DEF:264.6},unreleased:!1},21006:{id:"21006",name:"The Birth of the Self",rarity:4,path:"Erudition",stats:{HP:952.56,ATK:476.28,DEF:330.75},unreleased:!1},21007:{id:"21007",name:"Shared Feeling",rarity:4,path:"Abundance",stats:{HP:952.56,ATK:423.36,DEF:396.9},unreleased:!1},21008:{id:"21008",name:"Eyes of the Prey",rarity:4,path:"Nihility",stats:{HP:952.56,ATK:476.28,DEF:330.75},unreleased:!1},21009:{id:"21009",name:"Landau's Choice",rarity:4,path:"Preservation",stats:{HP:952.56,ATK:423.36,DEF:396.9},unreleased:!1},21010:{id:"21010",name:"Swordplay",rarity:4,path:"Hunt",stats:{HP:952.56,ATK:476.28,DEF:330.75},unreleased:!1},21011:{id:"21011",name:"Planetary Rendezvous",rarity:4,path:"Harmony",stats:{HP:1058.4,ATK:423.36,DEF:330.75},unreleased:!1},21012:{id:"21012",name:"A Secret Vow",rarity:4,path:"Destruction",stats:{HP:1058.4,ATK:476.28,DEF:264.6},unreleased:!1},21013:{id:"21013",name:"Make the World Clamor",rarity:4,path:"Erudition",stats:{HP:846.72,ATK:476.28,DEF:396.9},unreleased:!1},21014:{id:"21014",name:"Perfect Timing",rarity:4,path:"Abundance",stats:{HP:952.56,ATK:423.36,DEF:396.9},unreleased:!1},21015:{id:"21015",name:"Resolution Shines As Pearls of Sweat",rarity:4,path:"Nihility",stats:{HP:952.56,ATK:476.28,DEF:330.75},unreleased:!1},21016:{id:"21016",name:"Trend of the Universal Market",rarity:4,path:"Preservation",stats:{HP:1058.4,ATK:370.44,DEF:396.9},unreleased:!1},21017:{id:"21017",name:"Subscribe for More!",rarity:4,path:"Hunt",stats:{HP:952.56,ATK:476.28,DEF:330.75},unreleased:!1},21018:{id:"21018",name:"Dance! Dance! Dance!",rarity:4,path:"Harmony",stats:{HP:952.56,ATK:423.36,DEF:396.9},unreleased:!1},21019:{id:"21019",name:"Under the Blue Sky",rarity:4,path:"Destruction",stats:{HP:952.56,ATK:476.28,DEF:330.75},unreleased:!1},21020:{id:"21020",name:"Geniuses' Repose",rarity:4,path:"Erudition",stats:{HP:846.72,ATK:476.28,DEF:396.9},unreleased:!1},21021:{id:"21021",name:"Quid Pro Quo",rarity:4,path:"Abundance",stats:{HP:952.56,ATK:423.36,DEF:396.9},unreleased:!1},21022:{id:"21022",name:"Fermata",rarity:4,path:"Nihility",stats:{HP:952.56,ATK:476.28,DEF:330.75},unreleased:!1},21023:{id:"21023",name:"We Are Wildfire",rarity:4,path:"Preservation",stats:{HP:740.88,ATK:476.28,DEF:463.05},unreleased:!1},21024:{id:"21024",name:"River Flows in Spring",rarity:4,path:"Hunt",stats:{HP:846.72,ATK:476.28,DEF:396.9},unreleased:!1},21025:{id:"21025",name:"Past and Future",rarity:4,path:"Harmony",stats:{HP:952.56,ATK:423.36,DEF:396.9},unreleased:!1},21026:{id:"21026",name:"Woof! Walk Time!",rarity:4,path:"Destruction",stats:{HP:952.56,ATK:476.28,DEF:330.75},unreleased:!1},21027:{id:"21027",name:"The Seriousness of Breakfast",rarity:4,path:"Erudition",stats:{HP:846.72,ATK:476.28,DEF:396.9},unreleased:!1},21028:{id:"21028",name:"Warmth Shortens Cold Nights",rarity:4,path:"Abundance",stats:{HP:1058.4,ATK:370.44,DEF:396.9},unreleased:!1},21029:{id:"21029",name:"We Will Meet Again",rarity:4,path:"Nihility",stats:{HP:846.72,ATK:529.2,DEF:330.75},unreleased:!1},21030:{id:"21030",name:"This Is Me!",rarity:4,path:"Preservation",stats:{HP:846.72,ATK:370.44,DEF:529.2},unreleased:!1},21031:{id:"21031",name:"Return to Darkness",rarity:4,path:"Hunt",stats:{HP:846.72,ATK:529.2,DEF:330.75},unreleased:!1},21032:{id:"21032",name:"Carve the Moon, Weave the Clouds",rarity:4,path:"Harmony",stats:{HP:952.56,ATK:476.28,DEF:330.75},unreleased:!1},21033:{id:"21033",name:"Nowhere to Run",rarity:4,path:"Destruction",stats:{HP:952.56,ATK:529.2,DEF:264.6},unreleased:!1},21034:{id:"21034",name:"Today Is Another Peaceful Day",rarity:4,path:"Erudition",stats:{HP:846.72,ATK:529.2,DEF:330.75},unreleased:!1},21035:{id:"21035",name:"What Is Real?",rarity:4,path:"Abundance",stats:{HP:1058.4,ATK:423.36,DEF:330.75},unreleased:!1},21036:{id:"21036",name:"Dreamville Adventure",rarity:4,path:"Harmony",stats:{HP:952.56,ATK:423.36,DEF:396.9},unreleased:!1},21037:{id:"21037",name:"Final Victor",rarity:4,path:"Hunt",stats:{HP:952.56,ATK:476.28,DEF:330.75},unreleased:!1},21038:{id:"21038",name:"Flames Afar",rarity:4,path:"Destruction",stats:{HP:1058.4,ATK:476.28,DEF:264.6},unreleased:!1},21039:{id:"21039",name:"Destiny's Threads Forewoven",rarity:4,path:"Preservation",stats:{HP:952.56,ATK:370.44,DEF:463.05},unreleased:!1},21040:{id:"21040",name:"The Day The Cosmos Fell",rarity:4,path:"Erudition",stats:{HP:952.56,ATK:476.28,DEF:330.75},unreleased:!1},21041:{id:"21041",name:"It's Showtime",rarity:4,path:"Nihility",stats:{HP:1058.4,ATK:476.28,DEF:264.6},unreleased:!1},21042:{id:"21042",name:"Indelible Promise",rarity:4,path:"Destruction",stats:{HP:952.56,ATK:476.28,DEF:330.75},unreleased:!1},21043:{id:"21043",name:"Concert for Two",rarity:4,path:"Preservation",stats:{HP:952.56,ATK:370.44,DEF:463.05},unreleased:!1},21044:{id:"21044",name:"Boundless Choreo",rarity:4,path:"Nihility",stats:{HP:952.56,ATK:476.28,DEF:330.75},unreleased:!1},21045:{id:"21045",name:"After the Charmony Fall",rarity:4,path:"Erudition",stats:{HP:846.72,ATK:476.28,DEF:396.9},unreleased:!1},21046:{id:"21046",name:"Poised to Bloom",rarity:4,path:"Harmony",stats:{HP:952.56,ATK:423.36,DEF:396.9},unreleased:!1},21047:{id:"21047",name:"Shadowed by Night",rarity:4,path:"Hunt",stats:{HP:846.72,ATK:476.28,DEF:396.9},unreleased:!1},21048:{id:"21048",name:"Dream's Montage",rarity:4,path:"Abundance",stats:{HP:952.56,ATK:423.36,DEF:396.9},unreleased:!1},21050:{id:"21050",name:"Victory In a Blink",rarity:4,path:"Remembrance",stats:{HP:846.72,ATK:476.28,DEF:396.9},unreleased:!1},21051:{id:"21051",name:"Geniuses' Greetings",rarity:4,path:"Remembrance",stats:{HP:952.56,ATK:476.28,DEF:330.75},unreleased:!1},21052:{id:"21052",name:"Sweat Now, Cry Less",rarity:4,path:"Remembrance",stats:{HP:1058.4,ATK:529.2,DEF:198.45},unreleased:!1},22e3:{id:"22000",name:"Before the Tutorial Mission Starts",rarity:4,path:"Nihility",stats:{HP:952.56,ATK:476.28,DEF:330.75},unreleased:!1},22001:{id:"22001",name:"Hey, Over Here",rarity:4,path:"Abundance",stats:{HP:952.56,ATK:423.36,DEF:396.9},unreleased:!1},22002:{id:"22002",name:"For Tomorrow's Journey",rarity:4,path:"Harmony",stats:{HP:952.56,ATK:476.28,DEF:330.75},unreleased:!1},22003:{id:"22003",name:"Ninja Record: Sound Hunt",rarity:4,path:"Destruction",stats:{HP:1058.4,ATK:476.28,DEF:264.6},unreleased:!1},22004:{id:"22004",name:"The Great Cosmic Enterprise",rarity:4,path:"Erudition",stats:{HP:952.56,ATK:476.28,DEF:330.75},unreleased:!0},23e3:{id:"23000",name:"Night on the Milky Way",rarity:5,path:"Erudition",stats:{HP:1164.24,ATK:582.12,DEF:396.9},unreleased:!1},23001:{id:"23001",name:"In the Night",rarity:5,path:"Hunt",stats:{HP:1058.4,ATK:582.12,DEF:463.05},unreleased:!1},23002:{id:"23002",name:"Something Irreplaceable",rarity:5,path:"Destruction",stats:{HP:1164.24,ATK:582.12,DEF:396.9},unreleased:!1},23003:{id:"23003",name:"But the Battle Isn't Over",rarity:5,path:"Harmony",stats:{HP:1164.24,ATK:529.2,DEF:463.05},unreleased:!1},23004:{id:"23004",name:"In the Name of the World",rarity:5,path:"Nihility",stats:{HP:1058.4,ATK:582.12,DEF:463.05},unreleased:!1},23005:{id:"23005",name:"Moment of Victory",rarity:5,path:"Preservation",stats:{HP:1058.4,ATK:476.28,DEF:595.35},unreleased:!1},23006:{id:"23006",name:"Patience Is All You Need",rarity:5,path:"Nihility",stats:{HP:1058.4,ATK:582.12,DEF:463.05},unreleased:!1},23007:{id:"23007",name:"Incessant Rain",rarity:5,path:"Nihility",stats:{HP:1058.4,ATK:582.12,DEF:463.05},unreleased:!1},23008:{id:"23008",name:"Echoes of the Coffin",rarity:5,path:"Abundance",stats:{HP:1164.24,ATK:582.12,DEF:396.9},unreleased:!1},23009:{id:"23009",name:"The Unreachable Side",rarity:5,path:"Destruction",stats:{HP:1270.08,ATK:582.12,DEF:330.75},unreleased:!1},23010:{id:"23010",name:"Before Dawn",rarity:5,path:"Erudition",stats:{HP:1058.4,ATK:582.12,DEF:463.05},unreleased:!1},23011:{id:"23011",name:"She Already Shut Her Eyes",rarity:5,path:"Preservation",stats:{HP:1270.08,ATK:423.36,DEF:529.2},unreleased:!1},23012:{id:"23012",name:"Sleep Like the Dead",rarity:5,path:"Hunt",stats:{HP:1058.4,ATK:582.12,DEF:463.05},unreleased:!1},23013:{id:"23013",name:"Time Waits for No One",rarity:5,path:"Abundance",stats:{HP:1270.08,ATK:476.28,DEF:463.05},unreleased:!1},23014:{id:"23014",name:"I Shall Be My Own Sword",rarity:5,path:"Destruction",stats:{HP:1164.24,ATK:582.12,DEF:396.9},unreleased:!1},23015:{id:"23015",name:"Brighter Than the Sun",rarity:5,path:"Destruction",stats:{HP:1058.4,ATK:635.04,DEF:396.9},unreleased:!1},23016:{id:"23016",name:"Worrisome, Blissful",rarity:5,path:"Hunt",stats:{HP:1058.4,ATK:582.12,DEF:463.05},unreleased:!1},23017:{id:"23017",name:"Night of Fright",rarity:5,path:"Abundance",stats:{HP:1164.24,ATK:476.28,DEF:529.2},unreleased:!1},23018:{id:"23018",name:"An Instant Before A Gaze",rarity:5,path:"Erudition",stats:{HP:1058.4,ATK:582.12,DEF:463.05},unreleased:!1},23019:{id:"23019",name:"Past Self in Mirror",rarity:5,path:"Harmony",stats:{HP:1058.4,ATK:529.2,DEF:529.2},unreleased:!1},23020:{id:"23020",name:"Baptism of Pure Thought",rarity:5,path:"Hunt",stats:{HP:952.56,ATK:582.12,DEF:529.2},unreleased:!1},23021:{id:"23021",name:"Earthly Escapade",rarity:5,path:"Harmony",stats:{HP:1164.24,ATK:529.2,DEF:463.05},unreleased:!1},23022:{id:"23022",name:"Reforged Remembrance",rarity:5,path:"Nihility",stats:{HP:1058.4,ATK:582.12,DEF:463.05},unreleased:!1},23023:{id:"23023",name:"Inherently Unjust Destiny",rarity:5,path:"Preservation",stats:{HP:1058.4,ATK:423.36,DEF:661.5},unreleased:!1},23024:{id:"23024",name:"Along the Passing Shore",rarity:5,path:"Nihility",stats:{HP:1058.4,ATK:635.04,DEF:396.9},unreleased:!1},23025:{id:"23025",name:"Whereabouts Should Dreams Rest",rarity:5,path:"Destruction",stats:{HP:1164.24,ATK:476.28,DEF:529.2},unreleased:!1},23026:{id:"23026",name:"Flowing Nightglow",rarity:5,path:"Harmony",stats:{HP:952.56,ATK:635.04,DEF:463.05},unreleased:!1},23027:{id:"23027",name:"Sailing Towards a Second Life",rarity:5,path:"Hunt",stats:{HP:1058.4,ATK:582.12,DEF:463.05},unreleased:!1},23028:{id:"23028",name:"Yet Hope Is Priceless",rarity:5,path:"Erudition",stats:{HP:952.56,ATK:582.12,DEF:529.2},unreleased:!1},23029:{id:"23029",name:"Those Many Springs",rarity:5,path:"Nihility",stats:{HP:952.56,ATK:582.12,DEF:529.2},unreleased:!1},23030:{id:"23030",name:"Dance at Sunset",rarity:5,path:"Destruction",stats:{HP:1058.4,ATK:582.12,DEF:463.05},unreleased:!1},23031:{id:"23031",name:"I Venture Forth to Hunt",rarity:5,path:"Hunt",stats:{HP:952.56,ATK:635.04,DEF:463.05},unreleased:!1},23032:{id:"23032",name:"Scent Alone Stays True",rarity:5,path:"Abundance",stats:{HP:1058.4,ATK:529.2,DEF:529.2},unreleased:!1},23033:{id:"23033",name:"Ninjutsu Inscription: Dazzling Evilbreaker",rarity:5,path:"Erudition",stats:{HP:952.56,ATK:582.12,DEF:529.2},unreleased:!1},23034:{id:"23034",name:"A Grounded Ascent",rarity:5,path:"Harmony",stats:{HP:1164.24,ATK:476.28,DEF:529.2},unreleased:!1},23035:{id:"23035",name:"Long Road Leads Home",rarity:5,path:"Nihility",stats:{HP:952.56,ATK:476.28,DEF:661.5},unreleased:!1},23036:{id:"23036",name:"Time Woven Into Gold",rarity:5,path:"Remembrance",stats:{HP:1058.4,ATK:635.04,DEF:396.9},unreleased:!1},23037:{id:"23037",name:"Into the Unreachable Veil",rarity:5,path:"Erudition",stats:{HP:952.56,ATK:635.04,DEF:463.05},unreleased:!1},23038:{id:"23038",name:"If Time Were a Flower",rarity:5,path:"Harmony",stats:{HP:1270.08,ATK:529.2,DEF:396.9},unreleased:!1},23039:{id:"23039",name:"Flame of Blood, Blaze My Path",rarity:5,path:"Destruction",stats:{HP:1375.92,ATK:476.28,DEF:396.9},unreleased:!1},23040:{id:"23040",name:"Make Farewells More Beautiful",rarity:5,path:"Remembrance",stats:{HP:1270.08,ATK:529.2,DEF:396.9},unreleased:!0},23041:{id:"23041",name:"Life Should Be Cast to Flames",rarity:5,path:"Erudition",stats:{HP:952.56,ATK:582.12,DEF:529.2},unreleased:!0},24e3:{id:"24000",name:"On the Fall of an Aeon",rarity:5,path:"Destruction",stats:{HP:1058.4,ATK:529.2,DEF:396.9},unreleased:!1},24001:{id:"24001",name:"Cruising in the Stellar Sea",rarity:5,path:"Hunt",stats:{HP:952.56,ATK:529.2,DEF:463.05},unreleased:!1},24002:{id:"24002",name:"Texture of Memories",rarity:5,path:"Preservation",stats:{HP:1058.4,ATK:423.36,DEF:529.2},unreleased:!1},24003:{id:"24003",name:"Solitary Healing",rarity:5,path:"Nihility",stats:{HP:1058.4,ATK:529.2,DEF:396.9},unreleased:!1},24004:{id:"24004",name:"Eternal Calculus",rarity:5,path:"Erudition",stats:{HP:1058.4,ATK:529.2,DEF:396.9},unreleased:!1},24005:{id:"24005",name:"Memory's Curtain Never Falls",rarity:5,path:"Remembrance",stats:{HP:1058.4,ATK:529.2,DEF:396.9},unreleased:!1}},th=[{id:"320",name:"Giant Tree of Rapt Brooding",skills:"Increases the wearer's SPD by <b>6%</b>. When the wearer's SPD is <b>135</b>/<b>180</b> or higher, the wearer and their memosprite's Outgoing Healing increases by <b>12%</b>/<b>20%</b>."},{id:"319",name:"Bone Collection's Serene Demesne",skills:"Increases the wearer's Max HP by <b>12%</b>. When the wearer's Max HP is <b>5000</b> or higher, increases the wearer's and their memosprite's CRIT DMG by <b>28%</b>."},{id:"318",name:"The Wondrous BananAmusement Park",skills:"Increases the wearer's CRIT DMG by <b>16%</b>. When a target summoned by the wearer is on the field, CRIT DMG additionally increases by <b>32%</b>."},{id:"317",name:"Lushaka, the Sunken Seas",skills:"Increases the wearer's Energy Regeneration Rate by <b>5%</b>. If the wearer is not the first character in the team lineup, then increases the ATK of the first character in the team lineup by <b>12%</b>."},{id:"316",name:"Forge of the Kalpagni Lantern",skills:"Increases the wearer's SPD by <b>6%</b>. When the wearer hits an enemy target that has Fire Weakness, the wearer's Break Effect increases by <b>40%</b>, lasting for <b>1</b> turn(s)."},{id:"315",name:"Duran, Dynasty of Running Wolves",skills:"When an ally uses a Follow-up ATK, the wearer gains 1 stack of Merit, stacking up to <b>5</b> time(s). Each stack of Merit increases the DMG dealt by the wearer's Follow-up ATKs by <b>5%</b>. When there are <b>5</b> stacks, additionally increases the wearer's CRIT DMG by <b>25%</b>."},{id:"314",name:"Izumo Gensei and Takama Divine Realm",skills:"Increases the wearer's ATK by <b>12%</b>. When entering battle, if at least one teammate follows the same Path as the wearer, then the wearer's CRIT Rate increases by <b>12%</b>."},{id:"313",name:"Sigonia, the Unclaimed Desolation",skills:"Increases the wearer's CRIT Rate by <b>4%</b>. When an enemy target gets defeated, the wearer's CRIT DMG increases by <b>4%</b>, stacking up to <b>10</b> time(s)."},{id:"312",name:"Penacony, Land of the Dreams",skills:"Increases wearer's Energy Regeneration Rate by <b>5%</b>. Increases DMG by <b>10%</b> for all other allies that are of the same Type as the wearer."},{id:"311",name:"Firmament Frontline: Glamoth",skills:"Increases the wearer's ATK by <b>12%</b>. When the wearer's SPD is equal to or higher than <b>135</b>/<b>160</b>, the wearer deals <b>12%</b>/<b>18%</b> more DMG."},{id:"310",name:"Broken Keel",skills:"Increases the wearer's Effect RES by <b>10%</b>. When the wearer's Effect RES is at <b>30%</b> or higher, all allies' CRIT DMG increases by <b>10%</b>."},{id:"309",name:"Rutilant Arena",skills:"Increases the wearer's CRIT Rate by <b>8%</b>. When the wearer's current CRIT Rate reaches <b>70%</b> or higher, DMG dealt by Basic ATK and Skill increases by <b>20%</b>."},{id:"308",name:"Sprightly Vonwacq",skills:"Increases the wearer's Energy Regeneration Rate by <b>5%</b>. When the wearer's SPD reaches <b>120</b> or higher, the wearer's action is Advanced Forward by <b>40%</b> immediately upon entering battle."},{id:"307",name:"Talia: Kingdom of Banditry",skills:"Increases the wearer's Break Effect by <b>16%</b>. When the wearer's SPD reaches <b>145</b> or higher, the wearer's Break Effect increases by an extra <b>20%</b>."},{id:"306",name:"Inert Salsotto",skills:"Increases the wearer's CRIT Rate by <b>8%</b>. When the wearer's current CRIT Rate reaches <b>50%</b> or higher, the DMG dealt by the wearer's Ultimate and Follow-up ATK increases by <b>15%</b>."},{id:"305",name:"Celestial Differentiator",skills:"Increases the wearer's CRIT DMG by <b>16%</b>. When the wearer's current CRIT DMG reaches <b>120%</b> or higher, after entering battle, the wearer's CRIT Rate increases by <b>60%</b> until the end of their first attack."},{id:"304",name:"Belobog of the Architects",skills:"Increases the wearer's DEF by <b>15%</b>. When the wearer's Effect Hit Rate is <b>50%</b> or higher, the wearer gains an extra <b>15%</b> DEF."},{id:"303",name:"Pan-Cosmic Commercial Enterprise",skills:"Increases the wearer's Effect Hit Rate by <b>10%</b>. Meanwhile, the wearer's ATK increases by an amount that is equal to <b>25%</b> of the current Effect Hit Rate, up to a maximum of <b>25%</b>."},{id:"302",name:"Fleet of the Ageless",skills:"Increases the wearer's Max HP by <b>12%</b>. When the wearer's SPD reaches <b>120</b> or higher, all allies' ATK increases by <b>8%</b>."},{id:"301",name:"Space Sealing Station",skills:"Increases the wearer's ATK by <b>12%</b>. When the wearer's SPD reaches <b>120</b> or higher, the wearer's ATK increases by an extra <b>12%</b>."},{id:"124",name:"Poet of Mourning Collapse",skills:"Increases Quantum DMG by <b>10%</b>. Decreases the wearer's SPD by <b>8%</b>. Before entering battle, if the wearer's SPD is lower than <b>110</b>/<b>95</b>, increases the wearer's CRIT Rate by <b>20%</b>/<b>32%</b>. This effect applies to the wearer's memosprite at the same time."},{id:"123",name:"Hero of Triumphant Song",skills:"Increases ATK by <b>12%</b>. While the wearer's memosprite is on the field, increases the wearer's SPD by <b>6%</b>. When the wearer's memosprite attacks, increases the wearer's and memosprite's CRIT DMG by <b>30%</b>, lasting for <b>2</b> turn(s)."},{id:"122",name:"Scholar Lost in Erudition",skills:"Increases CRIT Rate by <b>8%</b>. Increases DMG dealt by Skill and Ultimate by <b>20%</b>. After using Ultimate, additionally increases the DMG dealt by the next Skill by <b>25%</b>."},{id:"121",name:"Sacerdos' Relived Ordeal",skills:"Increases SPD by <b>6%</b>. When using Skill or Ultimate on one ally target, increases the ability target's CRIT DMG by <b>18%</b>, lasting for <b>2</b> turn(s). This effect can stack up to <b>2</b> time(s)."},{id:"120",name:"The Wind-Soaring Valorous",skills:"Increases ATK by <b>12%</b>. Increases the wearer's CRIT Rate by <b>6%</b>. After the wearer uses a Follow-up ATK, increases DMG dealt by Ultimate by <b>36%</b>, lasting for <b>1</b> turn(s)."},{id:"119",name:"Iron Cavalry Against the Scourge",skills:"Increases Break Effect by <b>16%</b>. If the wearer's Break Effect is <b>150%</b> or higher, the Break DMG dealt to the enemy target ignores <b>10%</b> of their DEF. If the wearer's Break Effect is <b>250%</b> or higher, the Super Break DMG dealt to the enemy target additionally ignores <b>15%</b> of their DEF."},{id:"118",name:"Watchmaker, Master of Dream Machinations",skills:"Increases Break Effect by <b>16%</b>. When the wearer uses their Ultimate on an ally, all allies' Break Effect increases by <b>30%</b> for <b>2</b> turn(s). This effect cannot be stacked."},{id:"117",name:"Pioneer Diver of Dead Waters",skills:"Increases DMG dealt to enemies with debuffs by <b>12%</b>. Increases CRIT Rate by <b>4%</b>. The wearer deals <b>8%</b>/<b>12%</b> increased CRIT DMG to enemies with at least <b>2</b>/<b>3</b> debuffs. After the wearer inflicts a debuff on enemy targets, the aforementioned effects increase by <b>100%</b>, lasting for <b>1</b> turn(s)."},{id:"116",name:"Prisoner in Deep Confinement",skills:"Increases ATK by <b>12%</b>. For every DoT the enemy target is afflicted with, the wearer will ignore <b>6%</b> of its DEF when dealing DMG to it. This effect is valid for a max of <b>3</b> DoTs."},{id:"115",name:"The Ashblazing Grand Duke",skills:"Increases the DMG dealt by Follow-up ATK by <b>20%</b>. When the wearer uses a Follow-up ATK, increases the wearer's ATK by <b>6%</b> for every time the Follow-up ATK deals DMG. This effect can stack up to <b>8</b> time(s) and lasts for <b>3</b> turn(s). This effect is removed the next time the wearer uses a Follow-up ATK."},{id:"114",name:"Messenger Traversing Hackerspace",skills:"Increases SPD by <b>6%</b>. When the wearer uses their Ultimate on an ally, SPD for all allies increases by <b>12%</b> for <b>1</b> turn(s). This effect cannot be stacked."},{id:"113",name:"Longevous Disciple",skills:"Increases Max HP by <b>12%</b>. When the wearer is hit or has their HP consumed by an ally or themselves, their CRIT Rate increases by <b>8%</b> for <b>2</b> turn(s) and up to <b>2</b> stacks."},{id:"112",name:"Wastelander of Banditry Desert",skills:"Increases Imaginary DMG by <b>10%</b>. When dealing DMG to debuffed enemy targets, the wearer has their CRIT Rate increased by <b>10%</b>. And when they deal DMG to Imprisoned enemy targets, their CRIT DMG increases by <b>20%</b>."},{id:"111",name:"Thief of Shooting Meteor",skills:"Increases Break Effect by <b>16%</b>. Increases the wearer's Break Effect by <b>16%</b>. After the wearer inflicts Weakness Break on an enemy, regenerates <b>3</b> Energy."},{id:"110",name:"Eagle of Twilight Line",skills:"Increases Wind DMG by <b>10%</b>. After the wearer uses their Ultimate, their action is Advanced Forward by <b>25%</b>."},{id:"109",name:"Band of Sizzling Thunder",skills:"Increases Lightning DMG by <b>10%</b>. When the wearer uses their Skill, increases the wearer's ATK by <b>20%</b> for <b>1</b> turn(s)."},{id:"108",name:"Genius of Brilliant Stars",skills:"Increases Quantum DMG by <b>10%</b>. When the wearer deals DMG to the target enemy, ignores <b>10%</b> DEF. If the target enemy has Quantum Weakness, the wearer additionally ignores <b>10%</b> DEF."},{id:"107",name:"Firesmith of Lava-Forging",skills:"Increases Fire DMG by <b>10%</b>. Increases DMG by the wearer's Skill by <b>12%</b>. After unleashing Ultimate, increases the wearer's Fire DMG by <b>12%</b> for the next attack."},{id:"106",name:"Guard of Wuthering Snow",skills:"Reduces DMG taken by <b>8%</b>. At the beginning of the turn, if the wearer's HP percentage is equal to or less than <b>50%</b>, restores HP equal to <b>8%</b> of their Max HP and regenerates <b>5</b> Energy."},{id:"105",name:"Champion of Streetwise Boxing",skills:"Increases Physical DMG by <b>10%</b>. After the wearer attacks or is hit, their ATK increases by <b>5%</b> for the rest of the battle. This effect can stack up to <b>5</b> time(s)."},{id:"104",name:"Hunter of Glacial Forest",skills:"Increases Ice DMG by <b>10%</b>. After the wearer uses their Ultimate, their CRIT DMG increases by <b>25%</b> for <b>2</b> turn(s)."},{id:"103",name:"Knight of Purity Palace",skills:"Increases DEF by <b>15%</b>. Increases the max DMG that can be absorbed by the Shield created by the wearer by <b>20%</b>."},{id:"102",name:"Musketeer of Wild Wheat",skills:"Increases ATK by <b>12%</b>. The wearer's SPD increases by <b>6%</b> and DMG dealt by Basic ATK increases by <b>10%</b>."},{id:"101",name:"Passerby of Wandering Cloud",skills:"Increases Outgoing Healing by <b>10%</b>. At the start of the battle, immediately regenerates 1 Skill Point."}],Nn={characters:qf,lightCones:eh,relics:th},Co="v3.2.3",ht="3.2v5",Ec=e=>`Current version: (${ht}) ${e?" - "+e:""}`,Tc={1407:Ec(""),1405:Ec("Added ATK % body to benchmark mains, removed light cone Crit Rate. Now defaults to Main DPS with Sunday/Robin/Huohuo.")},n={ATK_P:"ATK%",ATK:"ATK",BE:"Break Effect",CD:"CRIT DMG",CR:"CRIT Rate",DEF_P:"DEF%",DEF:"DEF",EHR:"Effect Hit Rate",ERR:"Energy Regeneration Rate",Fire_DMG:"Fire DMG Boost",HP_P:"HP%",HP:"HP",Ice_DMG:"Ice DMG Boost",Imaginary_DMG:"Imaginary DMG Boost",Lightning_DMG:"Lightning DMG Boost",OHB:"Outgoing Healing Boost",Physical_DMG:"Physical DMG Boost",Quantum_DMG:"Quantum DMG Boost",RES:"Effect RES",SPD_P:"SPD%",SPD:"SPD",Wind_DMG:"Wind DMG Boost"},ah=[n.HP_P,n.ATK_P,n.DEF_P,n.HP,n.ATK,n.SPD,n.CR,n.CD,n.EHR,n.BE,n.OHB,n.ERR,n.Physical_DMG,n.Fire_DMG,n.Ice_DMG,n.Lightning_DMG,n.Wind_DMG,n.Quantum_DMG,n.Imaginary_DMG],Qr={[n.HP_P]:{5:{base:6.912,increment:2.4192},4:{base:5.5296,increment:1.9354},3:{base:4.1472,increment:1.4515},2:{base:2.7648,increment:.9677}},[n.ATK_P]:{5:{base:6.912,increment:2.4192},4:{base:5.5296,increment:1.9354},3:{base:4.1472,increment:1.4515},2:{base:2.7648,increment:.9677}},[n.DEF_P]:{5:{base:8.64,increment:3.024},4:{base:6.912,increment:2.4192},3:{base:5.184,increment:1.8144},2:{base:3.456,increment:1.2096}},[n.HP]:{5:{base:112.896,increment:39.5136},4:{base:90.3168,increment:31.61088},3:{base:67.7376,increment:23.70816},2:{base:45.1584,increment:15.80544}},[n.ATK]:{5:{base:56.448,increment:19.7568},4:{base:45.1584,increment:15.80544},3:{base:33.8688,increment:11.85408},2:{base:22.5792,increment:7.90272}},[n.SPD]:{5:{base:4.032,increment:1.4},4:{base:3.226,increment:1.1},3:{base:2.419,increment:1},2:{base:1.613,increment:1}},[n.CR]:{5:{base:5.184,increment:1.8144},4:{base:4.1472,increment:1.4515},3:{base:3.1104,increment:1.0886},2:{base:2.0736,increment:.7258}},[n.CD]:{5:{base:10.368,increment:3.6288},4:{base:8.2944,increment:2.903},3:{base:6.2208,increment:2.1773},2:{base:4.1472,increment:1.4515}},[n.EHR]:{5:{base:6.912,increment:2.4192},4:{base:5.5296,increment:1.9354},3:{base:4.1472,increment:1.4515},2:{base:2.7648,increment:.9677}},[n.BE]:{5:{base:10.368,increment:3.6288},4:{base:8.2944,increment:2.903},3:{base:6.2208,increment:2.1773},2:{base:4.1472,increment:1.4515}},[n.ERR]:{5:{base:3.1104,increment:1.0886},4:{base:2.4883,increment:.8709},3:{base:1.8662,increment:.6532},2:{base:1.2442,increment:.4355}},[n.OHB]:{5:{base:5.5296,increment:1.9354},4:{base:4.4237,increment:1.5483},3:{base:3.3178,increment:1.1612},2:{base:2.2118,increment:.7741}},[n.Physical_DMG]:{5:{base:6.2208,increment:2.1773},4:{base:4.9766,increment:1.7418},3:{base:3.7325,increment:1.3064},2:{base:2.4883,increment:.8709}},[n.Fire_DMG]:{5:{base:6.2208,increment:2.1773},4:{base:4.9766,increment:1.7418},3:{base:3.7325,increment:1.3064},2:{base:2.4883,increment:.8709}},[n.Ice_DMG]:{5:{base:6.2208,increment:2.1773},4:{base:4.9766,increment:1.7418},3:{base:3.7325,increment:1.3064},2:{base:2.4883,increment:.8709}},[n.Lightning_DMG]:{5:{base:6.2208,increment:2.1773},4:{base:4.9766,increment:1.7418},3:{base:3.7325,increment:1.3064},2:{base:2.4883,increment:.8709}},[n.Wind_DMG]:{5:{base:6.2208,increment:2.1773},4:{base:4.9766,increment:1.7418},3:{base:3.7325,increment:1.3064},2:{base:2.4883,increment:.8709}},[n.Quantum_DMG]:{5:{base:6.2208,increment:2.1773},4:{base:4.9766,increment:1.7418},3:{base:3.7325,increment:1.3064},2:{base:2.4883,increment:.8709}},[n.Imaginary_DMG]:{5:{base:6.2208,increment:2.1773},4:{base:4.9766,increment:1.7418},3:{base:3.7325,increment:1.3064},2:{base:2.4883,increment:.8709}}},fa=[n.HP_P,n.ATK_P,n.DEF_P,n.HP,n.ATK,n.DEF,n.SPD,n.CR,n.CD,n.EHR,n.RES,n.BE],Ge={[n.SPD]:{5:{high:2.6,mid:2.3,low:2},4:{high:2,mid:1.8,low:1.6},3:{high:1.4,mid:1.3,low:1.2},2:{high:1.2,mid:1.1,low:1}},[n.HP]:{5:{high:42.33751,mid:38.103755,low:33.87},4:{high:33.87,mid:30.483,low:27.096},3:{high:25.402506,mid:22.862253,low:20.322},2:{high:16.935,mid:15.2415,low:13.548}},[n.ATK]:{5:{high:21.168754,mid:19.051877,low:16.935},4:{high:16.935,mid:15.2415,low:13.548},3:{high:10.161,mid:11.431126,low:12.701252},2:{high:8.4675,mid:7.62075,low:6.774}},[n.DEF]:{5:{high:21.168754,mid:19.051877,low:16.935},4:{high:16.935,mid:15.2415,low:13.548},3:{high:10.161,mid:11.431126,low:12.701252},2:{high:8.4675,mid:7.62075,low:6.774}},[n.HP_P]:{5:{high:4.32,mid:3.888,low:3.456},4:{high:3.456,mid:3.1104,low:2.7648},3:{high:2.592,mid:2.3328,low:2.0736},2:{high:1.728,mid:1.5552,low:1.3824}},[n.ATK_P]:{5:{high:4.32,mid:3.888,low:3.456},4:{high:3.456,mid:3.1104,low:2.7648},3:{high:2.592,mid:2.3328,low:2.0736},2:{high:1.728,mid:1.5552,low:1.3824}},[n.DEF_P]:{5:{high:5.4,mid:4.86,low:4.32},4:{high:4.32,mid:3.888,low:3.456},3:{high:2.592,mid:2.916,low:3.24},2:{high:2.16,mid:1.944,low:1.728}},[n.BE]:{5:{high:6.48,mid:5.832,low:5.184},4:{high:5.184,mid:4.6656,low:4.1472},3:{high:3.888,mid:3.4992,low:3.1104},2:{high:2.592,mid:2.3328,low:2.0736}},[n.EHR]:{5:{high:4.32,mid:3.888,low:3.456},4:{high:3.456,mid:3.1104,low:2.7648},3:{high:2.592,mid:2.3328,low:2.0736},2:{high:1.728,mid:1.5552,low:1.3824}},[n.RES]:{5:{high:4.32,mid:3.888,low:3.456},4:{high:3.456,mid:3.1104,low:2.7648},3:{high:2.592,mid:2.3328,low:2.0736},2:{high:1.728,mid:1.5552,low:1.3824}},[n.CR]:{5:{high:3.24,mid:2.916,low:2.592},4:{high:2.592,mid:2.3328,low:2.0736},3:{high:1.5552,mid:1.7496,low:1.944},2:{high:1.296,mid:1.1664,low:1.0368}},[n.CD]:{5:{high:6.48,mid:5.832,low:5.184},4:{high:5.184,mid:4.6656,low:4.1472},3:{high:3.888,mid:3.4992,low:3.1104},2:{high:2.592,mid:2.3328,low:2.0736}}},nh={[n.HP_P]:"HP %",[n.ATK_P]:"ATK %",[n.DEF_P]:"DEF %",[n.SPD_P]:"SPD %",[n.HP]:"HP",[n.ATK]:"ATK",[n.DEF]:"DEF",[n.SPD]:"SPD",[n.CR]:"CRIT Rate",[n.CD]:"CRIT DMG",[n.EHR]:"Effect HIT",[n.RES]:"Effect RES",[n.BE]:"Break Effect",[n.ERR]:"Energy Regen",[n.OHB]:"Healing Boost",[n.Physical_DMG]:"Physical DMG",[n.Fire_DMG]:"Fire DMG",[n.Ice_DMG]:"Ice DMG",[n.Lightning_DMG]:"Lightning DMG",[n.Wind_DMG]:"Wind DMG",[n.Quantum_DMG]:"Quantum DMG",[n.Imaginary_DMG]:"Imaginary DMG"};n.HP_P+"",n.ATK_P+"",n.DEF_P+"",n.SPD_P+"",n.HP+"",n.ATK+"",n.DEF+"",n.SPD+"",n.CR+"",n.CD+"",n.EHR+"",n.RES+"",n.BE+"",n.ERR+"",n.OHB+"",n.Physical_DMG+"",n.Fire_DMG+"",n.Ice_DMG+"",n.Lightning_DMG+"",n.Wind_DMG+"",n.Quantum_DMG+"",n.Imaginary_DMG+"";n.HP_P+"",n.ATK_P+"",n.DEF_P+"",n.SPD_P+"",n.HP+"",n.ATK+"",n.DEF+"",n.SPD+"",n.CR+"",n.CD+"",n.EHR+"",n.RES+"",n.BE+"",n.ERR+"",n.OHB+"",n.Physical_DMG+"",n.Fire_DMG+"",n.Ice_DMG+"",n.Lightning_DMG+"",n.Wind_DMG+"",n.Quantum_DMG+"",n.Imaginary_DMG+"";n.HP_P+"",n.ATK_P+"",n.DEF_P+"",n.SPD_P+"",n.HP+"",n.ATK+"",n.DEF+"",n.SPD+"",n.CR+"",n.CD+"",n.EHR+"",n.RES+"",n.BE+"",n.ERR+"",n.OHB+"",n.Physical_DMG+"",n.Fire_DMG+"",n.Ice_DMG+"",n.Lightning_DMG+"",n.Wind_DMG+"",n.Quantum_DMG+"",n.Imaginary_DMG+"";const E={Head:"Head",Hands:"Hands",Body:"Body",Feet:"Feet",PlanarSphere:"PlanarSphere",LinkRope:"LinkRope"},ih={[E.Head]:"Head",[E.Hands]:"Hands",[E.Body]:"Body",[E.Feet]:"Feet",[E.PlanarSphere]:"Sphere",[E.LinkRope]:"Rope"},Il={[E.Head]:[n.HP],[E.Hands]:[n.ATK],[E.Body]:[n.HP_P,n.ATK_P,n.DEF_P,n.CR,n.CD,n.OHB,n.EHR],[E.Feet]:[n.HP_P,n.ATK_P,n.DEF_P,n.SPD],[E.PlanarSphere]:[n.HP_P,n.ATK_P,n.DEF_P,n.Physical_DMG,n.Fire_DMG,n.Ice_DMG,n.Lightning_DMG,n.Wind_DMG,n.Quantum_DMG,n.Imaginary_DMG],[E.LinkRope]:[n.HP_P,n.ATK_P,n.DEF_P,n.BE,n.ERR]},gi={PasserbyOfWanderingCloud:"Passerby of Wandering Cloud",MusketeerOfWildWheat:"Musketeer of Wild Wheat",KnightOfPurityPalace:"Knight of Purity Palace",HunterOfGlacialForest:"Hunter of Glacial Forest",ChampionOfStreetwiseBoxing:"Champion of Streetwise Boxing",GuardOfWutheringSnow:"Guard of Wuthering Snow",FiresmithOfLavaForging:"Firesmith of Lava-Forging",GeniusOfBrilliantStars:"Genius of Brilliant Stars",BandOfSizzlingThunder:"Band of Sizzling Thunder",EagleOfTwilightLine:"Eagle of Twilight Line",ThiefOfShootingMeteor:"Thief of Shooting Meteor",WastelanderOfBanditryDesert:"Wastelander of Banditry Desert",LongevousDisciple:"Longevous Disciple",MessengerTraversingHackerspace:"Messenger Traversing Hackerspace",TheAshblazingGrandDuke:"The Ashblazing Grand Duke",PrisonerInDeepConfinement:"Prisoner in Deep Confinement",PioneerDiverOfDeadWaters:"Pioneer Diver of Dead Waters",WatchmakerMasterOfDreamMachinations:"Watchmaker, Master of Dream Machinations",IronCavalryAgainstTheScourge:"Iron Cavalry Against the Scourge",TheWindSoaringValorous:"The Wind-Soaring Valorous",SacerdosRelivedOrdeal:"Sacerdos' Relived Ordeal",ScholarLostInErudition:"Scholar Lost in Erudition",HeroOfTriumphantSong:"Hero of Triumphant Song",PoetOfMourningCollapse:"Poet of Mourning Collapse"},bi={SpaceSealingStation:"Space Sealing Station",FleetOfTheAgeless:"Fleet of the Ageless",PanCosmicCommercialEnterprise:"Pan-Cosmic Commercial Enterprise",BelobogOfTheArchitects:"Belobog of the Architects",CelestialDifferentiator:"Celestial Differentiator",InertSalsotto:"Inert Salsotto",TaliaKingdomOfBanditry:"Talia: Kingdom of Banditry",SprightlyVonwacq:"Sprightly Vonwacq",RutilantArena:"Rutilant Arena",BrokenKeel:"Broken Keel",FirmamentFrontlineGlamoth:"Firmament Frontline: Glamoth",PenaconyLandOfTheDreams:"Penacony, Land of the Dreams",SigoniaTheUnclaimedDesolation:"Sigonia, the Unclaimed Desolation",IzumoGenseiAndTakamaDivineRealm:"Izumo Gensei and Takama Divine Realm",DuranDynastyOfRunningWolves:"Duran, Dynasty of Running Wolves",ForgeOfTheKalpagniLantern:"Forge of the Kalpagni Lantern",LushakaTheSunkenSeas:"Lushaka, the Sunken Seas",TheWondrousBananAmusementPark:"The Wondrous BananAmusement Park",BoneCollectionsSereneDemesne:"Bone Collection's Serene Demesne",GiantTreeOfRaptBrooding:"Giant Tree of Rapt Brooding"},zi={},G={...gi,...bi},pn=Object.values(gi),gn=Object.values(bi),li={};for(let e=0;e<gn.length;e++)li[gn[e]]=e;const Ka={};for(let e=0;e<pn.length;e++)Ka[pn[e]]=e;const Ti=Object.values(gi).length,sh=Object.values(bi).length,Pa={Abundance:"Abundance",Destruction:"Destruction",Erudition:"Erudition",Harmony:"Harmony",Hunt:"Hunt",Nihility:"Nihility",Preservation:"Preservation",Remembrance:"Remembrance"},Eo={Physical:"Physical",Quantum:"Quantum",Imaginary:"Imaginary",Ice:"Ice",Wind:"Wind",Fire:"Fire",Lightning:"Lightning"},Di={Physical:n.Physical_DMG,Fire:n.Fire_DMG,Ice:n.Ice_DMG,Lightning:n.Lightning_DMG,Wind:n.Wind_DMG,Quantum:n.Quantum_DMG,Imaginary:n.Imaginary_DMG},_n={Physical:"PHYSICAL_RES_PEN",Fire:"FIRE_RES_PEN",Ice:"ICE_RES_PEN",Lightning:"LIGHTNING_RES_PEN",Wind:"WIND_RES_PEN",Quantum:"QUANTUM_RES_PEN",Imaginary:"IMAGINARY_RES_PEN"},f={Sets:G,Parts:E,Stats:n,MainStats:ah,MainStatsValues:Qr,SubStats:fa,SetsOrnaments:bi,SetsRelics:gi,SetsRelicsNames:pn,SetsOrnamentsNames:gn,StatsToReadable:nh,PartsToReadable:ih,PartsMainStats:Il,RelicSetToIndex:Ka,OrnamentSetToIndex:li,MAX_INT:2147483647,THREAD_BUFFER_LENGTH:15e4},_a={relic4Piece:"4 Piece",relic2Plus2Piece:"2 + 2 Piece",relic2PlusAny:"2 + Any"},ks="combat",Wo="summoner",Vo={ATK:{title:"ATK",key:"ATK",percent:!1},ATK_P:{title:"ATK %",key:"ATK_P",percent:!0},HP:{title:"HP",key:"HP",percent:!1},HP_P:{title:"HP %",key:"HP_P",percent:!0},DEF:{title:"DEF",key:"DEF",percent:!1},DEF_P:{title:"DEF %",key:"DEF_P",percent:!0},CR:{title:"Crit Rate %",key:"CR",percent:!0},CD:{title:"Crit Dmg %",key:"CD",percent:!0},SPD:{title:"SPD",key:"SPD",percent:!1},SPD_P:{title:"SPD %",key:"SPD_P",percent:!0},BE:{title:"BE %",key:"BE",percent:!0},DMG_BOOST:{title:"Dmg Boost %",key:"DMG_BOOST",percent:!0},DEF_PEN:{title:"Def Pen %",key:"DEF_PEN",percent:!0},RES_PEN:{title:"Dmg RES PEN %",key:"RES_PEN",percent:!0},EFFECT_RES_PEN:{title:"Effect RES PEN %",key:"EFFECT_RES_PEN",percent:!0},VULNERABILITY:{title:"Vulnerability %",key:"VULNERABILITY",percent:!0},BREAK_EFFICIENCY:{title:"Break Efficiency %",key:"BREAK_EFFICIENCY",percent:!0}},pt={[G.PasserbyOfWanderingCloud]:"101",[G.MusketeerOfWildWheat]:"102",[G.KnightOfPurityPalace]:"103",[G.HunterOfGlacialForest]:"104",[G.ChampionOfStreetwiseBoxing]:"105",[G.GuardOfWutheringSnow]:"106",[G.FiresmithOfLavaForging]:"107",[G.GeniusOfBrilliantStars]:"108",[G.BandOfSizzlingThunder]:"109",[G.EagleOfTwilightLine]:"110",[G.ThiefOfShootingMeteor]:"111",[G.WastelanderOfBanditryDesert]:"112",[G.LongevousDisciple]:"113",[G.MessengerTraversingHackerspace]:"114",[G.TheAshblazingGrandDuke]:"115",[G.PrisonerInDeepConfinement]:"116",[G.PioneerDiverOfDeadWaters]:"117",[G.WatchmakerMasterOfDreamMachinations]:"118",[G.IronCavalryAgainstTheScourge]:"119",[G.TheWindSoaringValorous]:"120",[G.SacerdosRelivedOrdeal]:"121",[G.ScholarLostInErudition]:"122",[G.HeroOfTriumphantSong]:"123",[G.PoetOfMourningCollapse]:"124",[G.SpaceSealingStation]:"301",[G.FleetOfTheAgeless]:"302",[G.PanCosmicCommercialEnterprise]:"303",[G.BelobogOfTheArchitects]:"304",[G.CelestialDifferentiator]:"305",[G.InertSalsotto]:"306",[G.TaliaKingdomOfBanditry]:"307",[G.SprightlyVonwacq]:"308",[G.RutilantArena]:"309",[G.BrokenKeel]:"310",[G.FirmamentFrontlineGlamoth]:"311",[G.PenaconyLandOfTheDreams]:"312",[G.SigoniaTheUnclaimedDesolation]:"313",[G.IzumoGenseiAndTakamaDivineRealm]:"314",[G.DuranDynastyOfRunningWolves]:"315",[G.ForgeOfTheKalpagniLantern]:"316",[G.LushakaTheSunkenSeas]:"317",[G.TheWondrousBananAmusementPark]:"318",[G.BoneCollectionsSereneDemesne]:"319",[G.GiantTreeOfRaptBrooding]:"320"},Es="Default",wi="Custom",Rc="Settings",Xi="Combat Simulation Score",Ts="Character Score",hn="None",yl="Damage Upgrades",Ml="Combat Stats",wa="CPU",Yi="GPU Stable",Ji="GPU Experimental",Ls="Sacerdos' Relived Ordeal 1x",Os="Sacerdos' Relived Ordeal 2x",Qe={SET:0,ABILITY:1},ze={SINGLE:0,CONTINUOUS:1};var he=(e=>(e.BOOLEAN="boolean",e.NUMBER="number",e.SELECT="select",e))(he||{}),Gt=(e=>(e.AUTO="AUTO",e.CUSTOM="CUSTOM",e.STANDARD="STANDARD",e))(Gt||{}),$e=(e=>(e.optimizerCharacterId="optimizerCharacterId",e.relicScorerSidebarOpen="relicScorerSidebarOpen",e.scoringType="scoringType",e.combatScoreDetails="combatScoreDetails",e.computeEngine="computeEngine",e.showcaseStandardMode="showcaseStandardMode",e.showcaseDarkMode="showcaseDarkMode",e.showcaseUID="showcaseUID",e.showcasePreciseSpd="showcasePreciseSpd",e))($e||{});const b={clone(e){return e&&JSON.parse(JSON.stringify(e))},objectHash(e){return Du(e)},sumArray:e=>e.reduce((a,t)=>a+t,0),precisionRound:(e,a=5)=>{const t=Math.pow(10,a);return Math.round(e*t)/t},calculateRelicMainStatValue:(e,a,t)=>f.MainStatsValues[e][a].base+f.MainStatsValues[e][a].increment*t,wrappedFixedT:e=>({get:e?Y.getFixedT:oh}),flipStringMapping:e=>Object.fromEntries(Object.entries(e).map(([a,t])=>[t,a])),uuid:()=>Yr(),uuidAlphaOnly:()=>Yr().replace(/[^a-zA-Z0-9]/g,""),stripTrailingSlashes:e=>e.replace(/\/+$/,""),sleep:e=>new Promise(a=>setTimeout(a,e)),consoleWarnWrapper:e=>{e instanceof Error?console.warn(e.name,e.message):console.warn("An unknown error occurred",e)},validateUuid:e=>{const a=e.trim();return/^\d{9}$/.test(a)?a:null},smoothScrollNearest:(e,a=300)=>{const t=e.getBoundingClientRect(),s=document.documentElement||document.body,o=s.scrollTop,r=t.top+o,l=t.bottom+o,c=s.clientHeight;let u;if(t.top<0)u=r;else if(t.bottom>c)u=l-c+5;else return;const d=performance.now(),m=o,h=u-m;function g(C){const M=C-d,x=Math.min(M/a,1),O=x<.5?2*x*x:1-Math.pow(-2*x+2,2)/2;s.scrollTo(0,m+h*O),M<a&&requestAnimationFrame(g)}requestAnimationFrame(g)}},oh=()=>()=>"",oe={success:(e,a=3)=>{const t=b.uuid();console.log("Success message:",e),window.messageApi.open({key:t,type:"success",content:e||"",duration:a,onClick:()=>window.messageApi.destroy(t)})},error:(e,a=3)=>{const t=b.uuid();console.warn("Error message:",e),window.messageApi.open({key:t,type:"error",content:e||"",duration:a,onClick:()=>window.messageApi.destroy(t)})},warning:(e,a=3)=>{const t=b.uuid();console.warn("Warning message:",e),window.messageApi.open({key:t,type:"warning",content:e||"",duration:a,onClick:()=>window.messageApi.destroy(t)})}},Ie=.06,Ct=0;var z=(e=>(e[e.BASIC=1]="BASIC",e[e.SKILL=2]="SKILL",e[e.ULT=4]="ULT",e[e.FUA=8]="FUA",e[e.DOT=16]="DOT",e[e.BREAK=32]="BREAK",e[e.MEMO_SKILL=64]="MEMO_SKILL",e[e.MEMO_TALENT=128]="MEMO_TALENT",e))(z||{});const Bt=1,Me=2,ye=4,je=8,qa=16,ja=32,Vu=64,Bc=128,To=256,rh=1,lh=2,ch=4,uh=8,dh=64,mh=128,Na=0,ii=1,Qi=(e,a,t,s)=>{if(e.c.sets.TheAshblazingGrandDuke>>2){const r=.06*a.setConditionals.valueTheAshblazingGrandDuke;return s-r}else return 0},Ue=e=>function(a,t,s){return a>=e?s:t},pe={SKILL_TALENT_3_ULT_BASIC_5:{basic:Ue(5),skill:Ue(3),ult:Ue(5),talent:Ue(3)},SKILL_BASIC_3_ULT_TALENT_5:{basic:Ue(3),skill:Ue(3),ult:Ue(5),talent:Ue(5)},ULT_TALENT_3_SKILL_BASIC_5:{basic:Ue(5),skill:Ue(5),ult:Ue(3),talent:Ue(3)},ULT_BASIC_3_SKILL_TALENT_5:{basic:Ue(3),skill:Ue(5),ult:Ue(3),talent:Ue(5)},SKILL_ULT_3_BASIC_TALENT_5:{basic:Ue(5),skill:Ue(3),ult:Ue(3),talent:Ue(5)},SKILL_BASIC_MEMO_TALENT_3_ULT_TALENT_MEMO_SKILL_5:{basic:Ue(3),skill:Ue(3),ult:Ue(5),talent:Ue(5),memoTalent:Ue(3),memoSkill:Ue(5)},SKILL_TALENT_MEMO_TALENT_3_ULT_BASIC_MEMO_SKILL_5:{basic:Ue(5),skill:Ue(3),ult:Ue(5),talent:Ue(3),memoTalent:Ue(3),memoSkill:Ue(5)},ULT_BASIC_MEMO_TALENT_3_SKILL_TALENT_MEMO_SKILL_5:{basic:Ue(3),skill:Ue(5),ult:Ue(3),talent:Ue(5),memoTalent:Ue(3),memoSkill:Ue(5)}};function ci(e,a){var t,s,o;return(e.path==a?1:0)+(((t=e.teammate0Metadata)==null?void 0:t.path)==a?1:0)+(((s=e.teammate1Metadata)==null?void 0:s.path)==a?1:0)+(((o=e.teammate2Metadata)==null?void 0:o.path)==a?1:0)}function fh(e,a){var t,s,o;return(e.element==a?1:0)+(((t=e.teammate0Metadata)==null?void 0:t.element)==a?1:0)+(((s=e.teammate1Metadata)==null?void 0:s.element)==a?1:0)+(((o=e.teammate2Metadata)==null?void 0:o.element)==a?1:0)}function hh(e,a){return e.path==a}var da=(e=>(e.PRIMARY="PRIMARY",e.CHARACTER="CHARACTER",e.LIGHTCONE="LIGHTCONE",e.SETS="SETS",e.BASIC_STATS="BASIC_STATS",e.COMBAT_STATS="COMBAT_STATS",e.NONE="NONE",e))(da||{});const Sh=Object.fromEntries(Object.entries(G).map(([e,a])=>[e,{id:e,label:a,buffType:"SETS",ability:"SETS"}])),w={character(e){function a(t){return{id:e,label:`${e}_${t}`,ability:t,buffType:"CHARACTER"}}return{SOURCE_BASIC:a("Basic"),SOURCE_SKILL:a("Skill"),SOURCE_ULT:a("Ult"),SOURCE_TALENT:a("Talent"),SOURCE_TECHNIQUE:a("Technique"),SOURCE_TRACE:a("Trace"),SOURCE_MEMO:a("Memo"),SOURCE_E1:a("E1"),SOURCE_E2:a("E2"),SOURCE_E4:a("E4"),SOURCE_E6:a("E6")}},lightCone(e){return{SOURCE_LC:{id:e,label:`${e}_LC`,ability:"LC",buffType:"LIGHTCONE"}}},NONE:{id:"NONE",label:"NONE",buffType:"NONE",ability:"NONE"},...Sh};function ft(e,a){const t=" ".repeat(a*2);return e.split(`
`).map(s=>t+s).join(`
`)}function it(e){return e?"true":"false"}function $i(e){return e?"false":"true"}function ph(e,a){return e.teammateIndex===0?a.teammate0:e.teammateIndex===1?a.teammate1:a.teammate2}function ra(e,a,t,s){let o;if(e.teammateIndex!=null){const r=ph(e,t);o={...t,teammateCharacterConditionals:r.characterConditionals,teammateLightConeConditionals:r.lightConeConditionals}}else o=t;e.activation==ze.SINGLE?!t.conditionalState[e.id]&&e.condition(a,o,s)&&(t.conditionalState[e.id]=1,e.effect(a,o,s)):e.activation==ze.CONTINUOUS&&e.condition(a,o,s)&&e.effect(a,o,s)}function Ft(e,a){return`
fn evaluate${e.id}(p_x: ptr<function, ComputedStats>, p_m: ptr<function, ComputedStats>, p_sets: ptr<function, Sets>, p_state: ptr<function, ConditionalState>) {
  let x = *p_x;
${ft(a.trim(),1)}
}
  `}const Zu={HP_P:0,ATK_P:0,DEF_P:0,SPD_P:0,HP:1e-8,ATK:1e-8,DEF:1e-8,SPD:1e-8,CR:1e-8,CD:1e-8,EHR:1e-8,RES:1e-8,BE:1e-8,ERR:1e-8,OHB:1e-8,PHYSICAL_DMG_BOOST:1e-8,FIRE_DMG_BOOST:1e-8,ICE_DMG_BOOST:1e-8,LIGHTNING_DMG_BOOST:1e-8,WIND_DMG_BOOST:1e-8,QUANTUM_DMG_BOOST:1e-8,IMAGINARY_DMG_BOOST:1e-8,ELEMENTAL_DMG:1e-8};function zu(){return Float32Array.from(Object.values(Zu))}const gh=zu();class bn{constructor(a=!1,t=!1){tt(this,"a",zu());tt(this,"m");tt(this,"buffs");tt(this,"buffsMemo");tt(this,"trace");tt(this,"relicSetIndex");tt(this,"ornamentSetIndex");tt(this,"sets");tt(this,"setsArray");tt(this,"id");tt(this,"weight");this.m=t?null:new bn(a,!0,()=>this),this.buffs=[],this.buffsMemo=[],this.trace=a,this.relicSetIndex=0,this.ornamentSetIndex=0,this.sets={},this.setsArray=[],this.id=-1,this.weight=0,Object.keys(Zu).forEach((s,o)=>{const r=(l,c)=>this.trace&&this.buffs.push({stat:s,key:o,value:l,source:c});Object.defineProperty(this,s,{value:{buff:(l,c)=>{l!=0&&(this.a[o]+=l,r(l,c))},set:(l,c)=>{this.a[o]=l,r(l,c)},get:()=>this.a[o]},writable:!1,enumerable:!0,configurable:!0}),Object.defineProperty(this,`$${s}`,{get:()=>this.a[o],enumerable:!0,configurable:!0})}),Object.defineProperty(this,"#show",{get:()=>this.toBasicStatsObject(),enumerable:!0,configurable:!0})}init(a,t,s,o,r){this.relicSetIndex=a,this.ornamentSetIndex=t,this.sets=s,this.setsArray=o,this.id=r,this.a.set(gh),this.trace&&(this.buffs=[],this.buffsMemo=[])}initMemo(){this.m.a.set(this.a),this.trace&&(this.m.buffs=[],this.m.buffsMemo=[])}setWeight(a){this.weight=a}set(a,t,s){this.a[a]=t}get(a){return this.a[a]}toBasicStatsObject(){return Xu(this.a,this.weight,this.relicSetIndex,this.ornamentSetIndex)}}function Xu(e,a=0,t=0,s=0){return{"HP%":e[S.HP_P],"ATK%":e[S.ATK_P],"DEF%":e[S.DEF_P],"SPD%":e[S.SPD_P],HP:e[S.HP],ATK:e[S.ATK],DEF:e[S.DEF],SPD:e[S.SPD],"CRIT Rate":e[S.CR],"CRIT DMG":e[S.CD],"Effect Hit Rate":e[S.EHR],"Effect RES":e[S.RES],"Break Effect":e[S.BE],"Energy Regeneration Rate":e[S.ERR],"Outgoing Healing Boost":e[S.OHB],"Physical DMG Boost":e[S.PHYSICAL_DMG_BOOST],"Fire DMG Boost":e[S.FIRE_DMG_BOOST],"Ice DMG Boost":e[S.ICE_DMG_BOOST],"Lightning DMG Boost":e[S.LIGHTNING_DMG_BOOST],"Wind DMG Boost":e[S.WIND_DMG_BOOST],"Quantum DMG Boost":e[S.QUANTUM_DMG_BOOST],"Imaginary DMG Boost":e[S.IMAGINARY_DMG_BOOST],ELEMENTAL_DMG:e[S.ELEMENTAL_DMG],WEIGHT:a,relicSetIndex:t,ornamentSetIndex:s}}const bh={HP_P:{label:"HP %"},ATK_P:{label:"ATK %"},DEF_P:{label:"DEF %"},SPD_P:{label:"SPD %"},HP:{flat:!0,label:"HP"},ATK:{flat:!0,label:"ATK"},DEF:{flat:!0,label:"DEF"},SPD:{flat:!0,default:1e-4,label:"SPD"},CR:{label:"Crit Rate"},CD:{label:"Crit DMG"},EHR:{label:"Effect Hit Rate"},RES:{label:"Effect RES"},BE:{label:"Break Effect"},ERR:{label:"Energy Regeneration Rate"},OHB:{label:"Outgoing Healing Boost"},PHYSICAL_DMG_BOOST:{label:"Physical DMG Boost"},FIRE_DMG_BOOST:{label:"Fire DMG Boost"},ICE_DMG_BOOST:{label:"Ice DMG Boost"},LIGHTNING_DMG_BOOST:{label:"Thunder DMG Boost"},WIND_DMG_BOOST:{label:"Wind DMG Boost"},QUANTUM_DMG_BOOST:{label:"Quantum DMG Boost"},IMAGINARY_DMG_BOOST:{label:"Imaginary DMG Boost"},ELEMENTAL_DMG:{label:"Elemental DMG"},BASE_HP:{flat:!0,label:"Base HP"},BASE_ATK:{flat:!0,label:"Base ATK"},BASE_DEF:{flat:!0,label:"Base DEF"},BASE_SPD:{flat:!0,label:"Base SPD"},MEMO_BASE_HP_SCALING:{label:"Memosprite base HP scaling"},MEMO_BASE_DEF_SCALING:{label:"Memosprite base DEF scaling"},MEMO_BASE_ATK_SCALING:{label:"Memosprite base ATK scaling"},MEMO_BASE_SPD_SCALING:{label:"Memosprite base SPD scaling"},MEMO_BASE_HP_FLAT:{flat:!0,label:"Memosprite base HP flat"},MEMO_BASE_DEF_FLAT:{flat:!0,label:"Memosprite base DEF flat"},MEMO_BASE_ATK_FLAT:{flat:!0,label:"Memosprite base ATK flat"},MEMO_BASE_SPD_FLAT:{flat:!0,label:"Memosprite base SPD flat"},UNCONVERTIBLE_HP_BUFF:{flat:!0,label:"Unconvertible HP"},UNCONVERTIBLE_ATK_BUFF:{flat:!0,label:"Unconvertible ATK"},UNCONVERTIBLE_DEF_BUFF:{flat:!0,label:"Unconvertible DEF"},UNCONVERTIBLE_SPD_BUFF:{flat:!0,label:"Unconvertible SPD"},UNCONVERTIBLE_CR_BUFF:{label:"Unconvertible Crit Rate"},UNCONVERTIBLE_CD_BUFF:{label:"Unconvertible Crit DMG"},UNCONVERTIBLE_EHR_BUFF:{label:"Unconvertible Effect Hit Rate"},UNCONVERTIBLE_BE_BUFF:{label:"Unconvertible Break Effect"},UNCONVERTIBLE_OHB_BUFF:{label:"Unconvertible Outgoing Healing Boost"},UNCONVERTIBLE_RES_BUFF:{label:"Unconvertible Effect RES"},UNCONVERTIBLE_ERR_BUFF:{label:"Unconvertible Energy Regeneration Rate"},DMG_RED_MULTI:{default:1,label:"DMG reduction"},EHP:{flat:!0,label:"Effective HP"},SUMMONS:{flat:!0,label:"Summons"},MEMOSPRITE:{bool:!0,label:"Memosprite"},ENEMY_WEAKNESS_BROKEN:{bool:!0,label:"Enemy weakness broken"},MEMO_BUFF_PRIORITY:{bool:!0,label:"Prioritize memosprite buffs"},DEPRIORITIZE_BUFFS:{bool:!0,label:"Deprioritize buffs"},COMBO_DMG:{flat:!0,label:"Combo DMG"},DOT_CHANCE:{label:"Dot base chance"},EFFECT_RES_PEN:{label:"Effect RES PEN"},DOT_SPLIT:{label:"Dot DMG split"},DOT_STACKS:{flat:!0,label:"Dot stacks"},HEAL_TYPE:{flat:!0,label:"Heal ability type"},HEAL_FLAT:{flat:!0,label:"Heal flat"},HEAL_SCALING:{label:"Heal scaling"},HEAL_VALUE:{flat:!0,label:"Heal value"},SHIELD_FLAT:{flat:!0,label:"Shield flat"},SHIELD_SCALING:{label:"Shield scaling"},SHIELD_VALUE:{flat:!0,label:"Shield value"},SHIELD_BOOST:{label:"Shield boost"},SKILL_OHB:{label:"Skill Outgoing Healing Boost"},ULT_OHB:{label:"Ult Outgoing Healing Boost"},PHYSICAL_RES_PEN:{label:"Physical RES PEN"},FIRE_RES_PEN:{label:"Fire RES PEN"},ICE_RES_PEN:{label:"Ice RES PEN"},LIGHTNING_RES_PEN:{label:"Lightning RES PEN"},WIND_RES_PEN:{label:"Wind RES PEN"},QUANTUM_RES_PEN:{label:"Quantum RES PEN"},IMAGINARY_RES_PEN:{label:"Imaginary RES PEN"},SUPER_BREAK_DEF_PEN:{label:"Super Break DEF PEN"},SUPER_BREAK_DMG_BOOST:{label:"Super Break DMG Boost"},SUPER_BREAK_VULNERABILITY:{label:"Super Break Vulnerability"},ADDITIONAL_DMG_BOOST:{label:"Additional DMG boost"},ULT_ADDITIONAL_DMG_CR_OVERRIDE:{label:"Ult Additional DMG CR override"},ULT_ADDITIONAL_DMG_CD_OVERRIDE:{label:"Ult Additional DMG CD override"},BASIC_DMG_TYPE:{flat:!0,default:Bt,label:"Basic DMG type"},SKILL_DMG_TYPE:{flat:!0,default:Me,label:"Skill DMG type"},ULT_DMG_TYPE:{flat:!0,default:ye,label:"Ult DMG type"},FUA_DMG_TYPE:{flat:!0,default:je,label:"Fua DMG type"},DOT_DMG_TYPE:{flat:!0,default:qa,label:"Dot DMG type"},BREAK_DMG_TYPE:{flat:!0,default:ja,label:"Break DMG type"},MEMO_SKILL_DMG_TYPE:{flat:!0,default:Bc,label:"Memo Skill DMG type"},MEMO_TALENT_DMG_TYPE:{flat:!0,default:Bc,label:"Memo Talent DMG type"},ADDITIONAL_DMG_TYPE:{flat:!0,default:To,label:"Additional DMG type"},SUPER_BREAK_DMG_TYPE:{flat:!0,default:ja|Vu,label:"Super Break DMG type"}},Ic={ATK_SCALING:{separated:!0,label:"ATK scaling"},DEF_SCALING:{separated:!0,label:"DEF scaling"},HP_SCALING:{separated:!0,label:"HP scaling"},SPECIAL_SCALING:{separated:!0,label:"Special scaling"},ATK_P_BOOST:{label:"ATK % boost"},CR_BOOST:{label:"Crit Rate boost"},CD_BOOST:{label:"Crit DMG boost"},DMG_BOOST:{separated:!0,label:"DMG boost"},VULNERABILITY:{label:"Vulnerability"},RES_PEN:{label:"RES PEN"},DEF_PEN:{label:"DEF PEN"},BREAK_DEF_PEN:{label:"Break DEF PEN"},TOUGHNESS_DMG:{flat:!0,separated:!0,label:"Toughness DMG"},SUPER_BREAK_MODIFIER:{label:"Super Break multiplier"},BREAK_EFFICIENCY_BOOST:{label:"Break Efficiency boost"},TRUE_DMG_MODIFIER:{label:"True DMG multiplier"},FINAL_DMG_BOOST:{label:"Final DMG multiplier"},BREAK_DMG_MODIFIER:{separated:!0,label:"Break DMG multiplier"},ADDITIONAL_DMG_SCALING:{separated:!0,label:"Additional DMG scaling"},ADDITIONAL_DMG:{flat:!0,separated:!0,label:"Additional DMG"},DMG:{flat:!0,label:"DMG"}},Dh={BASIC:"Basic",SKILL:"Skill",ULT:"Ult",FUA:"Fua",DOT:"Dot",BREAK:"Break",MEMO_SKILL:"Memo Skill",MEMO_TALENT:"Memo Talent"},Ch={...bh,...Object.values(z).filter(e=>typeof e=="number").reduce((e,a)=>{const t=z[a];return Object.entries(Ic).forEach(([s,o])=>{e[`${t}_${s}`]={...o,label:`${Dh[t]} ${o.label}`}}),e},{}),...Object.entries(Ic).reduce((e,[a,t])=>(t.separated||(e[a]=t),e),{})},Rs=Object.fromEntries(Object.entries(Ch).map(([e,a],t)=>{const s=a;return[e,{name:e,index:t,default:s.default??0,flat:s.flat??!1,whole:s.whole??!1,bool:s.bool??!1,category:s.category??1,label:s.label}]})),ui=Object.fromEntries(Object.entries(Rs).map(([e,a])=>[e,a.default])),Zo=Object.values(Rs).sort((e,a)=>e.index-a.index);function Eh(){function e(a){return{name:a,abilityDmg:0,additionalDmg:0,breakDmg:0,superBreakDmg:0,jointDmg:0,trueDmg:0,dotDmg:0,memoDmg:0}}return{BASIC_DMG:e("BASIC_DMG"),SKILL_DMG:e("SKILL_DMG"),ULT_DMG:e("ULT_DMG"),FUA_DMG:e("FUA_DMG"),DOT_DMG:e("DOT_DMG"),BREAK_DMG:e("BREAK_DMG"),MEMO_SKILL_DMG:e("MEMO_SKILL_DMG"),MEMO_TALENT_DMG:e("MEMO_TALENT_DMG")}}const S=Object.keys(ui).reduce((e,a,t)=>(e[a]=t,e),{});class Wa{constructor(a=!1,t=!1,s){tt(this,"a",$r());tt(this,"c");tt(this,"m");tt(this,"summoner");tt(this,"buffs");tt(this,"buffsMemo");tt(this,"trace");tt(this,"dmgSplits");this.c=new bn(a,!0,()=>this),this.m=t?null:new Wa(a,!0,()=>this),this.summoner=t?s:null,this.buffs=[],this.buffsMemo=[],this.trace=a,this.dmgSplits=this.trace?Eh():null,Object.keys(ui).forEach((o,r)=>{const l=(m,h)=>this.trace&&this.buffs.push({stat:o,key:r,value:m,source:h}),c=(m,h)=>this.trace&&this.buffsMemo.push({stat:o,key:r,value:m,source:h}),u=(m,h)=>this.trace&&(this.buffs=this.buffs.filter(g=>g.key!==r).concat({stat:o,key:r,value:m,source:h})),d=(m,h)=>this.trace&&(this.buffsMemo=this.buffsMemo.filter(g=>g.key!==r).concat({stat:o,key:r,value:m,source:h}));Object.defineProperty(this,o,{value:{buff:(m,h)=>{m!=0&&(this.a[r]+=m,l(m,h))},buffSingle:(m,h)=>{m!=0&&(this.a[S.DEPRIORITIZE_BUFFS]||(this.a[S.MEMO_BUFF_PRIORITY]?(this.m.a[r]+=m,c(m,h)):(this.a[r]+=m,l(m,h))))},buffMemo:(m,h)=>{m!=0&&(this.a[S.DEPRIORITIZE_BUFFS]||this.m&&(this.m.a[r]+=m,c(m,h)))},buffTeam:(m,h)=>{m!=0&&(this.a[r]+=m,l(m,h),this.m&&(this.m.a[r]+=m,c(m,h)))},buffDual:(m,h)=>{m!=0&&(this.a[S.DEPRIORITIZE_BUFFS]||(this.a[r]+=m,l(m,h),this.m&&(this.m.a[r]+=m,c(m,h))))},buffBaseDual:(m,h)=>{m!=0&&(this.a[r]+=m,l(m,h),this.m&&(this.m.a[r]+=m,c(m,h)))},buffBaseDualDynamic:(m,h,g,C)=>{if(!(m<.001)){this.a[r]+=m,l(m,h),this.m&&(this.m.a[r]+=m,c(m,h));for(const M of g.conditionalRegistry[qr[o]]??[])ra(M,this,g,C)}},multiply:(m,h)=>{this.a[r]*=m,l(m,h)},multiplyTeam:(m,h)=>{this.a[r]*=m,l(m,h),this.m&&(this.m.a[r]*=m,c(m,h))},buffDynamic:(m,h,g,C)=>{if(!(m<.001)){this.a[r]+=m,l(m,h);for(const M of g.conditionalRegistry[qr[o]]||[])ra(M,this,g,C)}},set:(m,h)=>{this.a[r]=m,u(m,h)},config:(m,h)=>{this.a[r]=m,u(m,h),this.m&&(this.m.a[r]=m,d(m,h))},get:()=>this.a[r]},writable:!1,enumerable:!0,configurable:!0}),Object.defineProperty(this,`$${o}`,{get:()=>this.a[r],enumerable:!0,configurable:!0})}),Object.defineProperty(this,"#show",{get:()=>this.toComputedStatsObject(),enumerable:!0,configurable:!0})}setPrecompute(a){this.a.set(a),this.buffs=[],this.buffsMemo=[]}tracePrecompute(a){this.buffs=a.buffs,this.buffsMemo=a.buffsMemo}setBasic(a){this.c=a}get(a){return this.a[a]}toComputedStatsObject(){return Yu(this.a)}}function Yu(e){const a={};for(const t in S){const s=t,o=Ju[s]??s,r=S[s];a[o]=e[r]}return a}function $r(){return Float32Array.from(Object.values(ui))}const Ju={ATK_P:n.ATK_P,ATK:n.ATK,BE:n.BE,CD:n.CD,CR:n.CR,DEF_P:n.DEF_P,DEF:n.DEF,EHR:n.EHR,ERR:n.ERR,FIRE_DMG_BOOST:n.Fire_DMG,HP_P:n.HP_P,HP:n.HP,ICE_DMG_BOOST:n.Ice_DMG,IMAGINARY_DMG_BOOST:n.Imaginary_DMG,LIGHTNING_DMG_BOOST:n.Lightning_DMG,OHB:n.OHB,PHYSICAL_DMG_BOOST:n.Physical_DMG,QUANTUM_DMG_BOOST:n.Quantum_DMG,RES:n.RES,SPD_P:n.SPD_P,SPD:n.SPD,WIND_DMG_BOOST:n.Wind_DMG},qr={ATK_P:n.ATK_P,ATK:n.ATK,BE:n.BE,CD:n.CD,CR:n.CR,DEF_P:n.DEF_P,DEF:n.DEF,EHR:n.EHR,ERR:n.ERR,FIRE_DMG_BOOST:n.Fire_DMG,HP_P:n.HP_P,HP:n.HP,ICE_DMG_BOOST:n.Ice_DMG,IMAGINARY_DMG_BOOST:n.Imaginary_DMG,LIGHTNING_DMG_BOOST:n.Lightning_DMG,OHB:n.OHB,PHYSICAL_DMG_BOOST:n.Physical_DMG,QUANTUM_DMG_BOOST:n.Quantum_DMG,RES:n.RES,SPD_P:n.SPD_P,SPD:n.SPD,WIND_DMG_BOOST:n.Wind_DMG},Th={[_n.Physical]:S.PHYSICAL_RES_PEN,[_n.Fire]:S.FIRE_RES_PEN,[_n.Ice]:S.ICE_RES_PEN,[_n.Lightning]:S.LIGHTNING_RES_PEN,[_n.Wind]:S.WIND_RES_PEN,[_n.Quantum]:S.QUANTUM_RES_PEN,[_n.Imaginary]:S.IMAGINARY_RES_PEN};function Rh(e,a){return e.a[Th[a]]}const Qu={[n.Physical_DMG]:S.PHYSICAL_DMG_BOOST,[n.Fire_DMG]:S.FIRE_DMG_BOOST,[n.Ice_DMG]:S.ICE_DMG_BOOST,[n.Lightning_DMG]:S.LIGHTNING_DMG_BOOST,[n.Wind_DMG]:S.WIND_DMG_BOOST,[n.Quantum_DMG]:S.QUANTUM_DMG_BOOST,[n.Imaginary_DMG]:S.IMAGINARY_DMG_BOOST};function Bh(e,a){return e.a[Qu[a]]}function yc(e,a,t){const s=Qu[a];e.a[s]+=t}const Nt={[n.ATK_P]:S.ATK_P,[n.ATK]:S.ATK,[n.BE]:S.BE,[n.CD]:S.CD,[n.CR]:S.CR,[n.DEF_P]:S.DEF_P,[n.DEF]:S.DEF,[n.EHR]:S.EHR,[n.ERR]:S.ERR,[n.Fire_DMG]:S.FIRE_DMG_BOOST,[n.HP_P]:S.HP_P,[n.HP]:S.HP,[n.Ice_DMG]:S.ICE_DMG_BOOST,[n.Imaginary_DMG]:S.IMAGINARY_DMG_BOOST,[n.Lightning_DMG]:S.LIGHTNING_DMG_BOOST,[n.OHB]:S.OHB,[n.Physical_DMG]:S.PHYSICAL_DMG_BOOST,[n.Quantum_DMG]:S.QUANTUM_DMG_BOOST,[n.RES]:S.RES,[n.SPD_P]:S.SPD_P,[n.SPD]:S.SPD,[n.Wind_DMG]:S.WIND_DMG_BOOST};var It=(e=>(e[e.MAIN=0]="MAIN",e[e.MEMO=1]="MEMO",e[e.DUAL=2]="DUAL",e[e.TEAM=3]="TEAM",e[e.SINGLE=4]="SINGLE",e))(It||{});function Re(e,a,t,s){switch(e){case 0:a.buff(t,s);break;case 1:a.buffMemo(t,s);break;case 2:a.buffDual(t,s);break;case 3:a.buffTeam(t,s);break;case 4:a.buffSingle(t,s);break}}function Ih(e){return~e}function yh(e,a,t,s,o=0){t!=0&&(a&e.a[S.BASIC_DMG_TYPE]&&Re(o,e.BASIC_TRUE_DMG_MODIFIER,t,s),a&e.a[S.SKILL_DMG_TYPE]&&Re(o,e.SKILL_TRUE_DMG_MODIFIER,t,s),a&e.a[S.ULT_DMG_TYPE]&&Re(o,e.ULT_TRUE_DMG_MODIFIER,t,s),a&e.a[S.FUA_DMG_TYPE]&&Re(o,e.FUA_TRUE_DMG_MODIFIER,t,s),a&e.a[S.DOT_DMG_TYPE]&&Re(o,e.DOT_TRUE_DMG_MODIFIER,t,s),a&e.a[S.BREAK_DMG_TYPE]&&Re(o,e.BREAK_TRUE_DMG_MODIFIER,t,s),a&e.a[S.MEMO_SKILL_DMG_TYPE]&&Re(o,e.MEMO_SKILL_TRUE_DMG_MODIFIER,t,s),a&e.a[S.MEMO_TALENT_DMG_TYPE]&&Re(o,e.MEMO_TALENT_TRUE_DMG_MODIFIER,t,s))}function Ee(e,a,t,s,o=0){t!=0&&(a&e.a[S.BASIC_DMG_TYPE]&&Re(o,e.BASIC_DMG_BOOST,t,s),a&e.a[S.SKILL_DMG_TYPE]&&Re(o,e.SKILL_DMG_BOOST,t,s),a&e.a[S.ULT_DMG_TYPE]&&Re(o,e.ULT_DMG_BOOST,t,s),a&e.a[S.FUA_DMG_TYPE]&&Re(o,e.FUA_DMG_BOOST,t,s),a&e.a[S.DOT_DMG_TYPE]&&Re(o,e.DOT_DMG_BOOST,t,s),a&e.a[S.BREAK_DMG_TYPE]&&Re(o,e.BREAK_DMG_BOOST,t,s),a&e.a[S.MEMO_SKILL_DMG_TYPE]&&Re(o,e.MEMO_SKILL_DMG_BOOST,t,s),a&e.a[S.MEMO_TALENT_DMG_TYPE]&&Re(o,e.MEMO_TALENT_DMG_BOOST,t,s),a&e.a[S.ADDITIONAL_DMG_TYPE]&&Re(o,e.ADDITIONAL_DMG_BOOST,t,s),a&e.a[S.SUPER_BREAK_DMG_TYPE]&&Re(o,e.SUPER_BREAK_DMG_BOOST,t,s))}function ha(e,a,t,s,o=0){t!=0&&(a&e.a[S.BASIC_DMG_TYPE]&&Re(o,e.BASIC_VULNERABILITY,t,s),a&e.a[S.SKILL_DMG_TYPE]&&Re(o,e.SKILL_VULNERABILITY,t,s),a&e.a[S.ULT_DMG_TYPE]&&Re(o,e.ULT_VULNERABILITY,t,s),a&e.a[S.FUA_DMG_TYPE]&&Re(o,e.FUA_VULNERABILITY,t,s),a&e.a[S.DOT_DMG_TYPE]&&Re(o,e.DOT_VULNERABILITY,t,s),a&e.a[S.BREAK_DMG_TYPE]&&Re(o,e.BREAK_VULNERABILITY,t,s),a&e.a[S.MEMO_SKILL_DMG_TYPE]&&Re(o,e.MEMO_SKILL_VULNERABILITY,t,s),a&e.a[S.MEMO_TALENT_DMG_TYPE]&&Re(o,e.MEMO_TALENT_VULNERABILITY,t,s),a&e.a[S.SUPER_BREAK_DMG_TYPE]&&Re(o,e.SUPER_BREAK_VULNERABILITY,t,s))}function di(e,a,t,s,o=0){t!=0&&(a&e.a[S.BASIC_DMG_TYPE]&&Re(o,e.BASIC_RES_PEN,t,s),a&e.a[S.SKILL_DMG_TYPE]&&Re(o,e.SKILL_RES_PEN,t,s),a&e.a[S.ULT_DMG_TYPE]&&Re(o,e.ULT_RES_PEN,t,s),a&e.a[S.FUA_DMG_TYPE]&&Re(o,e.FUA_RES_PEN,t,s),a&e.a[S.DOT_DMG_TYPE]&&Re(o,e.DOT_RES_PEN,t,s),a&e.a[S.BREAK_DMG_TYPE]&&Re(o,e.BREAK_RES_PEN,t,s),a&e.a[S.MEMO_SKILL_DMG_TYPE]&&Re(o,e.MEMO_SKILL_RES_PEN,t,s),a&e.a[S.MEMO_TALENT_DMG_TYPE]&&Re(o,e.MEMO_TALENT_RES_PEN,t,s))}function en(e,a,t,s,o=0){t!=0&&(a&e.a[S.BASIC_DMG_TYPE]&&Re(o,e.BASIC_DEF_PEN,t,s),a&e.a[S.SKILL_DMG_TYPE]&&Re(o,e.SKILL_DEF_PEN,t,s),a&e.a[S.ULT_DMG_TYPE]&&Re(o,e.ULT_DEF_PEN,t,s),a&e.a[S.FUA_DMG_TYPE]&&Re(o,e.FUA_DEF_PEN,t,s),a&e.a[S.DOT_DMG_TYPE]&&Re(o,e.DOT_DEF_PEN,t,s),a&e.a[S.BREAK_DMG_TYPE]&&Re(o,e.BREAK_DEF_PEN,t,s),a&e.a[S.MEMO_SKILL_DMG_TYPE]&&Re(o,e.MEMO_SKILL_DEF_PEN,t,s),a&e.a[S.MEMO_TALENT_DMG_TYPE]&&Re(o,e.MEMO_TALENT_DEF_PEN,t,s),a&e.a[S.SUPER_BREAK_DMG_TYPE]&&Re(o,e.SUPER_BREAK_DEF_PEN,t,s))}function $u(e,a,t,s,o=0){t!=0&&(a&e.a[S.BASIC_DMG_TYPE]&&Re(o,e.BASIC_CR_BOOST,t,s),a&e.a[S.SKILL_DMG_TYPE]&&Re(o,e.SKILL_CR_BOOST,t,s),a&e.a[S.ULT_DMG_TYPE]&&Re(o,e.ULT_CR_BOOST,t,s),a&e.a[S.FUA_DMG_TYPE]&&Re(o,e.FUA_CR_BOOST,t,s),a&e.a[S.MEMO_SKILL_DMG_TYPE]&&Re(o,e.MEMO_SKILL_CR_BOOST,t,s),a&e.a[S.MEMO_TALENT_DMG_TYPE]&&Re(o,e.MEMO_TALENT_CR_BOOST,t,s))}function Sn(e,a,t,s,o=0){t!=0&&(a&e.a[S.BASIC_DMG_TYPE]&&Re(o,e.BASIC_CD_BOOST,t,s),a&e.a[S.SKILL_DMG_TYPE]&&Re(o,e.SKILL_CD_BOOST,t,s),a&e.a[S.ULT_DMG_TYPE]&&Re(o,e.ULT_CD_BOOST,t,s),a&e.a[S.FUA_DMG_TYPE]&&Re(o,e.FUA_CD_BOOST,t,s),a&e.a[S.MEMO_SKILL_DMG_TYPE]&&Re(o,e.MEMO_SKILL_CD_BOOST,t,s),a&e.a[S.MEMO_TALENT_DMG_TYPE]&&Re(o,e.MEMO_TALENT_CD_BOOST,t,s))}const Mh=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Characters.Arlan"),{basic:s,skill:o,ult:r,talent:l}=pe.SKILL_BASIC_3_ULT_TALENT_5,{SOURCE_BASIC:c,SOURCE_SKILL:u,SOURCE_ULT:d,SOURCE_TALENT:m,SOURCE_TECHNIQUE:h,SOURCE_TRACE:g,SOURCE_MEMO:C,SOURCE_E1:M,SOURCE_E2:x,SOURCE_E4:O,SOURCE_E6:H}=w.character("1008"),_=s(e,1,1.1),A=o(e,2.4,2.64),L=r(e,3.2,3.456),v=l(e,.72,.792),N={selfCurrentHpPercent:1},U={selfCurrentHpPercent:{id:"selfCurrentHpPercent",formItem:"slider",text:t("Content.selfCurrentHpPercent.text"),content:t("Content.selfCurrentHpPercent.content",{talentMissingHpDmgBoostMax:b.precisionRound(100*v)}),min:.01,max:1,percent:!0}};return{activeAbilities:[z.BASIC,z.SKILL,z.ULT],content:()=>Object.values(U),teammateContent:()=>[],defaults:()=>N,teammateDefaults:()=>({}),precomputeEffects:(F,P,T)=>{const y=P.characterConditionals;return F.ELEMENTAL_DMG.buff(Math.min(v,1-y.selfCurrentHpPercent),m),F.BASIC_ATK_SCALING.buff(_,c),F.SKILL_ATK_SCALING.buff(A,u),F.ULT_ATK_SCALING.buff(L,d),Ee(F,Me,e>=1&&y.selfCurrentHpPercent<=.5?.1:0,M),Ee(F,ye,e>=6&&y.selfCurrentHpPercent<=.5?.2:0,H),F.BASIC_TOUGHNESS_DMG.buff(10,c),F.SKILL_TOUGHNESS_DMG.buff(20,u),F.ULT_TOUGHNESS_DMG.buff(20,d),F},finalizeCalculations:F=>{},gpuFinalizeCalculations:()=>""}},Gh=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Characters.Asta"),{basic:s,skill:o,ult:r,talent:l}=pe.SKILL_TALENT_3_ULT_BASIC_5,{SOURCE_BASIC:c,SOURCE_SKILL:u,SOURCE_ULT:d,SOURCE_TALENT:m,SOURCE_TECHNIQUE:h,SOURCE_TRACE:g,SOURCE_MEMO:C,SOURCE_E1:M,SOURCE_E2:x,SOURCE_E4:O,SOURCE_E6:H}=w.character("1009"),_=r(e,50,52.8),A=l(e,.14,.154),L=.06,v=e>=1?5:4,N=s(e,1,1.1),U=o(e,.5,.55),F=s(e,.5,.55),P={talentBuffStacks:5,skillExtraDmgHits:v,ultSpdBuff:!0,fireDmgBoost:!0},T={talentBuffStacks:5,ultSpdBuff:!0,fireDmgBoost:!0},y={skillExtraDmgHits:{id:"skillExtraDmgHits",formItem:"slider",text:t("Content.skillExtraDmgHits.text"),content:t("Content.skillExtraDmgHits.content",{skillScaling:b.precisionRound(U*100),skillExtraDmgHitsMax:v}),min:0,max:v},talentBuffStacks:{id:"talentBuffStacks",formItem:"slider",text:t("Content.talentBuffStacks.text"),content:t("Content.talentBuffStacks.content",{talentStacksAtkBuff:b.precisionRound(100*A)}),min:0,max:5},ultSpdBuff:{id:"ultSpdBuff",formItem:"switch",text:t("Content.ultSpdBuff.text"),content:t("Content.ultSpdBuff.content",{ultSpdBuffValue:_})},fireDmgBoost:{id:"fireDmgBoost",formItem:"switch",text:t("Content.fireDmgBoost.text"),content:t("Content.fireDmgBoost.content")}},p={talentBuffStacks:y.talentBuffStacks,ultSpdBuff:y.ultSpdBuff,fireDmgBoost:y.fireDmgBoost};return{activeAbilities:[z.BASIC,z.SKILL,z.ULT,z.DOT],content:()=>Object.values(y),teammateContent:()=>Object.values(p),defaults:()=>P,teammateDefaults:()=>T,precomputeEffects:(R,I,B)=>{const j=I.characterConditionals;return R.DEF_P.buff(j.talentBuffStacks*L,g),R.ERR.buff(e>=4&&j.talentBuffStacks>=2?.15:0,O),R.BASIC_ATK_SCALING.buff(N,c),R.SKILL_ATK_SCALING.buff(U+j.skillExtraDmgHits*U,u),R.DOT_ATK_SCALING.buff(F,g),R.BASIC_TOUGHNESS_DMG.buff(10,c),R.SKILL_TOUGHNESS_DMG.buff(10+5*j.skillExtraDmgHits,u),R.DOT_CHANCE.set(.8,g),R},precomputeMutualEffects:(R,I,B)=>{const j=I.characterConditionals;R.SPD.buffTeam(j.ultSpdBuff?_:0,d),R.ATK_P.buffTeam(j.talentBuffStacks*A,m),R.FIRE_DMG_BOOST.buffTeam(j.fireDmgBoost?.18:0,g)},finalizeCalculations:R=>{},gpuFinalizeCalculations:()=>""}},Ph=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Characters.DanHeng"),{basic:s,skill:o,ult:r,talent:l}=pe.SKILL_BASIC_3_ULT_TALENT_5,{SOURCE_BASIC:c,SOURCE_SKILL:u,SOURCE_ULT:d,SOURCE_TALENT:m,SOURCE_TECHNIQUE:h,SOURCE_TRACE:g,SOURCE_MEMO:C,SOURCE_E1:M,SOURCE_E2:x,SOURCE_E4:O,SOURCE_E6:H}=w.character("1002"),_=l(e,.36,.396),A=s(e,1,1.1),L=o(e,2.6,2.86),v=r(e,4,4.32),N=r(e,1.2,1.296),U={talentPenBuff:!0,enemySlowed:!0,spdBuff:!0,e1EnemyHp50:!0},F={talentPenBuff:{id:"talentPenBuff",formItem:"switch",text:t("Content.talentPenBuff.text"),content:t("Content.talentPenBuff.content",{extraPenValue:b.precisionRound(100*_)})},enemySlowed:{id:"enemySlowed",formItem:"switch",text:t("Content.enemySlowed.text"),content:t("Content.enemySlowed.content")},spdBuff:{id:"spdBuff",formItem:"switch",text:t("Content.spdBuff.text"),content:t("Content.spdBuff.content")},e1EnemyHp50:{id:"e1EnemyHp50",formItem:"switch",text:t("Content.e1EnemyHp50.text"),content:t("Content.e1EnemyHp50.content"),disabled:e<1}};return{activeAbilities:[z.BASIC,z.SKILL,z.ULT],content:()=>Object.values(F),defaults:()=>U,precomputeEffects:(P,T,y)=>{const p=T.characterConditionals;return P.CR.buff(e>=1&&p.e1EnemyHp50?.12:0,M),P.SPD_P.buff(p.spdBuff?.2:0,g),P.BASIC_ATK_SCALING.buff(A,c),P.SKILL_ATK_SCALING.buff(L,u),P.ULT_ATK_SCALING.buff(v,d),P.ULT_ATK_SCALING.buff(p.enemySlowed?N:0,d),P.RES_PEN.buff(p.talentPenBuff?_:0,m),Ee(P,Bt,p.enemySlowed?.4:0,g),P.BASIC_TOUGHNESS_DMG.buff(10,c),P.SKILL_TOUGHNESS_DMG.buff(20,u),P.ULT_TOUGHNESS_DMG.buff(30,d),P},finalizeCalculations:P=>{},gpuFinalizeCalculations:()=>""}},qu=e=>e.BASIC_ADDITIONAL_DMG.buff(e.a[S.BASIC_ADDITIONAL_DMG_SCALING]*ki(e,0),w.NONE),_h=e=>e.ULT_ADDITIONAL_DMG.buff(e.a[S.ULT_ADDITIONAL_DMG_SCALING]*ki(e,0),w.NONE),Ah=()=>`x.BASIC_ADDITIONAL_DMG += x.BASIC_ADDITIONAL_DMG_SCALING * (x.ATK + (x.ATK_P_BOOST) * baseATK);
`,xh=()=>`x.ULT_ADDITIONAL_DMG += x.ULT_ADDITIONAL_DMG_SCALING * (x.ATK + (x.ATK_P_BOOST) * baseATK);
`,Lh=e=>e.BASIC_ADDITIONAL_DMG.buff(e.a[S.BASIC_ADDITIONAL_DMG_SCALING]*e.a[S.HP],w.NONE),Oh=e=>e.ULT_ADDITIONAL_DMG.buff(e.a[S.ULT_ADDITIONAL_DMG_SCALING]*e.a[S.HP],w.NONE),vh=e=>e.FUA_ADDITIONAL_DMG.buff(e.a[S.FUA_ADDITIONAL_DMG_SCALING]*e.a[S.HP],w.NONE),Hh=()=>`x.BASIC_ADDITIONAL_DMG += x.BASIC_ADDITIONAL_DMG_SCALING * x.HP;
`,Fh=()=>`x.ULT_ADDITIONAL_DMG += x.ULT_ADDITIONAL_DMG_SCALING * x.HP;
`,wh=()=>`x.FUA_ADDITIONAL_DMG += x.FUA_ADDITIONAL_DMG_SCALING * x.HP;
`;function Aa(e){e.BASIC_ADDITIONAL_DMG.buff(e.a[S.BASIC_ADDITIONAL_DMG_SCALING]*ki(e,0),w.NONE),e.SKILL_ADDITIONAL_DMG.buff(e.a[S.SKILL_ADDITIONAL_DMG_SCALING]*ki(e,0),w.NONE),e.ULT_ADDITIONAL_DMG.buff(e.a[S.ULT_ADDITIONAL_DMG_SCALING]*ki(e,0),w.NONE),e.FUA_ADDITIONAL_DMG.buff(e.a[S.FUA_ADDITIONAL_DMG_SCALING]*ki(e,0),w.NONE)}function Va(){return`
x.BASIC_ADDITIONAL_DMG += x.BASIC_ADDITIONAL_DMG_SCALING * (x.ATK + (x.ATK_P_BOOST) * baseATK);
x.SKILL_ADDITIONAL_DMG += x.SKILL_ADDITIONAL_DMG_SCALING * (x.ATK + (x.ATK_P_BOOST) * baseATK);
x.ULT_ADDITIONAL_DMG += x.ULT_ADDITIONAL_DMG_SCALING * (x.ATK + (x.ATK_P_BOOST) * baseATK);
x.FUA_ADDITIONAL_DMG += x.FUA_ADDITIONAL_DMG_SCALING * (x.ATK + (x.ATK_P_BOOST) * baseATK);
`}function ki(e,a){return e.a[S.ATK]+(a+e.a[S.ATK_P_BOOST])*e.a[S.BASE_ATK]}function Yt(e,a,t,s){e.FUA_ATK_P_BOOST.buff(Qi(e,a,t,s),w.NONE)}function jt(e){return`x.FUA_ATK_P_BOOST += calculateAshblazingSetP(sets.TheAshblazingGrandDuke, action.setConditionals.valueTheAshblazingGrandDuke, ${e});`}function Ks(e){e.HEAL_VALUE.buff(e.a[S.HEAL_SCALING]*e.a[S.HP]+e.a[S.HEAL_FLAT],w.NONE)}function ed(e){e.HEAL_VALUE.buff(e.a[S.HEAL_SCALING]*e.a[S.ATK]+e.a[S.HEAL_FLAT],w.NONE)}function kh(e){e.HEAL_VALUE.buff(e.a[S.HEAL_FLAT],w.NONE)}function td(){return`
x.HEAL_VALUE += x.HEAL_SCALING * x.ATK + x.HEAL_FLAT;
`}function Ns(){return`
x.HEAL_VALUE += x.HEAL_SCALING * x.HP + x.HEAL_FLAT;
`}function Kh(){return`
x.HEAL_VALUE += x.HEAL_FLAT;
`}function zo(e){e.SHIELD_VALUE.buff(e.a[S.SHIELD_SCALING]*e.a[S.DEF]+e.a[S.SHIELD_FLAT],w.NONE)}function Xo(){return`
x.SHIELD_VALUE += x.SHIELD_SCALING * x.DEF + x.SHIELD_FLAT;
`}const Nh=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Characters.Herta"),{basic:s,skill:o,ult:r,talent:l}=pe.SKILL_BASIC_3_ULT_TALENT_5,{SOURCE_BASIC:c,SOURCE_SKILL:u,SOURCE_ULT:d,SOURCE_TALENT:m,SOURCE_TECHNIQUE:h,SOURCE_TRACE:g,SOURCE_MEMO:C,SOURCE_E1:M,SOURCE_E2:x,SOURCE_E4:O,SOURCE_E6:H}=w.character("1013"),_=s(e,1,1.1),A=o(e,1,1.1),L=r(e,2,2.16),v=l(e,.4,.43);function N(T,y){const p=1/T;if(y.enemyCount==1){let R=1,I=0;for(let B=0;B<T;B++)I+=p*R,R=Math.min(8,R+1);return I}if(y.enemyCount==3){let R=2,I=0;for(let B=0;B<T;B++)I+=p*R,R=Math.min(8,R+3);return I}if(y.enemyCount==5){let R=3,I=0;for(let B=0;B<T;B++)I+=p*R,R=Math.min(8,R+5);return I}return 1}function U(T,y){const p=T.characterConditionals,R=N(p.fuaStacks,y);return{1:Ie*R,3:Ie*R,5:Ie*R}[y.enemyCount]}const F={fuaStacks:5,techniqueBuff:!1,targetFrozen:!0,e2TalentCritStacks:5,e6UltAtkBuff:!0,enemyHpGte50:!0,enemyHpLte50:!1},P={fuaStacks:{id:"fuaStacks",formItem:"slider",text:t("Content.fuaStacks.text"),content:t("Content.fuaStacks.content"),min:1,max:5},targetFrozen:{id:"targetFrozen",formItem:"switch",text:t("Content.targetFrozen.text"),content:t("Content.targetFrozen.content")},enemyHpGte50:{id:"enemyHpGte50",formItem:"switch",text:t("Content.enemyHpGte50.text"),content:t("Content.enemyHpGte50.content")},techniqueBuff:{id:"techniqueBuff",formItem:"switch",text:t("Content.techniqueBuff.text"),content:t("Content.techniqueBuff.content")},enemyHpLte50:{id:"enemyHpLte50",formItem:"switch",text:t("Content.enemyHpLte50.text"),content:t("Content.enemyHpLte50.content"),disabled:e<1},e2TalentCritStacks:{id:"e2TalentCritStacks",formItem:"slider",text:t("Content.e2TalentCritStacks.text"),content:t("Content.e2TalentCritStacks.content"),min:0,max:5,disabled:e<2},e6UltAtkBuff:{id:"e6UltAtkBuff",formItem:"switch",text:t("Content.e6UltAtkBuff.text"),content:t("Content.e6UltAtkBuff.content"),disabled:e<6}};return{activeAbilities:[z.BASIC,z.SKILL,z.ULT,z.FUA],content:()=>Object.values(P),defaults:()=>F,precomputeEffects:(T,y,p)=>{const R=y.characterConditionals;return T.ATK_P.buff(R.techniqueBuff?.4:0,h),T.CR.buff(e>=2?R.e2TalentCritStacks*.03:0,x),T.ATK_P.buff(e>=6&&R.e6UltAtkBuff?.25:0,H),T.BASIC_ATK_SCALING.buff(_,c),T.BASIC_ADDITIONAL_DMG_SCALING.buff(e>=1&&R.enemyHpLte50?.4:0,M),T.SKILL_ATK_SCALING.buff(A,u),T.ULT_ATK_SCALING.buff(L,d),T.FUA_ATK_SCALING.buff(v*R.fuaStacks,m),Ee(T,Me,R.enemyHpGte50?.2:0,u),Ee(T,ye,R.targetFrozen?.2:0,d),Ee(T,je,e>=4?.1:0,O),T.BASIC_TOUGHNESS_DMG.buff(10,c),T.SKILL_TOUGHNESS_DMG.buff(10,u),T.ULT_TOUGHNESS_DMG.buff(20,d),T.FUA_TOUGHNESS_DMG.buff(5*R.fuaStacks,m),T},finalizeCalculations:(T,y,p)=>{Yt(T,y,p,U(y,p)),qu(T)},gpuFinalizeCalculations:(T,y)=>jt(U(T,y))}},Uh=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Characters.Himeko"),{basic:s,skill:o,ult:r,talent:l}=pe.SKILL_BASIC_3_ULT_TALENT_5,{SOURCE_BASIC:c,SOURCE_SKILL:u,SOURCE_ULT:d,SOURCE_TALENT:m,SOURCE_TECHNIQUE:h,SOURCE_TRACE:g,SOURCE_MEMO:C,SOURCE_E1:M,SOURCE_E2:x,SOURCE_E4:O,SOURCE_E6:H}=w.character("1003"),_=s(e,1,1.1),A=o(e,2,2.2),L=r(e,2.3,2.484),v=l(e,1.4,1.54),N=.3,U={1:Ie*(1*.2+2*.2+3*.2+4*.4),3:Ie*(2*.2+5*.2+8*.2+8*.4),5:Ie*(3*.2+8*.2+8*.2+8*.4)},F={targetBurned:!0,selfCurrentHp80Percent:!0,e1TalentSpdBuff:!1,e2EnemyHp50DmgBoost:!0,e6UltExtraHits:2},P={targetBurned:{id:"targetBurned",formItem:"switch",text:t("Content.targetBurned.text"),content:t("Content.targetBurned.content")},selfCurrentHp80Percent:{id:"selfCurrentHp80Percent",formItem:"switch",text:t("Content.selfCurrentHp80Percent.text"),content:t("Content.selfCurrentHp80Percent.content")},e1TalentSpdBuff:{id:"e1TalentSpdBuff",formItem:"switch",text:t("Content.e1TalentSpdBuff.text"),content:t("Content.e1TalentSpdBuff.content"),disabled:e<1},e2EnemyHp50DmgBoost:{id:"e2EnemyHp50DmgBoost",formItem:"switch",text:t("Content.e2EnemyHp50DmgBoost.text"),content:t("Content.e2EnemyHp50DmgBoost.content"),disabled:e<2},e6UltExtraHits:{id:"e6UltExtraHits",formItem:"slider",text:t("Content.e6UltExtraHits.text"),content:t("Content.e6UltExtraHits.content"),min:0,max:2,disabled:e<6}};return{activeAbilities:[z.BASIC,z.SKILL,z.ULT,z.FUA,z.DOT],content:()=>Object.values(P),defaults:()=>F,precomputeEffects:(T,y,p)=>{const R=y.characterConditionals;return T.CR.buff(R.selfCurrentHp80Percent?.15:0,g),T.SPD_P.buff(e>=1&&R.e1TalentSpdBuff?.2:0,M),T.BASIC_ATK_SCALING.buff(_,c),T.SKILL_ATK_SCALING.buff(A,u),T.ULT_ATK_SCALING.buff(L,d),T.ULT_ATK_SCALING.buff(e>=6?R.e6UltExtraHits*L*.4:0,H),T.FUA_ATK_SCALING.buff(v,m),T.DOT_ATK_SCALING.buff(N,g),Ee(T,Me,R.targetBurned?.2:0,g),T.ELEMENTAL_DMG.buff(e>=2&&R.e2EnemyHp50DmgBoost?.15:0,x),T.BASIC_TOUGHNESS_DMG.buff(10,c),T.SKILL_TOUGHNESS_DMG.buff(20,u),T.ULT_TOUGHNESS_DMG.buff(20,d),T.FUA_TOUGHNESS_DMG.buff(10,m),T.DOT_CHANCE.set(.5,g),T},finalizeCalculations:(T,y,p)=>{Yt(T,y,p,U[p.enemyCount])},gpuFinalizeCalculations:(T,y)=>jt(U[y.enemyCount])}},jh=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Characters.Kafka"),{basic:s,skill:o,ult:r,talent:l}=pe.SKILL_BASIC_3_ULT_TALENT_5,{SOURCE_BASIC:c,SOURCE_SKILL:u,SOURCE_ULT:d,SOURCE_TALENT:m,SOURCE_TECHNIQUE:h,SOURCE_TRACE:g,SOURCE_MEMO:C,SOURCE_E1:M,SOURCE_E2:x,SOURCE_E4:O,SOURCE_E6:H}=w.character("1005"),_=s(e,1,1.1),A=o(e,1.6,1.76),L=r(e,.8,.864),v=l(e,1.4,1.596),N=r(e,2.9,3.183),U=Ie*(1*.15+2*.15+3*.15+4*.15+5*.15+6*.25),F={e1DotDmgReceivedDebuff:!0,e2TeamDotBoost:!0},P={e1DotDmgReceivedDebuff:!0,e2TeamDotBoost:!0},T={e1DotDmgReceivedDebuff:{id:"e1DotDmgReceivedDebuff",formItem:"switch",text:t("Content.e1DotDmgReceivedDebuff.text"),content:t("Content.e1DotDmgReceivedDebuff.content"),disabled:e<1},e2TeamDotBoost:{id:"e2TeamDotBoost",formItem:"switch",text:t("Content.e2TeamDotBoost.text"),content:t("Content.e2TeamDotBoost.content"),disabled:e<2}},y={e1DotDmgReceivedDebuff:T.e1DotDmgReceivedDebuff,e2TeamDotBoost:T.e2TeamDotBoost};return{activeAbilities:[z.BASIC,z.SKILL,z.ULT,z.FUA,z.DOT],content:()=>Object.values(T),teammateContent:()=>Object.values(y),defaults:()=>F,teammateDefaults:()=>P,precomputeEffects:(p,R,I)=>{p.BASIC_ATK_SCALING.buff(_,c),p.SKILL_ATK_SCALING.buff(A,u),p.ULT_ATK_SCALING.buff(L,d),p.FUA_ATK_SCALING.buff(v,m),p.DOT_ATK_SCALING.buff(N,d),p.DOT_ATK_SCALING.buff(e>=6?1.56:0,H),p.BASIC_TOUGHNESS_DMG.buff(10,c),p.SKILL_TOUGHNESS_DMG.buff(20,u),p.ULT_TOUGHNESS_DMG.buff(20,d),p.FUA_TOUGHNESS_DMG.buff(10,m),p.DOT_CHANCE.set(1.3,g)},precomputeMutualEffects:(p,R,I)=>{const B=R.characterConditionals;ha(p,qa,e>=1&&B.e1DotDmgReceivedDebuff?.3:0,M,It.TEAM),Ee(p,qa,e>=2&&B.e2TeamDotBoost?.25:0,x,It.TEAM)},finalizeCalculations:(p,R,I)=>{Yt(p,R,I,U)},gpuFinalizeCalculations:(p,R)=>jt(U)}},Wh=(e,a)=>{const{basic:t,skill:s,ult:o,talent:r}=pe.ULT_BASIC_3_SKILL_TALENT_5,{SOURCE_BASIC:l,SOURCE_SKILL:c,SOURCE_ULT:u,SOURCE_TALENT:d,SOURCE_TECHNIQUE:m,SOURCE_TRACE:h,SOURCE_MEMO:g,SOURCE_E1:C,SOURCE_E2:M,SOURCE_E4:x,SOURCE_E6:O}=w.character("1001"),H=t(e,1,1.1),_=o(e,1.5,1.62),A=r(e,1,1.1),L=Ie*(1*1/1),v=s(e,.57,.608),N=s(e,760,845.5);return{activeAbilities:[z.BASIC,z.ULT,z.FUA,z.DOT],content:()=>[],defaults:()=>({}),precomputeEffects:(U,F,P)=>(U.BASIC_ATK_SCALING.buff(H,l),U.ULT_ATK_SCALING.buff(_,u),U.FUA_ATK_SCALING.buff(A,d),U.FUA_DEF_SCALING.buff(e>=4?.3:0,x),U.BASIC_TOUGHNESS_DMG.buff(10,l),U.ULT_TOUGHNESS_DMG.buff(20,u),U.FUA_TOUGHNESS_DMG.buff(10,d),U.SHIELD_SCALING.buff(v,c),U.SHIELD_FLAT.buff(N,c),U),finalizeCalculations:(U,F,P)=>{Yt(U,F,P,L),zo(U)},gpuFinalizeCalculations:(U,F)=>jt(L)+Xo()}},Vh=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Characters.SilverWolf"),{basic:s,skill:o,ult:r,talent:l}=pe.SKILL_TALENT_3_ULT_BASIC_5,{SOURCE_BASIC:c,SOURCE_SKILL:u,SOURCE_ULT:d,SOURCE_TALENT:m,SOURCE_TECHNIQUE:h,SOURCE_TRACE:g,SOURCE_MEMO:C,SOURCE_E1:M,SOURCE_E2:x,SOURCE_E4:O,SOURCE_E6:H}=w.character("1006"),_=o(e,.1,.105),A=l(e,.08,.088),L=r(e,.45,.468),v=s(e,1,1.1),N=o(e,1.96,2.156),U=r(e,3.8,4.104),F={skillWeaknessResShredDebuff:!1,skillResShredDebuff:!0,talentDefShredDebuff:!0,ultDefShredDebuff:!0,targetDebuffs:5},P={skillWeaknessResShredDebuff:!1,skillResShredDebuff:!0,talentDefShredDebuff:!0,ultDefShredDebuff:!0,targetDebuffs:5},T={skillResShredDebuff:{id:"skillResShredDebuff",formItem:"switch",text:t("Content.skillResShredDebuff.text"),content:t("Content.skillResShredDebuff.content",{skillResShredValue:b.precisionRound(100*_)})},skillWeaknessResShredDebuff:{id:"skillWeaknessResShredDebuff",formItem:"switch",text:t("Content.skillWeaknessResShredDebuff.text"),content:t("Content.skillWeaknessResShredDebuff.content",{implantChance:b.precisionRound(o(e,85,87))})},talentDefShredDebuff:{id:"talentDefShredDebuff",formItem:"switch",text:t("Content.talentDefShredDebuff.text"),content:t("Content.talentDefShredDebuff.content",{talentDefShredDebuffValue:b.precisionRound(100*A)})},ultDefShredDebuff:{id:"ultDefShredDebuff",formItem:"switch",text:t("Content.ultDefShredDebuff.text"),content:t("Content.ultDefShredDebuff.content",{ultDefShredValue:b.precisionRound(100*L)})},targetDebuffs:{id:"targetDebuffs",formItem:"slider",text:t("Content.targetDebuffs.text"),content:t("Content.targetDebuffs.content"),min:0,max:5}},y={skillResShredDebuff:T.skillResShredDebuff,skillWeaknessResShredDebuff:T.skillWeaknessResShredDebuff,talentDefShredDebuff:T.talentDefShredDebuff,ultDefShredDebuff:T.ultDefShredDebuff,targetDebuffs:T.targetDebuffs};return{activeAbilities:[z.BASIC,z.SKILL,z.ULT],content:()=>Object.values(T),teammateContent:()=>Object.values(y),defaults:()=>F,teammateDefaults:()=>P,precomputeEffects:(p,R,I)=>{const B=R.characterConditionals;return p.BASIC_ATK_SCALING.buff(v,c),p.SKILL_ATK_SCALING.buff(N,u),p.ULT_ATK_SCALING.buff(U,d),p.ULT_ADDITIONAL_DMG_SCALING.buff(e>=4?B.targetDebuffs*.2:0,O),p.ELEMENTAL_DMG.buff(e>=6?B.targetDebuffs*.2:0,H),p.BASIC_TOUGHNESS_DMG.buff(10,c),p.SKILL_TOUGHNESS_DMG.buff(20,u),p.ULT_TOUGHNESS_DMG.buff(30,d),p},precomputeMutualEffects:(p,R,I)=>{const B=R.characterConditionals;p.RES_PEN.buffTeam(B.skillWeaknessResShredDebuff?.2:0,u),p.RES_PEN.buffTeam(B.skillResShredDebuff?_:0,u),p.RES_PEN.buffTeam(B.skillResShredDebuff&&B.targetDebuffs>=3?.03:0,g),p.DEF_PEN.buffTeam(B.ultDefShredDebuff?L:0,d),p.DEF_PEN.buffTeam(B.talentDefShredDebuff?A:0,m)},finalizeCalculations:(p,R,I)=>{Aa(p)},gpuFinalizeCalculations:()=>"x.ULT_ADDITIONAL_DMG += x.ULT_ADDITIONAL_DMG_SCALING * x.ATK;"}},Zh=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Characters.Welt"),{basic:s,skill:o,ult:r,talent:l}=pe.SKILL_BASIC_3_ULT_TALENT_5,{SOURCE_BASIC:c,SOURCE_SKILL:u,SOURCE_ULT:d,SOURCE_TALENT:m,SOURCE_TECHNIQUE:h,SOURCE_TRACE:g,SOURCE_MEMO:C,SOURCE_E1:M,SOURCE_E2:x,SOURCE_E4:O,SOURCE_E6:H}=w.character("1004"),_=e>=6?3:2,A=s(e,1,1.1),L=o(e,.72,.792),v=r(e,1.5,1.62),N=l(e,.6,.66),U={enemyDmgTakenDebuff:{id:"enemyDmgTakenDebuff",formItem:"switch",text:t("Content.enemyDmgTakenDebuff.text"),content:t("Content.enemyDmgTakenDebuff.content")},enemySlowed:{id:"enemySlowed",formItem:"switch",text:t("Content.enemySlowed.text"),content:t("Content.enemySlowed.content",{talentScaling:b.precisionRound(100*N)})},skillExtraHits:{id:"skillExtraHits",formItem:"slider",text:t("Content.skillExtraHits.text"),content:t("Content.skillExtraHits.content",{skillScaling:b.precisionRound(100*L)}),min:0,max:_},e1EnhancedState:{id:"e1EnhancedState",formItem:"switch",text:t("Content.e1EnhancedState.text"),content:t("Content.e1EnhancedState.content"),disabled:e<1}},F={enemyDmgTakenDebuff:U.enemyDmgTakenDebuff},P={enemySlowed:!0,enemyDmgTakenDebuff:!0,skillExtraHits:_,e1EnhancedState:!0},T={enemyDmgTakenDebuff:!0};return{activeAbilities:[z.BASIC,z.SKILL,z.ULT],content:()=>Object.values(U),teammateContent:()=>Object.values(F),defaults:()=>P,teammateDefaults:()=>T,precomputeEffects:(y,p,R)=>{const I=p.characterConditionals;return y.ELEMENTAL_DMG.buff(y.a[S.ENEMY_WEAKNESS_BROKEN]?.2:0,g),y.BASIC_ATK_SCALING.buff(A,c),y.SKILL_ATK_SCALING.buff(L,u),y.ULT_ATK_SCALING.buff(v,d),y.BASIC_ADDITIONAL_DMG_SCALING.buff(I.enemySlowed?N:0,m),y.SKILL_ADDITIONAL_DMG_SCALING.buff(I.enemySlowed?N:0,m),y.ULT_ADDITIONAL_DMG_SCALING.buff(I.enemySlowed?N:0,m),y.BASIC_ADDITIONAL_DMG_SCALING.buff(e>=1&&I.e1EnhancedState?.5*A:0,M),y.SKILL_ADDITIONAL_DMG_SCALING.buff(e>=1&&I.e1EnhancedState?.8*L:0,M),y.SKILL_ATK_SCALING.buff(I.skillExtraHits*L,u),y.BASIC_TOUGHNESS_DMG.buff(10,c),y.SKILL_TOUGHNESS_DMG.buff(10+10*I.skillExtraHits,u),y.ULT_TOUGHNESS_DMG.buff(20,d),y},precomputeMutualEffects:(y,p,R)=>{const I=p.characterConditionals;y.VULNERABILITY.buffTeam(I.enemyDmgTakenDebuff?.12:0,g)},finalizeCalculations:y=>{Aa(y)},gpuFinalizeCalculations:()=>Va()}};n.ATK_P+"",n.ATK+"",n.BE+"",n.CD+"",n.CR+"",n.DEF_P+"",n.DEF+"",n.EHR+"",n.ERR+"",n.HP_P+"",n.HP+"",n.OHB+"",n.RES+"",n.SPD_P+"",n.SPD+"";n.HP+"",n.ATK+"",n.DEF+"",n.SPD+"",n.CR+"",n.CD+"",n.EHR+"",n.BE+"",n.OHB+"",n.RES+"",n.ERR+"";const Ro={[n.HP]:{stat:n.HP,key:S.HP,property:"HP",unconvertibleProperty:"UNCONVERTIBLE_HP_BUFF",unconvertibleKey:S.UNCONVERTIBLE_HP_BUFF,percentStat:n.HP_P,percentKey:S.HP_P,baseProperty:"baseHP"},[n.ATK]:{stat:n.ATK,key:S.ATK,property:"ATK",unconvertibleProperty:"UNCONVERTIBLE_ATK_BUFF",unconvertibleKey:S.UNCONVERTIBLE_ATK_BUFF,percentStat:n.ATK_P,percentKey:S.ATK_P,baseProperty:"baseATK"},[n.DEF]:{stat:n.DEF,key:S.DEF,property:"DEF",unconvertibleProperty:"UNCONVERTIBLE_DEF_BUFF",unconvertibleKey:S.UNCONVERTIBLE_DEF_BUFF,percentStat:n.DEF_P,percentKey:S.DEF_P,baseProperty:"baseDEF"},[n.SPD]:{stat:n.SPD,key:S.SPD,property:"SPD",unconvertibleProperty:"UNCONVERTIBLE_SPD_BUFF",unconvertibleKey:S.UNCONVERTIBLE_SPD_BUFF,percentStat:n.SPD_P,percentKey:S.SPD_P,baseProperty:"baseSPD"},[n.CR]:{stat:n.CR,key:S.CR,property:"CR",unconvertibleKey:S.UNCONVERTIBLE_CR_BUFF,unconvertibleProperty:"UNCONVERTIBLE_CR_BUFF"},[n.CD]:{stat:n.CD,key:S.CD,property:"CD",unconvertibleKey:S.UNCONVERTIBLE_CD_BUFF,unconvertibleProperty:"UNCONVERTIBLE_CD_BUFF"},[n.EHR]:{stat:n.EHR,key:S.EHR,property:"EHR",unconvertibleKey:S.UNCONVERTIBLE_EHR_BUFF,unconvertibleProperty:"UNCONVERTIBLE_EHR_BUFF"},[n.BE]:{stat:n.BE,key:S.BE,property:"BE",unconvertibleKey:S.UNCONVERTIBLE_BE_BUFF,unconvertibleProperty:"UNCONVERTIBLE_BE_BUFF"},[n.OHB]:{stat:n.OHB,key:S.OHB,property:"OHB",unconvertibleKey:S.UNCONVERTIBLE_OHB_BUFF,unconvertibleProperty:"UNCONVERTIBLE_OHB_BUFF"},[n.RES]:{stat:n.RES,key:S.RES,property:"RES",unconvertibleKey:S.UNCONVERTIBLE_RES_BUFF,unconvertibleProperty:"UNCONVERTIBLE_RES_BUFF"},[n.ERR]:{stat:n.ERR,key:S.ERR,property:"ERR",unconvertibleKey:S.UNCONVERTIBLE_ERR_BUFF,unconvertibleProperty:"UNCONVERTIBLE_ERR_BUFF"}};n.HP,n.ATK,n.DEF,n.SPD,n.CR,n.CD,n.EHR,n.BE,n.OHB,n.RES,n.ERR;function ta(e,a,t,s,o,r,l,c){var O;const u=Ro[e],d=Ro[a],m=s.a[u.key],h=s.a[u.unconvertibleKey]??0,g=o.conditionalState[t.id]??0,C=m-h;if(C<=0)return;const M=Math.max(0,c(C)),x=M-g;o.conditionalState[t.id]=M,(O=s[d.unconvertibleProperty])==null||O.buff(x,l),s[d.property].buffDynamic(x,l,o,r)}function aa(e,a,t,s,o,r,l,c="true"){const u=Ro[e],d=Ro[a];return Ft(t,`
if (!(${l})) {
  return;
}

let stateValue: f32 = (*p_state).${t.id};
let convertibleValue: f32 = x.${u.property} - x.${u.unconvertibleProperty};

if (!(${c}) || convertibleValue <= 0) {
  return;
}

let buffFull = max(0, ${r});
let buffDelta = buffFull - stateValue;

(*p_state).${t.id} += buffDelta;

(*p_x).${d.unconvertibleProperty} += buffDelta;
(*p_x).${d.property} += buffDelta;
`)}const zh=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Characters.Bronya"),{basic:s,skill:o,ult:r}=pe.ULT_TALENT_3_SKILL_BASIC_5,{SOURCE_BASIC:l,SOURCE_SKILL:c,SOURCE_ULT:u,SOURCE_TALENT:d,SOURCE_TECHNIQUE:m,SOURCE_TRACE:h,SOURCE_MEMO:g,SOURCE_E1:C,SOURCE_E2:M,SOURCE_E4:x,SOURCE_E6:O}=w.character("1101"),H=o(e,.66,.726),_=r(e,.55,.594),A=r(e,.16,.168),L=r(e,.2,.216),v=s(e,1,1.1),N=v*.8,U=Ie*(1*1/1),F={teamDmgBuff:!0,skillBuff:!0,ultBuff:!0,battleStartDefBuff:!1,techniqueBuff:!1,e2SkillSpdBuff:!1},P={...F,teammateCDValue:2.5},T={teamDmgBuff:{id:"teamDmgBuff",formItem:"switch",text:t("Content.teamDmgBuff.text"),content:t("Content.teamDmgBuff.content")},skillBuff:{id:"skillBuff",formItem:"switch",text:t("Content.skillBuff.text"),content:t("Content.skillBuff.content",{skillDmgBoostValue:b.precisionRound(100*H)})},ultBuff:{id:"ultBuff",formItem:"switch",text:t("Content.ultBuff.text"),content:t("Content.ultBuff.content",{ultAtkBoostValue:b.precisionRound(100*_),ultCdBoostValue:b.precisionRound(100*A),ultCdBoostBaseValue:b.precisionRound(100*L)})},battleStartDefBuff:{id:"battleStartDefBuff",formItem:"switch",text:t("Content.battleStartDefBuff.text"),content:t("Content.battleStartDefBuff.content")},techniqueBuff:{id:"techniqueBuff",formItem:"switch",text:t("Content.techniqueBuff.text"),content:t("Content.techniqueBuff.content")},e2SkillSpdBuff:{id:"e2SkillSpdBuff",formItem:"switch",text:t("Content.e2SkillSpdBuff.text"),content:t("Content.e2SkillSpdBuff.content"),disabled:e<2}},y={teamDmgBuff:T.teamDmgBuff,skillBuff:T.skillBuff,ultBuff:T.ultBuff,battleStartDefBuff:T.battleStartDefBuff,techniqueBuff:T.techniqueBuff,teammateCDValue:{id:"teammateCDValue",formItem:"slider",text:t("TeammateContent.teammateCDValue.text"),content:t("TeammateContent.teammateCDValue.content",{ultAtkBoostValue:b.precisionRound(100*_),ultCdBoostValue:b.precisionRound(100*A),ultCdBoostBaseValue:b.precisionRound(100*L)}),min:0,max:4,percent:!0},e2SkillSpdBuff:T.e2SkillSpdBuff};return{activeAbilities:[z.BASIC,z.FUA],content:()=>Object.values(T),teammateContent:()=>Object.values(y),defaults:()=>F,teammateDefaults:()=>P,precomputeEffects:(p,R,I)=>{const B=R.characterConditionals;$u(p,Bt,1,h),p.BASIC_ATK_SCALING.buff(v,l),p.FUA_ATK_SCALING.buff(e>=4?N:0,x),B.ultBuff&&(p.CD.buff(L,u),p.UNCONVERTIBLE_CD_BUFF.buff(L,u)),p.BASIC_TOUGHNESS_DMG.buff(10,l),p.FUA_TOUGHNESS_DMG.buff(e>=4?10:0,x)},precomputeMutualEffects:(p,R,I)=>{const B=R.characterConditionals;p.DEF_P.buffTeam(B.battleStartDefBuff?.2:0,h),p.SPD_P.buffSingle(B.e2SkillSpdBuff?.3:0,M),p.ATK_P.buffTeam(B.techniqueBuff?.15:0,m),p.ATK_P.buffTeam(B.ultBuff?_:0,u),p.ELEMENTAL_DMG.buffTeam(B.teamDmgBuff?.1:0,h),p.ELEMENTAL_DMG.buffSingle(B.skillBuff?H:0,c)},precomputeTeammateEffects:(p,R,I)=>{const B=R.characterConditionals,j=B.ultBuff?A*B.teammateCDValue+L:0;p.CD.buffTeam(j,u),p.UNCONVERTIBLE_CD_BUFF.buffTeam(j,u)},finalizeCalculations:(p,R,I)=>{Yt(p,R,I,U)},gpuFinalizeCalculations:(p,R)=>jt(U),dynamicConditionals:[{id:"BronyaCdConditional",type:Qe.ABILITY,activation:ze.CONTINUOUS,dependsOn:[n.CD],chainsTo:[n.CD],condition:function(p,R,I){return R.characterConditionals.ultBuff},effect:function(p,R,I){ta(n.CD,n.CD,this,p,R,I,u,B=>B*A)},gpu:function(p,R){const I=p.characterConditionals;return aa(n.CD,n.CD,this,p,R,`${A} * convertibleValue`,`${it(I.ultBuff)}`)}}]}},Xh=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Characters.Clara"),{basic:s,skill:o,ult:r,talent:l}=pe.SKILL_BASIC_3_ULT_TALENT_5,{SOURCE_BASIC:c,SOURCE_SKILL:u,SOURCE_ULT:d,SOURCE_TALENT:m,SOURCE_TECHNIQUE:h,SOURCE_TRACE:g,SOURCE_MEMO:C,SOURCE_E1:M,SOURCE_E2:x,SOURCE_E4:O,SOURCE_E6:H}=w.character("1107"),_=r(e,.25,.27),A=r(e,1.6,1.728),L=s(e,1,1.1),v=o(e,1.2,1.32),N=l(e,1.6,1.76),U={1:Ie*(1*1/1),3:Ie*(2*1/1),5:Ie*(2*1/1)},F=Ie*(1*1/1),P={ultBuff:!0,talentEnemyMarked:!0,e2UltAtkBuff:!0,e4DmgReductionBuff:!0},T={ultBuff:{id:"ultBuff",formItem:"switch",text:t("Content.ultBuff.text"),content:t("Content.ultBuff.content",{ultFuaExtraScaling:b.precisionRound(100*A),ultDmgReductionValue:b.precisionRound(100*_)})},talentEnemyMarked:{id:"talentEnemyMarked",formItem:"switch",text:t("Content.talentEnemyMarked.text"),content:t("Content.talentEnemyMarked.content",{skillScaling:b.precisionRound(100*v)})},e2UltAtkBuff:{id:"e2UltAtkBuff",formItem:"switch",text:t("Content.e2UltAtkBuff.text"),content:t("Content.e2UltAtkBuff.content"),disabled:e<2},e4DmgReductionBuff:{id:"e4DmgReductionBuff",formItem:"switch",text:t("Content.e4DmgReductionBuff.text"),content:t("Content.e4DmgReductionBuff.content"),disabled:e<4}};return{activeAbilities:[z.BASIC,z.SKILL,z.FUA],content:()=>Object.values(T),defaults:()=>P,precomputeEffects:(y,p,R)=>{const I=p.characterConditionals;return y.ATK_P.buff(e>=2&&I.e2UltAtkBuff?.3:0,x),y.BASIC_ATK_SCALING.buff(L,c),y.SKILL_ATK_SCALING.buff(v,u),y.SKILL_ATK_SCALING.buff(I.talentEnemyMarked?v:0,u),y.FUA_ATK_SCALING.buff(N,m),y.FUA_ATK_SCALING.buff(I.ultBuff?A:0,d),y.DMG_RED_MULTI.multiply(1-.1,m),y.DMG_RED_MULTI.multiply(I.ultBuff?1-_:1,d),y.DMG_RED_MULTI.multiply(e>=4&&I.e4DmgReductionBuff?1-.3:1,O),Ee(y,je,.3,g),y.BASIC_TOUGHNESS_DMG.buff(10,c),y.SKILL_TOUGHNESS_DMG.buff(10,u),y.FUA_TOUGHNESS_DMG.buff(10,m),y},finalizeCalculations:(y,p,R)=>{const B=p.characterConditionals.ultBuff?U[R.enemyCount]:F;Yt(y,p,R,B)},gpuFinalizeCalculations:(y,p)=>{const I=y.characterConditionals.ultBuff?U[p.enemyCount]:F;return jt(I)}}},Yh=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Characters.Gepard"),{basic:s,skill:o,ult:r}=pe.ULT_TALENT_3_SKILL_BASIC_5,{SOURCE_BASIC:l,SOURCE_SKILL:c,SOURCE_ULT:u,SOURCE_TALENT:d,SOURCE_TECHNIQUE:m,SOURCE_TRACE:h,SOURCE_MEMO:g,SOURCE_E1:C,SOURCE_E2:M,SOURCE_E4:x,SOURCE_E6:O}=w.character("1104"),H=s(e,1,1.1),_=o(e,2,2.2),A=r(e,.45,.48),L=r(e,600,667.5),v={e4TeamResBuff:!0},N={e4TeamResBuff:!0},U={e4TeamResBuff:{id:"e4TeamResBuff",formItem:"switch",text:t("Content.e4TeamResBuff.text"),content:t("Content.e4TeamResBuff.content"),disabled:e<4}},F={e4TeamResBuff:U.e4TeamResBuff};return{activeAbilities:[z.BASIC,z.SKILL],content:()=>Object.values(U),teammateContent:()=>Object.values(F),defaults:()=>v,teammateDefaults:()=>N,precomputeEffects:(P,T,y)=>(P.BASIC_ATK_SCALING.buff(H,l),P.SKILL_ATK_SCALING.buff(_,c),P.BASIC_TOUGHNESS_DMG.buff(10,l),P.SKILL_TOUGHNESS_DMG.buff(20,c),P.SHIELD_SCALING.buff(A,u),P.SHIELD_FLAT.buff(L,u),P),precomputeMutualEffects:(P,T,y)=>{const p=T.characterConditionals;P.RES.buffTeam(e>=4&&p.e4TeamResBuff?.2:0,x)},finalizeCalculations:P=>{zo(P)},gpuFinalizeCalculations:()=>Xo(),dynamicConditionals:[{id:"GepardConversionConditional",type:Qe.ABILITY,activation:ze.CONTINUOUS,dependsOn:[n.DEF],chainsTo:[n.ATK],condition:function(P,T,y){return!0},effect:function(P,T,y){ta(n.DEF,n.ATK,this,P,T,y,h,p=>p*.35)},gpu:function(P,T){return aa(n.DEF,n.ATK,this,P,T,"0.35 * convertibleValue","true")}}]}},Jh=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Characters.Hook"),{basic:s,skill:o,ult:r,talent:l}=pe.SKILL_BASIC_3_ULT_TALENT_5,{SOURCE_BASIC:c,SOURCE_SKILL:u,SOURCE_ULT:d,SOURCE_TALENT:m,SOURCE_TECHNIQUE:h,SOURCE_TRACE:g,SOURCE_MEMO:C,SOURCE_E1:M,SOURCE_E2:x,SOURCE_E4:O,SOURCE_E6:H}=w.character("1109"),_=l(e,1,1.1),A=s(e,1,1.1),L=o(e,2.4,2.64),v=o(e,2.8,3.08),N=r(e,4,4.32),U=o(e,.65,.715),F={enhancedSkill:!0,targetBurned:!0},P={enhancedSkill:{id:"enhancedSkill",formItem:"switch",text:t("Content.enhancedSkill.text"),content:t("Content.enhancedSkill.content",{skillEnhancedScaling:b.precisionRound(100*v)})},targetBurned:{id:"targetBurned",formItem:"switch",text:t("Content.targetBurned.text"),content:t("Content.targetBurned.content",{targetBurnedExtraScaling:b.precisionRound(100*_)})}};return{activeAbilities:[z.BASIC,z.SKILL,z.ULT,z.DOT],content:()=>Object.values(P),defaults:()=>F,precomputeEffects:(T,y,p)=>{const R=y.characterConditionals;return T.BASIC_ATK_SCALING.buff(A,c),T.SKILL_ATK_SCALING.buff(R.enhancedSkill?v:L,u),T.ULT_ATK_SCALING.buff(N,d),T.BASIC_ADDITIONAL_DMG_SCALING.buff(R.targetBurned?_:0,m),T.SKILL_ADDITIONAL_DMG_SCALING.buff(R.targetBurned?_:0,m),T.ULT_ADDITIONAL_DMG_SCALING.buff(R.targetBurned?_:0,m),T.DOT_ATK_SCALING.buff(U,u),Ee(T,Me,e>=1&&R.enhancedSkill?.2:0,M),T.ELEMENTAL_DMG.buff(e>=6&&R.targetBurned?.2:0,H),T.BASIC_TOUGHNESS_DMG.buff(10,c),T.SKILL_TOUGHNESS_DMG.buff(20,u),T.ULT_TOUGHNESS_DMG.buff(30,d),T.DOT_CHANCE.set(1,u),T},finalizeCalculations:(T,y,p)=>{Aa(T)},gpuFinalizeCalculations:()=>Va()}},Qh=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Characters.Luka"),{basic:s,skill:o,ult:r}=pe.SKILL_TALENT_3_ULT_BASIC_5,{SOURCE_BASIC:l,SOURCE_SKILL:c,SOURCE_ULT:u,SOURCE_TALENT:d,SOURCE_TECHNIQUE:m,SOURCE_TRACE:h,SOURCE_MEMO:g,SOURCE_E1:C,SOURCE_E2:M,SOURCE_E4:x,SOURCE_E6:O}=w.character("1111"),H=s(e,.2,.22),_=r(e,.2,.216),A=s(e,1,1.1),L=s(e,.2*3+.8,.22*3+.88),v=o(e,1.2,1.32),N=r(e,3.3,3.564),U=o(e,3.38,3.718),F={basicEnhanced:!0,targetUltDebuffed:!0,e1TargetBleeding:!0,basicEnhancedExtraHits:3,e4TalentStacks:4},P={targetUltDebuffed:!0},T={basicEnhanced:{id:"basicEnhanced",formItem:"switch",text:t("Content.basicEnhanced.text"),content:t("Content.basicEnhanced.content")},targetUltDebuffed:{id:"targetUltDebuffed",formItem:"switch",text:t("Content.targetUltDebuffed.text"),content:t("Content.targetUltDebuffed.content",{targetUltDebuffDmgTakenValue:b.precisionRound(100*_)})},basicEnhancedExtraHits:{id:"basicEnhancedExtraHits",formItem:"slider",text:t("Content.basicEnhancedExtraHits.text"),content:t("Content.basicEnhancedExtraHits.content"),min:0,max:3},e1TargetBleeding:{id:"e1TargetBleeding",formItem:"switch",text:t("Content.e1TargetBleeding.text"),content:t("Content.e1TargetBleeding.content"),disabled:e<1},e4TalentStacks:{id:"e4TalentStacks",formItem:"slider",text:t("Content.e4TalentStacks.text"),content:t("Content.e4TalentStacks.content"),min:0,max:4,disabled:e<4}},y={targetUltDebuffed:T.targetUltDebuffed};return{activeAbilities:[z.BASIC,z.SKILL,z.ULT,z.DOT],content:()=>Object.values(T),teammateContent:()=>Object.values(y),defaults:()=>F,teammateDefaults:()=>P,precomputeEffects:(p,R,I)=>{const B=R.characterConditionals;return p.ATK_P.buff(e>=4?B.e4TalentStacks*.05:0,x),p.BASIC_ATK_SCALING.buff(B.basicEnhanced?L:A,l),p.BASIC_ATK_SCALING.buff((B.basicEnhanced&&B.basicEnhancedExtraHits)*H,l),p.SKILL_ATK_SCALING.buff(v,c),p.ULT_ATK_SCALING.buff(N,u),p.DOT_ATK_SCALING.buff(U,c),p.ELEMENTAL_DMG.buff(e>=1&&B.e1TargetBleeding?.15:0,C),p.BASIC_TOUGHNESS_DMG.buff(B.basicEnhanced?20:10,l),p.SKILL_TOUGHNESS_DMG.buff(20,c),p.ULT_TOUGHNESS_DMG.buff(30,u),p.DOT_CHANCE.set(1,c),p},precomputeMutualEffects:(p,R,I)=>{const B=R.characterConditionals;p.VULNERABILITY.buffTeam(B.targetUltDebuffed?_:0,u)},finalizeCalculations:p=>{},gpuFinalizeCalculations:()=>""}},$h=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Characters.Lynx"),s=b.wrappedFixedT(a).get(null,"conditionals","Common.HealAbility"),{basic:o,skill:r,ult:l,talent:c}=pe.SKILL_BASIC_3_ULT_TALENT_5,{SOURCE_BASIC:u,SOURCE_SKILL:d,SOURCE_ULT:m,SOURCE_TALENT:h,SOURCE_TECHNIQUE:g,SOURCE_TRACE:C,SOURCE_MEMO:M,SOURCE_E1:x,SOURCE_E2:O,SOURCE_E4:H,SOURCE_E6:_}=w.character("1110"),A=r(e,.075,.08),L=r(e,200,223),v=o(e,.5,.55),N=r(e,.12,.128),U=r(e,320,356),F=l(e,.135,.144),P=l(e,360,400.5),T=c(e,.036,.0384),y=c(e,96,106.8),p=e>=4?.03:0,R={healAbility:{id:"healAbility",formItem:"select",text:s("Text"),content:s("Content"),options:[{display:s("Skill"),value:Me,label:s("Skill")},{display:s("Ult"),value:ye,label:s("Ult")},{display:s("Talent"),value:Ct,label:s("Talent")}],fullWidth:!0},skillBuff:{id:"skillBuff",formItem:"switch",text:t("Content.skillBuff.text"),content:t("Content.skillBuff.content",{skillHpPercentBuff:b.precisionRound(100*A),skillHpFlatBuff:L})}},I={skillBuff:R.skillBuff,teammateHPValue:{id:"teammateHPValue",formItem:"slider",text:t("TeammateContent.teammateHPValue.text"),content:t("TeammateContent.teammateHPValue.content",{skillHpPercentBuff:b.precisionRound(100*A),skillHpFlatBuff:L}),min:0,max:1e4}},B={healAbility:ye,skillBuff:!0},j={skillBuff:!0,teammateHPValue:6e3};return{activeAbilities:[z.BASIC],content:()=>Object.values(R),teammateContent:()=>Object.values(I),defaults:()=>B,teammateDefaults:()=>j,precomputeEffects:(Z,K,X)=>{const te=K.characterConditionals;return Z.BASIC_HP_SCALING.buff(v,u),Z.BASIC_TOUGHNESS_DMG.buff(10,u),te.healAbility==Me&&(Z.HEAL_TYPE.set(Me,d),Z.HEAL_SCALING.buff(N,d),Z.HEAL_FLAT.buff(U,d)),te.healAbility==ye&&(Z.HEAL_TYPE.set(ye,m),Z.HEAL_SCALING.buff(F,m),Z.HEAL_FLAT.buff(P,m)),te.healAbility==Ct&&(Z.HEAL_TYPE.set(Ct,h),Z.HEAL_SCALING.buff(T,h),Z.HEAL_FLAT.buff(y,h)),te.skillBuff&&(Z.HP.buff(L,d),Z.UNCONVERTIBLE_HP_BUFF.buff(L,d)),Z},precomputeMutualEffects:(Z,K,X)=>{const te=K.characterConditionals;Z.RES.buffTeam(e>=6&&te.skillBuff?.3:0,_)},precomputeTeammateEffects:(Z,K,X)=>{const te=K.characterConditionals;Z.HP.buffTeam(te.skillBuff?A*te.teammateHPValue:0,d),Z.HP.buffTeam(te.skillBuff?L:0,d),Z.HP.buffTeam(e>=6&&te.skillBuff?.06*te.teammateHPValue:0,_);const ae=e>=4&&te.skillBuff?.03*te.teammateHPValue:0;Z.ATK.buffTeam(ae,H)},finalizeCalculations:(Z,K,X)=>{Ks(Z)},gpuFinalizeCalculations:()=>Ns(),dynamicConditionals:[{id:"LynxHpConversionConditional",type:Qe.ABILITY,activation:ze.CONTINUOUS,dependsOn:[n.HP],chainsTo:[n.HP],condition:function(Z,K,X){return K.characterConditionals.skillBuff},effect:function(Z,K,X){const te=A+(e>=6?.06:0);ta(n.HP,n.HP,this,Z,K,X,d,ae=>ae*te)},gpu:function(Z,K){const X=Z.characterConditionals,te=A+(e>=6?.06:0);return aa(n.HP,n.HP,this,Z,K,`${te} * convertibleValue`,`${it(X.skillBuff)}`)}},{id:"LynxHpAtkConversionConditional",type:Qe.ABILITY,activation:ze.CONTINUOUS,dependsOn:[n.HP],chainsTo:[n.ATK],condition:function(Z,K,X){return K.characterConditionals.skillBuff},effect:function(Z,K,X){ta(n.HP,n.ATK,this,Z,K,X,H,te=>te*p)},gpu:function(Z,K){const X=Z.characterConditionals;return aa(n.HP,n.ATK,this,Z,K,`${p} * convertibleValue`,`${it(X.skillBuff)}`)}}]}},qh=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Common.HealAbility"),{basic:s,skill:o,ult:r}=pe.SKILL_BASIC_3_ULT_TALENT_5,{SOURCE_BASIC:l,SOURCE_SKILL:c,SOURCE_ULT:u,SOURCE_TALENT:d,SOURCE_TECHNIQUE:m,SOURCE_TRACE:h,SOURCE_MEMO:g,SOURCE_E1:C,SOURCE_E2:M,SOURCE_E4:x,SOURCE_E6:O}=w.character("1105"),H=s(e,1,1.1),_=r(e,.138,.1472),A=r(e,368,409.4),L=o(e,.105,.112),v=o(e,280,311.5),N={healAbility:{id:"healAbility",formItem:"select",text:t("Text"),content:t("Content"),options:[{display:t("Skill"),value:Me,label:t("Skill")},{display:t("Ult"),value:ye,label:t("Ult")}],fullWidth:!0}},U={healAbility:ye};return{activeAbilities:[z.BASIC],content:()=>Object.values(N),defaults:()=>U,precomputeEffects:(F,P,T)=>{const y=P.characterConditionals;return F.OHB.buff(.1,h),F.BASIC_ATK_SCALING.buff(H,l),F.BASIC_HP_SCALING.buff(e>=6?.4:0,O),F.BASIC_TOUGHNESS_DMG.buff(10,l),y.healAbility==Me&&(F.HEAL_TYPE.set(Me,c),F.HEAL_SCALING.buff(L,c),F.HEAL_FLAT.buff(v,c)),y.healAbility==ye&&(F.HEAL_TYPE.set(ye,u),F.HEAL_SCALING.buff(_,u),F.HEAL_FLAT.buff(A,u)),F},finalizeCalculations:(F,P,T)=>{Ks(F)},gpuFinalizeCalculations:()=>Ns()}},e1=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Characters.Pela"),{basic:s,skill:o,ult:r}=pe.SKILL_BASIC_3_ULT_TALENT_5,{SOURCE_BASIC:l,SOURCE_SKILL:c,SOURCE_ULT:u,SOURCE_TALENT:d,SOURCE_TECHNIQUE:m,SOURCE_TRACE:h,SOURCE_MEMO:g,SOURCE_E1:C,SOURCE_E2:M,SOURCE_E4:x,SOURCE_E6:O}=w.character("1106"),H=r(e,.4,.42),_=s(e,1,1.1),A=o(e,2.1,2.31),L=r(e,1,1.08),v={teamEhrBuff:!0,enemyDebuffed:!0,skillRemovedBuff:!1,ultDefPenDebuff:!0,e4SkillResShred:!0},N={teamEhrBuff:!0,ultDefPenDebuff:!0,e4SkillResShred:!0},U={teamEhrBuff:{id:"teamEhrBuff",formItem:"switch",text:t("Content.teamEhrBuff.text"),content:t("Content.teamEhrBuff.content")},enemyDebuffed:{id:"enemyDebuffed",formItem:"switch",text:t("Content.enemyDebuffed.text"),content:t("Content.enemyDebuffed.content")},skillRemovedBuff:{id:"skillRemovedBuff",formItem:"switch",text:t("Content.skillRemovedBuff.text"),content:t("Content.skillRemovedBuff.content")},ultDefPenDebuff:{id:"ultDefPenDebuff",formItem:"switch",text:t("Content.ultDefPenDebuff.text"),content:t("Content.ultDefPenDebuff.content",{ultDefPenValue:b.precisionRound(100*H)})},e4SkillResShred:{id:"e4SkillResShred",formItem:"switch",text:t("Content.e4SkillResShred.text"),content:t("Content.e4SkillResShred.content"),disabled:e<4}},F={teamEhrBuff:U.teamEhrBuff,ultDefPenDebuff:U.ultDefPenDebuff,e4SkillResShred:U.e4SkillResShred};return{activeAbilities:[z.BASIC,z.SKILL,z.ULT],content:()=>Object.values(U),teammateContent:()=>Object.values(F),defaults:()=>v,teammateDefaults:()=>N,precomputeEffects:(P,T,y)=>{const p=T.characterConditionals;return P.SPD_P.buff(e>=2&&p.skillRemovedBuff?.1:0,M),P.BASIC_ATK_SCALING.buff(_,l),P.SKILL_ATK_SCALING.buff(A,c),P.ULT_ATK_SCALING.buff(L,u),Ee(P,Bt|Me|ye,p.skillRemovedBuff?.2:0,h),P.ELEMENTAL_DMG.buff(p.enemyDebuffed?.2:0,h),P.BASIC_TOUGHNESS_DMG.buff(10,l),P.SKILL_TOUGHNESS_DMG.buff(20,c),P.ULT_TOUGHNESS_DMG.buff(20,u),P.BASIC_ADDITIONAL_DMG_SCALING.buff(e>=6&&p.enemyDebuffed?.4:0,d),P.SKILL_ADDITIONAL_DMG_SCALING.buff(e>=6&&p.enemyDebuffed?.4:0,d),P.ULT_ADDITIONAL_DMG_SCALING.buff(e>=6&&p.enemyDebuffed?.4:0,d),P},precomputeMutualEffects:(P,T,y)=>{const p=T.characterConditionals;P.EHR.buffTeam(p.teamEhrBuff?.1:0,h),P.DEF_PEN.buffTeam(p.ultDefPenDebuff?H:0,u),P.ICE_RES_PEN.buffTeam(e>=4&&p.e4SkillResShred?.12:0,x)},finalizeCalculations:(P,T,y)=>{Aa(P)},gpuFinalizeCalculations:()=>Va()}},t1=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Characters.Sampo"),{basic:s,skill:o,ult:r,talent:l}=pe.SKILL_BASIC_3_ULT_TALENT_5,{SOURCE_BASIC:c,SOURCE_SKILL:u,SOURCE_ULT:d,SOURCE_TALENT:m,SOURCE_TECHNIQUE:h,SOURCE_TRACE:g,SOURCE_MEMO:C,SOURCE_E1:M,SOURCE_E2:x,SOURCE_E4:O,SOURCE_E6:H}=w.character("1108"),_=r(e,.3,.32),A=s(e,1,1.1),L=o(e,.56,.616),v=r(e,1.6,1.728),N=l(e,.52,.572),U=e<1?4:5,F={targetDotTakenDebuff:!0,skillExtraHits:U,targetWindShear:!0},P={targetDotTakenDebuff:!0},T={targetDotTakenDebuff:{id:"targetDotTakenDebuff",formItem:"switch",text:t("Content.targetDotTakenDebuff.text"),content:t("Content.targetDotTakenDebuff.content",{dotVulnerabilityValue:b.precisionRound(100*_)})},skillExtraHits:{id:"skillExtraHits",formItem:"slider",text:t("Content.skillExtraHits.text"),content:t("Content.skillExtraHits.content"),min:1,max:U},targetWindShear:{id:"targetWindShear",formItem:"switch",text:t("Content.targetWindShear.text"),content:t("Content.targetWindShear.content")}},y={targetDotTakenDebuff:T.targetDotTakenDebuff};return{activeAbilities:[z.BASIC,z.SKILL,z.ULT,z.DOT],content:()=>Object.values(T),teammateContent:()=>Object.values(y),defaults:()=>F,teammateDefaults:()=>P,precomputeEffects:(p,R,I)=>{const B=R.characterConditionals;return p.BASIC_ATK_SCALING.buff(A,c),p.SKILL_ATK_SCALING.buff(L,u),p.SKILL_ATK_SCALING.buff(B.skillExtraHits*L,u),p.ULT_ATK_SCALING.buff(v,d),p.DOT_ATK_SCALING.buff(N,m),p.DOT_ATK_SCALING.buff(e>=6?.15:0,H),p.DMG_RED_MULTI.multiply(B.targetWindShear?1-.15:1,g),p.BASIC_TOUGHNESS_DMG.buff(10,c),p.SKILL_TOUGHNESS_DMG.buff(10+5*B.skillExtraHits,u),p.ULT_TOUGHNESS_DMG.buff(20,d),p.DOT_CHANCE.set(.65,m),p},precomputeMutualEffects:(p,R,I)=>{const B=R.characterConditionals;ha(p,qa,B.targetDotTakenDebuff?_:0,d,It.TEAM)},finalizeCalculations:p=>{},gpuFinalizeCalculations:()=>""}},a1=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Characters.Seele"),{basic:s,skill:o,ult:r,talent:l}=pe.SKILL_TALENT_3_ULT_BASIC_5,{SOURCE_BASIC:c,SOURCE_SKILL:u,SOURCE_ULT:d,SOURCE_TALENT:m,SOURCE_TECHNIQUE:h,SOURCE_TRACE:g,SOURCE_MEMO:C,SOURCE_E1:M,SOURCE_E2:x,SOURCE_E4:O,SOURCE_E6:H}=w.character("1102"),_=l(e,.8,.88),A=e>=2?2:1,L=s(e,1,1.1),v=o(e,2.2,2.42),N=r(e,4.25,4.59),U={buffedState:!0,speedBoostStacks:A,e1EnemyHp80CrBoost:!1,e6UltTargetDebuff:!0},F={buffedState:{id:"buffedState",formItem:"switch",text:t("Content.buffedState.text"),content:t("Content.buffedState.content",{buffedStateDmgBuff:b.precisionRound(100*_)})},speedBoostStacks:{id:"speedBoostStacks",formItem:"slider",text:t("Content.speedBoostStacks.text"),content:t("Content.speedBoostStacks.content"),min:0,max:A},e1EnemyHp80CrBoost:{id:"e1EnemyHp80CrBoost",formItem:"switch",text:t("Content.e1EnemyHp80CrBoost.text"),content:t("Content.e1EnemyHp80CrBoost.content"),disabled:e<1},e6UltTargetDebuff:{id:"e6UltTargetDebuff",formItem:"switch",text:t("Content.e6UltTargetDebuff.text"),content:t("Content.e6UltTargetDebuff.content"),disabled:e<6}};return{activeAbilities:[z.BASIC,z.SKILL,z.ULT],content:()=>Object.values(F),defaults:()=>U,precomputeEffects:(P,T,y)=>{const p=T.characterConditionals;return P.CR.buff(e>=1&&p.e1EnemyHp80CrBoost?.15:0,M),P.SPD_P.buff(.25*p.speedBoostStacks,u),P.BASIC_ATK_SCALING.buff(L,c),P.SKILL_ATK_SCALING.buff(v,u),P.ULT_ATK_SCALING.buff(N,d),P.BASIC_ADDITIONAL_DMG_SCALING.buff(e>=6&&p.e6UltTargetDebuff?.15*P.a[S.ULT_ATK_SCALING]:0,w.NONE),P.SKILL_ADDITIONAL_DMG_SCALING.buff(e>=6&&p.e6UltTargetDebuff?.15*P.a[S.ULT_ATK_SCALING]:0,w.NONE),P.ULT_ADDITIONAL_DMG_SCALING.buff(e>=6&&p.e6UltTargetDebuff?.15*P.a[S.ULT_ATK_SCALING]:0,w.NONE),P.ELEMENTAL_DMG.buff(p.buffedState?_:0,m),P.RES_PEN.buff(p.buffedState?.2:0,g),P.BASIC_TOUGHNESS_DMG.buff(10,c),P.SKILL_TOUGHNESS_DMG.buff(20,u),P.ULT_TOUGHNESS_DMG.buff(30,d),P},precomputeMutualEffects:(P,T,y)=>{},finalizeCalculations:(P,T,y)=>{Aa(P)},gpuFinalizeCalculations:(P,T)=>Va()}},n1=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Characters.Serval"),{basic:s,skill:o,ult:r,talent:l}=pe.SKILL_BASIC_3_ULT_TALENT_5,{SOURCE_BASIC:c,SOURCE_SKILL:u,SOURCE_ULT:d,SOURCE_TALENT:m,SOURCE_TECHNIQUE:h,SOURCE_TRACE:g,SOURCE_MEMO:C,SOURCE_E1:M,SOURCE_E2:x,SOURCE_E4:O,SOURCE_E6:H}=w.character("1103"),_=l(e,.72,.792),A=s(e,1,1.1),L=o(e,1.4,1.54),v=r(e,1.8,1.944),N=o(e,1.04,1.144),U={targetShocked:!0,enemyDefeatedBuff:!0},F={targetShocked:{id:"targetShocked",formItem:"switch",text:t("Content.targetShocked.text"),content:t("Content.targetShocked.content",{talentExtraDmgScaling:b.precisionRound(100*_)})},enemyDefeatedBuff:{id:"enemyDefeatedBuff",formItem:"switch",text:t("Content.enemyDefeatedBuff.text"),content:t("Content.enemyDefeatedBuff.content")}};return{activeAbilities:[z.BASIC,z.SKILL,z.ULT,z.DOT],content:()=>Object.values(F),defaults:()=>U,precomputeEffects:(P,T,y)=>{const p=T.characterConditionals;return P.ATK_P.buff(p.enemyDefeatedBuff?.2:0,g),P.BASIC_ATK_SCALING.buff(A,c),P.SKILL_ATK_SCALING.buff(L,u),P.ULT_ATK_SCALING.buff(v,d),P.DOT_ATK_SCALING.buff(N,u),P.BASIC_ADDITIONAL_DMG_SCALING.buff(p.targetShocked?_:0,m),P.SKILL_ADDITIONAL_DMG_SCALING.buff(p.targetShocked?_:0,m),P.ULT_ADDITIONAL_DMG_SCALING.buff(p.targetShocked?_:0,m),P.ELEMENTAL_DMG.buff(e>=6&&p.targetShocked?.3:0,d),P.BASIC_TOUGHNESS_DMG.buff(10,c),P.SKILL_TOUGHNESS_DMG.buff(20,u),P.ULT_TOUGHNESS_DMG.buff(20,d),P.DOT_CHANCE.set(1,u),P},finalizeCalculations:P=>{Aa(P)},gpuFinalizeCalculations:()=>Va()}},i1=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Characters.Topaz"),{basic:s,skill:o,ult:r,talent:l}=pe.SKILL_BASIC_3_ULT_TALENT_5,{SOURCE_BASIC:c,SOURCE_SKILL:u,SOURCE_ULT:d,SOURCE_TALENT:m,SOURCE_TECHNIQUE:h,SOURCE_TRACE:g,SOURCE_MEMO:C,SOURCE_E1:M,SOURCE_E2:x,SOURCE_E4:O,SOURCE_E6:H}=w.character("1112"),_=o(e,.5,.55),A=r(e,1.5,1.65),L=r(e,.25,.275),v=s(e,1,1.1),N=o(e,1.5,1.65),U=l(e,1.5,1.65),F=Ie*(1*1/1),P=Ie*(1*1/7+2*1/7+3*1/7+4*1/7+5*1/7+6*1/7+7*1/7),T=Ie*(1*1/10+2*1/10+3*1/10+4*1/10+5*1/10+6*1/10+7*1/10+8*3/10),y={enemyProofOfDebtDebuff:!0,numbyEnhancedState:!0,e1DebtorStacks:2},p={enemyProofOfDebtDebuff:!0,e1DebtorStacks:2},R={enemyProofOfDebtDebuff:{id:"enemyProofOfDebtDebuff",formItem:"switch",text:t("Content.enemyProofOfDebtDebuff.text"),content:t("Content.enemyProofOfDebtDebuff.content",{proofOfDebtFuaVulnerability:b.precisionRound(100*_)})},numbyEnhancedState:{id:"numbyEnhancedState",formItem:"switch",text:t("Content.numbyEnhancedState.text"),content:t("Content.numbyEnhancedState.content",{enhancedStateFuaCdBoost:b.precisionRound(100*L),enhancedStateFuaScalingBoost:b.precisionRound(100*A)})},e1DebtorStacks:{id:"e1DebtorStacks",formItem:"slider",text:t("Content.e1DebtorStacks.text"),content:t("Content.e1DebtorStacks.content"),min:0,max:2,disabled:e<1}},I={enemyProofOfDebtDebuff:R.enemyProofOfDebtDebuff,e1DebtorStacks:R.e1DebtorStacks};return{activeAbilities:[z.BASIC,z.SKILL,z.FUA],content:()=>Object.values(R),teammateContent:()=>Object.values(I),defaults:()=>y,teammateDefaults:()=>p,initializeConfigurations:(B,j,Z)=>{B.BASIC_DMG_TYPE.set(Bt|je,g),B.SKILL_DMG_TYPE.set(Me|je,u),B.SUMMONS.set(1,m)},precomputeEffects:(B,j,Z)=>{const K=j.characterConditionals;return Sn(B,Me|je,K.numbyEnhancedState?L:0,d),di(B,Me|je,e>=6?.1:0,H),Sn(B,Bt,K.numbyEnhancedState?-L:0,d),di(B,Bt,e>=6?-.1:0,H),B.BASIC_ATK_SCALING.buff(v,c),B.SKILL_ATK_SCALING.buff(N,u),B.SKILL_ATK_SCALING.buff(K.numbyEnhancedState?A:0,d),B.FUA_ATK_SCALING.buff(U,m),B.FUA_ATK_SCALING.buff(K.numbyEnhancedState?A:0,d),B.ELEMENTAL_DMG.buff(Z.enemyElementalWeak?.15:0,g),B.BASIC_TOUGHNESS_DMG.buff(10,c),B.SKILL_TOUGHNESS_DMG.buff(20,u),B.FUA_TOUGHNESS_DMG.buff(20,m),B},precomputeMutualEffects:(B,j,Z)=>{const K=j.characterConditionals;ha(B,je,K.enemyProofOfDebtDebuff?_:0,u,It.TEAM),Sn(B,je,e>=1&&K.enemyProofOfDebtDebuff?.25*K.e1DebtorStacks:0,M,It.TEAM)},finalizeCalculations:(B,j,Z)=>{const X=j.characterConditionals.numbyEnhancedState?T:P,te=Qi(B,j,Z,F),ae=Qi(B,j,Z,X);B.BASIC_ATK_P_BOOST.buff(te,w.NONE),B.SKILL_ATK_P_BOOST.buff(ae,w.NONE),B.FUA_ATK_P_BOOST.buff(ae,w.NONE)},gpuFinalizeCalculations:(B,j)=>{const K=B.characterConditionals.numbyEnhancedState?T:P;return`
x.BASIC_ATK_P_BOOST += calculateAshblazingSetP(sets.TheAshblazingGrandDuke, action.setConditionals.valueTheAshblazingGrandDuke, ${F});
x.SKILL_ATK_P_BOOST += calculateAshblazingSetP(sets.TheAshblazingGrandDuke, action.setConditionals.valueTheAshblazingGrandDuke, ${K});
x.FUA_ATK_P_BOOST += calculateAshblazingSetP(sets.TheAshblazingGrandDuke, action.setConditionals.valueTheAshblazingGrandDuke, ${K});
      `}}},s1=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Characters.Bailu"),s=b.wrappedFixedT(a).get(null,"conditionals","Common.HealAbility"),{basic:o,skill:r,ult:l,talent:c}=pe.SKILL_TALENT_3_ULT_BASIC_5,{SOURCE_BASIC:u,SOURCE_SKILL:d,SOURCE_ULT:m,SOURCE_TALENT:h,SOURCE_TECHNIQUE:g,SOURCE_TRACE:C,SOURCE_MEMO:M,SOURCE_E1:x,SOURCE_E2:O,SOURCE_E4:H,SOURCE_E6:_}=w.character("1211"),A=o(e,1,1.1),L=r(e,.117,.1248),v=r(e,312,347.1),N=l(e,.135,.144),U=l(e,360,400.5),F=c(e,.054,.0576),P=c(e,144,160.2),T={healAbility:ye,healingMaxHpBuff:!0,talentDmgReductionBuff:!0,e2UltHealingBuff:!0,e4SkillHealingDmgBuffStacks:0},y={healingMaxHpBuff:!0,talentDmgReductionBuff:!0,e4SkillHealingDmgBuffStacks:3},p={healAbility:{id:"healAbility",formItem:"select",text:s("Text"),content:s("Content"),options:[{display:s("Skill"),value:Me,label:s("Skill")},{display:s("Ult"),value:ye,label:s("Ult")},{display:s("Talent"),value:Ct,label:s("Talent")}],fullWidth:!0},healingMaxHpBuff:{id:"healingMaxHpBuff",formItem:"switch",text:t("Content.healingMaxHpBuff.text"),content:t("Content.healingMaxHpBuff.content")},talentDmgReductionBuff:{id:"talentDmgReductionBuff",formItem:"switch",text:t("Content.talentDmgReductionBuff.text"),content:t("Content.talentDmgReductionBuff.content")},e2UltHealingBuff:{id:"e2UltHealingBuff",formItem:"switch",text:t("Content.e2UltHealingBuff.text"),content:t("Content.e2UltHealingBuff.content"),disabled:e<2},e4SkillHealingDmgBuffStacks:{id:"e4SkillHealingDmgBuffStacks",formItem:"slider",text:t("Content.e4SkillHealingDmgBuffStacks.text"),content:t("Content.e4SkillHealingDmgBuffStacks.content"),min:0,max:3,disabled:e<4}},R={healingMaxHpBuff:p.healingMaxHpBuff,talentDmgReductionBuff:p.talentDmgReductionBuff,e4SkillHealingDmgBuffStacks:p.e4SkillHealingDmgBuffStacks};return{activeAbilities:[z.BASIC],content:()=>Object.values(p),teammateContent:()=>Object.values(R),defaults:()=>T,teammateDefaults:()=>y,precomputeEffects:(I,B,j)=>{const Z=B.characterConditionals;return I.OHB.buff(e>=2&&Z.e2UltHealingBuff?.15:0,O),I.BASIC_ATK_SCALING.buff(A,u),Z.healAbility==Me&&(I.HEAL_TYPE.set(Me,d),I.HEAL_SCALING.buff(L,d),I.HEAL_FLAT.buff(v,d)),Z.healAbility==ye&&(I.HEAL_TYPE.set(ye,m),I.HEAL_SCALING.buff(N,m),I.HEAL_FLAT.buff(U,m)),Z.healAbility==Ct&&(I.HEAL_TYPE.set(Ct,h),I.HEAL_SCALING.buff(F,h),I.HEAL_FLAT.buff(P,h)),I.BASIC_TOUGHNESS_DMG.buff(10,u),I},precomputeMutualEffects:(I,B,j)=>{const Z=B.characterConditionals;I.HP_P.buffTeam(Z.healingMaxHpBuff?.1:0,C),I.ELEMENTAL_DMG.buffTeam(e>=4?Z.e4SkillHealingDmgBuffStacks*.1:0,H),I.DMG_RED_MULTI.multiplyTeam(Z.talentDmgReductionBuff?1-.1:1,C)},finalizeCalculations:I=>{Ks(I)},gpuFinalizeCalculations:()=>Ns()}},o1=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Characters.Blade"),{basic:s,skill:o,ult:r,talent:l}=pe.ULT_TALENT_3_SKILL_BASIC_5,{SOURCE_BASIC:c,SOURCE_SKILL:u,SOURCE_ULT:d,SOURCE_TALENT:m,SOURCE_TECHNIQUE:h,SOURCE_TRACE:g,SOURCE_MEMO:C,SOURCE_E1:M,SOURCE_E2:x,SOURCE_E4:O,SOURCE_E6:H}=w.character("1205"),_=o(e,.4,.456),A=.9,L=s(e,1,1.1),v=o(e,.4,.44),N=o(e,1,1.1),U=r(e,.4,.432),F=r(e,1,1.08),P=r(e,1,1.08),T=l(e,.44,.484),y=l(e,1.1,1.21),p={1:Ie*(1*.33+2*.33+3*.34),3:Ie*(2*.33+5*.33+8*.34),5:Ie*(3*.33+8*.33+8*.34)},R={enhancedStateActive:!0,hpPercentLostTotal:A,e4MaxHpIncreaseStacks:2},I={enhancedStateActive:{id:"enhancedStateActive",formItem:"switch",text:t("Content.enhancedStateActive.text"),content:t("Content.enhancedStateActive.content",{enhancedStateDmgBoost:b.precisionRound(100*_)})},hpPercentLostTotal:{id:"hpPercentLostTotal",formItem:"slider",text:t("Content.hpPercentLostTotal.text"),content:t("Content.hpPercentLostTotal.content",{hpPercentLostTotalMax:b.precisionRound(100*A)}),min:0,max:A,percent:!0},e4MaxHpIncreaseStacks:{id:"e4MaxHpIncreaseStacks",formItem:"slider",text:t("Content.e4MaxHpIncreaseStacks.text"),content:t("Content.e4MaxHpIncreaseStacks.content"),min:0,max:2,disabled:e<4}};return{activeAbilities:[z.BASIC,z.SKILL,z.ULT,z.FUA],content:()=>Object.values(I),defaults:()=>R,precomputeEffects:(B,j,Z)=>{const K=j.characterConditionals;return B.CR.buff(e>=2&&K.enhancedStateActive?.15:0,x),B.HP_P.buff(e>=4?K.e4MaxHpIncreaseStacks*.2:0,O),K.enhancedStateActive?(B.BASIC_ATK_SCALING.buff(v,c),B.BASIC_HP_SCALING.buff(N,c)):B.BASIC_ATK_SCALING.buff(L,c),B.ULT_ATK_SCALING.buff(U,d),B.ULT_HP_SCALING.buff(F,d),B.ULT_HP_SCALING.buff(P*K.hpPercentLostTotal,d),B.ULT_HP_SCALING.buff(e>=1&&Z.enemyCount==1?1.5*K.hpPercentLostTotal:0,M),B.FUA_ATK_SCALING.buff(T,m),B.FUA_HP_SCALING.buff(y,m),B.FUA_HP_SCALING.buff(e>=6?.5:0,H),B.ELEMENTAL_DMG.buff(K.enhancedStateActive?_:0,u),Ee(B,je,.2,g),B.BASIC_TOUGHNESS_DMG.buff(K.enhancedStateActive?20:10,c),B.ULT_TOUGHNESS_DMG.buff(20,d),B.FUA_TOUGHNESS_DMG.buff(10,m),B},finalizeCalculations:(B,j,Z)=>{const K=p[Z.enemyCount];B.FUA_ATK_P_BOOST.buff(Qi(B,j,Z,K),w.NONE)},gpuFinalizeCalculations:(B,j)=>jt(p[j.enemyCount])}},r1=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Characters.Feixiao"),{basic:s,skill:o,ult:r,talent:l}=pe.ULT_BASIC_3_SKILL_TALENT_5,{SOURCE_BASIC:c,SOURCE_SKILL:u,SOURCE_ULT:d,SOURCE_TALENT:m,SOURCE_TECHNIQUE:h,SOURCE_TRACE:g,SOURCE_MEMO:C,SOURCE_E1:M,SOURCE_E2:x,SOURCE_E4:O,SOURCE_E6:H}=w.character("1220"),_=s(e,1,1.1),A=o(e,2,2.2),L=r(e,.6,.648),v=r(e,.3,.33),N=r(e,1.6,1.728),U=l(e,1.1,1.21),F=l(e,.6,.66),P=1*.1285+2*.1285+3*.1285+4*.1285+5*.1285+6*.1285+7*.2285,T=1*.1285*.1+2*.1285*.9+3*.1285*.1+4*.1285*.9+5*.1285*.1+6*.1285*.9+7*.1285*.1+8*.1285*.9+8*.1285*.1+8*.1285*.9+8*.1285*.1+8*.1285*.9+8*.2285;function y(I,B){return I.characterConditionals.weaknessBrokenUlt?Ie*T:Ie*P}const p={weaknessBrokenUlt:!0,talentDmgBuff:!0,skillAtkBuff:!0,e1OriginalDmgBoost:!0,e4Buffs:!0,e6Buffs:!0},R={weaknessBrokenUlt:{id:"weaknessBrokenUlt",formItem:"switch",text:t("Content.weaknessBrokenUlt.text"),content:t("Content.weaknessBrokenUlt.content")},talentDmgBuff:{id:"talentDmgBuff",formItem:"switch",text:t("Content.talentDmgBuff.text"),content:t("Content.talentDmgBuff.content",{FuaMultiplier:b.precisionRound(100*U),DmgBuff:b.precisionRound(100*F)})},skillAtkBuff:{id:"skillAtkBuff",formItem:"switch",text:t("Content.skillAtkBuff.text"),content:t("Content.skillAtkBuff.content")},e1OriginalDmgBoost:{id:"e1OriginalDmgBoost",formItem:"switch",text:t("Content.e1OriginalDmgBoost.text"),content:t("Content.e1OriginalDmgBoost.content"),disabled:e<1},e4Buffs:{id:"e4Buffs",formItem:"switch",text:t("Content.e4Buffs.text"),content:t("Content.e4Buffs.content"),disabled:e<4},e6Buffs:{id:"e6Buffs",formItem:"switch",text:t("Content.e6Buffs.text"),content:t("Content.e6Buffs.content"),disabled:e<6}};return{activeAbilities:[z.BASIC,z.SKILL,z.ULT,z.FUA],content:()=>Object.values(R),defaults:()=>p,initializeConfigurations:(I,B,j)=>{const Z=B.characterConditionals;I.ULT_DMG_TYPE.set(ye|je,g),Z.weaknessBrokenUlt&&I.ENEMY_WEAKNESS_BROKEN.config(1,d),e>=6&&Z.e6Buffs&&I.FUA_DMG_TYPE.set(ye|je,H)},precomputeEffects:(I,B,j)=>{const Z=B.characterConditionals;return Z.weaknessBrokenUlt||I.ULT_BREAK_EFFICIENCY_BOOST.buff(1,d),Sn(I,je,.36,g),I.ATK_P.buff(Z.skillAtkBuff?.48:0,g),I.ELEMENTAL_DMG.buff(Z.talentDmgBuff?F:0,m),I.BASIC_ATK_SCALING.buff(_,c),I.SKILL_ATK_SCALING.buff(A,u),I.FUA_ATK_SCALING.buff(U,m),I.ULT_ATK_SCALING.buff(6*(L+v)+N,d),I.ULT_FINAL_DMG_BOOST.buff(e>=1&&Z.e1OriginalDmgBoost?.3071:0,M),e>=4&&(I.SPD_P.buff(.08,M),I.FUA_TOUGHNESS_DMG.buff(5,M)),e>=6&&Z.e6Buffs&&(di(I,ye,.2,H),I.FUA_ATK_SCALING.buff(1.4,H)),I.BASIC_TOUGHNESS_DMG.buff(10,c),I.SKILL_TOUGHNESS_DMG.buff(20,u),I.ULT_TOUGHNESS_DMG.buff(30,d),I.FUA_TOUGHNESS_DMG.buff(5,m),I},finalizeCalculations:(I,B,j)=>{const Z=y(B),K=Ie*(1*1),X=Qi(I,B,j,Z),te=Qi(I,B,j,K);I.ULT_ATK_P_BOOST.buff(X,w.NONE),I.FUA_ATK_P_BOOST.buff(te,w.NONE)},gpuFinalizeCalculations:(I,B)=>{const j=y(I),Z=Ie*(1*1);return`
x.ULT_ATK_P_BOOST += calculateAshblazingSetP(sets.TheAshblazingGrandDuke, action.setConditionals.valueTheAshblazingGrandDuke, ${j});
x.FUA_ATK_P_BOOST += calculateAshblazingSetP(sets.TheAshblazingGrandDuke, action.setConditionals.valueTheAshblazingGrandDuke, ${Z});
    `}}},l1=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Characters.Fugue"),{basic:s,skill:o,ult:r,talent:l}=pe.SKILL_BASIC_3_ULT_TALENT_5,{SOURCE_BASIC:c,SOURCE_SKILL:u,SOURCE_ULT:d,SOURCE_TALENT:m,SOURCE_TECHNIQUE:h,SOURCE_TRACE:g,SOURCE_MEMO:C,SOURCE_E1:M,SOURCE_E2:x,SOURCE_E4:O,SOURCE_E6:H}=w.character("1225"),_=o(e,.3,.33),A=o(e,.18,.2),L=s(e,1,1.1),v=r(e,2,2.2),N=l(e,1,1.1),U={torridScorch:!0,foxianPrayer:!1,defReduction:!0,superBreakDmg:!0,e4BreakDmg:!0,e6BreakEfficiency:!0},F={foxianPrayer:!0,be220Buff:!0,weaknessBreakBeStacks:2,defReduction:!0,superBreakDmg:!0,e4BreakDmg:!0},P={torridScorch:{id:"torridScorch",formItem:"switch",text:t("Content.torridScorch.text"),content:t("Content.torridScorch.content")},foxianPrayer:{id:"foxianPrayer",formItem:"switch",text:t("Content.foxianPrayer.text"),content:t("Content.foxianPrayer.content",{BreakBuff:b.precisionRound(100*_)})},defReduction:{id:"defReduction",formItem:"switch",text:t("Content.defReduction.text"),content:t("Content.defReduction.content",{DefShred:b.precisionRound(100*A)})},superBreakDmg:{id:"superBreakDmg",formItem:"switch",text:t("Content.superBreakDmg.text"),content:t("Content.superBreakDmg.content",{SuperBreakMultiplier:b.precisionRound(100*N)})},e4BreakDmg:{id:"e4BreakDmg",formItem:"switch",text:t("Content.e4BreakDmg.text"),content:t("Content.e4BreakDmg.content"),disabled:e<4},e6BreakEfficiency:{id:"e6BreakEfficiency",formItem:"switch",text:t("Content.e6BreakEfficiency.text"),content:t("Content.e6BreakEfficiency.content"),disabled:e<6}},T={foxianPrayer:P.foxianPrayer,be220Buff:{id:"be220Buff",formItem:"switch",text:t("TeammateContent.be220Buff.text"),content:t("TeammateContent.be220Buff.content")},weaknessBreakBeStacks:{id:"weaknessBreakBeStacks",formItem:"slider",text:t("TeammateContent.weaknessBreakBeStacks.text"),content:t("TeammateContent.weaknessBreakBeStacks.content"),min:0,max:2},defReduction:P.defReduction,superBreakDmg:P.superBreakDmg,e4BreakDmg:P.e4BreakDmg};return{activeAbilities:[z.BASIC,z.ULT],content:()=>Object.values(P),teammateContent:()=>Object.values(T),defaults:()=>U,teammateDefaults:()=>F,initializeConfigurations:(y,p,R)=>{p.characterConditionals.superBreakDmg&&y.ENEMY_WEAKNESS_BROKEN.config(1,m)},initializeTeammateConfigurations:(y,p,R)=>{p.characterConditionals.superBreakDmg&&y.ENEMY_WEAKNESS_BROKEN.config(1,m)},precomputeEffects:(y,p,R)=>{const I=p.characterConditionals;y.BE.buff(.3,g),y.BREAK_EFFICIENCY_BOOST.buff(e>=6&&I.e6BreakEfficiency?.5:0,H),y.BASIC_ATK_SCALING.buff(L,c),y.ULT_ATK_SCALING.buff(v,d),y.BASIC_TOUGHNESS_DMG.buff(10,c),y.ULT_TOUGHNESS_DMG.buff(20,d)},precomputeMutualEffects:(y,p,R)=>{const I=p.characterConditionals;y.BE.buffSingle(I.foxianPrayer?_:0,u),y.SUPER_BREAK_MODIFIER.buffTeam(I.superBreakDmg?N:0,m),y.DEF_PEN.buffTeam(I.defReduction?A:0,u),y.BREAK_EFFICIENCY_BOOST.buffSingle(e>=1&&I.foxianPrayer?.5:0,M),Ee(y,ja,e>=4&&I.foxianPrayer&&I.e4BreakDmg?.2:0,O,It.SINGLE)},precomputeTeammateEffects:(y,p,R)=>{const I=p.characterConditionals;y.BE.buffTeam(I.weaknessBreakBeStacks*(.06+(I.be220Buff?.12:0)),g)},finalizeCalculations:(y,p,R)=>{},gpuFinalizeCalculations:(y,p)=>""}},c1=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Characters.FuXuan"),{basic:s,skill:o,ult:r,talent:l}=pe.SKILL_TALENT_3_ULT_BASIC_5,{SOURCE_BASIC:c,SOURCE_SKILL:u,SOURCE_ULT:d,SOURCE_TALENT:m,SOURCE_TECHNIQUE:h,SOURCE_TRACE:g,SOURCE_MEMO:C,SOURCE_E1:M,SOURCE_E2:x,SOURCE_E4:O,SOURCE_E6:H}=w.character("1208"),_=o(e,.12,.132),A=o(e,.06,.066),L=l(e,.18,.196),v=s(e,.5,.55),N=r(e,1,1.08),U=.05,F=133,P={skillActive:!0,talentActive:!0,e6TeamHpLostPercent:1.2},T={skillActive:!0,talentActive:!0,teammateHPValue:8e3},y={talentActive:{id:"talentActive",formItem:"switch",text:t("Content.talentActive.text"),content:t("Content.talentActive.content",{talentDmgReductionValue:b.precisionRound(100*L)})},skillActive:{id:"skillActive",formItem:"switch",text:t("Content.skillActive.text"),content:t("Content.skillActive.content",{skillHpBuffValue:b.precisionRound(100*A),skillCrBuffValue:b.precisionRound(100*_)})},e6TeamHpLostPercent:{id:"e6TeamHpLostPercent",formItem:"slider",text:t("Content.e6TeamHpLostPercent.text"),content:t("Content.e6TeamHpLostPercent.content"),min:0,max:1.2,percent:!0,disabled:e<6}},p={talentActive:y.talentActive,skillActive:y.skillActive,teammateHPValue:{id:"teammateHPValue",formItem:"slider",text:t("TeammateContent.teammateHPValue.text"),content:t("TeammateContent.teammateHPValue.content",{skillHpBuffValue:b.precisionRound(100*A)}),min:0,max:1e4}};return{activeAbilities:[z.BASIC,z.ULT],content:()=>Object.values(y),teammateContent:()=>Object.values(p),defaults:()=>P,teammateDefaults:()=>T,precomputeEffects:(R,I,B)=>{const j=I.characterConditionals;return R.BASIC_HP_SCALING.buff(v,c),R.ULT_HP_SCALING.buff(N,d),R.ULT_HP_SCALING.buff(e>=6?2*j.e6TeamHpLostPercent:0,H),R.BASIC_TOUGHNESS_DMG.buff(10,c),R.ULT_TOUGHNESS_DMG.buff(20,d),R.HEAL_TYPE.set(ye,g),R.HEAL_SCALING.buff(U,g),R.HEAL_FLAT.buff(F,g),R},precomputeMutualEffects:(R,I,B)=>{const j=I.characterConditionals;R.CR.buffTeam(j.skillActive?_:0,u),R.CD.buffTeam(e>=1&&j.skillActive?.3:0,M),R.DMG_RED_MULTI.multiplyTeam(j.talentActive?1-L:1,m)},precomputeTeammateEffects:(R,I,B)=>{const j=I.characterConditionals,Z=j.skillActive?A*j.teammateHPValue:0;R.HP.buffTeam(Z,u),R.UNCONVERTIBLE_HP_BUFF.buffTeam(Z,u),R.DMG_RED_MULTI.multiplyTeam(j.skillActive?1-.65:1,u)},finalizeCalculations:(R,I,B)=>{Ks(R)},gpuFinalizeCalculations:()=>Ns(),dynamicConditionals:[{id:"FuXuanHpConditional",type:Qe.ABILITY,activation:ze.CONTINUOUS,dependsOn:[n.HP],chainsTo:[n.HP],condition:function(R,I,B){return I.characterConditionals.skillActive},effect:function(R,I,B){ta(n.HP,n.HP,this,R,I,B,u,j=>j*A)},gpu:function(R,I){const B=R.characterConditionals;return aa(n.HP,n.HP,this,R,I,`${A} * convertibleValue`,`${it(B.skillActive)}`)}}]}},u1=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Characters.Guinaifen"),{basic:s,skill:o,ult:r,talent:l}=pe.SKILL_BASIC_3_ULT_TALENT_5,{SOURCE_BASIC:c,SOURCE_SKILL:u,SOURCE_ULT:d,SOURCE_TALENT:m,SOURCE_TECHNIQUE:h,SOURCE_TRACE:g,SOURCE_MEMO:C,SOURCE_E1:M,SOURCE_E2:x,SOURCE_E4:O,SOURCE_E6:H}=w.character("1210"),_=l(e,.07,.076),A=e>=6?4:3,L=s(e,1,1.1),v=o(e,1.2,1.32),N=r(e,1.2,1.296),U=o(e,2.182,2.4),F={talentDebuffStacks:A,enemyBurned:!0,skillDot:!0,e1EffectResShred:!0,e2BurnMultiBoost:!0},P={talentDebuffStacks:A,e1EffectResShred:!0},T={talentDebuffStacks:{id:"talentDebuffStacks",formItem:"slider",text:t("Content.talentDebuffStacks.text"),content:t("Content.talentDebuffStacks.content",{talentDebuffDmgIncreaseValue:b.precisionRound(_),talentDebuffMax:A}),min:0,max:A},enemyBurned:{id:"enemyBurned",formItem:"switch",text:t("Content.enemyBurned.text"),content:t("Content.enemyBurned.content")},skillDot:{id:"skillDot",formItem:"switch",text:t("Content.skillDot.text"),content:t("Content.skillDot.content")},e1EffectResShred:{id:"e1EffectResShred",formItem:"switch",text:t("Content.e1EffectResShred.text"),content:t("Content.e1EffectResShred.content"),disabled:e<1},e2BurnMultiBoost:{id:"e2BurnMultiBoost",formItem:"switch",text:t("Content.e2BurnMultiBoost.text"),content:t("Content.e2BurnMultiBoost.content"),disabled:e<2}},y={talentDebuffStacks:T.talentDebuffStacks,e1EffectResShred:T.e1EffectResShred};return{activeAbilities:[z.BASIC,z.SKILL,z.ULT,z.DOT],content:()=>Object.values(T),teammateContent:()=>Object.values(y),defaults:()=>F,teammateDefaults:()=>P,precomputeEffects:(p,R,I)=>{const B=R.characterConditionals;return p.BASIC_ATK_SCALING.buff(L,c),p.SKILL_ATK_SCALING.buff(v,u),p.ULT_ATK_SCALING.buff(N,d),p.DOT_ATK_SCALING.buff(U,u),p.DOT_ATK_SCALING.buff(e>=2&&B.e2BurnMultiBoost?.4:0,x),p.ELEMENTAL_DMG.buff(B.enemyBurned?.2:0,g),p.BASIC_TOUGHNESS_DMG.buff(10,c),p.SKILL_TOUGHNESS_DMG.buff(20,u),p.ULT_TOUGHNESS_DMG.buff(20,d),p.DOT_CHANCE.set(B.skillDot?1:.8,B.skillDot?u:g),p},precomputeMutualEffects:(p,R,I)=>{const B=R.characterConditionals;p.VULNERABILITY.buffTeam(B.talentDebuffStacks*_,m),p.EFFECT_RES_PEN.buffTeam(e>=1&&B.e1EffectResShred?.1:0,M)},finalizeCalculations:p=>{},gpuFinalizeCalculations:()=>""}},d1=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Characters.Hanya"),{basic:s,skill:o,ult:r,talent:l}=pe.SKILL_BASIC_3_ULT_TALENT_5,{SOURCE_BASIC:c,SOURCE_SKILL:u,SOURCE_ULT:d,SOURCE_TALENT:m,SOURCE_TECHNIQUE:h,SOURCE_TRACE:g,SOURCE_MEMO:C,SOURCE_E1:M,SOURCE_E2:x,SOURCE_E4:O,SOURCE_E6:H}=w.character("1215"),_=r(e,.2,.21),A=r(e,.6,.648);let L=l(e,.3,.33);L+=e>=6?.1:0;const v=s(e,1,1.1),N=o(e,2.4,2.64),U={ultBuff:!0,targetBurdenActive:!0,burdenAtkBuff:!0,e2SkillSpdBuff:!1},F={ultBuff:!0,targetBurdenActive:!0,burdenAtkBuff:!0,teammateSPDValue:160},P={ultBuff:{id:"ultBuff",formItem:"switch",text:t("Content.ultBuff.text"),content:t("Content.ultBuff.content",{ultSpdBuffValue:b.precisionRound(100*_),ultAtkBuffValue:b.precisionRound(100*A)})},targetBurdenActive:{id:"targetBurdenActive",formItem:"switch",text:t("Content.targetBurdenActive.text"),content:t("Content.targetBurdenActive.content",{talentDmgBoostValue:b.precisionRound(100*L)})},burdenAtkBuff:{id:"burdenAtkBuff",formItem:"switch",text:t("Content.burdenAtkBuff.text"),content:t("Content.burdenAtkBuff.content")},e2SkillSpdBuff:{id:"e2SkillSpdBuff",formItem:"switch",text:t("Content.e2SkillSpdBuff.text"),content:t("Content.e2SkillSpdBuff.content"),disabled:e<2}},T={ultBuff:P.ultBuff,teammateSPDValue:{id:"teammateSPDValue",formItem:"slider",text:t("TeammateContent.teammateSPDValue.text"),content:t("TeammateContent.teammateSPDValue.content",{ultSpdBuffValue:b.precisionRound(100*_),ultAtkBuffValue:b.precisionRound(100*A)}),min:0,max:300},targetBurdenActive:P.targetBurdenActive,burdenAtkBuff:P.burdenAtkBuff};return{activeAbilities:[z.BASIC,z.SKILL],content:()=>Object.values(P),teammateContent:()=>Object.values(T),defaults:()=>U,teammateDefaults:()=>F,precomputeEffects:(y,p,R)=>{const I=p.characterConditionals;return y.BASIC_ATK_SCALING.buff(v,c),y.SKILL_ATK_SCALING.buff(N,u),y.SPD_P.buff(e>=2&&I.e2SkillSpdBuff?.2:0,x),y.BASIC_TOUGHNESS_DMG.buff(10,c),y.SKILL_TOUGHNESS_DMG.buff(20,u),y},precomputeMutualEffects:(y,p,R)=>{const I=p.characterConditionals;y.ATK_P.buffTeam(I.burdenAtkBuff?.1:0,g),Ee(y,Bt|Me|ye,I.targetBurdenActive?L:0,m,It.TEAM)},precomputeTeammateEffects:(y,p,R)=>{const I=p.characterConditionals,B=I.ultBuff?_*I.teammateSPDValue:0;y.SPD.buffSingle(B,d),y.UNCONVERTIBLE_SPD_BUFF.buffSingle(B,d),y.ATK_P.buffSingle(I.ultBuff?A:0,d)},finalizeCalculations:y=>{},gpuFinalizeCalculations:()=>"",dynamicConditionals:[{id:"HanyaSpdConditional",type:Qe.ABILITY,activation:ze.CONTINUOUS,dependsOn:[n.SPD],chainsTo:[n.SPD],condition:function(y,p,R){return p.characterConditionals.ultBuff},effect:function(y,p,R){ta(n.SPD,n.SPD,this,y,p,R,d,I=>I*_)},gpu:function(y,p){const R=y.characterConditionals;return aa(n.SPD,n.SPD,this,y,p,`${_} * convertibleValue`,`${it(R.ultBuff)}`)}}]}},m1=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Characters.Huohuo"),s=b.wrappedFixedT(a).get(null,"conditionals","Common.HealAbility"),{basic:o,ult:r,skill:l,talent:c}=pe.ULT_TALENT_3_SKILL_BASIC_5,{SOURCE_BASIC:u,SOURCE_SKILL:d,SOURCE_ULT:m,SOURCE_TALENT:h,SOURCE_TECHNIQUE:g,SOURCE_TRACE:C,SOURCE_MEMO:M,SOURCE_E1:x,SOURCE_E2:O,SOURCE_E4:H,SOURCE_E6:_}=w.character("1217"),A=r(e,.4,.432),L=o(e,.5,.55),v=c(e,.21,.224),N=c(e,560,623),U=l(e,.045,.048),F=l(e,120,133.5),P={healAbility:Ct,ultBuff:!0,skillBuff:!0,e6DmgBuff:!0},T={ultBuff:!0,skillBuff:!0,e6DmgBuff:!0},y={healAbility:{id:"healAbility",formItem:"select",text:s("Text"),content:s("Content"),options:[{display:s("Skill"),value:Me,label:s("Skill")},{display:s("Talent"),value:0,label:s("Talent")}],fullWidth:!0},ultBuff:{id:"ultBuff",formItem:"switch",text:t("Content.ultBuff.text"),content:t("Content.ultBuff.content",{ultBuffValue:b.precisionRound(100*A)})},skillBuff:{id:"skillBuff",formItem:"switch",text:t("Content.skillBuff.text"),content:t("Content.skillBuff.content"),disabled:e<1},e6DmgBuff:{id:"e6DmgBuff",formItem:"switch",text:t("Content.e6DmgBuff.text"),content:t("Content.e6DmgBuff.content"),disabled:e<6}},p={ultBuff:y.ultBuff,skillBuff:y.skillBuff,e6DmgBuff:y.e6DmgBuff};return{activeAbilities:[z.BASIC],content:()=>Object.values(y),teammateContent:()=>Object.values(p),defaults:()=>P,teammateDefaults:()=>T,precomputeEffects:(R,I,B)=>{const j=I.characterConditionals;return R.BASIC_HP_SCALING.buff(L,u),R.BASIC_TOUGHNESS_DMG.buff(10,u),j.healAbility==Me&&(R.HEAL_TYPE.set(Me,d),R.HEAL_SCALING.buff(v,d),R.HEAL_FLAT.buff(N,d)),j.healAbility==Ct&&(R.HEAL_TYPE.set(Ct,h),R.HEAL_SCALING.buff(U,h),R.HEAL_FLAT.buff(F,h)),R},precomputeMutualEffects:(R,I,B)=>{const j=I.characterConditionals;R.ATK_P.buffTeam(j.ultBuff?A:0,m),R.SPD_P.buffTeam(e>=1&&j.skillBuff?.12:0,x),R.ELEMENTAL_DMG.buffTeam(e>=6&&j.e6DmgBuff?.5:0,_)},finalizeCalculations:(R,I,B)=>{Ks(R)},gpuFinalizeCalculations:()=>Ns()}},f1=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Characters.ImbibitorLunae"),{basic:s,skill:o,ult:r,talent:l}=pe.SKILL_BASIC_3_ULT_TALENT_5,{SOURCE_BASIC:c,SOURCE_SKILL:u,SOURCE_ULT:d,SOURCE_TALENT:m,SOURCE_TECHNIQUE:h,SOURCE_TRACE:g,SOURCE_MEMO:C,SOURCE_E1:M,SOURCE_E2:x,SOURCE_E4:O,SOURCE_E6:H}=w.character("1213"),_=e>=1?10:6,A=o(e,.12,.132),L=l(e,.1,.11),v=s(e,1,1.1),N=s(e,2.6,2.86),U=s(e,3.8,4.18),F=s(e,5,5.5),P=r(e,3,3.24),T={basicEnhanced:3,skillOutroarStacks:4,talentRighteousHeartStacks:_,e6ResPenStacks:3},y={basicEnhanced:{id:"basicEnhanced",formItem:"slider",text:t("Content.basicEnhanced.text"),content:t("Content.basicEnhanced.content",{basicScaling:b.precisionRound(100*v),basicEnhanced1Scaling:b.precisionRound(100*N),basicEnhanced2Scaling:b.precisionRound(100*U),basicEnhanced3Scaling:b.precisionRound(100*F)}),min:0,max:3},skillOutroarStacks:{id:"skillOutroarStacks",formItem:"slider",text:t("Content.skillOutroarStacks.text"),content:t("Content.skillOutroarStacks.content",{outroarStackCdValue:b.precisionRound(100*A)}),min:0,max:4},talentRighteousHeartStacks:{id:"talentRighteousHeartStacks",formItem:"slider",text:t("Content.talentRighteousHeartStacks.text"),content:t("Content.talentRighteousHeartStacks.content",{righteousHeartDmgValue:b.precisionRound(100*L)}),min:0,max:_},e6ResPenStacks:{id:"e6ResPenStacks",formItem:"slider",text:t("Content.e6ResPenStacks.text"),content:t("Content.e6ResPenStacks.content"),min:0,max:3,disabled:e<6}};return{activeAbilities:[z.BASIC,z.ULT],content:()=>Object.values(y),defaults:()=>T,precomputeEffects:(p,R,I)=>{const B=R.characterConditionals;p.CD.buff(I.enemyElementalWeak?.24:0,g),p.CD.buff(B.skillOutroarStacks*A,u);const j={0:v,1:N,2:U,3:F}[B.basicEnhanced]??0;return p.BASIC_ATK_SCALING.buff(j,c),p.ULT_ATK_SCALING.buff(P,d),p.ELEMENTAL_DMG.buff(B.talentRighteousHeartStacks*L,m),di(p,Bt,e>=6&&B.basicEnhanced==3?.2*B.e6ResPenStacks:0,H),p.BASIC_TOUGHNESS_DMG.buff(10+10*B.basicEnhanced,c),p.ULT_TOUGHNESS_DMG.buff(20,d),p},finalizeCalculations:p=>{},gpuFinalizeCalculations:()=>""}},h1=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Characters.Jiaoqiu"),{basic:s,skill:o,ult:r,talent:l}=pe.SKILL_BASIC_3_ULT_TALENT_5,{SOURCE_BASIC:c,SOURCE_SKILL:u,SOURCE_ULT:d,SOURCE_TALENT:m,SOURCE_TECHNIQUE:h,SOURCE_TRACE:g,SOURCE_MEMO:C,SOURCE_E1:M,SOURCE_E2:x,SOURCE_E4:O,SOURCE_E6:H}=w.character("1218"),_=s(e,1,1.1),A=o(e,1.5,1.65),L=r(e,1,1.08),v=r(e,.15,.162),N=l(e,.15,.165),U=l(e,.05,.055),F=l(e,1.8,1.98),P=e>=6?9:5,T={ashenRoastStacks:P,ultFieldActive:!0,ehrToAtkBoost:!0,e1DmgBoost:!0,e2Dot:!0,e6ResShred:!0},y={ashenRoastStacks:P,ultFieldActive:!0,e1DmgBoost:!0,e6ResShred:!0},p={ashenRoastStacks:{id:"ashenRoastStacks",formItem:"slider",text:t("Content.ashenRoastStacks.text"),content:t("Content.ashenRoastStacks.content",{AshenRoastInitialVulnerability:b.precisionRound(100*N),AshenRoastAdditionalVulnerability:b.precisionRound(100*U),AshenRoastDotMultiplier:b.precisionRound(100*F)}),min:0,max:P},ultFieldActive:{id:"ultFieldActive",formItem:"switch",text:t("Content.ultFieldActive.text"),content:t("Content.ultFieldActive.content",{UltScaling:b.precisionRound(100*L),UltVulnerability:b.precisionRound(100*v),ZoneDebuffChance:b.precisionRound(100*r(e,.6,.62))})},ehrToAtkBoost:{id:"ehrToAtkBoost",formItem:"switch",text:t("Content.ehrToAtkBoost.text"),content:t("Content.ehrToAtkBoost.content")},e1DmgBoost:{id:"e1DmgBoost",formItem:"switch",text:t("Content.e1DmgBoost.text"),content:t("Content.e1DmgBoost.content"),disabled:e<1},e2Dot:{id:"e2Dot",formItem:"switch",text:t("Content.e2Dot.text"),content:t("Content.e2Dot.content"),disabled:e<2},e6ResShred:{id:"e6ResShred",formItem:"switch",text:t("Content.e6ResShred.text"),content:t("Content.e6ResShred.content"),disabled:e<6}},R={ashenRoastStacks:p.ashenRoastStacks,ultFieldActive:p.ultFieldActive,e1DmgBoost:p.e1DmgBoost,e6ResShred:p.e6ResShred};return{activeAbilities:[z.BASIC,z.SKILL,z.ULT,z.DOT],content:()=>Object.values(p),teammateContent:()=>Object.values(R),defaults:()=>T,teammateDefaults:()=>y,precomputeEffects:(I,B,j)=>{const Z=B.characterConditionals;return I.BASIC_ATK_SCALING.buff(_,c),I.SKILL_ATK_SCALING.buff(A,u),I.ULT_ATK_SCALING.buff(L,d),I.DOT_ATK_SCALING.buff(Z.ashenRoastStacks>0?F:0,m),I.DOT_ATK_SCALING.buff(e>=2&&Z.e2Dot&&Z.ashenRoastStacks>0?3:0,x),I.DOT_CHANCE.set(100,m),I.BASIC_TOUGHNESS_DMG.buff(10,c),I.SKILL_TOUGHNESS_DMG.buff(20,u),I.ULT_TOUGHNESS_DMG.buff(20,d),I},precomputeMutualEffects:(I,B,j)=>{const Z=B.characterConditionals;ha(I,ye,Z.ultFieldActive?v:0,d,It.TEAM),I.VULNERABILITY.buffTeam(Z.ashenRoastStacks>0?N:0,m),I.VULNERABILITY.buffTeam(Math.max(0,Z.ashenRoastStacks-1)*U,m),I.ELEMENTAL_DMG.buffTeam(e>=1&&Z.e1DmgBoost&&Z.ashenRoastStacks>0?.4:0,M),I.RES_PEN.buffTeam(e>=6&&Z.e6ResShred?Z.ashenRoastStacks*.03:0,H)},finalizeCalculations:(I,B,j)=>{},gpuFinalizeCalculations:()=>"",dynamicConditionals:[{id:"JiaoqiuConversionConditional",type:Qe.ABILITY,activation:ze.CONTINUOUS,dependsOn:[n.EHR],chainsTo:[n.ATK],condition:function(I,B,j){return B.characterConditionals.ehrToAtkBoost&&I.a[S.EHR]>.8},effect:function(I,B,j){ta(n.EHR,n.ATK,this,I,B,j,g,Z=>Math.min(2.4,.6*Math.floor((Z-.8)/.15))*j.baseATK)},gpu:function(I,B){const j=I.characterConditionals;return aa(n.EHR,n.ATK,this,I,B,"min(2.40, 0.60 * floor((convertibleValue - 0.80) / 0.15)) * baseATK",`${it(j.ehrToAtkBoost)} && x.EHR > 0.80`)}}]}},S1=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Characters.Jingliu"),{basic:s,skill:o,ult:r,talent:l}=pe.ULT_TALENT_3_SKILL_BASIC_5,{SOURCE_BASIC:c,SOURCE_SKILL:u,SOURCE_ULT:d,SOURCE_TALENT:m,SOURCE_TECHNIQUE:h,SOURCE_TRACE:g,SOURCE_MEMO:C,SOURCE_E1:M,SOURCE_E2:x,SOURCE_E4:O,SOURCE_E6:H}=w.character("1212"),_=l(e,.5,.52),A=s(e,1,1.1),L=o(e,2,2.2),v=o(e,2.5,2.75),N=r(e,3,3.24),U=l(e,1.8,1.98)+(e>=4?.3:0),F={talentEnhancedState:!0,talentHpDrainAtkBuff:U,e1CdBuff:!0,e2SkillDmgBuff:!0},P={talentEnhancedState:{id:"talentEnhancedState",formItem:"switch",text:t("Content.talentEnhancedState.text"),content:t("Content.talentEnhancedState.content",{talentCrBuff:b.precisionRound(100*_)})},talentHpDrainAtkBuff:{id:"talentHpDrainAtkBuff",formItem:"slider",text:t("Content.talentHpDrainAtkBuff.text"),content:t("Content.talentHpDrainAtkBuff.content",{talentHpDrainAtkBuffMax:b.precisionRound(100*U)}),min:0,max:U,percent:!0},e1CdBuff:{id:"e1CdBuff",formItem:"switch",text:t("Content.e1CdBuff.text"),content:t("Content.e1CdBuff.content"),disabled:e<1},e2SkillDmgBuff:{id:"e2SkillDmgBuff",formItem:"switch",text:t("Content.e2SkillDmgBuff.text"),content:t("Content.e2SkillDmgBuff.content"),disabled:e<2}};return{activeAbilities:[z.BASIC,z.SKILL,z.ULT],content:()=>Object.values(P),defaults:()=>F,precomputeEffects:(T,y,p)=>{const R=y.characterConditionals;return T.CR.buff(R.talentEnhancedState?_:0,m),T.ATK_P.buff(R.talentEnhancedState?R.talentHpDrainAtkBuff:0,m),T.RES.buff(R.talentEnhancedState?.35:0,g),R.talentEnhancedState&&Ee(T,ye,.2,g),T.CD.buff(e>=1&&R.e1CdBuff?.24:0,M),T.CD.buff(e>=6&&R.talentEnhancedState?.5:0,H),T.BASIC_ATK_SCALING.buff(A,c),T.SKILL_ATK_SCALING.buff(R.talentEnhancedState?v:L,u),T.SKILL_ATK_SCALING.buff(e>=1&&R.talentEnhancedState&&(p.enemyCount??p.enemyCount)==1?1:0,u),T.ULT_ATK_SCALING.buff(N,d),T.ULT_ATK_SCALING.buff(e>=1&&(p.enemyCount??p.enemyCount)==1?1:0,d),Ee(T,Me,e>=2&&R.talentEnhancedState&&R.e2SkillDmgBuff?.8:0,x),T.BASIC_TOUGHNESS_DMG.buff(10,c),T.SKILL_TOUGHNESS_DMG.buff(20,u),T.ULT_TOUGHNESS_DMG.buff(20,d),T},finalizeCalculations:T=>{},gpuFinalizeCalculations:()=>""}},p1=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Characters.JingYuan"),{basic:s,skill:o,ult:r,talent:l}=pe.ULT_BASIC_3_SKILL_TALENT_5,{SOURCE_BASIC:c,SOURCE_SKILL:u,SOURCE_ULT:d,SOURCE_TALENT:m,SOURCE_TECHNIQUE:h,SOURCE_TRACE:g,SOURCE_MEMO:C,SOURCE_E1:M,SOURCE_E2:x,SOURCE_E4:O,SOURCE_E6:H}=w.character("1204"),_=s(e,1,1.1),A=o(e,1,1.1),L=r(e,2,2.16),v=l(e,.66,.726);function N(P,T){const y=P.characterConditionals;let p=0;const R=y.talentHitsPerAction,I=y.talentAttacks,B=T.enemyCount>=3?2:0,j=T.enemyCount>=3?3:1,Z=T.enemyCount>=3?2:1;let K=B*(R-I);K+=Z;let X=0;for(let te=0;te<I;te++)X+=Math.min(8,K)*(1/I),K+=j;return p=X*Ie,p}const U={skillCritBuff:!0,talentHitsPerAction:10,talentAttacks:10,e2DmgBuff:!0,e6FuaVulnerabilityStacks:3},F={skillCritBuff:{id:"skillCritBuff",formItem:"switch",text:t("Content.skillCritBuff.text"),content:t("Content.skillCritBuff.content")},talentHitsPerAction:{id:"talentHitsPerAction",formItem:"slider",text:t("Content.talentHitsPerAction.text"),content:t("Content.talentHitsPerAction.content"),min:3,max:10},talentAttacks:{id:"talentAttacks",formItem:"slider",text:t("Content.talentAttacks.text"),content:t("Content.talentAttacks.content"),min:0,max:10},e2DmgBuff:{id:"e2DmgBuff",formItem:"switch",text:t("Content.e2DmgBuff.text"),content:t("Content.e2DmgBuff.content"),disabled:e<2},e6FuaVulnerabilityStacks:{id:"e6FuaVulnerabilityStacks",formItem:"slider",text:t("Content.e6FuaVulnerabilityStacks.text"),content:t("Content.e6FuaVulnerabilityStacks.content"),min:0,max:3,disabled:e<6}};return{activeAbilities:[z.BASIC,z.SKILL,z.ULT,z.FUA],content:()=>Object.values(F),defaults:()=>U,initializeConfigurations:(P,T,y)=>{T.characterConditionals,P.SUMMONS.set(1,m)},precomputeEffects:(P,T,y)=>{const p=T.characterConditionals;p.talentHitsPerAction=Math.max(p.talentHitsPerAction,p.talentAttacks),P.CR.buff(p.skillCritBuff?.1:0,g),P.BASIC_ATK_SCALING.buff(_,c),P.SKILL_ATK_SCALING.buff(A,u),P.ULT_ATK_SCALING.buff(L,d),P.FUA_ATK_SCALING.buff(v*p.talentAttacks,m),Sn(P,je,p.talentHitsPerAction>=6?.25:0,g),Ee(P,Bt|Me|ye,e>=2&&p.e2DmgBuff?.2:0,x),ha(P,je,e>=6?p.e6FuaVulnerabilityStacks*.12:0,H);const R=p.talentAttacks;return P.BASIC_TOUGHNESS_DMG.buff(10,c),P.SKILL_TOUGHNESS_DMG.buff(10,u),P.ULT_TOUGHNESS_DMG.buff(20,d),P.FUA_TOUGHNESS_DMG.buff(5*R,m),P},finalizeCalculations:(P,T,y)=>{Yt(P,T,y,N(T,y))},gpuFinalizeCalculations:(P,T)=>jt(N(P,T))}},g1=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Characters.Lingsha"),s=b.wrappedFixedT(a).get(null,"conditionals","Common.HealAbility"),{basic:o,skill:r,ult:l,talent:c}=pe.ULT_TALENT_3_SKILL_BASIC_5,{SOURCE_BASIC:u,SOURCE_SKILL:d,SOURCE_ULT:m,SOURCE_TALENT:h,SOURCE_TECHNIQUE:g,SOURCE_TRACE:C,SOURCE_MEMO:M,SOURCE_E1:x,SOURCE_E2:O,SOURCE_E4:H,SOURCE_E6:_}=w.character("1222"),A=o(e,1,1.1),L=r(e,.8,.88),v=l(e,1.5,1.65),N=l(e,.25,.27),U=c(e,.75,.825),F=r(e,.14,.148),P=r(e,420,467.25),T=l(e,.12,.128),y=l(e,360,400.5),p=c(e,.12,.128),R=c(e,360,400.5),I={1:Ie*(1*1/2+2*1/2),3:Ie*(2*1/2+3*1/2),5:Ie*(3*1/2+4*1/2)},B={healAbility:Ct,beConversion:!0,befogState:!0,e1DefShred:!0,e2BeBuff:!0,e6ResShred:!0},j={befogState:!0,e1DefShred:!0,e2BeBuff:!0,e6ResShred:!0},Z={healAbility:{id:"healAbility",formItem:"select",text:s("Text"),content:s("Content"),options:[{display:s("Skill"),value:Me,label:s("Skill")},{display:s("Ult"),value:ye,label:s("Ult")},{display:s("Talent"),value:Ct,label:s("Talent")}],fullWidth:!0},beConversion:{id:"beConversion",formItem:"switch",text:t("Content.beConversion.text"),content:t("Content.beConversion.content")},befogState:{id:"befogState",formItem:"switch",text:t("Content.befogState.text"),content:t("Content.befogState.content",{BefogVulnerability:b.precisionRound(100*N)})},e1DefShred:{id:"e1DefShred",formItem:"switch",text:t("Content.e1DefShred.text"),content:t("Content.e1DefShred.content"),disabled:e<1},e2BeBuff:{id:"e2BeBuff",formItem:"switch",text:t("Content.e2BeBuff.text"),content:t("Content.e2BeBuff.content"),disabled:e<2},e6ResShred:{id:"e6ResShred",formItem:"switch",text:t("Content.e6ResShred.text"),content:t("Content.e6ResShred.content"),disabled:e<6}},K={befogState:Z.befogState,e1DefShred:Z.e1DefShred,e2BeBuff:Z.e2BeBuff,e6ResShred:Z.e6ResShred};return{activeAbilities:[z.BASIC,z.SKILL,z.ULT,z.FUA],content:()=>Object.values(Z),teammateContent:()=>Object.values(K),defaults:()=>B,teammateDefaults:()=>j,initializeConfigurations:(X,te,ae)=>{te.characterConditionals,X.SUMMONS.set(1,h)},precomputeEffects:(X,te,ae)=>{const Te=te.characterConditionals;X.BASIC_ATK_SCALING.buff(A,u),X.SKILL_ATK_SCALING.buff(L,d),X.FUA_ATK_SCALING.buff(U*2,h),X.ULT_ATK_SCALING.buff(v,m),X.BREAK_EFFICIENCY_BOOST.buff(e>=1?.5:0,x),X.FUA_ATK_SCALING.buff(e>=6&&Te.e6ResShred?.5:0,_),X.BASIC_TOUGHNESS_DMG.buff(10,u),X.SKILL_TOUGHNESS_DMG.buff(10,d),X.ULT_TOUGHNESS_DMG.buff(20,m),X.FUA_TOUGHNESS_DMG.buff(10*2,h),X.FUA_TOUGHNESS_DMG.buff(e>=6?5:0,_),Te.healAbility==Me&&(X.HEAL_TYPE.set(Me,d),X.HEAL_SCALING.buff(F,d),X.HEAL_FLAT.buff(P,d)),Te.healAbility==ye&&(X.HEAL_TYPE.set(ye,m),X.HEAL_SCALING.buff(T,m),X.HEAL_FLAT.buff(y,m)),Te.healAbility==Ct&&(X.HEAL_TYPE.set(Ct,h),X.HEAL_SCALING.buff(p,h),X.HEAL_FLAT.buff(R,h))},precomputeMutualEffects:(X,te,ae)=>{const Te=te.characterConditionals;X.a[S.ENEMY_WEAKNESS_BROKEN]&&X.DEF_PEN.buffTeam(e>=1&&Te.e1DefShred?.2:0,x),ha(X,ja,Te.befogState?N:0,m,It.TEAM),X.BE.buffTeam(e>=2&&Te.e2BeBuff?.4:0,O),X.RES_PEN.buffTeam(e>=6&&Te.e6ResShred?.2:0,_)},finalizeCalculations:(X,te,ae)=>{Yt(X,te,ae,I[ae.enemyCount]),ed(X)},gpuFinalizeCalculations:(X,te)=>jt(I[te.enemyCount])+td(),dynamicConditionals:[{id:"LingshaConversionConditional",type:Qe.ABILITY,activation:ze.CONTINUOUS,dependsOn:[n.BE],chainsTo:[n.ATK,n.OHB],condition:function(X,te,ae){return!0},effect:function(X,te,ae){if(!te.characterConditionals.beConversion)return;const Ke=te.conditionalState[this.id]||0,Se=Math.min(.5,.25*X.a[S.BE])*ae.baseATK,re=Math.min(.2,.1*X.a[S.BE]),be=Math.min(.5,.25*Ke)*ae.baseATK,De=Math.min(.2,.1*Ke);te.conditionalState[this.id]=X.a[S.BE];const Ne=Se-(Ke?be:0),st=re-(Ke?De:0);X.ATK.buffDynamic(Ne,C,te,ae),X.OHB.buffDynamic(st,C,te,ae)},gpu:function(X,te){const ae=X.characterConditionals;return Ft(this,`
if (${$i(ae.beConversion)}) {
  return;
}

let stateValue: f32 = (*p_state).LingshaConversionConditional;

let buffValueAtk = min(0.50, 0.25 * x.BE) * baseATK;
let buffValueOhb = min(0.20, 0.10 * x.BE);

let stateBuffValueAtk = min(0.50, 0.25 * stateValue) * baseATK;
let stateBuffValueOhb = min(0.20, 0.10 * stateValue);

(*p_state).LingshaConversionConditional = x.BE;

let finalBuffAtk = buffValueAtk - select(0, stateBuffValueAtk, stateValue > 0);
let finalBuffOhb = buffValueOhb - select(0, stateBuffValueOhb, stateValue > 0);

(*p_x).ATK += finalBuffAtk;
(*p_x).OHB += finalBuffOhb;
`)}}]}},b1=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Characters.Luocha"),s=b.wrappedFixedT(a).get(null,"conditionals","Common.HealAbility"),{basic:o,skill:r,ult:l,talent:c}=pe.SKILL_BASIC_3_ULT_TALENT_5,{SOURCE_BASIC:u,SOURCE_SKILL:d,SOURCE_ULT:m,SOURCE_TALENT:h,SOURCE_TECHNIQUE:g,SOURCE_TRACE:C,SOURCE_MEMO:M,SOURCE_E1:x,SOURCE_E2:O,SOURCE_E4:H,SOURCE_E6:_}=w.character("1203"),A=o(e,1,1.1),L=l(e,2,2.16),v=r(e,.6,.64),N=r(e,800,890),U=c(e,.18,.192),F=c(e,240,267),P={healAbility:Ct,fieldActive:!0,e6ResReduction:!0},T={fieldActive:!0,e6ResReduction:!0},y={healAbility:{id:"healAbility",formItem:"select",text:s("Text"),content:s("Content"),options:[{display:s("Skill"),value:Me,label:s("Skill")},{display:s("Talent"),value:Ct,label:s("Talent")}],fullWidth:!0},fieldActive:{id:"fieldActive",formItem:"switch",text:t("Content.fieldActive.text"),content:t("Content.fieldActive.content")},e6ResReduction:{id:"e6ResReduction",formItem:"switch",text:t("Content.e6ResReduction.text"),content:t("Content.e6ResReduction.content"),disabled:e<6}},p={fieldActive:y.fieldActive,e6ResReduction:y.e6ResReduction};return{activeAbilities:[z.BASIC,z.ULT],content:()=>Object.values(y),teammateContent:()=>Object.values(p),defaults:()=>P,teammateDefaults:()=>T,precomputeEffects:(R,I,B)=>{const j=I.characterConditionals;return R.BASIC_ATK_SCALING.buff(A,u),R.ULT_ATK_SCALING.buff(L,m),R.BASIC_TOUGHNESS_DMG.buff(10,u),R.ULT_TOUGHNESS_DMG.buff(20,m),j.healAbility==Me&&(R.HEAL_TYPE.set(Me,d),R.HEAL_SCALING.buff(v,d),R.HEAL_FLAT.buff(N,d)),j.healAbility==Ct&&(R.HEAL_TYPE.set(Ct,h),R.HEAL_SCALING.buff(U,h),R.HEAL_FLAT.buff(F,h)),R},precomputeMutualEffects:(R,I,B)=>{const j=I.characterConditionals;R.ATK_P.buffTeam(e>=1&&j.fieldActive?.2:0,x),R.RES_PEN.buffTeam(e>=6&&j.e6ResReduction?.2:0,_)},finalizeCalculations:R=>{ed(R)},gpuFinalizeCalculations:()=>td()}},D1=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Characters.March7thImaginary"),{basic:s,skill:o,ult:r,talent:l}=pe.SKILL_BASIC_3_ULT_TALENT_5,{SOURCE_BASIC:c,SOURCE_SKILL:u,SOURCE_ULT:d,SOURCE_TALENT:m,SOURCE_TECHNIQUE:h,SOURCE_TRACE:g,SOURCE_MEMO:C,SOURCE_E1:M,SOURCE_E2:x,SOURCE_E4:O,SOURCE_E6:H}=w.character("1224"),_=s(e,1,1.1),A=s(e,.8,.88),L=s(e,.2,.22),v=r(e,2.4,2.592),N=l(e,.8,.88),U=o(e,.1,.108),F=Ie*(1*.4+2*.6),P={enhancedBasic:!0,basicAttackHits:6,talentDmgBuff:!0,selfSpdBuff:!0,masterAdditionalDmgBuff:!0,masterToughnessRedBuff:!0,e6CdBuff:!0},T={masterBuff:!0,masterCdBeBuffs:!0},y={enhancedBasic:{id:"enhancedBasic",formItem:"switch",text:t("Content.enhancedBasic.text"),content:t("Content.enhancedBasic.content",{BasicEnhancedScaling:b.precisionRound(100*A)})},basicAttackHits:{id:"basicAttackHits",formItem:"slider",text:t("Content.basicAttackHits.text"),content:t("Content.basicAttackHits.content",{BasicEnhancedScaling:b.precisionRound(100*A)}),min:3,max:6},masterAdditionalDmgBuff:{id:"masterAdditionalDmgBuff",formItem:"switch",text:t("Content.masterAdditionalDmgBuff.text"),content:t("Content.masterAdditionalDmgBuff.content",{ShifuDmgBuff:b.precisionRound(100*L)})},masterToughnessRedBuff:{id:"masterToughnessRedBuff",formItem:"switch",text:t("Content.masterToughnessRedBuff.text"),content:t("Content.masterToughnessRedBuff.content")},talentDmgBuff:{id:"talentDmgBuff",formItem:"switch",text:t("Content.talentDmgBuff.text"),content:t("Content.talentDmgBuff.content",{TalentDmgBuff:b.precisionRound(100*N)})},selfSpdBuff:{id:"selfSpdBuff",formItem:"switch",text:t("Content.selfSpdBuff.text"),content:t("Content.selfSpdBuff.content"),disabled:e<1},e6CdBuff:{id:"e6CdBuff",formItem:"switch",text:t("Content.e6CdBuff.text"),content:t("Content.e6CdBuff.content"),disabled:e<6}},p={masterBuff:{id:"masterBuff",formItem:"switch",text:t("TeammateContent.masterBuff.text"),content:t("TeammateContent.masterBuff.content",{ShifuSpeedBuff:b.precisionRound(100*U)})},masterCdBeBuffs:{id:"masterCdBeBuffs",formItem:"switch",text:t("TeammateContent.masterCdBeBuffs.text"),content:t("TeammateContent.masterCdBeBuffs.content")}};return{activeAbilities:[z.BASIC,z.ULT,z.FUA],content:()=>Object.values(y),teammateContent:()=>Object.values(p),defaults:()=>P,teammateDefaults:()=>T,precomputeEffects:(R,I,B)=>{const j=I.characterConditionals;R.SPD_P.buff(e>=1&&j.selfSpdBuff?.1:0,M),Ee(R,Bt|To,j.talentDmgBuff?N:0,m),Sn(R,Bt|To,e>=6&&j.e6CdBuff&&j.enhancedBasic?.5:0,H);const Z=j.masterAdditionalDmgBuff?L*j.basicAttackHits:0;R.BASIC_ATK_SCALING.buff(j.enhancedBasic?A*j.basicAttackHits:_,c),R.BASIC_ADDITIONAL_DMG_SCALING.buff(j.enhancedBasic?Z:L,u),R.ULT_ATK_SCALING.buff(v,d),R.FUA_ATK_SCALING.buff(e>=2?.6:0,x);const K=j.masterToughnessRedBuff?2:1;return R.BASIC_TOUGHNESS_DMG.buff(K*(j.enhancedBasic?5*j.basicAttackHits:10),c),R.ULT_TOUGHNESS_DMG.buff(30,d),R.FUA_TOUGHNESS_DMG.buff(e>=2?10:0,x),R},precomputeTeammateEffects:(R,I,B)=>{const j=I.characterConditionals;R.SPD_P.buff(j.masterBuff?U:0,u),R.CD.buff(j.masterBuff&&j.masterCdBeBuffs?.6:0,g),R.BE.buff(j.masterBuff&&j.masterCdBeBuffs?.36:0,g)},finalizeCalculations:(R,I,B)=>{Yt(R,I,B,F),Aa(R)},gpuFinalizeCalculations:(R,I)=>jt(F)+Va()}},C1=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Characters.Moze"),{basic:s,skill:o,ult:r,talent:l}=pe.ULT_TALENT_3_SKILL_BASIC_5,{SOURCE_BASIC:c,SOURCE_SKILL:u,SOURCE_ULT:d,SOURCE_TALENT:m,SOURCE_TECHNIQUE:h,SOURCE_TRACE:g,SOURCE_MEMO:C,SOURCE_E1:M,SOURCE_E2:x,SOURCE_E4:O,SOURCE_E6:H}=w.character("1223"),_=s(e,1,1.1),A=o(e,1.5,1.65),L=r(e,2.7,2.916),v=l(e,1.6,1.76),N=l(e,.3,.33),U=Ie*(1*.08+2*.08+3*.08+4*.08+5*.08+6*.6),F={preyMark:!0,e2CdBoost:!0,e4DmgBuff:!0,e6MultiplierIncrease:!0},P={preyMark:!0,e2CdBoost:!0},T={preyMark:{id:"preyMark",formItem:"switch",text:t("Content.preyMark.text"),content:t("Content.preyMark.content",{PreyAdditionalMultiplier:b.precisionRound(100*N),FuaScaling:b.precisionRound(100*v)})},e2CdBoost:{id:"e2CdBoost",formItem:"switch",text:t("Content.e2CdBoost.text"),content:t("Content.e2CdBoost.content"),disabled:e<2},e4DmgBuff:{id:"e4DmgBuff",formItem:"switch",text:t("Content.e4DmgBuff.text"),content:t("Content.e4DmgBuff.content"),disabled:e<4},e6MultiplierIncrease:{id:"e6MultiplierIncrease",formItem:"switch",text:t("Content.e6MultiplierIncrease.text"),content:t("Content.e6MultiplierIncrease.content"),disabled:e<6}},y={preyMark:T.preyMark,e2CdBoost:T.e2CdBoost};return{activeAbilities:[z.BASIC,z.SKILL,z.ULT,z.FUA],content:()=>Object.values(T),teammateContent:()=>Object.values(y),defaults:()=>F,teammateDefaults:()=>P,initializeConfigurations:(p,R,I)=>{p.ULT_DMG_TYPE.set(ye|je,g)},precomputeEffects:(p,R,I)=>{const B=R.characterConditionals;return p.ELEMENTAL_DMG.buff(e>=4&&B.e4DmgBuff?.3:0,O),p.BASIC_ATK_SCALING.buff(_,c),p.SKILL_ATK_SCALING.buff(A,u),p.FUA_ATK_SCALING.buff(v,m),p.FUA_ATK_SCALING.buff(e>=6&&B.e6MultiplierIncrease?.25:0,H),p.ULT_ATK_SCALING.buff(L,d),p.BASIC_ADDITIONAL_DMG_SCALING.buff(B.preyMark?N:0,c),p.SKILL_ADDITIONAL_DMG_SCALING.buff(B.preyMark?N:0,u),p.FUA_ADDITIONAL_DMG_SCALING.buff(B.preyMark?N:0,m),p.ULT_ADDITIONAL_DMG_SCALING.buff(B.preyMark?N:0,d),p.BASIC_TOUGHNESS_DMG.buff(10,c),p.SKILL_TOUGHNESS_DMG.buff(20,u),p.ULT_TOUGHNESS_DMG.buff(30,m),p.FUA_TOUGHNESS_DMG.buff(10,d),p},precomputeMutualEffects:(p,R,I)=>{const B=R.characterConditionals;ha(p,je,B.preyMark?.25:0,g,It.TEAM),p.CD.buffTeam(e>=2&&B.preyMark&&B.e2CdBoost?.4:0,x)},finalizeCalculations:(p,R,I)=>{Yt(p,R,I,U),Aa(p)},gpuFinalizeCalculations:(p,R)=>jt(U)+Va()}},E1=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Characters.Qingque"),{basic:s,skill:o,ult:r,talent:l}=pe.ULT_TALENT_3_SKILL_BASIC_5,{SOURCE_BASIC:c,SOURCE_SKILL:u,SOURCE_ULT:d,SOURCE_TALENT:m,SOURCE_TECHNIQUE:h,SOURCE_TRACE:g,SOURCE_MEMO:C,SOURCE_E1:M,SOURCE_E2:x,SOURCE_E4:O,SOURCE_E6:H}=w.character("1201"),_=o(e,.38,.408),A=l(e,.72,.792),L=s(e,1,1.1),v=s(e,2.4,2.64),N=r(e,2,2.16),U={1:Ie*(1*1/1),3:Ie*(2*1/1),5:Ie*(2*1/1)},F=Ie*(1*1/1);function P(p,R){return p.characterConditionals.basicEnhanced?U[R.enemyCount]:F}const T={basicEnhanced:!0,basicEnhancedSpdBuff:!1,skillDmgIncreaseStacks:4},y={basicEnhanced:{id:"basicEnhanced",formItem:"switch",text:t("Content.basicEnhanced.text"),content:t("Content.basicEnhanced.content",{talentAtkBuff:b.precisionRound(100*A)})},basicEnhancedSpdBuff:{id:"basicEnhancedSpdBuff",formItem:"switch",text:t("Content.basicEnhancedSpdBuff.text"),content:t("Content.basicEnhancedSpdBuff.content")},skillDmgIncreaseStacks:{id:"skillDmgIncreaseStacks",formItem:"slider",text:t("Content.skillDmgIncreaseStacks.text"),content:t("Content.skillDmgIncreaseStacks.content",{skillStackDmg:b.precisionRound(100*_)}),min:0,max:4}};return{activeAbilities:[z.BASIC,z.ULT,z.FUA],content:()=>Object.values(y),defaults:()=>T,precomputeEffects:(p,R,I)=>{const B=R.characterConditionals;return p.ATK_P.buff(B.basicEnhanced?A:0,m),p.SPD_P.buff(B.basicEnhancedSpdBuff?.1:0,g),p.BASIC_ATK_SCALING.buff(B.basicEnhanced?v:L,c),p.ULT_ATK_SCALING.buff(N,d),p.FUA_ATK_SCALING.buff(e>=4?B.basicEnhanced?v:L:0,O),p.ELEMENTAL_DMG.buff(B.skillDmgIncreaseStacks*_,u),Ee(p,ye,e>=1?.1:0,M),p.BASIC_TOUGHNESS_DMG.buff(B.basicEnhanced?20:10,c),p.ULT_TOUGHNESS_DMG.buff(20,d),p.FUA_TOUGHNESS_DMG.buff(e>=4&&B.basicEnhanced?20:10,O),p},finalizeCalculations:(p,R,I)=>{Yt(p,R,I,P(R,I))},gpuFinalizeCalculations:(p,R)=>jt(P(p,R))}},T1=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Characters.Sushang"),{basic:s,skill:o,ult:r,talent:l}=pe.ULT_TALENT_3_SKILL_BASIC_5,{SOURCE_BASIC:c,SOURCE_SKILL:u,SOURCE_ULT:d,SOURCE_TALENT:m,SOURCE_TECHNIQUE:h,SOURCE_TRACE:g,SOURCE_MEMO:C,SOURCE_E1:M,SOURCE_E2:x,SOURCE_E4:O,SOURCE_E6:H}=w.character("1206"),_=l(e,.2,.21),A=r(e,.3,.324),L=e>=6?2:1,v=s(e,1,1.1),N=o(e,2.1,2.31),U=o(e,1,1.1),F=r(e,3.2,3.456),P={ultBuffedState:!0,e2DmgReductionBuff:!0,skillExtraHits:3,skillTriggerStacks:10,talentSpdBuffStacks:L},T={ultBuffedState:{id:"ultBuffedState",formItem:"switch",text:t("Content.ultBuffedState.text"),content:t("Content.ultBuffedState.content",{ultBuffedAtk:b.precisionRound(100*A)})},skillExtraHits:{id:"skillExtraHits",formItem:"slider",text:t("Content.skillExtraHits.text"),content:t("Content.skillExtraHits.content"),min:0,max:3},skillTriggerStacks:{id:"skillTriggerStacks",formItem:"slider",text:t("Content.skillTriggerStacks.text"),content:t("Content.skillTriggerStacks.content"),min:0,max:10},talentSpdBuffStacks:{id:"talentSpdBuffStacks",formItem:"slider",text:t("Content.talentSpdBuffStacks.text"),content:t("Content.talentSpdBuffStacks.content",{talentSpdBuffValue:b.precisionRound(100*_)}),min:0,max:L},e2DmgReductionBuff:{id:"e2DmgReductionBuff",formItem:"switch",text:t("Content.e2DmgReductionBuff.text"),content:t("Content.e2DmgReductionBuff.content"),disabled:e<2}};return{activeAbilities:[z.BASIC,z.SKILL,z.ULT],content:()=>Object.values(T),defaults:()=>P,precomputeEffects:(y,p,R)=>{const I=p.characterConditionals;y.BE.buff(e>=4?.4:0,O),y.ATK_P.buff(I.ultBuffedState?A:0,d),y.SPD_P.buff(I.talentSpdBuffStacks*_,m);const B=N;let j=0;return j+=I.skillExtraHits>=1?U:0,j+=I.ultBuffedState&&I.skillExtraHits>=2?U*.5:0,j+=I.ultBuffedState&&I.skillExtraHits>=3?U*.5:0,y.BASIC_ATK_SCALING.buff(v,c),y.SKILL_ATK_SCALING.buff(B,u),y.SKILL_ADDITIONAL_DMG_SCALING.buff(j,u),y.ULT_ATK_SCALING.buff(F,d),Ee(y,To,I.skillTriggerStacks*.025,u),y.DMG_RED_MULTI.multiply(e>=2&&I.e2DmgReductionBuff?1-.2:1,x),y.BASIC_TOUGHNESS_DMG.buff(10,c),y.SKILL_TOUGHNESS_DMG.buff(20,u),y.ULT_TOUGHNESS_DMG.buff(30,d),y},finalizeCalculations:y=>{Aa(y)},gpuFinalizeCalculations:()=>Va()}},R1=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Characters.Tingyun"),{basic:s,skill:o,ult:r,talent:l}=pe.ULT_BASIC_3_SKILL_TALENT_5,{SOURCE_BASIC:c,SOURCE_SKILL:u,SOURCE_ULT:d,SOURCE_TALENT:m,SOURCE_TECHNIQUE:h,SOURCE_TRACE:g,SOURCE_MEMO:C,SOURCE_E1:M,SOURCE_E2:x,SOURCE_E4:O,SOURCE_E6:H}=w.character("1202"),_=o(e,.25,.27),A=r(e,.5,.56),L=o(e,.5,.55),v=o(e,.4,.44)+(e>=4?.2:0),N=l(e,.6,.66)+(e>=4?.2:0),U=s(e,1,1.1),F={benedictionBuff:!1,skillSpdBuff:!1,ultSpdBuff:!1,ultDmgBuff:!1},P={benedictionBuff:!0,ultSpdBuff:!1,ultDmgBuff:!0,teammateAtkBuffValue:L},T={benedictionBuff:{id:"benedictionBuff",formItem:"switch",text:t("Content.benedictionBuff.text"),content:t("Content.benedictionBuff.content",{skillAtkBoostScaling:b.precisionRound(100*L),skillAtkBoostMax:b.precisionRound(100*_),skillLightningDmgBoostScaling:b.precisionRound(100*v)})},skillSpdBuff:{id:"skillSpdBuff",formItem:"switch",text:t("Content.skillSpdBuff.text"),content:t("Content.skillSpdBuff.content")},ultDmgBuff:{id:"ultDmgBuff",formItem:"switch",text:t("Content.ultDmgBuff.text"),content:t("Content.ultDmgBuff.content",{ultDmgBoost:b.precisionRound(100*A)})},ultSpdBuff:{id:"ultSpdBuff",formItem:"switch",text:t("Content.ultSpdBuff.text"),content:t("Content.ultSpdBuff.content"),disabled:e<1}},y={benedictionBuff:T.benedictionBuff,teammateAtkBuffValue:{id:"teammateAtkBuffValue",formItem:"slider",text:t("TeammateContent.teammateAtkBuffValue.text"),content:t("TeammateContent.teammateAtkBuffValue.content",{skillAtkBoostScaling:b.precisionRound(100*L),skillAtkBoostMax:b.precisionRound(100*_),skillLightningDmgBoostScaling:b.precisionRound(100*v)}),min:0,max:L,percent:!0},ultDmgBuff:T.ultDmgBuff,ultSpdBuff:T.ultSpdBuff};return{activeAbilities:[z.BASIC],content:()=>Object.values(T),teammateContent:()=>Object.values(y),defaults:()=>F,teammateDefaults:()=>P,precomputeEffects:(p,R,I)=>{const B=R.characterConditionals;return p.SPD_P.buff(B.skillSpdBuff?.2:0,g),p.BASIC_ATK_SCALING.buff(U,c),p.BASIC_ADDITIONAL_DMG_SCALING.buff(B.benedictionBuff?v+N:0,u),Ee(p,Bt,.4,g),p.BASIC_TOUGHNESS_DMG.buff(10,c),p},precomputeMutualEffects:(p,R,I)=>{const B=R.characterConditionals;p.SPD_P.buffSingle(e>=1&&B.ultSpdBuff?.2:0,M),p.ELEMENTAL_DMG.buffSingle(B.ultDmgBuff?A:0,d)},precomputeTeammateEffects:(p,R,I)=>{const B=R.characterConditionals;p.ATK_P.buffSingle(B.benedictionBuff?B.teammateAtkBuffValue:0,u)},finalizeCalculations:(p,R,I)=>{Aa(p)},gpuFinalizeCalculations:(p,R)=>Va(),dynamicConditionals:[{id:"TingyunAtkConditional",type:Qe.ABILITY,activation:ze.CONTINUOUS,dependsOn:[n.ATK],chainsTo:[n.ATK],condition:function(p,R,I){return R.characterConditionals.benedictionBuff},effect:function(p,R,I){ta(n.ATK,n.ATK,this,p,R,I,g,B=>B*_)},gpu:function(p,R){const I=p.characterConditionals;return aa(n.ATK,n.ATK,this,p,R,`${_} * convertibleValue`,`${it(I.benedictionBuff)}`)}}]}},B1=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Characters.Xueyi"),{basic:s,skill:o,ult:r,talent:l}=pe.SKILL_BASIC_3_ULT_TALENT_5,{SOURCE_BASIC:c,SOURCE_SKILL:u,SOURCE_ULT:d,SOURCE_TALENT:m,SOURCE_TECHNIQUE:h,SOURCE_TRACE:g,SOURCE_MEMO:C,SOURCE_E1:M,SOURCE_E2:x,SOURCE_E4:O,SOURCE_E6:H}=w.character("1214"),_=r(e,.6,.648),A=s(e,1,1.1),L=o(e,1.4,1.54),v=r(e,2.5,2.7),N=l(e,.9,.99),U={0:0,1:Ie*(1*1/1),2:Ie*(1*1/2+2*1/2),3:Ie*(1*1/3+2*1/3+3*1/3)},F={beToDmgBoost:!0,enemyToughness50:!0,toughnessReductionDmgBoost:_,fuaHits:3,e4BeBuff:!0},P={beToDmgBoost:{id:"beToDmgBoost",formItem:"switch",text:t("Content.beToDmgBoost.text"),content:t("Content.beToDmgBoost.content")},enemyToughness50:{id:"enemyToughness50",formItem:"switch",text:t("Content.enemyToughness50.text"),content:t("Content.enemyToughness50.content")},toughnessReductionDmgBoost:{id:"toughnessReductionDmgBoost",formItem:"slider",text:t("Content.toughnessReductionDmgBoost.text"),content:t("Content.toughnessReductionDmgBoost.content",{ultBoostMax:b.precisionRound(100*_)}),min:0,max:_,percent:!0},fuaHits:{id:"fuaHits",formItem:"slider",text:t("Content.fuaHits.text"),content:t("Content.fuaHits.content",{fuaScaling:b.precisionRound(100*N)}),min:0,max:3},e4BeBuff:{id:"e4BeBuff",formItem:"switch",text:t("Content.e4BeBuff.text"),content:t("Content.e4BeBuff.content"),disabled:e<4}};return{activeAbilities:[z.BASIC,z.SKILL,z.ULT,z.FUA],content:()=>Object.values(P),defaults:()=>F,precomputeEffects:(T,y,p)=>{const R=y.characterConditionals;return T.BE.buff(e>=4&&R.e4BeBuff?.4:0,O),T.BASIC_ATK_SCALING.buff(A,c),T.SKILL_ATK_SCALING.buff(L,u),T.ULT_ATK_SCALING.buff(v,d),T.FUA_ATK_SCALING.buff(N*R.fuaHits,m),Ee(T,ye,R.toughnessReductionDmgBoost,d),Ee(T,ye,R.enemyToughness50?.1:0,g),Ee(T,je,e>=1?.4:0,M),T.BASIC_TOUGHNESS_DMG.buff(10,c),T.SKILL_TOUGHNESS_DMG.buff(20,u),T.ULT_TOUGHNESS_DMG.buff(40,d),T.FUA_TOUGHNESS_DMG.buff(5*R.fuaHits,m),T},finalizeCalculations:(T,y,p)=>{const R=y.characterConditionals;T.ELEMENTAL_DMG.buff(R.beToDmgBoost?Math.min(2.4,T.a[S.BE]):0,g),Yt(T,y,p,U[y.characterConditionals.fuaHits])},gpuFinalizeCalculations:(T,y)=>{const p=T.characterConditionals;return`
if (${it(p.beToDmgBoost)}) {
  x.ELEMENTAL_DMG += min(2.40, x.BE);
}

${jt(U[T.characterConditionals.fuaHits])}
`}}},I1=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Characters.Yanqing"),{basic:s,skill:o,ult:r,talent:l}=pe.SKILL_BASIC_3_ULT_TALENT_5,{SOURCE_BASIC:c,SOURCE_SKILL:u,SOURCE_ULT:d,SOURCE_TALENT:m,SOURCE_TECHNIQUE:h,SOURCE_TRACE:g,SOURCE_MEMO:C,SOURCE_E1:M,SOURCE_E2:x,SOURCE_E4:O,SOURCE_E6:H}=w.character("1209"),_=r(e,.5,.54),A=r(e,.3,.33),L=r(e,.2,.21),v=s(e,1,1.1),N=o(e,2.2,2.42),U=r(e,3.5,3.78),F=l(e,.5,.55),P=Ie*(1*1/1),T={ultBuffActive:!0,soulsteelBuffActive:!0,critSpdBuff:!0,e1TargetFrozen:!0,e4CurrentHp80:!0},y={ultBuffActive:{id:"ultBuffActive",formItem:"switch",text:t("Content.ultBuffActive.text"),content:t("Content.ultBuffActive.content",{ultCdBuffValue:b.precisionRound(100*_)})},soulsteelBuffActive:{id:"soulsteelBuffActive",formItem:"switch",text:t("Content.soulsteelBuffActive.text"),content:t("Content.soulsteelBuffActive.content",{talentCdBuffValue:b.precisionRound(100*A),talentCrBuffValue:b.precisionRound(100*L),ultCdBuffValue:b.precisionRound(100*_)})},critSpdBuff:{id:"critSpdBuff",formItem:"switch",text:t("Content.critSpdBuff.text"),content:t("Content.critSpdBuff.content")},e1TargetFrozen:{id:"e1TargetFrozen",formItem:"switch",text:t("Content.e1TargetFrozen.text"),content:t("Content.e1TargetFrozen.content"),disabled:e<1},e4CurrentHp80:{id:"e4CurrentHp80",formItem:"switch",text:t("Content.e4CurrentHp80.text"),content:t("Content.e4CurrentHp80.content"),disabled:e<4}};return{activeAbilities:[z.BASIC,z.SKILL,z.ULT,z.FUA],content:()=>Object.values(y),defaults:()=>T,precomputeEffects:(p,R,I)=>{const B=R.characterConditionals;return p.CR.buff(B.ultBuffActive?.6:0,d),p.CD.buff(B.ultBuffActive&&B.soulsteelBuffActive?_:0,d),p.CR.buff(B.soulsteelBuffActive?L:0,m),p.CD.buff(B.soulsteelBuffActive?A:0,m),p.RES.buff(B.soulsteelBuffActive?.2:0,g),p.SPD_P.buff(B.critSpdBuff?.1:0,g),p.ERR.buff(e>=2&&B.soulsteelBuffActive?.1:0,x),p.BASIC_ATK_SCALING.buff(v,c),p.SKILL_ATK_SCALING.buff(N,u),p.ULT_ATK_SCALING.buff(U,d),p.FUA_ATK_SCALING.buff(F,m),p.BASIC_ADDITIONAL_DMG_SCALING.buff(I.enemyElementalWeak?.3:0,c),p.SKILL_ADDITIONAL_DMG_SCALING.buff(I.enemyElementalWeak?.3:0,u),p.ULT_ADDITIONAL_DMG_SCALING.buff(I.enemyElementalWeak?.3:0,d),p.FUA_ADDITIONAL_DMG_SCALING.buff(I.enemyElementalWeak?.3:0,m),p.BASIC_ATK_SCALING.buff(e>=1&&B.e1TargetFrozen?.6:0,M),p.SKILL_ATK_SCALING.buff(e>=1&&B.e1TargetFrozen?.6:0,M),p.ULT_ATK_SCALING.buff(e>=1&&B.e1TargetFrozen?.6:0,M),p.FUA_ATK_SCALING.buff(e>=1&&B.e1TargetFrozen?.6:0,M),p.ICE_RES_PEN.buff(e>=4&&B.e4CurrentHp80?.12:0,O),p.BASIC_TOUGHNESS_DMG.buff(10,c),p.SKILL_TOUGHNESS_DMG.buff(20,u),p.ULT_TOUGHNESS_DMG.buff(30,d),p.FUA_TOUGHNESS_DMG.buff(10,m),p},finalizeCalculations:(p,R,I)=>{Yt(p,R,I,P),Aa(p)},gpuFinalizeCalculations:(p,R)=>jt(P)+Va()}},y1=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Characters.Yukong"),{basic:s,skill:o,ult:r,talent:l}=pe.SKILL_BASIC_3_ULT_TALENT_5,{SOURCE_BASIC:c,SOURCE_SKILL:u,SOURCE_ULT:d,SOURCE_TALENT:m,SOURCE_TECHNIQUE:h,SOURCE_TRACE:g,SOURCE_MEMO:C,SOURCE_E1:M,SOURCE_E2:x,SOURCE_E4:O,SOURCE_E6:H}=w.character("1207"),_=o(e,.8,.88),A=o(e,.65,.702),L=o(e,.28,.294),v=l(e,.8,.88),N=s(e,1,1.1),U=r(e,3.8,4.104),F={teamImaginaryDmgBoost:!0,roaringBowstringsActive:!0,ultBuff:!0,initialSpeedBuff:!0},P={teamImaginaryDmgBoost:!0,roaringBowstringsActive:!0,ultBuff:!0,initialSpeedBuff:!0},T={teamImaginaryDmgBoost:{id:"teamImaginaryDmgBoost",formItem:"switch",text:t("Content.teamImaginaryDmgBoost.text"),content:t("Content.teamImaginaryDmgBoost.content")},roaringBowstringsActive:{id:"roaringBowstringsActive",formItem:"switch",text:t("Content.roaringBowstringsActive.text"),content:t("Content.roaringBowstringsActive.content",{skillAtkBuffValue:b.precisionRound(100*_)})},ultBuff:{id:"ultBuff",formItem:"switch",text:t("Content.ultBuff.text"),content:t("Content.ultBuff.content",{ultCrBuffValue:b.precisionRound(100*L),ultCdBuffValue:b.precisionRound(100*A),ultScaling:b.precisionRound(100*U)})},initialSpeedBuff:{id:"initialSpeedBuff",formItem:"switch",text:t("Content.initialSpeedBuff.text"),content:t("Content.initialSpeedBuff.content"),disabled:e<1}},y={teamImaginaryDmgBoost:T.teamImaginaryDmgBoost,roaringBowstringsActive:T.roaringBowstringsActive,ultBuff:T.ultBuff,initialSpeedBuff:T.initialSpeedBuff};return{activeAbilities:[z.BASIC,z.ULT],content:()=>Object.values(T),teammateContent:()=>Object.values(y),defaults:()=>F,teammateDefaults:()=>P,precomputeEffects:(p,R,I)=>{const B=R.characterConditionals;return p.BASIC_ATK_SCALING.buff(N,c),p.BASIC_ATK_SCALING.buff(v,m),p.ULT_ATK_SCALING.buff(U,d),p.ELEMENTAL_DMG.buff(e>=4&&B.roaringBowstringsActive?.3:0,O),p.BASIC_TOUGHNESS_DMG.buff(10,c),p.ULT_TOUGHNESS_DMG.buff(30,d),p},precomputeMutualEffects:(p,R,I)=>{const B=R.characterConditionals;p.ATK_P.buffTeam(B.roaringBowstringsActive?_:0,u),p.CR.buffTeam(B.ultBuff&&B.roaringBowstringsActive?L:0,d),p.CD.buffTeam(B.ultBuff&&B.roaringBowstringsActive?A:0,d),p.SPD_P.buffTeam(e>=1&&B.initialSpeedBuff?.1:0,M),p.IMAGINARY_DMG_BOOST.buffTeam(B.teamImaginaryDmgBoost?.12:0,g)},finalizeCalculations:p=>{},gpuFinalizeCalculations:()=>""}},M1=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Characters.Yunli"),{basic:s,skill:o,ult:r,talent:l}=pe.ULT_BASIC_3_SKILL_TALENT_5,{SOURCE_BASIC:c,SOURCE_SKILL:u,SOURCE_ULT:d,SOURCE_TALENT:m,SOURCE_TECHNIQUE:h,SOURCE_TRACE:g,SOURCE_MEMO:C,SOURCE_E1:M,SOURCE_E2:x,SOURCE_E4:O,SOURCE_E6:H}=w.character("1221"),_=s(e,1,1.1),A=o(e,1.2,1.32),L=r(e,2.2,2.376),v=r(e,2.2,2.376),N=r(e,.72,.7776),U=r(e,1,1.08),F=l(e,1.2,1.32),P=e>=1?9:6,T={1:Ie*(1*1/1),3:Ie*(2*1/1),5:Ie*(3*1/1)},y={1:Ie*(1*.12+2*.12+3*.12+4*.12+5*.12+6*.12+7*.12+8*.16),3:Ie*(2*.12+5*.12+8*.12+8*.12+8*.12+8*.12+8*.12+8*.16),5:Ie*(3*.12+8*.12+8*.12+8*.12+8*.12+8*.12+8*.12+8*.16)};function p(B,j){const Z=B.characterConditionals;return Z.blockActive&&Z.ultCull?y[j.enemyCount]:T[j.enemyCount]}const R={blockActive:!0,ultCull:!0,ultCullHits:P,counterAtkBuff:!0,e1UltBuff:!0,e2DefShred:!0,e4ResBuff:!0,e6Buffs:!0},I={blockActive:{id:"blockActive",formItem:"switch",text:t("Content.blockActive.text"),content:t("Content.blockActive.content")},ultCull:{id:"ultCull",formItem:"switch",text:t("Content.ultCull.text"),content:t("Content.ultCull.content",{CullScaling:b.precisionRound(100*v),CullAdjacentScaling:b.precisionRound(100*.5*v),CullAdditionalScaling:b.precisionRound(100*N)})},ultCullHits:{id:"ultCullHits",formItem:"slider",text:t("Content.ultCullHits.text"),content:t("Content.ultCullHits.content",{CullScaling:b.precisionRound(100*v),CullAdjacentScaling:b.precisionRound(100*.5*v),CullAdditionalScaling:b.precisionRound(100*N)}),min:0,max:P},counterAtkBuff:{id:"counterAtkBuff",formItem:"switch",text:t("Content.counterAtkBuff.text"),content:t("Content.counterAtkBuff.content")},e1UltBuff:{id:"e1UltBuff",formItem:"switch",text:t("Content.e1UltBuff.text"),content:t("Content.e1UltBuff.content"),disabled:e<1},e2DefShred:{id:"e2DefShred",formItem:"switch",text:t("Content.e2DefShred.text"),content:t("Content.e2DefShred.content"),disabled:e<2},e4ResBuff:{id:"e4ResBuff",formItem:"switch",text:t("Content.e4ResBuff.text"),content:t("Content.e4ResBuff.content"),disabled:e<4},e6Buffs:{id:"e6Buffs",formItem:"switch",text:t("Content.e6Buffs.text"),content:t("Content.e6Buffs.content"),disabled:e<6}};return{activeAbilities:[z.BASIC,z.SKILL,z.FUA],content:()=>Object.values(I),defaults:()=>R,initializeConfigurations:(B,j,Z)=>{const K=j.characterConditionals;K.blockActive&&K.ultCull&&B.FUA_DMG_TYPE.set(ye|je,d)},precomputeEffects:(B,j,Z)=>{const K=j.characterConditionals;return B.BASIC_ATK_SCALING.buff(_,c),B.SKILL_ATK_SCALING.buff(A,u),K.blockActive?K.ultCull?B.FUA_ATK_SCALING.buff(v+K.ultCullHits*N,d):B.FUA_ATK_SCALING.buff(L,d):B.FUA_ATK_SCALING.buff(F,m),Sn(B,je,K.blockActive?U:0,d),B.ATK_P.buff(K.counterAtkBuff?.3:0,g),B.DMG_RED_MULTI.multiply(K.blockActive?1-.2:1,g),Ee(B,je,e>=1&&K.e1UltBuff&&K.blockActive?.2:0,M),en(B,je,e>=2&&K.e2DefShred?.2:0,x),B.RES.buff(e>=4&&K.e4ResBuff?.5:0,O),$u(B,je,e>=6&&K.e6Buffs&&K.blockActive?.15:0,H),di(B,je,e>=6&&K.e6Buffs&&K.blockActive?.2:0,H),B.BASIC_TOUGHNESS_DMG.buff(10,c),B.SKILL_TOUGHNESS_DMG.buff(20,u),B.FUA_TOUGHNESS_DMG.buff(K.blockActive?20:10,d),B.FUA_TOUGHNESS_DMG.buff(K.blockActive&&K.ultCull?K.ultCullHits*5:0,d),B},finalizeCalculations:(B,j,Z)=>{Yt(B,j,Z,p(j,Z))},gpuFinalizeCalculations:(B,j)=>jt(p(B,j))}},G1=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Characters.Acheron"),{basic:s,skill:o,ult:r,talent:l}=pe.ULT_BASIC_3_SKILL_TALENT_5,{SOURCE_BASIC:c,SOURCE_SKILL:u,SOURCE_ULT:d,SOURCE_TALENT:m,SOURCE_TECHNIQUE:h,SOURCE_TRACE:g,SOURCE_MEMO:C,SOURCE_E1:M,SOURCE_E2:x,SOURCE_E4:O,SOURCE_E6:H}=w.character("1308"),_=s(e,1,1.1),A=o(e,1.6,1.76),L=r(e,.24,.2592),v=r(e,.15,.162),N=r(e,1.2,1.296),U=.25,F=l(e,.2,.22),P=9,T={0:0,1:e>=2?.6:.15,2:.6,3:.6,4:.6},y={crimsonKnotStacks:P,nihilityTeammatesBuff:!0,e1EnemyDebuffed:!0,thunderCoreStacks:3,stygianResurgeHitsOnTarget:6,e4UltVulnerability:!0,e6UltBuffs:!0},p={e4UltVulnerability:!0},R={crimsonKnotStacks:{id:"crimsonKnotStacks",formItem:"slider",text:t("Content.crimsonKnotStacks.text"),content:t("Content.crimsonKnotStacks.content",{RainbladeScaling:b.precisionRound(100*L),CrimsonKnotScaling:b.precisionRound(100*v)}),min:0,max:P},nihilityTeammatesBuff:{id:"nihilityTeammatesBuff",formItem:"switch",text:t("Content.nihilityTeammatesBuff.text"),content:t("Content.nihilityTeammatesBuff.content")},thunderCoreStacks:{id:"thunderCoreStacks",formItem:"slider",text:t("Content.thunderCoreStacks.text"),content:t("Content.thunderCoreStacks.content"),min:0,max:3},stygianResurgeHitsOnTarget:{id:"stygianResurgeHitsOnTarget",formItem:"slider",text:t("Content.stygianResurgeHitsOnTarget.text"),content:t("Content.stygianResurgeHitsOnTarget.content"),min:0,max:6},e1EnemyDebuffed:{id:"e1EnemyDebuffed",formItem:"switch",text:t("Content.e1EnemyDebuffed.text"),content:t("Content.e1EnemyDebuffed.content"),disabled:e<1},e4UltVulnerability:{id:"e4UltVulnerability",formItem:"switch",text:t("Content.e4UltVulnerability.text"),content:t("Content.e4UltVulnerability.content"),disabled:e<4},e6UltBuffs:{id:"e6UltBuffs",formItem:"switch",text:t("Content.e6UltBuffs.text"),content:t("Content.e6UltBuffs.content"),disabled:e<6}},I={e4UltVulnerability:R.e4UltVulnerability};return{activeAbilities:[z.BASIC,z.SKILL,z.ULT],content:()=>Object.values(R),teammateContent:()=>Object.values(I),defaults:()=>y,teammateDefaults:()=>p,initializeConfigurations:(B,j,Z)=>{const K=j.characterConditionals;e>=6&&K.e6UltBuffs&&(B.BASIC_DMG_TYPE.set(ye|Bt,H),B.SKILL_DMG_TYPE.set(ye|Me,H))},precomputeEffects:(B,j,Z)=>{const K=j.characterConditionals;B.CR_BOOST.buff(e>=1&&K.e1EnemyDebuffed?.18:0,M),B.ELEMENTAL_DMG.buff(K.thunderCoreStacks*.3,g),di(B,ye,F,m),di(B,ye,e>=6&&K.e6UltBuffs?.2:0,H);const X=K.nihilityTeammatesBuff?T[ci(Z,Pa.Nihility)-1]:0;return B.BASIC_FINAL_DMG_BOOST.buff(X,g),B.SKILL_FINAL_DMG_BOOST.buff(X,g),B.ULT_FINAL_DMG_BOOST.buff(X,g),B.BASIC_ATK_SCALING.buff(_,c),B.SKILL_ATK_SCALING.buff(A,u),B.ULT_ATK_SCALING.buff(3*L,d),B.ULT_ATK_SCALING.buff(3*v,d),B.ULT_ATK_SCALING.buff(v*K.crimsonKnotStacks,d),B.ULT_ATK_SCALING.buff(N,d),B.ULT_ATK_SCALING.buff(K.stygianResurgeHitsOnTarget*U,d),B.BASIC_TOUGHNESS_DMG.buff(10,c),B.SKILL_TOUGHNESS_DMG.buff(20,u),B.ULT_TOUGHNESS_DMG.buff(35,d),B},precomputeMutualEffects:(B,j,Z)=>{const K=j.characterConditionals;ha(B,ye,e>=4&&K.e4UltVulnerability?.08:0,O,It.TEAM)},finalizeCalculations:B=>{},gpuFinalizeCalculations:()=>""}},P1=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Characters.Argenti"),{basic:s,skill:o,ult:r,talent:l}=pe.SKILL_TALENT_3_ULT_BASIC_5,{SOURCE_BASIC:c,SOURCE_SKILL:u,SOURCE_ULT:d,SOURCE_TALENT:m,SOURCE_TECHNIQUE:h,SOURCE_TRACE:g,SOURCE_MEMO:C,SOURCE_E1:M,SOURCE_E2:x,SOURCE_E4:O,SOURCE_E6:H}=w.character("1302"),_=e>=4?12:10,A=s(e,1,1.1),L=o(e,1.2,1.32),v=r(e,1.6,1.728),N=r(e,2.8,3.024),U=r(e,.95,1.026),F=l(e,.025,.028),P={ultEnhanced:!0,talentStacks:_,ultEnhancedExtraHits:6,e2UltAtkBuff:!0,enemyHp50:!0},T={ultEnhanced:{id:"ultEnhanced",formItem:"switch",text:t("Content.ultEnhanced.text"),content:t("Content.ultEnhanced.content",{ultEnhancedExtraHitScaling:b.precisionRound(100*U),ultEnhancedScaling:b.precisionRound(100*N)})},enemyHp50:{id:"enemyHp50",formItem:"switch",text:t("Content.enemyHp50.text"),content:t("Content.enemyHp50.content")},talentStacks:{id:"talentStacks",formItem:"slider",text:t("Content.talentStacks.text"),content:t("Content.talentStacks.content",{talentMaxStacks:b.precisionRound(100*_),talentCrStackValue:b.precisionRound(100*F)}),min:0,max:_},ultEnhancedExtraHits:{id:"ultEnhancedExtraHits",formItem:"slider",text:t("Content.ultEnhancedExtraHits.text"),content:t("Content.ultEnhancedExtraHits.content",{ultEnhancedExtraHitScaling:b.precisionRound(100*U)}),min:0,max:6},e2UltAtkBuff:{id:"e2UltAtkBuff",formItem:"switch",text:t("Content.e2UltAtkBuff.text"),content:t("Content.e2UltAtkBuff.content"),disabled:e<2}};return{activeAbilities:[z.BASIC,z.SKILL,z.ULT],content:()=>Object.values(T),defaults:()=>P,precomputeEffects:(y,p,R)=>{const I=p.characterConditionals;return y.CR.buff(I.talentStacks*F,m),y.CD.buff(e>=1?I.talentStacks*.04:0,M),y.ATK_P.buff(e>=2&&I.e2UltAtkBuff?.4:0,x),y.BASIC_ATK_SCALING.buff(A,c),y.SKILL_ATK_SCALING.buff(L,u),y.ULT_ATK_SCALING.buff(I.ultEnhanced?N:v,d),y.ULT_ATK_SCALING.buff(I.ultEnhancedExtraHits*U,d),y.ELEMENTAL_DMG.buff(I.enemyHp50?.15:0,g),en(y,ye,e>=6?.3:0,H),y.BASIC_TOUGHNESS_DMG.buff(10,c),y.SKILL_TOUGHNESS_DMG.buff(10,u),y.ULT_TOUGHNESS_DMG.buff(I.ultEnhanced?20+5*I.ultEnhancedExtraHits:20,d),y},finalizeCalculations:y=>{},gpuFinalizeCalculations:()=>""}},_1=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Characters.Aventurine"),s=b.wrappedFixedT(a).get(null,"conditionals","Common.ShieldAbility"),{basic:o,skill:r,ult:l,talent:c}=pe.ULT_BASIC_3_SKILL_TALENT_5,{SOURCE_BASIC:u,SOURCE_SKILL:d,SOURCE_ULT:m,SOURCE_TALENT:h,SOURCE_TECHNIQUE:g,SOURCE_TRACE:C,SOURCE_MEMO:M,SOURCE_E1:x,SOURCE_E2:O,SOURCE_E4:H,SOURCE_E6:_}=w.character("1304"),A=o(e,1,1.1),L=l(e,2.7,2.916),v=l(e,.15,.162),N=c(e,.25,.275),U=c(e,.5,.55),F=e>=4?10:7,P=r(e,.24,.256),T=r(e,320,356),y=.07,p=96,R={shieldAbility:Me,defToCrBoost:!0,fuaHitsOnTarget:F,fortifiedWagerBuff:!0,enemyUnnervedDebuff:!0,e2ResShred:!0,e4DefBuff:!0,e6ShieldStacks:3},I={fortifiedWagerBuff:!0,enemyUnnervedDebuff:!0,e2ResShred:!0},B={shieldAbility:{id:"shieldAbility",formItem:"select",text:s("Text"),content:s("Content"),options:[{display:s("Skill"),value:Me,label:s("Skill")},{display:s("Trace"),value:Ct,label:s("Trace")}],fullWidth:!0},defToCrBoost:{id:"defToCrBoost",formItem:"switch",text:t("Content.defToCrBoost.text"),content:t("Content.defToCrBoost.content")},fortifiedWagerBuff:{id:"fortifiedWagerBuff",formItem:"switch",text:t("Content.fortifiedWagerBuff.text"),content:t("Content.fortifiedWagerBuff.content",{talentResScaling:b.precisionRound(100*U)})},enemyUnnervedDebuff:{id:"enemyUnnervedDebuff",formItem:"switch",text:t("Content.enemyUnnervedDebuff.text"),content:t("Content.enemyUnnervedDebuff.content",{ultCdBoost:b.precisionRound(100*v)})},fuaHitsOnTarget:{id:"fuaHitsOnTarget",formItem:"slider",text:t("Content.fuaHitsOnTarget.text"),content:t("Content.fuaHitsOnTarget.content",{talentDmgScaling:b.precisionRound(100*N)}),min:0,max:F},e2ResShred:{id:"e2ResShred",formItem:"switch",text:t("Content.e2ResShred.text"),content:t("Content.e2ResShred.content"),disabled:e<2},e4DefBuff:{id:"e4DefBuff",formItem:"switch",text:t("Content.e4DefBuff.text"),content:t("Content.e4DefBuff.content"),disabled:e<4},e6ShieldStacks:{id:"e6ShieldStacks",formItem:"slider",text:t("Content.e6ShieldStacks.text"),content:t("Content.e6ShieldStacks.content"),min:0,max:3,disabled:e<6}},j={fortifiedWagerBuff:B.fortifiedWagerBuff,enemyUnnervedDebuff:B.enemyUnnervedDebuff,e2ResShred:B.e2ResShred};return{activeAbilities:[z.BASIC,z.ULT,z.FUA],content:()=>Object.values(B),teammateContent:()=>Object.values(j),defaults:()=>R,teammateDefaults:()=>I,precomputeEffects:(Z,K,X)=>{const te=K.characterConditionals;return Z.DEF_P.buff(e>=4&&te.e4DefBuff?.4:0,H),Z.ELEMENTAL_DMG.buff(e>=6?Math.min(1.5,.5*te.e6ShieldStacks):0,_),Z.BASIC_DEF_SCALING.buff(A,u),Z.ULT_DEF_SCALING.buff(L,m),Z.FUA_DEF_SCALING.buff(N*te.fuaHitsOnTarget,h),Z.BASIC_TOUGHNESS_DMG.buff(10,u),Z.ULT_TOUGHNESS_DMG.buff(30,m),Z.FUA_TOUGHNESS_DMG.buff(10/3*te.fuaHitsOnTarget,h),te.shieldAbility==Me&&(Z.SHIELD_SCALING.buff(P,d),Z.SHIELD_FLAT.buff(T,d)),te.shieldAbility==0&&(Z.SHIELD_SCALING.buff(y,d),Z.SHIELD_FLAT.buff(p,d)),Z},precomputeMutualEffects:(Z,K,X)=>{const te=K.characterConditionals;Z.RES.buffTeam(te.fortifiedWagerBuff?U:0,h),Z.CD.buffTeam(te.enemyUnnervedDebuff?v:0,m),Z.CD.buffTeam(e>=1&&te.fortifiedWagerBuff?.2:0,x),Z.RES_PEN.buffTeam(e>=2&&te.e2ResShred?.12:0,O)},finalizeCalculations:(Z,K,X)=>{zo(Z)},gpuFinalizeCalculations:()=>Xo(),dynamicConditionals:[{id:"AventurineConversionConditional",type:Qe.ABILITY,activation:ze.CONTINUOUS,dependsOn:[n.DEF],chainsTo:[n.CR],condition:function(Z,K,X){return K.characterConditionals.defToCrBoost&&Z.a[S.DEF]>1600},effect:function(Z,K,X){ta(n.DEF,n.CR,this,Z,K,X,C,te=>Math.min(.48,.02*Math.floor((te-1600)/100)))},gpu:function(Z,K){const X=Z.characterConditionals;return aa(n.DEF,n.CR,this,Z,K,"min(0.48, 0.02 * floor((convertibleValue - 1600) / 100))",`${it(X.defToCrBoost)} && x.DEF > 1600`)}}]}},A1=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Characters.BlackSwan"),{basic:s,skill:o,ult:r,talent:l}=pe.SKILL_TALENT_3_ULT_BASIC_5,{SOURCE_BASIC:c,SOURCE_SKILL:u,SOURCE_ULT:d,SOURCE_TALENT:m,SOURCE_TECHNIQUE:h,SOURCE_TRACE:g,SOURCE_MEMO:C,SOURCE_E1:M,SOURCE_E2:x,SOURCE_E4:O,SOURCE_E6:H}=w.character("1307"),_=l(e,.12,.132),A=r(e,.25,.27),L=o(e,.208,.22),v=s(e,.6,.66),N=o(e,.9,.99),U=r(e,1.2,1.3),F=l(e,2.4,2.64),P=l(e,.65,.68),T={ehrToDmgBoost:!0,epiphanyDebuff:!0,defDecreaseDebuff:!0,arcanaStacks:7,e1ResReduction:!0,e4EffResPen:!0},y={epiphanyDebuff:!0,defDecreaseDebuff:!0,e1ResReduction:!0,e4EffResPen:!0},p={ehrToDmgBoost:{id:"ehrToDmgBoost",formItem:"switch",text:t("Content.ehrToDmgBoost.text"),content:t("Content.ehrToDmgBoost.content")},epiphanyDebuff:{id:"epiphanyDebuff",formItem:"switch",text:t("Content.epiphanyDebuff.text"),content:t("Content.epiphanyDebuff.content",{epiphanyDmgTakenBoost:b.precisionRound(100*A)})},defDecreaseDebuff:{id:"defDecreaseDebuff",formItem:"switch",text:t("Content.defDecreaseDebuff.text"),content:t("Content.defDecreaseDebuff.content",{defShredValue:b.precisionRound(100*L)})},arcanaStacks:{id:"arcanaStacks",formItem:"slider",text:t("Content.arcanaStacks.text"),content:t("Content.arcanaStacks.content",{dotScaling:b.precisionRound(100*F),arcanaStackMultiplier:b.precisionRound(100*_)}),min:1,max:50},e1ResReduction:{id:"e1ResReduction",formItem:"switch",text:t("Content.e1ResReduction.text"),content:t("Content.e1ResReduction.content"),disabled:e<1},e4EffResPen:{id:"e4EffResPen",formItem:"switch",text:t("Content.e4EffResPen.text"),content:t("Content.e4EffResPen.content"),disabled:e<4}},R={epiphanyDebuff:p.epiphanyDebuff,defDecreaseDebuff:p.defDecreaseDebuff,e1ResReduction:p.e1ResReduction,e4EffResPen:p.e4EffResPen};return{activeAbilities:[z.BASIC,z.SKILL,z.ULT,z.DOT],content:()=>Object.values(p),teammateContent:()=>Object.values(R),defaults:()=>T,teammateDefaults:()=>y,precomputeEffects:(I,B,j)=>{const Z=B.characterConditionals;I.BASIC_ATK_SCALING.buff(v,c),I.SKILL_ATK_SCALING.buff(N,u),I.ULT_ATK_SCALING.buff(U,d),I.DOT_ATK_SCALING.buff(F+_*Z.arcanaStacks,m),en(I,qa,Z.arcanaStacks>=7?.2:0,m),I.BASIC_TOUGHNESS_DMG.buff(10,c),I.SKILL_TOUGHNESS_DMG.buff(20,u),I.ULT_TOUGHNESS_DMG.buff(20,d),I.DOT_CHANCE.set(P,m),I.DOT_SPLIT.set(.05,m),I.DOT_STACKS.set(Z.arcanaStacks,m)},precomputeMutualEffects:(I,B,j)=>{const Z=B.characterConditionals;ha(I,qa,Z.epiphanyDebuff?A:0,d,It.TEAM),I.DEF_PEN.buffTeam(Z.defDecreaseDebuff?L:0,u),I.WIND_RES_PEN.buffTeam(e>=1&&Z.e1ResReduction?.25:0,M),I.FIRE_RES_PEN.buffTeam(e>=1&&Z.e1ResReduction?.25:0,M),I.PHYSICAL_RES_PEN.buffTeam(e>=1&&Z.e1ResReduction?.25:0,M),I.LIGHTNING_RES_PEN.buffTeam(e>=1&&Z.e1ResReduction?.25:0,M),I.EFFECT_RES_PEN.buffTeam(e>=4&&Z.epiphanyDebuff&&Z.e4EffResPen?.1:0,O)},finalizeCalculations:(I,B,j)=>{const Z=B.characterConditionals;I.ELEMENTAL_DMG.buff(Z.ehrToDmgBoost?Math.min(.72,.6*I.a[S.EHR]):0,g)},gpuFinalizeCalculations:(I,B)=>{const j=I.characterConditionals;return`
if (${it(j.ehrToDmgBoost)}) {
  x.ELEMENTAL_DMG += min(0.72, 0.60 * x.EHR);
}
`}}},x1=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Characters.Boothill"),{basic:s,skill:o,ult:r,talent:l}=pe.ULT_BASIC_3_SKILL_TALENT_5,{SOURCE_BASIC:c,SOURCE_SKILL:u,SOURCE_ULT:d,SOURCE_TALENT:m,SOURCE_TECHNIQUE:h,SOURCE_TRACE:g,SOURCE_MEMO:C,SOURCE_E1:M,SOURCE_E2:x,SOURCE_E4:O,SOURCE_E6:H}=w.character("1315"),_=o(e,.3,.33),A=s(e,1,1.1),L=s(e,2.2,2.42),v=r(e,4,4.32),N={0:0,1:l(e,.7,.77),2:l(e,1.2,1.32),3:l(e,1.7,1.87)},U={standoffActive:!0,pocketTrickshotStacks:3,beToCritBoost:!0,talentBreakDmgScaling:!0,e1DefShred:!0,e2BeBuff:!0,e4TargetStandoffVulnerability:!0,e6AdditionalBreakDmg:!0},F={standoffActive:{id:"standoffActive",formItem:"switch",text:t("Content.standoffActive.text"),content:t("Content.standoffActive.content",{standoffVulnerabilityBoost:b.precisionRound(100*_)})},pocketTrickshotStacks:{id:"pocketTrickshotStacks",formItem:"slider",text:t("Content.pocketTrickshotStacks.text"),content:t("Content.pocketTrickshotStacks.content"),min:0,max:3},beToCritBoost:{id:"beToCritBoost",formItem:"switch",text:t("Content.beToCritBoost.text"),content:t("Content.beToCritBoost.content")},talentBreakDmgScaling:{id:"talentBreakDmgScaling",formItem:"switch",text:t("Content.talentBreakDmgScaling.text"),content:t("Content.talentBreakDmgScaling.content")},e1DefShred:{id:"e1DefShred",formItem:"switch",text:t("Content.e1DefShred.text"),content:t("Content.e1DefShred.content"),disabled:e<1},e2BeBuff:{id:"e2BeBuff",formItem:"switch",text:t("Content.e2BeBuff.text"),content:t("Content.e2BeBuff.content"),disabled:e<2},e4TargetStandoffVulnerability:{id:"e4TargetStandoffVulnerability",formItem:"switch",text:t("Content.e4TargetStandoffVulnerability.text"),content:t("Content.e4TargetStandoffVulnerability.content"),disabled:e<4},e6AdditionalBreakDmg:{id:"e6AdditionalBreakDmg",formItem:"switch",text:t("Content.e6AdditionalBreakDmg.text"),content:t("Content.e6AdditionalBreakDmg.content"),disabled:e<6}};return{activeAbilities:[z.BASIC,z.ULT],content:()=>Object.values(F),defaults:()=>U,initializeConfigurations:(P,T,y)=>{T.characterConditionals.talentBreakDmgScaling&&P.ENEMY_WEAKNESS_BROKEN.config(1,m)},precomputeEffects:(P,T,y)=>{const p=T.characterConditionals;P.BE.buff(e>=2&&p.e2BeBuff?.3:0,x),P.VULNERABILITY.buff(p.standoffActive?_:0,u),P.DEF_PEN.buff(e>=1&&p.e1DefShred?.16:0,M),P.VULNERABILITY.buff(e>=4&&p.standoffActive&&p.e4TargetStandoffVulnerability?.12:0,O),P.BASIC_ATK_SCALING.buff(p.standoffActive?L:A,c),P.BASIC_BREAK_EFFICIENCY_BOOST.buff(p.standoffActive?p.pocketTrickshotStacks*.5:0,m),P.ULT_ATK_SCALING.buff(v,d),P.BASIC_TOUGHNESS_DMG.buff(p.standoffActive?20:10,c),P.ULT_TOUGHNESS_DMG.buff(30,d);const R=Math.min(16*30,y.enemyMaxToughness),I=1/(.5+y.enemyMaxToughness/120),B=.5+R/120;let j=N[p.pocketTrickshotStacks];return j+=e>=6&&p.e6AdditionalBreakDmg?.4:0,P.BASIC_BREAK_DMG_MODIFIER.buff(p.talentBreakDmgScaling&&p.standoffActive?I*B*j:0,m),P},finalizeCalculations:P=>{},gpuFinalizeCalculations:()=>"",dynamicConditionals:[{id:"BoothillConversionConditional",type:Qe.ABILITY,activation:ze.CONTINUOUS,dependsOn:[n.BE],chainsTo:[n.CR,n.CD],condition:function(P,T,y){return T.characterConditionals.beToCritBoost},effect:function(P,T,y){const p=T.conditionalState[this.id]||0,R=Math.min(.3,.1*p),I=Math.min(1.5,.5*p),B=Math.min(.3,.1*P.a[S.BE]),j=Math.min(1.5,.5*P.a[S.BE]);T.conditionalState[this.id]=P.a[S.BE],P.CR.buffDynamic(B-R,g,T,y),P.CD.buffDynamic(j-I,g,T,y)},gpu:function(P,T){const y=P.characterConditionals;return Ft(this,`
if (${$i(y.beToCritBoost)}) {
  return;
}

let be = x.BE;
let stateValue = (*p_state).BoothillConversionConditional;

let stateCrBuffValue = min(0.30, 0.10 * stateValue);
let stateCdBuffValue = min(1.50, 0.50 * stateValue);

let crBuffValue = min(0.30, 0.10 * be);
let cdBuffValue = min(1.50, 0.50 * be);

(*p_state).BoothillConversionConditional = be;

(*p_x).CR += crBuffValue - stateCrBuffValue;
(*p_x).CD += cdBuffValue - stateCdBuffValue;
    `)}}]}},L1=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Characters.DrRatio"),{basic:s,skill:o,ult:r,talent:l}=pe.ULT_BASIC_3_SKILL_TALENT_5,{SOURCE_BASIC:c,SOURCE_SKILL:u,SOURCE_ULT:d,SOURCE_TALENT:m,SOURCE_TECHNIQUE:h,SOURCE_TRACE:g,SOURCE_MEMO:C,SOURCE_E1:M,SOURCE_E2:x,SOURCE_E4:O,SOURCE_E6:H}=w.character("1305"),_=5,A=e>=1?10:6,L=s(e,1,1.1),v=o(e,1.5,1.65),N=r(e,2.4,2.592),U=l(e,2.7,2.97);function F(I,B=!0){return B?U/(U+.2*I):.2/(U+.2*I)}const P=Ie*(1*1/1),T={0:Ie*(1*1/1),1:Ie*(1*F(1,!0)+2*F(1,!1)),2:Ie*(1*F(2,!0)+5*F(2,!1)),3:Ie*(1*F(3,!0)+9*F(3,!1)),4:Ie*(1*F(4,!0)+14*F(4,!1))};function y(I,B){const j=I.characterConditionals;return e>=2?T[Math.min(4,j.enemyDebuffStacks)]:P}const p={enemyDebuffStacks:_,summationStacks:A},R={summationStacks:{id:"summationStacks",formItem:"slider",text:t("Content.summationStacks.text"),content:t("Content.summationStacks.content",{summationStacksMax:A}),min:0,max:A},enemyDebuffStacks:{id:"enemyDebuffStacks",formItem:"slider",text:t("Content.enemyDebuffStacks.text"),content:t("Content.enemyDebuffStacks.content",{FuaScaling:b.precisionRound(100*U)}),min:0,max:_}};return{activeAbilities:[z.BASIC,z.SKILL,z.ULT,z.FUA],content:()=>Object.values(R),defaults:()=>p,precomputeEffects:(I,B,j)=>{const Z=B.characterConditionals;return I.CR.buff(Z.summationStacks*.025,g),I.CD.buff(Z.summationStacks*.05,g),I.BASIC_ATK_SCALING.buff(L,c),I.SKILL_ATK_SCALING.buff(v,u),I.ULT_ATK_SCALING.buff(N,d),I.FUA_ATK_SCALING.buff(U,m),I.FUA_ADDITIONAL_DMG_SCALING.buff(e>=2?.2*Math.min(4,Z.enemyDebuffStacks):0,x),I.ELEMENTAL_DMG.buff(Z.enemyDebuffStacks>=3?Math.min(.5,Z.enemyDebuffStacks*.1):0,g),Ee(I,je,e>=6?.5:0,H),I.BASIC_TOUGHNESS_DMG.buff(10,c),I.SKILL_TOUGHNESS_DMG.buff(20,u),I.ULT_TOUGHNESS_DMG.buff(30,d),I.FUA_TOUGHNESS_DMG.buff(10,m),I},finalizeCalculations:(I,B,j)=>{Yt(I,B,j,y(B)),Aa(I)},gpuFinalizeCalculations:(I,B)=>jt(y(I))+Va()}},O1=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Characters.Firefly"),{basic:s,skill:o,ult:r,talent:l}=pe.SKILL_BASIC_3_ULT_TALENT_5,{SOURCE_BASIC:c,SOURCE_SKILL:u,SOURCE_ULT:d,SOURCE_TALENT:m,SOURCE_TECHNIQUE:h,SOURCE_TRACE:g,SOURCE_MEMO:C,SOURCE_E1:M,SOURCE_E2:x,SOURCE_E4:O,SOURCE_E6:H}=w.character("1310"),_=s(e,1,1.1),A=s(e,2,2.2),L=o(e,2,2.2),v=o(e,2,2.2),N=r(e,60,66),U=r(e,.2,.22),F=l(e,.3,.34),P=l(e,.4,.44),T={enhancedStateActive:!0,enhancedStateSpdBuff:!0,superBreakDmg:!0,atkToBeConversion:!0,talentDmgReductionBuff:!0,e1DefShred:!0,e4ResBuff:!0,e6Buffs:!0},y={enhancedStateActive:{id:"enhancedStateActive",formItem:"switch",text:t("Content.enhancedStateActive.text"),content:t("Content.enhancedStateActive.content")},enhancedStateSpdBuff:{id:"enhancedStateSpdBuff",formItem:"switch",text:t("Content.enhancedStateSpdBuff.text"),content:t("Content.enhancedStateSpdBuff.content",{ultSpdBuff:N})},superBreakDmg:{id:"superBreakDmg",formItem:"switch",text:t("Content.superBreakDmg.text"),content:t("Content.superBreakDmg.content")},atkToBeConversion:{id:"atkToBeConversion",formItem:"switch",text:t("Content.atkToBeConversion.text"),content:t("Content.atkToBeConversion.content")},talentDmgReductionBuff:{id:"talentDmgReductionBuff",formItem:"switch",text:t("Content.talentDmgReductionBuff.text"),content:t("Content.talentDmgReductionBuff.content",{talentResBuff:b.precisionRound(100*F),talentDmgReductionBuff:b.precisionRound(100*P)})},e1DefShred:{id:"e1DefShred",formItem:"switch",text:t("Content.e1DefShred.text"),content:t("Content.e1DefShred.content"),disabled:e<1},e4ResBuff:{id:"e4ResBuff",formItem:"switch",text:t("Content.e4ResBuff.text"),content:t("Content.e4ResBuff.content"),disabled:e<4},e6Buffs:{id:"e6Buffs",formItem:"switch",text:t("Content.e6Buffs.text"),content:t("Content.e6Buffs.content"),disabled:e<6}};return{activeAbilities:[z.BASIC,z.SKILL],content:()=>Object.values(y),defaults:()=>T,initializeConfigurations:(p,R,I)=>{R.characterConditionals.superBreakDmg&&p.ENEMY_WEAKNESS_BROKEN.config(1,g)},precomputeEffects:(p,R,I)=>{const B=R.characterConditionals;return p.RES.buff(B.enhancedStateActive?F:0,m),p.SPD.buff(B.enhancedStateActive&&B.enhancedStateSpdBuff?N:0,d),p.BREAK_EFFICIENCY_BOOST.buff(B.enhancedStateActive?.5:0,d),p.DMG_RED_MULTI.multiply(B.enhancedStateActive&&B.talentDmgReductionBuff?1-P:1,m),ha(p,ja,B.enhancedStateActive&&p.a[S.ENEMY_WEAKNESS_BROKEN]?U:0,d),p.DEF_PEN.buff(e>=1&&B.e1DefShred&&B.enhancedStateActive?.15:0,M),p.RES.buff(e>=4&&B.e4ResBuff&&B.enhancedStateActive?.5:0,O),p.FIRE_RES_PEN.buff(e>=6&&B.e6Buffs&&B.enhancedStateActive?.2:0,H),p.BREAK_EFFICIENCY_BOOST.buff(e>=6&&B.e6Buffs&&B.enhancedStateActive?.5:0,H),p.BASIC_ATK_SCALING.buff(B.enhancedStateActive?A:_,c),p.BASIC_TOUGHNESS_DMG.buff(B.enhancedStateActive?15:10,c),p.SKILL_TOUGHNESS_DMG.buff(B.enhancedStateActive?30:20,u),p},finalizeCalculations:(p,R,I)=>{const B=R.characterConditionals;p.SUPER_BREAK_MODIFIER.buff(B.superBreakDmg&&B.enhancedStateActive&&p.a[S.BE]>=2?.35:0,g),p.SUPER_BREAK_MODIFIER.buff(B.superBreakDmg&&B.enhancedStateActive&&p.a[S.BE]>=3.6?.15:0,g),p.SKILL_ATK_SCALING.buff(B.enhancedStateActive?.2*Math.min(3.6,p.a[S.BE])+v:L,u)},gpuFinalizeCalculations:(p,R)=>{const I=p.characterConditionals;return`
if (x.BE >= 2.00 && ${it(I.superBreakDmg&&I.enhancedStateActive)}) { x.SUPER_BREAK_MODIFIER += 0.35; }
if (x.BE >= 3.60 && ${it(I.superBreakDmg&&I.enhancedStateActive)}) { x.SUPER_BREAK_MODIFIER += 0.15; }

if (${it(I.enhancedStateActive)}) {
  x.SKILL_ATK_SCALING += 0.2 * min(3.60, x.BE) + ${v};
} else {
  x.SKILL_ATK_SCALING += ${L};
}
      `},dynamicConditionals:[{id:"FireflyConversionConditional",type:Qe.ABILITY,activation:ze.CONTINUOUS,dependsOn:[n.ATK],chainsTo:[n.BE],condition:function(p,R,I){return R.characterConditionals.atkToBeConversion&&p.a[S.ATK]>1800},effect:function(p,R,I){ta(n.ATK,n.BE,this,p,R,I,g,B=>.008*Math.floor((B-1800)/10))},gpu:function(p,R){const I=p.characterConditionals;return aa(n.ATK,n.BE,this,p,R,"0.008 * floor((convertibleValue - 1800) / 10)",`${it(I.atkToBeConversion)} && x.ATK > 1800`)}}]}},v1=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Characters.Gallagher"),s=b.wrappedFixedT(a).get(null,"conditionals","Common.HealAbility"),{basic:o,skill:r,talent:l}=pe.SKILL_BASIC_3_ULT_TALENT_5,{SOURCE_BASIC:c,SOURCE_SKILL:u,SOURCE_ULT:d,SOURCE_TALENT:m,SOURCE_TECHNIQUE:h,SOURCE_TRACE:g,SOURCE_MEMO:C,SOURCE_E1:M,SOURCE_E2:x,SOURCE_E4:O,SOURCE_E6:H}=w.character("1301"),_=o(e,1,1.1),A=o(e,2.5,2.75),L=o(e,1.5,1.65),v=l(e,.12,.132),N=r(e,1600,1768),U=l(e,640,707.2),F={healAbility:Ct,basicEnhanced:!0,breakEffectToOhbBoost:!0,e1ResBuff:!0,e2ResBuff:!0,e6BeBuff:!0,targetBesotted:!0},P={targetBesotted:!0,e2ResBuff:!0},T={healAbility:{id:"healAbility",formItem:"select",text:s("Text"),content:s("Content"),options:[{display:s("Skill"),value:Me,label:s("Skill")},{display:s("Talent"),value:Ct,label:s("Talent")}],fullWidth:!0},basicEnhanced:{id:"basicEnhanced",formItem:"switch",text:t("Content.basicEnhanced.text"),content:t("Content.basicEnhanced.content")},breakEffectToOhbBoost:{id:"breakEffectToOhbBoost",formItem:"switch",text:t("Content.breakEffectToOhbBoost.text"),content:t("Content.breakEffectToOhbBoost.content")},targetBesotted:{id:"targetBesotted",formItem:"switch",text:t("Content.targetBesotted.text"),content:t("Content.targetBesotted.content",{talentBesottedScaling:b.precisionRound(100*v)})},e1ResBuff:{id:"e1ResBuff",formItem:"switch",text:t("Content.e1ResBuff.text"),content:t("Content.e1ResBuff.content"),disabled:e<1},e2ResBuff:{id:"e2ResBuff",formItem:"switch",text:t("Content.e2ResBuff.text"),content:t("Content.e2ResBuff.content"),disabled:e<2},e6BeBuff:{id:"e6BeBuff",formItem:"switch",text:t("Content.e6BeBuff.text"),content:t("Content.e6BeBuff.content"),disabled:e<6}},y={targetBesotted:T.targetBesotted,e2ResBuff:T.e2ResBuff};return{activeAbilities:[z.BASIC,z.ULT],content:()=>Object.values(T),teammateContent:()=>Object.values(y),defaults:()=>F,teammateDefaults:()=>P,precomputeEffects:(p,R,I)=>{const B=R.characterConditionals;return p.RES.buff(e>=1&&B.e1ResBuff?.5:0,M),p.BE.buff(e>=6?.2:0,H),p.BREAK_EFFICIENCY_BOOST.buff(e>=6?.2:0,H),p.BASIC_ATK_SCALING.buff(B.basicEnhanced?A:_,c),p.ULT_ATK_SCALING.buff(L,d),p.BASIC_TOUGHNESS_DMG.buff(B.basicEnhanced?30:10,c),p.ULT_TOUGHNESS_DMG.buff(20,d),B.healAbility==Me&&(p.HEAL_TYPE.set(Me,u),p.HEAL_FLAT.buff(N,u)),B.healAbility==Ct&&(p.HEAL_TYPE.set(Ct,m),p.HEAL_FLAT.buff(U,m)),p},precomputeMutualEffects:(p,R,I)=>{const B=R.characterConditionals;p.RES.buff(e>=2&&B.e2ResBuff?.3:0,x),ha(p,ja,B.targetBesotted?v:0,m,It.TEAM)},finalizeCalculations:p=>{kh(p)},gpuFinalizeCalculations:()=>Kh(),dynamicConditionals:[{id:"GallagherConversionConditional",type:Qe.ABILITY,activation:ze.CONTINUOUS,dependsOn:[n.BE],chainsTo:[n.OHB],condition:function(p,R,I){return R.characterConditionals.breakEffectToOhbBoost},effect:function(p,R,I){R.characterConditionals,ta(n.BE,n.OHB,this,p,R,I,g,B=>Math.min(.75,.5*B))},gpu:function(p,R){const I=p.characterConditionals;return aa(n.BE,n.OHB,this,p,R,"min(0.75, 0.50 * convertibleValue)",`${it(I.breakEffectToOhbBoost)}`)}}]}},H1=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Characters.Jade"),{basic:s,skill:o,ult:r,talent:l}=pe.SKILL_TALENT_3_ULT_BASIC_5,{SOURCE_BASIC:c,SOURCE_SKILL:u,SOURCE_ULT:d,SOURCE_TALENT:m,SOURCE_TECHNIQUE:h,SOURCE_TRACE:g,SOURCE_MEMO:C,SOURCE_E1:M,SOURCE_E2:x,SOURCE_E4:O,SOURCE_E6:H}=w.character("1314"),_=s(e,.9,.99);o(e,.25,.27);const A=r(e,2.4,2.64),L=r(e,.8,.88),v=l(e,1.2,1.32),N=l(e,.024,.0264),U={1:Ie*(1*.25+2*.25+3*.25+4*.25),3:Ie*(2*.25+5*.25+8*.25+8*.25),5:Ie*(3*.25+8*.25+8*.25+8*.25)},F={1:Ie*(1*.1+2*.1+3*.1+4*.1+5*.6),3:Ie*(2*.1+5*.1+8*.1+8*.1+8*.6),5:Ie*(3*.1+8*.1+8*.1+8*.1+8*.6)};function P(I,B){return I.characterConditionals.enhancedFollowUp?F[B.enemyCount]:U[B.enemyCount]}const T={enhancedFollowUp:!0,pawnedAssetStacks:50,e1FuaDmgBoost:!0,e2CrBuff:!0,e4DefShredBuff:!0,e6ResShredBuff:!0},y={debtCollectorSpdBuff:!0},p={enhancedFollowUp:{id:"enhancedFollowUp",formItem:"switch",text:t("Content.enhancedFollowUp.text"),content:t("Content.enhancedFollowUp.content",{ultFuaScalingBuff:b.precisionRound(100*L)})},pawnedAssetStacks:{id:"pawnedAssetStacks",formItem:"slider",text:t("Content.pawnedAssetStacks.text"),content:t("Content.pawnedAssetStacks.content",{pawnedAssetCdScaling:b.precisionRound(100*N)}),min:0,max:50},e1FuaDmgBoost:{id:"e1FuaDmgBoost",formItem:"switch",text:t("Content.e1FuaDmgBoost.text"),content:t("Content.e1FuaDmgBoost.content"),disabled:e<1},e2CrBuff:{id:"e2CrBuff",formItem:"switch",text:t("Content.e2CrBuff.text"),content:t("Content.e2CrBuff.content"),disabled:e<2},e4DefShredBuff:{id:"e4DefShredBuff",formItem:"switch",text:t("Content.e4DefShredBuff.text"),content:t("Content.e4DefShredBuff.content"),disabled:e<4},e6ResShredBuff:{id:"e6ResShredBuff",formItem:"switch",text:t("Content.e6ResShredBuff.text"),content:t("Content.e6ResShredBuff.content"),disabled:e<6}},R={debtCollectorSpdBuff:{id:"debtCollectorSpdBuff",formItem:"switch",text:t("TeammateContent.debtCollectorSpdBuff.text"),content:t("TeammateContent.debtCollectorSpdBuff.content")}};return{activeAbilities:[z.BASIC,z.ULT,z.FUA],content:()=>Object.values(p),teammateContent:()=>Object.values(R),defaults:()=>T,teammateDefaults:()=>y,precomputeEffects:(I,B,j)=>{const Z=B.characterConditionals;return I.CD.buff(Z.pawnedAssetStacks*N,m),I.ATK_P.buff(Z.pawnedAssetStacks*.005,g),I.CR.buff(e>=2&&Z.e2CrBuff&&Z.pawnedAssetStacks>=15?.18:0,x),I.BASIC_ATK_SCALING.buff(_,c),I.ULT_ATK_SCALING.buff(A,d),I.FUA_ATK_SCALING.buff(v,m),I.FUA_ATK_SCALING.buff(Z.enhancedFollowUp?L:0,d),Ee(I,je,e>=1&&Z.e1FuaDmgBoost?.32:0,M),I.DEF_PEN.buff(e>=4&&Z.e4DefShredBuff?.12:0,O),I.QUANTUM_RES_PEN.buff(e>=6&&Z.e6ResShredBuff?.2:0,H),I.BASIC_TOUGHNESS_DMG.buff(10,c),I.ULT_TOUGHNESS_DMG.buff(20,d),I.FUA_TOUGHNESS_DMG.buff(10,m),I},precomputeTeammateEffects:(I,B,j)=>{const Z=B.characterConditionals;I.SPD.buffSingle(Z.debtCollectorSpdBuff?30:0,u)},finalizeCalculations:(I,B,j)=>{Yt(I,B,j,P(B,j))},gpuFinalizeCalculations:(I,B)=>jt(P(I,B))}},F1=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Characters.Misha"),{basic:s,skill:o,ult:r}=pe.ULT_BASIC_3_SKILL_TALENT_5,{SOURCE_BASIC:l,SOURCE_SKILL:c,SOURCE_ULT:u,SOURCE_TALENT:d,SOURCE_TECHNIQUE:m,SOURCE_TRACE:h,SOURCE_MEMO:g,SOURCE_E1:C,SOURCE_E2:M,SOURCE_E4:x,SOURCE_E6:O}=w.character("1312"),H=s(e,1,1.1),_=o(e,2,2.2);let A=r(e,.6,.65);A+=e>=4?.06:0;const L={ultHitsOnTarget:10,enemyFrozen:!0,e2DefReduction:!0,e6UltDmgBoost:!0},v={e2DefReduction:!0},N={ultHitsOnTarget:{id:"ultHitsOnTarget",formItem:"slider",text:t("Content.ultHitsOnTarget.text"),content:t("Content.ultHitsOnTarget.content",{ultStackScaling:b.precisionRound(100*A)}),min:1,max:10},enemyFrozen:{id:"enemyFrozen",formItem:"switch",text:t("Content.enemyFrozen.text"),content:t("Content.enemyFrozen.content")},e2DefReduction:{id:"e2DefReduction",formItem:"switch",text:t("Content.e2DefReduction.text"),content:t("Content.e2DefReduction.content"),disabled:e<2},e6UltDmgBoost:{id:"e6UltDmgBoost",formItem:"switch",text:t("Content.e6UltDmgBoost.text"),content:t("Content.e6UltDmgBoost.content"),disabled:e<6}},U={e2DefReduction:N.e2DefReduction};return{activeAbilities:[z.BASIC,z.SKILL,z.ULT],content:()=>Object.values(N),teammateContent:()=>Object.values(U),defaults:()=>L,teammateDefaults:()=>v,precomputeEffects:(F,P,T)=>{const y=P.characterConditionals;return F.CD.buff(y.enemyFrozen?.3:0,h),F.ELEMENTAL_DMG.buff(e>=6&&y.e6UltDmgBoost?.3:0,O),F.BASIC_ATK_SCALING.buff(H,l),F.SKILL_ATK_SCALING.buff(_,c),F.ULT_ATK_SCALING.buff(A*y.ultHitsOnTarget,u),F.BASIC_TOUGHNESS_DMG.buff(10,l),F.SKILL_TOUGHNESS_DMG.buff(20,c),F.ULT_TOUGHNESS_DMG.buff(10+5*(y.ultHitsOnTarget-1),u),F},precomputeMutualEffects:(F,P,T)=>{const y=P.characterConditionals;F.DEF_PEN.buffTeam(e>=2&&y.e2DefReduction?.16:0,M)},finalizeCalculations:(F,P,T)=>{},gpuFinalizeCalculations:()=>""}},w1=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Characters.Rappa"),{basic:s,skill:o,ult:r,talent:l}=pe.SKILL_TALENT_3_ULT_BASIC_5,{SOURCE_BASIC:c,SOURCE_SKILL:u,SOURCE_ULT:d,SOURCE_TALENT:m,SOURCE_TECHNIQUE:h,SOURCE_TRACE:g,SOURCE_MEMO:C,SOURCE_E1:M,SOURCE_E2:x,SOURCE_E4:O,SOURCE_E6:H}=w.character("1317"),_=s(e,1,1.1),A=s(e,2,2.32),L=o(e,1.2,1.32),v=r(e,.3,.34),N=l(e,.6,.66),U=l(e,.5,.55),F=e>=6?15:10,P={teammateBreakVulnerability:.1,e4SpdBuff:!0},T={sealformActive:!0,atkToBreakVulnerability:!0,chargeStacks:e>=6?10:5,e1DefPen:!0,e2Buffs:!0,e4SpdBuff:!0},y={sealformActive:{id:"sealformActive",formItem:"switch",text:t("Content.sealformActive.text"),content:t("Content.sealformActive.content",{ultBeBuff:b.precisionRound(100*v)})},atkToBreakVulnerability:{id:"atkToBreakVulnerability",formItem:"switch",text:t("Content.atkToBreakVulnerability.text"),content:t("Content.atkToBreakVulnerability.content")},chargeStacks:{id:"chargeStacks",formItem:"slider",text:t("Content.chargeStacks.text"),content:t("Content.chargeStacks.content",{talentChargeMultiplier:b.precisionRound(100*U)}),min:0,max:F},e1DefPen:{id:"e1DefPen",formItem:"switch",text:t("Content.e1DefPen.text"),content:t("Content.e1DefPen.content"),disabled:e<1},e2Buffs:{id:"e2Buffs",formItem:"switch",text:t("Content.e2Buffs.text"),content:t("Content.e2Buffs.content"),disabled:e<2},e4SpdBuff:{id:"e4SpdBuff",formItem:"switch",text:t("Content.e4SpdBuff.text"),content:t("Content.e4SpdBuff.content"),disabled:e<4}},p={teammateBreakVulnerability:{id:"teammateBreakVulnerability",formItem:"slider",text:t("TeammateContent.teammateBreakVulnerability.text"),content:t("TeammateContent.teammateBreakVulnerability.content"),min:0,max:.1,percent:!0},e4SpdBuff:{id:"e4SpdBuff",formItem:"switch",text:t("TeammateContent.e4SpdBuff.text"),content:t("TeammateContent.e4SpdBuff.content"),disabled:e<4}};return{activeAbilities:[z.BASIC,z.SKILL],content:()=>Object.values(y),teammateContent:()=>Object.values(p),defaults:()=>T,teammateDefaults:()=>P,initializeConfigurations:(R,I,B)=>{I.characterConditionals.sealformActive&&R.ENEMY_WEAKNESS_BROKEN.config(1,g)},precomputeEffects:(R,I,B)=>{const j=I.characterConditionals;return R.BE.buff(j.sealformActive?v:0,d),R.BREAK_EFFICIENCY_BOOST.buff(j.sealformActive?.5:0,d),R.DEF_PEN.buff(e>=1&&j.sealformActive&&j.e1DefPen?.15:0,M),R.SPD_P.buff(e>=4&&j.sealformActive&&j.e4SpdBuff?.12:0,O),R.BASIC_SUPER_BREAK_MODIFIER.buff(j.sealformActive?.6:0,g),R.BASIC_BREAK_DMG_MODIFIER.set(N+j.chargeStacks*U,m),R.BASIC_ATK_SCALING.buff(j.sealformActive?A:_,c),R.SKILL_ATK_SCALING.buff(L,u),R.BASIC_TOUGHNESS_DMG.buff(j.sealformActive?25+(2+j.chargeStacks):10,c),R.SKILL_TOUGHNESS_DMG.buff(10,u),R},precomputeMutualEffects:(R,I,B)=>{},precomputeTeammateEffects:(R,I,B)=>{const j=I.characterConditionals;ha(R,ja,j.teammateBreakVulnerability,g,It.TEAM),R.SPD_P.buffTeam(e>=4&&j.e4SpdBuff?.12:0,O)},finalizeCalculations:(R,I,B)=>{I.characterConditionals;const j=Math.floor(b.precisionRound((R.a[S.ATK]-2400)/100)),Z=Math.min(.08,Math.max(0,j)*.01)+.02;ha(R,ja,Z,g)},gpuFinalizeCalculations:(R,I)=>{const B=R.characterConditionals;return`
if (${it(B.atkToBreakVulnerability)}) {
  let atkOverStacks: f32 = floor((x.ATK - 2400) / 100);
  let buffValue: f32 = min(0.08, max(0, atkOverStacks) * 0.01) + 0.02;
  
  buffAbilityVulnerability(p_x, BREAK_DMG_TYPE, buffValue, 1);
}
      `}}},k1=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Characters.Robin"),{basic:s,skill:o,ult:r,talent:l}=pe.SKILL_ULT_3_BASIC_TALENT_5,{SOURCE_BASIC:c,SOURCE_SKILL:u,SOURCE_ULT:d,SOURCE_TALENT:m,SOURCE_TECHNIQUE:h,SOURCE_TRACE:g,SOURCE_MEMO:C,SOURCE_E1:M,SOURCE_E2:x,SOURCE_E4:O,SOURCE_E6:H}=w.character("1309"),_=o(e,.5,.55),A=l(e,.2,.23),L=r(e,.228,.2432),v=r(e,200,230),N=s(e,1,1.1),U=r(e,1.2,1.296),F={concertoActive:!0,skillDmgBuff:!0,talentCdBuff:!0,e1UltResPen:!0,e2UltSpdBuff:!1,e4TeamResBuff:!1,e6UltCDBoost:!0},P={concertoActive:!0,skillDmgBuff:!0,talentCdBuff:!0,teammateATKValue:4500,traceFuaCdBoost:!0,e1UltResPen:!0,e2UltSpdBuff:!0,e4TeamResBuff:!0},T={concertoActive:{id:"concertoActive",formItem:"switch",text:t("Content.concertoActive.text"),content:t("Content.concertoActive.content",{ultAtkBuffScalingValue:b.precisionRound(100*L),ultAtkBuffFlatValue:v,ultScaling:b.precisionRound(100*U)})},skillDmgBuff:{id:"skillDmgBuff",formItem:"switch",text:t("Content.skillDmgBuff.text"),content:t("Content.skillDmgBuff.content",{skillDmgBuffValue:b.precisionRound(100*_)})},talentCdBuff:{id:"talentCdBuff",formItem:"switch",text:t("Content.talentCdBuff.text"),content:t("Content.talentCdBuff.content",{talentCdBuffValue:b.precisionRound(100*A)})},e1UltResPen:{id:"e1UltResPen",formItem:"switch",text:t("Content.e1UltResPen.text"),content:t("Content.e1UltResPen.content"),disabled:e<1},e2UltSpdBuff:{id:"e2UltSpdBuff",formItem:"switch",text:t("TeammateContent.e2UltSpdBuff.text"),content:t("TeammateContent.e2UltSpdBuff.content"),disabled:e<2},e4TeamResBuff:{id:"e4TeamResBuff",formItem:"switch",text:t("Content.e4TeamResBuff.text"),content:t("Content.e4TeamResBuff.content"),disabled:e<4},e6UltCDBoost:{id:"e6UltCDBoost",formItem:"switch",text:t("Content.e6UltCDBoost.text"),content:t("Content.e6UltCDBoost.content"),disabled:e<6}},y={concertoActive:T.concertoActive,skillDmgBuff:T.skillDmgBuff,teammateATKValue:{id:"teammateATKValue",formItem:"slider",text:t("TeammateContent.teammateATKValue.text"),content:t("TeammateContent.teammateATKValue.content",{ultAtkBuffFlatValue:b.precisionRound(v),ultAtkBuffScalingValue:b.precisionRound(100*L)}),min:0,max:7e3},talentCdBuff:T.talentCdBuff,traceFuaCdBoost:{id:"traceFuaCdBoost",formItem:"switch",text:t("TeammateContent.traceFuaCdBoost.text"),content:t("TeammateContent.traceFuaCdBoost.content")},e1UltResPen:T.e1UltResPen,e2UltSpdBuff:T.e2UltSpdBuff,e4TeamResBuff:T.e4TeamResBuff};return{activeAbilities:[z.BASIC,z.ULT],content:()=>Object.values(T),teammateContent:()=>Object.values(y),defaults:()=>F,teammateDefaults:()=>P,precomputeEffects:(p,R,I)=>{const B=R.characterConditionals;return p.BASIC_ATK_SCALING.buff(N,c),p.ULT_ADDITIONAL_DMG_SCALING.buff(B.concertoActive?U:0,d),p.BASIC_TOUGHNESS_DMG.buff(10,c),B.concertoActive&&(p.ATK.buff(v,d),p.UNCONVERTIBLE_ATK_BUFF.buff(v,d)),p.ULT_ADDITIONAL_DMG_CR_OVERRIDE.buff(1,d),p.ULT_ADDITIONAL_DMG_CD_OVERRIDE.buff(e>=6&&B.concertoActive&&B.e6UltCDBoost?6:1.5,d),p},precomputeMutualEffects:(p,R,I)=>{const B=R.characterConditionals;p.CD.buffTeam(B.talentCdBuff?A:0,m),p.RES.buffTeam(e>=4&&B.concertoActive&&B.e4TeamResBuff?.5:0,O),p.SPD_P.buffTeam(e>=2&&B.concertoActive&&B.e2UltSpdBuff?.16:0,x),p.ELEMENTAL_DMG.buffTeam(B.skillDmgBuff?_:0,u),p.RES_PEN.buffTeam(e>=1&&B.concertoActive&&B.e1UltResPen?.24:0,M)},precomputeTeammateEffects:(p,R,I)=>{const B=R.characterConditionals,j=B.concertoActive?B.teammateATKValue*L+v:0;p.ATK.buffTeam(j,d),p.UNCONVERTIBLE_ATK_BUFF.buffTeam(j,d),Sn(p,je,B.traceFuaCdBoost&&B.concertoActive?.25:0,g,It.TEAM)},finalizeCalculations:(p,R,I)=>{_h(p)},gpuFinalizeCalculations:(p,R)=>xh(),dynamicConditionals:[{id:"RobinAtkConversionConditional",type:Qe.ABILITY,activation:ze.CONTINUOUS,dependsOn:[n.ATK],chainsTo:[n.ATK],condition:function(p,R,I){return R.characterConditionals.concertoActive},effect:function(p,R,I){ta(n.ATK,n.ATK,this,p,R,I,d,B=>B*L)},gpu:function(p,R){const I=p.characterConditionals;return aa(n.ATK,n.ATK,this,p,R,`convertibleValue * ${L}`,`${it(I.concertoActive)}`)}}]}},K1=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Characters.RuanMei"),{basic:s,skill:o,ult:r,talent:l}=pe.ULT_TALENT_3_SKILL_BASIC_5,{SOURCE_BASIC:c,SOURCE_SKILL:u,SOURCE_ULT:d,SOURCE_TALENT:m,SOURCE_TECHNIQUE:h,SOURCE_TRACE:g,SOURCE_MEMO:C,SOURCE_E1:M,SOURCE_E2:x,SOURCE_E4:O,SOURCE_E6:H}=w.character("1303"),_=r(e,.25,.27),A=s(e,1,1.1),L=o(e,.32,.352),v=l(e,.1,.104),N={skillOvertoneBuff:!0,teamBEBuff:!0,ultFieldActive:!0,e2AtkBoost:!1,e4BeBuff:!1},U={skillOvertoneBuff:!0,teamSpdBuff:!0,teamBEBuff:!0,ultFieldActive:!0,e2AtkBoost:!1,teamDmgBuff:.36},F={skillOvertoneBuff:{id:"skillOvertoneBuff",formItem:"switch",text:t("Content.skillOvertoneBuff.text"),content:t("Content.skillOvertoneBuff.content",{skillScaling:b.precisionRound(100*L)})},teamBEBuff:{id:"teamBEBuff",formItem:"switch",text:t("Content.teamBEBuff.text"),content:t("Content.teamBEBuff.content")},ultFieldActive:{id:"ultFieldActive",formItem:"switch",text:t("Content.ultFieldActive.text"),content:t("Content.ultFieldActive.content",{fieldResPenValue:b.precisionRound(100*_)})},e2AtkBoost:{id:"e2AtkBoost",formItem:"switch",text:t("Content.e2AtkBoost.text"),content:t("Content.e2AtkBoost.content"),disabled:e<2},e4BeBuff:{id:"e4BeBuff",formItem:"switch",text:t("Content.e4BeBuff.text"),content:t("Content.e4BeBuff.content"),disabled:e<4}},P={skillOvertoneBuff:F.skillOvertoneBuff,teamSpdBuff:{id:"teamSpdBuff",formItem:"switch",text:t("TeammateContent.teamSpdBuff.text"),content:t("TeammateContent.teamSpdBuff.content",{talentSpdScaling:b.precisionRound(100*v)})},teamBEBuff:F.teamBEBuff,teamDmgBuff:{id:"teamDmgBuff",formItem:"slider",text:t("TeammateContent.teamDmgBuff.text"),content:t("TeammateContent.teamDmgBuff.content"),min:0,max:.36,percent:!0},ultFieldActive:F.ultFieldActive,e2AtkBoost:F.e2AtkBoost};return{activeAbilities:[z.BASIC],content:()=>Object.values(F),teammateContent:()=>Object.values(P),defaults:()=>N,teammateDefaults:()=>U,precomputeEffects:(T,y,p)=>{const R=y.characterConditionals;return T.ATK_P.buff(e>=2&&R.e2AtkBoost?.4:0,x),T.BE.buff(e>=4&&R.e4BeBuff?1:0,O),T.BASIC_ATK_SCALING.buff(A,c),T.BASIC_TOUGHNESS_DMG.buff(10,c),T},precomputeMutualEffects:(T,y,p)=>{const R=y.characterConditionals;T.BE.buffTeam(R.teamBEBuff?.2:0,g),T.ELEMENTAL_DMG.buffTeam(R.skillOvertoneBuff?L:0,u),T.BREAK_EFFICIENCY_BOOST.buffTeam(R.skillOvertoneBuff?.5:0,u),T.RES_PEN.buffTeam(R.ultFieldActive?_:0,d),T.DEF_PEN.buffTeam(e>=1&&R.ultFieldActive?.2:0,M)},precomputeTeammateEffects:(T,y,p)=>{const R=y.characterConditionals;T.SPD_P.buffTeam(R.teamSpdBuff?v:0,m),T.ELEMENTAL_DMG.buffTeam(R.teamDmgBuff,g),T.ATK_P_BOOST.buffTeam(e>=2&&R.e2AtkBoost?.4:0,x)},finalizeCalculations:(T,y,p)=>{y.characterConditionals;const R=Math.floor(b.precisionRound((T.a[S.BE]*100-120)/10)),I=Math.min(.36,Math.max(0,R)*.06);T.ELEMENTAL_DMG.buff(I,g)},gpuFinalizeCalculations:()=>`
let beOver = (x.BE * 100 - 120) / 10;
let buffValue: f32 = min(0.36, floor(max(0, beOver)) * 0.06);
x.ELEMENTAL_DMG += buffValue;
      `}},N1=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Characters.Sparkle"),{basic:s,skill:o,ult:r,talent:l}=pe.SKILL_BASIC_3_ULT_TALENT_5,{SOURCE_BASIC:c,SOURCE_SKILL:u,SOURCE_ULT:d,SOURCE_TALENT:m,SOURCE_TECHNIQUE:h,SOURCE_TRACE:g,SOURCE_MEMO:C,SOURCE_E1:M,SOURCE_E2:x,SOURCE_E4:O,SOURCE_E6:H}=w.character("1306"),_=o(e,.24,.264),A=o(e,.45,.486),L=r(e,.1,.108),v=l(e,.06,.066),N=s(e,1,1.1),U={0:0,1:.05,2:.15,3:.3,4:.3},F={skillCdBuff:!1,cipherBuff:!0,talentStacks:3,quantumAlliesAtkBuff:!0},P={...F,skillCdBuff:!0,teammateCDValue:2.5},T={skillCdBuff:{id:"skillCdBuff",formItem:"switch",text:t("Content.skillCdBuff.text"),content:t("Content.skillCdBuff.content",{skillCdBuffScaling:b.precisionRound(100*_),skillCdBuffBase:b.precisionRound(100*A)})},cipherBuff:{id:"cipherBuff",formItem:"switch",text:t("Content.cipherBuff.text"),content:t("Content.cipherBuff.content",{cipherTalentStackBoost:b.precisionRound(100*L)})},talentStacks:{id:"talentStacks",formItem:"slider",text:t("Content.talentStacks.text"),content:t("Content.talentStacks.content",{talentBaseStackBoost:b.precisionRound(100*v)}),min:0,max:3},quantumAlliesAtkBuff:{id:"quantumAlliesAtkBuff",formItem:"switch",text:t("Content.quantumAlliesAtkBuff.text"),content:t("Content.quantumAlliesAtkBuff.content")}},y={skillCdBuff:T.skillCdBuff,teammateCDValue:{id:"teammateCDValue",formItem:"slider",text:t("TeammateContent.teammateCDValue.text"),content:t("TeammateContent.teammateCDValue.content",{skillCdBuffScaling:b.precisionRound(100*_),skillCdBuffBase:b.precisionRound(100*A)}),min:0,max:3.5,percent:!0},cipherBuff:T.cipherBuff,talentStacks:T.talentStacks,quantumAlliesAtkBuff:T.quantumAlliesAtkBuff};return{activeAbilities:[z.BASIC],content:()=>Object.values(T),teammateContent:()=>Object.values(y),defaults:()=>F,teammateDefaults:()=>P,precomputeEffects:(p,R,I)=>{const B=R.characterConditionals;p.BASIC_ATK_SCALING.buff(N,c),p.BASIC_TOUGHNESS_DMG.buff(10,c),B.skillCdBuff&&(p.CD.buff(A,u),p.UNCONVERTIBLE_CD_BUFF.buff(A,u))},precomputeMutualEffects:(p,R,I)=>{const B=R.characterConditionals;p.ATK_P.buffTeam(.15,g),p.ATK_P.buffDual(I.element==Eo.Quantum&&B.quantumAlliesAtkBuff?U[fh(I,Eo.Quantum)]:0,g),p.ATK_P.buffTeam(e>=1&&B.cipherBuff?.4:0,M),p.ELEMENTAL_DMG.buffTeam(B.cipherBuff?B.talentStacks*(v+L):B.talentStacks*v,m),p.DEF_PEN.buffTeam(e>=2?.08*B.talentStacks:0,x)},precomputeTeammateEffects:(p,R,I)=>{const B=R.characterConditionals,j=B.skillCdBuff?A+(_+(e>=6?.3:0))*B.teammateCDValue:0;e>=6?(p.CD.buffTeam(j,u),p.UNCONVERTIBLE_CD_BUFF.buffTeam(j,u)):(p.CD.buffSingle(j,u),p.UNCONVERTIBLE_CD_BUFF.buffSingle(j,u))},finalizeCalculations:p=>{},gpuFinalizeCalculations:()=>"",dynamicConditionals:[{id:"SparkleCdConditional",type:Qe.ABILITY,activation:ze.CONTINUOUS,dependsOn:[n.CD],chainsTo:[n.CD],condition:function(p,R,I){return R.characterConditionals.skillCdBuff},effect:function(p,R,I){ta(n.CD,n.CD,this,p,R,I,u,B=>B*(_+(e>=6?.3:0)))},gpu:function(p,R){const I=p.characterConditionals;return aa(n.CD,n.CD,this,p,R,`${_+(e>=6?.3:0)} * convertibleValue`,`${it(I.skillCdBuff)}`)}}]}},U1=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Characters.Sunday"),{basic:s,skill:o,ult:r,talent:l}=pe.ULT_BASIC_3_SKILL_TALENT_5,{SOURCE_BASIC:c,SOURCE_SKILL:u,SOURCE_ULT:d,SOURCE_TALENT:m,SOURCE_TECHNIQUE:h,SOURCE_TRACE:g,SOURCE_MEMO:C,SOURCE_E1:M,SOURCE_E2:x,SOURCE_E4:O,SOURCE_E6:H}=w.character("1313"),_=o(e,.3,.33),A=o(e,.5,.55),L=r(e,.3,.336),v=r(e,.12,.128),N=l(e,.2,.22),U=s(e,1,1.1),F={skillDmgBuff:!1,talentCrBuffStacks:0,techniqueDmgBuff:!1,e1DefPen:!1,e2DmgBuff:!1},P={skillDmgBuff:!0,talentCrBuffStacks:e<6?1:3,beatified:!0,teammateCDValue:2.5,techniqueDmgBuff:!1,e1DefPen:!0,e2DmgBuff:!0,e6CrToCdConversion:!0},T={skillDmgBuff:{id:"skillDmgBuff",formItem:"switch",text:t("Content.skillDmgBuff.text"),content:t("Content.skillDmgBuff.content",{DmgBoost:b.precisionRound(100*_),SummonDmgBoost:b.precisionRound(100*A)})},talentCrBuffStacks:{id:"talentCrBuffStacks",formItem:"slider",text:t("Content.talentCrBuffStacks.text"),content:t("Content.talentCrBuffStacks.content",{CritRateBoost:b.precisionRound(100*N)}),min:0,max:e<6?1:3},techniqueDmgBuff:{id:"techniqueDmgBuff",formItem:"switch",text:t("Content.techniqueDmgBuff.text"),content:t("Content.techniqueDmgBuff.content")},e1DefPen:{id:"e1DefPen",formItem:"switch",text:t("Content.e1DefPen.text"),content:t("Content.e1DefPen.content"),disabled:e<1},e2DmgBuff:{id:"e2DmgBuff",formItem:"switch",text:t("Content.e2DmgBuff.text"),content:t("Content.e2DmgBuff.content"),disabled:e<2}},y={skillDmgBuff:T.skillDmgBuff,talentCrBuffStacks:T.talentCrBuffStacks,beatified:{id:"beatified",formItem:"switch",text:t("TeammateContent.beatified.text"),content:t("TeammateContent.beatified.content",{CritBuffScaling:b.precisionRound(100*L),CritBuffFlat:b.precisionRound(100*v)})},teammateCDValue:{id:"teammateCDValue",formItem:"slider",text:t("TeammateContent.teammateCDValue.text"),content:t("TeammateContent.teammateCDValue.content",{CritBuffScaling:b.precisionRound(100*L),CritBuffFlat:b.precisionRound(100*v)}),min:0,max:4,percent:!0},techniqueDmgBuff:T.techniqueDmgBuff,e1DefPen:T.e1DefPen,e2DmgBuff:T.e2DmgBuff,e6CrToCdConversion:{id:"e6CrToCdConversion",formItem:"switch",text:t("TeammateContent.e6CrToCdConversion.text"),content:t("TeammateContent.e6CrToCdConversion.content"),disabled:e<6}};return{activeAbilities:[z.BASIC],content:()=>Object.values(T),teammateContent:()=>Object.values(y),defaults:()=>F,teammateDefaults:()=>P,precomputeEffects:(p,R,I)=>{p.BASIC_ATK_SCALING.buff(U,c),p.BASIC_TOUGHNESS_DMG.set(10,c)},precomputeMutualEffects:(p,R,I)=>{const B=R.characterConditionals;p.CR.buffDual(B.talentCrBuffStacks*N,m),p.ELEMENTAL_DMG.buffDual(B.skillDmgBuff?_:0,u),p.ELEMENTAL_DMG.buffDual(B.skillDmgBuff&&p.a[S.SUMMONS]>0?A:0,u),p.ELEMENTAL_DMG.buffDual(B.techniqueDmgBuff?.5:0,h),p.DEF_PEN.buffDual(e>=1&&B.e1DefPen&&B.skillDmgBuff?.16:0,M),p.DEF_PEN.buffDual(e>=1&&B.e1DefPen&&B.skillDmgBuff&&p.a[S.SUMMONS]>0?.24:0,M),p.ELEMENTAL_DMG.buffDual(e>=2&&B.e2DmgBuff?.3:0,x)},precomputeTeammateEffects:(p,R,I)=>{const B=R.characterConditionals,j=B.beatified?L*B.teammateCDValue+v:0;p.CD.buffDual(j,d),p.UNCONVERTIBLE_CD_BUFF.buffDual(j,d)},finalizeCalculations:(p,R,I)=>{},gpuFinalizeCalculations:(p,R)=>"",teammateDynamicConditionals:[{id:"SundayMemoCrConditional",type:Qe.ABILITY,activation:ze.CONTINUOUS,dependsOn:[n.CR],chainsTo:[n.CD],condition:function(p,R,I){return p.m.a[S.CR]>1},effect:function(p,R,I){const B=R.teammateCharacterConditionals;if(!(e>=6&&B.e6CrToCdConversion&&!p.a[S.DEPRIORITIZE_BUFFS]))return;const j=R.conditionalState[this.id]||0,Z=Math.floor((p.m.a[S.CR]-p.m.a[S.UNCONVERTIBLE_CR_BUFF]-1)/.01)*2*.01;R.conditionalState[this.id]=Z,p.m.CD.buffDynamic(Z-j,H,R,I),p.m.UNCONVERTIBLE_CD_BUFF.buffDynamic(Z-j,H,R,I)},gpu:function(p,R){const I=p.teammateCharacterConditionals;return Ft(this,`
if (${$i(e>=6&&I.e6CrToCdConversion)}) {
  return;
}

if (x.DEPRIORITIZE_BUFFS > 0) {
  return;
}

let cr = (*p_m).CR;
let unconvertibleCr = (*p_m).UNCONVERTIBLE_CR_BUFF;

if (cr > 1.00) {
  let buffValue: f32 = floor((cr - unconvertibleCr - 1.00) / 0.01) * 2.00 * 0.01;
  let stateValue: f32 = (*p_state).${this.id};

  (*p_state).${this.id} = buffValue;
  (*p_m).CD += buffValue - stateValue;
  (*p_m).UNCONVERTIBLE_CD_BUFF += buffValue - stateValue;
}
          `)}},{id:"SundayCrConditional",type:Qe.ABILITY,activation:ze.CONTINUOUS,dependsOn:[n.CR],chainsTo:[n.CD],condition:function(p,R,I){return p.a[S.CR]>1},effect:function(p,R,I){const B=R.teammateCharacterConditionals;if(!(e>=6&&B.e6CrToCdConversion&&!p.a[S.DEPRIORITIZE_BUFFS]))return;const j=R.conditionalState[this.id]||0,Z=Math.floor((p.a[S.CR]-p.a[S.UNCONVERTIBLE_CR_BUFF]-1)/.01)*2*.01;R.conditionalState[this.id]=Z,p.CD.buffDynamic(Z-j,H,R,I),p.UNCONVERTIBLE_CD_BUFF.buffDynamic(Z-j,H,R,I)},gpu:function(p,R){const I=p.teammateCharacterConditionals;return Ft(this,`
if (${$i(e>=6&&I.e6CrToCdConversion)}) {
  return;
}

if (x.DEPRIORITIZE_BUFFS > 0) {
  return;
}

if (x.CR > 1.00) {
  let buffValue: f32 = floor((x.CR - x.UNCONVERTIBLE_CR_BUFF - 1.00) / 0.01) * 2.00 * 0.01;
  let stateValue: f32 = (*p_state).${this.id};

  (*p_state).${this.id} = buffValue;
  (*p_x).CD += buffValue - stateValue;
  (*p_x).UNCONVERTIBLE_CD_BUFF += buffValue - stateValue;
}
    `)}}]}},j1=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Characters.Aglaea"),s=b.wrappedFixedT(a).get(null,"conditionals","Common.BuffPriority"),{basic:o,skill:r,ult:l,talent:c,memoSkill:u,memoTalent:d}=pe.SKILL_BASIC_MEMO_TALENT_3_ULT_TALENT_MEMO_SKILL_5,{SOURCE_BASIC:m,SOURCE_SKILL:h,SOURCE_ULT:g,SOURCE_TALENT:C,SOURCE_TECHNIQUE:M,SOURCE_TRACE:x,SOURCE_MEMO:O,SOURCE_E1:H,SOURCE_E2:_,SOURCE_E4:A,SOURCE_E6:L}=w.character("1402"),v=o(e,1,1.1),N=o(e,2,2.2),U=l(e,.15,.16),F=c(e,.66,.704),P=c(e,720,828),T=c(e,.3,.336),y=u(e,1.1,1.21),p=d(e,55,57.2),R=e>=4?7:6,I={buffPriority:Na,supremeStanceState:!0,seamStitch:!0,memoSpdStacks:R,e1Vulnerability:!0,e2DefShredStacks:3,e6Buffs:!0},B={seamStitch:!0,e1Vulnerability:!0},j={buffPriority:{id:"buffPriority",formItem:"select",text:s("Text"),content:s("Content"),options:[{display:s("Self"),value:Na,label:s("Self")},{display:s("Memo"),value:ii,label:s("Memo")}],fullWidth:!0},supremeStanceState:{id:"supremeStanceState",formItem:"switch",text:t("Content.supremeStanceState.text"),content:t("Content.supremeStanceState.content",{SpdBuff:b.precisionRound(U*100)})},seamStitch:{id:"seamStitch",formItem:"switch",text:t("Content.seamStitch.text"),content:t("Content.seamStitch.content",{Scaling:b.precisionRound(T*100)})},memoSpdStacks:{id:"memoSpdStacks",formItem:"slider",text:t("Content.memoSpdStacks.text"),content:t("Content.memoSpdStacks.content",{SpdBuff:p,StackLimit:R}),min:0,max:R},e1Vulnerability:{id:"e1Vulnerability",formItem:"switch",text:t("Content.e1Vulnerability.text"),content:t("Content.e1Vulnerability.content"),disabled:e<1},e2DefShredStacks:{id:"e2DefShredStacks",formItem:"slider",text:t("Content.e2DefShredStacks.text"),content:t("Content.e2DefShredStacks.content"),min:1,max:3,disabled:e<2},e6Buffs:{id:"e6Buffs",formItem:"switch",text:t("Content.e6Buffs.text"),content:t("Content.e6Buffs.content"),disabled:e<6}},Z={seamStitch:j.seamStitch,e1Vulnerability:j.e1Vulnerability};return{activeAbilities:[z.BASIC,z.MEMO_SKILL],content:()=>Object.values(j),teammateContent:()=>Object.values(Z),defaults:()=>I,teammateDefaults:()=>B,initializeConfigurations:(K,X,te)=>{const ae=X.characterConditionals;K.SUMMONS.set(1,C),K.MEMOSPRITE.set(1,C),K.MEMO_BUFF_PRIORITY.set(ae.buffPriority==Na?Na:ii,C)},precomputeEffects:(K,X,te)=>{const ae=X.characterConditionals;K.BASIC_ATK_SCALING.buff(ae.supremeStanceState?N:v,m),K.m.BASIC_ATK_SCALING.buff(N,O),K.SPD_P.buff(ae.supremeStanceState?U*ae.memoSpdStacks:0,g),K.MEMO_BASE_HP_SCALING.buff(F,O),K.MEMO_BASE_HP_FLAT.buff(P,O),K.MEMO_BASE_SPD_SCALING.buff(.35,O),K.MEMO_BASE_DEF_SCALING.buff(1,O),K.MEMO_BASE_ATK_SCALING.buff(1,O),K.BASIC_ADDITIONAL_DMG_SCALING.buff(ae.seamStitch?T:0,C),K.m.MEMO_SKILL_ATK_SCALING.buff(y,O),K.m.SPD.buff(ae.memoSpdStacks*p,O),K.DEF_PEN.buff(e>=2?.14*ae.e2DefShredStacks:0,_),K.m.DEF_PEN.buff(e>=2?.14*ae.e2DefShredStacks:0,_),K.LIGHTNING_RES_PEN.buff(e>=6&&ae.e6Buffs&&ae.supremeStanceState?.2:0,L),K.m.LIGHTNING_RES_PEN.buff(e>=6&&ae.e6Buffs&&ae.supremeStanceState?.2:0,L),K.BASIC_TOUGHNESS_DMG.buff(ae.supremeStanceState?20:10,m),K.m.MEMO_SKILL_TOUGHNESS_DMG.buff(10,O)},precomputeMutualEffects:(K,X,te)=>{const ae=X.characterConditionals;K.VULNERABILITY.buffTeam(e>=1&&ae.seamStitch&&ae.e1Vulnerability?.15:0,H)},finalizeCalculations:(K,X,te)=>{const ae=X.characterConditionals;if(e>=6&&ae.supremeStanceState&&ae.e6Buffs){let Te=0;K.a[S.SPD]>320||K.m.a[S.SPD]>=320?Te=.6:K.a[S.SPD]>240||K.m.a[S.SPD]>=240?Te=.3:(K.a[S.SPD]>160||K.m.a[S.SPD]>=160)&&(Te=.1),K.BASIC_DMG_BOOST.buff(Te,L),K.m.BASIC_DMG_BOOST.buff(Te,L)}qu(K)},gpuFinalizeCalculations:(K,X)=>{const te=K.characterConditionals;return`
if (${it(e>=6&&te.supremeStanceState&&te.e6Buffs)}) {
  if (x.SPD > 320 || m.SPD > 320) {
    x.BASIC_DMG_BOOST += 0.60;
    m.BASIC_DMG_BOOST += 0.60;
  } else if (x.SPD > 240 || m.SPD > 240) {
    x.BASIC_DMG_BOOST += 0.30;
    m.BASIC_DMG_BOOST += 0.30;
  } else if (x.SPD > 160 || m.SPD > 160) {
    x.BASIC_DMG_BOOST += 0.10;
    m.BASIC_DMG_BOOST += 0.10;
  }
}

${Ah()}
`},dynamicConditionals:[{id:"AglaeaConversionConditional",type:Qe.ABILITY,activation:ze.CONTINUOUS,dependsOn:[n.SPD],chainsTo:[n.ATK],condition:function(K,X,te){return!0},effect:function(K,X,te){if(!X.characterConditionals.supremeStanceState)return;const Te=X.conditionalState[this.id]||0,Ke=7.2*K.a[S.SPD]+3.6*K.m.a[S.SPD];X.conditionalState[this.id]=Ke,K.ATK.buffDynamic(Ke-Te,x,X,te),K.m.ATK.buffDynamic(Ke-Te,x,X,te)},gpu:function(K,X){const te=K.characterConditionals;return Ft(this,`
if (${$i(te.supremeStanceState)}) {
  return;
}
let spd = x.SPD;
let memoSpd = (*p_m).SPD;
let stateValue: f32 = (*p_state).AglaeaConversionConditional;
let buffValue: f32 = 7.20 * spd + 3.60 * memoSpd;

(*p_state).AglaeaConversionConditional = buffValue;
(*p_x).ATK += buffValue - stateValue;
(*p_m).ATK += buffValue - stateValue;
    `)}}]}},W1=(e,a)=>{b.wrappedFixedT(a).get(null,"conditionals","Common.BuffPriority");const{basic:t,skill:s,ult:o,talent:r}=pe.ULT_BASIC_3_SKILL_TALENT_5,{SOURCE_BASIC:l,SOURCE_SKILL:c,SOURCE_ULT:u,SOURCE_TALENT:d,SOURCE_TECHNIQUE:m,SOURCE_TRACE:h,SOURCE_MEMO:g,SOURCE_E1:C,SOURCE_E2:M,SOURCE_E4:x,SOURCE_E6:O}=w.character("1405"),H=t(e,1,1.1),_=s(e,.8,.88),A=o(e,2,2.1),L=r(e,.3,.324),v={skillHits:4,exposedNature:!0,eruditionTeammateBuffs:!0,enemyWeaknessTypes:7,e1DefPen:!0,e2ResPen:!0,e4AtkBuffStacks:2,e6Buffs:!0},N={eruditionTeammateBuffs:!0,e1DefPen:!0,e2ResPen:!0,e6Buffs:!0},U={skillHits:{id:"skillHits",formItem:"slider",text:"Skill additional hits",content:Y.t("BetaMessage",{ns:"conditionals",Version:ht}),min:0,max:4},exposedNature:{id:"exposedNature",formItem:"switch",text:"Exposed Nature",content:Y.t("BetaMessage",{ns:"conditionals",Version:ht})},eruditionTeammateBuffs:{id:"eruditionTeammateBuffs",formItem:"switch",text:"Erudition teammate buffs",content:Y.t("BetaMessage",{ns:"conditionals",Version:ht})},enemyWeaknessTypes:{id:"enemyWeaknessTypes",formItem:"slider",text:"Enemy weaknesses",content:Y.t("BetaMessage",{ns:"conditionals",Version:ht}),min:0,max:7},e1DefPen:{id:"e1DefPen",formItem:"switch",text:"E1 DEF PEN",content:Y.t("BetaMessage",{ns:"conditionals",Version:ht}),disabled:e<1},e2ResPen:{id:"e2ResPen",formItem:"switch",text:"E2 RES PEN",content:Y.t("BetaMessage",{ns:"conditionals",Version:ht}),disabled:e<2},e4AtkBuffStacks:{id:"e4AtkBuffStacks",formItem:"slider",text:"E4 ATK buff stacks",content:Y.t("BetaMessage",{ns:"conditionals",Version:ht}),min:0,max:2,disabled:e<4},e6Buffs:{id:"e6Buffs",formItem:"switch",text:"E6 buffs",content:Y.t("BetaMessage",{ns:"conditionals",Version:ht}),disabled:e<6}},F={eruditionTeammateBuffs:U.eruditionTeammateBuffs,e1DefPen:U.e1DefPen,e2ResPen:U.e2ResPen,e6Buffs:U.e6Buffs};return{activeAbilities:[z.BASIC,z.SKILL,z.ULT],content:()=>Object.values(U),teammateContent:()=>Object.values(F),defaults:()=>v,teammateDefaults:()=>N,initializeConfigurations:(P,T,y)=>{T.characterConditionals},precomputeEffects:(P,T,y)=>{const p=T.characterConditionals;P.BASIC_ATK_SCALING.buff(H,l),P.SKILL_ATK_SCALING.buff(_*(1+p.skillHits),c),P.ULT_ATK_SCALING.buff(A,u),P.SKILL_DMG_BOOST.buff(y.enemyCount*.2,c),P.DEF_PEN.buff(p.enemyWeaknessTypes*.04,h),P.ELEMENTAL_DMG.buff(p.exposedNature?L:0,d),P.ATK_P.buff(e>=4?p.e4AtkBuffStacks*.3:0,x),P.FINAL_DMG_BOOST.buff(e>=6&&p.e6Buffs?.3:0,O);const R=ci(y,Pa.Erudition);P.CD.buff(p.eruditionTeammateBuffs&&R==1||e>=6&&p.e6Buffs?1.4:0,h),P.BASIC_TOUGHNESS_DMG.buff(10,l),P.SKILL_TOUGHNESS_DMG.buff(10+p.skillHits*10,c),P.ULT_TOUGHNESS_DMG.buff(20,u)},precomputeMutualEffects:(P,T,y)=>{const p=T.characterConditionals,R=ci(y,Pa.Erudition);P.ELEMENTAL_DMG.buff(p.eruditionTeammateBuffs&&R>=2||e>=6&&p.e6Buffs?.4:0,h),P.DEF_PEN.buff(e>=1&&p.e1DefPen?.16:0,C),P.RES_PEN.buffTeam(e>=2&&p.e2ResPen?.2:0,M)},finalizeCalculations:P=>{},gpuFinalizeCalculations:()=>""}},V1=(e,a)=>{b.wrappedFixedT(a).get(null,"conditionals","Characters.Aglaea");const t=b.wrappedFixedT(a).get(null,"conditionals","Common.BuffPriority"),{basic:s,skill:o,ult:r,talent:l,memoSkill:c,memoTalent:u}=pe.ULT_BASIC_MEMO_TALENT_3_SKILL_TALENT_MEMO_SKILL_5,{SOURCE_BASIC:d,SOURCE_SKILL:m,SOURCE_ULT:h,SOURCE_TALENT:g,SOURCE_TECHNIQUE:C,SOURCE_TRACE:M,SOURCE_MEMO:x,SOURCE_E1:O,SOURCE_E2:H,SOURCE_E4:_,SOURCE_E6:A}=w.character("1407"),L=s(e,.5,.55),v=o(e,.5,.55),N=o(e,.3,.33),U=o(e,.5,.55),F=l(e,.2,.22),P=r(e,.2,.22),T=c(e,.24,.264),y=c(e,.28,.308),p=c(e,.34,.374),R=u(e,.4,.44),I={buffPriority:ii,memospriteActive:!0,spdBuff:!0,talentDmgStacks:3,memoSkillEnhances:3,memoTalentHits:e>=6?9:6,teamDmgBoost:!0,memoDmgStacks:3,e1EnemyHp50:!0,e6Buffs:!0},B={memospriteActive:!0,teamDmgBoost:!0},j={buffPriority:{id:"buffPriority",formItem:"select",text:t("Text"),content:t("Content"),options:[{display:t("Self"),value:Na,label:t("Self")},{display:t("Memo"),value:ii,label:t("Memo")}],fullWidth:!0},memospriteActive:{id:"memospriteActive",formItem:"switch",text:"Memosprite active",content:Y.t("BetaMessage",{ns:"conditionals",Version:ht})},spdBuff:{id:"spdBuff",formItem:"switch",text:"SPD buff",content:Y.t("BetaMessage",{ns:"conditionals",Version:ht})},teamDmgBoost:{id:"teamDmgBoost",formItem:"switch",text:"Team DMG boost",content:Y.t("BetaMessage",{ns:"conditionals",Version:ht})},talentDmgStacks:{id:"talentDmgStacks",formItem:"slider",text:"Talent DMG stacks",content:Y.t("BetaMessage",{ns:"conditionals",Version:ht}),min:0,max:3},memoSkillEnhances:{id:"memoSkillEnhances",formItem:"slider",text:"Memo Skill enhances",content:Y.t("BetaMessage",{ns:"conditionals",Version:ht}),min:1,max:3},memoDmgStacks:{id:"memoDmgStacks",formItem:"slider",text:"Memo DMG stacks",content:Y.t("BetaMessage",{ns:"conditionals",Version:ht}),min:0,max:6},memoTalentHits:{id:"memoTalentHits",formItem:"slider",text:"Memo Talent hits",content:Y.t("BetaMessage",{ns:"conditionals",Version:ht}),min:0,max:e>=6?9:6},e1EnemyHp50:{id:"e1EnemyHp50",formItem:"switch",text:"E1 Enemy HP ≤ 50%",content:Y.t("BetaMessage",{ns:"conditionals",Version:ht}),disabled:e<1},e6Buffs:{id:"e6Buffs",formItem:"switch",text:"E6 buffs",content:Y.t("BetaMessage",{ns:"conditionals",Version:ht}),disabled:e<6}},Z={memospriteActive:j.memospriteActive,teamDmgBoost:j.teamDmgBoost};return{activeAbilities:[z.BASIC,z.SKILL,z.MEMO_SKILL,z.MEMO_TALENT],content:()=>Object.values(j),teammateContent:()=>Object.values(Z),defaults:()=>I,teammateDefaults:()=>B,initializeConfigurations:(K,X,te)=>{const ae=X.characterConditionals;K.SUMMONS.set(1,g),K.MEMOSPRITE.set(1,g),K.MEMO_BUFF_PRIORITY.set(ae.buffPriority==Na?Na:ii,g)},precomputeEffects:(K,X,te)=>{const ae=X.characterConditionals;K.SPD_P.buff(ae.spdBuff?.4:0,M),K.BASIC_HP_SCALING.buff(L,d),K.SKILL_HP_SCALING.buff(ae.memospriteActive?N:v,m),K.m.SKILL_SPECIAL_SCALING.buff(ae.memospriteActive?U:0,m),K.ELEMENTAL_DMG.buffBaseDual(F*ae.talentDmgStacks,g),e>=1&&K.m.FINAL_DMG_BOOST.buff(ae.e1EnemyHp50?.4:.2,O),K.QUANTUM_RES_PEN.buffBaseDual(e>=6&&ae.e6Buffs?.2:0,A),K.MEMO_BASE_SPD_FLAT.buff(165,x),K.MEMO_BASE_HP_FLAT.buff(32e3,x),K.m.MEMO_SKILL_SPECIAL_SCALING.buff(ae.memoSkillEnhances==1?T:0,x),K.m.MEMO_SKILL_SPECIAL_SCALING.buff(ae.memoSkillEnhances==2?y:0,x),K.m.MEMO_SKILL_SPECIAL_SCALING.buff(ae.memoSkillEnhances==3?p:0,x),K.m.MEMO_TALENT_SPECIAL_SCALING.buff(ae.memoTalentHits*R,x),K.m.ELEMENTAL_DMG.buff(.3*ae.memoDmgStacks,M),K.BASIC_TOUGHNESS_DMG.buff(10,d),K.SKILL_TOUGHNESS_DMG.buff(20,d),K.m.MEMO_SKILL_TOUGHNESS_DMG.buff(10,x),K.m.MEMO_TALENT_TOUGHNESS_DMG.buff(5*ae.memoTalentHits,x)},precomputeMutualEffects:(K,X,te)=>{const ae=X.characterConditionals;K.RES_PEN.buffTeam(ae.memospriteActive?P:0,h),K.ELEMENTAL_DMG.buffTeam(ae.teamDmgBoost?.1:0,x)},finalizeCalculations:(K,X,te)=>{K.m.SKILL_DMG.buff(K.m.a[S.SKILL_SPECIAL_SCALING]*K.a[S.HP],w.NONE),K.m.MEMO_SKILL_DMG.buff(K.m.a[S.MEMO_SKILL_SPECIAL_SCALING]*K.a[S.HP],w.NONE),K.m.MEMO_TALENT_DMG.buff(K.m.a[S.MEMO_TALENT_SPECIAL_SCALING]*K.a[S.HP],w.NONE)},gpuFinalizeCalculations:(K,X)=>` 
m.SKILL_DMG += m.SKILL_SPECIAL_SCALING * x.HP;
m.MEMO_SKILL_DMG += m.MEMO_SKILL_SPECIAL_SCALING * x.HP;
m.MEMO_TALENT_DMG += m.MEMO_TALENT_SPECIAL_SCALING * x.HP;
`}},Z1=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Characters.Mydei.Content"),{basic:s,skill:o,ult:r,talent:l}=pe.SKILL_BASIC_3_ULT_TALENT_5,{SOURCE_BASIC:c,SOURCE_SKILL:u,SOURCE_ULT:d,SOURCE_TALENT:m,SOURCE_TECHNIQUE:h,SOURCE_TRACE:g,SOURCE_MEMO:C,SOURCE_E1:M,SOURCE_E2:x,SOURCE_E4:O,SOURCE_E6:H}=w.character("1404"),_=s(e,.5,.55),A=o(e,.9,.99),L=o(e,1.1,1.21),v=o(e,2.8,3.08),N=r(e,1.6,1.728),U={skillEnhances:2,vendettaState:!0,hpToCrConversion:!0,e1EnhancedSkillBuff:!0,e2DefPen:!0,e4CdBuff:!0},F={},P={skillEnhances:{id:"skillEnhances",formItem:"slider",text:t("skillEnhances.text"),content:t("skillEnhances.content",{SkillPrimaryScaling:b.precisionRound(A*100),SkillAdjacentScaling:b.precisionRound(o(e,50,55)),EnhancedSkillPrimaryScaling:b.precisionRound(L*100),EnhancedSkillAdjacentScaling:b.precisionRound(o(e,66,72.6)),EnhancedSkill2PrimaryScaling:b.precisionRound(v*100),EnhancedSkill2AdjacentScaling:b.precisionRound(o(e,168,184.8))}),min:0,max:2},vendettaState:{id:"vendettaState",formItem:"switch",text:t("vendettaState.text"),content:t("vendettaState.content",{HpRestoration:b.precisionRound(l(e,25,27))})},hpToCrConversion:{id:"hpToCrConversion",formItem:"switch",text:t("hpToCrConversion.text"),content:t("hpToCrConversion.content")},e1EnhancedSkillBuff:{id:"e1EnhancedSkillBuff",formItem:"switch",text:t("e1EnhancedSkillBuff.text"),content:t("e1EnhancedSkillBuff.content"),disabled:e<1},e2DefPen:{id:"e2DefPen",formItem:"switch",text:t("e2DefPen.text"),content:t("e2DefPen.content"),disabled:e<2},e4CdBuff:{id:"e4CdBuff",formItem:"switch",text:t("e4CdBuff.text"),content:t("e4CdBuff.content"),disabled:e<4}},T={};return{activeAbilities:[z.BASIC,z.SKILL,z.ULT],content:()=>Object.values(P),teammateContent:()=>Object.values(T),defaults:()=>U,teammateDefaults:()=>F,precomputeEffects:(y,p,R)=>{const I=p.characterConditionals;y.BASIC_HP_SCALING.buff(_,c),y.SKILL_HP_SCALING.buff(I.skillEnhances==0?A:0,u),y.SKILL_HP_SCALING.buff(I.skillEnhances==1?L:0,u),y.SKILL_HP_SCALING.buff(I.skillEnhances==2?v:0,u),y.SKILL_HP_SCALING.buff(e>=1&&I.e1EnhancedSkillBuff&&I.skillEnhances==2?.3:0,M),y.ULT_HP_SCALING.buff(N,d),y.DEF_PEN.buff(e>=2&&I.e2DefPen&&I.vendettaState?.15:0,x),y.CD.buff(e>=4&&I.e4CdBuff?.3:0,O),y.BASIC_TOUGHNESS_DMG.buff(10,c),y.SKILL_TOUGHNESS_DMG.buff(I.skillEnhances>1?30:20,u),y.ULT_TOUGHNESS_DMG.buff(20,d)},calculateBasicEffects:(y,p,R)=>{const B=p.characterConditionals.hpToCrConversion?Math.max(0,Math.min(.48,.016*Math.floor((y.c.a[S.HP]-5e3)/100))):0;y.CR.buff(B,g),y.UNCONVERTIBLE_CR_BUFF.buff(B,g)},gpuCalculateBasicEffects:(y,p)=>{const R=y.characterConditionals;return`
if (${it(R.hpToCrConversion)}) {
  let buffValue: f32 = max(0, min(0.48, 0.016 * floor((c.HP - 5000) / 100)));
  x.CR += buffValue;
  x.UNCONVERTIBLE_CR_BUFF += buffValue;
}
`},finalizeCalculations:(y,p,R)=>{p.characterConditionals.vendettaState&&y.DEF.set(0,m)},gpuFinalizeCalculations:(y,p)=>{const R=y.characterConditionals;return`
if (${it(R.vendettaState)}) {
  x.DEF = 0;
}
`},dynamicConditionals:[{id:"MydeiHpConditional",type:Qe.ABILITY,activation:ze.CONTINUOUS,dependsOn:[n.HP],chainsTo:[n.HP],condition:function(y,p,R){return p.characterConditionals.vendettaState},effect:function(y,p,R){p.characterConditionals,ta(n.HP,n.HP,this,y,p,R,m,I=>I*.5)},gpu:function(y,p){const R=y.characterConditionals;return aa(n.HP,n.HP,this,y,p,"0.50 * convertibleValue",`${it(R.vendettaState)}`)}}]}},z1=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Characters.TheHerta"),{basic:s,skill:o,ult:r,talent:l}=pe.SKILL_TALENT_3_ULT_BASIC_5,{SOURCE_BASIC:c,SOURCE_SKILL:u,SOURCE_ULT:d,SOURCE_TALENT:m,SOURCE_TECHNIQUE:h,SOURCE_TRACE:g,SOURCE_MEMO:C,SOURCE_E1:M,SOURCE_E2:x,SOURCE_E4:O,SOURCE_E6:H}=w.character("1401"),_=s(e,1,1.1),A=o(e,.7,.77),L=o(e,.8,.88),v=o(e,.4,.44),N=l(e,.08,.088),U=r(e,2,2.2),F=r(e,.8,.88),P={enhancedSkill:!0,eruditionTeammate:!0,ultAtkBuff:!0,interpretationStacks:42,totalInterpretationStacks:99,e1BonusStacks:!0,e4EruditionSpdBuff:!0,e6Buffs:!0},T={eruditionTeammate:!0,e4EruditionSpdBuff:!0},y={enhancedSkill:{id:"enhancedSkill",formItem:"switch",text:t("Content.enhancedSkill.text"),content:t("Content.enhancedSkill.content")},eruditionTeammate:{id:"eruditionTeammate",formItem:"switch",text:t("Content.eruditionTeammate.text"),content:t("Content.eruditionTeammate.content",{PrimaryScalingBonus:b.precisionRound(N*100),AdjacentScalingBonus:b.precisionRound(N*.5*100)})},ultAtkBuff:{id:"ultAtkBuff",formItem:"switch",text:t("Content.ultAtkBuff.text"),content:t("Content.ultAtkBuff.content",{AtkBuff:b.precisionRound(F*100)})},interpretationStacks:{id:"interpretationStacks",formItem:"slider",text:t("Content.interpretationStacks.text"),content:t("Content.interpretationStacks.content",{PrimaryScalingBonus:b.precisionRound(N*100),AdjacentScalingBonus:b.precisionRound(N*.5*100)}),min:1,max:42},totalInterpretationStacks:{id:"totalInterpretationStacks",formItem:"slider",text:t("Content.totalInterpretationStacks.text"),content:t("Content.totalInterpretationStacks.content"),min:1,max:99},e1BonusStacks:{id:"e1BonusStacks",formItem:"switch",text:t("Content.e1BonusStacks.text"),content:t("Content.e1BonusStacks.content"),disabled:e<1},e4EruditionSpdBuff:{id:"e4EruditionSpdBuff",formItem:"switch",text:t("Content.e4EruditionSpdBuff.text"),content:t("Content.e4EruditionSpdBuff.content"),disabled:e<4},e6Buffs:{id:"e6Buffs",formItem:"switch",text:t("Content.e6Buffs.text"),content:t("Content.e6Buffs.content"),disabled:e<6}},p={eruditionTeammate:y.eruditionTeammate,e4EruditionSpdBuff:y.e4EruditionSpdBuff};return{activeAbilities:[z.BASIC,z.SKILL,z.ULT],content:()=>Object.values(y),teammateContent:()=>Object.values(p),defaults:()=>P,teammateDefaults:()=>T,precomputeEffects:(R,I,B)=>{const j=I.characterConditionals;R.ATK_P.buff(j.ultAtkBuff?F:0,d),R.BASIC_ATK_SCALING.buff(_,c);const Z=B.enemyCount==1?4:1.4;R.ULT_ATK_SCALING.buff(U+j.totalInterpretationStacks*.01,g),R.ULT_ATK_SCALING.buff(e>=6&&j.e6Buffs?Z:0,H);const K=j.eruditionTeammate?Math.min(2,ci(B,Pa.Erudition)):1,X=N*(j.interpretationStacks+(e>=1&&j.e1BonusStacks?j.interpretationStacks*.5:0))*K;R.SKILL_ATK_SCALING.buff(j.enhancedSkill?L*3+X+v:A*3,u),R.SKILL_DMG_BOOST.buff(j.enhancedSkill&&j.interpretationStacks>=(e>=1&&j.e1BonusStacks?28:42)?.5:0,g),R.ICE_RES_PEN.buff(e>=6&&j.e6Buffs?.2:0,H),R.BASIC_TOUGHNESS_DMG.buff(10,c),R.SKILL_TOUGHNESS_DMG.buff(j.enhancedSkill?25:20,u),R.ULT_TOUGHNESS_DMG.buff(20,d)},precomputeMutualEffects:(R,I,B)=>{const j=I.characterConditionals;R.CD.buff(j.eruditionTeammate&&ci(B,Pa.Erudition)>=2?.8:0,g),R.SPD_P.buff(e>=4&&j.e4EruditionSpdBuff&&hh(B,Pa.Erudition)?.12:0,O)},precomputeTeammateEffects:(R,I,B)=>{I.characterConditionals},finalizeCalculations:(R,I,B)=>{},gpuFinalizeCalculations:(R,I)=>""}},X1=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Characters.Tribbie.Content"),{basic:s,skill:o,ult:r,talent:l}=pe.ULT_BASIC_3_SKILL_TALENT_5,{SOURCE_BASIC:c,SOURCE_SKILL:u,SOURCE_ULT:d,SOURCE_TALENT:m,SOURCE_TECHNIQUE:h,SOURCE_TRACE:g,SOURCE_MEMO:C,SOURCE_E1:M,SOURCE_E2:x,SOURCE_E4:O,SOURCE_E6:H}=w.character("1403"),_=s(e,.3,.33),A=o(e,.24,.264),L=r(e,.3,.33),v=r(e,.3,.33),N=r(e,.12,.132),U=l(e,.18,.198),F={numinosity:!0,ultZone:!0,alliesMaxHp:25e3,talentFuaStacks:3,e1TrueDmg:!0,e2AdditionalDmg:!0,e4DefPen:!0,e6FuaScaling:!0},P={numinosity:!0,ultZone:!0,e1TrueDmg:!0,e4DefPen:!0},T={numinosity:{id:"numinosity",formItem:"switch",text:t("numinosity.text"),content:t("numinosity.content",{ResPen:b.precisionRound(A*100)})},ultZone:{id:"ultZone",formItem:"switch",text:t("ultZone.text"),content:t("ultZone.content",{UltScaling:b.precisionRound(100*L),ZoneVulnerability:b.precisionRound(100*v),AdditionalDmgScaling:b.precisionRound(100*N)})},alliesMaxHp:{id:"alliesMaxHp",formItem:"slider",text:t("alliesMaxHp.text"),content:t("alliesMaxHp.content"),min:0,max:5e4},talentFuaStacks:{id:"talentFuaStacks",formItem:"slider",text:t("talentFuaStacks.text"),content:t("talentFuaStacks.content"),min:0,max:3},e1TrueDmg:{id:"e1TrueDmg",formItem:"switch",text:t("e1TrueDmg.text"),content:t("e1TrueDmg.content"),disabled:e<1},e2AdditionalDmg:{id:"e2AdditionalDmg",formItem:"switch",text:t("e2AdditionalDmg.text"),content:t("e2AdditionalDmg.content"),disabled:e<2},e4DefPen:{id:"e4DefPen",formItem:"switch",text:t("e4DefPen.text"),content:t("e4DefPen.content"),disabled:e<4},e6FuaScaling:{id:"e6FuaScaling",formItem:"switch",text:t("e6FuaScaling.text"),content:t("e6FuaScaling.content"),disabled:e<6}},y={numinosity:T.numinosity,ultZone:T.ultZone,e1TrueDmg:T.e1TrueDmg,e4DefPen:T.e4DefPen};return{activeAbilities:[z.BASIC,z.ULT,z.FUA],content:()=>Object.values(T),teammateContent:()=>Object.values(y),defaults:()=>F,teammateDefaults:()=>P,precomputeEffects:(p,R,I)=>{const B=R.characterConditionals;p.BASIC_HP_SCALING.buff(_,c),p.ULT_HP_SCALING.buff(L,d),p.FUA_HP_SCALING.buff(U,m);const j=(B.ultZone?N:0)*(e>=2&&B.e2AdditionalDmg?1.2*2:1);p.BASIC_ADDITIONAL_DMG_SCALING.buff(j,d),p.ULT_ADDITIONAL_DMG_SCALING.buff(j,d),p.FUA_ADDITIONAL_DMG_SCALING.buff(j,d),p.ELEMENTAL_DMG.buff(B.talentFuaStacks*.72,g),p.FUA_DMG_BOOST.buff(e>=6&&B.e6FuaScaling?7.29:0,H),p.HP.buff(B.ultZone?.09*B.alliesMaxHp:0,g),p.BASIC_TOUGHNESS_DMG.buff(10,c),p.ULT_TOUGHNESS_DMG.buff(20,d),p.FUA_TOUGHNESS_DMG.buff(5,m)},precomputeMutualEffects:(p,R,I)=>{const B=R.characterConditionals;p.RES_PEN.buffTeam(B.numinosity?A:0,u),p.VULNERABILITY.buffTeam(B.ultZone?v:0,d),yh(p,Ih(qa),e>=1&&B.ultZone&&B.e1TrueDmg?.24:0,M,It.TEAM),p.DEF_PEN.buffTeam(e>=4&&B.numinosity&&B.e4DefPen?.18:0,O)},finalizeCalculations:(p,R,I)=>{Lh(p),Oh(p),vh(p)},gpuFinalizeCalculations:(p,R)=>Hh()+Fh()+wh()}},Mc=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Characters.TrailblazerDestruction"),{basic:s,skill:o,ult:r,talent:l}=pe.SKILL_TALENT_3_ULT_BASIC_5,{SOURCE_BASIC:c,SOURCE_SKILL:u,SOURCE_ULT:d,SOURCE_TALENT:m,SOURCE_TECHNIQUE:h,SOURCE_TRACE:g,SOURCE_MEMO:C,SOURCE_E1:M,SOURCE_E2:x,SOURCE_E4:O,SOURCE_E6:H}=w.character("8002"),_=l(e,.2,.22),A=s(e,1,1.1),L=o(e,1.25,1.375),v=r(e,4.5,4.8),N=r(e,2.7,2.88),U=r(e,1.62,1.728),F={enhancedUlt:!0,talentStacks:2},P={enhancedUlt:{id:"enhancedUlt",formItem:"switch",text:t("Content.enhancedUlt.text"),content:t("Content.enhancedUlt.content",{ultScaling:b.precisionRound(100*v),ultEnhancedScaling:b.precisionRound(100*N),ultEnhancedScaling2:b.precisionRound(100*U)})},talentStacks:{id:"talentStacks",formItem:"slider",text:t("Content.talentStacks.text"),content:t("Content.talentStacks.content",{talentAtkScalingValue:b.precisionRound(100*_)}),min:0,max:2}};return{activeAbilities:[z.BASIC,z.SKILL,z.ULT],content:()=>Object.values(P),defaults:()=>F,precomputeEffects:(T,y,p)=>{const R=y.characterConditionals;return T.ATK_P.buff(R.talentStacks*_,m),T.DEF_P.buff(R.talentStacks*.1,g),T.CR.buff(e>=4&&T.a[S.ENEMY_WEAKNESS_BROKEN]?.25:0,O),T.BASIC_ATK_SCALING.buff(A,c),T.SKILL_ATK_SCALING.buff(L,u),T.ULT_ATK_SCALING.buff(R.enhancedUlt?N:v,d),Ee(T,Me,.25,g),Ee(T,ye,R.enhancedUlt?.25:0,g),T.BASIC_TOUGHNESS_DMG.buff(10,c),T.SKILL_TOUGHNESS_DMG.buff(20,u),T.ULT_TOUGHNESS_DMG.buff(R.enhancedUlt?20:30,d),T},finalizeCalculations:T=>{},gpuFinalizeCalculations:()=>""}},Gc=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Characters.TrailblazerHarmony"),{basic:s,skill:o,ult:r}=pe.SKILL_TALENT_3_ULT_BASIC_5,{SOURCE_BASIC:l,SOURCE_SKILL:c,SOURCE_ULT:u,SOURCE_TALENT:d,SOURCE_TECHNIQUE:m,SOURCE_TRACE:h,SOURCE_MEMO:g,SOURCE_E1:C,SOURCE_E2:M,SOURCE_E4:x,SOURCE_E6:O}=w.character("8006"),H=s(e,1,1.1),_=o(e,.5,.55),A=r(e,.3,.33),L=e>=6?6:4,v={1:1.6,3:1.4,5:1.2},N={skillHitsOnTarget:L,backupDancer:!0,superBreakDmg:!0,e2EnergyRegenBuff:!1},U={backupDancer:!0,superBreakDmg:!0,teammateBeValue:2},F={backupDancer:{id:"backupDancer",formItem:"switch",text:t("Content.backupDancer.text"),content:t("Content.backupDancer.content",{ultBeScaling:b.precisionRound(100*A)})},superBreakDmg:{id:"superBreakDmg",formItem:"switch",text:t("Content.superBreakDmg.text"),content:t("Content.superBreakDmg.content")},skillHitsOnTarget:{id:"skillHitsOnTarget",formItem:"slider",text:t("Content.skillHitsOnTarget.text"),content:t("Content.skillHitsOnTarget.content"),min:0,max:L},e2EnergyRegenBuff:{id:"e2EnergyRegenBuff",formItem:"switch",text:t("Content.e2EnergyRegenBuff.text"),content:t("Content.e2EnergyRegenBuff.content"),disabled:e<2}},P={backupDancer:F.backupDancer,superBreakDmg:F.superBreakDmg,teammateBeValue:{id:"teammateBeValue",formItem:"slider",text:t("TeammateContent.teammateBeValue.text"),content:t("TeammateContent.teammateBeValue.content"),min:0,max:4,percent:!0,disabled:e<4}};return{activeAbilities:[z.BASIC,z.SKILL],content:()=>Object.values(F),teammateContent:()=>Object.values(P),defaults:()=>N,teammateDefaults:()=>U,initializeConfigurations:(T,y,p)=>{y.characterConditionals.superBreakDmg&&T.ENEMY_WEAKNESS_BROKEN.config(1,u)},initializeTeammateConfigurations:(T,y,p)=>{y.characterConditionals.superBreakDmg&&T.ENEMY_WEAKNESS_BROKEN.config(1,u)},precomputeEffects:(T,y,p)=>{const R=y.characterConditionals;return T.ERR.buff(e>=2&&R.e2EnergyRegenBuff?.25:0,M),T.BASIC_ATK_SCALING.buff(H,l),T.SKILL_ATK_SCALING.buff(_,c),T.SKILL_ATK_SCALING.buff(R.skillHitsOnTarget*_,c),T.BASIC_TOUGHNESS_DMG.buff(10,l),T.SKILL_TOUGHNESS_DMG.buff(10*R.skillHitsOnTarget,c),T},precomputeMutualEffects:(T,y,p)=>{const R=y.characterConditionals;T.BE.buffTeam(R.backupDancer?A:0,u),T.SUPER_BREAK_MODIFIER.buffTeam(R.backupDancer&&R.superBreakDmg?v[p.enemyCount]:0,u)},precomputeTeammateEffects:(T,y,p)=>{const R=y.characterConditionals,I=e>=4?.15*R.teammateBeValue:0;T.BE.buffTeam(I,x),T.UNCONVERTIBLE_BE_BUFF.buffTeam(I,x)},finalizeCalculations:T=>{},gpuFinalizeCalculations:()=>""}},Pc=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Characters.TrailblazerPreservation"),{basic:s,skill:o,ult:r,talent:l}=pe.SKILL_TALENT_3_ULT_BASIC_5,{SOURCE_BASIC:c,SOURCE_SKILL:u,SOURCE_ULT:d,SOURCE_TALENT:m,SOURCE_TECHNIQUE:h,SOURCE_TRACE:g,SOURCE_MEMO:C,SOURCE_E1:M,SOURCE_E2:x,SOURCE_E4:O,SOURCE_E6:H}=w.character("8004"),_=o(e,.5,.52),A=s(e,1,1.1),L=e>=1?.25:0,v=s(e,1.35,1.463),N=e>=1?.5:0,U=r(e,1,1.1),F=r(e,1.5,1.65),P=l(e,.06,.064),T=l(e,80,89),y={enhancedBasic:!0,skillActive:!0,shieldActive:!0,e6DefStacks:3},p={skillActive:!0},R={enhancedBasic:{id:"enhancedBasic",formItem:"switch",text:t("Content.enhancedBasic.text"),content:t("Content.enhancedBasic.content",{basicEnhancedAtkScaling:b.precisionRound(100*v)})},skillActive:{id:"skillActive",formItem:"switch",text:t("Content.skillActive.text"),content:t("Content.skillActive.content",{skillDamageReductionValue:b.precisionRound(100*_)})},shieldActive:{id:"shieldActive",formItem:"switch",text:t("Content.shieldActive.text"),content:t("Content.shieldActive.content")},e6DefStacks:{id:"e6DefStacks",formItem:"slider",text:t("Content.e6DefStacks.text"),content:t("Content.e6DefStacks.content"),min:0,max:3,disabled:e<6}},I={skillActive:R.skillActive};return{activeAbilities:[z.BASIC,z.ULT],content:()=>Object.values(R),teammateContent:()=>Object.values(I),defaults:()=>y,teammateDefaults:()=>p,precomputeEffects:(B,j,Z)=>{const K=j.characterConditionals;return B.DEF_P.buff(e>=6?K.e6DefStacks*.1:0,H),B.ATK_P.buff(K.shieldActive?.15:0,g),K.enhancedBasic?(B.BASIC_ATK_SCALING.buff(v,c),B.BASIC_DEF_SCALING.buff(N,c)):(B.BASIC_ATK_SCALING.buff(A,c),B.BASIC_DEF_SCALING.buff(L,c)),B.ULT_ATK_SCALING.buff(U,w.NONE),B.ULT_DEF_SCALING.buff(F,w.NONE),B.DMG_RED_MULTI.multiply(K.skillActive?1-_:1,u),B.BASIC_TOUGHNESS_DMG.buff(K.enhancedBasic?20:10,c),B.ULT_TOUGHNESS_DMG.buff(20,d),B.SHIELD_SCALING.buff(P,m),B.SHIELD_FLAT.buff(T,m),B},precomputeMutualEffects:(B,j,Z)=>{const K=j.characterConditionals;B.DMG_RED_MULTI.multiplyTeam(K.skillActive?1-.15:1,g)},finalizeCalculations:(B,j,Z)=>{zo(B)},gpuFinalizeCalculations:(B,j)=>Xo()}},_c=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Characters.TrailblazerRemembrance"),s=b.wrappedFixedT(a).get(null,"conditionals","Common.BuffPriority"),{basic:o,skill:r,ult:l,talent:c,memoSkill:u,memoTalent:d}=pe.SKILL_TALENT_MEMO_TALENT_3_ULT_BASIC_MEMO_SKILL_5,{SOURCE_BASIC:m,SOURCE_SKILL:h,SOURCE_ULT:g,SOURCE_TALENT:C,SOURCE_TECHNIQUE:M,SOURCE_TRACE:x,SOURCE_MEMO:O,SOURCE_E1:H,SOURCE_E2:_,SOURCE_E4:A,SOURCE_E6:L}=w.character("8008"),v=o(e,1,1.1),N=l(e,2.4,2.64),U=c(e,.8,.86),F=c(e,640,688),P=u(e,.36,.396),T=u(e,.9,.99),y=d(e,.12,.132),p=d(e,.24,.264),R=u(e,.28,.3),I={buffPriority:Na,memoSkillHits:4,teamCdBuff:!0,memsSupport:!1,energyTrueDmgValue:!1,e1CrBuff:!1,e4TrueDmgBoost:!1,e6UltCrBoost:!0},B={teamCdBuff:!0,memCDValue:2.5,memsSupport:!0,energyTrueDmgValue:!0,e1CrBuff:!0,e4TrueDmgBoost:!1},j={buffPriority:{id:"buffPriority",formItem:"select",text:s("Text"),content:s("Content"),options:[{display:s("Self"),value:Na,label:s("Self")},{display:s("Memo"),value:ii,label:s("Memo")}],fullWidth:!0},memoSkillHits:{id:"memoSkillHits",formItem:"slider",text:t("Content.memoSkillHits.text"),content:t("Content.memoSkillHits.content",{SingleScaling:b.precisionRound(P*100),AoeScaling:b.precisionRound(T*100)}),min:0,max:4},teamCdBuff:{id:"teamCdBuff",formItem:"switch",text:t("Content.teamCdBuff.text"),content:t("Content.teamCdBuff.content",{ScalingBuff:b.precisionRound(y*100),FlatBuff:b.precisionRound(p*100)})},memsSupport:{id:"memsSupport",formItem:"switch",text:t("Content.memsSupport.text"),content:t("Content.memsSupport.content",{TrueDmgScaling:b.precisionRound(R*100)})},energyTrueDmgValue:{id:"energyTrueDmgValue",formItem:"switch",text:t("Content.energyTrueDmgValue.text"),content:t("Content.energyTrueDmgValue.content")},e1CrBuff:{id:"e1CrBuff",formItem:"switch",text:t("Content.e1CrBuff.text"),content:t("Content.e1CrBuff.content"),disabled:e<1},e4TrueDmgBoost:{id:"e4TrueDmgBoost",formItem:"switch",text:t("Content.e4TrueDmgBoost.text"),content:t("Content.e4TrueDmgBoost.content"),disabled:e<4},e6UltCrBoost:{id:"e6UltCrBoost",formItem:"switch",text:t("Content.e6UltCrBoost.text"),content:t("Content.e6UltCrBoost.content"),disabled:e<6}},Z={teamCdBuff:j.teamCdBuff,memCDValue:{id:"memCDValue",formItem:"slider",text:t("TeammateContent.memCDValue.text"),content:t("TeammateContent.memCDValue.content",{ScalingBuff:b.precisionRound(y*100),FlatBuff:b.precisionRound(p*100)}),min:0,max:4,percent:!0},memsSupport:j.memsSupport,energyTrueDmgValue:j.energyTrueDmgValue,e1CrBuff:j.e1CrBuff,e4TrueDmgBoost:j.e4TrueDmgBoost};return{activeAbilities:[z.BASIC,z.ULT,z.MEMO_SKILL],content:()=>Object.values(j),teammateContent:()=>Object.values(Z),defaults:()=>I,teammateDefaults:()=>B,initializeConfigurations:(K,X,te)=>{const ae=X.characterConditionals;K.SUMMONS.set(1,C),K.MEMOSPRITE.set(1,C),K.MEMO_BUFF_PRIORITY.set(ae.buffPriority==Na?Na:ii,C)},precomputeEffects:(K,X,te)=>{const ae=X.characterConditionals;K.BASIC_ATK_SCALING.buff(v,m),K.MEMO_BASE_HP_SCALING.buff(U,O),K.MEMO_BASE_HP_FLAT.buff(F,O),K.MEMO_BASE_SPD_SCALING.buff(0,O),K.MEMO_BASE_SPD_FLAT.buff(130,O),K.MEMO_BASE_DEF_SCALING.buff(1,O),K.MEMO_BASE_ATK_SCALING.buff(1,O),K.m.MEMO_SKILL_ATK_SCALING.buff(ae.memoSkillHits*P+T,O),K.m.ULT_ATK_SCALING.buff(N,O),K.m.ULT_CR_BOOST.buff(e>=6&&ae.e6UltCrBoost?1:0,L),K.BASIC_TOUGHNESS_DMG.buff(10,m),K.ULT_TOUGHNESS_DMG.buff(20,g),K.m.MEMO_SKILL_TOUGHNESS_DMG.buff(15,O)},precomputeMutualEffects:(K,X,te)=>{const ae=X.characterConditionals;if(ae.memsSupport){const Te=Math.min(.2,ae.energyTrueDmgValue?Math.max((te.baseEnergy-100)/10,0)*2*.01:0),Ke=R+Te+(e>=4&&ae.e4TrueDmgBoost?.06:0);e>=1?(K.CR.buffDual(ae.e1CrBuff?.1:0,H),K.TRUE_DMG_MODIFIER.buffDual(Ke,O)):K.TRUE_DMG_MODIFIER.buffSingle(Ke,O)}},precomputeTeammateEffects:(K,X,te)=>{const ae=X.characterConditionals,Te=ae.teamCdBuff?y*ae.memCDValue+p:0;K.CD.buffTeam(Te,w.NONE),K.UNCONVERTIBLE_CD_BUFF.buffTeam(Te,O)},finalizeCalculations:(K,X,te)=>{},gpuFinalizeCalculations:(K,X)=>"",dynamicConditionals:[{id:"TrailblazerRemembranceCdConditional",type:Qe.ABILITY,activation:ze.CONTINUOUS,dependsOn:[n.CD],chainsTo:[n.CD],condition:function(K,X,te){return!0},effect:function(K,X,te){if(!X.characterConditionals.teamCdBuff)return;if(K.a[S.MEMOSPRITE])return this.effect(K.m,X,te);const Te=X.conditionalState[this.id]||0,Ke=K.a[S.CD]-K.a[S.UNCONVERTIBLE_CD_BUFF],Se=y*Ke+p,re=y*Te+p;X.conditionalState[this.id]=Ke;const be=Math.max(0,Se-(Te?re:0));K.UNCONVERTIBLE_CD_BUFF.buff(be,O),K.CD.buffDynamic(be,O,X,te),K.summoner().CD.buffDynamic(be,O,X,te)},gpu:function(K,X){const te=K.characterConditionals;return Ft(this,`
if (${$i(te.teamCdBuff)}) {
  return;
}

let stateValue: f32 = (*p_state).TrailblazerRemembranceCdConditional;
let convertibleCdValue: f32 = (*p_m).CD - (*p_m).UNCONVERTIBLE_CD_BUFF;

var buffCD: f32 = ${y} * convertibleCdValue + ${p};
var stateBuffCD: f32 = ${y} * stateValue + ${p};

(*p_state).TrailblazerRemembranceCdConditional = (*p_m).CD;

let finalBuffCd = max(0, buffCD - select(0, stateBuffCD, stateValue > 0));
(*p_m).UNCONVERTIBLE_CD_BUFF += finalBuffCd;

(*p_m).CD += finalBuffCd;
(*p_x).CD += finalBuffCd;
`)}}]}},el={1001:Wh,1002:Ph,1003:Uh,1004:Zh,1005:jh,1006:Vh,1008:Mh,1009:Gh,1013:Nh,1101:zh,1102:a1,1103:n1,1104:Yh,1105:qh,1106:e1,1107:Xh,1108:t1,1109:Jh,1110:$h,1111:Qh,1112:i1,1201:E1,1202:R1,1203:b1,1204:p1,1205:o1,1206:T1,1207:y1,1208:c1,1209:I1,1210:u1,1211:s1,1212:S1,1213:f1,1214:B1,1215:d1,1217:m1,1218:h1,1220:r1,1221:M1,1222:g1,1223:C1,1224:D1,1225:l1,1301:v1,1302:P1,1303:K1,1304:_1,1305:L1,1306:N1,1307:A1,1308:G1,1309:k1,1310:O1,1312:F1,1313:U1,1314:H1,1315:x1,1317:w1,1401:z1,1402:j1,1403:X1,1404:Z1,8001:Mc,8002:Mc,8003:Pc,8004:Pc,8005:Gc,8006:Gc,8007:_c,8008:_c,1405:W1,1407:V1},Ta={get:(e,a=!1)=>{const t=el[e.characterId];return t(e.characterEidolon,a)}},Y1=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.Adversarial"),{SOURCE_LC:s}=w.lightCone("20014"),o=[.1,.12,.14,.16,.18],r={defeatedEnemySpdBuff:!0},l={defeatedEnemySpdBuff:{lc:!0,id:"defeatedEnemySpdBuff",formItem:"switch",text:t("Content.defeatedEnemySpdBuff.text"),content:t("Content.defeatedEnemySpdBuff.content",{SpdBuff:b.precisionRound(100*o[e])})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,u,d)=>{const m=u.lightConeConditionals;c.SPD_P.buff(m.defeatedEnemySpdBuff?o[e]:0,s)},finalizeCalculations:()=>{}}},J1=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.Amber"),{SOURCE_LC:s}=w.lightCone("20003"),o=[.16,.2,.24,.28,.32],r={hp50DefBuff:!0},l={hp50DefBuff:{lc:!0,id:"hp50DefBuff",formItem:"switch",text:t("Content.hp50DefBuff.text"),content:t("Content.hp50DefBuff.content",{DefBuff:b.precisionRound(100*o[e])})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,u,d)=>{const m=u.lightConeConditionals;c.DEF_P.buff(m.hp50DefBuff?o[e]:0,s)},finalizeCalculations:()=>{}}},Q1=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.Arrows"),{SOURCE_LC:s}=w.lightCone("20000"),o=[.12,.15,.18,.21,.24],r={critBuff:!0},l={critBuff:{lc:!0,id:"critBuff",formItem:"switch",text:t("Content.critBuff.text"),content:t("Content.critBuff.content",{CritBuff:b.precisionRound(100*o[e])})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,u,d)=>{const m=u.lightConeConditionals;c.CR.buff(m.critBuff?o[e]:0,s)},finalizeCalculations:()=>{}}},$1=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.Chorus"),{SOURCE_LC:s}=w.lightCone("20005"),o=[.08,.09,.1,.11,.12],r={inBattleAtkBuff:!0},l={inBattleAtkBuff:{lc:!0,id:"inBattleAtkBuff",formItem:"switch",text:t("Content.inBattleAtkBuff.text"),content:t("Content.inBattleAtkBuff.content",{AtkBuff:b.precisionRound(100*o[e])})}},c={inBattleAtkBuff:l.inBattleAtkBuff};return{content:()=>Object.values(l),teammateContent:()=>Object.values(c),defaults:()=>r,teammateDefaults:()=>({inBattleAtkBuff:!0}),precomputeEffects:()=>{},precomputeMutualEffects:(u,d,m)=>{const h=d.lightConeConditionals;u.ATK_P.buffTeam(h.inBattleAtkBuff?o[e]:0,s)},finalizeCalculations:()=>{}}},q1=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.CollapsingSky"),{SOURCE_LC:s}=w.lightCone("20002"),o=[.2,.25,.3,.35,.4],r={basicSkillDmgBuff:!0},l={basicSkillDmgBuff:{lc:!0,formItem:"switch",id:"basicSkillDmgBuff",text:t("Content.basicSkillDmgBuff.text"),content:t("Content.basicSkillDmgBuff.content",{DmgBuff:b.precisionRound(100*o[e])})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,u,d)=>{const m=u.lightConeConditionals;Ee(c,Bt|Me,m.basicSkillDmgBuff?o[e]:0,s)},finalizeCalculations:()=>{}}},eS=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.Cornucopia"),{SOURCE_LC:s}=w.lightCone("20001"),o=[.12,.15,.18,.21,.24],r={healingBuff:!0},l={healingBuff:{lc:!0,id:"healingBuff",formItem:"switch",text:t("Content.healingBuff.text"),content:t("Content.healingBuff.content",{HealingBuff:b.precisionRound(100*o[e])})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,u,d)=>{const m=u.lightConeConditionals;c.SKILL_OHB.buff(m.healingBuff?o[e]:0,s),c.ULT_OHB.buff(m.healingBuff?o[e]:0,s)},finalizeCalculations:()=>{}}},tS=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.DartingArrow"),{SOURCE_LC:s}=w.lightCone("20007"),o=[.24,.3,.36,.42,.48],r={defeatedEnemyAtkBuff:!0},l={defeatedEnemyAtkBuff:{lc:!0,id:"defeatedEnemyAtkBuff",formItem:"switch",text:t("Content.defeatedEnemyAtkBuff.text"),content:t("Content.defeatedEnemyAtkBuff.content",{AtkBuff:b.precisionRound(100*o[e])})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,u,d)=>{const m=u.lightConeConditionals;c.ATK_P.buff(m.defeatedEnemyAtkBuff?o[e]:0,s)},finalizeCalculations:()=>{}}},aS=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.DataBank"),{SOURCE_LC:s}=w.lightCone("20006"),o=[.28,.35,.42,.49,.56],r={ultDmgBuff:!0},l={ultDmgBuff:{lc:!0,id:"ultDmgBuff",formItem:"switch",text:t("Content.ultDmgBuff.text"),content:t("Content.ultDmgBuff.content",{DmgBuff:b.precisionRound(100*o[e])})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,u,d)=>{const m=u.lightConeConditionals;Ee(c,ye,m.ultDmgBuff?o[e]:0,s)},finalizeCalculations:()=>{}}},nS=()=>({content:()=>[],defaults:()=>({}),precomputeEffects:()=>{},finalizeCalculations:()=>{}}),iS=()=>({content:()=>[],defaults:()=>({}),precomputeEffects:()=>{},finalizeCalculations:()=>{}}),sS=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.HiddenShadow");w.lightCone("20018");const s=[.6,.75,.9,1.05,1.2],o={basicAtkBuff:!0},r={basicAtkBuff:{lc:!0,id:"basicAtkBuff",formItem:"switch",text:t("Content.basicAtkBuff.text"),content:t("Content.basicAtkBuff.content",{MultiplierBonus:b.precisionRound(100*s[e])})}};return{content:()=>Object.values(r),defaults:()=>o,precomputeEffects:(l,c,u)=>{c.lightConeConditionals},finalizeCalculations:(l,c,u)=>{const d=c.lightConeConditionals;l.BASIC_ADDITIONAL_DMG.buff((d.basicAtkBuff?s[e]:0)*l.a[S.ATK],w.NONE)},gpuFinalizeCalculations:(l,c)=>{const u=l.lightConeConditionals;return`
if (${it(u.basicAtkBuff)}) {
  x.BASIC_ADDITIONAL_DMG += ${s[e]} * x.ATK;
}
      `}}},oS=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.Loop"),{SOURCE_LC:s}=w.lightCone("20011"),o=[.24,.3,.36,.42,.48],r={enemySlowedDmgBuff:!0},l={enemySlowedDmgBuff:{lc:!0,id:"enemySlowedDmgBuff",formItem:"switch",text:t("Content.enemySlowedDmgBuff.text"),content:t("Content.enemySlowedDmgBuff.content",{DmgBuff:b.precisionRound(100*o[e])})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,u,d)=>{const m=u.lightConeConditionals;c.ELEMENTAL_DMG.buff(m.enemySlowedDmgBuff?o[e]:0,s)},finalizeCalculations:()=>{}}},rS=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.Mediation"),{SOURCE_LC:s}=w.lightCone("20019"),o=[12,14,16,18,20],r={initialSpdBuff:!1},l={initialSpdBuff:!1},c={initialSpdBuff:{lc:!0,id:"initialSpdBuff",formItem:"switch",text:t("Content.initialSpdBuff.text"),content:t("Content.initialSpdBuff.content",{SpdBuff:o[e]})}},u={initialSpdBuff:c.initialSpdBuff};return{content:()=>Object.values(c),teammateContent:()=>Object.values(u),defaults:()=>r,teammateDefaults:()=>l,precomputeEffects:()=>{},precomputeMutualEffects:(d,m,h)=>{const g=m.lightConeConditionals;d.SPD.buffTeam(g.initialSpdBuff?o[e]:0,s)},finalizeCalculations:()=>{}}},lS=()=>({content:()=>[],defaults:()=>({}),precomputeEffects:()=>{},finalizeCalculations:()=>{}}),cS=()=>({content:()=>[],defaults:()=>({}),precomputeEffects:()=>{},finalizeCalculations:()=>{}}),uS=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.MutualDemise"),{SOURCE_LC:s}=w.lightCone("20016"),o=[.12,.15,.18,.21,.24],r={selfHp80CrBuff:!0},l={selfHp80CrBuff:{lc:!0,id:"selfHp80CrBuff",formItem:"switch",text:t("Content.selfHp80CrBuff.text"),content:t("Content.selfHp80CrBuff.content",{CritBuff:b.precisionRound(100*o[e])})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,u,d)=>{const m=u.lightConeConditionals;c.CR.buff(m.selfHp80CrBuff?o[e]:0,s)},finalizeCalculations:()=>{}}},dS=()=>({content:()=>[],defaults:()=>({}),precomputeEffects:()=>{},finalizeCalculations:()=>{}}),mS=()=>({content:()=>[],defaults:()=>({}),precomputeEffects:()=>{},finalizeCalculations:()=>{}}),fS=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.Reminiscence"),{SOURCE_LC:s}=w.lightCone("20022"),o=[.08,.09,.1,.11,.12],r={dmgStacks:4},l={dmgStacks:{lc:!0,id:"dmgStacks",formItem:"slider",text:t("Content.dmgStacks.text"),content:t("Content.dmgStacks.content",{DmgBuff:b.precisionRound(o[e]*100)}),min:0,max:4}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,u,d)=>{const m=u.lightConeConditionals;c.ELEMENTAL_DMG.buffDual(m.dmgStacks*o[e],s)},finalizeCalculations:()=>{}}},hS=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.Sagacity"),{SOURCE_LC:s}=w.lightCone("20020"),o=[.24,.3,.36,.42,.48],r={postUltAtkBuff:!0},l={postUltAtkBuff:{lc:!0,id:"postUltAtkBuff",formItem:"switch",text:t("Content.postUltAtkBuff.text"),content:t("Content.postUltAtkBuff.content",{AtkBuff:b.precisionRound(100*o[e])})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,u,d)=>{const m=u.lightConeConditionals;c.ATK_P.buff(m.postUltAtkBuff?o[e]:0,s)},finalizeCalculations:()=>{}}},SS=()=>({content:()=>[],defaults:()=>({}),precomputeEffects:()=>{},finalizeCalculations:()=>{}}),pS=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.ShatteredHome"),{SOURCE_LC:s}=w.lightCone("20009"),o=[.2,.25,.3,.35,.4],r={enemyHp50Buff:!0},l={enemyHp50Buff:{lc:!0,id:"enemyHp50Buff",formItem:"switch",text:t("Content.enemyHp50Buff.text"),content:t("Content.enemyHp50Buff.content",{DmgBuff:b.precisionRound(100*o[e])})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,u,d)=>{const m=u.lightConeConditionals;c.ELEMENTAL_DMG.buff(m.enemyHp50Buff?o[e]:0,s)},finalizeCalculations:()=>{}}},gS=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.Void"),{SOURCE_LC:s}=w.lightCone("20004"),o=[.2,.25,0,30,.35,.4],r={initialEhrBuff:!0},l={initialEhrBuff:{lc:!0,id:"initialEhrBuff",formItem:"switch",text:t("Content.initialEhrBuff.text"),content:t("Content.initialEhrBuff.content",{EhrBuff:b.precisionRound(100*o[e])})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,u,d)=>{const m=u.lightConeConditionals;c.EHR.buff(m.initialEhrBuff?o[e]:0,s)},finalizeCalculations:()=>{}}},bS=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.AfterTheCharmonyFall"),{SOURCE_LC:s}=w.lightCone("21045"),o=[.08,.1,.12,.14,.16],r={spdBuff:!0},l={spdBuff:{lc:!0,id:"spdBuff",formItem:"switch",text:t("Content.spdBuff.text"),content:t("Content.spdBuff.content",{SpdBuff:b.precisionRound(100*o[e])})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,u,d)=>{const m=u.lightConeConditionals;c.SPD_P.buff(m.spdBuff?o[e]:0,s)},finalizeCalculations:()=>{}}},DS=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.ASecretVow"),{SOURCE_LC:s}=w.lightCone("21012"),o=[.2,.25,.3,.35,.4],r={enemyHpHigherDmgBoost:!0},l={enemyHpHigherDmgBoost:{lc:!0,id:"enemyHpHigherDmgBoost",formItem:"switch",text:t("Content.enemyHpHigherDmgBoost.text"),content:t("Content.enemyHpHigherDmgBoost.content",{DmgBuff:b.precisionRound(100*o[e])})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,u,d)=>{const m=u.lightConeConditionals;c.ELEMENTAL_DMG.buff(o[e],s),c.ELEMENTAL_DMG.buff(m.enemyHpHigherDmgBoost?o[e]:0,s)},finalizeCalculations:()=>{}}},CS=()=>({content:()=>[],defaults:()=>({}),precomputeEffects:()=>{},finalizeCalculations:()=>{}}),ES=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.BoundlessChoreo"),{SOURCE_LC:s}=w.lightCone("21044"),o=[.24,.3,.36,.42,.48],r={enemyDefReducedSlowed:!0},l={enemyDefReducedSlowed:{lc:!0,id:"enemyDefReducedSlowed",formItem:"switch",text:t("Content.enemyDefReducedSlowed.text"),content:t("Content.enemyDefReducedSlowed.content",{CritBuff:b.precisionRound(100*o[e])})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,u,d)=>{const m=u.lightConeConditionals;c.CD.buff(m.enemyDefReducedSlowed?o[e]:0,s)},finalizeCalculations:()=>{}}},TS=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.CarveTheMoonWeaveTheClouds"),{SOURCE_LC:s}=w.lightCone("21032"),o=[.1,.125,.15,.175,.2],r=[.12,.15,.18,.21,.24],l=[.06,.075,.09,.105,.12],c={atkBuffActive:!0,cdBuffActive:!1,errBuffActive:!1},u={atkBuffActive:!0,cdBuffActive:!1,errBuffActive:!1},d={atkBuffActive:{lc:!0,id:"atkBuffActive",formItem:"switch",text:t("Content.atkBuffActive.text"),content:t("Content.atkBuffActive.content",{AtkBuff:b.precisionRound(100*o[e]),CritBuff:b.precisionRound(100*r[e]),RegenBuff:b.precisionRound(100*l[e])})},cdBuffActive:{lc:!0,id:"cdBuffActive",formItem:"switch",text:t("Content.cdBuffActive.text"),content:t("Content.cdBuffActive.content",{AtkBuff:b.precisionRound(100*o[e]),CritBuff:b.precisionRound(100*r[e]),RegenBuff:b.precisionRound(100*l[e])})},errBuffActive:{lc:!0,id:"errBuffActive",formItem:"switch",text:t("Content.errBuffActive.text"),content:t("Content.errBuffActive.content",{AtkBuff:b.precisionRound(100*o[e]),CritBuff:b.precisionRound(100*r[e]),RegenBuff:b.precisionRound(100*l[e])})}},m={atkBuffActive:d.atkBuffActive,cdBuffActive:d.cdBuffActive,errBuffActive:d.errBuffActive};return{content:()=>Object.values(d),teammateContent:()=>Object.values(m),defaults:()=>c,teammateDefaults:()=>u,precomputeEffects:()=>{},precomputeMutualEffects:(h,g,C)=>{const M=g.lightConeConditionals;h.ATK_P.buffTeam(M.atkBuffActive?o[e]:0,s),h.CD.buffTeam(M.cdBuffActive?r[e]:0,s),h.ERR.buffTeam(M.errBuffActive?l[e]:0,s)},finalizeCalculations:()=>{}}},RS=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.ConcertForTwo"),{SOURCE_LC:s}=w.lightCone("21043"),o=[.04,.05,.06,.07,.08],r={teammateShieldStacks:4},l={teammateShieldStacks:{lc:!0,id:"teammateShieldStacks",formItem:"slider",text:t("Content.teammateShieldStacks.text"),content:t("Content.teammateShieldStacks.content",{DmgBuff:b.precisionRound(100*o[e])}),min:0,max:4}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,u,d)=>{const m=u.lightConeConditionals;c.ELEMENTAL_DMG.buff(m.teammateShieldStacks*o[e],s)},finalizeCalculations:()=>{}}},BS=()=>({content:()=>[],defaults:()=>({}),precomputeEffects:()=>{},finalizeCalculations:()=>{}}),IS=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.DayOneOfMyNewLife"),{SOURCE_LC:s}=w.lightCone("21002"),o=[.08,.09,.1,.11,.12],r={dmgResBuff:!0},l={dmgResBuff:!0},c={dmgResBuff:{lc:!0,id:"dmgResBuff",formItem:"switch",text:t("Content.dmgResBuff.text"),content:t("Content.dmgResBuff.content",{ResBuff:b.precisionRound(100*o[e])})}},u={dmgResBuff:c.dmgResBuff};return{content:()=>Object.values(c),teammateContent:()=>Object.values(u),defaults:()=>r,teammateDefaults:()=>l,precomputeEffects:()=>{},precomputeMutualEffects:(d,m,h)=>{const g=m.lightConeConditionals;d.DMG_RED_MULTI.multiplyTeam(g.dmgResBuff?1-o[e]:1,s)},finalizeCalculations:()=>{}}},yS=(e,a)=>{const{SOURCE_LC:t}=w.lightCone("21039"),s=[.008,.009,.01,.011,.012],o=[.32,.36,.4,.44,.48];return{content:()=>[],defaults:()=>({}),precomputeEffects:()=>{},finalizeCalculations:(r,l,c)=>{r.ELEMENTAL_DMG.buff(Math.min(o[e],Math.floor(r.a[S.DEF]/100)*s[e]),t)},gpuFinalizeCalculations:()=>`
x.ELEMENTAL_DMG += min(${o[e]}, floor(x.DEF / 100) * ${s[e]});
      `}},MS=()=>({content:()=>[],defaults:()=>({}),precomputeEffects:()=>{},finalizeCalculations:()=>{}}),GS=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.DreamvilleAdventure"),{SOURCE_LC:s}=w.lightCone("21036"),o=[.12,.14,.16,.18,.2],r={ultDmgBuff:!1,skillDmgBuff:!1,basicDmgBuff:!1},l={ultDmgBuff:!1,skillDmgBuff:!1,basicDmgBuff:!1},c={ultDmgBuff:{lc:!0,id:"ultDmgBuff",formItem:"switch",text:t("Content.ultDmgBuff.text"),content:t("Content.ultDmgBuff.content",{DmgBuff:b.precisionRound(100*o[e])})},skillDmgBuff:{lc:!0,id:"skillDmgBuff",formItem:"switch",text:t("Content.skillDmgBuff.text"),content:t("Content.skillDmgBuff.content",{DmgBuff:b.precisionRound(100*o[e])})},basicDmgBuff:{lc:!0,id:"basicDmgBuff",formItem:"switch",text:t("Content.basicDmgBuff.text"),content:t("Content.basicDmgBuff.content",{DmgBuff:b.precisionRound(100*o[e])})}},u={ultDmgBuff:c.ultDmgBuff,skillDmgBuff:c.skillDmgBuff,basicDmgBuff:c.basicDmgBuff};return{content:()=>Object.values(c),teammateContent:()=>Object.values(u),defaults:()=>r,teammateDefaults:()=>l,precomputeEffects:()=>{},precomputeMutualEffects:(d,m,h)=>{const g=m.lightConeConditionals;Ee(d,Bt,g.basicDmgBuff?o[e]:0,s,It.TEAM),Ee(d,Me,g.skillDmgBuff?o[e]:0,s,It.TEAM),Ee(d,ye,g.ultDmgBuff?o[e]:0,s,It.TEAM)},finalizeCalculations:()=>{}}},PS=(e,a)=>{const{SOURCE_LC:t}=w.lightCone("21008"),s=[.24,.3,.36,.42,.48];return{content:()=>[],defaults:()=>({}),precomputeEffects:o=>{Ee(o,qa,s[e],t)},finalizeCalculations:()=>{}}},_S=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.Fermata"),{SOURCE_LC:s}=w.lightCone("21022"),o=[.16,.2,.24,.28,.32],r={enemyShockWindShear:!0},l={enemyShockWindShear:{lc:!0,id:"enemyShockWindShear",formItem:"switch",text:t("Content.enemyShockWindShear.text"),content:t("Content.enemyShockWindShear.content",{DmgBuff:b.precisionRound(100*o[e])})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,u,d)=>{const m=u.lightConeConditionals;c.ELEMENTAL_DMG.buff(m.enemyShockWindShear?o[e]:0,s)},finalizeCalculations:()=>{}}},AS=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.FinalVictor"),{SOURCE_LC:s}=w.lightCone("21037"),o=[.08,.09,.1,.11,.12],r={goodFortuneStacks:4},l={goodFortuneStacks:{lc:!0,id:"goodFortuneStacks",formItem:"slider",text:t("Content.goodFortuneStacks.text"),content:t("Content.goodFortuneStacks.content",{CritBuff:b.precisionRound(100*o[e])}),min:0,max:4}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,u,d)=>{const m=u.lightConeConditionals;c.CD.buff(m.goodFortuneStacks*o[e],s)},finalizeCalculations:()=>{}}},xS=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.FlamesAfar"),{SOURCE_LC:s}=w.lightCone("21038"),o=[.25,.3125,.375,.4375,.5],r={dmgBuff:!0},l={dmgBuff:{lc:!0,id:"dmgBuff",formItem:"switch",text:t("Content.dmgBuff.text"),content:t("Content.dmgBuff.content",{DmgBuff:b.precisionRound(100*o[e])})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,u,d)=>{const m=u.lightConeConditionals;c.ELEMENTAL_DMG.buff(m.dmgBuff?o[e]:0,s)},finalizeCalculations:()=>{}}},LS=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.ForTomorrowsJourney"),{SOURCE_LC:s}=w.lightCone("22002"),o=[.18,.21,.24,.27,.3],r={ultDmgBuff:!0},l={ultDmgBuff:{lc:!0,id:"ultDmgBuff",formItem:"switch",text:t("Content.ultDmgBuff.text"),content:t("Content.ultDmgBuff.content",{DmgBuff:b.precisionRound(100*o[e])})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,u,d)=>{const m=u.lightConeConditionals;c.ELEMENTAL_DMG.buff(m.ultDmgBuff?o[e]:0,s)},finalizeCalculations:()=>{}}},OS=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.GeniusesGreetings"),{SOURCE_LC:s}=w.lightCone("21051"),o=[.2,.25,.3,.35,.4],r={basicDmgBoost:!0},l={basicDmgBoost:{lc:!0,id:"basicDmgBoost",formItem:"switch",text:t("Content.basicDmgBoost.text"),content:t("Content.basicDmgBoost.content",{DmgBuff:b.precisionRound(o[e]*100)})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,u,d)=>{const m=u.lightConeConditionals;c.BASIC_DMG_BOOST.buffDual(m.basicDmgBoost?o[e]:0,s)},finalizeCalculations:()=>{}}},vS=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.GeniusesRepose"),{SOURCE_LC:s}=w.lightCone("21020"),o=[.24,.3,.36,.42,.48],r={defeatedEnemyCdBuff:!0},l={defeatedEnemyCdBuff:{lc:!0,id:"defeatedEnemyCdBuff",formItem:"switch",text:t("Content.defeatedEnemyCdBuff.text"),content:t("Content.defeatedEnemyCdBuff.content",{DmgBuff:b.precisionRound(100*o[e])})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,u,d)=>{const m=u.lightConeConditionals;c.CD.buff(m.defeatedEnemyCdBuff?o[e]:0,s)},finalizeCalculations:()=>{}}},HS=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.GoodNightAndSleepWell"),{SOURCE_LC:s}=w.lightCone("21001"),o=[.12,.15,.18,.21,.24],r={debuffStacksDmgIncrease:3},l={debuffStacksDmgIncrease:{lc:!0,id:"debuffStacksDmgIncrease",formItem:"slider",text:t("Content.debuffStacksDmgIncrease.text"),content:t("Content.debuffStacksDmgIncrease.content",{DmgBuff:b.precisionRound(100*o[e])}),min:0,max:3}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,u,d)=>{const m=u.lightConeConditionals;c.ELEMENTAL_DMG.buff(m.debuffStacksDmgIncrease*o[e],s)},finalizeCalculations:()=>{}}},FS=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.HeyOverHere"),{SOURCE_LC:s}=w.lightCone("22001"),o=[.16,.19,.22,.25,.28],r={postSkillHealBuff:!0},l={postSkillHealBuff:{lc:!0,id:"postSkillHealBuff",formItem:"switch",text:t("Content.postSkillHealBuff.text"),content:t("Content.postSkillHealBuff.content",{HealingBoost:b.precisionRound(100*o[e])})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,u,d)=>{const m=u.lightConeConditionals;c.OHB.buff(m.postSkillHealBuff?o[e]:0,s)},finalizeCalculations:()=>{}}},wS=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.IndeliblePromise"),{SOURCE_LC:s}=w.lightCone("21042"),o=[.15,.1875,.225,.2625,.3],r={crBuff:!0},l={crBuff:{lc:!0,id:"crBuff",formItem:"switch",text:t("Content.crBuff.text"),content:t("Content.crBuff.content",{CritBuff:b.precisionRound(100*o[e])})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,u,d)=>{const m=u.lightConeConditionals;c.CR.buff(m.crBuff?o[e]:0,s)},finalizeCalculations:()=>{}}},kS=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.ItsShowtime"),{SOURCE_LC:s}=w.lightCone("21041"),o=[.06,.07,.08,.09,.1],r=[.2,.24,.28,.32,.36],l={trickStacks:3},c={trickStacks:{lc:!0,id:"trickStacks",formItem:"slider",text:t("Content.trickStacks.text"),content:t("Content.trickStacks.content",{DmgBuff:b.precisionRound(100*o[e]),AtkBuff:b.precisionRound(100*r[e])}),min:0,max:3}};return{content:()=>Object.values(c),defaults:()=>l,precomputeEffects:(u,d,m)=>{const h=d.lightConeConditionals;u.ELEMENTAL_DMG.buff(h.trickStacks*o[e],s)},finalizeCalculations:()=>{},dynamicConditionals:[{id:"ItsShowtimeConversionConditional",type:Qe.ABILITY,activation:ze.SINGLE,dependsOn:[n.EHR],chainsTo:[n.ATK],condition:function(u,d,m){return u.a[S.EHR]>=.8},effect:function(u,d,m){u.ATK.buffDynamic(r[e]*m.baseATK,s,d,m)},gpu:function(u,d){return Ft(this,`
if (
  (*p_state).ItsShowtimeConversionConditional == 0.0 &&
  x.EHR >= 0.80
) {
  (*p_state).ItsShowtimeConversionConditional = 1.0;
  (*p_x).ATK += ${r[e]} * baseATK;
}
    `)}}]}},KS=(e,a)=>{const{SOURCE_LC:t}=w.lightCone("21009"),s=[.16,.18,.2,.22,.24];return{content:()=>[],defaults:()=>({}),precomputeEffects:o=>{o.DMG_RED_MULTI.multiply(1-s[e],t)},finalizeCalculations:()=>{}}},NS=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.MakeTheWorldClamor"),{SOURCE_LC:s}=w.lightCone("21013"),o=[.32,.4,.48,.56,.64],r=[20,23,26,29,32],l={ultDmgBuff:!0},c={ultDmgBuff:{lc:!0,id:"ultDmgBuff",formItem:"switch",text:t("Content.ultDmgBuff.text"),content:t("Content.ultDmgBuff.content",{Energy:r[e],DmgBuff:b.precisionRound(100*o[e])})}};return{content:()=>Object.values(c),defaults:()=>l,precomputeEffects:(u,d,m)=>{const h=d.lightConeConditionals;Ee(u,ye,h.ultDmgBuff?o[e]:0,s)},finalizeCalculations:()=>{}}},US=()=>({content:()=>[],defaults:()=>({}),precomputeEffects:()=>{},finalizeCalculations:()=>{}}),jS=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.NinjaRecordSoundHunt"),{SOURCE_LC:s}=w.lightCone("22003"),o=[.18,.225,.27,.315,.36],r={cdBuff:!0},l={cdBuff:{lc:!0,id:"cdBuff",formItem:"switch",text:t("Content.cdBuff.text"),content:t("Content.cdBuff.content",{sValuesCd:b.precisionRound(100*o[e])})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,u,d)=>{const m=u.lightConeConditionals;c.CD.buff(m.cdBuff?o[e]:0,s)},finalizeCalculations:()=>{}}},WS=()=>({content:()=>[],defaults:()=>({}),precomputeEffects:()=>{},finalizeCalculations:()=>{}}),VS=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.OnlySilenceRemains"),{SOURCE_LC:s}=w.lightCone("21003"),o=[.12,.15,.18,.21,.24],r={enemies2CrBuff:!0},l={enemies2CrBuff:{lc:!0,id:"enemies2CrBuff",formItem:"switch",text:t("Content.enemies2CrBuff.text"),content:t("Content.enemies2CrBuff.content",{CritBuff:b.precisionRound(100*o[e])})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,u,d)=>{const m=u.lightConeConditionals;c.CR.buff(m.enemies2CrBuff&&d.enemyCount<=2?o[e]:0,s)},finalizeCalculations:()=>{}}},ZS=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.PastAndFuture"),{SOURCE_LC:s}=w.lightCone("21025"),o=[.16,.2,.24,.28,.32],r={postSkillDmgBuff:!0},l={postSkillDmgBuff:{lc:!0,id:"postSkillDmgBuff",formItem:"switch",text:t("Content.postSkillDmgBuff.text"),content:t("Content.postSkillDmgBuff.content",{DmgBuff:b.precisionRound(100*o[e])})}};return{content:()=>[],teammateContent:()=>Object.values(l),defaults:()=>({}),teammateDefaults:()=>r,precomputeEffects:()=>{},precomputeTeammateEffects:(c,u,d)=>{const m=u.lightConeConditionals;c.ELEMENTAL_DMG.buffSingle(m.postSkillDmgBuff?o[e]:0,s)},finalizeCalculations:()=>{}}},zS=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.PerfectTiming"),{SOURCE_LC:s}=w.lightCone("21014"),o=[.33,.36,.39,.42,.45],r=[.15,.18,.21,.24,.27],l={resToHealingBoost:!0},c={resToHealingBoost:{lc:!0,id:"resToHealingBoost",formItem:"switch",text:t("Content.resToHealingBoost.text"),content:t("Content.resToHealingBoost.content",{Scaling:b.precisionRound(100*o[e]),Limit:b.precisionRound(100*r[e])})}};return{content:()=>Object.values(c),defaults:()=>l,precomputeEffects:()=>{},finalizeCalculations:(u,d)=>{},dynamicConditionals:[{id:"PerfectTimingConditional",type:Qe.ABILITY,activation:ze.CONTINUOUS,dependsOn:[n.RES],chainsTo:[n.OHB],condition:function(u,d,m){return d.lightConeConditionals.resToHealingBoost},effect:function(u,d,m){ta(n.RES,n.OHB,this,u,d,m,s,h=>Math.min(r[e],o[e]*h))},gpu:function(u,d){const m=u.lightConeConditionals;return aa(n.RES,n.OHB,this,u,d,`min(${r[e]}, ${o[e]} * convertibleValue)`,`${it(m.resToHealingBoost)}`)}}]}},XS=(e,a,t)=>{const s=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.PlanetaryRendezvous"),{SOURCE_LC:o}=w.lightCone("21011"),r=[.12,.15,.18,.21,.24],l={alliesSameElement:!0},c={alliesSameElement:!0},u={alliesSameElement:{lc:!0,id:"alliesSameElement",formItem:"switch",text:s("Content.alliesSameElement.text"),content:s("Content.alliesSameElement.content",{DmgBuff:b.precisionRound(100*r[e])})}},d={alliesSameElement:u.alliesSameElement};return{content:()=>Object.values(u),teammateContent:()=>Object.values(d),defaults:()=>l,teammateDefaults:()=>c,precomputeEffects:(m,h,g)=>{},precomputeMutualEffects:(m,h,g)=>{const C=h.lightConeConditionals;t.element==g.element&&m.ELEMENTAL_DMG.buffTeam(C.alliesSameElement?r[e]:0,o)},finalizeCalculations:()=>{}}},YS=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.PoisedToBloom"),{SOURCE_LC:s}=w.lightCone("21046"),o=[.16,.2,.24,.28,.32],r={cdBuff:!0},l={cdBuff:!0},c={cdBuff:{lc:!0,id:"cdBuff",formItem:"switch",text:t("Content.cdBuff.text"),content:t("Content.cdBuff.content",{CritBuff:b.precisionRound(100*o[e])})}},u={cdBuff:c.cdBuff};return{content:()=>Object.values(c),teammateContent:()=>Object.values(u),defaults:()=>r,teammateDefaults:()=>l,precomputeEffects:()=>{},precomputeMutualEffects:(d,m,h)=>{const g=m.lightConeConditionals;d.CD.buff(g.cdBuff&&ci(h,h.path)>=2?o[e]:0,s)},finalizeCalculations:()=>{}}},JS=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.PostOpConversation"),{SOURCE_LC:s}=w.lightCone("21000"),o=[.12,.15,.18,.21,.24],r={postUltHealingBoost:!0},l={postUltHealingBoost:{lc:!0,id:"postUltHealingBoost",formItem:"switch",text:t("Content.postUltHealingBoost.text"),content:t("Content.postUltHealingBoost.content",{HealingBoost:b.precisionRound(100*o[e])})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,u,d)=>{const m=u.lightConeConditionals;c.ULT_OHB.buff(m.postUltHealingBoost?o[e]:0,s)},finalizeCalculations:()=>{}}},QS=()=>({content:()=>[],defaults:()=>({}),precomputeEffects:()=>{},finalizeCalculations:()=>{}}),$S=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.ResolutionShinesAsPearlsOfSweat"),{SOURCE_LC:s}=w.lightCone("21015"),o=[.12,.13,.14,.15,.16],r={targetEnsnared:!0},l={targetEnsnared:!0},c={targetEnsnared:{lc:!0,id:"targetEnsnared",formItem:"switch",text:t("Content.targetEnsnared.text"),content:t("Content.targetEnsnared.content",{BaseChance:b.precisionRound(60+10*e),DefShred:b.precisionRound(100*o[e])})}},u={targetEnsnared:c.targetEnsnared};return{content:()=>Object.values(c),teammateContent:()=>Object.values(u),defaults:()=>r,teammateDefaults:()=>l,precomputeEffects:()=>{},precomputeMutualEffects:(d,m,h)=>{const g=m.lightConeConditionals;d.DEF_PEN.buffTeam(g.targetEnsnared?o[e]:0,s)},finalizeCalculations:()=>{}}},qS=()=>({content:()=>[],defaults:()=>({}),precomputeEffects:()=>{},finalizeCalculations:()=>{}}),ep=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.RiverFlowsInSpring"),{SOURCE_LC:s}=w.lightCone("21024"),o=[.08,.09,.1,.11,.12],r=[.12,.15,.18,.21,.24],l={spdDmgBuff:!0},c={spdDmgBuff:{lc:!0,id:"spdDmgBuff",formItem:"switch",text:t("Content.spdDmgBuff.text"),content:t("Content.spdDmgBuff.content",{SpdBuff:b.precisionRound(100*o[e]),DmgBuff:b.precisionRound(100*r[e])})}};return{content:()=>Object.values(c),defaults:()=>l,precomputeEffects:(u,d,m)=>{const h=d.lightConeConditionals;u.SPD_P.buff(h.spdDmgBuff?o[e]:0,s),u.ELEMENTAL_DMG.buff(h.spdDmgBuff?r[e]:0,s)},finalizeCalculations:()=>{}}},tp=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.ShadowedByNight"),{SOURCE_LC:s}=w.lightCone("21047"),o=[.08,.09,.1,.11,.12],r={spdBuff:!0},l={spdBuff:{lc:!0,id:"spdBuff",formItem:"switch",text:t("Content.spdBuff.text"),content:t("Content.spdBuff.content",{SpdBuff:b.precisionRound(100*o[e])})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,u,d)=>{const m=u.lightConeConditionals;c.SPD_P.buff(m.spdBuff?o[e]:0,s)},finalizeCalculations:()=>{}}},ap=()=>({content:()=>[],defaults:()=>({}),precomputeEffects:()=>{},finalizeCalculations:()=>{}}),np=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.SubscribeForMore"),{SOURCE_LC:s}=w.lightCone("21017"),o=[.24,.3,.36,.42,.48],r={maxEnergyDmgBoost:!0},l={maxEnergyDmgBoost:{lc:!0,id:"maxEnergyDmgBoost",formItem:"switch",text:t("Content.maxEnergyDmgBoost.text"),content:t("Content.maxEnergyDmgBoost.content",{DmgBuff:b.precisionRound(100*o[e])})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,u,d)=>{const m=u.lightConeConditionals;Ee(c,Bt|Me,o[e],s),Ee(c,Bt|Me,m.maxEnergyDmgBoost?o[e]:0,s)},finalizeCalculations:()=>{}}},ip=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.SweatNowCryLess"),{SOURCE_LC:s}=w.lightCone("21052"),o=[.24,.27,.3,.33,.36],r={dmgBoost:!0},l={dmgBoost:{lc:!0,id:"dmgBoost",formItem:"switch",text:t("Content.dmgBoost.text"),content:t("Content.dmgBoost.content",{DmgBuff:b.precisionRound(o[e]*100)})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,u,d)=>{const m=u.lightConeConditionals;c.ELEMENTAL_DMG.buffDual(m.dmgBoost?o[e]:0,s)},finalizeCalculations:()=>{}}},sp=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.Swordplay"),{SOURCE_LC:s}=w.lightCone("21010"),o=[.08,.1,.12,.14,.16],r={sameTargetHitStacks:5},l={sameTargetHitStacks:{lc:!0,id:"sameTargetHitStacks",formItem:"slider",text:t("Content.sameTargetHitStacks.text"),content:t("Content.sameTargetHitStacks.content",{DmgBuff:b.precisionRound(100*o[e])}),min:0,max:5}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,u,d)=>{const m=u.lightConeConditionals;c.ELEMENTAL_DMG.buff(m.sameTargetHitStacks*o[e],s)},finalizeCalculations:()=>{}}},op=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.TheBirthOfTheSelf"),{SOURCE_LC:s}=w.lightCone("21006"),o=[.24,.3,.36,.42,.48],r={enemyHp50FuaBuff:!0},l={enemyHp50FuaBuff:{lc:!0,id:"enemyHp50FuaBuff",formItem:"switch",text:t("Content.enemyHp50FuaBuff.text"),content:t("Content.enemyHp50FuaBuff.content",{DmgBuff:b.precisionRound(100*o[e])})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,u,d)=>{const m=u.lightConeConditionals;Ee(c,je,o[e],s),Ee(c,je,m.enemyHp50FuaBuff?o[e]:0,s)},finalizeCalculations:()=>{}}},rp=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.TheDayTheCosmosFell"),{SOURCE_LC:s}=w.lightCone("21040"),o=[.2,.25,.3,.35,.4],r={cdBuffActive:!0},l={cdBuffActive:{lc:!0,id:"cdBuffActive",formItem:"switch",text:t("Content.cdBuffActive.text"),content:t("Content.cdBuffActive.content",{CritBuff:b.precisionRound(100*o[e])})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,u,d)=>{const m=u.lightConeConditionals;c.CD.buff(m.cdBuffActive?o[e]:0,s)},finalizeCalculations:()=>{}}},lp=(e,a)=>{const{SOURCE_LC:t}=w.lightCone("22004"),s=[.04,.05,.06,.07,.08],o={weaknessTypes:7},r={weaknessTypes:{lc:!0,id:"weaknessTypes",formItem:"slider",text:"Weakness types",content:Y.t("BetaMessage",{ns:"conditionals",Version:ht}),min:0,max:7}};return{content:()=>Object.values(r),defaults:()=>o,precomputeEffects:(l,c,u)=>{const d=c.lightConeConditionals;l.ELEMENTAL_DMG.buff(d.weaknessTypes*s[e],t)},finalizeCalculations:()=>{}}},cp=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.TheMolesWelcomeYou"),{SOURCE_LC:s}=w.lightCone("21005"),o=[.12,.15,.18,.21,.24],r={atkBuffStacks:3},l={atkBuffStacks:{lc:!0,id:"atkBuffStacks",formItem:"slider",text:t("Content.atkBuffStacks.text"),content:t("Content.atkBuffStacks.content",{AtkBuff:b.precisionRound(100*o[e])}),min:0,max:3}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,u,d)=>{const m=u.lightConeConditionals;c.ATK_P.buff(m.atkBuffStacks*o[e],s)},finalizeCalculations:()=>{}}},up=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.TheSeriousnessOfBreakfast"),{SOURCE_LC:s}=w.lightCone("21027"),o=[.12,.15,.18,.21,.24],r=[.04,.05,.06,.07,.08],l={dmgBoost:!0,defeatedEnemyAtkStacks:3},c={dmgBoost:{lc:!0,id:"dmgBoost",formItem:"switch",text:t("Content.dmgBoost.text"),content:t("Content.dmgBoost.content",{DmgBuff:b.precisionRound(100*o[e])})},defeatedEnemyAtkStacks:{lc:!0,id:"defeatedEnemyAtkStacks",formItem:"slider",text:t("Content.defeatedEnemyAtkStacks.text"),content:t("Content.defeatedEnemyAtkStacks.content",{AtkBuff:b.precisionRound(100*r[e])}),min:0,max:3}};return{content:()=>Object.values(c),defaults:()=>l,precomputeEffects:(u,d,m)=>{const h=d.lightConeConditionals;u.ATK_P.buff(h.defeatedEnemyAtkStacks*r[e],s),u.ELEMENTAL_DMG.buff(h.dmgBoost?o[e]:0,s)},finalizeCalculations:()=>{}}},dp=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.ThisIsMe");w.lightCone("21030");const s=[.6,.75,.9,1.05,1.2],o={defScalingUltDmg:!1},r={defScalingUltDmg:{lc:!0,id:"defScalingUltDmg",formItem:"switch",text:t("Content.defScalingUltDmg.text"),content:t("Content.defScalingUltDmg.content",{Multiplier:b.precisionRound(100*s[e])})}};return{content:()=>Object.values(r),defaults:()=>o,precomputeEffects:()=>{},finalizeCalculations:()=>{}}},mp=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.TodayIsAnotherPeacefulDay"),{SOURCE_LC:s}=w.lightCone("21034"),o=[.002,.0025,.003,.0035,.004],r={maxEnergyDmgBoost:!0},l={maxEnergyDmgBoost:{lc:!0,id:"maxEnergyDmgBoost",formItem:"switch",text:t("Content.maxEnergyDmgBoost.text"),content:t("Content.maxEnergyDmgBoost.content",{DmgStep:b.precisionRound(100*o[e])})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,u,d)=>{u.lightConeConditionals.maxEnergyDmgBoost&&c.ELEMENTAL_DMG.buff(Math.min(160,d.baseEnergy)*o[e],s)},finalizeCalculations:()=>{}}},fp=()=>({content:()=>[],defaults:()=>({}),precomputeEffects:()=>{},finalizeCalculations:()=>{}}),hp=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.UnderTheBlueSky"),{SOURCE_LC:s}=w.lightCone("21019"),o=[.12,.15,.18,.21,.24],r={defeatedEnemyCrBuff:!0},l={defeatedEnemyCrBuff:{lc:!0,id:"defeatedEnemyCrBuff",formItem:"switch",text:t("Content.defeatedEnemyCrBuff.text"),content:t("Content.defeatedEnemyCrBuff.content",{CritBuff:b.precisionRound(100*o[e])})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,u,d)=>{const m=u.lightConeConditionals;c.CR.buff(m.defeatedEnemyCrBuff?o[e]:0,s)},finalizeCalculations:()=>{}}},Sp=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.VictoryInABlink"),{SOURCE_LC:s}=w.lightCone("21050"),o=[.08,.1,.12,.14,.16],r={teamDmgBuff:!0},l={teamDmgBuff:!0},c={teamDmgBuff:{lc:!0,id:"teamDmgBuff",formItem:"switch",text:t("Content.teamDmgBuff.text"),content:t("Content.teamDmgBuff.content",{DmgBuff:b.precisionRound(o[e]*100)})}},u={teamDmgBuff:c.teamDmgBuff};return{content:()=>Object.values(c),teammateContent:()=>Object.values(u),defaults:()=>r,teammateDefaults:()=>l,precomputeEffects:(d,m,h)=>{},precomputeMutualEffects:(d,m,h)=>{const g=m.lightConeConditionals;d.ELEMENTAL_DMG.buffTeam(g.teamDmgBuff?o[e]:0,s)},finalizeCalculations:()=>{}}},pp=()=>({content:()=>[],defaults:()=>({}),precomputeEffects:()=>{},finalizeCalculations:()=>{}}),gp=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.WeAreWildfire"),{SOURCE_LC:s}=w.lightCone("21023"),o=[.08,.1,.12,.14,.16],r=[.3,.35,.4,.45,.5],l={initialDmgReductionBuff:!1},c={initialDmgReductionBuff:!1},u={initialDmgReductionBuff:{lc:!0,id:"initialDmgReductionBuff",formItem:"switch",text:t("Content.initialDmgReductionBuff.text"),content:t("Content.initialDmgReductionBuff.content",{Healing:b.precisionRound(100*r[e]),DmgReduction:o[e]})}},d={initialDmgReductionBuff:u.initialDmgReductionBuff};return{content:()=>Object.values(u),teammateContent:()=>Object.values(d),defaults:()=>l,teammateDefaults:()=>c,precomputeEffects:()=>{},precomputeMutualEffects:(m,h,g)=>{const C=h.lightConeConditionals;m.DMG_RED_MULTI.multiplyTeam(C.initialDmgReductionBuff?1-o[e]:1,s)},finalizeCalculations:()=>{}}},bp=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.WeWillMeetAgain");w.lightCone("21029");const s=[.48,.6,.72,.84,.96],o={extraDmgProc:!0},r={extraDmgProc:{lc:!0,id:"extraDmgProc",formItem:"switch",text:t("Content.extraDmgProc.text"),content:t("Content.extraDmgProc.content",{Multiplier:b.precisionRound(100*s[e])})}};return{content:()=>Object.values(r),defaults:()=>o,precomputeEffects:(l,c,u)=>{c.lightConeConditionals},finalizeCalculations:(l,c,u)=>{const d=c.lightConeConditionals;l.BASIC_ADDITIONAL_DMG.buff((d.extraDmgProc?s[e]:0)*l.a[S.ATK],w.NONE),l.SKILL_ADDITIONAL_DMG.buff((d.extraDmgProc?s[e]:0)*l.a[S.ATK],w.NONE)},gpuFinalizeCalculations:(l,c)=>{const u=l.lightConeConditionals;return`
if (${it(u.extraDmgProc)}) {
  x.BASIC_ADDITIONAL_DMG += ${s[e]} * x.ATK;
  x.SKILL_ADDITIONAL_DMG += ${s[e]} * x.ATK;
}
      `}}},Dp=()=>({content:()=>[],defaults:()=>({}),precomputeEffects:()=>{},finalizeCalculations:()=>{}}),Cp=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.WoofWalkTime"),{SOURCE_LC:s}=w.lightCone("21026"),o=[.16,.2,.24,.28,.32],r={enemyBurnedBleeding:!0},l={enemyBurnedBleeding:{lc:!0,id:"enemyBurnedBleeding",formItem:"switch",text:t("Content.enemyBurnedBleeding.text"),content:t("Content.enemyBurnedBleeding.content",{DmgBuff:b.precisionRound(100*o[e])})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,u,d)=>{const m=u.lightConeConditionals;c.ELEMENTAL_DMG.buff(m.enemyBurnedBleeding?o[e]:0,s)},finalizeCalculations:()=>{}}},Ep=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.AGroundedAscent"),{SOURCE_LC:s}=w.lightCone("23034"),o=[.15,.1725,.195,.2175,.24],r={dmgBuffStacks:3},l={dmgBuffStacks:3},c={dmgBuffStacks:{lc:!0,id:"dmgBuffStacks",formItem:"slider",text:t("Content.dmgBuffStacks.text"),content:t("Content.dmgBuffStacks.content",{DmgBuff:b.precisionRound(100*o[e])}),min:0,max:3}},u={dmgBuffStacks:c.dmgBuffStacks};return{content:()=>Object.values(c),teammateContent:()=>Object.values(u),defaults:()=>r,teammateDefaults:()=>l,precomputeEffects:()=>{},precomputeMutualEffects:(d,m,h)=>{const g=m.lightConeConditionals;m.actorId=="1313"?d.ELEMENTAL_DMG.buffDual(g.dmgBuffStacks*o[e],s):d.ELEMENTAL_DMG.buffSingle(g.dmgBuffStacks*o[e],s)},finalizeCalculations:()=>{}}},Tp=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.AlongThePassingShore"),{SOURCE_LC:s}=w.lightCone("23024"),o=[.24,.28,.32,.36,.4],r=[.24,.28,.32,.36,.4],l={emptyBubblesDebuff:!0},c={emptyBubblesDebuff:{lc:!0,id:"emptyBubblesDebuff",formItem:"switch",text:t("Content.emptyBubblesDebuff.text"),content:t("Content.emptyBubblesDebuff.content",{UltDmgBoost:b.precisionRound(100*r[e]),DmgBoost:b.precisionRound(100*o[e])})}};return{content:()=>Object.values(c),defaults:()=>l,precomputeEffects:(u,d,m)=>{const h=d.lightConeConditionals;u.ELEMENTAL_DMG.buff(h.emptyBubblesDebuff?o[e]:0,s),Ee(u,ye,h.emptyBubblesDebuff?r[e]:0,s)},finalizeCalculations:()=>{}}},Rp=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.AnInstantBeforeAGaze"),{SOURCE_LC:s}=w.lightCone("23018"),o=[.0036,.0042,.0048,.0054,.006],r={maxEnergyUltDmgStacks:180},l={maxEnergyUltDmgStacks:{lc:!0,id:"maxEnergyUltDmgStacks",formItem:"slider",text:t("Content.maxEnergyUltDmgStacks.text"),content:t("Content.maxEnergyUltDmgStacks.content",{DmgStep:b.precisionRound(100*o[e])}),min:0,max:180}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,u,d)=>{const m=u.lightConeConditionals;Ee(c,ye,m.maxEnergyUltDmgStacks*o[e],s)},finalizeCalculations:()=>{}}},Bp=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.BaptismOfPureThought"),{SOURCE_LC:s}=w.lightCone("23020"),o=[.08,.09,.1,.11,.12],r=[.36,.42,.48,.54,.6],l=[.24,.28,.32,.36,.4],c={debuffCdStacks:3,postUltBuff:!0},u={debuffCdStacks:{lc:!0,id:"debuffCdStacks",formItem:"slider",text:t("Content.debuffCdStacks.text"),content:t("Content.debuffCdStacks.content",{DmgStep:b.precisionRound(100*o[e])}),min:0,max:3},postUltBuff:{lc:!0,id:"postUltBuff",formItem:"switch",text:t("Content.postUltBuff.text"),content:t("Content.postUltBuff.content",{DmgStep:b.precisionRound(100*r[e]),DefIgnore:b.precisionRound(100*l[e])})}};return{content:()=>Object.values(u),defaults:()=>c,precomputeEffects:(d,m,h)=>{const g=m.lightConeConditionals;d.CD.buff(g.debuffCdStacks*o[e],s),d.ELEMENTAL_DMG.buff(g.postUltBuff?r[e]:0,s),en(d,je,g.postUltBuff?l[e]:0,s)},finalizeCalculations:()=>{}}},Ip=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.BeforeDawn"),{SOURCE_LC:s}=w.lightCone("23010"),o=[.18,.21,.24,.27,.3],r=[.48,.56,.64,.72,.8],l={fuaDmgBoost:!0},c={fuaDmgBoost:{lc:!0,id:"fuaDmgBoost",formItem:"switch",text:t("Content.fuaDmgBoost.text"),content:t("Content.fuaDmgBoost.content",{DmgBuff:b.precisionRound(100*r[e])})}};return{content:()=>Object.values(c),defaults:()=>l,precomputeEffects:(u,d,m)=>{const h=d.lightConeConditionals;Ee(u,Me|ye,o[e],s),Ee(u,je,h.fuaDmgBoost?r[e]:0,s)},finalizeCalculations:()=>{}}},yp=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.BrighterThanTheSun"),{SOURCE_LC:s}=w.lightCone("23015"),o=[.18,.21,.24,.27,.3],r=[.06,.07,.08,.09,.1],l={dragonsCallStacks:2},c={dragonsCallStacks:{lc:!0,id:"dragonsCallStacks",formItem:"slider",text:t("Content.dragonsCallStacks.text"),content:t("Content.dragonsCallStacks.content",{AtkBuff:b.precisionRound(100*o[e]),RegenBuff:b.precisionRound(100*r[e])}),min:0,max:2}};return{content:()=>Object.values(c),defaults:()=>l,precomputeEffects:(u,d,m)=>{const h=d.lightConeConditionals;u.ATK_P.buff(h.dragonsCallStacks*o[e],s),u.ERR.buff(h.dragonsCallStacks*r[e],s)},finalizeCalculations:()=>{}}},Mp=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.ButTheBattleIsntOver"),{SOURCE_LC:s}=w.lightCone("23003"),o=[.3,.35,.4,.45,.5],r={postSkillDmgBuff:!0},l={postSkillDmgBuff:{lc:!0,formItem:"switch",id:"postSkillDmgBuff",text:t("Content.postSkillDmgBuff.text"),content:t("Content.postSkillDmgBuff.content",{DmgBuff:b.precisionRound(100*o[e])})}};return{content:()=>[],teammateContent:()=>Object.values(l),defaults:()=>({}),teammateDefaults:()=>r,precomputeEffects:()=>{},precomputeTeammateEffects:(c,u,d)=>{const m=u.lightConeConditionals;c.ELEMENTAL_DMG.buffSingle(m.postSkillDmgBuff?o[e]:0,s)},finalizeCalculations:()=>{}}},Gp=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.CruisingInTheStellarSea"),{SOURCE_LC:s}=w.lightCone("24001"),o=[.08,.1,.12,.14,.16],r=[.2,.25,.3,.35,.4],l={enemyHp50CrBoost:!1,enemyDefeatedAtkBuff:!0},c={enemyHp50CrBoost:{lc:!0,id:"enemyHp50CrBoost",formItem:"switch",text:t("Content.enemyHp50CrBoost.text"),content:t("Content.enemyHp50CrBoost.content",{CritBuff:b.precisionRound(100*o[e])})},enemyDefeatedAtkBuff:{lc:!0,id:"enemyDefeatedAtkBuff",formItem:"switch",text:t("Content.enemyDefeatedAtkBuff.text"),content:t("Content.enemyDefeatedAtkBuff.content",{AtkBuff:b.precisionRound(100*r[e])})}};return{content:()=>Object.values(c),defaults:()=>l,precomputeEffects:(u,d,m)=>{const h=d.lightConeConditionals;u.CR.buff(h.enemyHp50CrBoost?o[e]:0,s),u.ATK_P.buff(h.enemyDefeatedAtkBuff?r[e]:0,s)},finalizeCalculations:()=>{}}},Pp=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.DanceAtSunset"),{SOURCE_LC:s}=w.lightCone("23030"),o=[.36,.42,.48,.54,.6],r={fuaDmgStacks:2},l={fuaDmgStacks:{lc:!0,formItem:"slider",id:"fuaDmgStacks",text:t("Content.fuaDmgStacks.text"),content:t("Content.fuaDmgStacks.content",{DmgBoost:b.precisionRound(100*o[e])}),min:0,max:2}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,u,d)=>{const m=u.lightConeConditionals;Ee(c,je,m.fuaDmgStacks*o[e],s)},finalizeCalculations:()=>{}}},_p=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.EarthlyEscapade"),{SOURCE_LC:s}=w.lightCone("23021"),o=[.1,.11,.12,.13,.14],r=[.28,.35,.42,.49,.56],l={maskActive:!1},c={maskActive:!0},u={maskActive:{lc:!0,id:"maskActive",formItem:"switch",text:t("Content.maskActive.text"),content:t("Content.maskActive.content",{CritRateBuff:b.precisionRound(100*o[e]),CritDmgBuff:b.precisionRound(100*r[e])})}},d={maskActive:u.maskActive};return{content:()=>Object.values(u),teammateContent:()=>Object.values(d),defaults:()=>l,teammateDefaults:()=>c,precomputeEffects:()=>{},precomputeTeammateEffects:(m,h,g)=>{const C=h.lightConeConditionals;m.CR.buffTeam(C.maskActive?o[e]:0,s),m.CD.buffTeam(C.maskActive?r[e]:0,s)},finalizeCalculations:()=>{}}},Ap=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.EchoesOfTheCoffin"),{SOURCE_LC:s}=w.lightCone("23008"),o=[12,14,16,18,20],r=[3,3.5,4,4.5,5],l={postUltSpdBuff:!1},c={postUltSpdBuff:!1},u={postUltSpdBuff:{lc:!0,id:"postUltSpdBuff",formItem:"switch",text:t("Content.postUltSpdBuff.text"),content:t("Content.postUltSpdBuff.content",{EnergyRecovered:b.precisionRound(r[e]),SpdBuff:b.precisionRound(o[e])})}},d={postUltSpdBuff:u.postUltSpdBuff};return{content:()=>Object.values(u),teammateContent:()=>Object.values(d),defaults:()=>l,teammateDefaults:()=>c,precomputeEffects:()=>{},precomputeMutualEffects:(m,h,g)=>{const C=h.lightConeConditionals;m.SPD.buffTeam(C.postUltSpdBuff?o[e]:0,s)},finalizeCalculations:()=>{}}},xp=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.EternalCalculus"),{SOURCE_LC:s}=w.lightCone("24004"),o=[.04,.05,.06,.07,.08],r=[.08,.1,.12,.14,.16],l={atkBuffStacks:5,spdBuff:!1},c={atkBuffStacks:{lc:!0,id:"atkBuffStacks",formItem:"slider",text:t("Content.atkBuffStacks.text"),content:t("Content.atkBuffStacks.content",{AtkBuff:b.precisionRound(100*o[e])}),min:0,max:5},spdBuff:{lc:!0,id:"spdBuff",formItem:"switch",text:t("Content.spdBuff.text"),content:t("Content.spdBuff.content",{SpdBuff:b.precisionRound(100*r[e])})}};return{content:()=>Object.values(c),defaults:()=>l,precomputeEffects:(u,d,m)=>{const h=d.lightConeConditionals;u.ATK_P.buff(h.atkBuffStacks*o[e],s),u.SPD_P.buff(h.spdBuff?r[e]:0,s)},finalizeCalculations:()=>{}}},Lp=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.FlameOfBloodBlazeMyPath.Content"),{SOURCE_LC:s}=w.lightCone("23039"),o=[.3,.35,.4,.45,.5],r={skillUltDmgBoost:!0,bonusBoost:!0},l={skillUltDmgBoost:{lc:!0,id:"skillUltDmgBoost",formItem:"switch",text:t("skillUltDmgBoost.text"),content:t("skillUltDmgBoost.content",{DmgBoost:b.precisionRound(o[e]*100)})},bonusBoost:{lc:!0,id:"bonusBoost",formItem:"switch",text:t("bonusBoost.text"),content:t("bonusBoost.content",{HpConsumption:b.precisionRound((.06+.005*e)*100),BonusDmgBoost:b.precisionRound(o[e]*100)})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,u,d)=>{const m=u.lightConeConditionals;Ee(c,Me|ye,m.skillUltDmgBoost?o[e]:0,s),Ee(c,Me|ye,m.skillUltDmgBoost&&m.bonusBoost?o[e]:0,s)},finalizeCalculations:()=>{}}},Op=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.FlowingNightglow"),{SOURCE_LC:s}=w.lightCone("23026"),o=[.03,.035,.04,.045,.05],r=[.48,.6,.72,.84,.96],l=[.24,.28,.32,.36,.4],c={cantillationStacks:5,cadenzaActive:!0},u={cadenzaActive:!0},d={cadenzaActive:{lc:!0,id:"cadenzaActive",formItem:"switch",text:t("Content.cadenzaActive.text"),content:t("Content.cadenzaActive.content",{RegenBuff:b.precisionRound(100*o[e]),AtkBuff:b.precisionRound(100*r[e]),DmgBuff:b.precisionRound(100*l[e])})},cantillationStacks:{lc:!0,id:"cantillationStacks",formItem:"slider",text:t("Content.cantillationStacks.text"),content:t("Content.cantillationStacks.content",{RegenBuff:b.precisionRound(100*o[e]),AtkBuff:b.precisionRound(100*r[e]),DmgBuff:b.precisionRound(100*l[e])}),min:0,max:5}},m={cadenzaActive:d.cadenzaActive};return{content:()=>Object.values(d),teammateContent:()=>Object.values(m),defaults:()=>c,teammateDefaults:()=>u,precomputeTeammateEffects:(h,g,C)=>{const M=g.lightConeConditionals;h.ELEMENTAL_DMG.buffTeam(M.cadenzaActive?l[e]:0,s)},precomputeEffects:(h,g,C)=>{const M=g.lightConeConditionals;h.ERR.buff(M.cantillationStacks*o[e],s),h.ATK_P.buff(M.cadenzaActive?r[e]:0,s)},finalizeCalculations:()=>{}}},vp=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.IfTimeWereAFlower.Content"),{SOURCE_LC:s}=w.lightCone("23038"),o=[.48,.6,.72,.84,.96],r={presage:!0},l={presage:!0},c={presage:{lc:!0,id:"presage",formItem:"switch",text:t("presage.text"),content:t("presage.content",{CdBuff:b.precisionRound(o[e]*100)})}},u={presage:c.presage};return{content:()=>Object.values(c),teammateContent:()=>Object.values(u),defaults:()=>r,teammateDefaults:()=>l,precomputeEffects:(d,m,h)=>{},precomputeMutualEffects:(d,m,h)=>{const g=m.lightConeConditionals;d.CD.buffTeam(g.presage?o[e]:0,s)},finalizeCalculations:()=>{}}},Hp=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.IncessantRain"),{SOURCE_LC:s}=w.lightCone("23007"),o=[.12,.14,.16,.18,.2],r=[.12,.14,.16,.18,.2],l={enemy3DebuffsCrBoost:!0,targetCodeDebuff:!0},c={targetCodeDebuff:!0},u={enemy3DebuffsCrBoost:{lc:!0,id:"enemy3DebuffsCrBoost",formItem:"switch",text:t("Content.enemy3DebuffsCrBoost.text"),content:t("Content.enemy3DebuffsCrBoost.content",{CritBuff:b.precisionRound(100*o[e])})},targetCodeDebuff:{lc:!0,id:"targetCodeDebuff",formItem:"switch",text:t("Content.targetCodeDebuff.text"),content:t("Content.targetCodeDebuff.content",{DmgIncrease:b.precisionRound(100*r[e])})}},d={targetCodeDebuff:u.targetCodeDebuff};return{content:()=>Object.values(u),teammateContent:()=>Object.values(d),defaults:()=>l,teammateDefaults:()=>c,precomputeEffects:(m,h,g)=>{const C=h.lightConeConditionals;m.CR.buff(C.enemy3DebuffsCrBoost?o[e]:0,s)},precomputeMutualEffects:(m,h,g)=>{const C=h.lightConeConditionals;m.VULNERABILITY.buffTeam(C.targetCodeDebuff?r[e]:0,s)},finalizeCalculations:()=>{}}},Fp=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.InherentlyUnjustDestiny"),{SOURCE_LC:s}=w.lightCone("23023"),o=[.4,.46,.52,.58,.64],r=[.1,.115,.13,.145,.16],l={shieldCdBuff:!0,targetVulnerability:!0},c={targetVulnerability:!0},u={shieldCdBuff:{lc:!0,id:"shieldCdBuff",formItem:"switch",text:t("Content.shieldCdBuff.text"),content:t("Content.shieldCdBuff.content",{CritBuff:b.precisionRound(100*o[e])})},targetVulnerability:{lc:!0,id:"targetVulnerability",formItem:"switch",text:t("Content.targetVulnerability.text"),content:t("Content.targetVulnerability.content",{baseChance:b.precisionRound(100+15*e),Vulnerability:b.precisionRound(100*r[e])})}},d={targetVulnerability:u.targetVulnerability};return{content:()=>Object.values(u),teammateContent:()=>Object.values(d),defaults:()=>l,teammateDefaults:()=>c,precomputeEffects:(m,h,g)=>{const C=h.lightConeConditionals;m.CD.buff(C.shieldCdBuff?o[e]:0,s)},precomputeMutualEffects:(m,h,g)=>{const C=h.lightConeConditionals;m.VULNERABILITY.buffTeam(C.targetVulnerability?r[e]:0,s)},finalizeCalculations:()=>{}}},wp=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.InTheNameOfTheWorld"),{SOURCE_LC:s}=w.lightCone("23004"),o=[.24,.28,.32,.36,.4],r=[.24,.28,.32,.36,.4],l=[.18,.21,.24,.27,.3],c={enemyDebuffedDmgBoost:!0,skillAtkBoost:!1},u={enemyDebuffedDmgBoost:{lc:!0,id:"enemyDebuffedDmgBoost",formItem:"switch",text:t("Content.enemyDebuffedDmgBoost.text"),content:t("Content.enemyDebuffedDmgBoost.content",{DmgBuff:b.precisionRound(100*o[e])})},skillAtkBoost:{lc:!0,id:"skillAtkBoost",formItem:"switch",text:t("Content.skillAtkBoost.text"),content:t("Content.skillAtkBoost.content",{EhrBuff:b.precisionRound(100*l[e]),AtkBuff:b.precisionRound(100*r[e])})}};return{content:()=>Object.values(u),defaults:()=>c,precomputeEffects:(d,m,h)=>{const g=m.lightConeConditionals;d.ELEMENTAL_DMG.buff(g.enemyDebuffedDmgBoost?o[e]:0,s)},finalizeCalculations:()=>{}}},kp=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.InTheNight"),{SOURCE_LC:s}=w.lightCone("23001"),o=[.06,.07,.08,.09,.1],r=[.12,.14,.16,.18,.2],l={spdScalingBuffs:!0},c={spdScalingBuffs:{lc:!0,id:"spdScalingBuffs",formItem:"switch",text:t("Content.spdScalingBuffs.text"),content:t("Content.spdScalingBuffs.content",{DmgBuff:b.precisionRound(100*o[e]),CritBuff:b.precisionRound(100*r[e])})}};return{content:()=>Object.values(c),defaults:()=>l,precomputeEffects:()=>{},finalizeCalculations:(u,d,m)=>{const h=d.lightConeConditionals,g=Math.max(0,Math.min(6,Math.floor((u.a[S.SPD]-100)/10)));Ee(u,Bt|Me,h.spdScalingBuffs?g*o[e]:0,s),Sn(u,ye,h.spdScalingBuffs?g*r[e]:0,s)},gpuFinalizeCalculations:(u,d)=>{const m=u.lightConeConditionals;return`
if (${it(m.spdScalingBuffs)}) {
  let stacks = max(0, min(6, floor((x.SPD - 100) / 10)));

  buffAbilityDmg(p_x, BASIC_DMG_TYPE | SKILL_DMG_TYPE, stacks * ${o[e]}, 1);
  buffAbilityCd(p_x, ULT_DMG_TYPE, stacks * ${r[e]}, 1);
}
    `}}},Kp=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.IntoTheUnreachableVeil"),{SOURCE_LC:s}=w.lightCone("23037"),o=[.6,.7,.8,.9,1],r={skillUltDmgBoost:!0},l={skillUltDmgBoost:{lc:!0,id:"skillUltDmgBoost",formItem:"switch",text:t("Content.skillUltDmgBoost.text"),content:t("Content.skillUltDmgBoost.content",{DmgBuff:b.precisionRound(o[e]*100)})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,u,d)=>{const m=u.lightConeConditionals;Ee(c,Me|ye,m.skillUltDmgBoost?o[e]:0,s)},finalizeCalculations:()=>{}}},Np=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.IShallBeMyOwnSword"),{SOURCE_LC:s}=w.lightCone("23014"),o=[.14,.165,.19,.215,.24],r=[.12,.14,.16,.18,.2],l={eclipseStacks:3,maxStackDefPen:!0},c={eclipseStacks:{lc:!0,id:"eclipseStacks",formItem:"slider",text:t("Content.eclipseStacks.text"),content:t("Content.eclipseStacks.content",{DmgBuff:b.precisionRound(100*o[e])}),min:0,max:3},maxStackDefPen:{lc:!0,id:"maxStackDefPen",formItem:"switch",text:t("Content.maxStackDefPen.text"),content:t("Content.maxStackDefPen.content",{DefIgnore:b.precisionRound(100*r[e])})}};return{content:()=>Object.values(c),defaults:()=>l,precomputeEffects:(u,d,m)=>{const h=d.lightConeConditionals;u.ELEMENTAL_DMG.buff(h.eclipseStacks*o[e],s),u.DEF_PEN.buff(h.maxStackDefPen&&h.eclipseStacks==3?r[e]:0,s)},finalizeCalculations:()=>{}}},Up=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.IVentureForthToHunt"),{SOURCE_LC:s}=w.lightCone("23031"),o=[.27,.3,.33,.36,.39],r={luminfluxUltStacks:2},l={luminfluxUltStacks:{lc:!0,id:"luminfluxUltStacks",formItem:"slider",text:t("Content.luminfluxUltStacks.text"),content:t("Content.luminfluxUltStacks.content",{DefIgnore:b.precisionRound(100*o[e])}),min:0,max:2}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,u,d)=>{const m=u.lightConeConditionals;en(c,ye,m.luminfluxUltStacks*o[e],s)},finalizeCalculations:()=>{}}},jp=(e,a)=>{const{SOURCE_LC:t}=w.lightCone("23041"),s=[.6,.7,.8,.9,1],o=[.12,.15,.18,.21,.24],r={defPen:!0,dmgBoost:!0},l={defPen:!0},c={dmgBoost:{lc:!0,id:"dmgBoost",formItem:"switch",text:"DMG boost",content:Y.t("BetaMessage",{ns:"conditionals",Version:ht})},defPen:{lc:!0,id:"defPen",formItem:"switch",text:"DEF PEN",content:Y.t("BetaMessage",{ns:"conditionals",Version:ht})}},u={defPen:c.defPen};return{content:()=>Object.values(c),teammateContent:()=>Object.values(u),defaults:()=>r,teammateDefaults:()=>l,precomputeEffects:(d,m,h)=>{const g=m.lightConeConditionals;d.ELEMENTAL_DMG.buff(g.dmgBoost?s[e]:0,t)},precomputeMutualEffects:(d,m,h)=>{const g=m.lightConeConditionals;d.DEF_PEN.buffTeam(g.defPen?o[e]:0,t)},finalizeCalculations:()=>{}}},Wp=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.LongRoadLeadsHome"),{SOURCE_LC:s}=w.lightCone("23035"),o=[.18,.21,.24,.27,.3],r={breakVulnerabilityStacks:2},l={breakVulnerabilityStacks:2},c={breakVulnerabilityStacks:{lc:!0,id:"breakVulnerabilityStacks",formItem:"slider",text:t("Content.breakVulnerabilityStacks.text"),content:t("Content.breakVulnerabilityStacks.content",{breakVulnerability:b.precisionRound(100*o[e])}),min:0,max:2}},u={breakVulnerabilityStacks:c.breakVulnerabilityStacks};return{content:()=>Object.values(c),teammateContent:()=>Object.values(u),defaults:()=>r,teammateDefaults:()=>l,precomputeEffects:()=>{},precomputeMutualEffects:(d,m,h)=>{const g=m.lightConeConditionals;ha(d,ja,g.breakVulnerabilityStacks*o[e],s,It.TEAM)},finalizeCalculations:()=>{}}},Vp=(e,a)=>{const{SOURCE_LC:t}=w.lightCone("23040"),s=[.3,.35,.4,.45,.5],o={deathFlower:!0},r={deathFlower:{lc:!0,id:"deathFlower",formItem:"switch",text:"Death Flower DEF PEN",content:Y.t("BetaMessage",{ns:"conditionals",Version:ht})}};return{content:()=>Object.values(r),defaults:()=>o,precomputeEffects:(l,c,u)=>{const d=c.lightConeConditionals;l.DEF_PEN.buffDual(d.deathFlower?s[e]:0,t)},finalizeCalculations:()=>{}}},Zp=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.MemorysCurtainNeverFalls.Content"),{SOURCE_LC:s}=w.lightCone("24005"),o=[.08,.1,.12,.14,.16],r={teamDmgBoost:!0},l={teamDmgBoost:!0},c={teamDmgBoost:{lc:!0,id:"teamDmgBoost",formItem:"switch",text:t("teamDmgBoost.text"),content:t("teamDmgBoost.content",{DmgBoost:b.precisionRound(o[e]*100)})}},u={teamDmgBoost:c.teamDmgBoost};return{content:()=>Object.values(c),teammateContent:()=>Object.values(u),defaults:()=>r,teammateDefaults:()=>l,precomputeEffects:(d,m,h)=>{m.lightConeConditionals},precomputeMutualEffects:(d,m,h)=>{const g=m.lightConeConditionals;d.ELEMENTAL_DMG.buffTeam(g.teamDmgBoost?o[e]:0,s)},finalizeCalculations:()=>{}}},zp=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.MomentOfVictory"),{SOURCE_LC:s}=w.lightCone("23005"),o=[.24,.28,.32,.36,.4],r={selfAttackedDefBuff:!0},l={selfAttackedDefBuff:{lc:!0,id:"selfAttackedDefBuff",formItem:"switch",text:t("Content.selfAttackedDefBuff.text"),content:t("Content.selfAttackedDefBuff.content",{DefBuff:b.precisionRound(100*o[e])})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,u,d)=>{const m=u.lightConeConditionals;c.DEF_P.buff(m.selfAttackedDefBuff?o[e]:0,s)},finalizeCalculations:()=>{}}},Xp=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.NightOfFright"),{SOURCE_LC:s}=w.lightCone("23017"),o=[.024,.028,.032,.036,.04],r={atkBuffStacks:5},l={atkBuffStacks:5},c={atkBuffStacks:{lc:!0,id:"atkBuffStacks",formItem:"slider",text:t("Content.atkBuffStacks.text"),content:t("Content.atkBuffStacks.content",{AtkBuff:b.precisionRound(100*o[e])}),min:0,max:5}},u={atkBuffStacks:c.atkBuffStacks};return{content:()=>Object.values(c),teammateContent:()=>Object.values(u),defaults:()=>r,teammateDefaults:()=>l,precomputeEffects:()=>{},precomputeMutualEffects:(d,m,h)=>{const g=m.lightConeConditionals;d.ATK_P.buffTeam(g.atkBuffStacks*o[e],s)},finalizeCalculations:()=>{}}},Yp=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.NightOnTheMilkyWay"),{SOURCE_LC:s}=w.lightCone("23000"),o=[.09,.105,.12,.135,.15],r=[.3,.35,.4,.45,.5],l={enemyCountAtkBuff:!0,enemyWeaknessBreakDmgBuff:!0},c={enemyCountAtkBuff:{lc:!0,id:"enemyCountAtkBuff",formItem:"switch",text:t("Content.enemyCountAtkBuff.text"),content:t("Content.enemyCountAtkBuff.content",{AtkBuff:b.precisionRound(100*o[e])})},enemyWeaknessBreakDmgBuff:{lc:!0,id:"enemyWeaknessBreakDmgBuff",formItem:"switch",text:t("Content.enemyWeaknessBreakDmgBuff.text"),content:t("Content.enemyWeaknessBreakDmgBuff.content",{DmgBuff:b.precisionRound(100*r[e])})}};return{content:()=>Object.values(c),defaults:()=>l,precomputeEffects:(u,d,m)=>{const h=d.lightConeConditionals;u.ATK_P.buff(h.enemyCountAtkBuff?m.enemyCount*o[e]:0,s),u.ELEMENTAL_DMG.buff(h.enemyWeaknessBreakDmgBuff?r[e]:0,s)},finalizeCalculations:()=>{}}},Jp=()=>({content:()=>[],defaults:()=>({}),precomputeEffects:()=>{},finalizeCalculations:()=>{}}),Qp=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.OnTheFallOfAnAeon"),{SOURCE_LC:s}=w.lightCone("24000"),o=[.08,.1,.12,.14,.16],r=[.12,.15,.18,.21,.24],l={atkBoostStacks:4,weaknessBreakDmgBuff:!0},c={atkBoostStacks:{lc:!0,id:"atkBoostStacks",formItem:"slider",text:t("Content.atkBoostStacks.text"),content:t("Content.atkBoostStacks.content",{AtkBuff:b.precisionRound(100*o[e])}),min:0,max:4},weaknessBreakDmgBuff:{lc:!0,id:"weaknessBreakDmgBuff",formItem:"switch",text:t("Content.weaknessBreakDmgBuff.text"),content:t("Content.weaknessBreakDmgBuff.content",{DmgBuff:b.precisionRound(100*r[e])})}};return{content:()=>Object.values(c),defaults:()=>l,precomputeEffects:(u,d,m)=>{const h=d.lightConeConditionals;u.ATK_P.buff(h.atkBoostStacks*o[e],s),u.ELEMENTAL_DMG.buff(h.weaknessBreakDmgBuff?r[e]:0,s)},finalizeCalculations:()=>{}}},$p=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.PastSelfInTheMirror"),{SOURCE_LC:s}=w.lightCone("23019"),o=[.24,.28,.32,.36,.4],r={postUltDmgBuff:!0},l={postUltDmgBuff:!0},c={postUltDmgBuff:{lc:!0,id:"postUltDmgBuff",formItem:"switch",text:t("Content.postUltDmgBuff.text"),content:t("Content.postUltDmgBuff.content",{DmgBuff:b.precisionRound(100*o[e])})}},u={postUltDmgBuff:c.postUltDmgBuff};return{content:()=>Object.values(c),teammateContent:()=>Object.values(u),defaults:()=>r,teammateDefaults:()=>l,precomputeEffects:()=>{},precomputeMutualEffects:(d,m,h)=>{const g=m.lightConeConditionals;d.ELEMENTAL_DMG.buffTeam(g.postUltDmgBuff?o[e]:0,s)},finalizeCalculations:()=>{}}},qp=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.PatienceIsAllYouNeed"),{SOURCE_LC:s}=w.lightCone("23006"),o=[.24,.28,.32,.36,.4],r=[.048,.056,.064,.072,.08],l=[.6,.7,.8,.9,1],c={spdStacks:3,dotEffect:!1},u={spdStacks:{lc:!0,id:"spdStacks",formItem:"slider",text:t("Content.spdStacks.text"),content:t("Content.spdStacks.content",{SpdBuff:b.precisionRound(100*r[e])}),min:0,max:3},dotEffect:{lc:!0,id:"dotEffect",formItem:"switch",text:t("Content.dotEffect.text"),content:t("Content.dotEffect.content",{Multiplier:b.precisionRound(100*l[e])})}};return{content:()=>Object.values(u),defaults:()=>c,precomputeEffects:(d,m,h)=>{const g=m.lightConeConditionals;d.SPD_P.buff(g.spdStacks*r[e],s),d.ELEMENTAL_DMG.buff(o[e],s)},finalizeCalculations:()=>{}}},eg=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.ReforgedRemembrance"),{SOURCE_LC:s}=w.lightCone("23022"),o=[.05,.06,.07,.08,.09],r=[.072,.079,.086,.093,.1],l={prophetStacks:4},c={prophetStacks:{lc:!0,id:"prophetStacks",formItem:"slider",text:t("Content.prophetStacks.text"),content:t("Content.prophetStacks.content",{AtkBuff:b.precisionRound(100*o[e]),DefIgnore:b.precisionRound(100*r[e])}),min:0,max:4}};return{content:()=>Object.values(c),defaults:()=>l,precomputeEffects:(u,d,m)=>{const h=d.lightConeConditionals;u.ATK_P.buff(h.prophetStacks*o[e],s),en(u,qa,h.prophetStacks*r[e],s)},finalizeCalculations:()=>{}}},tg=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.SailingTowardsASecondLife"),{SOURCE_LC:s}=w.lightCone("23027"),o=[.12,.14,.16,.18,.2],r=[.2,.23,.26,.29,.32],l={breakDmgDefShred:!0,spdBuffConditional:!0},c={breakDmgDefShred:{lc:!0,id:"breakDmgDefShred",formItem:"switch",text:t("Content.breakDmgDefShred.text"),content:t("Content.breakDmgDefShred.content",{DefIgnore:b.precisionRound(100*r[e])})},spdBuffConditional:{lc:!0,id:"spdBuffConditional",formItem:"switch",text:t("Content.spdBuffConditional.text"),content:t("Content.spdBuffConditional.content",{SpdBuff:b.precisionRound(100*o[e])})}};return{content:()=>Object.values(c),defaults:()=>l,precomputeEffects:(u,d,m)=>{const h=d.lightConeConditionals;en(u,ja,h.breakDmgDefShred?r[e]:0,s)},finalizeCalculations:(u,d,m)=>{},dynamicConditionals:[{id:"SailingTowardsASecondLifeConditional",type:Qe.ABILITY,activation:ze.SINGLE,dependsOn:[n.BE],chainsTo:[n.SPD],condition:function(u,d,m){return d.lightConeConditionals.spdBuffConditional&&u.a[S.BE]>=1.5},effect:(u,d,m)=>{u.SPD.buffDynamic(o[e]*m.baseSPD,s,d,m)},gpu:function(u,d){return Ft(this,`
if (
  (*p_state).SailingTowardsASecondLifeConditional == 0.0 &&
  x.BE >= 1.50
) {
  (*p_state).SailingTowardsASecondLifeConditional = 1.0;
  (*p_x).SPD += ${o[e]} * baseSPD;
}
    `)}}]}},ag=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.ScentAloneStaysTrue"),{SOURCE_LC:s}=w.lightCone("23032"),o=[.1,.12,.14,.16,.18],r=[.08,.1,.12,.14,.16],l={woefreeState:!0},c={woefreeState:!0,additionalVulnerability:!0},u={woefreeState:{lc:!0,id:"woefreeState",formItem:"switch",text:t("Content.woefreeState.text"),content:t("Content.woefreeState.content",{Vulnerability:b.precisionRound(100*o[e]),AdditionalVulnerability:b.precisionRound(100*r[e])})}},d={woefreeState:u.woefreeState,additionalVulnerability:{lc:!0,id:"additionalVulnerability",formItem:"switch",text:t("TeammateContent.additionalVulnerability.text"),content:t("TeammateContent.additionalVulnerability.content",{Vulnerability:b.precisionRound(100*o[e]),AdditionalVulnerability:b.precisionRound(100*r[e])})}};return{content:()=>Object.values(u),teammateContent:()=>Object.values(d),defaults:()=>l,teammateDefaults:()=>c,precomputeEffects:(m,h,g)=>{},precomputeMutualEffects:(m,h,g)=>{const C=h.lightConeConditionals;m.VULNERABILITY.buffTeam(C.woefreeState?o[e]:0,s)},precomputeTeammateEffects:(m,h,g)=>{const C=h.lightConeConditionals;m.VULNERABILITY.buffTeam(C.woefreeState&&C.additionalVulnerability?r[e]:0,s)},finalizeCalculations:(m,h,g)=>{const C=h.lightConeConditionals;m.VULNERABILITY.buff(C.woefreeState&&m.a[S.BE]>=1.5?r[e]:0,s)},gpuFinalizeCalculations:(m,h)=>{const g=m.lightConeConditionals;return`
if (${it(g.woefreeState)} && x.BE >= 1.50) {
  x.VULNERABILITY += ${r[e]};
}
      `}}},ng=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.SheAlreadyShutHerEyes"),{SOURCE_LC:s}=w.lightCone("23011"),o=[.09,.105,.12,.135,.15],r={hpLostDmgBuff:!0},l={hpLostDmgBuff:!0},c={hpLostDmgBuff:{lc:!0,id:"hpLostDmgBuff",formItem:"switch",text:t("Content.hpLostDmgBuff.text"),content:t("Content.hpLostDmgBuff.content",{DmgBuff:b.precisionRound(100*o[e])})}},u={hpLostDmgBuff:c.hpLostDmgBuff};return{content:()=>Object.values(c),teammateContent:()=>Object.values(u),defaults:()=>r,teammateDefaults:()=>l,precomputeEffects:()=>{},precomputeMutualEffects:(d,m,h)=>{const g=m.lightConeConditionals;d.ELEMENTAL_DMG.buffTeam(g.hpLostDmgBuff?o[e]:0,s)},finalizeCalculations:()=>{}}},ig=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.SleepLikeTheDead"),{SOURCE_LC:s}=w.lightCone("23012"),o=[.36,.42,.48,.54,.6],r={missedCritCrBuff:!1},l={missedCritCrBuff:{lc:!0,id:"missedCritCrBuff",formItem:"switch",text:t("Content.missedCritCrBuff.text"),content:t("Content.missedCritCrBuff.content",{CritBuff:b.precisionRound(100*o[e])})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,u,d)=>{const m=u.lightConeConditionals;c.CR.buff(m.missedCritCrBuff?o[e]:0,s)},finalizeCalculations:()=>{}}},sg=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.SolitaryHealing"),{SOURCE_LC:s}=w.lightCone("24003"),o=[.24,.3,.36,.42,.48],r={postUltDotDmgBuff:!0},l={postUltDotDmgBuff:{lc:!0,formItem:"switch",id:"postUltDotDmgBuff",text:t("Content.postUltDotDmgBuff.text"),content:t("Content.postUltDotDmgBuff.content",{DmgBuff:b.precisionRound(100*o[e])})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,u,d)=>{const m=u.lightConeConditionals;Ee(c,qa,m.postUltDotDmgBuff?o[e]:0,s)},finalizeCalculations:()=>{}}},og=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.SomethingIrreplaceable"),{SOURCE_LC:s}=w.lightCone("23002"),o=[.24,.28,.32,.36,.4],r=[.08,.09,.1,.11,.12],l={dmgBuff:!0},c={dmgBuff:{lc:!0,id:"dmgBuff",formItem:"switch",text:t("Content.dmgBuff.text"),content:t("Content.dmgBuff.content",{Multiplier:b.precisionRound(100*r[e]),DmgBuff:b.precisionRound(100*o[e])})}};return{content:()=>Object.values(c),defaults:()=>l,precomputeEffects:(u,d,m)=>{const h=d.lightConeConditionals;u.ELEMENTAL_DMG.buff(h.dmgBuff?o[e]:0,s)},finalizeCalculations:()=>{}}},rg=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.TextureOfMemories"),{SOURCE_LC:s}=w.lightCone("24002"),o=[.12,.15,.18,.21,.24],r=[.16,.2,.24,.28,.32],l={activeShieldDmgDecrease:!0},c={activeShieldDmgDecrease:{lc:!0,id:"activeShieldDmgDecrease",formItem:"switch",text:t("Content.activeShieldDmgDecrease.text"),content:t("Content.activeShieldDmgDecrease.content",{ShieldHp:b.precisionRound(100*r[e]),DmgReduction:b.precisionRound(100*o[e])})}};return{content:()=>Object.values(c),defaults:()=>l,precomputeEffects:(u,d,m)=>{const h=d.lightConeConditionals;u.DMG_RED_MULTI.multiply(h.activeShieldDmgDecrease?1-o[e]:1,s)},finalizeCalculations:()=>{}}},lg=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.TheUnreachableSide"),{SOURCE_LC:s}=w.lightCone("23009"),o=[.24,.28,.32,.36,.4],r={dmgBuff:!0},l={dmgBuff:{lc:!0,id:"dmgBuff",formItem:"switch",text:t("Content.dmgBuff.text"),content:t("Content.dmgBuff.content",{DmgBuff:b.precisionRound(o[e]*100)})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,u,d)=>{const m=u.lightConeConditionals;c.ELEMENTAL_DMG.buff(m.dmgBuff?o[e]:0,s)},finalizeCalculations:()=>{}}},cg=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.ThoseManySprings"),{SOURCE_LC:s}=w.lightCone("23029"),o=[.1,.12,.14,.16,.18],r=[.14,.16,.18,.2,.22],l={unarmoredVulnerability:!0,corneredVulnerability:!0},c={unarmoredVulnerability:!0,corneredVulnerability:!0},u={unarmoredVulnerability:{lc:!0,id:"unarmoredVulnerability",formItem:"switch",text:t("Content.unarmoredVulnerability.text"),content:t("Content.unarmoredVulnerability.content",{UnarmoredVulnerability:b.precisionRound(o[e]*100),CorneredVulnerability:b.precisionRound(r[e]*100)})},corneredVulnerability:{lc:!0,id:"corneredVulnerability",formItem:"switch",text:t("Content.corneredVulnerability.text"),content:t("Content.corneredVulnerability.content",{UnarmoredVulnerability:b.precisionRound(o[e]*100),CorneredVulnerability:b.precisionRound(r[e]*100)})}},d={unarmoredVulnerability:u.unarmoredVulnerability,corneredVulnerability:u.corneredVulnerability};return{content:()=>Object.values(u),teammateContent:()=>Object.values(d),defaults:()=>l,teammateDefaults:()=>c,precomputeEffects:()=>{},precomputeMutualEffects:(m,h,g)=>{const C=h.lightConeConditionals;m.VULNERABILITY.buffTeam(C.unarmoredVulnerability||C.corneredVulnerability?o[e]:0,s),m.VULNERABILITY.buffTeam(C.corneredVulnerability?r[e]:0,s)},finalizeCalculations:()=>{}}},ug=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.TimeWaitsForNoOne");w.lightCone("23013");const s=[.36,.42,.48,.54,.6],o={healingBasedDmgProc:!1},r={healingBasedDmgProc:{lc:!0,id:"healingBasedDmgProc",formItem:"switch",text:t("Content.healingBasedDmgProc.text"),content:t("Content.healingBasedDmgProc.content",{Multiplier:b.precisionRound(s[e]*100)})}};return{content:()=>Object.values(r),defaults:()=>o,precomputeEffects:()=>{},finalizeCalculations:()=>{}}},dg=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.TimeWovenIntoGold"),{SOURCE_LC:s}=w.lightCone("23036"),o=[.09,.105,.12,.135,.15],r=[.09,.105,.12,.135,.15],l={brocadeStacks:6,maxStacksBasicDmgBoost:!0},c={brocadeStacks:{lc:!0,id:"brocadeStacks",formItem:"slider",text:t("Content.brocadeStacks.text"),content:t("Content.brocadeStacks.content",{CdBuff:b.precisionRound(o[e]*100),DmgBuff:b.precisionRound(r[e]*100)}),min:0,max:6},maxStacksBasicDmgBoost:{lc:!0,id:"maxStacksBasicDmgBoost",formItem:"switch",text:t("Content.maxStacksBasicDmgBoost.text"),content:t("Content.maxStacksBasicDmgBoost.content",{CdBuff:b.precisionRound(o[e]*100),DmgBuff:b.precisionRound(r[e]*100)})}};return{content:()=>Object.values(c),defaults:()=>l,precomputeEffects:(u,d,m)=>{const h=d.lightConeConditionals;u.CD.buffDual(h.brocadeStacks*o[e],s),u.BASIC_DMG_BOOST.buffDual(h.brocadeStacks>=6&&h.maxStacksBasicDmgBoost?h.brocadeStacks*r[e]:0,s)},finalizeCalculations:()=>{}}},mg=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.WhereaboutsShouldDreamsRest"),{SOURCE_LC:s}=w.lightCone("23025"),o=[.24,.28,.32,.36,.4],r={routedVulnerability:!0},l={routedVulnerability:{lc:!0,id:"routedVulnerability",formItem:"switch",text:t("Content.routedVulnerability.text"),content:t("Content.routedVulnerability.content",{Vulnerability:o[e]*100})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,u,d)=>{const m=u.lightConeConditionals;c.VULNERABILITY.buff(m.routedVulnerability?o[e]:0,s)},finalizeCalculations:()=>{}}},fg=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.WorrisomeBlissful"),{SOURCE_LC:s}=w.lightCone("23016"),o=[.3,.35,.4,.45,.5],r=[.12,.14,.16,.18,.2],l={targetTameStacks:2},c={targetTameStacks:2},u={targetTameStacks:{lc:!0,id:"targetTameStacks",formItem:"slider",text:t("Content.targetTameStacks.text"),content:t("Content.targetTameStacks.content",{CritBuff:b.precisionRound(100*r[e])}),min:0,max:2}},d={targetTameStacks:u.targetTameStacks};return{content:()=>Object.values(u),teammateContent:()=>Object.values(d),defaults:()=>l,teammateDefaults:()=>c,precomputeEffects:(m,h,g)=>{Ee(m,je,o[e],s)},precomputeMutualEffects:(m,h,g)=>{const C=h.lightConeConditionals;m.CD.buffTeam(C.targetTameStacks*r[e],s)},finalizeCalculations:()=>{}}},hg=(e,a)=>{const t=b.wrappedFixedT(a).get(null,"conditionals","Lightcones.YetHopeIsPriceless"),{SOURCE_LC:s}=w.lightCone("23028"),o=[.12,.14,.16,.18,.2],r=[.2,.24,.28,.32,.36],l={fuaDmgBoost:!0,ultFuaDefShred:!0},c={fuaDmgBoost:{lc:!0,id:"fuaDmgBoost",formItem:"switch",text:t("Content.fuaDmgBoost.text"),content:t("Content.fuaDmgBoost.content",{DmgBuff:b.precisionRound(o[e]*100)})},ultFuaDefShred:{lc:!0,id:"ultFuaDefShred",formItem:"switch",text:t("Content.ultFuaDefShred.text"),content:t("Content.ultFuaDefShred.content",{DefShred:b.precisionRound(o[e]*100)})}};return{content:()=>Object.values(c),defaults:()=>l,precomputeEffects:(u,d,m)=>{const h=d.lightConeConditionals;en(u,ye|je,h.ultFuaDefShred?r[e]:0,s)},finalizeCalculations:(u,d,m)=>{const h=d.lightConeConditionals;Ee(u,je,h.fuaDmgBoost?o[e]*Math.min(4,Math.floor(u.a[S.CD]-1.2)/.2):0,s)},gpuFinalizeCalculations:(u,d)=>{const m=u.lightConeConditionals;return`
if (${it(m.fuaDmgBoost)}) {
  buffAbilityDmg(p_x, FUA_DMG_TYPE, ${o[e]} * min(4, floor(x.CD - 1.20) / 0.20), 1);
}
    `}}},Sg={23e3:Yp,23001:kp,23002:og,23003:Mp,23004:wp,23005:zp,23006:qp,23007:Hp,23008:Ap,23009:lg,23010:Ip,23011:ng,23012:ig,23013:ug,23014:Np,23015:yp,23016:fg,23017:Xp,23018:Rp,23019:$p,23020:Bp,23021:_p,23022:eg,23023:Fp,23024:Tp,23025:mg,23026:Op,23027:tg,23028:hg,23029:cg,23030:Pp,23031:Up,23032:ag,23033:Jp,23034:Ep,23035:Wp,24e3:Qp,24001:Gp,24002:rg,24003:sg,24004:xp,23036:dg,23037:Kp,23038:vp,23039:Lp,23040:Vp,23041:jp,24005:Zp},pg={21e3:JS,21001:HS,21002:IS,21003:VS,21004:US,21005:cp,21006:op,21007:ap,21008:PS,21009:KS,21010:sp,21011:XS,21012:DS,21013:NS,21014:zS,21015:$S,21016:fp,21017:np,21018:BS,21019:hp,21020:vS,21021:QS,21022:_S,21023:gp,21024:ep,21025:ZS,21026:Cp,21027:up,21028:pp,21029:bp,21030:dp,21031:qS,21032:TS,21033:WS,21034:mp,21035:Dp,21036:GS,21037:AS,21038:xS,21039:yS,21040:rp,21041:kS,21042:wS,21043:RS,21044:ES,21045:bS,21046:YS,21047:tp,21048:MS,21050:Sp,21051:OS,21052:ip,22e3:CS,22001:FS,22002:LS,22003:jS,22004:lp},gg={2e4:Q1,20001:eS,20002:q1,20003:J1,20004:gS,20005:$1,20006:aS,20007:tS,20008:iS,20009:pS,20010:nS,20011:oS,20012:lS,20013:dS,20014:Y1,20015:cS,20016:uS,20017:mS,20018:sS,20019:rS,20020:hS,20021:SS,20022:fS},bg={...Sg,...pg,...gg},Sa={get:(e,a=!1)=>{const t=bg[e.lightCone];return!t||e.lightConePath!==e.path&&!(window!=null&&window.WEBGPU_DEBUG)?{content:()=>[],defaults:()=>({}),precomputeEffects:()=>{},finalizeCalculations:()=>{}}:t(e.lightConeSuperimposition-1,a,{element:e.element})}};function ad(e){var r;const a=V.getScoringMetadata(e.id),t=((r=a==null?void 0:a.traces)==null?void 0:r.deactivated)??[],s={...e.traces},o=[...e.traceTree];for(;o.length;){const l=o.pop();o.push(...l.children),t.includes(l.id)&&s[l.stat]&&(s[l.stat]=Math.max(0,s[l.stat]-l.value))}return s}function Ri(){const e={mainStat:n.HP,mainValue:0};for(const a of Object.values(n))e[a]=0;return{set:-1,augmentedStats:e,substats:[]}}function Dg(){return{[n.HP]:0,[n.ATK]:0,[n.DEF]:0}}const Gl={SpaceSealingStation:{key:"SpaceSealingStation",index:0,p2c:(e,a)=>{e.ATK_P.buff(.12,w.SpaceSealingStation)}},FleetOfTheAgeless:{key:"FleetOfTheAgeless",index:1,p2c:(e,a)=>{e.HP_P.buff(.12,w.FleetOfTheAgeless)}},PanCosmicCommercialEnterprise:{key:"PanCosmicCommercialEnterprise",index:2,p2c:(e,a)=>{e.EHR.buff(.1,w.PanCosmicCommercialEnterprise)}},BelobogOfTheArchitects:{key:"BelobogOfTheArchitects",index:3,p2c:(e,a)=>{e.DEF_P.buff(.15,w.BelobogOfTheArchitects)}},CelestialDifferentiator:{key:"CelestialDifferentiator",index:4,p2c:(e,a)=>{e.CD.buff(.16,w.CelestialDifferentiator)},p2x:(e,a,t)=>{t.enabledCelestialDifferentiator&&e.c.a[S.CD]>=1.2&&e.CR.buff(.6,w.CelestialDifferentiator)}},InertSalsotto:{key:"InertSalsotto",index:5,p2c:(e,a)=>{e.CR.buff(.08,w.InertSalsotto)}},TaliaKingdomOfBanditry:{key:"TaliaKingdomOfBanditry",index:6,p2c:(e,a)=>{e.BE.buff(.16,w.TaliaKingdomOfBanditry)}},SprightlyVonwacq:{key:"SprightlyVonwacq",index:7,p2c:(e,a)=>{e.ERR.buff(.05,w.SprightlyVonwacq)}},RutilantArena:{key:"RutilantArena",index:8,p2c:(e,a)=>{e.CR.buff(.08,w.RutilantArena)}},BrokenKeel:{key:"BrokenKeel",index:9,p2c:(e,a)=>{e.RES.buff(.1,w.BrokenKeel)}},FirmamentFrontlineGlamoth:{key:"FirmamentFrontlineGlamoth",index:10,p2c:(e,a)=>{e.ATK_P.buff(.12,w.FirmamentFrontlineGlamoth)}},PenaconyLandOfTheDreams:{key:"PenaconyLandOfTheDreams",index:11,p2c:(e,a)=>{e.ERR.buff(.05,w.PenaconyLandOfTheDreams)},p2x:(e,a,t)=>{t.enabledPenaconyLandOfTheDreams&&e.ELEMENTAL_DMG.buffMemo(.1,w.PenaconyLandOfTheDreams)}},SigoniaTheUnclaimedDesolation:{key:"SigoniaTheUnclaimedDesolation",index:12,p2c:(e,a)=>{e.CR.buff(.04,w.SigoniaTheUnclaimedDesolation)},p2x:(e,a,t)=>{e.CD.buff(.04*t.valueSigoniaTheUnclaimedDesolation,w.SigoniaTheUnclaimedDesolation)}},IzumoGenseiAndTakamaDivineRealm:{key:"IzumoGenseiAndTakamaDivineRealm",index:13,p2c:(e,a)=>{e.ATK_P.buff(.12,w.IzumoGenseiAndTakamaDivineRealm)},p2x:(e,a,t)=>{t.enabledIzumoGenseiAndTakamaDivineRealm&&e.CR.buff(.12,w.IzumoGenseiAndTakamaDivineRealm)}},DuranDynastyOfRunningWolves:{key:"DuranDynastyOfRunningWolves",index:14,p2c:(e,a)=>{},p2x:(e,a,t)=>{Ee(e,je,.05*t.valueDuranDynastyOfRunningWolves,w.DuranDynastyOfRunningWolves),t.valueDuranDynastyOfRunningWolves>=5&&e.CD.buff(.25,w.DuranDynastyOfRunningWolves)}},ForgeOfTheKalpagniLantern:{key:"ForgeOfTheKalpagniLantern",index:15,p2c:(e,a)=>{e.SPD_P.buff(.06,w.ForgeOfTheKalpagniLantern)},p2x:(e,a,t)=>{t.enabledForgeOfTheKalpagniLantern&&e.BE.buff(.4,w.ForgeOfTheKalpagniLantern)}},LushakaTheSunkenSeas:{key:"LushakaTheSunkenSeas",index:16,p2c:(e,a)=>{e.ERR.buff(.05,w.LushakaTheSunkenSeas)}},TheWondrousBananAmusementPark:{key:"TheWondrousBananAmusementPark",index:17,p2c:(e,a)=>{e.CD.buff(.16,w.TheWondrousBananAmusementPark)},p2x:(e,a,t)=>{t.enabledTheWondrousBananAmusementPark&&e.CD.buff(.32,w.TheWondrousBananAmusementPark)}},BoneCollectionsSereneDemesne:{key:"BoneCollectionsSereneDemesne",index:18,p2c:(e,a)=>{e.HP_P.buff(.12,w.BoneCollectionsSereneDemesne)}},GiantTreeOfRaptBrooding:{key:"GiantTreeOfRaptBrooding",index:19,p2c:(e,a)=>{e.SPD_P.buff(.06,w.GiantTreeOfRaptBrooding)}}},Pl={PasserbyOfWanderingCloud:{key:"PasserbyOfWanderingCloud",index:0,p2c:(e,a)=>{e.OHB.buff(.1,w.PasserbyOfWanderingCloud)}},MusketeerOfWildWheat:{key:"MusketeerOfWildWheat",index:1,p2c:(e,a)=>{e.ATK_P.buff(.12,w.MusketeerOfWildWheat)},p4c:(e,a)=>{e.SPD_P.buff(.06,w.MusketeerOfWildWheat)},p4x:(e,a,t)=>{Ee(e,Bt,.1,w.MusketeerOfWildWheat)}},KnightOfPurityPalace:{key:"KnightOfPurityPalace",index:2,p2c:(e,a)=>{e.DEF_P.buff(.15,w.KnightOfPurityPalace)},p4x:(e,a,t)=>{e.SHIELD_BOOST.buff(.2,w.KnightOfPurityPalace)}},HunterOfGlacialForest:{key:"HunterOfGlacialForest",index:3,p2c:(e,a)=>{a.elementalDamageType==n.Ice_DMG&&e.ICE_DMG_BOOST.buff(.1,w.HunterOfGlacialForest)},p4x:(e,a,t)=>{t.enabledHunterOfGlacialForest&&e.CD.buff(.25,w.HunterOfGlacialForest)}},ChampionOfStreetwiseBoxing:{key:"ChampionOfStreetwiseBoxing",index:4,p2c:(e,a)=>{a.elementalDamageType==n.Physical_DMG&&e.PHYSICAL_DMG_BOOST.buff(.1,w.ChampionOfStreetwiseBoxing)},p4x:(e,a,t)=>{e.ATK_P.buff(.05*t.valueChampionOfStreetwiseBoxing,w.ChampionOfStreetwiseBoxing)}},GuardOfWutheringSnow:{key:"GuardOfWutheringSnow",index:5,p2c:(e,a)=>{},p2x:(e,a,t)=>{e.DMG_RED_MULTI.multiply(1-.08,w.GuardOfWutheringSnow)}},FiresmithOfLavaForging:{key:"FiresmithOfLavaForging",index:6,p2c:(e,a)=>{a.elementalDamageType==n.Fire_DMG&&e.FIRE_DMG_BOOST.buff(.1,w.FiresmithOfLavaForging)},p4x:(e,a,t)=>{Ee(e,Me,.12,w.FiresmithOfLavaForging),t.enabledFiresmithOfLavaForging&&e.FIRE_DMG_BOOST.buff(.12,w.FiresmithOfLavaForging)}},GeniusOfBrilliantStars:{key:"GeniusOfBrilliantStars",index:7,p2c:(e,a)=>{a.elementalDamageType==n.Quantum_DMG&&e.QUANTUM_DMG_BOOST.buff(.1,w.GeniusOfBrilliantStars)},p4x:(e,a,t)=>{e.DEF_PEN.buff(t.enabledGeniusOfBrilliantStars?.2:.1,w.GeniusOfBrilliantStars)}},BandOfSizzlingThunder:{key:"BandOfSizzlingThunder",index:8,p2c:(e,a)=>{a.elementalDamageType==n.Lightning_DMG&&e.LIGHTNING_DMG_BOOST.buff(.1,w.BandOfSizzlingThunder)},p4x:(e,a,t)=>{t.enabledBandOfSizzlingThunder&&e.ATK_P.buff(.2,w.BandOfSizzlingThunder)}},EagleOfTwilightLine:{key:"EagleOfTwilightLine",index:9,p2c:(e,a)=>{a.elementalDamageType==n.Wind_DMG&&e.WIND_DMG_BOOST.buff(.1,w.EagleOfTwilightLine)}},ThiefOfShootingMeteor:{key:"ThiefOfShootingMeteor",index:10,p2c:(e,a)=>{e.BE.buff(.16,w.ThiefOfShootingMeteor)},p4c:(e,a)=>{e.BE.buff(.16,w.ThiefOfShootingMeteor)}},WastelanderOfBanditryDesert:{key:"WastelanderOfBanditryDesert",index:11,p2c:(e,a)=>{a.elementalDamageType==n.Imaginary_DMG&&e.IMAGINARY_DMG_BOOST.buff(.1,w.WastelanderOfBanditryDesert)},p4x:(e,a,t)=>{e.CD_BOOST.buff(.1*(t.valueWastelanderOfBanditryDesert==2?1:0),w.WastelanderOfBanditryDesert),t.valueWastelanderOfBanditryDesert>0&&e.CR_BOOST.buff(.1,w.WastelanderOfBanditryDesert)}},LongevousDisciple:{key:"LongevousDisciple",index:12,p2c:(e,a)=>{e.HP_P.buff(.12,w.LongevousDisciple)},p4x:(e,a,t)=>{e.CR.buff(.08*t.valueLongevousDisciple,w.LongevousDisciple)}},MessengerTraversingHackerspace:{key:"MessengerTraversingHackerspace",index:13,p2c:(e,a)=>{e.SPD_P.buff(.06,w.MessengerTraversingHackerspace)},p4x:(e,a,t)=>{t.enabledMessengerTraversingHackerspace&&e.SPD_P.buffTeam(.12,w.MessengerTraversingHackerspace)}},TheAshblazingGrandDuke:{key:"TheAshblazingGrandDuke",index:14,p2c:(e,a)=>{},p2x:(e,a,t)=>{Ee(e,je,.2,w.TheAshblazingGrandDuke)},p4x:(e,a,t)=>{e.ATK_P.buff(.06*t.valueTheAshblazingGrandDuke,w.TheAshblazingGrandDuke)}},PrisonerInDeepConfinement:{key:"PrisonerInDeepConfinement",index:15,p2c:(e,a)=>{e.ATK_P.buff(.12,w.PrisonerInDeepConfinement)},p4x:(e,a,t)=>{e.DEF_PEN.buff(.06*t.valuePrisonerInDeepConfinement,w.PrisonerInDeepConfinement)}},PioneerDiverOfDeadWaters:{key:"PioneerDiverOfDeadWaters",index:16,p2x:(e,a,t)=>{t.valuePioneerDiverOfDeadWaters>=0&&e.ELEMENTAL_DMG.buff(.12,w.PioneerDiverOfDeadWaters)},p4c:(e,a)=>{e.CR.buff(.04,w.PioneerDiverOfDeadWaters)},p4x:(e,a,t)=>{e.CD_BOOST.buff(Eg[t.valuePioneerDiverOfDeadWaters],w.PioneerDiverOfDeadWaters),t.valuePioneerDiverOfDeadWaters>2&&e.CR.buff(.04,w.PioneerDiverOfDeadWaters)}},WatchmakerMasterOfDreamMachinations:{key:"WatchmakerMasterOfDreamMachinations",index:17,p2c:(e,a)=>{e.BE.buff(.16,w.WatchmakerMasterOfDreamMachinations)},p4x:(e,a,t)=>{t.enabledWatchmakerMasterOfDreamMachinations&&e.BE.buffTeam(.3,w.WatchmakerMasterOfDreamMachinations)}},IronCavalryAgainstTheScourge:{key:"IronCavalryAgainstTheScourge",index:18,p2c:(e,a)=>{e.BE.buff(.16,w.IronCavalryAgainstTheScourge)}},TheWindSoaringValorous:{key:"TheWindSoaringValorous",index:19,p2c:(e,a)=>{e.ATK_P.buff(.12,w.TheWindSoaringValorous)},p4c:(e,a)=>{e.CR.buff(.06,w.TheWindSoaringValorous)},p4x:(e,a,t)=>{t.enabledTheWindSoaringValorous&&Ee(e,ye,.36,w.TheWindSoaringValorous)}},SacerdosRelivedOrdeal:{key:"SacerdosRelivedOrdeal",index:20,p2c:(e,a)=>{e.SPD_P.buff(.06,w.SacerdosRelivedOrdeal)},p4x:(e,a,t)=>{e.CD.buff(.18*t.valueSacerdosRelivedOrdeal,w.SacerdosRelivedOrdeal)}},ScholarLostInErudition:{key:"ScholarLostInErudition",index:21,p2c:(e,a)=>{e.CR.buff(.08,w.ScholarLostInErudition)},p4x:(e,a,t)=>{Ee(e,ye|Me,.2,w.ScholarLostInErudition),t.enabledScholarLostInErudition&&Ee(e,Me,.25,w.ScholarLostInErudition)}},HeroOfTriumphantSong:{key:"HeroOfTriumphantSong",index:22,p2c:(e,a)=>{e.ATK_P.buff(.12,w.HeroOfTriumphantSong)},p4x:(e,a,t)=>{t.enabledHeroOfTriumphantSong&&(e.SPD_P.buff(.06,w.HeroOfTriumphantSong),e.CD.buffDual(.3,w.HeroOfTriumphantSong))}},PoetOfMourningCollapse:{key:"PoetOfMourningCollapse",index:23,p2c:(e,a)=>{a.elementalDamageType==n.Quantum_DMG&&e.QUANTUM_DMG_BOOST.buff(.1,w.PoetOfMourningCollapse)},p4c:(e,a)=>{e.SPD_P.buff(-.08,w.PoetOfMourningCollapse)},p4x:(e,a,t)=>{e.CR.buffBaseDual((e.c.a[S.SPD]<110?.2:0)+(e.c.a[S.SPD]<95?.12:0),w.PoetOfMourningCollapse)}}},Cg={...Pl,...Gl},bt=Object.fromEntries(Object.keys(Cg).map(e=>[e,e])),Eg={[-1]:0,0:0,1:.08,2:.12,3:.16,4:.24},nd=Object.entries(Gl).sort((e,a)=>e[1].index-a[1].index).map(e=>e[1]),Tg=Object.entries(Gl).sort((e,a)=>e[1].index-a[1].index).map(e=>e[0]),gs=Object.entries(Pl).sort((e,a)=>e[1].index-a[1].index).map(e=>e[1]),id=Object.entries(Pl).sort((e,a)=>e[1].index-a[1].index).map(e=>e[0]);function Rg(e){const a=Object.create(null);for(let t=0;t<4;t++){const s=id[e[t]];a[s]=(a[s]??0)+1}return e[4]==e[5]&&(a[Tg[e[4]]]=2),a}function Bg(e,a,t,s){const o={};for(let r=0;r<4;r++){const l=s[r];if(o[l])continue;o[l]=!0;const c=id[l],u=t[c]??0;if(u>=2){const d=gs[l];u>=2&&d.p2c&&d.p2c(e,a),u>=4&&d.p4c&&d.p4c(e,a)}}if(s[4]==s[5]){const r=nd[s[4]];r.p2c&&r.p2c(e,a)}}function Ig(e,a){const t=e.a,s=a.characterStatsBreakdown.base,o=a.characterStatsBreakdown.lightCone,r=a.characterStatsBreakdown.traces;switch(t[S.ELEMENTAL_DMG]=0,a.elementalDamageType){case n.Physical_DMG:t[S.ELEMENTAL_DMG]=la(n.Physical_DMG,s,o,r,e,0);break;case n.Fire_DMG:t[S.ELEMENTAL_DMG]=la(n.Fire_DMG,s,o,r,e,0);break;case n.Ice_DMG:t[S.ELEMENTAL_DMG]=la(n.Ice_DMG,s,o,r,e,0);break;case n.Lightning_DMG:t[S.ELEMENTAL_DMG]=la(n.Lightning_DMG,s,o,r,e,0);break;case n.Wind_DMG:t[S.ELEMENTAL_DMG]=la(n.Wind_DMG,s,o,r,e,0);break;case n.Quantum_DMG:t[S.ELEMENTAL_DMG]=la(n.Quantum_DMG,s,o,r,e,0);break;case n.Imaginary_DMG:t[S.ELEMENTAL_DMG]=la(n.Imaginary_DMG,s,o,r,e,0);break}}function yg(e,a){const t=a.characterStatsBreakdown.base,s=a.characterStatsBreakdown.lightCone,o=a.characterStatsBreakdown.traces,r=e.a;r[S.SPD]=zs(n.SPD,n.SPD_P,a.baseSPD,s,o,e,0),r[S.HP]=zs(n.HP,n.HP_P,a.baseHP,s,o,e,0),r[S.ATK]=zs(n.ATK,n.ATK_P,a.baseATK,s,o,e,0),r[S.DEF]=zs(n.DEF,n.DEF_P,a.baseDEF,s,o,e,0),r[S.CR]=la(n.CR,t,s,o,e,0),r[S.CD]=la(n.CD,t,s,o,e,0),r[S.EHR]=la(n.EHR,t,s,o,e,0),r[S.RES]=la(n.RES,t,s,o,e,0),r[S.BE]=la(n.BE,t,s,o,e,0),r[S.ERR]=la(n.ERR,t,s,o,e,0),r[S.OHB]=la(n.OHB,t,s,o,e,0)}function Mg(e,a,t){const s=t.lightConeConditionalController,o=t.characterConditionalController;s.calculateBasicEffects&&s.calculateBasicEffects(e,a,t),o.calculateBasicEffects&&o.calculateBasicEffects(e,a,t)}function Gg(e,a,t){const s=a.setConditionals,o=e.a,r=e.c,l=r.sets,c=r.setsArray,u=t.combatBuffs;if(o[S.ATK]+=r.a[S.ATK]+u.ATK+u.ATK_P*t.baseATK,o[S.DEF]+=r.a[S.DEF]+u.DEF+u.DEF_P*t.baseDEF,o[S.HP]+=r.a[S.HP]+u.HP+u.HP_P*t.baseHP,o[S.SPD]+=r.a[S.SPD]+u.SPD+u.SPD_P*t.baseSPD,o[S.CD]+=r.a[S.CD]+u.CD,o[S.CR]+=r.a[S.CR]+u.CR,o[S.BE]+=r.a[S.BE]+u.BE,o[S.EHR]+=r.a[S.EHR],o[S.RES]+=r.a[S.RES],o[S.ERR]+=r.a[S.ERR],o[S.OHB]+=r.a[S.OHB],o[S.BASE_ATK]=t.baseATK,o[S.BASE_DEF]=t.baseDEF,o[S.BASE_HP]=t.baseHP,o[S.BASE_SPD]=t.baseSPD,e.a[S.MEMOSPRITE]){const d=e.m.c,m=e.m.c.a,h=e.m.a;m[S.ATK]=e.a[S.MEMO_BASE_ATK_SCALING]*r.a[S.ATK]+e.a[S.MEMO_BASE_ATK_FLAT],m[S.DEF]=e.a[S.MEMO_BASE_DEF_SCALING]*r.a[S.DEF]+e.a[S.MEMO_BASE_DEF_FLAT],m[S.HP]=e.a[S.MEMO_BASE_HP_SCALING]*r.a[S.HP]+e.a[S.MEMO_BASE_HP_FLAT],m[S.SPD]=e.a[S.MEMO_BASE_SPD_SCALING]*r.a[S.SPD]+e.a[S.MEMO_BASE_SPD_FLAT],h[S.BASE_ATK]=d.a[S.ATK],h[S.BASE_DEF]=d.a[S.DEF],h[S.BASE_HP]=d.a[S.HP],h[S.BASE_SPD]=d.a[S.SPD],h[S.ATK]+=d.a[S.ATK],h[S.DEF]+=d.a[S.DEF],h[S.HP]+=d.a[S.HP],h[S.SPD]+=d.a[S.SPD],h[S.CD]+=r.a[S.CD],h[S.CR]+=r.a[S.CR],h[S.BE]+=r.a[S.BE],h[S.EHR]+=r.a[S.EHR],h[S.RES]+=r.a[S.RES],h[S.ERR]+=r.a[S.ERR],h[S.OHB]+=r.a[S.OHB]}if(o[S.ELEMENTAL_DMG]+=u.DMG_BOOST,o[S.EFFECT_RES_PEN]+=u.EFFECT_RES_PEN,o[S.VULNERABILITY]+=u.VULNERABILITY,o[S.BREAK_EFFICIENCY_BOOST]+=u.BREAK_EFFICIENCY,yc(e,t.elementalDamageType,r.a[S.ELEMENTAL_DMG]),e.a[S.MEMOSPRITE]&&yc(e.m,t.elementalDamageType,r.a[S.ELEMENTAL_DMG]),Pg(e,t,s,l,c),o[S.SPD]+=o[S.SPD_P]*t.baseSPD,o[S.ATK]+=o[S.ATK_P]*t.baseATK,o[S.DEF]+=o[S.DEF_P]*t.baseDEF,o[S.HP]+=o[S.HP_P]*t.baseHP,e.a[S.MEMOSPRITE]){const d=e.m.a;d[S.SPD]+=d[S.SPD_P]*d[S.BASE_SPD],d[S.ATK]+=d[S.ATK_P]*d[S.BASE_ATK],d[S.DEF]+=d[S.DEF_P]*d[S.BASE_DEF],d[S.HP]+=d[S.HP_P]*d[S.BASE_HP]}c[4]==c[5]&&(Tt(bt.SpaceSealingStation,l)&&ra(sd,e,a,t),Tt(bt.FleetOfTheAgeless,l)&&ra(od,e,a,t),Tt(bt.BelobogOfTheArchitects,l)&&ra(rd,e,a,t),Tt(bt.PanCosmicCommercialEnterprise,l)&&ra(ld,e,a,t),Tt(bt.BrokenKeel,l)&&ra(cd,e,a,t),Tt(bt.TaliaKingdomOfBanditry,l)&&ra(ud,e,a,t),Tt(bt.BoneCollectionsSereneDemesne,l)&&ra(fd,e,a,t),Tt(bt.GiantTreeOfRaptBrooding,l)&&ra(dd,e,a,t),Tt(bt.GiantTreeOfRaptBrooding,l)&&ra(md,e,a,t));for(const d of t.characterConditionalController.dynamicConditionals??[])ra(d,e,a,t);for(const d of t.lightConeConditionalController.dynamicConditionals??[])ra(d,e,a,t);for(const d of a.teammateDynamicConditionals??[])ra(d,e,a,t);return c[4]==c[5]&&(Tt(bt.FirmamentFrontlineGlamoth,l)&&e.a[S.SPD]>=135&&e.ELEMENTAL_DMG.buff(e.a[S.SPD]>=160?.18:.12,w.FirmamentFrontlineGlamoth),Tt(bt.RutilantArena,l)&&e.a[S.CR]>=.7&&Ee(e,Bt|Me,.2,w.RutilantArena),Tt(bt.InertSalsotto,l)&&e.a[S.CR]>=.5&&Ee(e,ye|je,.15,w.InertSalsotto)),_g(bt.IronCavalryAgainstTheScourge,l)&&e.a[S.BE]>=1.5&&(en(e,ja,.1,w.IronCavalryAgainstTheScourge),en(e,Vu,e.a[S.BE]>=2.5?.15:0,w.IronCavalryAgainstTheScourge)),e}function Pg(e,a,t,s,o){const[r,l,c,u,d,m]=o;if(d==m){const h=nd[d];h.p2x&&h.p2x(e,a,t)}if(r===l&&l===c&&c===u){const h=gs[r];h.p2x&&h.p2x(e,a,t),h.p4x&&h.p4x(e,a,t);return}if(r===l||r===c||r===u){const h=gs[r];h.p2x&&h.p2x(e,a,t)}if((l===c||l===u)&&l!==r){const h=gs[l];h.p2x&&h.p2x(e,a,t)}if(c===u&&c!==r&&c!==l){const h=gs[c];h.p2x&&h.p2x(e,a,t)}}function Tt(e,a){return a[e]>>1}function _g(e,a){return a[e]>>2}function Ag(e,a,t,s,o,r,l,c){const u=e.a;if(a!=null&&a.condensedStats)for(const d of a.condensedStats)u[d[0]]+=d[1];if(t!=null&&t.condensedStats)for(const d of t.condensedStats)u[d[0]]+=d[1];if(s!=null&&s.condensedStats)for(const d of s.condensedStats)u[d[0]]+=d[1];if(o!=null&&o.condensedStats)for(const d of o.condensedStats)u[d[0]]+=d[1];if(r!=null&&r.condensedStats)for(const d of r.condensedStats)u[d[0]]+=d[1];if(l!=null&&l.condensedStats)for(const d of l.condensedStats)u[d[0]]+=d[1];c&&e.setWeight(a.weightScore+t.weightScore+s.weightScore+o.weightScore+r.weightScore+l.weightScore)}function la(e,a,t,s,o,r){return a[e]+t[e]+o.a[Nt[e]]+s[e]+r}function zs(e,a,t,s,o,r,l){return t*(1+l+r.a[Nt[a]]+o[a]+s[a])+r.a[Nt[e]]+o[e]}const sd={id:"SpaceSealingStationConditional",type:Qe.SET,activation:ze.SINGLE,dependsOn:[n.SPD],chainsTo:[n.ATK],condition:function(e,a,t){return Tt(bt.SpaceSealingStation,e.c.sets)&&e.a[S.SPD]>=120},effect:(e,a,t)=>{e.ATK.buffDynamic(.12*t.baseATK,w.SpaceSealingStation,a,t)},gpu:function(){return Ft(this,`
if (
  p2((*p_sets).SpaceSealingStation) >= 1 &&
  (*p_state).SpaceSealingStationConditional == 0.0 &&
  x.SPD >= 120
) {
  (*p_state).SpaceSealingStationConditional = 1.0;
  (*p_x).ATK += 0.12 * baseATK;
}
    `)}},od={id:"FleetOfTheAgelessConditional",type:Qe.SET,activation:ze.SINGLE,dependsOn:[n.SPD],chainsTo:[n.ATK],condition:function(e,a,t){return Tt(bt.FleetOfTheAgeless,e.c.sets)&&e.a[S.SPD]>=120},effect:(e,a,t)=>{e.ATK.buffDynamic(.08*e.a[S.BASE_ATK],w.FleetOfTheAgeless,a,t),e.a[S.MEMOSPRITE]&&e.m.ATK.buffDynamic(.08*e.a[S.BASE_ATK],w.FleetOfTheAgeless,a,t)},gpu:function(){return Ft(this,`
if (
  p2((*p_sets).FleetOfTheAgeless) >= 1 &&
  (*p_state).FleetOfTheAgelessConditional == 0.0 &&
  x.SPD >= 120
) {
  (*p_state).FleetOfTheAgelessConditional = 1.0;
  (*p_x).ATK += 0.08 * baseATK;
  (*p_m).ATK += 0.08 * baseATK;
}
    `)}},rd={id:"BelobogOfTheArchitectsConditional",type:Qe.SET,activation:ze.SINGLE,dependsOn:[n.EHR],chainsTo:[n.DEF],condition:function(e,a,t){return Tt(bt.BelobogOfTheArchitects,e.c.sets)&&e.a[S.EHR]>=.5},effect:(e,a,t)=>{e.DEF.buffDynamic(.15*t.baseDEF,w.BelobogOfTheArchitects,a,t)},gpu:function(){return Ft(this,`
if (
  p2((*p_sets).BelobogOfTheArchitects) >= 1 &&
  (*p_state).BelobogOfTheArchitectsConditional == 0.0 &&
  x.EHR >= 0.50
) {
  (*p_state).BelobogOfTheArchitectsConditional = 1.0;
  (*p_x).DEF += 0.15 * baseDEF;
}
    `)}},ld={id:"PanCosmicCommercialEnterpriseConditional",type:Qe.SET,activation:ze.CONTINUOUS,dependsOn:[n.EHR],chainsTo:[n.ATK],condition:function(e,a,t){return Tt(bt.PanCosmicCommercialEnterprise,e.c.sets)},effect:function(e,a,t){const s=a.conditionalState[this.id]||0,o=Math.min(.25,.25*e.a[S.EHR])*t.baseATK;return a.conditionalState[this.id]=o,e.ATK.buffDynamic(o-s,w.PanCosmicCommercialEnterprise,a,t),o},gpu:function(){return Ft(this,`
if (
  p2((*p_sets).PanCosmicCommercialEnterprise) >= 1
) {
  let stateValue: f32 = (*p_state).PanCosmicCommercialEnterpriseConditional;
  let buffValue: f32 = min(0.25, 0.25 * x.EHR) * baseATK;

  (*p_state).PanCosmicCommercialEnterpriseConditional = buffValue;
  (*p_x).ATK += buffValue - stateValue;
}
    `)}},cd={id:"BrokenKeelConditional",type:Qe.SET,activation:ze.SINGLE,dependsOn:[n.RES],chainsTo:[n.CD],condition:function(e,a,t){return Tt(bt.BrokenKeel,e.c.sets)&&e.a[S.RES]>=.3},effect:function(e,a,t){e.CD.buffDynamic(.1,w.BrokenKeel,a,t),e.a[S.MEMOSPRITE]&&e.m.CD.buffDynamic(.1,w.BrokenKeel,a,t)},gpu:function(){return Ft(this,`
if (
  p2((*p_sets).BrokenKeel) >= 1 &&
  (*p_state).BrokenKeelConditional == 0.0 &&
  x.RES >= 0.30
) {
  (*p_state).BrokenKeelConditional = 1.0;
  (*p_x).CD += 0.10;
  (*p_m).CD += 0.10;
}
    `)}},ud={id:"TaliaKingdomOfBanditryConditional",type:Qe.SET,activation:ze.SINGLE,dependsOn:[n.SPD],chainsTo:[n.BE],condition:function(e,a,t){return Tt(bt.TaliaKingdomOfBanditry,e.c.sets)&&e.a[S.SPD]>=145},effect:function(e,a,t){e.BE.buffDynamic(.2,w.TaliaKingdomOfBanditry,a,t)},gpu:function(){return Ft(this,`
if (
  p2((*p_sets).TaliaKingdomOfBanditry) >= 1 &&
  (*p_state).TaliaKingdomOfBanditryConditional == 0.0 &&
  x.SPD >= 145
) {
  (*p_state).TaliaKingdomOfBanditryConditional = 1.0;
  (*p_x).BE += 0.20;
}
    `)}},dd={id:"GiantTreeOfRaptBrooding135Conditional",type:Qe.SET,activation:ze.SINGLE,dependsOn:[n.SPD],chainsTo:[n.OHB],condition:function(e,a,t){return Tt(bt.GiantTreeOfRaptBrooding,e.c.sets)&&e.a[S.SPD]>=135},effect:(e,a,t)=>{e.OHB.buffDynamic(.12,w.GiantTreeOfRaptBrooding,a,t),e.m.OHB.buffDynamic(.12,w.GiantTreeOfRaptBrooding,a,t)},gpu:function(){return Ft(this,`
if (
  p2((*p_sets).GiantTreeOfRaptBrooding) >= 1 &&
  (*p_state).GiantTreeOfRaptBrooding135Conditional == 0.0 &&
  x.SPD >= 135
) {
  (*p_state).GiantTreeOfRaptBrooding135Conditional = 1.0;
  (*p_x).OHB += 0.12;
  (*p_m).OHB += 0.12;
}
    `)}},md={id:"GiantTreeOfRaptBrooding180Conditional",type:Qe.SET,activation:ze.SINGLE,dependsOn:[n.SPD],chainsTo:[n.OHB],condition:function(e,a,t){return Tt(bt.GiantTreeOfRaptBrooding,e.c.sets)&&e.a[S.SPD]>=180},effect:(e,a,t)=>{e.OHB.buffDynamic(.08,w.GiantTreeOfRaptBrooding,a,t),e.m.OHB.buffDynamic(.08,w.GiantTreeOfRaptBrooding,a,t)},gpu:function(){return Ft(this,`
if (
  p2((*p_sets).GiantTreeOfRaptBrooding) >= 1 &&
  (*p_state).GiantTreeOfRaptBrooding180Conditional == 0.0 &&
  x.SPD >= 180
) {
  (*p_state).GiantTreeOfRaptBrooding180Conditional = 1.0;
  (*p_x).OHB += 0.08;
  (*p_m).OHB += 0.08;
}
    `)}},fd={id:"BoneCollectionsSereneDemesneConditional",type:Qe.SET,activation:ze.SINGLE,dependsOn:[n.HP],chainsTo:[n.CD],condition:function(e,a,t){return Tt(bt.BoneCollectionsSereneDemesne,e.c.sets)&&e.a[S.HP]>=5e3},effect:(e,a,t)=>{e.CD.buffBaseDualDynamic(.28,w.BoneCollectionsSereneDemesne,a,t)},gpu:function(){return Ft(this,`
if (
  p2((*p_sets).BoneCollectionsSereneDemesne) >= 1 &&
  (*p_state).BoneCollectionsSereneDemesneConditional == 0.0 &&
  x.HP >= 5000
) {
  (*p_state).BoneCollectionsSereneDemesneConditional = 1.0;
  (*p_x).CD += 0.28;
  (*p_m).CD += 0.28;
}
    `)}},xg=[sd,od,rd,ld,cd,ud,dd,md,fd];function Lg(e,a){const t=Ta.get(a),s=Sa.get(a),o=vg();ho(o,s.dynamicConditionals??[]),ho(o,t.dynamicConditionals??[]),ho(o,xg||[]),sr(o,a.teammate0Metadata,e,0),sr(o,a.teammate1Metadata,e,1),sr(o,a.teammate2Metadata,e,2),e.conditionalRegistry=o,e.conditionalState={}}function sr(e,a,t,s){if(a){const r=(Ta.get(a).teammateDynamicConditionals??[]).map(l=>{const c=Og(l,s);return t.teammateDynamicConditionals.push(c),c});ho(e,r)}}function Og(e,a){const t={...e,teammateIndex:a};return t.id+=`_Teammate${a}`,t}function vg(){return{[n.HP]:[],[n.ATK]:[],[n.DEF]:[],[n.SPD]:[],[n.CR]:[],[n.CD]:[],[n.EHR]:[],[n.RES]:[],[n.BE]:[],[n.OHB]:[],[n.ERR]:[]}}function ho(e,a){for(const t of a)for(const s of t.dependsOn)e[s].push(t)}function Hg(e,a){const t=[Fg(e)],s=[wg(e)].filter(o=>o.id==a.characterId);for(let o=1;o<e.comboAbilities.length;o++){const r=e.comboAbilities[o];for(const l of t)l.processAbility(r,o);for(const l of s)l.processAbility(r,o)}}function Fg(e,a){return{id:G.ScholarLostInErudition,state:{scholarActivated:!1},processAbility:function(t,s){t=="ULT"&&(this.state.scholarActivated=!0),t=="SKILL"&&this.state.scholarActivated?(this.state.scholarActivated=!1,Ac(e,G.ScholarLostInErudition,s,!0)):Ac(e,G.ScholarLostInErudition,s,!1)}}}function wg(e,a){return{id:"1407",state:{memoSkillEnhances:3,memoDmgStacks:0,e2Activated:!1},processAbility:function(t,s){let o=this.state.memoDmgStacks;if(t=="MEMO_SKILL"){const r=o+1;Bi(e,"memoDmgStacks",s,r),Bi(e,"memoSkillEnhances",s,Math.min(3,r)),o=Math.min(6,o+1)}else t=="MEMO_TALENT"?(Bi(e,"memoDmgStacks",s,o),Bi(e,"memoSkillEnhances",s,1)):(o=0,Bi(e,"memoDmgStacks",s,o),Bi(e,"memoSkillEnhances",s,1));this.state.memoDmgStacks=o,t=="ULT"&&(this.state.e2Activated=!0),t=="MEMO_SKILL"&&this.state.e2Activated?(this.state.e2Activated=!1,xc(e,"e2MemoSkillDmgBoost",s,!0)):xc(e,"e2MemoSkillDmgBoost",s,!1)}}}function Ac(e,a,t,s){const o=e.comboCharacter.setConditionals[a];o.activations[t]=s}function xc(e,a,t,s){const o=e.comboCharacter.characterConditionals[a];o&&(o.activations[t]=s)}function Bi(e,a,t,s){const o=e.comboCharacter.characterConditionals[a];if(o){const r=o.partitions.find(l=>l.value==s);if(r)o.partitions.forEach(l=>l.activations[t]=!1),r.activations[t]=!0;else{o.partitions.forEach(c=>c.activations[t]=!1);const l={value:s,activations:new Array(e.comboAbilities.length).fill(!1)};l.activations[t]=!0,o.partitions.push(l)}o.partitions=o.partitions.sort((l,c)=>l.value-c.value)}}function kg(e){const a={};for(const t of Object.values(f.Sets))a[t]=qi[t].selectionOptions?qi[t].selectionOptions(e):[];return a}const qi={[G.PasserbyOfWanderingCloud]:{type:he.BOOLEAN},[G.MusketeerOfWildWheat]:{type:he.BOOLEAN},[G.KnightOfPurityPalace]:{type:he.BOOLEAN},[G.HunterOfGlacialForest]:{type:he.BOOLEAN,modifiable:!0},[G.ChampionOfStreetwiseBoxing]:{type:he.SELECT,modifiable:!0,selectionOptions:Ng},[G.GuardOfWutheringSnow]:{type:he.BOOLEAN},[G.FiresmithOfLavaForging]:{type:he.BOOLEAN,modifiable:!0},[G.GeniusOfBrilliantStars]:{type:he.BOOLEAN,modifiable:!0},[G.BandOfSizzlingThunder]:{type:he.BOOLEAN,modifiable:!0},[G.EagleOfTwilightLine]:{type:he.BOOLEAN},[G.ThiefOfShootingMeteor]:{type:he.BOOLEAN},[G.WastelanderOfBanditryDesert]:{type:he.SELECT,selectionOptions:Ug,modifiable:!0},[G.LongevousDisciple]:{type:he.SELECT,selectionOptions:jg,modifiable:!0},[G.MessengerTraversingHackerspace]:{type:he.BOOLEAN,modifiable:!0},[G.TheAshblazingGrandDuke]:{type:he.SELECT,selectionOptions:Wg,modifiable:!0},[G.PrisonerInDeepConfinement]:{type:he.SELECT,selectionOptions:Vg,modifiable:!0},[G.PioneerDiverOfDeadWaters]:{type:he.SELECT,selectionOptions:Zg,modifiable:!0},[G.WatchmakerMasterOfDreamMachinations]:{type:he.BOOLEAN,modifiable:!0},[G.IronCavalryAgainstTheScourge]:{type:he.BOOLEAN},[G.TheWindSoaringValorous]:{type:he.BOOLEAN,modifiable:!0},[G.SacerdosRelivedOrdeal]:{type:he.SELECT,modifiable:!0,selectionOptions:Kg},[G.ScholarLostInErudition]:{type:he.BOOLEAN,modifiable:!0},[G.HeroOfTriumphantSong]:{type:he.BOOLEAN,modifiable:!0},[G.PoetOfMourningCollapse]:{type:he.BOOLEAN,modifiable:!1},[G.SpaceSealingStation]:{type:he.BOOLEAN},[G.FleetOfTheAgeless]:{type:he.BOOLEAN},[G.PanCosmicCommercialEnterprise]:{type:he.BOOLEAN},[G.BelobogOfTheArchitects]:{type:he.BOOLEAN},[G.CelestialDifferentiator]:{type:he.BOOLEAN,modifiable:!0},[G.InertSalsotto]:{type:he.BOOLEAN},[G.TaliaKingdomOfBanditry]:{type:he.BOOLEAN},[G.SprightlyVonwacq]:{type:he.BOOLEAN},[G.RutilantArena]:{type:he.BOOLEAN},[G.BrokenKeel]:{type:he.BOOLEAN},[G.FirmamentFrontlineGlamoth]:{type:he.BOOLEAN},[G.PenaconyLandOfTheDreams]:{type:he.BOOLEAN},[G.SigoniaTheUnclaimedDesolation]:{type:he.SELECT,modifiable:!0,selectionOptions:zg},[G.IzumoGenseiAndTakamaDivineRealm]:{type:he.BOOLEAN,modifiable:!0},[G.DuranDynastyOfRunningWolves]:{type:he.SELECT,modifiable:!0,selectionOptions:Xg},[G.ForgeOfTheKalpagniLantern]:{type:he.BOOLEAN,modifiable:!0},[G.LushakaTheSunkenSeas]:{type:he.BOOLEAN},[G.TheWondrousBananAmusementPark]:{type:he.BOOLEAN,modifiable:!0},[G.BoneCollectionsSereneDemesne]:{type:he.BOOLEAN},[G.GiantTreeOfRaptBrooding]:{type:he.BOOLEAN}};function Kg(e){const a=[];for(let t=0;t<=2;t++)a.push({display:e("Sacerdos.Display",{stackCount:t}),value:t,label:e("Sacerdos.Label",{stackCount:t,buffValue:b.precisionRound(18*t)})});return a}function Ng(e){const a=[];for(let t=0;t<=5;t++)a.push({display:e("Streetwise.Display",{stackCount:t}),value:t,label:e("Streetwise.Label",{stackCount:t,buffValue:b.precisionRound(5*t)})});return a}function Ug(e){return[{display:e("Wastelander.Off.Display"),value:0,label:e("Wastelander.Off.Label")},{display:e("Wastelander.Debuffed.Display"),value:1,label:e("Wastelander.Debuffed.Label")},{display:e("Wastelander.Imprisoned.Display"),value:2,label:e("Wastelander.Imprisoned.Label")}]}function jg(e){const a=[];for(let t=0;t<=2;t++)a.push({display:e("Longevous.Display",{stackCount:t}),value:t,label:e("Longevous.Label",{stackCount:t,buffValue:b.precisionRound(8*t)})});return a}function Wg(e){const a=[];for(let t=0;t<=8;t++)a.push({display:e("Ashblazing.Display",{stackCount:t}),value:t,label:e("Ashblazing.Label",{stackCount:t,buffValue:b.precisionRound(6*t)})});return a}function Vg(e){const a=[];for(let t=0;t<=3;t++)a.push({display:e("Prisoner.Display",{stackCount:t}),value:t,label:e("Prisoner.Label",{stackCount:t,buffValue:b.precisionRound(6*t)})});return a}function Zg(e){return[{display:e("Diver.Off.Display"),value:-1,label:e("Diver.Off.Label")},{display:e("Diver.1Debuff.Display"),value:0,label:e("Diver.1Debuff.Label")},{display:e("Diver.2Debuff.Display"),value:1,label:e("Diver.2Debuff.Label")},{display:e("Diver.2+Debuff.Display"),value:2,label:e("Diver.2+Debuff.Label")},{display:e("Diver.3Debuff.Display"),value:3,label:e("Diver.3Debuff.Label")},{display:e("Diver.3+Debuff.Display"),value:4,label:e("Diver.3+Debuff.Label")}]}function zg(e){const a=[];for(let t=0;t<=10;t++)a.push({display:e("Sigonia.Display",{stackCount:t}),value:t,label:e("Sigonia.Label",{stackCount:t,buffValue:b.precisionRound(4*t)})});return a}function Xg(e){const a=[];for(let t=0;t<=5;t++)a.push({display:e("Duran.Display",{stackCount:t}),value:t,label:e("Duran.Label",{stackCount:t,buffValue:b.precisionRound(5*t)})});return a[5].label=e("Duran.Label5"),a}let Xs;const Pe={save:()=>{const e=window.store.getState(),a={relics:V.getRelics(),characters:V.getCharacters(),scorerId:e.scorerId,scoringMetadataOverrides:e.scoringMetadataOverrides,showcasePreferences:e.showcasePreferences,optimizerMenuState:e.optimizerMenuState,excludedRelicPotentialCharacters:e.excludedRelicPotentialCharacters,savedSession:e.savedSession,settings:e.settings,version:Co,warpRequest:e.warpRequest,relicLocator:{inventoryWidth:e.inventoryWidth,rowLimit:e.rowLimit}};console.log("Saved state");const t=JSON.stringify(a);return localStorage.state=t,Xs=null,t},delayedSave:(e=5e3)=>{Xs&&clearTimeout(Xs),Xs=setTimeout(()=>{Pe.save()},e)},load:(e=!0)=>{try{const a=localStorage.state;if(a){const t=JSON.parse(a);return console.log("Loaded SaveState"),V.setStore(t,e),!0}return console.log("No SaveState found"),!1}catch(a){return console.error("Error loading state",a),!1}}};function xn(e,a){return e.includes(a)}function Yg(e,a){return e.reduce((t,s)=>(t[s[a]]=s,t),{})}function Jg(e){return e.reduce((a,t)=>(a[t]=!0,a),{})}function Qg(e){return e.filter((a,t,s)=>s.indexOf(a)===t)}function $g(e){return e.filter(a=>a!=null)}function Bo(e,a){var h,g;const t=V.getMetadata();t.lightCones,t.characters;const s={};if(!e.characterId)return s;const o=9;if(s.comboAbilities=[null],e.comboAbilities)for(let C=1;C<=9;C++){const M=e.comboAbilities[C];if(M==null)break;s.comboAbilities.push(M)}const r=Un(e,t),l=Ta.get(r),c=Sa.get(r),u=e.characterConditionals,d=e.lightConeConditionals,m=e.setConditionals;if(s.comboCharacter={metadata:r,characterConditionals:Io(u,l.content(),l.defaults(),o),lightConeConditionals:Io(d,c.content(),c.defaults(),o),setConditionals:t2(m,o),displayedRelicSets:[],displayedOrnamentSets:[]},s.comboTeammate0=lr(e.teammate0,o,t),s.comboTeammate1=lr(e.teammate1,o,t),s.comboTeammate2=lr(e.teammate2,o,t),e.comboStateJson&&a){const C=JSON.parse(e.comboStateJson);s.comboCharacter.displayedOrnamentSets=((h=C==null?void 0:C.comboCharacter)==null?void 0:h.displayedOrnamentSets)??[],s.comboCharacter.displayedRelicSets=((g=C==null?void 0:C.comboCharacter)==null?void 0:g.displayedRelicSets)??[],e2(s,C)}return Hg(s,e),or(s.comboCharacter.characterConditionals),or(s.comboCharacter.lightConeConditionals),or(s.comboCharacter.setConditionals),qg(e,s),s}function or(e){if(e){for(const[a,t]of Object.entries(e))if(t.type==he.NUMBER){const s=t;for(let o=0;o<s.partitions.length;o++){const r=s.partitions[o];if(r.activations[0]){s.partitions.splice(o,1),s.partitions.unshift(r);break}}}}}function Un(e,a){var t,s,o;return{characterId:e.characterId,characterEidolon:e.characterEidolon,path:(t=a.characters[e.characterId])==null?void 0:t.path,lightCone:e.lightCone,lightConeSuperimposition:e.lightConeSuperimposition,lightConePath:(s=a.lightCones[e.lightCone])==null?void 0:s.path,element:(o=a.characters[e.characterId])==null?void 0:o.element}}function qg(e,a){const t=os({id:e.characterId}),s=V.getMetadata().characters[e.characterId].scoringMetadata.presets||[];for(const c of s)c.apply(t);const o=[];for(const[c,u]of Object.entries(t.setConditionals)){const d=u[1],m=a.comboCharacter.setConditionals[c];if(!m)o.push(c);else if(m.type==he.BOOLEAN)for(let h=0;h<a.comboAbilities.length;h++){const g=m.activations[h];if(g==null)break;if(g!=d){o.push(c);break}}else if(m.type==he.SELECT){for(const h of m.partitions)if(h.value!=d){o.push(c);break}}}const r=o.filter(c=>xn(pn,c)),l=o.filter(c=>xn(gn,c));a.comboCharacter.displayedRelicSets=Array.from(new Set([...r,...a.comboCharacter.displayedRelicSets])),a.comboCharacter.displayedOrnamentSets=Array.from(new Set([...l,...a.comboCharacter.displayedOrnamentSets]))}function e2(e,a){var t,s,o,r,l;console.log("mergeComboStates"),e.comboCharacter.metadata.characterId==((s=(t=a==null?void 0:a.comboCharacter)==null?void 0:t.metadata)==null?void 0:s.characterId)&&(ti(e.comboCharacter.characterConditionals,(o=a==null?void 0:a.comboCharacter)==null?void 0:o.characterConditionals),ti(e.comboCharacter.lightConeConditionals,(r=a==null?void 0:a.comboCharacter)==null?void 0:r.lightConeConditionals),ti(e.comboCharacter.setConditionals,(l=a==null?void 0:a.comboCharacter)==null?void 0:l.setConditionals),rr(e.comboTeammate0,a==null?void 0:a.comboTeammate0),rr(e.comboTeammate1,a==null?void 0:a.comboTeammate1),rr(e.comboTeammate2,a==null?void 0:a.comboTeammate2))}function rr(e,a){!e||!a||(ti(e.characterConditionals,a.characterConditionals),ti(e.lightConeConditionals,a.lightConeConditionals),ti(e.relicSetConditionals,a.relicSetConditionals),ti(e.ornamentSetConditionals,a.ornamentSetConditionals))}function ti(e,a){if(a)for(const[t,s]of Object.entries(e)){const o=a[t];if(o&&s.type==o.type)if(s.type==he.BOOLEAN){const r=s,l=o;l.activations[0]=r.activations[0],e[t]=o}else{const r=s,l=o,c=[],u={};for(let d=0;d<l.partitions.length;d++){const m=l.partitions[d];if(u[m.value])for(let h=0;h<u[m.value].activations.length;h++)u[m.value].activations[h]=u[m.value].activations[h]||l.partitions[d].activations[h];else u[m.value]=m,c.push(m)}for(let d=0;d<r.partitions.length;d++){const m=r.partitions[d];u[m.value]?u[m.value].activations[0]=r.partitions[d].activations[0]:(u[m.value]=m,c.push(m))}l.partitions=c,e[t]=o}}}function Io(e,a,t,s){const o={};for(const r of a)if(!r.disabled){if(r.formItem=="switch"){const l=e[r.id]??t[r.id],c=Array(s).fill(l);o[r.id]={type:he.BOOLEAN,activations:c}}else if(r.formItem=="slider"){const l=e[r.id]??t[r.id],c=Array(s).fill(!0),u={value:l,activations:c};o[r.id]={type:he.NUMBER,partitions:[u]}}else if(r.formItem=="select"){const l=e[r.id]??t[r.id],c=Array(s).fill(!0),u={value:l,activations:c};o[r.id]={type:he.SELECT,partitions:[u]}}}return o}function t2(e,a){const t={};for(const[s,o]of Object.entries(e)){const r=o[1];if(qi[s].type==he.SELECT){const l=r,c=Array(a).fill(!0),u={value:l,activations:c};t[s]={type:he.SELECT,partitions:[u]}}else{const l=Array(a).fill(r);t[s]={type:he.BOOLEAN,activations:l}}}return t}function lr(e,a,t){var h,g,C,M;if(!(e!=null&&e.characterId))return null;const s=e.characterConditionals||{},o=e.lightConeConditionals||{},r=Un(e,t),l=Ta.get(r),c=Sa.get(r),u={},d={};return e.teamRelicSet&&(u[e.teamRelicSet]={type:he.BOOLEAN,activations:Array(a).fill(!0)}),e.teamOrnamentSet&&(d[e.teamOrnamentSet]={type:he.BOOLEAN,activations:Array(a).fill(!0)}),{metadata:r,characterConditionals:Io(s,((h=l.teammateContent)==null?void 0:h.call(l))??[],((g=l.teammateDefaults)==null?void 0:g.call(l))??{},a),lightConeConditionals:Io(o,((C=c.teammateContent)==null?void 0:C.call(c))??[],((M=c.teammateDefaults)==null?void 0:M.call(c))??{},a),relicSetConditionals:u,ornamentSetConditionals:d}}function _l(e,a,t){let s;if(e.includes("comboCharacter")){const o=t.comboCharacter;e.includes("RelicSets")?s=o.setConditionals:e.includes("LightCone")?s=o.lightConeConditionals:s=o.characterConditionals}else if(e.includes("comboTeammate")){const o=e.substring(0,14),r=t[o];e.includes("RelicSet")?s=r.relicSetConditionals:e.includes("OrnamentSet")?s=r.ornamentSetConditionals:e.includes("LightCone")?s=r.lightConeConditionals:s=r.characterConditionals}else return null;return s[a]}function hd(e,a){if(!e.id)return null;const t=_l(e.source,e.id,a);if(!t)return null;if(t.type==he.BOOLEAN){const s=t,o=s.activations;return{comboConditional:s,activations:o,index:e.index,value:o[e.index]}}else if(t.type==he.NUMBER){const s=t,o=s.partitions[e.partitionIndex].activations;return{comboConditional:s,activations:o,index:e.index,value:o[e.index]}}else if(t.type==he.SELECT){const s=t,o=s.partitions[e.partitionIndex].activations;return{comboConditional:s,activations:o,index:e.index,value:o[e.index]}}return null}function Al(e,a){const t=JSON.parse(e);return hd(t,a)}function Lc(e,a,t){const s=JSON.parse(e);if(!s.id||s.index==0)return;const o=Al(e,t);o&&(o.comboConditional.type==he.NUMBER||o.comboConditional.type==he.SELECT||(o.activations[o.index]=a))}function Oc(e,a){console.log("updatePartitionActivation");const t=JSON.parse(e);if(!t.id||t.index==0)return;const s=Al(e,a);if(s&&(s.comboConditional.type==he.NUMBER||s.comboConditional.type==he.SELECT)){const o=s.comboConditional,r=t.partitionIndex,l=t.index;for(let c=0;c<o.partitions.length;c++){const u=o.partitions[c];u.activations[l]=c==r}window.store.getState().setComboState({...a})}}function Sd(e,a,t){console.log("updateAddPartition");const s=window.store.getState().comboState,o=_l(e,a,s);if(!o)return null;const r=o.partitions[t];o.partitions.push({value:r.value,activations:Array(r.activations.length).fill(!1)}),window.store.getState().setComboState({...s})}function pd(e,a,t){if(console.log("updateDeletePartition"),t==0)return;const s=window.store.getState().comboState,o=_l(e,a,s);if(!o)return null;o.partitions.splice(t,1);for(let r=0;r<o.partitions[0].activations.length;r++){let l=!1;for(let c=0;c<o.partitions.length;c++)if(o.partitions[c].activations[r]){l=!0;break}l||(o.partitions[0].activations[r]=!0)}window.store.getState().setComboState({...s})}function vc(e,a){console.log("updateSelectedSets");const t=window.store.getState().comboState,s=t.comboCharacter.setConditionals;if(a){t.comboCharacter.displayedOrnamentSets=e;for(const o of Object.values(bi))e.includes(o)?s[o].display=!0:s[o].display=!1}else{t.comboCharacter.displayedRelicSets=e;for(const o of Object.values(gi))e.includes(o)?s[o].display=!0:s[o].display=!1}xl(t),window.store.getState().setComboState({...t})}function gd(e,a,t,s){console.log("updateNumberDefaultSelection");const o=window.store.getState().comboState,l=hd({id:a,source:e,index:0,partitionIndex:t},o);if(l&&(l.comboConditional.type==he.NUMBER||l.comboConditional.type==he.SELECT)){const c=l.comboConditional;c.partitions[t].value=s,window.store.getState().setComboState({...o})}}function a2(e,a){e.splice(a,1),e.push(e[0])}function bd(e,a){for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(t==="activations"&&Array.isArray(e[t])&&a2(e[t],a),typeof e[t]=="object"&&e[t]!==null&&bd(e[t],a))}function Dd(e,a){for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(t==="activations"&&Array.isArray(e[t])&&(e[t][a]=e[t][0]),typeof e[t]=="object"&&e[t]!==null&&Dd(e[t],a))}function Hc(e,a){console.log("updateAbilityRotation");const t=window.store.getState().comboState,s=t.comboAbilities;if(!(e>s.length)){if(a==null){if(s.length<=2)return;s.splice(e,1),bd(t,e)}else s[e]=a,Dd(t,e);window.store.getState().setComboState({...t})}}function xl(e){console.log("updateFormState"),window.optimizerForm.setFieldValue("comboStateJson",JSON.stringify(e)),window.optimizerForm.setFieldValue("comboAbilities",e.comboAbilities);const a=de.getForm();V.replaceCharacterForm(a),Pe.delayedSave(1e3)}function sn(e,a,t=!1){for(const[s,o]of Object.entries(e)){const r=a[s];if(r&&r.type==he.BOOLEAN)for(let l=0;l<=8;l++)t?r.activations[l]=o[1]:r.activations[l]=o}}function n2(e){var t,s,o,r,l,c,u,d,m,h,g,C;console.log("updateConditionalChange",e);const a=window.store.getState().comboState;e.characterConditionals&&sn(e.characterConditionals,a.comboCharacter.characterConditionals),e.lightConeConditionals&&sn(e.lightConeConditionals,a.comboCharacter.lightConeConditionals),e.setConditionals&&sn(e.setConditionals,a.comboCharacter.setConditionals,!0),(t=e.teammate0)!=null&&t.characterConditionals&&sn(e.teammate0.characterConditionals,((s=a.comboTeammate0)==null?void 0:s.characterConditionals)??{}),(o=e.teammate0)!=null&&o.lightConeConditionals&&sn(e.teammate0.lightConeConditionals,((r=a.comboTeammate0)==null?void 0:r.lightConeConditionals)??{}),(l=e.teammate1)!=null&&l.characterConditionals&&sn(e.teammate1.characterConditionals,((c=a.comboTeammate1)==null?void 0:c.characterConditionals)??{}),(u=e.teammate1)!=null&&u.lightConeConditionals&&sn(e.teammate1.lightConeConditionals,((d=a.comboTeammate1)==null?void 0:d.lightConeConditionals)??{}),(m=e.teammate2)!=null&&m.characterConditionals&&sn(e.teammate2.characterConditionals,((h=a.comboTeammate2)==null?void 0:h.characterConditionals)??{}),(g=e.teammate2)!=null&&g.lightConeConditionals&&sn(e.teammate2.lightConeConditionals,((C=a.comboTeammate2)==null?void 0:C.lightConeConditionals)??{}),window.store.getState().setComboState({...a}),xl(a)}const Fc="1313";function Cd(e,a){if((!e.comboStateJson||e.comboStateJson=="{}")&&(e.comboType="simple"),e.comboType=="advanced"){const t=Bo(e,!0);wc(t,e,a)}else{const t=Bo(e,!1);wc(t,e,a)}}function wc(e,a,t){const s=l2(a.comboAbilities),o=[];for(let r=0;r<s.length;r++)o.push(i2(r,e,s,a,t));t.actions=o,t.comboDot=a.comboDot||0,t.comboBreak=a.comboBreak||0,t.activeAbilities=t.characterConditionalController.activeAbilities??[],t.activeAbilityFlags=t.activeAbilities.reduce((r,l)=>r|l,0)}function i2(e,a,t,s,o){const r={characterConditionals:{},lightConeConditionals:{},setConditionals:{},teammate0:{characterConditionals:{},lightConeConditionals:{}},teammate1:{characterConditionals:{},lightConeConditionals:{}},teammate2:{characterConditionals:{},lightConeConditionals:{}},teammateDynamicConditionals:[]};return r.actorId=o.characterId,r.actionIndex=e,r.actionType=t[e],r.characterConditionals=Ma(e,a.comboCharacter.characterConditionals),r.lightConeConditionals=Ma(e,a.comboCharacter.lightConeConditionals),r.setConditionals=r2(e,a.comboCharacter.setConditionals),r.setConditionals=c2(r.setConditionals,o),r.precomputedX=new Wa(s.trace),r.precomputedX.setPrecompute($r()),r.precomputedM=r.precomputedX.m,r.precomputedM.setPrecompute($r()),a.comboTeammate0&&(r.teammate0.actorId=a.comboTeammate0.metadata.characterId,r.teammate0.characterConditionals=Ma(e,a.comboTeammate0.characterConditionals),r.teammate0.lightConeConditionals=Ma(e,a.comboTeammate0.lightConeConditionals)),a.comboTeammate1&&(r.teammate1.actorId=a.comboTeammate1.metadata.characterId,r.teammate1.characterConditionals=Ma(e,a.comboTeammate1.characterConditionals),r.teammate1.lightConeConditionals=Ma(e,a.comboTeammate1.lightConeConditionals)),a.comboTeammate2&&(r.teammate2.actorId=a.comboTeammate2.metadata.characterId,r.teammate2.characterConditionals=Ma(e,a.comboTeammate2.characterConditionals),r.teammate2.lightConeConditionals=Ma(e,a.comboTeammate2.lightConeConditionals)),s2(r,a,o),Lg(r,o),r}function s2(e,a,t){var c,u,d,m,h,g,C,M;const s=Ta.get(a.comboCharacter.metadata),o=Sa.get(a.comboCharacter.metadata),r=e.precomputedX;t.deprioritizeBuffs&&r.DEPRIORITIZE_BUFFS.set(1,w.NONE),(c=o.initializeConfigurations)==null||c.call(o,r,e,t),(u=s.initializeConfigurations)==null||u.call(s,r,e,t);const l=[a.comboTeammate0,a.comboTeammate1,a.comboTeammate2].filter(x=>{var O;return!!((O=x==null?void 0:x.metadata)!=null&&O.characterId)});for(let x=0;x<l.length;x++){const O=l[x],H={actorId:O.metadata.characterId,characterConditionals:Ma(e.actionIndex,O.characterConditionals),lightConeConditionals:Ma(e.actionIndex,O.lightConeConditionals)},_=Ta.get(O.metadata),A=Sa.get(O.metadata);(d=_.initializeTeammateConfigurations)==null||d.call(_,r,H,t),(m=A.initializeTeammateConfigurations)==null||m.call(A,r,H,t)}(h=o.precomputeEffects)==null||h.call(o,r,e,t),(g=s.precomputeEffects)==null||g.call(s,r,e,t),(C=o.precomputeMutualEffects)==null||C.call(o,r,e,t),(M=s.precomputeMutualEffects)==null||M.call(s,r,e,t),o2(e,a,t),r.ENEMY_WEAKNESS_BROKEN.config(r.a[S.ENEMY_WEAKNESS_BROKEN]||t.enemyWeaknessBroken?1:0,w.NONE)}function o2(e,a,t){const s=e.precomputedX,o={},r=[a.comboTeammate0,a.comboTeammate1,a.comboTeammate2].filter(l=>{var c;return!!((c=l==null?void 0:l.metadata)!=null&&c.characterId)});for(let l=0;l<r.length;l++){const c=r[l],u=Object.assign({},r[l]),d={actorId:c.metadata.characterId,characterConditionals:Ma(e.actionIndex,c.characterConditionals),lightConeConditionals:Ma(e.actionIndex,c.lightConeConditionals)},m=Ta.get(c.metadata),h=Sa.get(c.metadata);m.precomputeMutualEffects&&m.precomputeMutualEffects(s,d,t),m.precomputeTeammateEffects&&m.precomputeTeammateEffects(s,d,t),h.precomputeMutualEffects&&h.precomputeMutualEffects(s,d,t),h.precomputeTeammateEffects&&h.precomputeTeammateEffects(s,d,t);for(const[g,C]of[...Object.entries(u.relicSetConditionals),...Object.entries(u.ornamentSetConditionals)]){if(C.type==he.BOOLEAN){if(!C.activations[e.actionIndex])continue}else continue;switch(g){case G.BrokenKeel:s.CD.buffTeam(.1,w.BrokenKeel);break;case G.FleetOfTheAgeless:s.ATK_P.buffTeam(.08,w.FleetOfTheAgeless);break;case G.PenaconyLandOfTheDreams:if(a.comboCharacter.metadata.element!=u.metadata.element)break;s.ELEMENTAL_DMG.buffDual(.1,w.PenaconyLandOfTheDreams);break;case G.LushakaTheSunkenSeas:s.ATK_P.buff(.12,w.LushakaTheSunkenSeas);break;case G.MessengerTraversingHackerspace:if(o[G.MessengerTraversingHackerspace])break;s.SPD_P.buffTeam(.12,w.MessengerTraversingHackerspace);break;case G.WatchmakerMasterOfDreamMachinations:if(o[G.WatchmakerMasterOfDreamMachinations])break;s.BE.buffTeam(.3,w.WatchmakerMasterOfDreamMachinations);break;case Ls:d.actorId==Fc?s.CD.buffDual(.18,w.SacerdosRelivedOrdeal):s.CD.buffSingle(.18,w.SacerdosRelivedOrdeal);break;case Os:d.actorId==Fc?s.CD.buffDual(.36,w.SacerdosRelivedOrdeal):s.CD.buffSingle(.36,w.SacerdosRelivedOrdeal);break}o[g]=!0}}}function Ma(e,a){const t={};for(const[s,o]of Object.entries(a))t[s]=dt(o,e);return t}function dt(e,a){if(e.type==he.BOOLEAN)return e.activations[a];{const t=e;for(let s=0;s<t.partitions.length;s++){const o=t.partitions[s];if(o.activations[a])return o.value}}return 0}function r2(e,a){return{enabledHunterOfGlacialForest:dt(a[G.HunterOfGlacialForest],e),enabledFiresmithOfLavaForging:dt(a[G.FiresmithOfLavaForging],e),enabledGeniusOfBrilliantStars:dt(a[G.GeniusOfBrilliantStars],e),enabledBandOfSizzlingThunder:dt(a[G.BandOfSizzlingThunder],e),enabledMessengerTraversingHackerspace:dt(a[G.MessengerTraversingHackerspace],e),enabledCelestialDifferentiator:dt(a[G.CelestialDifferentiator],e),enabledWatchmakerMasterOfDreamMachinations:dt(a[G.WatchmakerMasterOfDreamMachinations],e),enabledPenaconyLandOfTheDreams:dt(a[G.PenaconyLandOfTheDreams],e),enabledIzumoGenseiAndTakamaDivineRealm:dt(a[G.IzumoGenseiAndTakamaDivineRealm],e),enabledForgeOfTheKalpagniLantern:dt(a[G.ForgeOfTheKalpagniLantern],e),enabledTheWindSoaringValorous:dt(a[G.TheWindSoaringValorous],e),enabledTheWondrousBananAmusementPark:dt(a[G.TheWondrousBananAmusementPark],e),enabledScholarLostInErudition:dt(a[G.ScholarLostInErudition],e),enabledHeroOfTriumphantSong:dt(a[G.HeroOfTriumphantSong],e),valueChampionOfStreetwiseBoxing:dt(a[G.ChampionOfStreetwiseBoxing],e),valueWastelanderOfBanditryDesert:dt(a[G.WastelanderOfBanditryDesert],e),valueLongevousDisciple:dt(a[G.LongevousDisciple],e),valueTheAshblazingGrandDuke:dt(a[G.TheAshblazingGrandDuke],e),valuePrisonerInDeepConfinement:dt(a[G.PrisonerInDeepConfinement],e),valuePioneerDiverOfDeadWaters:dt(a[G.PioneerDiverOfDeadWaters],e),valueSigoniaTheUnclaimedDesolation:dt(a[G.SigoniaTheUnclaimedDesolation],e),valueDuranDynastyOfRunningWolves:dt(a[G.DuranDynastyOfRunningWolves],e),valueSacerdosRelivedOrdeal:dt(a[G.SacerdosRelivedOrdeal],e)}}function l2(e){const a=["DEFAULT"];for(let t=1;t<=8&&e[t]!=null;t++)a.push(e[t]);return a}function c2(e,a){return{...e,enabledIzumoGenseiAndTakamaDivineRealm:e.enabledIzumoGenseiAndTakamaDivineRealm&&ci(a,a.path)>=2}}console.debug=(...e)=>{let a="%c%s ";e.forEach(t=>{switch(typeof t){case"bigint":case"number":case"boolean":a+="%d ";break;case"string":a+="%s ";break;case"object":case"undefined":default:a+="%o "}}),console.log(a,"color: orange","[DEBUG]",...e)};const J={objectHash:e=>Du(e),arrayOfZeroes:e=>new Array(e).fill(0),arrayOfValue:(e,a)=>new Array(e).fill(a),nullUndefinedToZero:e=>e??0,mergeDefinedValues:(e,a)=>{if(!a)return e;for(const t of Object.keys(e))a[t]!=null&&(e[t]=a[t]);return e},mergeUndefinedValues:(e,a)=>{for(const t of Object.keys(a))e[t]==null&&(e[t]=a[t]);return e},sleep:e=>new Promise(a=>setTimeout(a,e)),relicsToSetArrays:e=>{const a=J.arrayOfValue(Object.values(f.SetsRelics).length,0),t=J.arrayOfValue(Object.values(f.SetsOrnaments).length,0);for(const s of e)if(s)if(s.part==f.Parts.PlanarSphere||s.part==f.Parts.LinkRope){const o=f.OrnamentSetToIndex[s.set];t[o]++}else{const o=f.RelicSetToIndex[s.set];a[o]++}return{relicSets:a,ornamentSets:t}},isFlat:e=>e==f.Stats.HP||e==f.Stats.ATK||e==f.Stats.DEF||e==f.Stats.SPD,randomElement:e=>e[Math.floor(Math.random()*e.length)],isMobile:()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),isMobileOrSafari:()=>{const e=navigator.userAgent,a=/Android|iPhone|iPad|iPod|Opera Mini|IEMobile|WPDesktop|BlackBerry/i.test(e),t=/^((?!chrome|android).)*safari/i.test(e);return a||t},screenshotElementById:async(e,a,t)=>{const s=J.isMobileOrSafari(),o=async()=>{const c=s?9:3,u=1.5,d=1068*u,m=856*u,h={pixelRatio:1,height:m,canvasHeight:m,width:d,canvasWidth:d,skipAutoScale:!0,style:{zoom:u}};let g=0,C;for(;g<c&&(g++,C=await Sc(document.getElementById(e),h),!(C.size>12e5)););return s&&(C=await Sc(document.getElementById(e),h)),C};function r(l){const c=t||"Hsr-optimizer",u=new Date().toLocaleDateString(kc()).replace(/[^apm\d]+/gi,"-"),d=new Date().toLocaleTimeString(kc()).replace(/[^apm\d]+/gi,"-"),m=`${c}_${u}_${d}.png`;if(a=="clipboard")if(s){const h=new File([l],m,{type:"image/png"});navigator.canShare&&navigator.canShare({files:[h]})?navigator.share({files:[h],title:"",text:""}):Message.error("Unable to save screenshot to clipboard, try the download button to the right")}else try{const h=[new window.ClipboardItem({[l.type]:l})];navigator.clipboard.write(h).then(()=>{Message.success(Y.t("charactersTab:ScreenshotMessages.ScreenshotSuccess"))})}catch(h){console.error(h),Message.error(Y.t("charactersTab:ScreenshotMessages.ScreenshotFailed"))}if(a=="download"){const h=window.URL.createObjectURL(l),g=document.createElement("a");g.href=h,g.download=m,g.style.display="none",document.body.appendChild(g),g.click(),g.remove(),window.URL.revokeObjectURL(h),Message.success(Y.t("charactersTab:ScreenshotMessages.DownloadSuccess"))}}return new Promise(l=>{o().then(c=>{r(c),l()})})},collectById:e=>{const a={};for(const t of e)a[t.id]=t;return a},truncate10ths:e=>Math.floor(e*10)/10,truncate100ths:e=>Math.floor(e*100)/100,truncate1000ths:e=>Math.floor(e*1e3)/1e3,truncate10000ths:e=>Math.floor(e*1e4)/1e4,precisionRound(e,a=5){const t=Math.pow(10,a);return Math.round(e*t)/t},flipMapping:e=>Object.fromEntries(Object.entries(e).map(a=>a.reverse())),clone:e=>e?JSON.parse(JSON.stringify(e)):null,labelFilterOption:(e,a)=>((a==null?void 0:a.label)??"").toLowerCase().includes(e.toLowerCase()),nameFilterOption:(e,a)=>((a==null?void 0:a.name)??"").toLowerCase().includes(e.toLowerCase()),titleFilterOption:(e,a)=>((a==null?void 0:a.title)??"").toLowerCase().includes(e.toLowerCase()),hasMainStat:e=>e==f.Parts.Body||e==f.Parts.Feet||e==f.Parts.LinkRope||e==f.Parts.PlanarSphere,recursiveToCamel:e=>Array.isArray(e)?e.map(a=>J.recursiveToCamel(a)):typeof e=="function"||e!==Object(e)?e:Object.fromEntries(Object.entries(e).map(([a,t])=>[a.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,"")),J.recursiveToCamel(t)])),randomId:()=>Yr(),stripTrailingSlashes:e=>e.replace(/\/+$/,""),sortRarityDesc:(e,a)=>a.rarity-e.rarity,sumArray:e=>e.reduce((a,t)=>a+t,0),msToReadable:e=>{const a=Math.floor(e/1e3%60),t=Math.floor(e/(1e3*60)%60),s=Math.floor(e/(1e3*60*60)),o=s>0?`${s}:`:"",r=t<10?`0${t}`:`${t}`,l=a<10?`0${a}`:`${a}`;return`${o}${r}:${l}`},filterUnique:e=>e.filter((a,t,s)=>s.indexOf(a)===t)};function kc(){Y.resolvedLanguage.replace("_","-")}const u2={[f.Stats.SPD]:[7.613,11.419,16.426,25.032],[f.Stats.HP]:[139.991,281.111,469.647,705.6],[f.Stats.ATK]:[69.996,140.556,234.824,352.8],[f.Stats.HP_P]:[8.571,17.211,28.754,43.2],[f.Stats.ATK_P]:[8.571,17.211,28.754,43.2],[f.Stats.DEF_P]:[10.714,21.514,35.942,54],[f.Stats.CR]:[6.428,12.908,21.565,32.4],[f.Stats.CD]:[12.856,25.817,43.13,64.8],[f.Stats.OHB]:[6.856,13.769,23.003,34.561],[f.Stats.EHR]:[8.571,17.211,28.754,43.2],[f.Stats.BE]:[12.856,25.817,43.13,64.8],[f.Stats.ERR]:[3.857,7.745,12.939,19.439],[f.Stats.Physical_DMG]:[7.714,15.49,25.878,38.88],[f.Stats.Fire_DMG]:[7.714,15.49,25.878,38.88],[f.Stats.Ice_DMG]:[7.714,15.49,25.878,38.88],[f.Stats.Lightning_DMG]:[7.714,15.49,25.878,38.88],[f.Stats.Wind_DMG]:[7.714,15.49,25.878,38.88],[f.Stats.Quantum_DMG]:[7.714,15.49,25.878,38.88],[f.Stats.Imaginary_DMG]:[7.714,15.49,25.878,38.88]},Ht={getMaxedSubstatValue:(e,a=1)=>a==.8?J.precisionRound(Ge[e][5].low):a==.9?J.precisionRound(Ge[e][5].mid):J.precisionRound(Ge[e][5].high),getMaxedStatValue:e=>{if(e==="NONE")return 0;const a=J.isFlat(e)?1:100;return J.precisionRound(u2[e][3]/a)},calculateCv:e=>{let a=0;for(const t of e)if(t!=null&&t.condensedStats)for(const s of t.condensedStats)s[0]==f.Stats.CD&&(a+=s[1]),s[0]==f.Stats.CR&&(a+=s[1]*2);return J.precisionRound(a*100)},getZeroes:()=>({[n.ATK]:0,[n.DEF]:0,[n.HP]:0,[n.ATK_P]:0,[n.DEF_P]:0,[n.HP_P]:0,[n.SPD]:0,[n.SPD_P]:0,[n.CR]:0,[n.CD]:0,[n.EHR]:0,[n.RES]:0,[n.BE]:0,[n.ERR]:0,[n.OHB]:0,[n.Physical_DMG]:0,[n.Fire_DMG]:0,[n.Ice_DMG]:0,[n.Lightning_DMG]:0,[n.Wind_DMG]:0,[n.Quantum_DMG]:0,[n.Imaginary_DMG]:0})};function ss(e){const a={};return p2(e,a),g2(e,a),S2(e,a),d2(e,a),m2(e,a),f2(e,a),a}function d2(e,a){a.combatBuffs={ATK:e.combatBuffs.ATK,ATK_P:e.combatBuffs.ATK_P,HP:e.combatBuffs.HP,HP_P:e.combatBuffs.HP_P,DEF:e.combatBuffs.DEF,DEF_P:e.combatBuffs.DEF_P,CR:e.combatBuffs.CR,CD:e.combatBuffs.CD,SPD:e.combatBuffs.SPD,SPD_P:e.combatBuffs.SPD_P,BE:e.combatBuffs.BE,DMG_BOOST:e.combatBuffs.DMG_BOOST,DEF_PEN:e.combatBuffs.DEF_PEN,RES_PEN:e.combatBuffs.RES_PEN,EFFECT_RES_PEN:e.combatBuffs.EFFECT_RES_PEN,VULNERABILITY:e.combatBuffs.VULNERABILITY,BREAK_EFFICIENCY:e.combatBuffs.BREAK_EFFICIENCY}}function m2(e,a){a.resultSort=e.resultSort}function f2(e,a){a.characterConditionalController=Ta.get(a),a.lightConeConditionalController=Sa.get(a),Cd(e,a)}const h2={Physical:2,Fire:2,Ice:1,Lightning:1,Wind:1.5,Quantum:.5,Imaginary:.5};function S2(e,a){var l;const t=V.getMetadata(),s=t.characters[e.characterId],o=s.path,r=s.element;a.characterId=e.characterId,a.characterEidolon=e.characterEidolon,a.lightCone=e.lightCone,a.lightConeSuperimposition=e.lightConeSuperimposition,a.lightConePath=(l=t.lightCones[e.lightCone])==null?void 0:l.path,a.path=o,a.element=r,a.elementalDamageType=Di[r],a.elementalResPenType=_n[r],a.elementalBreakScaling=h2[r],a.teammate0Metadata=cr(t,e.teammate0),a.teammate1Metadata=cr(t,e.teammate1),a.teammate2Metadata=cr(t,e.teammate2),a.deprioritizeBuffs=e.deprioritizeBuffs}function cr(e,a){return a&&a.characterId?Un(a,e):null}function p2(e,a){a.enemyLevel=e.enemyLevel,a.enemyCount=e.enemyCount,a.enemyMaxToughness=e.enemyMaxToughness,a.enemyDamageResistance=e.enemyElementalWeak?0:e.enemyResistance,a.enemyEffectResistance=e.enemyEffectResistance,a.enemyElementalWeak=e.enemyElementalWeak,a.enemyWeaknessBroken=e.enemyWeaknessBroken,a.weaknessBrokenMultiplier=e.enemyWeaknessBroken?1:.9}function g2(e,a){const t=V.getMetadata().characters[e.characterId],s=t.stats,o=V.getMetadata().lightCones[e.lightCone],r=(o==null?void 0:o.stats)||Dg(),l=t.path==(o==null?void 0:o.path)?(o==null?void 0:o.superimpositions[e.lightConeSuperimposition])||{}:{},c={base:{...Ht.getZeroes(),...s},traces:{...Ht.getZeroes(),...ad(t)},lightCone:{...Ht.getZeroes(),...r,...l}};a.characterStatsBreakdown=c,a.baseHP=Ys(n.HP,c.base,c.lightCone),a.baseATK=Ys(n.ATK,c.base,c.lightCone),a.baseDEF=Ys(n.DEF,c.base,c.lightCone),a.baseSPD=Ys(n.SPD,c.base,c.lightCone),a.baseEnergy=t.max_sp}function Ys(e,a,t){return a[e]+t[e]}async function Ll(e){var t;const a=await((t=navigator==null?void 0:navigator.gpu)==null?void 0:t.requestAdapter());return a==null?(console.log("Webgpu not supported"),e&&FE(),null):await a.requestDevice({requiredLimits:{}})}async function Ed(e){try{const a=await Ll(e);return a||window.store.getState().setSavedSessionKey($e.computeEngine,wa),a}catch(a){return console.log(a),null}}function b2(e,a){const t=new Float32Array(a);console.log(t),E2(t),C2(t)}function D2(e){const a=new Wa(!1),t=new Wa(!1),s=Object.keys(ui).length;return a.setPrecompute(e.slice(0,s)),t.setPrecompute(e.slice(s,s*2)),console.log(a),console.log(t),{ED:a.$ELEMENTAL_DMG,BASIC:a.$BASIC_DMG,SKILL:a.$SKILL_DMG,ULT:a.$ULT_DMG,FUA:a.$FUA_DMG,MEMO_SKILL:a.$MEMO_SKILL_DMG,MEMO_TALENT:a.$MEMO_TALENT_DMG,DOT:a.$DOT_DMG,BREAK:a.$BREAK_DMG,COMBO:a.$COMBO_DMG,EHP:a.$EHP,HEAL:a.$HEAL_VALUE,SHIELD:a.$SHIELD_VALUE,xHP:a.$HP,xATK:a.$ATK,xDEF:a.$DEF,xSPD:a.$SPD,xCR:a.$CR,xCD:a.$CD,xEHR:a.$EHR,xRES:a.$RES,xBE:a.$BE,xERR:a.$ERR,xOHB:a.$OHB,xELEMENTAL_DMG:a.$ELEMENTAL_DMG,mxHP:t.$HP,mxATK:t.$ATK,mxDEF:t.$DEF,mxSPD:t.$SPD,mxCR:t.$CR,mxCD:t.$CD,mxEHR:t.$EHR,mxRES:t.$RES,mxBE:t.$BE,mxERR:t.$ERR,mxOHB:t.$OHB,mxELEMENTAL_DMG:t.$ELEMENTAL_DMG,mxEHP:t.$EHP}}function C2(e){const a=window.optimizerGrid.current.api.getGridOption("pinnedTopRowData")??[];a[1]=D2(e),window.optimizerGrid.current.api.updateGridOptions({pinnedTopRowData:a})}function Kc(e){const a={};for(const t in S){const s=Ju[t]??t,o=S[t];a[s]=e[o]}return a}function E2(e){const a=Kc(e);for(const[t,s]of Object.entries(a))a[t]=T2(s);console.log(Kc(e))}function T2(e){return b.precisionRound(e,5)}function R2(e,a){let t=`struct ComputedStats {
`;for(const s of Zo)t+=`${s.name}: f32,
`;return t+=`}
`,e+t}const B2=3;function I2(e){const a=[],t=[];Object.values(e).forEach(x=>{for(const O of x)O.chainsTo.length==0?t.push(O):a.push(O)});const s=y2(),o={},r=new Set,l=new Set,c=[],u={},d=[];for(const x of a){u[x.id]=x;for(const O of x.dependsOn)s[O].push(x)}const m=new Set(a.map(x=>x.id));let g=[Nc.reduce((x,O)=>{const H=bs(O,m,s),_=bs(x,m,s);return H>_?O:x})],C=0;const M=100;for(;m.size>0||g.length>0||l.size>0;){if(C++,C>M){console.error("Loop exceeded 100 iterations");break}g.sort((O,H)=>{const _=bs(O,m,s);return bs(H,m,s)-_});let x=g.shift();if(!x&&l.size>0&&(x=[...l][0],l.delete(x)),!x)break;!l.has(x)&&!g.includes(x)&&c.push(x);for(const O of s[x])if(r.has(O.id)||m.has(O.id)){if(o[O.id]>=B2)continue;o[O.id]==null&&(o[O.id]=0),o[O.id]++,r.add(O.id),m.delete(O.id),d.push(O);for(const H of O.chainsTo)!g.includes(H)&&!l.has(H)&&g.push(H)}for(const O of Nc)c.includes(O)||g.push(O);g=Array.from(new Set(g))}return{conditionalSequence:d,terminalConditionals:t}}const Nc=[n.SPD,n.BE,n.EHR,n.CR,n.CD,n.RES,n.DEF,n.ATK,n.OHB,n.ERR,n.HP];function y2(){return{[n.HP]:[],[n.ATK]:[],[n.DEF]:[],[n.SPD]:[],[n.CR]:[],[n.CD]:[],[n.EHR]:[],[n.RES]:[],[n.BE]:[],[n.OHB]:[],[n.ERR]:[]}}function bs(e,a,t,s=new Set){if(s.has(e))return 0;s.add(e);let o=0;for(const r of t[e])if(a.has(r.id)){o++;for(const l of r.chainsTo)o+=bs(l,a,t,s)}return o}function M2(e){let a="";for(const t of e.activeAbilities)t==z.BASIC&&(a+=`

  /* START BASIC CALC */
  if (abilityType == 1 || actionIndex == 0) {
    let initialDmg = calculateInitial(
      p_x,
      x.BASIC_DMG,
      x.BASIC_HP_SCALING,
      x.BASIC_DEF_SCALING,
      x.BASIC_ATK_SCALING,
      x.BASIC_ATK_P_BOOST
    );
    (*p_x).BASIC_DMG = calculateAbilityDmg(
      p_x,
      baseUniversalMulti,
      baseDmgBoost,
      baseDefPen,
      baseResistance,
      baseSuperBreakInstanceDmg,
      baseBreakEfficiencyBoost,
      initialDmg,
      x.BASIC_DMG_BOOST,
      x.BASIC_VULNERABILITY,
      x.BASIC_DEF_PEN,
      x.BASIC_RES_PEN,
      x.BASIC_CR_BOOST,
      x.BASIC_CD_BOOST,
      x.BASIC_FINAL_DMG_BOOST,
      x.BASIC_BREAK_EFFICIENCY_BOOST,
      x.BASIC_SUPER_BREAK_MODIFIER,
      x.BASIC_BREAK_DMG_MODIFIER,
      x.BASIC_TOUGHNESS_DMG,
      x.BASIC_ADDITIONAL_DMG,
      0, // x.BASIC_ADDITIONAL_DMG_CR_OVERRIDE,
      0, // x.BASIC_ADDITIONAL_DMG_CD_OVERRIDE,
      x.BASIC_TRUE_DMG_MODIFIER,
      m.BASIC_DMG,
    );
  }
  /* END BASIC CALC */
      `),t==z.SKILL&&(a+=`
  /* START SKILL CALC */
  if (abilityType == 2 || actionIndex == 0) {
    let initialDmg = calculateInitial(
      p_x,
      x.SKILL_DMG,
      x.SKILL_HP_SCALING,
      x.SKILL_DEF_SCALING,
      x.SKILL_ATK_SCALING,
      x.SKILL_ATK_P_BOOST
    );
    (*p_x).SKILL_DMG = calculateAbilityDmg(
      p_x,
      baseUniversalMulti,
      baseDmgBoost,
      baseDefPen,
      baseResistance,
      baseSuperBreakInstanceDmg,
      baseBreakEfficiencyBoost,
      initialDmg,
      x.SKILL_DMG_BOOST,
      x.SKILL_VULNERABILITY,
      x.SKILL_DEF_PEN,
      x.SKILL_RES_PEN,
      x.SKILL_CR_BOOST,
      x.SKILL_CD_BOOST,
      x.SKILL_FINAL_DMG_BOOST,
      0, // x.SKILL_BREAK_EFFICIENCY_BOOST,
      0, // x.SKILL_SUPER_BREAK_MODIFIER,
      0, // x.SKILL_BREAK_DMG_MODIFIER,
      x.SKILL_TOUGHNESS_DMG,
      x.SKILL_ADDITIONAL_DMG,
      0, // x.SKILL_ADDITIONAL_DMG_CR_OVERRIDE,
      0, // x.SKILL_ADDITIONAL_DMG_CD_OVERRIDE,
      x.SKILL_TRUE_DMG_MODIFIER,
      m.SKILL_DMG,
    );
  }
  /* END SKILL CALC */
      `),t==z.ULT&&(a+=`
  /* START ULT CALC */
  if (abilityType == 4 || actionIndex == 0) {
    let initialDmg = calculateInitial(
      p_x,
      x.ULT_DMG,
      x.ULT_HP_SCALING,
      x.ULT_DEF_SCALING,
      x.ULT_ATK_SCALING,
      x.ULT_ATK_P_BOOST
    );
    (*p_x).ULT_DMG = calculateAbilityDmg(
      p_x,
      baseUniversalMulti,
      baseDmgBoost,
      baseDefPen,
      baseResistance,
      baseSuperBreakInstanceDmg,
      baseBreakEfficiencyBoost,
      initialDmg,
      x.ULT_DMG_BOOST,
      x.ULT_VULNERABILITY,
      x.ULT_DEF_PEN,
      x.ULT_RES_PEN,
      x.ULT_CR_BOOST,
      x.ULT_CD_BOOST,
      x.ULT_FINAL_DMG_BOOST,
      x.ULT_BREAK_EFFICIENCY_BOOST,
      0, // x.ULT_SUPER_BREAK_MODIFIER,
      0, // x.ULT_BREAK_DMG_MODIFIER,
      x.ULT_TOUGHNESS_DMG,
      x.ULT_ADDITIONAL_DMG,
      x.ULT_ADDITIONAL_DMG_CR_OVERRIDE,
      x.ULT_ADDITIONAL_DMG_CD_OVERRIDE,
      x.ULT_TRUE_DMG_MODIFIER,
      m.ULT_DMG,
    );
  }
  /* END ULT CALC */
      `),t==z.FUA&&(a+=`
  /* START FUA CALC */
  if (abilityType == 8 || actionIndex == 0) {
    let initialDmg = calculateInitial(
      p_x,
      x.FUA_DMG,
      x.FUA_HP_SCALING,
      x.FUA_DEF_SCALING,
      x.FUA_ATK_SCALING,
      x.FUA_ATK_P_BOOST
    );
    (*p_x).FUA_DMG = calculateAbilityDmg(
      p_x,
      baseUniversalMulti,
      baseDmgBoost,
      baseDefPen,
      baseResistance,
      baseSuperBreakInstanceDmg,
      baseBreakEfficiencyBoost,
      initialDmg,
      x.FUA_DMG_BOOST,
      x.FUA_VULNERABILITY,
      x.FUA_DEF_PEN,
      x.FUA_RES_PEN,
      x.FUA_CR_BOOST,
      x.FUA_CD_BOOST,
      0, // x.FUA_FINAL_DMG_BOOST,
      0, // x.FUA_BREAK_EFFICIENCY_BOOST,
      0, // x.FUA_SUPER_BREAK_MODIFIER,
      0, // x.FUA_BREAK_DMG_MODIFIER,
      x.FUA_TOUGHNESS_DMG,
      x.FUA_ADDITIONAL_DMG,
      0, // x.FUA_ADDITIONAL_DMG_CR_OVERRIDE,
      0, // x.FUA_ADDITIONAL_DMG_CD_OVERRIDE,
      x.FUA_TRUE_DMG_MODIFIER,
      0, // m.FUA_DMG,
    );
  }
  /* END FUA CALC */
      `),t==z.MEMO_SKILL&&(a+=`
  /* START MEMO_SKILL CALC */
  if (abilityType == MEMO_SKILL_ABILITY_TYPE || actionIndex == 0) {
    let initialDmg = calculateInitial(
      p_x,
      x.MEMO_SKILL_DMG,
      x.MEMO_SKILL_HP_SCALING,
      x.MEMO_SKILL_DEF_SCALING,
      x.MEMO_SKILL_ATK_SCALING,
      x.MEMO_SKILL_ATK_P_BOOST
    );
    (*p_x).MEMO_SKILL_DMG = calculateAbilityDmg(
      p_x,
      baseUniversalMulti,
      baseDmgBoost,
      baseDefPen,
      baseResistance,
      baseSuperBreakInstanceDmg,
      baseBreakEfficiencyBoost,
      initialDmg,
      x.MEMO_SKILL_DMG_BOOST,
      0, // x.MEMO_SKILL_VULNERABILITY,
      0, // x.MEMO_SKILL_DEF_PEN,
      0, // x.MEMO_SKILL_RES_PEN,
      0, // x.MEMO_SKILL_CR_BOOST,
      0, // x.MEMO_SKILL_CD_BOOST,
      0, // x.MEMO_SKILL_FINAL_DMG_BOOST,
      0, // x.MEMO_SKILL_BREAK_EFFICIENCY_BOOST,
      0, // x.MEMO_SKILL_SUPER_BREAK_MODIFIER,
      0, // x.MEMO_SKILL_BREAK_DMG_MODIFIER,
      x.MEMO_SKILL_TOUGHNESS_DMG,
      0, // x.MEMO_SKILL_ADDITIONAL_DMG,
      0, // x.MEMO_SKILL_ADDITIONAL_DMG_CR_OVERRIDE,
      0, // x.MEMO_SKILL_ADDITIONAL_DMG_CD_OVERRIDE,
      x.MEMO_SKILL_TRUE_DMG_MODIFIER,
      0, // m.MEMO_DMG,
    );

    (*p_x).MEMO_SKILL_DMG += (*p_m).MEMO_SKILL_DMG;
  }
  /* END MEMO_SKILL CALC */
      `),t==z.MEMO_TALENT&&(a+=`
  /* START MEMO_TALENT CALC */
  if (abilityType == MEMO_TALENT_ABILITY_TYPE || actionIndex == 0) {
    let initialDmg = calculateInitial(
      p_x,
      x.MEMO_TALENT_DMG,
      x.MEMO_TALENT_HP_SCALING,
      x.MEMO_TALENT_DEF_SCALING,
      x.MEMO_TALENT_ATK_SCALING,
      x.MEMO_TALENT_ATK_P_BOOST
    );
    (*p_x).MEMO_TALENT_DMG = calculateAbilityDmg(
      p_x,
      baseUniversalMulti,
      baseDmgBoost,
      baseDefPen,
      baseResistance,
      baseSuperBreakInstanceDmg,
      baseBreakEfficiencyBoost,
      initialDmg,
      x.MEMO_TALENT_DMG_BOOST,
      0, // x.MEMO_TALENT_VULNERABILITY,
      0, // x.MEMO_TALENT_DEF_PEN,
      0, // x.MEMO_TALENT_RES_PEN,
      0, // x.MEMO_TALENT_CR_BOOST,
      0, // x.MEMO_TALENT_CD_BOOST,
      0, // x.MEMO_TALENT_FINAL_DMG_BOOST,
      0, // x.MEMO_TALENT_BREAK_EFFICIENCY_BOOST,
      0, // x.MEMO_TALENT_SUPER_BREAK_MODIFIER,
      0, // x.MEMO_TALENT_BREAK_DMG_MODIFIER,
      x.MEMO_TALENT_TOUGHNESS_DMG,
      0, // x.MEMO_TALENT_ADDITIONAL_DMG,
      0, // x.MEMO_TALENT_ADDITIONAL_DMG_CR_OVERRIDE,
      0, // x.MEMO_TALENT_ADDITIONAL_DMG_CD_OVERRIDE,
      x.MEMO_TALENT_TRUE_DMG_MODIFIER,
      0, // m.MEMO_DMG,
    );

    (*p_x).MEMO_TALENT_DMG += (*p_m).MEMO_TALENT_DMG;
  }
  /* END MEMO_TALENT CALC */
      `);return a}function Uc(e,a){const t=e.a;return t[S.EHP]=0,Object.keys(ui).map(o=>{const r=t[S[o]],l=a.DEBUG?` // Stats.${o}`:"";return`${r},${l}`}).join(`
`)}const k={ATK:{key:"ATK",gpuProperty:"ATK",basicProperty:"ATK",combatProperty:"ATK",basicGridColumn:"ATK",combatGridColumn:"xATK",memoBasicGridColumn:"mATK",memoCombatGridColumn:"mxATK",optimizerKey:S.ATK},DEF:{key:"DEF",gpuProperty:"DEF",basicProperty:"DEF",combatProperty:"DEF",basicGridColumn:"DEF",combatGridColumn:"xDEF",memoBasicGridColumn:"mATK",memoCombatGridColumn:"mxATK",optimizerKey:S.DEF},HP:{key:"HP",gpuProperty:"HP",basicProperty:"HP",combatProperty:"HP",basicGridColumn:"HP",combatGridColumn:"xHP",memoBasicGridColumn:"mATK",memoCombatGridColumn:"mxATK",optimizerKey:S.HP},SPD:{key:"SPD",gpuProperty:"SPD",basicProperty:"SPD",combatProperty:"SPD",basicGridColumn:"SPD",combatGridColumn:"xSPD",memoBasicGridColumn:"mSPD",memoCombatGridColumn:"mxSPD",optimizerKey:S.SPD},CR:{key:"CR",gpuProperty:"CR",basicProperty:"CRIT Rate",combatProperty:"CRIT Rate",basicGridColumn:"CRIT Rate",combatGridColumn:"xCR",memoBasicGridColumn:"mCR",memoCombatGridColumn:"mxCR",optimizerKey:S.CR},CD:{key:"CD",gpuProperty:"CD",basicProperty:"CRIT DMG",combatProperty:"CRIT DMG",basicGridColumn:"CRIT DMG",combatGridColumn:"xCD",memoBasicGridColumn:"mCD",memoCombatGridColumn:"mxCD",optimizerKey:S.CD},EHR:{key:"EHR",gpuProperty:"EHR",basicProperty:"Effect Hit Rate",combatProperty:"Effect Hit Rate",basicGridColumn:"Effect Hit Rate",combatGridColumn:"xEHR",memoBasicGridColumn:"mEHR",memoCombatGridColumn:"mxEHR",optimizerKey:S.EHR},RES:{key:"RES",gpuProperty:"RES",basicProperty:"Effect RES",combatProperty:"Effect RES",basicGridColumn:"Effect RES",combatGridColumn:"xRES",memoBasicGridColumn:"mRES",memoCombatGridColumn:"mxRES",optimizerKey:S.RES},BE:{key:"BE",gpuProperty:"BE",basicProperty:"Break Effect",combatProperty:"Break Effect",basicGridColumn:"Break Effect",combatGridColumn:"xBE",memoBasicGridColumn:"mBE",memoCombatGridColumn:"mxBE",optimizerKey:S.BE},OHB:{key:"OHB",gpuProperty:"OHB",basicProperty:"Outgoing Healing Boost",combatProperty:"Outgoing Healing Boost",basicGridColumn:"Outgoing Healing Boost",combatGridColumn:"xOHB",memoBasicGridColumn:"mOHB",memoCombatGridColumn:"mxOHB",optimizerKey:S.OHB},ERR:{key:"ERR",gpuProperty:"ERR",basicProperty:"Energy Regeneration Rate",combatProperty:"Energy Regeneration Rate",basicGridColumn:"Energy Regeneration Rate",combatGridColumn:"xERR",memoBasicGridColumn:"mERR",memoCombatGridColumn:"mxERR",optimizerKey:S.ERR},ELEMENTAL_DMG:{key:"ELEMENTAL_DMG",gpuProperty:"ELEMENTAL_DMG",basicProperty:"ELEMENTAL_DMG",combatProperty:"ELEMENTAL_DMG",basicGridColumn:"ED",combatGridColumn:"xELEMENTAL_DMG",memoBasicGridColumn:"mELEMENTAL_DMG",memoCombatGridColumn:"mxELEMENTAL_DMG",optimizerKey:S.ELEMENTAL_DMG,isComputedRating:!0},EHP:{key:"EHP",gpuProperty:"EHP",basicProperty:"EHP",combatProperty:"EHP",basicGridColumn:"EHP",combatGridColumn:"EHP",memoBasicGridColumn:"mxEHP",memoCombatGridColumn:"mxEHP",optimizerKey:S.EHP,isComputedRating:!0},BASIC:{key:"BASIC",gpuProperty:"BASIC_DMG",basicProperty:"BASIC_DMG",combatProperty:"BASIC_DMG",basicGridColumn:"BASIC",combatGridColumn:"BASIC",memoBasicGridColumn:"BASIC",memoCombatGridColumn:"BASIC",optimizerKey:S.BASIC_DMG,isComputedRating:!0},SKILL:{key:"SKILL",gpuProperty:"SKILL_DMG",basicProperty:"SKILL_DMG",combatProperty:"SKILL_DMG",basicGridColumn:"SKILL",combatGridColumn:"SKILL",memoBasicGridColumn:"SKILL",memoCombatGridColumn:"SKILL",optimizerKey:S.SKILL_DMG,isComputedRating:!0},ULT:{key:"ULT",gpuProperty:"ULT_DMG",basicProperty:"ULT_DMG",combatProperty:"ULT_DMG",basicGridColumn:"ULT",combatGridColumn:"ULT",memoBasicGridColumn:"ULT",memoCombatGridColumn:"ULT",optimizerKey:S.ULT_DMG,isComputedRating:!0},FUA:{key:"FUA",gpuProperty:"FUA_DMG",basicProperty:"FUA_DMG",combatProperty:"FUA_DMG",basicGridColumn:"FUA",combatGridColumn:"FUA",memoBasicGridColumn:"FUA",memoCombatGridColumn:"FUA",optimizerKey:S.FUA_DMG,isComputedRating:!0},MEMO_SKILL:{key:"MEMO_SKILL",gpuProperty:"MEMO_SKILL_DMG",basicProperty:"MEMO_SKILL_DMG",combatProperty:"MEMO_SKILL_DMG",basicGridColumn:"MEMO_SKILL",combatGridColumn:"MEMO_SKILL",memoBasicGridColumn:"MEMO_SKILL",memoCombatGridColumn:"MEMO_SKILL",optimizerKey:S.MEMO_SKILL_DMG,isComputedRating:!0},MEMO_TALENT:{key:"MEMO_TALENT",gpuProperty:"MEMO_TALENT_DMG",basicProperty:"MEMO_TALENT_DMG",combatProperty:"MEMO_TALENT_DMG",basicGridColumn:"MEMO_TALENT",combatGridColumn:"MEMO_TALENT",memoBasicGridColumn:"MEMO_TALENT",memoCombatGridColumn:"MEMO_TALENT",optimizerKey:S.MEMO_TALENT_DMG,isComputedRating:!0},DOT:{key:"DOT",gpuProperty:"DOT_DMG",basicProperty:"DOT_DMG",combatProperty:"DOT_DMG",basicGridColumn:"DOT",combatGridColumn:"DOT",memoBasicGridColumn:"DOT",memoCombatGridColumn:"DOT",optimizerKey:S.DOT_DMG,isComputedRating:!0},BREAK:{key:"BREAK",gpuProperty:"BREAK_DMG",basicProperty:"BREAK_DMG",combatProperty:"BREAK_DMG",basicGridColumn:"BREAK",combatGridColumn:"BREAK",memoBasicGridColumn:"BREAK",memoCombatGridColumn:"BREAK",optimizerKey:S.BREAK_DMG,isComputedRating:!0},COMBO:{key:"COMBO",gpuProperty:"COMBO_DMG",basicProperty:"COMBO_DMG",combatProperty:"COMBO_DMG",basicGridColumn:"COMBO",combatGridColumn:"COMBO",memoBasicGridColumn:"COMBO",memoCombatGridColumn:"COMBO",optimizerKey:S.COMBO_DMG,isComputedRating:!0},HEAL:{key:"HEAL",gpuProperty:"HEAL_VALUE",basicProperty:"HEAL_VALUE",combatProperty:"HEAL_VALUE",basicGridColumn:"HEAL",combatGridColumn:"HEAL",memoBasicGridColumn:"HEAL",memoCombatGridColumn:"HEAL",optimizerKey:S.HEAL_VALUE,isComputedRating:!0},SHIELD:{key:"SHIELD",gpuProperty:"SHIELD_VALUE",basicProperty:"SHIELD_VALUE",combatProperty:"SHIELD_VALUE",basicGridColumn:"SHIELD",combatGridColumn:"SHIELD",memoBasicGridColumn:"SHIELD",memoCombatGridColumn:"SHIELD",optimizerKey:S.SHIELD_VALUE,isComputedRating:!0}};function G2(e,a,t,s){const o=Ta.get(t),r=Sa.get(t),l=t.resultSort==k.COMBO.key?t.actions.length:1;let c=`
switch (actionIndex) {
`;for(let C=0;C<l;C++){const M=t.actions[C];let x=`  // Character conditionals
`,O=`  // Light cone conditionals
`;o.gpuFinalizeCalculations&&(x+=ft(o.gpuFinalizeCalculations(M,t),1)),r.gpuFinalizeCalculations&&(O+=ft(r.gpuFinalizeCalculations(M,t),1)),c+=ft(`
case ${C}: {

${x}
${O}
}
`,1)}c+=`
  default: {
  
  }
}
`,e=e.replace("/* INJECT ACTION CONDITIONALS */",ft(c,3));let u="";o.gpuCalculateBasicEffects&&(u+=ft(o.gpuCalculateBasicEffects(t.actions[0],t),1)),r.gpuCalculateBasicEffects&&(u+=ft(r.gpuCalculateBasicEffects(t.actions[0],t),1)),e=e.replace("/* INJECT BASIC CONDITIONALS */",ft(u,2));const{conditionalSequence:d,terminalConditionals:m}=I2(t.actions[0].conditionalRegistry);let h=`
`;h+=d.map(jc).map(C=>ft(C,3)).join(`
`)+`
`,h+=`
`,h+=m.map(jc).map(C=>ft(C,3)).join(`
`)+`
`,e=e.replace("/* INJECT COMBAT CONDITIONALS */",h),e+=_2(a,t);let g=`
const comboDot: f32 = ${t.comboDot};
const comboBreak: f32 = ${t.comboBreak};
`;for(let C=0;C<l;C++){const M=t.actions[C];g+=`
const action${C} = Action( // ${M.actionIndex}
  ${x2(M.actionType)},
  SetConditionals(
    ${M.setConditionals.enabledHunterOfGlacialForest},${s.DEBUG?" // enabledHunterOfGlacialForest":""}
    ${M.setConditionals.enabledFiresmithOfLavaForging},${s.DEBUG?" // enabledFiresmithOfLavaForging":""}
    ${M.setConditionals.enabledGeniusOfBrilliantStars},${s.DEBUG?" // enabledGeniusOfBrilliantStars":""}
    ${M.setConditionals.enabledBandOfSizzlingThunder},${s.DEBUG?" // enabledBandOfSizzlingThunder":""}
    ${M.setConditionals.enabledMessengerTraversingHackerspace},${s.DEBUG?" // enabledMessengerTraversingHackerspace":""}
    ${M.setConditionals.enabledCelestialDifferentiator},${s.DEBUG?" // enabledCelestialDifferentiator":""}
    ${M.setConditionals.enabledWatchmakerMasterOfDreamMachinations},${s.DEBUG?" // enabledWatchmakerMasterOfDreamMachinations":""}
    ${M.setConditionals.enabledPenaconyLandOfTheDreams},${s.DEBUG?" // enabledPenaconyLandOfTheDreams":""}
    ${M.setConditionals.enabledIzumoGenseiAndTakamaDivineRealm},${s.DEBUG?" // enabledIzumoGenseiAndTakamaDivineRealm":""}
    ${M.setConditionals.enabledForgeOfTheKalpagniLantern},${s.DEBUG?" // enabledForgeOfTheKalpagniLantern":""}
    ${M.setConditionals.enabledTheWindSoaringValorous},${s.DEBUG?" // enabledTheWindSoaringValorous":""}
    ${M.setConditionals.enabledTheWondrousBananAmusementPark},${s.DEBUG?" // enabledTheWondrousBananAmusementPark":""}
    ${M.setConditionals.enabledScholarLostInErudition},${s.DEBUG?" // enabledScholarLostInErudition":""}
    ${M.setConditionals.enabledHeroOfTriumphantSong},${s.DEBUG?" // enabledHeroOfTriumphantSong":""}
    ${M.setConditionals.valueChampionOfStreetwiseBoxing},${s.DEBUG?" // valueChampionOfStreetwiseBoxing":""}
    ${M.setConditionals.valueWastelanderOfBanditryDesert},${s.DEBUG?" // valueWastelanderOfBanditryDesert":""}
    ${M.setConditionals.valueLongevousDisciple},${s.DEBUG?" // valueLongevousDisciple":""}
    ${M.setConditionals.valueTheAshblazingGrandDuke},${s.DEBUG?" // valueTheAshblazingGrandDuke":""}
    ${M.setConditionals.valuePrisonerInDeepConfinement},${s.DEBUG?" // valuePrisonerInDeepConfinement":""}
    ${M.setConditionals.valuePioneerDiverOfDeadWaters},${s.DEBUG?" // valuePioneerDiverOfDeadWaters":""}
    ${M.setConditionals.valueSigoniaTheUnclaimedDesolation},${s.DEBUG?" // valueSigoniaTheUnclaimedDesolation":""}
    ${M.setConditionals.valueDuranDynastyOfRunningWolves},${s.DEBUG?" // valueDuranDynastyOfRunningWolves":""}
    ${M.setConditionals.valueSacerdosRelivedOrdeal},${s.DEBUG?" // valueSacerdosRelivedOrdeal":""}
  ),
);`}for(let C=0;C<l;C++){const M=t.actions[C];g+=`
const computedStatsX${C} = ComputedStats(
${Uc(M.precomputedX,s)}
);`}if(t.path==Pa.Remembrance)for(let C=0;C<l;C++){const M=t.actions[C];g+=`
const computedStatsM${C} = ComputedStats(
${Uc(M.precomputedM,s)}
);`}return e=e.replace("/* INJECT ACTIONS DEFINITION */",g),e+=`
const actionCount = ${l};
`,e=e.replace("/* INJECT ACTION DAMAGE */",ft(M2(t),0)),e}function jc(e){return`evaluate${e.id}(p_x, p_m, p_sets, p_state);`}function P2(e,a){let t;return a.teammateIndex==0?t=e.teammate0:a.teammateIndex==1?t=e.teammate1:t=e.teammate2,t.teammateCharacterConditionals=t.characterConditionals,t.teammateLightConeConditionals=t.lightConeConditionals,t}function La(e,a,t,s,o){const r="";let l="",c="";return l+=e[a].map(u=>{if(u.teammateIndex==null)return u.gpu(s,o);{const d=P2(s,u);return u.gpu(d,o)}}).join(`
`),c+=e[a].flatMap(u=>[u.id,...u.supplementalState??[]].map(d=>d+`: f32,
`)).join(""),{conditionalEvaluators:r,conditionalDefinitionsWgsl:l,conditionalStateDefinition:c}}function _2(e,a){let t="",s=`
`,o=`
`,r=`
`;function l(u){s+=u.conditionalEvaluators,o+=u.conditionalDefinitionsWgsl,r+=u.conditionalStateDefinition}const c=a.actions[0].conditionalRegistry;return l(La(c,n.HP,"HP",e,a)),l(La(c,n.ATK,"ATK",e,a)),l(La(c,n.DEF,"DEF",e,a)),l(La(c,n.SPD,"SPD",e,a)),l(La(c,n.CR,"CR",e,a)),l(La(c,n.CD,"CD",e,a)),l(La(c,n.EHR,"EHR",e,a)),l(La(c,n.RES,"RES",e,a)),l(La(c,n.BE,"BE",e,a)),l(La(c,n.OHB,"OHB",e,a)),l(La(c,n.ERR,"ERR",e,a)),t+=o,t+=s,t+=`
struct ConditionalState {
${ft("actionIndex: i32,",1)}
${ft(r,1)}
}
  `,t}const A2={BASIC:rh,SKILL:lh,ULT:ch,FUA:uh,MEMO_SKILL:dh,MEMO_TALENT:mh};function x2(e){return A2[e]??0}function L2(e,a,t,s){const o={};for(const r of Object.values(Td))o[r]=(a.characterStatsBreakdown.base[r]??0)+(a.characterStatsBreakdown.lightCone[r]??0);return e+=Wc(o,"base"),e+=Wc(a.characterStatsBreakdown.traces,"trace"),e+=F2(a),e+=H2(t),e+=v2(a),e+=O2(a,s),e+=`
`,e}function O2(e,a){return`
const relicSetCount = ${Object.keys(f.SetsRelics).length};
const ornamentSetCount = ${Object.keys(f.SetsOrnaments).length};
const lSize = ${a.LinkRope.length};
const pSize = ${a.PlanarSphere.length};
const fSize = ${a.Feet.length};
const bSize = ${a.Body.length};
const gSize = ${a.Hands.length};
const hSize = ${a.Head.length};
`}function v2(e){const a=e.resultSort==k.COMBO.key?e.actions.length:1;let t="";for(let o=0;o<a;o++)e.path==Pa.Remembrance?t+=ft(`
case ${o}: { 
  (*outAction) = action${o}; 
  (*outX) = computedStatsX${o}; 
  (*outM) = computedStatsM${o}; 
}
    `,0):t+=ft(`
case ${o}: { 
  (*outAction) = action${o}; 
  (*outX) = computedStatsX${o}; 
}
    `,0);return`
fn getAction(actionIndex: i32, outAction: ptr<function, Action>, outX: ptr<function, ComputedStats>, outM: ptr<function, ComputedStats>) {
  switch (actionIndex) {
    ${t}
    default: { 
      (*outAction) = action0; 
    }
  }
}
  `}function H2(e){let a=`
`;a+=`const statDisplay: i32 = ${e.statDisplay=="combat"?0:1};
`,a+=`
`,a+=`const enemyCount: i32 = ${e.enemyCount};
`,a+=`const enemyElementalWeak: i32 = ${e.enemyElementalWeak?1:0};
`,a+=`const enemyLevel: i32 = ${e.enemyLevel};
`,a+=`const enemyMaxToughness: f32 = ${e.enemyMaxToughness};
`,a+=`const enemyResistance: f32 = ${e.enemyResistance};
`,a+=`const enemyEffectResistance: f32 = ${e.enemyEffectResistance};
`,a+=`const enemyWeaknessBroken: i32 = ${e.enemyWeaknessBroken?1:0};
`,a+=`
`,a+=`const resistance: f32 = ${(e.enemyElementalWeak?0:e.enemyResistance)-e.combatBuffs.RES_PEN};
`,a+=`
`;for(const[t,s]of Object.entries(e))!t.includes("Weight")&&(t.startsWith("min")||t.startsWith("max"))&&(a+=`const ${t}: f32 = ${s};
`);a+=`
`;for(const[t,s]of Object.entries(e.combatBuffs))a+=`const combatBuffs${t}: f32 = ${s};
`;return a+=`
`,a+=`const e: i32 = ${e.characterEidolon};
`,a+=`
`,a}function F2(e){let a=`
`;return a+=`const ELEMENT_INDEX: i32 = ${w2[e.elementalDamageType]};
`,a+=`const ELEMENTAL_BREAK_SCALING: f32 = ${e.elementalBreakScaling};
`,a}function Wc(e,a){let t=`
`;for(const[s,o]of Object.entries(Td))t+=`const ${a}${s}: f32 = ${e[o]};
`;return t}const Td={HP_P:n.HP_P,ATK_P:n.ATK_P,DEF_P:n.DEF_P,SPD_P:n.SPD_P,HP:n.HP,ATK:n.ATK,DEF:n.DEF,SPD:n.SPD,CR:n.CR,CD:n.CD,EHR:n.EHR,RES:n.RES,BE:n.BE,ERR:n.ERR,OHB:n.OHB,Physical_DMG:n.Physical_DMG,Fire_DMG:n.Fire_DMG,Ice_DMG:n.Ice_DMG,Lightning_DMG:n.Lightning_DMG,Wind_DMG:n.Wind_DMG,Quantum_DMG:n.Quantum_DMG,Imaginary_DMG:n.Imaginary_DMG},w2={[n.Physical_DMG]:0,[n.Fire_DMG]:1,[n.Ice_DMG]:2,[n.Lightning_DMG]:3,[n.Wind_DMG]:4,[n.Quantum_DMG]:5,[n.Imaginary_DMG]:6},k2=`// START GPU PARAMS
// ═════════════════════════════════════════════════════════════════════════════════════════════════════════════════╗
/* INJECT GPU PARAMS */
// ═════════════════════════════════════════════════════════════════════════════════════════════════════════════════╝
// END GPU PARAMS

// START ACTIONS DEFINITION
// ═════════════════════════════════════════════════════════════════════════════════════════════════════════════════╗
/* INJECT ACTIONS DEFINITION */
// ═════════════════════════════════════════════════════════════════════════════════════════════════════════════════╝
// END ACTIONS DEFINITION

const BASIC_DMG_TYPE = 1;
const SKILL_DMG_TYPE = 2;
const ULT_DMG_TYPE = 4;
const FUA_DMG_TYPE = 8;
const DOT_DMG_TYPE = 16;
const BREAK_DMG_TYPE = 32;
const SUPER_BREAK_DMG_TYPE = 64;
const MEMO_DMG_TYPE = 128;
const ADDITIONAL_DMG_TYPE = 256;

const BASIC_ABILITY_TYPE = 1;
const SKILL_ABILITY_TYPE = 2;
const ULT_ABILITY_TYPE = 4;
const FUA_ABILITY_TYPE = 8;
const DOT_ABILITY_TYPE = 16;
const BREAK_ABILITY_TYPE = 32;
const MEMO_SKILL_ABILITY_TYPE = 64;
const MEMO_TALENT_ABILITY_TYPE = 128;

const epsilon = 0.00000001f;

@group(0) @binding(0) var<uniform> params : Params;

@group(1) @binding(0) var<storage> relics : array<Relic>;
@group(1) @binding(1) var<storage> ornamentSetSolutionsMatrix : array<i32>;
@group(1) @binding(2) var<storage> relicSetSolutionsMatrix : array<i32>;

// START RESULTS BUFFER
// ═════════════════════════════════════════════════════════════════════════════════════════════════════════════════╗
/* INJECT RESULTS BUFFER */
// ═════════════════════════════════════════════════════════════════════════════════════════════════════════════════╝
// END RESULTS BUFFER

@compute @workgroup_size(WORKGROUP_SIZE)
fn main(
  @builtin(workgroup_id) workgroup_id : vec3<u32>,
  @builtin(local_invocation_id) local_invocation_id : vec3<u32>,
  @builtin(global_invocation_id) global_invocation_id : vec3<u32>,
  @builtin(local_invocation_index) local_invocation_index: u32,
  @builtin(num_workgroups) num_workgroups: vec3<u32>
) {
  let workgroup_index =
    workgroup_id.x +
    workgroup_id.y * num_workgroups.x +
    workgroup_id.z * num_workgroups.x * num_workgroups.y;
  let indexGlobal = i32(workgroup_index * WORKGROUP_SIZE + local_invocation_index);

  // Load params
  let xl = i32(params.xl);
  let xp = i32(params.xp);
  let xf = i32(params.xf);
  let xb = i32(params.xb);
  let xg = i32(params.xg);
  let xh = i32(params.xh);
  let threshold = params.threshold;
  let cycleIndex = indexGlobal * CYCLES_PER_INVOCATION;

  var failures: f32 = 1;

  var emptyComputedStats = ComputedStats();

  for (var i = 0; i < CYCLES_PER_INVOCATION; i++) {

    // Calculate global_invocation_index

    let index = cycleIndex + i;

    // Calculate relic index per slot

    let l = (index % lSize);
    let p = (((index - l) / lSize) % pSize);
    let f = (((index - p * lSize - l) / (lSize * pSize)) % fSize);
    let b = (((index - f * pSize * lSize - p * lSize - l) / (lSize * pSize * fSize)) % bSize);
    let g = (((index - b * fSize * pSize * lSize - f * pSize * lSize - p * lSize - l) / (lSize * pSize * fSize * bSize)) % gSize);
    let h = (((index - g * bSize * fSize * pSize * lSize - b * fSize * pSize * lSize - f * pSize * lSize - p * lSize - l) / (lSize * pSize * fSize * bSize * gSize)) % hSize);

    let finalL = (l + xl) % lSize;
    let carryL = (l + xl) / lSize;
    let finalP = (p + xp + carryL) % pSize;
    let carryP = (p + xp + carryL) / pSize;
    let finalF = (f + xf + carryP) % fSize;
    let carryF = (f + xf + carryP) / fSize;
    let finalB = (b + xb + carryF) % bSize;
    let carryB = (b + xb + carryF) / bSize;
    let finalG = (g + xg + carryB) % gSize;
    let carryG = (g + xg + carryB) / gSize;
    let finalH = (h + xh + carryG) % hSize;

    // Calculate Relic structs

    let head         : Relic = (relics[finalH]);
    let hands        : Relic = (relics[finalG + hSize]);
    let body         : Relic = (relics[finalB + hSize + gSize]);
    let feet         : Relic = (relics[finalF + hSize + gSize + bSize]);
    let planarSphere : Relic = (relics[finalP + hSize + gSize + bSize + fSize]);
    let linkRope     : Relic = (relics[finalL + hSize + gSize + bSize + fSize + pSize]);

    // Convert set ID

    let setH: u32 = u32(head.relicSet);
    let setG: u32 = u32(hands.relicSet);
    let setB: u32 = u32(body.relicSet);
    let setF: u32 = u32(feet.relicSet);
    let setP: u32 = u32(planarSphere.relicSet);
    let setL: u32 = u32(linkRope.relicSet);

    // Get the index for set permutation lookup

    let relicSetIndex: u32 = setH + setB * relicSetCount + setG * relicSetCount * relicSetCount + setF * relicSetCount * relicSetCount * relicSetCount;
    let ornamentSetIndex: u32 = setP + setL * ornamentSetCount;

    // START SET FILTERS
    // ═════════════════════════════════════════════════════════════════════════════════════════════════════════════════╗
    /* INJECT SET FILTERS */
    // ═════════════════════════════════════════════════════════════════════════════════════════════════════════════════╝
    // END SET FILTERS

    // Calculate relic set counts

    var sets = Sets();

    sets.PasserbyOfWanderingCloud            = i32((1 >> (setH ^ 0)) + (1 >> (setG ^ 0)) + (1 >> (setB ^ 0)) + (1 >> (setF ^ 0)));
    sets.MusketeerOfWildWheat                = i32((1 >> (setH ^ 1)) + (1 >> (setG ^ 1)) + (1 >> (setB ^ 1)) + (1 >> (setF ^ 1)));
    sets.KnightOfPurityPalace                = i32((1 >> (setH ^ 2)) + (1 >> (setG ^ 2)) + (1 >> (setB ^ 2)) + (1 >> (setF ^ 2)));
    sets.HunterOfGlacialForest               = i32((1 >> (setH ^ 3)) + (1 >> (setG ^ 3)) + (1 >> (setB ^ 3)) + (1 >> (setF ^ 3)));
    sets.ChampionOfStreetwiseBoxing          = i32((1 >> (setH ^ 4)) + (1 >> (setG ^ 4)) + (1 >> (setB ^ 4)) + (1 >> (setF ^ 4)));
    sets.GuardOfWutheringSnow                = i32((1 >> (setH ^ 5)) + (1 >> (setG ^ 5)) + (1 >> (setB ^ 5)) + (1 >> (setF ^ 5)));
    sets.FiresmithOfLavaForging              = i32((1 >> (setH ^ 6)) + (1 >> (setG ^ 6)) + (1 >> (setB ^ 6)) + (1 >> (setF ^ 6)));
    sets.GeniusOfBrilliantStars              = i32((1 >> (setH ^ 7)) + (1 >> (setG ^ 7)) + (1 >> (setB ^ 7)) + (1 >> (setF ^ 7)));
    sets.BandOfSizzlingThunder               = i32((1 >> (setH ^ 8)) + (1 >> (setG ^ 8)) + (1 >> (setB ^ 8)) + (1 >> (setF ^ 8)));
    sets.EagleOfTwilightLine                 = i32((1 >> (setH ^ 9)) + (1 >> (setG ^ 9)) + (1 >> (setB ^ 9)) + (1 >> (setF ^ 9)));
    sets.ThiefOfShootingMeteor               = i32((1 >> (setH ^ 10)) + (1 >> (setG ^ 10)) + (1 >> (setB ^ 10)) + (1 >> (setF ^ 10)));
    sets.WastelanderOfBanditryDesert         = i32((1 >> (setH ^ 11)) + (1 >> (setG ^ 11)) + (1 >> (setB ^ 11)) + (1 >> (setF ^ 11)));
    sets.LongevousDisciple                   = i32((1 >> (setH ^ 12)) + (1 >> (setG ^ 12)) + (1 >> (setB ^ 12)) + (1 >> (setF ^ 12)));
    sets.MessengerTraversingHackerspace      = i32((1 >> (setH ^ 13)) + (1 >> (setG ^ 13)) + (1 >> (setB ^ 13)) + (1 >> (setF ^ 13)));
    sets.TheAshblazingGrandDuke              = i32((1 >> (setH ^ 14)) + (1 >> (setG ^ 14)) + (1 >> (setB ^ 14)) + (1 >> (setF ^ 14)));
    sets.PrisonerInDeepConfinement           = i32((1 >> (setH ^ 15)) + (1 >> (setG ^ 15)) + (1 >> (setB ^ 15)) + (1 >> (setF ^ 15)));
    sets.PioneerDiverOfDeadWaters            = i32((1 >> (setH ^ 16)) + (1 >> (setG ^ 16)) + (1 >> (setB ^ 16)) + (1 >> (setF ^ 16)));
    sets.WatchmakerMasterOfDreamMachinations = i32((1 >> (setH ^ 17)) + (1 >> (setG ^ 17)) + (1 >> (setB ^ 17)) + (1 >> (setF ^ 17)));
    sets.IronCavalryAgainstTheScourge        = i32((1 >> (setH ^ 18)) + (1 >> (setG ^ 18)) + (1 >> (setB ^ 18)) + (1 >> (setF ^ 18)));
    sets.TheWindSoaringValorous              = i32((1 >> (setH ^ 19)) + (1 >> (setG ^ 19)) + (1 >> (setB ^ 19)) + (1 >> (setF ^ 19)));
    sets.SacerdosRelivedOrdeal               = i32((1 >> (setH ^ 20)) + (1 >> (setG ^ 20)) + (1 >> (setB ^ 20)) + (1 >> (setF ^ 20)));
    sets.ScholarLostInErudition              = i32((1 >> (setH ^ 21)) + (1 >> (setG ^ 21)) + (1 >> (setB ^ 21)) + (1 >> (setF ^ 21)));
    sets.HeroOfTriumphantSong                = i32((1 >> (setH ^ 22)) + (1 >> (setG ^ 22)) + (1 >> (setB ^ 22)) + (1 >> (setF ^ 22)));
    sets.PoetOfMourningCollapse              = i32((1 >> (setH ^ 23)) + (1 >> (setG ^ 23)) + (1 >> (setB ^ 23)) + (1 >> (setF ^ 23)));

    // Calculate ornament set counts

    if (setP == setL) {
      sets.SpaceSealingStation             = i32((1 >> (setP ^ 0)) + (1 >> (setL ^ 0)));
      sets.FleetOfTheAgeless               = i32((1 >> (setP ^ 1)) + (1 >> (setL ^ 1)));
      sets.PanCosmicCommercialEnterprise   = i32((1 >> (setP ^ 2)) + (1 >> (setL ^ 2)));
      sets.BelobogOfTheArchitects          = i32((1 >> (setP ^ 3)) + (1 >> (setL ^ 3)));
      sets.CelestialDifferentiator         = i32((1 >> (setP ^ 4)) + (1 >> (setL ^ 4)));
      sets.InertSalsotto                   = i32((1 >> (setP ^ 5)) + (1 >> (setL ^ 5)));
      sets.TaliaKingdomOfBanditry          = i32((1 >> (setP ^ 6)) + (1 >> (setL ^ 6)));
      sets.SprightlyVonwacq                = i32((1 >> (setP ^ 7)) + (1 >> (setL ^ 7)));
      sets.RutilantArena                   = i32((1 >> (setP ^ 8)) + (1 >> (setL ^ 8)));
      sets.BrokenKeel                      = i32((1 >> (setP ^ 9)) + (1 >> (setL ^ 9)));
      sets.FirmamentFrontlineGlamoth       = i32((1 >> (setP ^ 10)) + (1 >> (setL ^ 10)));
      sets.PenaconyLandOfTheDreams         = i32((1 >> (setP ^ 11)) + (1 >> (setL ^ 11)));
      sets.SigoniaTheUnclaimedDesolation   = i32((1 >> (setP ^ 12)) + (1 >> (setL ^ 12)));
      sets.IzumoGenseiAndTakamaDivineRealm = i32((1 >> (setP ^ 13)) + (1 >> (setL ^ 13)));
      sets.DuranDynastyOfRunningWolves     = i32((1 >> (setP ^ 14)) + (1 >> (setL ^ 14)));
      sets.ForgeOfTheKalpagniLantern       = i32((1 >> (setP ^ 15)) + (1 >> (setL ^ 15)));
      sets.LushakaTheSunkenSeas            = i32((1 >> (setP ^ 16)) + (1 >> (setL ^ 16)));
      sets.TheWondrousBananAmusementPark   = i32((1 >> (setP ^ 17)) + (1 >> (setL ^ 17)));
      sets.BoneCollectionsSereneDemesne    = i32((1 >> (setP ^ 18)) + (1 >> (setL ^ 18)));
      sets.GiantTreeOfRaptBrooding         = i32((1 >> (setP ^ 19)) + (1 >> (setL ^ 19)));
    }

    var c: BasicStats = BasicStats();

    // Calculate relic stat sums
    // NOTE: Performance is worse if we don't add elemental dmg from head/hands/body/feet/rope

    c.HP_P  = head.HP_P + hands.HP_P + body.HP_P + feet.HP_P + planarSphere.HP_P + linkRope.HP_P;
    c.ATK_P = head.ATK_P + hands.ATK_P + body.ATK_P + feet.ATK_P + planarSphere.ATK_P + linkRope.ATK_P;
    c.DEF_P = head.DEF_P + hands.DEF_P + body.DEF_P + feet.DEF_P + planarSphere.DEF_P + linkRope.DEF_P;
    c.SPD_P = head.SPD_P + hands.SPD_P + body.SPD_P + feet.SPD_P + planarSphere.SPD_P + linkRope.SPD_P;
    c.HP  = epsilon + head.HP + hands.HP + body.HP + feet.HP + planarSphere.HP + linkRope.HP;
    c.ATK = epsilon + head.ATK + hands.ATK + body.ATK + feet.ATK + planarSphere.ATK + linkRope.ATK;
    c.DEF = epsilon + head.DEF + hands.DEF + body.DEF + feet.DEF + planarSphere.DEF + linkRope.DEF;
    c.SPD = epsilon + head.SPD + hands.SPD + body.SPD + feet.SPD + planarSphere.SPD + linkRope.SPD;
    c.CR  = epsilon + head.CR + hands.CR + body.CR + feet.CR + planarSphere.CR + linkRope.CR;
    c.CD  = epsilon + head.CD + hands.CD + body.CD + feet.CD + planarSphere.CD + linkRope.CD;
    c.EHR = epsilon + head.EHR + hands.EHR + body.EHR + feet.EHR + planarSphere.EHR + linkRope.EHR;
    c.RES = epsilon + head.RES + hands.RES + body.RES + feet.RES + planarSphere.RES + linkRope.RES;
    c.BE  = epsilon + head.BE + hands.BE + body.BE + feet.BE + planarSphere.BE + linkRope.BE;
    c.ERR = epsilon + head.ERR + hands.ERR + body.ERR + feet.ERR + planarSphere.ERR + linkRope.ERR;
    c.OHB = epsilon + head.OHB + hands.OHB + body.OHB + feet.OHB + planarSphere.OHB + linkRope.OHB;
    c.PHYSICAL_DMG_BOOST  = epsilon + head.PHYSICAL_DMG_BOOST + hands.PHYSICAL_DMG_BOOST + body.PHYSICAL_DMG_BOOST + feet.PHYSICAL_DMG_BOOST + planarSphere.PHYSICAL_DMG_BOOST + linkRope.PHYSICAL_DMG_BOOST;
    c.FIRE_DMG_BOOST      = epsilon + head.FIRE_DMG_BOOST + hands.FIRE_DMG_BOOST + body.FIRE_DMG_BOOST + feet.FIRE_DMG_BOOST + planarSphere.FIRE_DMG_BOOST + linkRope.FIRE_DMG_BOOST;
    c.ICE_DMG_BOOST       = epsilon + head.ICE_DMG_BOOST + hands.ICE_DMG_BOOST + body.ICE_DMG_BOOST + feet.ICE_DMG_BOOST + planarSphere.ICE_DMG_BOOST + linkRope.ICE_DMG_BOOST;
    c.LIGHTNING_DMG_BOOST = epsilon + head.LIGHTNING_DMG_BOOST + hands.LIGHTNING_DMG_BOOST + body.LIGHTNING_DMG_BOOST + feet.LIGHTNING_DMG_BOOST + planarSphere.LIGHTNING_DMG_BOOST + linkRope.LIGHTNING_DMG_BOOST;
    c.WIND_DMG_BOOST      = epsilon + head.WIND_DMG_BOOST + hands.WIND_DMG_BOOST + body.WIND_DMG_BOOST + feet.WIND_DMG_BOOST + planarSphere.WIND_DMG_BOOST + linkRope.WIND_DMG_BOOST;
    c.QUANTUM_DMG_BOOST   = epsilon + head.QUANTUM_DMG_BOOST + hands.QUANTUM_DMG_BOOST + body.QUANTUM_DMG_BOOST + feet.QUANTUM_DMG_BOOST + planarSphere.QUANTUM_DMG_BOOST + linkRope.QUANTUM_DMG_BOOST;
    c.IMAGINARY_DMG_BOOST = epsilon + head.IMAGINARY_DMG_BOOST + hands.IMAGINARY_DMG_BOOST + body.IMAGINARY_DMG_BOOST + feet.IMAGINARY_DMG_BOOST + planarSphere.IMAGINARY_DMG_BOOST + linkRope.IMAGINARY_DMG_BOOST;

    // Calculate basic stats

    c.HP  += (baseHP) * (1 + c.HP_P + traceHP_P + baseHP_P) + traceHP;
    c.ATK += (baseATK) * (1 + c.ATK_P + traceATK_P + baseATK_P) + traceATK;
    c.DEF += (baseDEF) * (1 + c.DEF_P + traceDEF_P + baseDEF_P) + traceDEF;
    c.SPD += (baseSPD) * (1 + c.SPD_P + traceSPD_P + baseSPD_P) + traceSPD;
    c.CR  += baseCR + traceCR;
    c.CD  += baseCD + traceCD;
    c.EHR += baseEHR + traceEHR;
    c.RES += baseRES + traceRES;
    c.BE  += baseBE + traceBE;
    c.ERR += baseERR + traceERR;
    c.OHB += baseOHB + traceOHB;
    c.PHYSICAL_DMG_BOOST  += tracePhysical_DMG + 0.10 * p2(sets.ChampionOfStreetwiseBoxing);
    c.FIRE_DMG_BOOST      += traceFire_DMG + 0.10 * p2(sets.FiresmithOfLavaForging);
    c.ICE_DMG_BOOST       += traceIce_DMG + 0.10 * p2(sets.HunterOfGlacialForest);
    c.LIGHTNING_DMG_BOOST += traceLightning_DMG + 0.10 * p2(sets.BandOfSizzlingThunder);
    c.WIND_DMG_BOOST      += traceWind_DMG + 0.10 * p2(sets.EagleOfTwilightLine);
    c.QUANTUM_DMG_BOOST   += traceQuantum_DMG + 0.10 * p2(sets.GeniusOfBrilliantStars) + 0.10 * p2(sets.PoetOfMourningCollapse);
    c.IMAGINARY_DMG_BOOST += traceImaginary_DMG + 0.10 * p2(sets.WastelanderOfBanditryDesert);

    // Calculate set effects

    c.SPD += (baseSPD) * (
      0.06 * p2(sets.MessengerTraversingHackerspace) +
      0.06 * p2(sets.ForgeOfTheKalpagniLantern) +
      0.06 * p4(sets.MusketeerOfWildWheat) +
      0.06 * p2(sets.SacerdosRelivedOrdeal) -
      0.08 * p4(sets.PoetOfMourningCollapse) +
      0.06 * p2(sets.GiantTreeOfRaptBrooding)
    );

    c.HP += (baseHP) * (
      0.12 * p2(sets.FleetOfTheAgeless) +
      0.12 * p2(sets.LongevousDisciple) +
      0.12 * p2(sets.BoneCollectionsSereneDemesne)
    );

    c.ATK += (baseATK) * (
      0.12 * p2(sets.SpaceSealingStation) +
      0.12 * p2(sets.FirmamentFrontlineGlamoth) +
      0.12 * p2(sets.MusketeerOfWildWheat) +
      0.12 * p2(sets.PrisonerInDeepConfinement) +
      0.12 * p2(sets.IzumoGenseiAndTakamaDivineRealm) +
      0.12 * p2(sets.TheWindSoaringValorous) +
      0.12 * p2(sets.HeroOfTriumphantSong)
    );

    c.DEF += (baseDEF) * (
      0.15 * p2(sets.BelobogOfTheArchitects) +
      0.15 * p2(sets.KnightOfPurityPalace)
    );

    c.CR += (
      0.08 * p2(sets.InertSalsotto) +
      0.08 * p2(sets.RutilantArena) +
      0.04 * p4(sets.PioneerDiverOfDeadWaters) +
      0.04 * p2(sets.SigoniaTheUnclaimedDesolation) +
      0.06 * p4(sets.TheWindSoaringValorous) +
      0.08 * p2(sets.ScholarLostInErudition)
    );

    c.CD += (
      0.16 * p2(sets.CelestialDifferentiator) +
      0.16 * p2(sets.TheWondrousBananAmusementPark)
    );

    c.EHR += (
      0.10 * p2(sets.PanCosmicCommercialEnterprise)
    );

    c.RES += (
      0.10 * p2(sets.BrokenKeel)
    );

    c.BE += (
      0.16 * p2(sets.TaliaKingdomOfBanditry) +
      0.16 * p2(sets.ThiefOfShootingMeteor) +
      0.16 * p4(sets.ThiefOfShootingMeteor) +
      0.16 * p2(sets.WatchmakerMasterOfDreamMachinations) +
      0.16 * p2(sets.IronCavalryAgainstTheScourge)
    );

    c.ERR += (
      0.05 * p2(sets.SprightlyVonwacq) +
      0.05 * p2(sets.PenaconyLandOfTheDreams) +
      0.05 * p2(sets.LushakaTheSunkenSeas)
    );

    c.OHB += (
      0.10 * p2(sets.PasserbyOfWanderingCloud)
    );

    let diffATK = c.ATK + combatBuffsATK + combatBuffsATK_P * baseATK;
    let diffDEF = c.DEF + combatBuffsDEF + combatBuffsDEF_P * baseDEF;
    let diffHP = c.HP   + combatBuffsHP  + combatBuffsHP_P  * baseHP;
    let diffSPD = c.SPD + combatBuffsSPD + combatBuffsSPD_P * baseSPD;
    let diffCD = c.CD   + combatBuffsCD;
    let diffCR = c.CR   + combatBuffsCR;
    let diffEHR = c.EHR;
    let diffRES = c.RES;
    let diffBE = c.BE   + combatBuffsBE;
    let diffERR = c.ERR;
    let diffOHB = c.OHB;

    var combo = 0.0;

    /* START MC ASSIGNMENT */
    var mc = c;
    /* END MC ASSIGNMENT */

    for (var actionIndex = actionCount - 1; actionIndex >= 0; actionIndex--) {
      var action: Action;
      var x: ComputedStats;
      var m: ComputedStats;
      getAction(actionIndex, &action, &x, &m);

      let setConditionals = action.setConditionals;
      var state = ConditionalState();
      state.actionIndex = actionIndex;

      let p_x = &x;
      let p_m = &m;
      let p_sets = &sets;
      let p_state = &state;

      // BASIC

      if (p2(sets.CelestialDifferentiator) >= 1 && setConditionals.enabledCelestialDifferentiator == true && c.CD >= 1.20) {
        x.CR += 0.60;
      }

      // SPD

      if (p4(sets.MessengerTraversingHackerspace) >= 1 && setConditionals.enabledMessengerTraversingHackerspace == true) {
        x.SPD_P += 0.12;
        m.SPD_P += 0.12;
      }
      if (p4(sets.HeroOfTriumphantSong) >= 1 && setConditionals.enabledHeroOfTriumphantSong == true) {
        x.SPD_P += 0.06;
        x.CD += 0.30;
        m.CD += 0.30;
      }

      // ATK

      if (p4(sets.ChampionOfStreetwiseBoxing) >= 1) {
        x.ATK_P += 0.05 * f32(setConditionals.valueChampionOfStreetwiseBoxing);
      }
      if (p4(sets.BandOfSizzlingThunder) >= 1 && setConditionals.enabledBandOfSizzlingThunder == true) {
        x.ATK_P += 0.20;
      }
      if (p4(sets.TheAshblazingGrandDuke) >= 1) {
        x.ATK_P += 0.06 * f32(setConditionals.valueTheAshblazingGrandDuke);
      }

      // DEF

      // HP

      // CD

      if (p4(sets.HunterOfGlacialForest) >= 1 && setConditionals.enabledHunterOfGlacialForest == true) {
        x.CD += 0.25;
      }
      if (p4(sets.WastelanderOfBanditryDesert) >= 1 && setConditionals.valueWastelanderOfBanditryDesert == 2) {
        x.CD += 0.10;
      }
      if (p4(sets.PioneerDiverOfDeadWaters) >= 1) {
        x.CD += getPioneerSetCd(setConditionals.valuePioneerDiverOfDeadWaters);
      }
      if (p2(sets.SigoniaTheUnclaimedDesolation) >= 1) {
        x.CD += 0.04 * f32(setConditionals.valueSigoniaTheUnclaimedDesolation);
      }
      if (p2(sets.DuranDynastyOfRunningWolves) >= 1 && setConditionals.valueDuranDynastyOfRunningWolves >= 5) {
        x.CD += 0.25;
      }
      if (p2(sets.TheWondrousBananAmusementPark) >= 1 && setConditionals.enabledTheWondrousBananAmusementPark == true) {
        x.CD += 0.32;
      }
      if (p4(sets.SacerdosRelivedOrdeal) >= 1) {
        x.CD += 0.18 * f32(setConditionals.valueSacerdosRelivedOrdeal);
      }

      // CR

      if (p4(sets.WastelanderOfBanditryDesert) >= 1 && setConditionals.valueWastelanderOfBanditryDesert > 0) {
        x.CR += 0.10;
      }
      if (p4(sets.LongevousDisciple) >= 1) {
        x.CR += 0.08 * f32(setConditionals.valueLongevousDisciple);
      }
      if (p4(sets.PioneerDiverOfDeadWaters) >= 1 && setConditionals.valuePioneerDiverOfDeadWaters > 2) {
        x.CR += 0.04;
      }
      if (p2(sets.IzumoGenseiAndTakamaDivineRealm) >= 1 && setConditionals.enabledIzumoGenseiAndTakamaDivineRealm == true) {
        x.CR += 0.12;
      }
      if (p4(sets.PoetOfMourningCollapse) >= 1) {
        let crValue = select(0, 0.20, c.SPD < 110) + select(0, 0.12, c.SPD < 95);
        x.CR += crValue;
        m.CR += crValue;
      }

      // BE

      if (p4(sets.WatchmakerMasterOfDreamMachinations) >= 1 && setConditionals.enabledWatchmakerMasterOfDreamMachinations == true) {
        x.BE += 0.30;
        m.BE += 0.30;
      }
      if (p2(sets.ForgeOfTheKalpagniLantern) >= 1 && setConditionals.enabledForgeOfTheKalpagniLantern == true) {
        x.BE += 0.40;
      }

      // Buffs

      // Basic boost
      if (p4(sets.MusketeerOfWildWheat) >= 1) {
        buffAbilityDmg(&x, BASIC_DMG_TYPE, 0.10, 1);
      }

      // Skill boost
      if (p4(sets.FiresmithOfLavaForging) >= 1) {
        buffAbilityDmg(&x, SKILL_DMG_TYPE, 0.12, 1);
      }

      // Fua boost
      if (p2(sets.TheAshblazingGrandDuke) >= 1) {
        buffAbilityDmg(&x, FUA_DMG_TYPE, 0.20, 1);
      }
      if (p2(sets.DuranDynastyOfRunningWolves) >= 1) {
        buffAbilityDmg(&x, FUA_DMG_TYPE, 0.05 * f32(setConditionals.valueDuranDynastyOfRunningWolves), 1);
      }

      // Ult boost
      if (p4(sets.TheWindSoaringValorous) >= 1) {
        buffAbilityDmg(&x, ULT_DMG_TYPE, 0.36 * f32(setConditionals.enabledTheWindSoaringValorous), 1);
      }

      if (p4(sets.ScholarLostInErudition) >= 1) {
        buffAbilityDmg(&x, SKILL_DMG_TYPE | ULT_DMG_TYPE, 0.20, 1);

        if (setConditionals.enabledScholarLostInErudition == true) {
          buffAbilityDmg(&x, SKILL_DMG_TYPE, 0.25, 1);
        }
      }

      // Other boosts

      if (p4(sets.GeniusOfBrilliantStars) >= 1) {
        if (setConditionals.enabledGeniusOfBrilliantStars == true) {
          x.DEF_PEN += 0.20;
        } else {
          x.DEF_PEN += 0.10;
        }
      }

      if (p4(sets.PrisonerInDeepConfinement) >= 1) {
        x.DEF_PEN += 0.06 * f32(setConditionals.valuePrisonerInDeepConfinement);
      }

      if (p2(sets.PioneerDiverOfDeadWaters) >= 1 && setConditionals.valuePioneerDiverOfDeadWaters >= 0) {
        x.ELEMENTAL_DMG += 0.12;
      }

      if (p2(sets.FiresmithOfLavaForging) >= 1 && setConditionals.enabledFiresmithOfLavaForging == true) {
        x.FIRE_DMG_BOOST += 0.12;
      }

      if (p2(sets.GuardOfWutheringSnow) >= 1) {
        x.DMG_RED_MULTI *= (1 - 0.08);
      }

      if (p4(sets.KnightOfPurityPalace) >= 1) {
        x.SHIELD_BOOST += 0.20;
      }

      if (p2(sets.PenaconyLandOfTheDreams) >= 1 && setConditionals.enabledPenaconyLandOfTheDreams == true) {
        m.ELEMENTAL_DMG += 0.10;
      }

      x.ATK += diffATK;
      x.DEF += diffDEF;
      x.HP  += diffHP;
      x.SPD += diffSPD;
      x.CD  += diffCD;
      x.CR  += diffCR;
      x.EHR += diffEHR;
      x.RES += diffRES;
      x.BE  += diffBE;
      x.ERR += diffERR;
      x.OHB += diffOHB;

      addElementalDmg(&c, &x);

      x.ELEMENTAL_DMG += combatBuffsDMG_BOOST;
      x.EFFECT_RES_PEN += combatBuffsEFFECT_RES_PEN;
      x.VULNERABILITY += combatBuffsVULNERABILITY;
      x.BREAK_EFFICIENCY_BOOST += combatBuffsBREAK_EFFICIENCY;

      x.ATK += x.ATK_P * baseATK;
      x.DEF += x.DEF_P * baseDEF;
      x.HP += x.HP_P * baseHP;
      x.SPD += x.SPD_P * baseSPD;

      /* START COPY MEMOSPRITE BASIC STATS */
      m.CD  += mc.CD;
      m.CR  += mc.CR;
      m.EHR += mc.EHR;
      m.RES += mc.RES;
      m.BE  += mc.BE;
      m.ERR += mc.ERR;
      m.OHB += mc.OHB;

      addElementalDmg(&mc, &m);

      m.BASE_ATK = mc.ATK * x.MEMO_BASE_ATK_SCALING + x.MEMO_BASE_ATK_FLAT;
      m.BASE_DEF = mc.DEF * x.MEMO_BASE_DEF_SCALING + x.MEMO_BASE_DEF_FLAT;
      m.BASE_HP = mc.HP * x.MEMO_BASE_HP_SCALING + x.MEMO_BASE_HP_FLAT;
      m.BASE_SPD = mc.SPD * x.MEMO_BASE_SPD_SCALING + x.MEMO_BASE_SPD_FLAT;

      m.ATK += m.BASE_ATK + m.BASE_ATK * m.ATK_P;
      m.DEF += m.BASE_DEF + m.BASE_DEF * m.DEF_P;
      m.HP += m.BASE_HP + m.BASE_HP * m.HP_P;
      m.SPD += m.BASE_SPD + m.BASE_SPD * m.SPD_P;
      /* END COPY MEMOSPRITE BASIC STATS */

      // START BASIC CONDITIONALS
      // ═════════════════════════════════════════════════════════════════════════════════════════════════════════════════╗
      /* INJECT BASIC CONDITIONALS */
      // ═════════════════════════════════════════════════════════════════════════════════════════════════════════════════╝
      // END BASIC CONDITIONALS

      // START COMBAT CONDITIONALS
      // ═════════════════════════════════════════════════════════════════════════════════════════════════════════════════╗
      /* INJECT COMBAT CONDITIONALS */
      // ═════════════════════════════════════════════════════════════════════════════════════════════════════════════════╝
      // END COMBAT CONDITIONALS

      if (p2(sets.FirmamentFrontlineGlamoth) >= 1 && x.SPD >= 135) {
        x.ELEMENTAL_DMG += select(0.12, 0.18, x.SPD >= 160);
      }

      if (p2(sets.RutilantArena) >= 1 && x.CR >= 0.70) {
        buffAbilityDmg(p_x, BASIC_DMG_TYPE | SKILL_DMG_TYPE, 0.20, 1);
      }

      if (p2(sets.InertSalsotto) >= 1 && x.CR >= 0.50) {
        buffAbilityDmg(p_x, ULT_DMG_TYPE | FUA_DMG_TYPE, 0.15, 1);
      }

      if (p4(sets.IronCavalryAgainstTheScourge) >= 1 && x.BE >= 1.50) {
        buffAbilityDefShred(p_x, BREAK_DMG_TYPE, 0.10, 1);
        buffAbilityDefShred(p_x, SUPER_BREAK_DMG_TYPE, select(0, 0.15, x.BE >= 2.50), 1);
      }

      // START ACTION CONDITIONALS
      // ═════════════════════════════════════════════════════════════════════════════════════════════════════════════════╗
      /* INJECT ACTION CONDITIONALS */
      // ═════════════════════════════════════════════════════════════════════════════════════════════════════════════════╝
      // END ACTION CONDITIONALS

      // Calculate damage

      addComputedElementalDmg(&x);

      /* START MEMOSPRITE DAMAGE CALCS */
      calculateDamage(&m, &emptyComputedStats, actionIndex, action.abilityType);
      /* END MEMOSPRITE DAMAGE CALCS */

      calculateDamage(&x, &m, actionIndex, action.abilityType);

      if (actionIndex > 0) {
        if (action.abilityType == BASIC_ABILITY_TYPE) {
          combo += x.BASIC_DMG;
        } else if (action.abilityType == SKILL_ABILITY_TYPE) {
          combo += x.SKILL_DMG;
        } else if (action.abilityType == ULT_ABILITY_TYPE) {
          combo += x.ULT_DMG;
        } else if (action.abilityType == FUA_ABILITY_TYPE) {
          combo += x.FUA_DMG;
        } else if (action.abilityType == MEMO_SKILL_ABILITY_TYPE) {
          combo += x.MEMO_SKILL_DMG;
        } else if (action.abilityType == MEMO_TALENT_ABILITY_TYPE) {
          combo += x.MEMO_TALENT_DMG;
        }
      } else {
        x.COMBO_DMG = combo + comboDot * x.DOT_DMG + comboBreak * x.BREAK_DMG;

        // START COMBAT STAT FILTERS
        // ═════════════════════════════════════════════════════════════════════════════════════════════════════════════════╗
        /* INJECT COMBAT STAT FILTERS */
        // ═════════════════════════════════════════════════════════════════════════════════════════════════════════════════╝
        // END COMBAT STAT FILTERS


        // START BASIC STAT FILTERS
        // ═════════════════════════════════════════════════════════════════════════════════════════════════════════════════╗
        /* INJECT BASIC STAT FILTERS */
        // ═════════════════════════════════════════════════════════════════════════════════════════════════════════════════╝
        // END BASIC STAT FILTERS


        // START RATING STAT FILTERS
        // ═════════════════════════════════════════════════════════════════════════════════════════════════════════════════╗
        /* INJECT RATING STAT FILTERS */
        // ═════════════════════════════════════════════════════════════════════════════════════════════════════════════════╝
        // END RATING STAT FILTERS


        // START RETURN VALUE
        // ═════════════════════════════════════════════════════════════════════════════════════════════════════════════════╗
        /* INJECT RETURN VALUE */
        // ═════════════════════════════════════════════════════════════════════════════════════════════════════════════════╝
        // END RETURN VALUE
      }
    }
  }
}

fn calculateDamage(
  p_x: ptr<function, ComputedStats>,
  p_m: ptr<function, ComputedStats>,
  actionIndex: i32,
  abilityType: f32,
) {
  let x = *p_x;
  let m = *p_m;
  let eLevel: f32 = f32(enemyLevel);

  (*p_x).CR += x.CR_BOOST;
  (*p_x).CD += x.CD_BOOST;
  (*p_x).ATK += x.ATK_P_BOOST * baseATK;

  let baseDmgBoost = 1 + x.ELEMENTAL_DMG;
  let baseDefPen = x.DEF_PEN + combatBuffsDEF_PEN;
  let baseUniversalMulti = 0.9 + x.ENEMY_WEAKNESS_BROKEN * 0.1;
  let baseResistance = resistance - x.RES_PEN - combatBuffsRES_PEN - getElementalResPen(p_x);
  let baseBreakEfficiencyBoost = 1 + x.BREAK_EFFICIENCY_BOOST;

  // === Super / Break ===

  (*p_x).BREAK_DMG
    = baseUniversalMulti
    * 3767.5533
    * ELEMENTAL_BREAK_SCALING
    * calculateDefMulti(baseDefPen + x.BREAK_DEF_PEN)
    * (0.5 + enemyMaxToughness / 120)
    * (1 + x.VULNERABILITY + x.BREAK_VULNERABILITY)
    * (1 - baseResistance)
    * (1 + x.BE)
    * (1 + x.BREAK_DMG_BOOST);

  let baseSuperBreakInstanceDmg
    = baseUniversalMulti
    * 3767.5533
    * calculateDefMulti(baseDefPen + x.SUPER_BREAK_DEF_PEN)
    * (1 + x.VULNERABILITY + x.SUPER_BREAK_VULNERABILITY)
    * (1 - baseResistance)
    * (1 + x.BE)
    * (1 + x.SUPER_BREAK_DMG_BOOST)
    * (0.10f);

  if (actionIndex == 0) {
    /* START DOT CALC */
    let dotDmgBoostMulti = baseDmgBoost + x.DOT_DMG_BOOST;
    let dotDefMulti = calculateDefMulti(baseDefPen + x.DOT_DEF_PEN);
    let dotVulnerabilityMulti = 1 + x.VULNERABILITY + x.DOT_VULNERABILITY;
    let dotResMulti = 1 - (baseResistance - x.DOT_RES_PEN);
    let dotEhrMulti = calculateEhrMulti(p_x);
    let dotTrueDmgMulti = 1 + x.TRUE_DMG_MODIFIER + x.DOT_TRUE_DMG_MODIFIER;
    let initialDmg = calculateInitial(
      p_x,
      x.DOT_DMG,
      x.DOT_HP_SCALING,
      x.DOT_DEF_SCALING,
      x.DOT_ATK_SCALING,
      x.DOT_ATK_P_BOOST
    );

    if (initialDmg > 0) {
      (*p_x).DOT_DMG = initialDmg
        * (baseUniversalMulti)
        * (dotDmgBoostMulti)
        * (dotDefMulti)
        * (dotVulnerabilityMulti)
        * (dotResMulti)
        * (dotEhrMulti)
        * (dotTrueDmgMulti);
    }
    /* END DOT CALC */

    if (x.HEAL_VALUE > 0) {
      (*p_x).HEAL_VALUE = x.HEAL_VALUE * (
        1
        + x.OHB
        + select(0, x.SKILL_OHB, x.HEAL_TYPE == SKILL_DMG_TYPE)
        + select(0, x.ULT_OHB, x.HEAL_TYPE == ULT_DMG_TYPE)
      );
    }

    if (x.SHIELD_VALUE > 0) {
      (*p_x).SHIELD_VALUE = x.SHIELD_VALUE * (1 + x.SHIELD_BOOST);
    }

    /* START EHP CALC */
    (*p_x).EHP = x.HP / (1 - x.DEF / (x.DEF + 200 + 10 * eLevel)) * (1 / x.DMG_RED_MULTI);
    /* END EHP CALC */
  }

  // START ACTION DAMAGE
  // ═════════════════════════════════════════════════════════════════════════════════════════════════════════════════╗
  /* INJECT ACTION DAMAGE */
  // ═════════════════════════════════════════════════════════════════════════════════════════════════════════════════╝
  // END ACTION DAMAGE

  (*p_x).BREAK_DMG *= 1 + x.TRUE_DMG_MODIFIER + x.BREAK_TRUE_DMG_MODIFIER;
}

fn calculateInitial(
  p_x: ptr<function, ComputedStats>,
  abilityDmg: f32,
  hpScaling: f32,
  defScaling: f32,
  atkScaling: f32,
  atkBoostP: f32
) -> f32 {
  let x = *p_x;
  return abilityDmg
    + hpScaling * x.HP
    + defScaling * x.DEF
    + atkScaling * (x.ATK + atkBoostP * baseATK);
}

fn calculateDefMulti(defPen: f32) -> f32 {
  return (100.0f) / ((f32(enemyLevel) + 20.0f) * max(0.0f, 1.0f - defPen) + 100.0f);
}

fn calculateEhrMulti(
  p_x: ptr<function, ComputedStats>
) -> f32 {
  let x = *p_x;
  let effectiveDotChance = min(1, x.DOT_CHANCE * (1 + x.EHR) * (1 - enemyEffectResistance + x.EFFECT_RES_PEN));
  let dotEhrMulti = select(
    (effectiveDotChance),
    (1 + x.DOT_SPLIT * effectiveDotChance * (x.DOT_STACKS - 1)) / (1 + x.DOT_SPLIT * (x.DOT_STACKS - 1)),
    x.DOT_SPLIT > 0
  );

  return dotEhrMulti;
}

fn calculateAbilityDmg(
  p_x: ptr<function, ComputedStats>,
  baseUniversalMulti: f32,
  baseDmgBoost: f32,
  baseDefPen: f32,
  baseResistance: f32,
  baseSuperBreakInstanceDmg: f32,
  baseBreakEfficiencyBoost: f32,
  abilityDmg: f32,
  abilityDmgBoost: f32,
  abilityVulnerability: f32,
  abilityDefPen: f32,
  abilityResPen: f32,
  abilityCrBoost: f32,
  abilityCdBoost: f32,
  abilityOriginalDmgBoost: f32,
  abilityBreakEfficiencyBoost: f32,
  abilitySuperBreakModifier: f32,
  abilityBreakDmgModifier: f32,
  abilityToughnessDmg: f32,
  abilityAdditionalDmg: f32,
  abilityAdditionalCrOverride: f32,
  abilityAdditionalCdOverride: f32,
  abilityTrueDmgModifier: f32,
  abilityMemoJointDamage: f32,
) -> f32 {
  let x = *p_x;

  var abilityCritDmgOutput: f32 = 0;
  if (abilityDmg > 0) {
    let abilityCr = min(1, x.CR + abilityCrBoost);
    let abilityCd = x.CD + x.CD_BOOST + abilityCdBoost;
    let abilityCritMulti = abilityCr * (1 + abilityCd) + (1 - abilityCr);
    let abilityVulnerabilityMulti = 1 + x.VULNERABILITY + abilityVulnerability;
    let abilityDefMulti = calculateDefMulti(baseDefPen + abilityDefPen);
    let abilityResMulti = 1 - (baseResistance - abilityResPen);
    let abilityOriginalDmgMulti = 1 + abilityOriginalDmgBoost + x.FINAL_DMG_BOOST;

    abilityCritDmgOutput = abilityDmg
      * (baseUniversalMulti)
      * (baseDmgBoost + abilityDmgBoost)
      * (abilityDefMulti)
      * (abilityVulnerabilityMulti)
      * (abilityCritMulti)
      * (abilityResMulti)
      * (abilityOriginalDmgMulti);
  }

  // === Break DMG ===

  var abilityBreakDmgOutput: f32 = 0;
  if (abilityBreakDmgModifier > 0) {
    abilityBreakDmgOutput = abilityBreakDmgModifier * x.BREAK_DMG;
  }

  // === Super Break DMG ===

  var abilitySuperBreakDmgOutput: f32 = 0;
  let superBreakModifier = x.SUPER_BREAK_MODIFIER + abilitySuperBreakModifier;
  if (superBreakModifier > 0) {
    abilitySuperBreakDmgOutput = baseSuperBreakInstanceDmg
      * (superBreakModifier)
      * (baseBreakEfficiencyBoost + abilityBreakEfficiencyBoost)
      * (abilityToughnessDmg);
  }

  // === Additional DMG ===

  var abilityAdditionalDmgOutput: f32 = 0;
  if (abilityAdditionalDmg > 0) {
    let additionalDmgCr = select(min(1, x.CR), abilityAdditionalCrOverride, abilityAdditionalCrOverride > 0);
    let additionalDmgCd = select(x.CD, abilityAdditionalCdOverride, abilityAdditionalCdOverride > 0);
    let abilityAdditionalCritMulti = additionalDmgCr * (1 + additionalDmgCd) + (1 - additionalDmgCr);
    abilityAdditionalDmgOutput = abilityAdditionalDmg
      * (baseUniversalMulti)
      * (baseDmgBoost + x.ADDITIONAL_DMG_BOOST)
      * calculateDefMulti(baseDefPen)
      * (1 + x.VULNERABILITY)
      * (abilityAdditionalCritMulti)
      * (1 - baseResistance);
  }

  // === Primary DMG ===

  let primaryDmgOutput = abilityCritDmgOutput
    + abilityBreakDmgOutput
    + abilitySuperBreakDmgOutput
    + abilityAdditionalDmgOutput;

  // === True DMG ===

  let trueDmgOutput = (x.TRUE_DMG_MODIFIER + abilityTrueDmgModifier) * primaryDmgOutput;

  // === Memo Joint DMG ===

  var memoJointDmgOutput: f32 = 0;
  if (abilityMemoJointDamage > 0) {
    memoJointDmgOutput = abilityMemoJointDamage;
  }

  return primaryDmgOutput + trueDmgOutput + memoJointDmgOutput;
}

fn p2(n: i32) -> f32 {
  return f32(min(1, n >> 1));
}

fn p4(n: i32) -> f32 {
  return f32(n >> 2);
}

fn buffAbilityTrueDmg(
  p_x: ptr<function, ComputedStats>,
  abilityTypeFlags: i32,
  value: f32,
  condition: i32
) {
  if (condition == 0) {
    return;
  }
  if ((abilityTypeFlags & i32((*p_x).BASIC_DMG_TYPE)) != 0) {
    (*p_x).BASIC_TRUE_DMG_MODIFIER += value;
  }
  if ((abilityTypeFlags & i32((*p_x).SKILL_DMG_TYPE)) != 0) {
    (*p_x).SKILL_TRUE_DMG_MODIFIER += value;
  }
  if ((abilityTypeFlags & i32((*p_x).ULT_DMG_TYPE)) != 0) {
    (*p_x).ULT_TRUE_DMG_MODIFIER += value;
  }
  if ((abilityTypeFlags & i32((*p_x).FUA_DMG_TYPE)) != 0) {
    (*p_x).FUA_TRUE_DMG_MODIFIER += value;
  }
  if ((abilityTypeFlags & i32((*p_x).DOT_DMG_TYPE)) != 0) {
    (*p_x).DOT_TRUE_DMG_MODIFIER += value;
  }
  if ((abilityTypeFlags & i32((*p_x).BREAK_DMG_TYPE)) != 0) {
    (*p_x).BREAK_TRUE_DMG_MODIFIER += value;
  }
  if ((abilityTypeFlags & i32((*p_x).MEMO_SKILL_DMG_TYPE)) != 0) {
    (*p_x).MEMO_SKILL_TRUE_DMG_MODIFIER += value;
  }
  if ((abilityTypeFlags & i32((*p_x).MEMO_TALENT_DMG_TYPE)) != 0) {
    (*p_x).MEMO_TALENT_TRUE_DMG_MODIFIER += value;
  }
//  if ((abilityTypeFlags & i32((*p_x).ADDITIONAL_DMG_TYPE)) != 0) {
//    (*p_x).ADDITIONAL_TRUE_DMG_MODIFIER += value;
//  }
//  if ((abilityTypeFlags & i32((*p_x).SUPER_BREAK_DMG_TYPE)) != 0) {
//    (*p_x).SUPER_BREAK_TRUE_DMG_MODIFIER += value;
//  }
}

fn buffAbilityDmg(
  p_x: ptr<function, ComputedStats>,
  abilityTypeFlags: i32,
  value: f32,
  condition: i32
) {
  if (condition == 0) {
    return;
  }
  if ((abilityTypeFlags & i32((*p_x).BASIC_DMG_TYPE)) != 0) {
    (*p_x).BASIC_DMG_BOOST += value;
  }
  if ((abilityTypeFlags & i32((*p_x).SKILL_DMG_TYPE)) != 0) {
    (*p_x).SKILL_DMG_BOOST += value;
  }
  if ((abilityTypeFlags & i32((*p_x).ULT_DMG_TYPE)) != 0) {
    (*p_x).ULT_DMG_BOOST += value;
  }
  if ((abilityTypeFlags & i32((*p_x).FUA_DMG_TYPE)) != 0) {
    (*p_x).FUA_DMG_BOOST += value;
  }
  if ((abilityTypeFlags & i32((*p_x).DOT_DMG_TYPE)) != 0) {
    (*p_x).DOT_DMG_BOOST += value;
  }
  if ((abilityTypeFlags & i32((*p_x).BREAK_DMG_TYPE)) != 0) {
    (*p_x).BREAK_DMG_BOOST += value;
  }
  if ((abilityTypeFlags & i32((*p_x).MEMO_SKILL_DMG_TYPE)) != 0) {
    (*p_x).MEMO_SKILL_DMG_BOOST += value;
  }
  if ((abilityTypeFlags & i32((*p_x).MEMO_TALENT_DMG_TYPE)) != 0) {
    (*p_x).MEMO_TALENT_DMG_BOOST += value;
  }
  if ((abilityTypeFlags & i32((*p_x).ADDITIONAL_DMG_TYPE)) != 0) {
    (*p_x).ADDITIONAL_DMG_BOOST += value;
  }
  if ((abilityTypeFlags & i32((*p_x).SUPER_BREAK_DMG_TYPE)) != 0) {
    (*p_x).SUPER_BREAK_DMG_BOOST += value;
  }
}

fn buffAbilityCr(
  p_x: ptr<function, ComputedStats>,
  abilityTypeFlags: i32,
  value: f32,
  condition: i32
) {
  if (condition == 0) {
    return;
  }
  if ((abilityTypeFlags & i32((*p_x).BASIC_DMG_TYPE)) != 0) {
    (*p_x).BASIC_CR_BOOST += value;
  }
  if ((abilityTypeFlags & i32((*p_x).SKILL_DMG_TYPE)) != 0) {
    (*p_x).SKILL_CR_BOOST += value;
  }
  if ((abilityTypeFlags & i32((*p_x).ULT_DMG_TYPE)) != 0) {
    (*p_x).ULT_CR_BOOST += value;
  }
  if ((abilityTypeFlags & i32((*p_x).FUA_DMG_TYPE)) != 0) {
    (*p_x).FUA_CR_BOOST += value;
  }
//  if ((abilityTypeFlags & i32((*p_x).DOT_DMG_TYPE)) != 0) {
//    (*p_x).DOT_CR_BOOST += value;
//  }
//  if ((abilityTypeFlags & i32((*p_x).BREAK_DMG_TYPE)) != 0) {
//    (*p_x).BREAK_CR_BOOST += value;
//  }
  if ((abilityTypeFlags & i32((*p_x).MEMO_SKILL_DMG_TYPE)) != 0) {
    (*p_x).MEMO_SKILL_CR_BOOST += value;
  }
  if ((abilityTypeFlags & i32((*p_x).MEMO_TALENT_DMG_TYPE)) != 0) {
    (*p_x).MEMO_TALENT_CR_BOOST += value;
  }
//  if ((abilityTypeFlags & i32((*p_x).ADDITIONAL_DMG_TYPE)) != 0) {
//    (*p_x).ADDITIONAL_CR_BOOST += value;
//  }
//  if ((abilityTypeFlags & i32((*p_x).SUPER_BREAK_DMG_TYPE)) != 0) {
//    (*p_x).SUPER_BREAK_CR_BOOST += value;
//  }
}

fn buffAbilityCd(
  p_x: ptr<function, ComputedStats>,
  abilityTypeFlags: i32,
  value: f32,
  condition: i32
) {
  if (condition == 0) {
    return;
  }
  if ((abilityTypeFlags & i32((*p_x).BASIC_DMG_TYPE)) != 0) {
    (*p_x).BASIC_CD_BOOST += value;
  }
  if ((abilityTypeFlags & i32((*p_x).SKILL_DMG_TYPE)) != 0) {
    (*p_x).SKILL_CD_BOOST += value;
  }
  if ((abilityTypeFlags & i32((*p_x).ULT_DMG_TYPE)) != 0) {
    (*p_x).ULT_CD_BOOST += value;
  }
  if ((abilityTypeFlags & i32((*p_x).FUA_DMG_TYPE)) != 0) {
    (*p_x).FUA_CD_BOOST += value;
  }
//  if ((abilityTypeFlags & i32((*p_x).DOT_DMG_TYPE)) != 0) {
//    (*p_x).DOT_CD_BOOST += value;
//  }
//  if ((abilityTypeFlags & i32((*p_x).BREAK_DMG_TYPE)) != 0) {
//    (*p_x).BREAK_CD_BOOST += value;
//  }
  if ((abilityTypeFlags & i32((*p_x).MEMO_SKILL_DMG_TYPE)) != 0) {
    (*p_x).MEMO_SKILL_CD_BOOST += value;
  }
  if ((abilityTypeFlags & i32((*p_x).MEMO_TALENT_DMG_TYPE)) != 0) {
    (*p_x).MEMO_TALENT_CD_BOOST += value;
  }
//  if ((abilityTypeFlags & i32((*p_x).ADDITIONAL_DMG_TYPE)) != 0) {
//    (*p_x).ADDITIONAL_CD_BOOST += value;
//  }
//  if ((abilityTypeFlags & i32((*p_x).SUPER_BREAK_DMG_TYPE)) != 0) {
//    (*p_x).SUPER_BREAK_CD_BOOST += value;
//  }
}

fn buffAbilityDefShred(
  p_x: ptr<function, ComputedStats>,
  abilityTypeFlags: i32,
  value: f32,
  condition: i32
) {
  if (condition == 0) {
    return;
  }
  if ((abilityTypeFlags & i32((*p_x).BASIC_DMG_TYPE)) != 0) {
    (*p_x).BASIC_DEF_PEN += value;
  }
  if ((abilityTypeFlags & i32((*p_x).SKILL_DMG_TYPE)) != 0) {
    (*p_x).SKILL_DEF_PEN += value;
  }
  if ((abilityTypeFlags & i32((*p_x).ULT_DMG_TYPE)) != 0) {
    (*p_x).ULT_DEF_PEN += value;
  }
  if ((abilityTypeFlags & i32((*p_x).FUA_DMG_TYPE)) != 0) {
    (*p_x).FUA_DEF_PEN += value;
  }
  if ((abilityTypeFlags & i32((*p_x).DOT_DMG_TYPE)) != 0) {
    (*p_x).DOT_DEF_PEN += value;
  }
  if ((abilityTypeFlags & i32((*p_x).BREAK_DMG_TYPE)) != 0) {
    (*p_x).BREAK_DEF_PEN += value;
  }
  if ((abilityTypeFlags & i32((*p_x).MEMO_SKILL_DMG_TYPE)) != 0) {
    (*p_x).MEMO_SKILL_DEF_PEN += value;
  }
  if ((abilityTypeFlags & i32((*p_x).MEMO_TALENT_DMG_TYPE)) != 0) {
    (*p_x).MEMO_TALENT_DEF_PEN += value;
  }
//  if ((abilityTypeFlags & i32((*p_x).ADDITIONAL_DMG_TYPE)) != 0) {
//    (*p_x).ADDITIONAL_DEF_PEN += value;
//  }
  if ((abilityTypeFlags & i32((*p_x).SUPER_BREAK_DMG_TYPE)) != 0) {
    (*p_x).SUPER_BREAK_DEF_PEN += value;
  }
}

fn buffAbilityVulnerability(
  p_x: ptr<function, ComputedStats>,
  abilityTypeFlags: i32,
  value: f32,
  condition: i32
) {
  if (condition == 0) {
    return;
  }
  if ((abilityTypeFlags & i32((*p_x).BASIC_DMG_TYPE)) != 0) {
    (*p_x).BASIC_VULNERABILITY += value;
  }
  if ((abilityTypeFlags & i32((*p_x).SKILL_DMG_TYPE)) != 0) {
    (*p_x).SKILL_VULNERABILITY += value;
  }
  if ((abilityTypeFlags & i32((*p_x).ULT_DMG_TYPE)) != 0) {
    (*p_x).ULT_VULNERABILITY += value;
  }
  if ((abilityTypeFlags & i32((*p_x).FUA_DMG_TYPE)) != 0) {
    (*p_x).FUA_VULNERABILITY += value;
  }
  if ((abilityTypeFlags & i32((*p_x).DOT_DMG_TYPE)) != 0) {
    (*p_x).DOT_VULNERABILITY += value;
  }
  if ((abilityTypeFlags & i32((*p_x).BREAK_DMG_TYPE)) != 0) {
    (*p_x).BREAK_VULNERABILITY += value;
  }
  if ((abilityTypeFlags & i32((*p_x).MEMO_SKILL_DMG_TYPE)) != 0) {
    (*p_x).MEMO_SKILL_VULNERABILITY += value;
  }
  if ((abilityTypeFlags & i32((*p_x).MEMO_TALENT_DMG_TYPE)) != 0) {
    (*p_x).MEMO_TALENT_VULNERABILITY += value;
  }
//  if ((abilityTypeFlags & i32((*p_x).ADDITIONAL_DMG_TYPE)) != 0) {
//    (*p_x).ADDITIONAL_VULNERABILITY += value;
//  }
  if ((abilityTypeFlags & i32((*p_x).SUPER_BREAK_DMG_TYPE)) != 0) {
    (*p_x).SUPER_BREAK_VULNERABILITY += value;
  }
}

fn addElementalDmg(
  c_x: ptr<function, BasicStats>,
  p_x: ptr<function, ComputedStats>,
) {
  switch (ELEMENT_INDEX) {
    case 0: {
      (*p_x).ELEMENTAL_DMG += (*c_x).PHYSICAL_DMG_BOOST;
    }
    case 1: {
      (*p_x).ELEMENTAL_DMG += (*c_x).FIRE_DMG_BOOST;
    }
    case 2: {
      (*p_x).ELEMENTAL_DMG += (*c_x).ICE_DMG_BOOST;
    }
    case 3: {
      (*p_x).ELEMENTAL_DMG += (*c_x).LIGHTNING_DMG_BOOST;
    }
    case 4: {
      (*p_x).ELEMENTAL_DMG += (*c_x).WIND_DMG_BOOST;
    }
    case 5: {
      (*p_x).ELEMENTAL_DMG += (*c_x).QUANTUM_DMG_BOOST;
    }
    case 6: {
      (*p_x).ELEMENTAL_DMG += (*c_x).IMAGINARY_DMG_BOOST;
    }
    default: {

    }
  }
}

fn addComputedElementalDmg(
  p_x: ptr<function, ComputedStats>,
) {
  switch (ELEMENT_INDEX) {
    case 0: {
      (*p_x).ELEMENTAL_DMG += (*p_x).PHYSICAL_DMG_BOOST;
    }
    case 1: {
      (*p_x).ELEMENTAL_DMG += (*p_x).FIRE_DMG_BOOST;
    }
    case 2: {
      (*p_x).ELEMENTAL_DMG += (*p_x).ICE_DMG_BOOST;
    }
    case 3: {
      (*p_x).ELEMENTAL_DMG += (*p_x).LIGHTNING_DMG_BOOST;
    }
    case 4: {
      (*p_x).ELEMENTAL_DMG += (*p_x).WIND_DMG_BOOST;
    }
    case 5: {
      (*p_x).ELEMENTAL_DMG += (*p_x).QUANTUM_DMG_BOOST;
    }
    case 6: {
      (*p_x).ELEMENTAL_DMG += (*p_x).IMAGINARY_DMG_BOOST;
    }
    default: {

    }
  }
}

fn getElementalResPen(
  p_x: ptr<function, ComputedStats>,
) -> f32 {
  switch (ELEMENT_INDEX) {
    case 0: {
      return (*p_x).PHYSICAL_RES_PEN;
    }
    case 1: {
      return (*p_x).FIRE_RES_PEN;
    }
    case 2: {
      return (*p_x).ICE_RES_PEN;
    }
    case 3: {
      return (*p_x).LIGHTNING_RES_PEN;
    }
    case 4: {
      return (*p_x).WIND_RES_PEN;
    }
    case 5: {
      return (*p_x).QUANTUM_RES_PEN;
    }
    case 6: {
      return (*p_x).IMAGINARY_RES_PEN;
    }
    default: {
      return 0;
    }
  }
}

fn getPioneerSetCd(
  index: i32,
) -> f32 {
  switch (index) {
    case 4: {
      return 0.24;
    }
    case 3: {
      return 0.16;
    }
    case 2: {
      return 0.12;
    }
    case 1: {
      return 0.08;
    }
    default: {
      return 0.0;
    }
  }
}

fn calculateAshblazingSetP(
  setCount: i32,
  valueTheAshblazingGrandDuke: i32,
  hitMulti: f32,
) -> f32 {
  if (p4(setCount) >= 1) {
    let ashblazingAtk = 0.06 * f32(valueTheAshblazingGrandDuke);
    let ashblazingMulti = hitMulti;

    return ashblazingMulti - ashblazingAtk;
  }

  return 0;
}
`,K2=`struct Relic {
  HP_P: f32,
  ATK_P: f32,
  DEF_P: f32,
  SPD_P: f32,
  HP: f32,
  ATK: f32,
  DEF: f32,
  SPD: f32,
  CR: f32,
  CD: f32,
  EHR: f32,
  RES: f32,
  BE: f32,
  ERR: f32,
  OHB: f32,
  PHYSICAL_DMG_BOOST: f32,
  FIRE_DMG_BOOST: f32,
  ICE_DMG_BOOST: f32,
  LIGHTNING_DMG_BOOST: f32,
  WIND_DMG_BOOST: f32,
  QUANTUM_DMG_BOOST: f32,
  IMAGINARY_DMG_BOOST: f32,
  relicSet: f32, // 22
}

struct BasicStats {
  HP_P: f32,
  ATK_P: f32,
  DEF_P: f32,
  SPD_P: f32,
  HP: f32,
  ATK: f32,
  DEF: f32,
  SPD: f32,
  CR: f32,
  CD: f32,
  EHR: f32,
  RES: f32,
  BE: f32,
  ERR: f32,
  OHB: f32,
  PHYSICAL_DMG_BOOST: f32,
  FIRE_DMG_BOOST: f32,
  ICE_DMG_BOOST: f32,
  LIGHTNING_DMG_BOOST: f32,
  WIND_DMG_BOOST: f32,
  QUANTUM_DMG_BOOST: f32,
  IMAGINARY_DMG_BOOST: f32,
}

struct Sets {
  PasserbyOfWanderingCloud: i32,
  MusketeerOfWildWheat: i32,
  KnightOfPurityPalace: i32,
  HunterOfGlacialForest: i32,
  ChampionOfStreetwiseBoxing: i32,
  GuardOfWutheringSnow: i32,
  FiresmithOfLavaForging: i32,
  GeniusOfBrilliantStars: i32,
  BandOfSizzlingThunder: i32,
  EagleOfTwilightLine: i32,
  ThiefOfShootingMeteor: i32,
  WastelanderOfBanditryDesert: i32,
  LongevousDisciple: i32,
  MessengerTraversingHackerspace: i32,
  TheAshblazingGrandDuke: i32,
  PrisonerInDeepConfinement: i32,
  PioneerDiverOfDeadWaters: i32,
  WatchmakerMasterOfDreamMachinations: i32,
  IronCavalryAgainstTheScourge: i32,
  TheWindSoaringValorous: i32,
  SacerdosRelivedOrdeal: i32,
  ScholarLostInErudition: i32,
  HeroOfTriumphantSong: i32,
  PoetOfMourningCollapse: i32,
  SpaceSealingStation: i32,
  FleetOfTheAgeless: i32,
  PanCosmicCommercialEnterprise: i32,
  BelobogOfTheArchitects: i32,
  CelestialDifferentiator: i32,
  InertSalsotto: i32,
  TaliaKingdomOfBanditry: i32,
  SprightlyVonwacq: i32,
  RutilantArena: i32,
  BrokenKeel: i32,
  FirmamentFrontlineGlamoth: i32,
  PenaconyLandOfTheDreams: i32,
  SigoniaTheUnclaimedDesolation: i32,
  IzumoGenseiAndTakamaDivineRealm: i32,
  DuranDynastyOfRunningWolves: i32,
  ForgeOfTheKalpagniLantern: i32,
  LushakaTheSunkenSeas: i32,
  TheWondrousBananAmusementPark: i32,
  BoneCollectionsSereneDemesne: i32,
  GiantTreeOfRaptBrooding: i32,
}

struct SetConditionals {
  enabledHunterOfGlacialForest: bool,
  enabledFiresmithOfLavaForging: bool,
  enabledGeniusOfBrilliantStars: bool,
  enabledBandOfSizzlingThunder: bool,
  enabledMessengerTraversingHackerspace: bool,
  enabledCelestialDifferentiator: bool,
  enabledWatchmakerMasterOfDreamMachinations: bool,
  enabledPenaconyLandOfTheDreams: bool,
  enabledIzumoGenseiAndTakamaDivineRealm: bool,
  enabledForgeOfTheKalpagniLantern: bool,
  enabledTheWindSoaringValorous: bool,
  enabledTheWondrousBananAmusementPark: bool,
  enabledScholarLostInErudition: bool,
  enabledHeroOfTriumphantSong: bool,
  valueChampionOfStreetwiseBoxing: i32,
  valueWastelanderOfBanditryDesert: i32,
  valueLongevousDisciple: i32,
  valueTheAshblazingGrandDuke: i32,
  valuePrisonerInDeepConfinement: i32,
  valuePioneerDiverOfDeadWaters: i32,
  valueSigoniaTheUnclaimedDesolation: i32,
  valueDuranDynastyOfRunningWolves: i32,
  valueSacerdosRelivedOrdeal: i32
}

struct Action {
  abilityType: f32,
  setConditionals: SetConditionals,
}

struct Params {
  xl: f32,
  xp: f32,
  xf: f32,
  xb: f32,
  xg: f32,
  xh: f32,
  threshold: f32,
}
`;function N2(e,a,t,s){let o="";return o=L2(o,e,a,t),o=j2(o),o=G2(o,a,e,s),o=X2(o,a,e,s),o=V2(o,a,s),o=Z2(o,a,s),o=z2(o,a,s),o=W2(o,s),o=R2(o),o=U2(o,a,e,s),o}function U2(e,a,t,s){return t.path!=Pa.Remembrance&&(e=Oa(e,"COPY MEMOSPRITE BASIC STATS"),e=Oa(e,"MEMOSPRITE DAMAGE CALCS"),e=Oa(e,"MC ASSIGNMENT")),t.resultSort!=k.EHP.key&&!s.DEBUG&&a.minEhp==0&&a.maxEhp==f.MAX_INT&&(e=Oa(e,"EHP CALC")),t.resultSort!=k.COMBO.key&&!s.DEBUG&&(t.resultSort!=k.DOT.key&&a.minDot==0&&a.maxDot==f.MAX_INT&&(e=Oa(e,"DOT CALC")),t.resultSort!=k.BASIC.key&&a.minBasic==0&&a.maxBasic==f.MAX_INT&&(e=Oa(e,"BASIC CALC")),t.resultSort!=k.SKILL.key&&a.minSkill==0&&a.maxSkill==f.MAX_INT&&(e=Oa(e,"SKILL CALC")),t.resultSort!=k.ULT.key&&a.minUlt==0&&a.maxUlt==f.MAX_INT&&(e=Oa(e,"ULT CALC")),t.resultSort!=k.FUA.key&&a.minFua==0&&a.maxFua==f.MAX_INT&&(e=Oa(e,"FUA CALC")),t.resultSort!=k.MEMO_SKILL.key&&a.minMemoSkill==0&&a.maxMemoSkill==f.MAX_INT&&(e=Oa(e,"MEMO_SKILL CALC")),t.resultSort!=k.MEMO_TALENT.key&&a.minMemoTalent==0&&a.maxMemoTalent==f.MAX_INT&&(e=Oa(e,"MEMO_TALENT CALC"))),e}function Oa(e,a){return e=e.replace(`START ${a} */`,`═════════════════════════════════════════ DISABLED ${a} ═════════════════════════════════════════╗`),e=e.replace(`/* END ${a}`,`════════════════════════════════════════════ DISABLED ${a} ═════════════════════════════════════════╝`),e}function j2(e){return e+=`
${k2}

${K2}
  `,e}function Ol(e){return a=>{const[t,s,o]=a.split(/[><]/).flatMap(c=>c.split(".")).map(c=>c.trim()),r=o.includes("min");return o.includes("max")&&e[o]==f.MAX_INT||r&&e[o]==0?"":a}}function vl(e,a=2){return ft(e.length>0?e:"false",a)}function W2(e,a){return e.replace("/* INJECT SET FILTERS */",ft(`
if (relicSetSolutionsMatrix[relicSetIndex] < 1 || ornamentSetSolutionsMatrix[ornamentSetIndex] < 1) {
  results[index] = ${a.DEBUG?"ComputedStats()":"-failures; failures = failures + 1"};
  continue;
}
  `,2))}function V2(e,a,t){const s=k[a.resultSort],o=s.gpuProperty,r=s.isComputedRating,l=Ol(a);let c=r?`x.${o} < threshold`:`c.${o} < threshold`;o==k.COMBO.key&&(c="");const u=[l("c.SPD < minSpd"),l("c.SPD > maxSpd"),l("c.HP  < minHp"),l("c.HP  > maxHp"),l("c.ATK < minAtk"),l("c.ATK > maxAtk"),l("c.DEF < minDef"),l("c.DEF > maxDef"),l("c.CR  < minCr"),l("c.CR  > maxCr"),l("c.CD  < minCd"),l("c.CD  > maxCd"),l("c.EHR < minEhr"),l("c.EHR > maxEhr"),l("c.RES < minRes"),l("c.RES > maxRes"),l("c.BE  < minBe"),l("c.BE  > maxBe"),l("c.ERR < minErr"),l("c.ERR > maxErr"),l(c)].filter(d=>d.length>0).join(` ||
`);return e=e.replace("/* INJECT BASIC STAT FILTERS */",ft(`
if (statDisplay == 1) {
  if (
${vl(u)}
  ) {
    results[index] = ${t.DEBUG?"ComputedStats()":"-failures; failures = failures + 1"};
    break;
  }
}
  `,4)),e}function Z2(e,a,t){const o=k[a.resultSort].gpuProperty,r=Ol(a),l=[r("x.SPD < minSpd"),r("x.SPD > maxSpd"),r("x.HP  < minHp"),r("x.HP  > maxHp"),r("x.ATK < minAtk"),r("x.ATK > maxAtk"),r("x.DEF < minDef"),r("x.DEF > maxDef"),r("x.CR  < minCr"),r("x.CR  > maxCr"),r("x.CD  < minCd"),r("x.CD  > maxCd"),r("x.EHR < minEhr"),r("x.EHR > maxEhr"),r("x.RES < minRes"),r("x.RES > maxRes"),r("x.BE  < minBe"),r("x.BE  > maxBe"),r("x.ERR < minErr"),r("x.ERR > maxErr"),r("x.EHP < minEhp"),r("x.EHP > maxEhp"),r("x.BASIC_DMG < minBasic"),r("x.BASIC_DMG > maxBasic"),r("x.SKILL_DMG < minSkill"),r("x.SKILL_DMG > maxSkill"),r("x.ULT_DMG < minUlt"),r("x.ULT_DMG > maxUlt"),r("x.FUA_DMG < minFua"),r("x.FUA_DMG > maxFua"),r("x.MEMO_SKILL_DMG < minMemoSkill"),r("x.MEMO_SKILL_DMG > maxMemoSkill"),r("x.MEMO_TALENT_DMG < minMemoTalent"),r("x.MEMO_TALENT_DMG > maxMemoTalent"),r("x.DOT_DMG < minDot"),r("x.DOT_DMG > maxDot"),r("x.BREAK_DMG < minBreak"),r("x.BREAK_DMG > maxBreak"),r("x.HEAL_VALUE < minHeal"),r("x.HEAL_VALUE > maxHeal"),r("x.SHIELD_VALUE < minShield"),r("x.SHIELD_VALUE > maxShield"),o==k.COMBO.key?"":r(`x.${o} < threshold`)].filter(c=>c.length>0).join(` ||
`);return e=e.replace("/* INJECT COMBAT STAT FILTERS */",ft(`
if (statDisplay == 0) {
  if (
${vl(l)}
  ) {
    results[index] = ${t.DEBUG?"ComputedStats()":"-failures; failures = failures + 1"};
    break;
  }
}
  `,4)),e}function z2(e,a,t){const s=Ol(a),o=[s("x.EHP < minEhp"),s("x.EHP > maxEhp"),s("x.BASIC_DMG < minBasic"),s("x.BASIC_DMG > maxBasic"),s("x.SKILL_DMG < minSkill"),s("x.SKILL_DMG > maxSkill"),s("x.ULT_DMG < minUlt"),s("x.ULT_DMG > maxUlt"),s("x.FUA_DMG < minFua"),s("x.FUA_DMG > maxFua"),s("x.MEMO_SKILL_DMG < minMemoSkill"),s("x.MEMO_SKILL_DMG > maxMemoSkill"),s("x.MEMO_TALENT_DMG < minMemoTalent"),s("x.MEMO_TALENT_DMG > maxMemoTalent"),s("x.DOT_DMG < minDot"),s("x.DOT_DMG > maxDot"),s("x.BREAK_DMG < minBreak"),s("x.BREAK_DMG > maxBreak"),s("x.HEAL_VALUE < minHeal"),s("x.HEAL_VALUE > maxHeal"),s("x.SHIELD_VALUE < minShield"),s("x.SHIELD_VALUE > maxShield")].filter(r=>r.length>0).join(` ||
`);return e=e.replace("/* INJECT RATING STAT FILTERS */",ft(`
if (
${vl(o,1)}
) {
  results[index] = ${t.DEBUG?"ComputedStats()":"-failures; failures = failures + 1"};
  break;
}
  `,4)),e}function X2(e,a,t,s){const o=k[a.resultSort],r=s.DEBUG?1:s.CYCLES_PER_INVOCATION;let l="";s.DEBUG&&(l=`
const DEBUG_BASIC_COMBO: f32 = ${a.comboAbilities.filter(m=>m=="BASIC").length};
const DEBUG_SKILL_COMBO: f32 = ${a.comboAbilities.filter(m=>m=="SKILL").length};
const DEBUG_ULT_COMBO: f32 = ${a.comboAbilities.filter(m=>m=="ULT").length};
const DEBUG_FUA_COMBO: f32 = ${a.comboAbilities.filter(m=>m=="FUA").length};
`),e=e.replace("/* INJECT GPU PARAMS */",`
const WORKGROUP_SIZE = ${s.WORKGROUP_SIZE};
const BLOCK_SIZE = ${s.BLOCK_SIZE};
const CYCLES_PER_INVOCATION = ${r};
const DEBUG = ${s.DEBUG?1:0};
${l}
  `),s.DEBUG?e=e.replace("/* INJECT RESULTS BUFFER */",`
@group(2) @binding(0) var<storage, read_write> results : array<ComputedStats>; // DEBUG
    `):e=e.replace("/* INJECT RESULTS BUFFER */",`
@group(2) @binding(0) var<storage, read_write> results : array<f32>;
    `);const c=o.gpuProperty,d=o.isComputedRating?`x.${c}`:`c.${c}`;return s.DEBUG?e=e.replace("/* INJECT RETURN VALUE */",ft(`
x.COMBO_DMG = combo + comboDot * x.DOT_DMG + comboBreak * x.BREAK_DMG;
results[index] = x; // DEBUG
results[index + 1] = m; // DEBUG
    `,4)):e=e.replace("/* INJECT RETURN VALUE */",ft(`
if (statDisplay == 0) {
  results[index] = x.${c};
  failures = 1;
} else {
  results[index] = ${d};
  failures = 1;
}
    `,4)),t.resultSort==k.COMBO.key?e=e.replace("/* INJECT ACTION ITERATOR */",ft(`
for (var actionIndex = actionCount - 1; actionIndex >= 0; actionIndex--) {
    `,4)):e=e.replace("/* INJECT ACTION ITERATOR */",ft(`
for (var actionIndex = 0; actionIndex < actionCount; actionIndex++) {
    `,4)),e}n.HP_P+"",n.ATK_P+"",n.DEF_P+"",n.SPD_P+"",n.HP+"",n.ATK+"",n.DEF+"",n.SPD+"",n.CR+"",n.CD+"",n.EHR+"",n.RES+"",n.BE+"",n.ERR+"",n.OHB+"",n.Physical_DMG+"",n.Fire_DMG+"",n.Ice_DMG+"",n.Lightning_DMG+"",n.Wind_DMG+"",n.Quantum_DMG+"",n.Imaginary_DMG+"";function Y2(e,a,t,s){var O;const o=t.LinkRope.length,r=t.PlanarSphere.length,l=t.Feet.length,c=t.Body.length,u=t.Hands.length,d=t.Head.length,m=a%o,h=(a-m)/o%r,g=(a-h*o-m)/(o*r)%l,C=(a-g*r*o-h*o-m)/(o*r*l)%c,M=(a-C*l*r*o-g*r*o-h*o-m)/(o*r*l*c)%u,x=(a-M*c*l*r*o-C*l*r*o-g*r*o-h*o-m)/(o*r*l*c*u)%d;return new Float32Array([m,h,g,C,M,x,s.resultsQueue.size()>=s.RESULTS_LIMIT?((O=s.resultsQueue.top())==null?void 0:O.value)??0:0])}function J2(e){return $2([...e.Head,...e.Hands,...e.Body,...e.Feet,...e.PlanarSphere,...e.LinkRope])}const Q2=23;function $2(e){const a=[];for(let t=0;t<e.length;t++){const s=e[t],o=Q2*t;let r=0;const l={},c=s.condensedStats;for(const u of c)l[u[0]]=u[1];a[o+r++]=l[S.HP_P]||0,a[o+r++]=l[S.ATK_P]||0,a[o+r++]=l[S.DEF_P]||0,a[o+r++]=l[S.SPD_P]||0,a[o+r++]=l[S.HP]||0,a[o+r++]=l[S.ATK]||0,a[o+r++]=l[S.DEF]||0,a[o+r++]=l[S.SPD]||0,a[o+r++]=l[S.CR]||0,a[o+r++]=l[S.CD]||0,a[o+r++]=l[S.EHR]||0,a[o+r++]=l[S.RES]||0,a[o+r++]=l[S.BE]||0,a[o+r++]=l[S.ERR]||0,a[o+r++]=l[S.OHB]||0,a[o+r++]=l[S.PHYSICAL_DMG_BOOST]||0,a[o+r++]=l[S.FIRE_DMG_BOOST]||0,a[o+r++]=l[S.ICE_DMG_BOOST]||0,a[o+r++]=l[S.LIGHTNING_DMG_BOOST]||0,a[o+r++]=l[S.WIND_DMG_BOOST]||0,a[o+r++]=l[S.QUANTUM_DMG_BOOST]||0,a[o+r++]=l[S.IMAGINARY_DMG_BOOST]||0,a[o+r++]=q2(s)}return a}function q2(e){return pn.some(a=>a===e.set)?Ka[e.set]:li[e.set]}const eb=`@group(0) @binding(0) var<storage, read_write> results : array<f32>;
@compute @workgroup_size(256)
fn main(
  @builtin(workgroup_id) workgroup_id : vec3<u32>,
  @builtin(local_invocation_id) local_invocation_id : vec3<u32>,
  @builtin(global_invocation_id) global_invocation_id : vec3<u32>,
  @builtin(local_invocation_index) local_invocation_index: u32,
  @builtin(num_workgroups) num_workgroups: vec3<u32>
) {
  var flag = 0;
  let offset = local_invocation_index * 256 * 512;

  for (var i: u32 = 511; i < 256 * 512; i += 512) {
    let index = offset + i;
    if (results[index] != -512) {
      flag = 1;
      break;
    }
  }

  if (flag == 0) {
    results[offset] = -1024;
  }

  workgroupBarrier();
  storageBarrier();

  if (local_invocation_index != 0) {
    return;
  }

  var skip: u32 = 256;
  for (var i: u32 = 0; i < 256; i += 1) {
    let index = i * 512 * 256;
    if (results[index] != -1024) {
      skip = i;
      break;
    }
  }

  if (skip > 0) {
    results[0] = -2048 - f32(skip);
  }
}
`;class Rd extends rf{constructor(t,s){super([],s,!1);tt(this,"limit");tt(this,"compare");this.limit=t,this.compare=s}fixedSizePush(t){this.size()>=this.limit?this.compare(t,this.top())>=0&&(this.pop(),this.push(t)):this.push(t)}fixedSizePushOvercapped(t){return this.push(t),this.pop()}}function Bd(e,a,t,s,o,r,l,c,u=!1,d=!1){const C=t.resultsLimit??1024,M=u,x=N2(s,t,a,{WORKGROUP_SIZE:256,BLOCK_SIZE:65536,CYCLES_PER_INVOCATION:512,RESULTS_LIMIT:C,DEBUG:M});M&&!d&&console.log(x);const O=tb(e,x),H=ab(e),_=Float32Array.BYTES_PER_ELEMENT*7,A=Float32Array.BYTES_PER_ELEMENT*65536*512,L=e.createBuffer({size:A,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC}),v=e.createBuffer({size:_,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST}),N=J2(a),U=ur(e,new Float32Array(N),GPUBufferUsage.STORAGE),F=ur(e,new Int32Array(l),GPUBufferUsage.STORAGE,!0,!0),P=ur(e,new Int32Array(c),GPUBufferUsage.STORAGE,!0,!0),T=O.getBindGroupLayout(0),y=O.getBindGroupLayout(1),p=O.getBindGroupLayout(2),R=e.createBindGroup({layout:O.getBindGroupLayout(0),entries:[{binding:0,resource:{buffer:v}}]}),I=e.createBindGroup({layout:O.getBindGroupLayout(1),entries:[{binding:0,resource:{buffer:U}},{binding:1,resource:{buffer:P}},{binding:2,resource:{buffer:F}}]}),B=e.createBindGroup({layout:O.getBindGroupLayout(2),entries:[{binding:0,resource:{buffer:L}}]}),j=e.createBindGroup({layout:H.getBindGroupLayout(0),entries:[{binding:0,resource:{buffer:L}}]}),Z=[T,y,p],K=e.createBuffer({size:A,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),X=Math.ceil(o/65536/512),te=new Rd(C,(ae,Te)=>ae.value-Te.value);return{WORKGROUP_SIZE:256,BLOCK_SIZE:65536,CYCLES_PER_INVOCATION:512,RESULTS_LIMIT:C,DEBUG:M,request:t,context:s,paramsMatrixBufferSize:_,resultMatrixBufferSize:A,permutations:o,iterations:X,startTime:0,relics:a,resultsQueue:te,cancelled:!1,computeEngine:r,device:e,computePipeline:O,postComputePipeline:H,bindGroup0:R,bindGroup1:I,bindGroup2:B,postComputeBindGroup0:j,paramsMatrixBuffer:v,resultMatrixBuffer:L,relicsMatrixBuffer:U,relicSetSolutionsMatrixBuffer:F,ornamentSetSolutionsMatrixBuffer:P,gpuReadBuffer:K,bindGroupLayouts:Z}}function Id(e,a){const t=Y2(e.device,a,e.relics,e),s=e.device,o=e.computePipeline,r=e.postComputePipeline,l=e.bindGroup0,c=e.bindGroup1,u=e.bindGroup2,d=e.postComputeBindGroup0,m=e.resultMatrixBufferSize,h=e.resultMatrixBuffer;s.queue.writeBuffer(e.paramsMatrixBuffer,0,t);const g=s.createCommandEncoder(),C=g.beginComputePass();return C.setPipeline(o),C.setBindGroup(0,l),C.setBindGroup(1,c),C.setBindGroup(2,u),C.dispatchWorkgroups(e.WORKGROUP_SIZE),e.computeEngine==Ji&&(C.setPipeline(r),C.setBindGroup(0,d),C.dispatchWorkgroups(1)),C.end(),g.copyBufferToBuffer(h,0,e.gpuReadBuffer,0,m),s.queue.submit([g.finish()]),e.gpuReadBuffer}function tb(e,a){const t=nb(e),s=e.createShaderModule({code:a});return e.createComputePipeline({layout:e.createPipelineLayout({bindGroupLayouts:t}),compute:{module:s,entryPoint:"main"}})}function ab(e){const a=[e.createBindGroupLayout({entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage"}}]})],t=e.createShaderModule({code:eb});return e.createComputePipeline({layout:e.createPipelineLayout({bindGroupLayouts:a}),compute:{module:t,entryPoint:"main"}})}function nb(e){return[e.createBindGroupLayout({entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}}]}),e.createBindGroupLayout({entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,buffer:{type:"read-only-storage"}},{binding:1,visibility:GPUShaderStage.COMPUTE,buffer:{type:"read-only-storage"}},{binding:2,visibility:GPUShaderStage.COMPUTE,buffer:{type:"read-only-storage"}}]}),e.createBindGroupLayout({entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage"}}]})]}function ur(e,a,t,s=!0,o=!1){const r=e.createBuffer({mappedAtCreation:s,size:a.byteLength,usage:t}),l=r.getMappedRange();return o?new Int32Array(l).set(a):new Float32Array(l).set(a),r.unmap(),r}function yd(e){e.resultMatrixBuffer.unmap(),e.resultMatrixBuffer.destroy(),e.relicsMatrixBuffer.unmap(),e.relicsMatrixBuffer.destroy(),e.relicSetSolutionsMatrixBuffer.unmap(),e.relicSetSolutionsMatrixBuffer.destroy(),e.ornamentSetSolutionsMatrixBuffer.unmap(),e.ornamentSetSolutionsMatrixBuffer.destroy()}function ib(e,a,t){const s=t.lightConeConditionalController,o=t.characterConditionalController;s.finalizeCalculations&&s.finalizeCalculations(e,a,t),o.finalizeCalculations&&o.finalizeCalculations(e,a,t)}function Md(e,a,t){e.a[S.MEMOSPRITE]&&Md(e.m,a,t);const s=t.enemyLevel,o=e.a;sb(e,t),ob(e),rb(e),o[S.CR]+=o[S.CR_BOOST],o[S.CD]+=o[S.CD_BOOST],o[S.ATK]+=o[S.ATK_P_BOOST]*t.baseATK,o[S.ELEMENTAL_DMG]+=Bh(e,t.elementalDamageType);const r=1+o[S.ELEMENTAL_DMG],l=o[S.DEF_PEN]+t.combatBuffs.DEF_PEN,c=o[S.ENEMY_WEAKNESS_BROKEN]?1:.9,u=t.enemyDamageResistance-o[S.RES_PEN]-t.combatBuffs.RES_PEN-Rh(e,t.elementalResPenType),d=1+o[S.BREAK_EFFICIENCY_BOOST];o[S.BREAK_DMG]=c*3767.5533*t.elementalBreakScaling*Bs(s,l+o[S.BREAK_DEF_PEN])*(.5+t.enemyMaxToughness/120)*(1+o[S.VULNERABILITY]+o[S.BREAK_VULNERABILITY])*(1-u)*(1+o[S.BE])*(1+o[S.BREAK_DMG_BOOST]);const m=c*3767.5533/10*Bs(s,l+o[S.SUPER_BREAK_DEF_PEN])*(1+o[S.VULNERABILITY]+o[S.SUPER_BREAK_VULNERABILITY])*(1-u)*(1+o[S.BE])*(1+o[S.SUPER_BREAK_DMG_BOOST]);if(a.actionType=="DEFAULT"){const g=r+o[S.DOT_DMG_BOOST],C=Bs(s,l+o[S.DOT_DEF_PEN]),M=1+o[S.VULNERABILITY]+o[S.DOT_VULNERABILITY],x=1-(u-o[S.DOT_RES_PEN]),O=db(e,t),H=o[S.TRUE_DMG_MODIFIER]+o[S.DOT_TRUE_DMG_MODIFIER],_=Wn(o,t,o[S.DOT_DMG],o[S.DOT_HP_SCALING],o[S.DOT_DEF_SCALING],o[S.DOT_ATK_SCALING],o[S.DOT_ATK_P_BOOST]);o[S.DOT_DMG]=ub(e,a,S.DOT_DMG,_,c,g,C,M,x,O,H)}if((a.actionType=="BASIC"||a.actionType=="DEFAULT")&&t.activeAbilityFlags&z.BASIC){const g=Wn(o,t,o[S.BASIC_DMG],o[S.BASIC_HP_SCALING],o[S.BASIC_DEF_SCALING],o[S.BASIC_ATK_SCALING],o[S.BASIC_ATK_P_BOOST]);o[S.BASIC_DMG]=Ii(e,a,t,c,r,l,u,m,d,S.BASIC_DMG,g,o[S.BASIC_DMG_BOOST],o[S.BASIC_VULNERABILITY],o[S.BASIC_DEF_PEN],o[S.BASIC_RES_PEN],o[S.BASIC_CR_BOOST],o[S.BASIC_CD_BOOST],o[S.BASIC_FINAL_DMG_BOOST],o[S.BASIC_BREAK_EFFICIENCY_BOOST],o[S.BASIC_SUPER_BREAK_MODIFIER],o[S.BASIC_BREAK_DMG_MODIFIER],o[S.BASIC_TOUGHNESS_DMG],o[S.BASIC_ADDITIONAL_DMG],0,0,o[S.BASIC_TRUE_DMG_MODIFIER],e.a[S.MEMOSPRITE]?e.m.a[S.BASIC_DMG]:0)}if((a.actionType=="SKILL"||a.actionType=="DEFAULT")&&t.activeAbilityFlags&z.SKILL){const g=Wn(o,t,o[S.SKILL_DMG],o[S.SKILL_HP_SCALING],o[S.SKILL_DEF_SCALING],o[S.SKILL_ATK_SCALING],o[S.SKILL_ATK_P_BOOST]);o[S.SKILL_DMG]=Ii(e,a,t,c,r,l,u,m,d,S.SKILL_DMG,g,o[S.SKILL_DMG_BOOST],o[S.SKILL_VULNERABILITY],o[S.SKILL_DEF_PEN],o[S.SKILL_RES_PEN],o[S.SKILL_CR_BOOST],o[S.SKILL_CD_BOOST],o[S.SKILL_FINAL_DMG_BOOST],0,0,0,o[S.SKILL_TOUGHNESS_DMG],o[S.SKILL_ADDITIONAL_DMG],0,0,o[S.SKILL_TRUE_DMG_MODIFIER],e.a[S.MEMOSPRITE]?e.m.a[S.SKILL_DMG]:0)}if((a.actionType=="ULT"||a.actionType=="DEFAULT")&&t.activeAbilityFlags&z.ULT){const g=Wn(o,t,o[S.ULT_DMG],o[S.ULT_HP_SCALING],o[S.ULT_DEF_SCALING],o[S.ULT_ATK_SCALING],o[S.ULT_ATK_P_BOOST]);o[S.ULT_DMG]=Ii(e,a,t,c,r,l,u,m,d,S.ULT_DMG,g,o[S.ULT_DMG_BOOST],o[S.ULT_VULNERABILITY],o[S.ULT_DEF_PEN],o[S.ULT_RES_PEN],o[S.ULT_CR_BOOST],o[S.ULT_CD_BOOST],o[S.ULT_FINAL_DMG_BOOST],o[S.ULT_BREAK_EFFICIENCY_BOOST],0,0,o[S.ULT_TOUGHNESS_DMG],o[S.ULT_ADDITIONAL_DMG],o[S.ULT_ADDITIONAL_DMG_CR_OVERRIDE],o[S.ULT_ADDITIONAL_DMG_CD_OVERRIDE],o[S.ULT_TRUE_DMG_MODIFIER],e.a[S.MEMOSPRITE]?e.m.a[S.ULT_DMG]:0)}if((a.actionType=="FUA"||a.actionType=="DEFAULT")&&t.activeAbilityFlags&z.FUA){const g=Wn(o,t,o[S.FUA_DMG],o[S.FUA_HP_SCALING],o[S.FUA_DEF_SCALING],o[S.FUA_ATK_SCALING],o[S.FUA_ATK_P_BOOST]);o[S.FUA_DMG]=Ii(e,a,t,c,r,l,u,m,d,S.FUA_DMG,g,o[S.FUA_DMG_BOOST],o[S.FUA_VULNERABILITY],o[S.FUA_DEF_PEN],o[S.FUA_RES_PEN],o[S.FUA_CR_BOOST],o[S.FUA_CD_BOOST],0,0,0,0,o[S.FUA_TOUGHNESS_DMG],o[S.FUA_ADDITIONAL_DMG],0,0,o[S.FUA_TRUE_DMG_MODIFIER],e.a[S.MEMOSPRITE]?e.m.a[S.FUA_DMG]:0)}if((a.actionType=="MEMO_SKILL"||a.actionType=="DEFAULT")&&t.activeAbilityFlags&z.MEMO_SKILL)if(e.a[S.MEMOSPRITE])o[S.MEMO_SKILL_DMG]+=e.m.a[S.MEMO_SKILL_DMG];else{const g=Wn(o,t,o[S.MEMO_SKILL_DMG],o[S.MEMO_SKILL_HP_SCALING],o[S.MEMO_SKILL_DEF_SCALING],o[S.MEMO_SKILL_ATK_SCALING],o[S.MEMO_SKILL_ATK_P_BOOST]);o[S.MEMO_SKILL_DMG]=Ii(e,a,t,c,r,l,u,m,d,S.MEMO_SKILL_DMG,g,o[S.MEMO_SKILL_DMG_BOOST],0,0,0,0,0,0,0,0,0,o[S.MEMO_SKILL_TOUGHNESS_DMG],0,0,0,o[S.MEMO_SKILL_TRUE_DMG_MODIFIER],0)}if((a.actionType=="MEMO_TALENT"||a.actionType=="DEFAULT")&&t.activeAbilityFlags&z.MEMO_TALENT)if(e.a[S.MEMOSPRITE])o[S.MEMO_TALENT_DMG]+=e.m.a[S.MEMO_TALENT_DMG];else{const g=Wn(o,t,o[S.MEMO_TALENT_DMG],o[S.MEMO_TALENT_HP_SCALING],o[S.MEMO_TALENT_DEF_SCALING],o[S.MEMO_TALENT_ATK_SCALING],o[S.MEMO_TALENT_ATK_P_BOOST]);o[S.MEMO_TALENT_DMG]=Ii(e,a,t,c,r,l,u,m,d,S.MEMO_TALENT_DMG,g,o[S.MEMO_TALENT_DMG_BOOST],0,0,0,0,0,0,0,0,0,o[S.MEMO_TALENT_TOUGHNESS_DMG],0,0,0,o[S.MEMO_TALENT_TRUE_DMG_MODIFIER],0)}const h=o[S.BREAK_DMG]*(o[S.TRUE_DMG_MODIFIER]+o[S.BREAK_TRUE_DMG_MODIFIER]);if(e.trace&&a.actionType=="DEFAULT"){const g=Zo[S.BREAK_DMG].name,C=e.dmgSplits[g];C.breakDmg=o[S.BREAK_DMG],C.trueDmg=h}o[S.BREAK_DMG]+=h}const Vc=100;function Wn(e,a,t,s,o,r,l){return t+s*e[S.HP]+o*e[S.DEF]+r*(e[S.ATK]+l*a.baseATK)}function Bs(e,a){return Vc/((e+20)*Math.max(0,1-a)+Vc)}function sb(e,a){const t=e.a;let s=t[S.HP]/(1-t[S.DEF]/(t[S.DEF]+200+10*a.enemyLevel));s*=1/t[S.DMG_RED_MULTI],t[S.EHP]=s}function ob(e,a){const t=e.a;t[S.HEAL_VALUE]=t[S.HEAL_VALUE]*(1+t[S.OHB]+t[S.SKILL_OHB]*(t[S.HEAL_TYPE]==Me?1:0)+t[S.ULT_OHB]*(t[S.HEAL_TYPE]==ye?1:0))}function rb(e,a){const t=e.a;t[S.SHIELD_VALUE]=t[S.SHIELD_VALUE]*(1+t[S.SHIELD_BOOST])}function Ii(e,a,t,s,o,r,l,c,u,d,m,h,g,C,M,x,O,H,_,A,L,v,N,U,F,P,T){const y=e.a,p=t.enemyLevel;let R=0;if(m){const ae=Math.min(1,y[S.CR]+x),Te=y[S.CD]+y[S.CD_BOOST]+O,Ke=ae*(1+Te)+(1-ae),Se=1+y[S.VULNERABILITY]+g,re=Bs(p,r+C),be=1-(l-M),De=1+H+y[S.FINAL_DMG_BOOST];R=cb(m,s,o+h,re,Se,Ke,be,De)}let I=0;L&&(I=L*y[S.BREAK_DMG]);let B=0;const j=y[S.SUPER_BREAK_MODIFIER]+A;j>0&&(B=lb(c,j,u+_,v));let Z=0;if(N>0){const ae=U||Math.min(1,y[S.CR]),Te=F||y[S.CD],Ke=ae*(1+Te)+(1-ae);Z=mb(N,s,o+y[S.ADDITIONAL_DMG_BOOST],Bs(p,r),1+y[S.VULNERABILITY],Ke,1-l)}const K=R+I+B+Z,X=(y[S.TRUE_DMG_MODIFIER]+P)*K;let te=0;if(T>0&&(te=T),e.trace&&a.actionType=="DEFAULT"){const ae=Zo[d].name,Te=e.dmgSplits[ae];Te.abilityDmg=R,Te.breakDmg=I,Te.superBreakDmg=B,Te.additionalDmg=Z,Te.trueDmg=X,Te.jointDmg=te}return K+X+te}function lb(e,a,t,s){return e*a*t*s}function cb(e,a,t,s,o,r,l,c){return e*a*t*s*o*r*l*c}function ub(e,a,t,s,o,r,l,c,u,d,m){const h=s*o*r*l*c*u*d,g=h*m;if(e.trace&&a.actionType=="DEFAULT"){const C=Zo[t].name,M=e.dmgSplits[C];M.dotDmg=h,M.trueDmg=g}return h+g}function db(e,a){const t=e.a,s=a.enemyEffectResistance,o=Math.min(1,t[S.DOT_CHANCE]*(1+t[S.EHR])*(1-s+t[S.EFFECT_RES_PEN]));return t[S.DOT_SPLIT]?(1+t[S.DOT_SPLIT]*o*(t[S.DOT_STACKS]-1))/(1+t[S.DOT_SPLIT]*(t[S.DOT_STACKS]-1)):o}function mb(e,a,t,s,o,r,l){return e*a*t*s*o*r*l}const fb={[f.Stats.HP_P]:64.8/43.2,[f.Stats.ATK_P]:64.8/43.2,[f.Stats.DEF_P]:64.8/54,[f.Stats.HP]:64.8/43.2*Ge[f.Stats.HP_P][5].high/Ge[f.Stats.HP][5].high,[f.Stats.ATK]:64.8/43.2*Ge[f.Stats.ATK_P][5].high/Ge[f.Stats.ATK][5].high,[f.Stats.DEF]:64.8/54*Ge[f.Stats.DEF_P][5].high/Ge[f.Stats.DEF][5].high,[f.Stats.CR]:64.8/32.4,[f.Stats.CD]:64.8/64.8,[f.Stats.OHB]:64.8/34.5,[f.Stats.EHR]:64.8/43.2,[f.Stats.RES]:64.8/43.2,[f.Stats.SPD]:64.8/25,[f.Stats.BE]:64.8/64.8},ct={calculateWeightScore:(e,a)=>{const t=e.weights||{};t[f.Stats.ATK]=t[f.Stats.ATK_P],t[f.Stats.DEF]=t[f.Stats.DEF_P],t[f.Stats.HP]=t[f.Stats.HP_P];for(const s of Object.keys(t))t[s]===void 0&&(t[s]=0);for(const s of a){let o=0;for(const r of s.substats){const l=t[r.stat]||0,c=fb[r.stat]||0,u=r.value||0;o+=u*l*c}s.weightScore=o}return a},applyTopFilter:(e,a)=>{const t=e.weights||{},s={[E.Head]:t.headHands||0,[E.Hands]:t.headHands||0,[E.Body]:t.bodyFeet||0,[E.Feet]:t.bodyFeet||0,[E.PlanarSphere]:t.sphereRope||0,[E.LinkRope]:t.sphereRope||0};for(const o of Object.values(f.Parts)){const r=a[o];a[o]=r.filter(l=>l.weightScore>=s[o]*6.48*.8)}return a},applyRankFilter:(e,a)=>{if(!e.rankFilter)return a;const t=V.getCharacters(),s=e.characterId,o={};for(let r=0;r<t.length;r++){const l=t[r];if(l.id!=s){if(r>=e.rank)break;Object.values(l.equipped).filter(c=>c!=null).map(c=>o[c]=!0)}}return a.filter(r=>!o[r.id])},applyExcludeFilter:(e,a)=>{if(!e.exclude)return a;const t=V.getCharacters(),s={};for(const o of t)e.exclude.includes(o.id)&&o.id!=e.characterId&&Object.values(o.equipped).filter(r=>r!=null).map(r=>s[r]=!0);return a.filter(o=>!s[o.id])},applyMainFilter:(e,a)=>{const t=[];return t.push(...a.filter(s=>s.part==f.Parts.Head)),t.push(...a.filter(s=>s.part==f.Parts.Hands)),t.push(...a.filter(s=>s.part==f.Parts.Body).filter(s=>e.mainBody.length==0||e.mainBody.includes(s.main.stat))),t.push(...a.filter(s=>s.part==f.Parts.Feet).filter(s=>e.mainFeet.length==0||e.mainFeet.includes(s.main.stat))),t.push(...a.filter(s=>s.part==f.Parts.PlanarSphere).filter(s=>e.mainPlanarSphere.length==0||e.mainPlanarSphere.includes(s.main.stat))),t.push(...a.filter(s=>s.part==f.Parts.LinkRope).filter(s=>e.mainLinkRope.length==0||e.mainLinkRope.includes(s.main.stat))),t},applyEnhanceFilter:(e,a)=>a.filter(t=>t.enhance>=e.enhance),applyEquippedFilter:(e,a)=>{if(e.includeEquippedRelics)return a;const t=e.characterId||"99999999";let s=[];return window.store.getState().characters.forEach(o=>{if(o.id==t)return;const r=Object.values(o.equipped).filter(l=>l!=null);s=s.concat(r)}),a.filter(o=>!s.includes(o.id))},applyGradeFilter:(e,a)=>a.filter(t=>t.grade?t.grade>=e.grade:!0),applySetFilter:(e,a)=>{function t(o,r){if(!o.relicSets||o.relicSets.length==0)return r;let l=J.arrayOfZeroes(Object.values(f.SetsRelics).length);for(const c of o.relicSets){if(c[0]==_a.relic4Piece&&c.length==2){const u=f.RelicSetToIndex[c[1]];l[u]=1}if(c[0]==_a.relic2PlusAny&&(l=J.arrayOfValue(Object.values(f.SetsRelics).length,1)),c[0]==_a.relic2Plus2Piece&&c.length==3){const u=f.RelicSetToIndex[c[1]];l[u]=1;const d=f.RelicSetToIndex[c[2]];l[d]=1}}return r.filter(c=>c.part==f.Parts.Head||c.part==f.Parts.Hands||c.part==f.Parts.Body||c.part==f.Parts.Feet?l[f.RelicSetToIndex[c.set]]==1:!0)}function s(o,r){if(!o.ornamentSets||o.ornamentSets.length==0)return r;const l=J.arrayOfZeroes(Object.values(f.SetsOrnaments).length);for(const c of o.ornamentSets){const u=f.OrnamentSetToIndex[c];l[u]=1}return r.filter(c=>c.part==f.Parts.PlanarSphere||c.part==f.Parts.LinkRope?l[f.OrnamentSetToIndex[c.set]]==1:!0)}return s(e,t(e,a))},applyCurrentFilter:(e,a)=>{if(!e.keepCurrentRelics)return a;const t=V.getCharacterById(e.characterId);if(!t)return a;function s(o){const r=a[o];if(!t.equipped[o])return r;const l=r.find(c=>c.id==t.equipped[o]);return l?[l]:[]}return{Head:s(E.Head),Hands:s(E.Hands),Body:s(E.Body),Feet:s(E.Feet),PlanarSphere:s(E.PlanarSphere),LinkRope:s(E.LinkRope)}},splitRelicsByPart:e=>({Head:e.filter(a=>a.part==E.Head),Hands:e.filter(a=>a.part==E.Hands),Body:e.filter(a=>a.part==E.Body),Feet:e.filter(a=>a.part==E.Feet),PlanarSphere:e.filter(a=>a.part==E.PlanarSphere),LinkRope:e.filter(a=>a.part==E.LinkRope)}),applyMainStatsFilter:(e,a)=>{const t=e.mainStatUpscaleLevel;return t&&a.map(s=>{const{grade:o,enhance:r,main:{stat:l}}=s,c=o*3;if(r<c&&r<t){const u=c<t?c:t,d=b.calculateRelicMainStatValue(l,o,u)/(J.isFlat(s.main.stat)?1:100);return s.augmentedStats.mainValue=d}}),a},condenseRelicSubstatsForOptimizerSingle:e=>{for(const a of e){a.condensedStats=[];for(const t of a.substats){const s=t.stat,o=Nt[s],r=hb(s,t.value);a.condensedStats.push([o,r])}a.condensedStats.push([Nt[a.augmentedStats.mainStat],a.augmentedStats.mainValue])}},condenseRelicSubstatsForOptimizer:e=>{for(const a of Object.values(e))ct.condenseRelicSubstatsForOptimizerSingle(a);return e},condenseSingleRelicByPartSubstatsForOptimizer:e=>{for(const a of Object.values(e))ct.condenseRelicSubstatsForOptimizerSingle([a]);return e}};function hb(e,a){return J.precisionRound(J.isFlat(e)?a:a/100)}function mi(e,a,t,s,o,r=!1,l=!1,c=!1,u=0,d=!1){r||(e=J.clone(e));const m=t??ss(e);if(l)for(const Z of m.actions)Z.conditionalState={};else Cd(e,m);const{Head:h,Hands:g,Body:C,Feet:M,PlanarSphere:x,LinkRope:O}=pb(a);d&&ct.calculateWeightScore(e,[h,g,C,M,x,O]);const H=Sb(a);let _=0;const A=Ka[a.Head.set]??H[_++],L=Ka[a.Hands.set]??H[_++],v=Ka[a.Body.set]??H[_++],N=Ka[a.Feet.set]??H[_++],U=li[a.PlanarSphere.set]??H[_++],F=li[a.LinkRope.set]??H[_++],P=s??new bn(!1),T=o??new Wa(!1),y=T.m,p=A+v*Ti+L*Ti*Ti+N*Ti*Ti*Ti,R=U+F*sh,I=[A,L,v,N,U,F],B=Rg(I);P.init(p,R,B,I,-1),Bg(P,m,B,I),Ag(P,h,g,C,M,x,O,d),yg(P,m),Ig(P,m),u&&P.SPD.set(u,w.NONE),T.setBasic(P),T.a[S.MEMOSPRITE]&&(y.setBasic(P.m),P.initMemo());let j=0;for(let Z=m.actions.length-1;Z>=0;Z--){const K=m.actions[Z],X=T.a;T.setPrecompute(K.precomputedX.a),T.a[S.MEMOSPRITE]&&y.setPrecompute(K.precomputedM.a),T.trace&&(T.tracePrecompute(K.precomputedX),y.tracePrecompute(K.precomputedM)),Mg(T,K,m),Gg(T,K,m),ib(T,K,m),Md(T,K,m),K.actionType==="BASIC"?j+=X[S.BASIC_DMG]:K.actionType==="SKILL"?j+=X[S.SKILL_DMG]:K.actionType==="ULT"?j+=X[S.ULT_DMG]:K.actionType==="FUA"?j+=X[S.FUA_DMG]:K.actionType==="MEMO_SKILL"?j+=X[S.MEMO_SKILL_DMG]:K.actionType==="MEMO_TALENT"&&(j+=X[S.MEMO_TALENT_DMG]),Z===0&&(j+=m.comboDot*X[S.DOT_DMG]+m.comboBreak*X[S.BREAK_DMG],T.COMBO_DMG.set(j,w.NONE))}return T}function Sb(e){const a=new Set([Ka[e.Head.set],Ka[e.Hands.set],Ka[e.Body.set],Ka[e.Feet.set],li[e.PlanarSphere.set],li[e.LinkRope.set]]);return[0,1,2,3,4,5].filter(t=>!a.has(t))}function pb(e){for(const a of Object.keys(f.Parts))e[a]=e[a]||Hl();return e}function Hl(){return{set:-1,substats:[]}}function Ga(e){const a=e.width??10;return i.jsx(D,{vertical:!0,children:i.jsx(Ut,{type:"vertical",style:{flexGrow:1,margin:`10px ${a}px`}})})}const ba=zt(Ut)`
    margin: 5px 0px;
`,{Text:Fl}=_e,gb={IMPORT:{descriptionKey:"0Perms.RootCauses.IMPORT.Description",buttonTextKey:"0Perms.RootCauses.IMPORT.ButtonText",applyFix:()=>{window.store.getState().setActiveKey(ge.IMPORT),window.store.getState().setZeroPermutationsModalOpen(!1)},successMessageKey:"0Perms.RootCauses.IMPORT.SuccessMessage"},BODY_MAIN:Js(E.Body),FEET_MAIN:Js(E.Feet),PLANAR_SPHERE_MAIN:Js(E.PlanarSphere),LINK_ROPE_MAIN:Js(E.LinkRope),RELIC_SETS:{descriptionKey:"0Perms.RootCauses.RELIC_SETS.Description",buttonTextKey:"0Perms.RootCauses.RELIC_SETS.ButtonText",applyFix:()=>{window.optimizerForm.setFieldValue("relicSets",[])},successMessageKey:"0Perms.RootCauses.RELIC_SETS.SuccessMessage"},ORNAMENT_SETS:{descriptionKey:"0Perms.RootCauses.ORNAMENT_SETS.Description",buttonTextKey:"0Perms.RootCauses.ORNAMENT_SETS.ButtonText",applyFix:()=>{window.optimizerForm.setFieldValue("ornamentSets",[])},successMessageKey:"0Perms.RootCauses.ORNAMENT_SETS.SuccessMessage"},KEEP_CURRENT:{descriptionKey:"0Perms.RootCauses.KEEP_CURRENT.Description",buttonTextKey:"0Perms.RootCauses.KEEP_CURRENT.ButtonText",applyFix:()=>{window.optimizerForm.setFieldValue("keepCurrentRelics",!1)},successMessageKey:"0Perms.RootCauses.KEEP_CURRENT.SuccessMessage"},PRIORITY:{descriptionKey:"0Perms.RootCauses.PRIORITY.Description",buttonTextKey:"0Perms.RootCauses.PRIORITY.ButtonText",applyFix:()=>{V.insertCharacter(window.store.getState().optimizerTabFocusCharacter,0),V.refreshCharacters()},successMessageKey:"0Perms.RootCauses.PRIORITY.SuccessMessage"},EXCLUDE_ENABLED:{descriptionKey:"0Perms.RootCauses.EXCLUDE_ENABLED.Description",buttonTextKey:"0Perms.RootCauses.EXCLUDE_ENABLED.ButtonText",applyFix:()=>{window.optimizerForm.setFieldValue("exclude",[])},successMessageKey:"0Perms.RootCauses.EXCLUDE_ENABLED.SuccessMessage"},EQUIPPED_DISABLED:{descriptionKey:"0Perms.RootCauses.EQUIPPED_DISABLED.Description",buttonTextKey:"0Perms.RootCauses.EQUIPPED_DISABLED.ButtonText",applyFix:()=>{window.optimizerForm.setFieldValue("includeEquippedRelics",!0)},successMessageKey:"0Perms.RootCauses.EQUIPPED_DISABLED.SuccessMessage"},MINIMUM_ROLLS:{descriptionKey:"0Perms.RootCauses.MINIMUM_ROLLS.Description",buttonTextKey:"0Perms.RootCauses.MINIMUM_ROLLS.ButtonText",applyFix:()=>{window.optimizerForm.setFieldValue(["weights","headHands"],0),window.optimizerForm.setFieldValue(["weights","bodyFeet"],0),window.optimizerForm.setFieldValue(["weights","sphereRope"],0)},successMessageKey:"0Perms.RootCauses.MINIMUM_ROLLS.SuccessMessage"}};function Js(e){return{descriptionKey:`0Perms.RootCauses.${e}_MAIN.Description`,buttonTextKey:`0Perms.RootCauses.${e}_MAIN.ButtonText`,applyFix:()=>{window.optimizerForm.setFieldValue(`main${e}`,[])},successMessageKey:`0Perms.RootCauses.${e}_MAIN.SuccessMessage`}}let Ce=[];function bb(e){Ce=[];const[a,t]=yo.getFilteredRelics(e);if(V.getRelics().length==0){Ce.push("IMPORT"),window.store.getState().setZeroPermutationsModalOpen(!0);return}a.Body.length==0&&e.mainBody.length>0&&t.Body.length>0&&Ce.push("BODY_MAIN"),a.Feet.length==0&&e.mainFeet.length>0&&t.Feet.length>0&&Ce.push("FEET_MAIN"),a.PlanarSphere.length==0&&e.mainPlanarSphere.length>0&&t.PlanarSphere.length>0&&Ce.push("PLANAR_SPHERE_MAIN"),a.LinkRope.length==0&&e.mainLinkRope.length>0&&t.LinkRope.length>0&&Ce.push("LINK_ROPE_MAIN"),(a.PlanarSphere.length==0||a.LinkRope.length==0)&&e.ornamentSets.length>0&&Ce.push("ORNAMENT_SETS"),(a.Head.length==0||a.Hands.length==0||a.Body.length==0||a.Feet.length==0)&&e.relicSets.length>0&&Ce.push("RELIC_SETS"),e.keepCurrentRelics&&Ce.push("KEEP_CURRENT"),e.rank!=0&&Ce.push("PRIORITY"),e.exclude.length>0&&Ce.push("EXCLUDE_ENABLED"),e.includeEquippedRelics||Ce.push("EQUIPPED_DISABLED"),(e.weights.headHands>0||e.weights.bodyFeet>0||e.weights.sphereRope>0)&&Ce.push("MINIMUM_ROLLS"),Ce.length==0&&Ce.push("IMPORT"),window.store.getState().setZeroPermutationsModalOpen(!0)}function Gd(e,a){const t=gb[e]||Pd[e];return i.jsxs(D,{justify:"space-between",align:"center",style:{height:45},children:[i.jsx(Fl,{style:{width:550},children:a(t.descriptionKey)}),i.jsx(se,{onClick:()=>{t.applyFix(),window.onOptimizerFormValuesChange({},de.getForm()),oe.success(a(t.successMessageKey),2)},style:{width:250},type:"primary",children:a(t.buttonTextKey)})]},J.randomId())}function Db(){const{t:e}=ee("modals"),a=window.store(o=>o.zeroPermutationModalOpen),t=window.store(o=>o.setZeroPermutationsModalOpen),s=[];for(const o of Ce)s.push(Gd(o,e));return i.jsx(Vt,{title:e("0Perms.Title"),open:a,width:900,destroyOnClose:!0,centered:!0,onOk:()=>t(!1),onCancel:()=>t(!1),footer:null,children:i.jsxs(D,{vertical:!0,gap:15,style:{marginBottom:15},children:[i.jsx(Fl,{children:e("0Perms.Description")}),i.jsx(ba,{}),s]})})}const Pd={MAX_HP:Le("MAX_HP"),MIN_HP:Le("MIN_HP"),MAX_ATK:Le("MAX_ATK"),MIN_ATK:Le("MIN_ATK"),MAX_DEF:Le("MAX_DEF"),MIN_DEF:Le("MIN_DEF"),MAX_SPD:Le("MAX_SPD"),MIN_SPD:Le("MIN_SPD"),MAX_CR:Le("MAX_CR"),MIN_CR:Le("MIN_CR"),MAX_CD:Le("MAX_CD"),MIN_CD:Le("MIN_CD"),MAX_EHR:Le("MAX_EHR"),MIN_EHR:Le("MIN_EHR"),MAX_RES:Le("MAX_RES"),MIN_RES:Le("MIN_RES"),MAX_BE:Le("MAX_BE"),MIN_BE:Le("MIN_BE"),MAX_ERR:Le("MAX_ERR"),MIN_ERR:Le("MIN_ERR"),MAX_EHP:Le("MAX_EHP"),MIN_EHP:Le("MIN_EHP"),MAX_BASIC:Le("MAX_BASIC"),MIN_BASIC:Le("MIN_BASIC"),MAX_SKILL:Le("MAX_SKILL"),MIN_SKILL:Le("MIN_SKILL"),MAX_ULT:Le("MAX_ULT"),MIN_ULT:Le("MIN_ULT"),MAX_FUA:Le("MAX_FUA"),MIN_FUA:Le("MIN_FUA"),MAX_DOT:Le("MAX_DOT"),MIN_DOT:Le("MIN_DOT"),MAX_BREAK:Le("MAX_BREAK"),MIN_BREAK:Le("MIN_BREAK"),MIN_MEMO_SKILL:Le("MIN_MEMO_SKILL"),MAX_MEMO_SKILL:Le("MAX_MEMO_SKILL"),MIN_MEMO_TALENT:Le("MIN_MEMO_TALENT"),MAX_MEMO_TALENT:Le("MAX_MEMO_TALENT"),MAX_HEAL:Le("MAX_HEAL"),MIN_HEAL:Le("MIN_HEAL"),MAX_SHIELD:Le("MAX_SHIELD"),MIN_SHIELD:Le("MIN_SHIELD"),MAX_COMBO:Le("MAX_COMBO"),MIN_COMBO:Le("MIN_COMBO"),STAT_VIEW:{descriptionKey:"0Results.RootCauses.StatView.Description",buttonTextKey:"0Results.RootCauses.StatView.ButtonText",applyFix:()=>{const e=window.store.getState().setStatDisplay;e("combat")},successMessageKey:"0Results.RootCauses.StatView.SuccessMessage"}};function Le(e){const a=e.split("_"),t=a[0].toLowerCase()+a[1][0]+a[1].slice(1).toLowerCase();return{descriptionKey:`0Results.RootCauses.${e}.Description`,buttonTextKey:`0Results.RootCauses.${e}.ButtonText`,applyFix:()=>{window.optimizerForm.setFieldValue(t,void 0)},successMessageKey:`0Results.RootCauses.${e}.SuccessMessage`}}function _d(e){Ce=[],window.store.getState().statDisplay=="base"&&Ce.push("STAT_VIEW"),e.minHp&&Ce.push("MIN_HP"),e.maxHp<2147483647&&Ce.push("MAX_HP"),e.minAtk&&Ce.push("MIN_ATK"),e.maxAtk<2147483647&&Ce.push("MAX_ATK"),e.minDef&&Ce.push("MIN_DEF"),e.maxDef<2147483647&&Ce.push("MAX_DEF"),e.minSpd&&Ce.push("MIN_SPD"),e.maxSpd<2147483647&&Ce.push("MAX_SPD"),e.minCr&&Ce.push("MIN_CR"),e.maxCr<2147483647&&Ce.push("MAX_CR"),e.minCd&&Ce.push("MIN_CD"),e.maxCd<2147483647&&Ce.push("MAX_CD"),e.minEhr&&Ce.push("MIN_EHR"),e.maxEhr<2147483647&&Ce.push("MAX_EHR"),e.minRes&&Ce.push("MIN_RES"),e.maxRes<2147483647&&Ce.push("MAX_RES"),e.minBe&&Ce.push("MIN_BE"),e.maxBe<2147483647&&Ce.push("MAX_BE"),e.minErr&&Ce.push("MIN_ERR"),e.maxErr<2147483647&&Ce.push("MAX_ERR"),e.minEhp&&Ce.push("MIN_EHP"),e.maxEhp<2147483647&&Ce.push("MAX_EHP"),e.minBasic&&Ce.push("MIN_BASIC"),e.maxBasic<2147483647&&Ce.push("MAX_BASIC"),e.minSkill&&Ce.push("MIN_SKILL"),e.maxSkill<2147483647&&Ce.push("MAX_SKILL"),e.minUlt&&Ce.push("MIN_ULT"),e.maxUlt<2147483647&&Ce.push("MAX_ULT"),e.minFua&&Ce.push("MIN_FUA"),e.maxFua<2147483647&&Ce.push("MAX_FUA"),e.minMemoSkill&&Ce.push("MIN_MEMO_SKILL"),e.maxMemoSkill<2147483647&&Ce.push("MAX_MEMO_SKILL"),e.minMemoTalent&&Ce.push("MIN_MEMO_TALENT"),e.maxMemoTalent<2147483647&&Ce.push("MAX_MEMO_TALENT"),e.minDot&&Ce.push("MIN_DOT"),e.maxDot<2147483647&&Ce.push("MAX_DOT"),e.minBreak&&Ce.push("MIN_BREAK"),e.maxBreak<2147483647&&Ce.push("MAX_BREAK"),e.minHeal&&Ce.push("MIN_HEAL"),e.maxHeal<2147483647&&Ce.push("MAX_HEAL"),e.minShield&&Ce.push("MIN_SHIELD"),e.maxShield<2147483647&&Ce.push("MAX_SHIELD"),window.store.getState().setZeroResultModalOpen(!0)}function Cb(){const e=window.store(o=>o.zeroResultModalOpen),a=window.store(o=>o.setZeroResultModalOpen),{t}=ee("modals"),s=[];for(const o of Ce)s.push(Gd(o,t));return i.jsx(Vt,{title:t("0Results.Title"),open:e,width:900,destroyOnClose:!0,centered:!0,onOk:()=>a(!1),onCancel:()=>a(!1),footer:null,children:i.jsxs(D,{vertical:!0,gap:15,style:{marginBottom:15},children:[i.jsxs(D,{justify:"space-between",align:"center",style:{height:45},children:[i.jsx(Fl,{children:t("0Results.ResetAll.Description")}),i.jsx(se,{onClick:()=>{for(const r of Ce)r!="STAT_VIEW"&&Pd[r].applyFix();const o=window.store.getState().setStatDisplay;o("combat"),oe.success(t("0Results.ResetAll.SuccessMessage")),a(!1)},style:{width:250},type:"primary",children:t("0Results.ResetAll.ButtonText")})]}),i.jsx(ba,{}),s]})})}window.WEBGPU_DEBUG=!1;async function Eb(e){const{context:a,request:t,relics:s,permutations:o,computeEngine:r,relicSetSolutions:l,ornamentSetSolutions:c}=e,u=e.device;if(u==null){console.error("Not supported");return}u.onuncapturederror=m=>{window.store.getState().optimizationInProgress&&(window.store.getState().setOptimizationInProgress(!1),wE())},window.store.getState().setOptimizerStartTime(Date.now()),window.store.getState().setOptimizerRunningEngine(r);const d=Bd(u,s,t,a,o,r,l,c,window.WEBGPU_DEBUG);d.DEBUG&&oe.warning("Debug mode is ON",5),d.startTime||(d.startTime=performance.now());for(let m=0;m<d.iterations;m++){const h=m*d.BLOCK_SIZE*d.CYCLES_PER_INVOCATION,g=h+d.BLOCK_SIZE*d.CYCLES_PER_INVOCATION,C=Id(d,h);if(r==Ji){await C.mapAsync(GPUMapMode.READ,0,4);const M=new Float32Array(C.getMappedRange(0,4))[0];if(C.unmap(),M!=-2304)if(M<=-2048){const O=-(M+2048)*512*256;await dr(h,C,d,O)}else await dr(h,C,d)}else await dr(h,C,d);if(setTimeout(()=>{const M=window.store.getState();M.setOptimizerEndTime(Date.now()),M.setPermutationsResults(d.resultsQueue.size()),M.setPermutationsSearched(Math.min(d.permutations,g))},0),C.unmap(),d.permutations<=g||!window.store.getState().optimizationInProgress){d.cancelled=!0;break}}d.cancelled||window.store.getState().setPermutationsSearched(d.permutations),window.store.getState().setOptimizationInProgress(!1),window.store.getState().setPermutationsResults(d.resultsQueue.size()),setTimeout(()=>{Tb(d),yd(d)},1)}async function dr(e,a,t,s=0){var g;await a.mapAsync(GPUMapMode.READ,s);const o=a.getMappedRange(s*4),r=new Float32Array(o),l=t.resultsQueue;let c=((g=l.top())==null?void 0:g.value)??0,u=t.BLOCK_SIZE*t.CYCLES_PER_INVOCATION;const d=e+t.BLOCK_SIZE*t.CYCLES_PER_INVOCATION,m=t.permutations-d;m<0&&(u+=m);const h=e+s;if(l.size()>=t.RESULTS_LIMIT)for(let C=u-s-1;C>=0;C--){const M=r[C];if(M<0){C+=M+1;continue}M<=c||(c=l.fixedSizePushOvercapped({index:h+C,value:M}).value)}else for(let C=u-s-1;C>=0;C--){const M=r[C];if(M<0){C+=M+1;continue}M<=c&&l.size()>=t.RESULTS_LIMIT||(l.fixedSizePush({index:h+C,value:M}),c=l.top().value)}t.DEBUG&&b2(t,o)}function Tb(e){const a=e.relics,t=a.LinkRope.length,s=a.PlanarSphere.length,o=a.Feet.length,r=a.Body.length,l=a.Hands.length,c=a.Head.length,u=e.context,d=e.resultsQueue.toArray().sort((x,O)=>O.value-x.value),m=[],h=new bn(!1),g=new Wa(!1);for(let x=0;x<d.length;x++){const O=d[x].index,H=O%t,_=(O-H)/t%s,A=(O-_*t-H)/(t*s)%o,L=(O-A*s*t-_*t-H)/(t*s*o)%r,v=(O-L*o*s*t-A*s*t-_*t-H)/(t*s*o*r)%l,N=(O-v*r*o*s*t-L*o*s*t-A*s*t-_*t-H)/(t*s*o*r*l)%c,U=mi(e.request,{Head:a.Head[N],Hands:a.Hands[v],Body:a.Body[L],Feet:a.Feet[A],PlanarSphere:a.PlanarSphere[_],LinkRope:a.LinkRope[H]},u,h,g,!0,!0,void 0,void 0,!0),F=Kl(U);F.id=O,m.push(F)}m.length==0&&_d(e.request);const C=k[e.request.resultSort],M=e.request.statDisplay=="combat"?C.combatGridColumn:C.basicGridColumn;qo(M),de.setRows(m),window.optimizerGrid.current.api.updateGridOptions({datasource:de.getDataSource()})}const Qs=65,vs={extractCharacter:(e,a,t)=>(a=a*Qs,{id:e[a]+t,HP:e[a+1],ATK:e[a+2],DEF:e[a+3],SPD:e[a+4],"CRIT Rate":e[a+5],"CRIT DMG":e[a+6],"Effect Hit Rate":e[a+7],"Effect RES":e[a+8],"Break Effect":e[a+9],"Energy Regeneration Rate":e[a+10],"Outgoing Healing Boost":e[a+11],ED:e[a+12],WEIGHT:e[a+13],EHP:e[a+14],HEAL:e[a+15],SHIELD:e[a+16],BASIC:e[a+17],SKILL:e[a+18],ULT:e[a+19],FUA:e[a+20],MEMO_SKILL:e[a+21],MEMO_TALENT:e[a+22],DOT:e[a+23],BREAK:e[a+24],COMBO:e[a+25],xHP:e[a+26],xATK:e[a+27],xDEF:e[a+28],xSPD:e[a+29],xCR:e[a+30],xCD:e[a+31],xEHR:e[a+32],xRES:e[a+33],xBE:e[a+34],xERR:e[a+35],xOHB:e[a+36],xELEMENTAL_DMG:e[a+37],relicSetIndex:e[a+38],ornamentSetIndex:e[a+39],mHP:e[a+40],mATK:e[a+41],mDEF:e[a+42],mSPD:e[a+43],mCR:e[a+44],mCD:e[a+45],mEHR:e[a+46],mRES:e[a+47],mBE:e[a+48],mERR:e[a+49],mOHB:e[a+50],mELEMENTAL_DMG:e[a+51],mxHP:e[a+52],mxATK:e[a+53],mxDEF:e[a+54],mxSPD:e[a+55],mxCR:e[a+56],mxCD:e[a+57],mxEHR:e[a+58],mxRES:e[a+59],mxBE:e[a+60],mxERR:e[a+61],mxOHB:e[a+62],mxELEMENTAL_DMG:e[a+63],mxEHP:e[a+64]}),extractArrayToResults:(e,a,t,s)=>{for(let o=0;o<a&&e[o*Qs+1];o++){const r=vs.extractCharacter(e,o,s);t.fixedSizePush(r)}},packCharacter:(e,a,t)=>{a=a*Qs;const s=t.c,o=t.a,r=s.a;if(e[a]=s.id,e[a+1]=r[S.HP],e[a+2]=r[S.ATK],e[a+3]=r[S.DEF],e[a+4]=r[S.SPD],e[a+5]=r[S.CR],e[a+6]=r[S.CD],e[a+7]=r[S.EHR],e[a+8]=r[S.RES],e[a+9]=r[S.BE],e[a+10]=r[S.ERR],e[a+11]=r[S.OHB],e[a+12]=r[S.ELEMENTAL_DMG],e[a+13]=s.weight,e[a+14]=o[S.EHP],e[a+15]=o[S.HEAL_VALUE],e[a+16]=o[S.SHIELD_VALUE],e[a+17]=o[S.BASIC_DMG],e[a+18]=o[S.SKILL_DMG],e[a+19]=o[S.ULT_DMG],e[a+20]=o[S.FUA_DMG],e[a+21]=o[S.MEMO_SKILL_DMG],e[a+22]=o[S.MEMO_TALENT_DMG],e[a+23]=o[S.DOT_DMG],e[a+24]=o[S.BREAK_DMG],e[a+25]=o[S.COMBO_DMG],e[a+26]=o[S.HP],e[a+27]=o[S.ATK],e[a+28]=o[S.DEF],e[a+29]=o[S.SPD],e[a+30]=o[S.CR],e[a+31]=o[S.CD],e[a+32]=o[S.EHR],e[a+33]=o[S.RES],e[a+34]=o[S.BE],e[a+35]=o[S.ERR],e[a+36]=o[S.OHB],e[a+37]=o[S.ELEMENTAL_DMG],e[a+38]=s.relicSetIndex,e[a+39]=s.ornamentSetIndex,t.a[S.MEMOSPRITE]){const l=t.m.c.a;e[a+40]=l[S.HP],e[a+41]=l[S.ATK],e[a+42]=l[S.DEF],e[a+43]=l[S.SPD],e[a+44]=l[S.CR],e[a+45]=l[S.CD],e[a+46]=l[S.EHR],e[a+47]=l[S.RES],e[a+48]=l[S.BE],e[a+49]=l[S.ERR],e[a+50]=l[S.OHB],e[a+51]=l[S.ELEMENTAL_DMG];const c=t.m.a;e[a+52]=c[S.HP],e[a+53]=c[S.ATK],e[a+54]=c[S.DEF],e[a+55]=c[S.SPD],e[a+56]=c[S.CR],e[a+57]=c[S.CD],e[a+58]=c[S.EHR],e[a+59]=c[S.RES],e[a+60]=c[S.BE],e[a+61]=c[S.ERR],e[a+62]=c[S.OHB],e[a+63]=c[S.ELEMENTAL_DMG],e[a+64]=c[S.EHP]}},cleanFloatBuffer:e=>{new Float32Array(e).fill(0)},createFloatBuffer:e=>new Float32Array(e*Qs).buffer};function Rb(e){const a=f.SetsRelicsNames.length,t=e.relicSets||[],s=[];for(const o of t){if(o[0]==_a.relic4Piece&&o.length==2){const r=f.RelicSetToIndex[o[1]],l=J.arrayOfZeroes(a);l[r]=4;const c=$s(l);s.push(c)}if(o[0]==_a.relic2PlusAny&&o.length==2){const r=f.RelicSetToIndex[o[1]];for(let d=0;d<a;d++){const m=J.arrayOfZeroes(a);m[r]=2,m[d]+=2;const h=$s(m);s.push(h)}const l=J.arrayOfZeroes(a);l[r]=2;const c=$s(l),u=Ib(c,a);s.push(...u)}if(o[0]==_a.relic2Plus2Piece&&o.length==3){const r=J.arrayOfZeroes(a),l=f.RelicSetToIndex[o[1]],c=f.RelicSetToIndex[o[2]];r[l]+=2,r[c]+=2;const u=$s(r);s.push(u)}}return yb(s)}function Bb(e){const a=e.ornamentSets||[],t=f.SetsOrnamentsNames.length;if(a.length==0)return J.arrayOfValue(t*t,1);const s=J.arrayOfZeroes(t*t);for(const o of a){const r=f.OrnamentSetToIndex[o],l=r+r*t;s[l]=1}return s}function $s(e){const a=[];for(let t=0;t<e.length;t++)for(;e[t];)e[t]--,a.push(t);return a}function Ib(e,a){const t=[];for(let s=0;s<a;s++)for(let o=0;o<a;o++){const r=J.arrayOfZeroes(4);r[0]=e[0],r[1]=e[1],r[2]=s,r[3]=o,t.push(r)}return t}function yb(e){const a=f.SetsRelicsNames.length;if(e.length==0)return J.arrayOfValue(Math.pow(a,4),1);const t=J.arrayOfZeroes(Math.pow(a,4));for(let s=0;s<e.length;s++){const o=e[s],r=Mb(o);for(const l of r){const c=l[0]+l[1]*Math.pow(a,1)+l[2]*Math.pow(a,2)+l[3]*Math.pow(a,3);t[c]=1}}return t}const Mb=e=>{const a=[],t=(s,o=[])=>{if(s.length===0)a.push(o);else for(let r=0;r<s.length;r++){const l=s.slice(),c=l.splice(r,1);t(l.slice(),o.concat(c))}};return t(e),a};function Gb(e){return new Worker("/dreary-quibbles/assets/baseOptimizerWorker-BKzkcKZN.js",{type:"module",name:e==null?void 0:e.name})}const So=Math.min(10,Math.max(1,(navigator.hardwareConcurrency||4)-1));let ls=0;console.log("Using pool size "+So);const cs=[],qs=[];let yi=[];const Ya={initializeWorker:()=>{if(ls<So){const e=new Gb;cs.push(e),ls++,console.log("Initialized workers: "+ls)}},initializeAllWorkers:()=>{for(let e=0;e<So;e++)setTimeout(()=>{Ya.initializeWorker()},500*e)},nextTask:()=>{if(yi.length==0)return;const{task:e,callback:a}=yi.shift();Ya.execute(e,a)},execute:(e,a)=>{if(e.attempts==null&&(e.attempts=0),e.attempts>10)return console.log("Too many failures, abandoning task");if(Ya.initializeWorker(),cs.length>0){const t=cs.shift();let s;qs.length>0?(s=qs.pop(),vs.cleanFloatBuffer(s)):s=vs.createFloatBuffer(f.THREAD_BUFFER_LENGTH),e.input.buffer=s,t.onmessage=o=>{cs.push(t),Ya.nextTask(),a&&a(o.data),qs.push(o.data.buffer)},t.onerror=o=>{console.warn("Worker error",o),ls--,e.attempts++,yi.push({task:e,callback:a}),t.terminate(),setTimeout(()=>{Ya.initializeWorker(),Ya.nextTask()},100)},e.input.request.resultMinFilter=e.getMinFilter(),t.postMessage(e.input,[e.input.buffer])}else yi.push({task:e,callback:a})},cancel:e=>{yi=[]},state:()=>{console.log({poolSize:So,workers:cs,taskQueue:yi,buffers:qs,initializedWorkers:ls})}};var wl=(e=>(e[e.OPTIMIZER=0]="OPTIMIZER",e[e.EST_TBP=1]="EST_TBP",e))(wl||{});let us=!1;const Pb=typeof navigator<"u"&&navigator.userAgent.toLowerCase().indexOf("firefox")>-1;function kl(e){let a=V.getRelics();a=a.filter(l=>l.equippedBy==e.characterId),a=b.clone(a),ct.calculateWeightScore(e,a),a=ct.applyMainStatsFilter(e,a);const t=ct.splitRelicsByPart(a);ct.condenseRelicSubstatsForOptimizer(t),Object.keys(t).map(l=>t[l]=t[l][0]);const s=mi(e,t,null,null,null,void 0,void 0,void 0,void 0,!0),o=Kl(s);de.setTopRow(o,!0),window.store.getState().setOptimizerSelectedRowData(o);const r=V.getCharacterById(e.characterId);r&&window.store.getState().setOptimizerBuild(r.equipped)}const yo={cancel:e=>{us=!0,Ya.cancel(e)},getFilteredRelics:e=>{let a=V.getRelics();a=ct.applyEquippedFilter(e,a),a=ct.applyEnhanceFilter(e,a),a=ct.applyGradeFilter(e,a),a=ct.applyRankFilter(e,a),a=ct.applyExcludeFilter(e,a);const t=ct.splitRelicsByPart(a);a=ct.applyMainFilter(e,a),a=b.clone(a),a=ct.applyMainStatsFilter(e,a),a=ct.applySetFilter(e,a),ct.calculateWeightScore(e,a);let s=ct.splitRelicsByPart(a);return s=ct.applyCurrentFilter(e,s),s=ct.applyTopFilter(e,s),[s,t]},optimize:async function(e){us=!1;const a=[e.teammate0,e.teammate1,e.teammate2].filter(L=>!!L.characterId);for(let L=0;L<a.length;L++){const v=a[L],N=V.getMetadata().characters[v.characterId];v.ELEMENTAL_DMG_TYPE=Di[N.element]}const[t]=this.getFilteredRelics(e);ct.condenseRelicSubstatsForOptimizer(t);const s=Rb(e),o=Bb(e),r={hSize:t.Head.length,gSize:t.Hands.length,bSize:t.Body.length,fSize:t.Feet.length,pSize:t.PlanarSphere.length,lSize:t.LinkRope.length},l=r.hSize*r.gSize*r.bSize*r.fSize*r.pSize*r.lSize;if(de.setMetadata(r,t),console.log(`Optimization permutations: ${l}, blocksize: ${f.THREAD_BUFFER_LENGTH}`),l==0){window.store.getState().setOptimizationInProgress(!1),bb(e),de.setRows([]),de.resetDataSource();return}if(us){window.store.getState().setOptimizationInProgress(!1);return}de.scrollToGrid(),window.optimizerGrid.current.api.setGridOption("loading",!0);const c=ss(e);setTimeout(()=>{kl(e)},200);let u=0,d=!1,m=[];const h=k[e.resultSort],g=e.statDisplay=="combat"?h.combatGridColumn:h.basicGridColumn,C=e.resultsLimit||1024,M=new Rd(C,(L,v)=>L[g]-v[g]),x=2e4;let O=0;const H=f.THREAD_BUFFER_LENGTH,_=J.clone(c);let A=window.store.getState().savedSession[$e.computeEngine];if(A!=wa&&Ll().then(L=>{L==null?(oe.warning("GPU acceleration is not available on this browser - only desktop Chrome and Opera are supported. If you are on a supported browser, report a bug to the Discord server",15),window.store.getState().setSavedSessionKey($e.computeEngine,wa),A=wa):J.sleep(200).then(()=>{Eb({device:L,context:c,request:e,relics:t,permutations:l,computeEngine:A,relicSetSolutions:s,ornamentSetSolutions:o})})}),A==wa){const L=[];for(let N=0;N<l;N+=O)O=Math.min(H,O+x),L.push({skip:N,runSize:O});let v=L.length;window.store.getState().setOptimizerStartTime(Date.now()),window.store.getState().setOptimizerRunningEngine(wa);for(const N of L){const U={input:{context:_,request:e,relics:t,WIDTH:N.runSize,skip:N.skip,permutations:l,relicSetSolutions:s,ornamentSetSolutions:o,isFirefox:Pb,workerType:wl.OPTIMIZER},getMinFilter:()=>M.size()&&M.size()>=e.resultsLimit?M.top()[g]:0},F=P=>{if(u+=N.runSize,v-=1,us&&d)return;const T=new Float32Array(P.buffer);if(vs.extractArrayToResults(T,N.runSize,M,U.input.skip),window.store.getState().setPermutationsResults(M.size()),window.store.getState().setPermutationsSearched(Math.min(l,u)),window.store.getState().setOptimizerEndTime(Date.now()),v==0||us){window.store.getState().setOptimizationInProgress(!1),m=M.toArray(),de.setRows(m),qo(g),window.optimizerGrid.current.api.updateGridOptions({datasource:de.getDataSource()}),console.log("Done",m.length),d=!0,!m.length&&!v&&_d(e);return}};Ya.execute(U,F)}}}};function Kl(e){const a=e.c,t={relicSetIndex:a.relicSetIndex,ornamentSetIndex:a.ornamentSetIndex,id:a.id,WEIGHT:a.weight,xa:new Float32Array(e.a),ca:new Float32Array(a.a),tracedX:e};if(t[n.HP]=a.HP.get(),t[n.ATK]=a.ATK.get(),t[n.DEF]=a.DEF.get(),t[n.SPD]=a.SPD.get(),t[n.CR]=a.CR.get(),t[n.CD]=a.CD.get(),t[n.EHR]=a.EHR.get(),t[n.RES]=a.RES.get(),t[n.BE]=a.BE.get(),t[n.ERR]=a.ERR.get(),t[n.OHB]=a.OHB.get(),t.ED=a.ELEMENTAL_DMG.get(),t.BASIC=e.BASIC_DMG.get(),t.SKILL=e.SKILL_DMG.get(),t.ULT=e.ULT_DMG.get(),t.FUA=e.FUA_DMG.get(),t.MEMO_SKILL=e.MEMO_SKILL_DMG.get(),t.MEMO_TALENT=e.MEMO_TALENT_DMG.get(),t.DOT=e.DOT_DMG.get(),t.BREAK=e.BREAK_DMG.get(),t.COMBO=e.COMBO_DMG.get(),t.EHP=e.EHP.get(),t.HEAL=e.HEAL_VALUE.get(),t.SHIELD=e.SHIELD_VALUE.get(),t.xHP=e.HP.get(),t.xATK=e.ATK.get(),t.xDEF=e.DEF.get(),t.xSPD=e.SPD.get(),t.xCR=e.CR.get(),t.xCD=e.CD.get(),t.xEHR=e.EHR.get(),t.xRES=e.RES.get(),t.xBE=e.BE.get(),t.xERR=e.ERR.get(),t.xOHB=e.OHB.get(),t.xELEMENTAL_DMG=e.ELEMENTAL_DMG.get(),t.mELEMENTAL_DMG=a.ELEMENTAL_DMG.get(),e.a[S.MEMOSPRITE]){const s=e.m.c;t.mHP=s.HP.get(),t.mATK=s.ATK.get(),t.mDEF=s.DEF.get(),t.mSPD=s.SPD.get(),t.mCR=s.CR.get(),t.mCD=s.CD.get(),t.mEHR=s.EHR.get(),t.mRES=s.RES.get(),t.mBE=s.BE.get(),t.mERR=s.ERR.get(),t.mOHB=s.OHB.get();const o=e.m;t.mxHP=o.HP.get(),t.mxATK=o.ATK.get(),t.mxDEF=o.DEF.get(),t.mxSPD=o.SPD.get(),t.mxCR=o.CR.get(),t.mxCD=o.CD.get(),t.mxEHR=o.EHR.get(),t.mxRES=o.RES.get(),t.mxBE=o.BE.get(),t.mxERR=o.ERR.get(),t.mxOHB=o.OHB.get(),t.mxELEMENTAL_DMG=o.ELEMENTAL_DMG.get(),t.mxEHP=o.EHP.get()}return t}const Rt={ratingFilters:()=>({title:Y.t("hint:RatingFilter.Title"),content:i.jsxs(D,{vertical:!0,gap:10,children:[i.jsx("p",{children:Y.t("hint:RatingFilter.p1")}),i.jsx("p",{children:Y.t("hint:RatingFilter.p2")}),i.jsx("p",{children:Y.t("hint:RatingFilter.p3")})]})}),combatBuffs:()=>({title:Y.t("hint:CombatBuffs.Title"),content:i.jsx(D,{vertical:!0,gap:10,children:i.jsx("p",{children:Y.t("hint:CombatBuffs.p1")})})}),statFilters:()=>({title:Y.t("hint:StatFilters.Title"),content:i.jsxs(D,{vertical:!0,gap:10,children:[i.jsx("p",{children:Y.t("hint:StatFilters.p1")}),i.jsx("p",{children:Y.t("hint:StatFilters.p2")}),i.jsx("p",{children:Y.t("hint:StatFilters.p3")})]})}),mainStats:()=>({title:Y.t("hint:Mainstats.Title"),content:i.jsx(D,{vertical:!0,gap:10,children:i.jsx("p",{children:Y.t("hint:Mainstats.p1")})})}),sets:()=>({title:Y.t("hint:Sets.Title"),content:i.jsxs(D,{vertical:!0,gap:10,children:[i.jsx("p",{children:Y.t("hint:Sets.p1")}),i.jsx("p",{children:Y.t("hint:Sets.p2")})]})}),character:()=>({title:Y.t("hint:Character.Title"),content:i.jsx(D,{vertical:!0,gap:10,children:i.jsx("p",{children:Y.t("hint:Character.p1")})})}),characterPassives:()=>({title:Y.t("hint:CharacterPassives.Title"),content:i.jsxs(D,{vertical:!0,gap:10,children:[i.jsx("p",{children:Y.t("hint:CharacterPassives.p1")}),i.jsx("p",{children:Y.t("hint:CharacterPassives.p2")})]})}),lightConePassives:()=>({title:Y.t("hint:LightconePassives.Title"),content:i.jsxs(D,{vertical:!0,gap:10,children:[i.jsx("p",{children:Y.t("hint:LightconePassives.p1")}),i.jsx("p",{children:Y.t("hint:LightconePassives.p2")})]})}),lightCone:()=>({title:Y.t("hint:Lightcone.Title"),content:i.jsxs(D,{vertical:!0,gap:10,children:[i.jsx("p",{children:Y.t("hint:Lightcone.p1")}),i.jsx("p",{children:Y.t("hint:Lightcone.p2")})]})}),actions:()=>({title:Y.t("hint:Actions.Title"),content:i.jsxs(D,{vertical:!0,gap:10,children:[i.jsx("p",{children:Y.t("hint:Actions.p1")}),i.jsx("p",{children:Y.t("hint:Actions.p2")}),i.jsx("p",{children:Y.t("hint:Actions.p3")}),i.jsx("p",{children:Y.t("hint:Actions.p4")})]})}),optimizerOptions:()=>({title:Y.t("hint:OptimizerOptions.Title"),content:(()=>{const{t:e}=ee("hint",{keyPrefix:"OptimizerOptions"});return i.jsxs(D,{vertical:!0,gap:10,children:[i.jsx("p",{children:i.jsxs(xt,{t:e,i18nKey:"p1",children:[i.jsx("strong",{children:"Character priority filter"}),"- When this option is enabled, the character may only steal relics from lower priority characters. The optimizer will ignore relics equipped by higher priority characters on the list. Change character ranks from the priority selector or by dragging them on the Characters page."]})}),i.jsx("p",{children:i.jsxs(xt,{t:e,i18nKey:"p2",children:[i.jsx("strong",{children:"Boost main stat"}),"- Calculates relic mains stats as if they were this level (or their max if they can't reach this level) if they are currently below it. Substats are not changed accordingly, so builds with lower level relics may be stronger once you level them."]})}),i.jsx("p",{children:i.jsxs(xt,{t:e,i18nKey:"p3",children:[i.jsx("strong",{children:"Keep current relics"}),"- The character must use its currently equipped items, and the optimizer will try to fill in empty slots"]})}),i.jsx("p",{children:i.jsxs(xt,{t:e,i18nKey:"p4",children:[i.jsx("strong",{children:"Include equipped relics"}),"- When enabled, the optimizer will allow using currently equipped by a character for the search. Otherwise equipped relics are excluded"]})}),i.jsx("p",{children:i.jsxs(xt,{t:e,i18nKey:"p5",children:[i.jsx("strong",{children:"Priority"}),"- See: Character priority filter. Changing this setting will change the character's priority"]})}),i.jsx("p",{children:i.jsxs(xt,{t:e,i18nKey:"p6",children:[i.jsx("strong",{children:"Exclude"}),"- Select specific characters' equipped relics to exclude for the search. This setting overrides the priority filter"]})}),i.jsx("p",{children:i.jsxs(xt,{t:e,i18nKey:"p7",children:[i.jsx("strong",{children:"Enhance / grade"}),"- Select the minimum enhance to search for and minimum stars for relics to include"]})})]})})()}),relics:()=>({title:Y.t("hint:Relics.Title"),content:i.jsxs(D,{vertical:!0,gap:10,children:[i.jsx("p",{children:Y.t("hint:Relics.p1")}),i.jsx("p",{children:Y.t("hint:Relics.p2")}),i.jsx("p",{children:Y.t("hint:Relics.p3")}),i.jsx("p",{children:Y.t("hint:Relics.p4")}),i.jsx("p",{children:Y.t("hint:Relics.p5")})]})}),optimizationDetails:()=>({title:Y.t("hint:OptimizationDetails.Title"),content:i.jsxs(D,{vertical:!0,gap:10,children:[i.jsx("p",{children:Y.t("hint:OptimizationDetails.p1")}),i.jsx("p",{children:Y.t("hint:OptimizationDetails.p2")}),i.jsx("p",{children:Y.t("hint:OptimizationDetails.p3")}),i.jsx("p",{children:Y.t("hint:OptimizationDetails.p4")})]})}),enemyOptions:()=>({title:Y.t("hint:EnemyOptions.Title"),content:i.jsxs(D,{vertical:!0,gap:10,children:[i.jsx("p",{children:Y.t("hint:EnemyOptions.p1")}),i.jsx("p",{children:Y.t("hint:EnemyOptions.p2")}),i.jsx("p",{children:Y.t("hint:EnemyOptions.p3")}),i.jsx("p",{children:Y.t("hint:EnemyOptions.p4")}),i.jsx("p",{children:Y.t("hint:EnemyOptions.p5")}),i.jsx("p",{children:Y.t("hint:EnemyOptions.p6")}),i.jsx("p",{children:Y.t("hint:EnemyOptions.p7")})]})}),substatWeightFilter:()=>({title:Y.t("hint:SubstatWeightFilter.Title"),content:i.jsxs(D,{vertical:!0,gap:10,children:[i.jsx("p",{children:Y.t("hint:SubstatWeightFilter.p1")}),i.jsx("p",{children:Y.t("hint:SubstatWeightFilter.p2")}),i.jsx("p",{children:Y.t("hint:SubstatWeightFilter.p3")}),i.jsx("p",{children:Y.t("hint:SubstatWeightFilter.p4")})]})}),statDisplay:()=>({title:Y.t("hint:StatDisplay.Title"),content:i.jsxs(D,{vertical:!0,gap:10,children:[i.jsx("p",{children:Y.t("hint:StatDisplay.p1")}),i.jsx("p",{children:Y.t("hint:StatDisplay.p2")}),i.jsx("p",{children:Y.t("hint:StatDisplay.p3")})]})}),valueColumns:()=>({title:Y.t("hint:ValueColumns.Title"),content:i.jsxs(D,{vertical:!0,gap:10,children:[i.jsx("p",{children:Y.t("hint:ValueColumns.p1")}),i.jsx("p",{children:i.jsx("b",{children:Y.t("hint:ValueColumns.p2")})}),i.jsx("p",{children:Y.t("hint:ValueColumns.p3")}),i.jsx("p",{children:Y.t("hint:ValueColumns.p4")}),i.jsx("p",{children:Y.t("hint:ValueColumns.p5")}),i.jsx("p",{children:Y.t("hint:ValueColumns.p6")})]})}),relicInsight:()=>({title:Y.t("hint:RelicInsights.Title"),content:(()=>{const{t:e}=ee("hint",{keyPrefix:"RelicInsights"});return i.jsxs(D,{vertical:!0,gap:10,children:[i.jsx("p",{children:e("p1")}),i.jsx("p",{children:i.jsxs(xt,{t:e,i18nKey:"p2",children:["'Buckets' looks at how perfect this relic could be (with the best possible upgrade rolls) for each character, and buckets them into percentages.",i.jsx("br",{}),"If you hover over a character portrait you'll see the new stats and/or rolls necessary to reach the max potential of this relic.",i.jsx("br",{}),"⚠️ Relics with missing substats may have misleadingly high buckets, as best-case upgrade analysis assumes the best new substat per character."]})}),i.jsx("p",{children:e("p3")})]})})()}),relicLocation:()=>({title:Y.t("hint:RelicLocation.Title"),content:i.jsxs(D,{vertical:!0,gap:10,children:[i.jsx("p",{children:Y.t("hint:RelicLocation.p1")}),i.jsx("p",{children:Y.t("hint:RelicLocation.p2")}),i.jsxs(D,{vertical:!0,children:[i.jsx("div",{children:Y.t("hint:RelicLocation.p3")}),i.jsxs("ul",{children:[i.jsx("li",{children:Y.t("hint:RelicLocation.p4")}),i.jsx("li",{children:Y.t("hint:RelicLocation.p5")}),i.jsx("li",{children:Y.t("hint:RelicLocation.p6")})]})]})]})}),locatorParams:()=>({title:Y.t("hint:LocatorParams.Title"),content:(()=>{const{t:e}=ee("hint",{keyPrefix:"LocatorParams"});return i.jsxs(D,{vertical:!0,gap:8,children:[i.jsx("p",{children:i.jsxs(xt,{t:e,i18nKey:"p1",children:[i.jsx("strong",{children:"Inventory Width"}),"- Select the number of columns the inventory has ingame so that the relic locator can find your relic accurately"]})}),i.jsx("p",{children:i.jsxs(xt,{t:e,i18nKey:"p2",children:[i.jsx("strong",{children:"Auto Filter rows"}),"- Maximum number of rows before the relic locator applies a part/set filter to try and bring the searched relic closer to the top of your inventory"]})})]})})()})},{Text:_b}=_e;function Yo(e){const a=t=>{const[s,o]=Lt.useState(!1),r=i.jsxs(_b,{style:{width:400,display:"block"},children:[i.jsx("hr",{}),t.content]});return i.jsx(As,{trigger:"hover",placement:"left",content:r,title:t.title,open:s,mouseEnterDelay:.4,onOpenChange:o,children:i.jsx("span",{style:{width:"100%"},children:i.jsx(e,{...t})})})};return a.displayName="WithPopoverWrapped",a}Yo.displayName="WithPopover";const Ab="flex-start",xb="center",Lb=zt(_e)`
    white-space: pre-line;
`;function Ob(e){return e.set?"setConditionals":e.lc?"lightConeConditionals":"characterConditionals"}function Nl(e){const a=Ob(e);if(e.set)return[a,e.id,1];const t=[a,e.id];return e.teammateIndex!=null&&t.unshift(`teammate${e.teammateIndex}`),t}const vb=e=>{const a=Nl(e),t=i.jsx(vn,{checkedChildren:i.jsx(Hn,{}),unCheckedChildren:i.jsx(Qa,{}),disabled:e.disabled,style:{width:45,marginRight:5},onChange:e.onChange,defaultChecked:e.value??void 0});return i.jsxs(D,{justify:Ab,align:xb,children:[e.removeForm?t:i.jsx(q.Item,{name:a,valuePropName:"checked",children:t}),i.jsx(Lb,{children:e.text})]})},Ad=Yo(vb),Hb="flex-start",Fb="center",wb=zt(_e)`
    white-space: pre-line;
`,kb=e=>{const[a,t]=W.useState(e.value??void 0),s=Nl(e),o=i.jsx(ne,{disabled:e.disabled,style:{minWidth:e.fullWidth?"100%":80,width:e.fullWidth?"100%":80,marginRight:5},optionLabelProp:"display",listHeight:500,size:"small",dropdownStyle:{width:"fit-content"},options:e.options,onChange:r=>{e.onChange&&t(r??0)},onBlur:()=>{e.onChange&&e.onChange(a??0)},value:e.value==null?void 0:a});return i.jsxs(D,{justify:Hb,align:Fb,style:{width:e.fullWidth?"100%":void 0},children:[e.removeForm?o:i.jsx(q.Item,{name:s,style:{width:e.fullWidth?"100%":void 0},children:o}),i.jsx(wb,{children:e.fullWidth?null:e.text})]})},xd=Yo(kb),Kb="flex-start",Nb="center",Ub=61,jb=55,Wb=155,Zc=zt(_e)`
    white-space: pre-line;
`,Vb=e=>{const[a,t]=W.useState((e==null?void 0:e.value)??void 0),s=e.percent?100:1,o=e.percent?.01:1,r=e.percent?"%":"",l=W.useRef(e.min),c=W.useRef(e.max),u=Nl(e);W.useEffect(()=>{const h=window.optimizerForm.getFieldValue(u);(h>=e.max||h==c.current)&&window.optimizerForm.setFieldValue(u,e.max),(h<=e.min||h==l.current)&&window.optimizerForm.setFieldValue(u,e.min),l.current=e.min,c.current=e.max},[e.min,e.max]);const d=i.jsx(ma,{min:e.min,max:e.max,controls:!1,size:"small",style:{width:jb},parser:h=>h==null||h==""?0:b.precisionRound(parseFloat(h)/s),formatter:h=>`${b.precisionRound((h??0)*s)}${r}`,disabled:e.disabled,onChange:h=>{e.onChange&&e.onChange(a??0)},onBlur:()=>{e.onChange&&e.onChange(a??0)},value:e.value==null?void 0:a}),m=i.jsx(No,{min:e.min,max:e.max,step:o,style:{minWidth:Wb,marginTop:0,marginBottom:0,marginLeft:1},tooltip:{formatter:h=>`${b.precisionRound((h??0)*s)}${r}`},disabled:e.disabled,onChange:h=>{e.onChange&&t(h)},onChangeComplete:h=>{e.onChange&&e.onChange(h)},value:e.value==null?void 0:a});return i.jsxs(D,{vertical:!0,gap:0,style:{marginBottom:0},children:[i.jsxs(D,{justify:Kb,align:Nb,children:[i.jsx("div",{style:{minWidth:Ub,display:"block"},children:e.removeForm?d:i.jsx(q.Item,{name:u,children:d})}),i.jsx(Zc,{style:{lineHeight:"16px"},children:e.text})]}),i.jsxs(D,{align:"center",justify:"flex-start",gap:5,style:{height:14},children:[e.removeForm?m:i.jsx(q.Item,{name:u,children:m}),i.jsx(Zc,{style:{minWidth:20,marginBottom:2,textAlign:"center"},children:`${b.precisionRound(e.max*s)}${r}`})]})]})},Ld=Yo(Vb),Us=(e,a="#ebb434")=>{if(Y.resolvedLanguage=="aa_ER")return i.jsx(i.Fragment,{children:e});const t=[];let s=0;return e&&e.split("::BR::").forEach(o=>{let r="",l=!1;t.length>0&&(t.push(i.jsx("br",{},s++)),t.push(i.jsx("br",{},s++)));for(let c=0;c<o.length;c++)o[c]>="0"&&o[c]<="9"||o[c]==="%"||o[c]==="A"&&o[c+1]&&/[2,4,6]/.test(o[c+1])||o[c]==="E"&&o[c+1]&&/[0-6]/.test(o[c+1])?(r+=o[c],l=!0):(l&&(t.push(i.jsx("span",{style:{color:a},children:r},s++)),r="",l=!1),t.push(i.jsx("span",{children:o[c]},s++)));l&&t.push(i.jsx("span",{style:{color:a},children:r},s++))}),i.jsx(i.Fragment,{children:t})},Zb={switch:Ad,slider:Ld,select:xd},Od=({content:e,teammateIndex:a})=>{const{t}=ee("optimizerTab"),s=[];let o=0;return e?e.length===0?a!=null?s.push(i.jsx("div",{children:t("NoTeamConditionals")},o++)):s.push(i.jsx("div",{children:t("NoConditionals")},o++)):e.forEach(r=>{const l=Zb[r.formItem];r.teammateIndex=a,s.push(W.createElement(l,{...r,title:r.text,content:Us(r.content),text:r.text,key:o++})),o++}):a!=null?s.push(i.jsx("div",{children:t("NoTeamConditionals")},o++)):s.push(i.jsx("div",{children:t("NoConditionals")},o++)),i.jsx(D,{vertical:!0,gap:6,children:s})},{Text:zb}=_e,le=zt(zb)`
    text-decoration: underline;
    text-decoration-color: #6d97ffb3;
    text-underline-offset: 2px;
    white-space: nowrap;
`;function Ve(e){return new URL(Qt+"/assets"+e,import.meta.url).href}const zc={[n.HP]:"IconMaxHP.webp",[n.ATK]:"IconAttack.webp",[n.DEF]:"IconDefence.webp",[n.HP_P]:"IconMaxHP.webp",[n.ATK_P]:"IconAttack.webp",[n.DEF_P]:"IconDefence.webp",[n.SPD]:"IconSpeed.webp",[n.SPD_P]:"IconSpeed.webp",[n.CR]:"IconCriticalChance.webp",[n.CD]:"IconCriticalDamage.webp",[n.EHR]:"IconStatusProbability.webp",[n.RES]:"IconStatusResistance.webp",[n.BE]:"IconBreakUp.webp",[n.ERR]:"IconEnergyRecovery.webp",[n.OHB]:"IconHealRatio.webp",[n.Physical_DMG]:"IconPhysicalAddedRatio.webp",[n.Fire_DMG]:"IconFireAddedRatio.webp",[n.Ice_DMG]:"IconIceAddedRatio.webp",[n.Lightning_DMG]:"IconThunderAddedRatio.webp",[n.Wind_DMG]:"IconWindAddedRatio.webp",[n.Quantum_DMG]:"IconQuantumAddedRatio.webp",[n.Imaginary_DMG]:"IconImaginaryAddedRatio.webp"},Q={getStatIcon:(e,a=!1)=>e=="CV"?Ve("/misc/cv.webp"):e=="simScore"?Ve("/misc/battle.webp"):e==f.Stats.HP_P&&a?Ve("/misc/IconMaxHPPercent.webp"):e==f.Stats.ATK_P&&a?Ve("/misc/IconAttackPercent.webp"):e==f.Stats.DEF_P&&a?Ve("/misc/IconDefencePercent.webp"):!e||!zc[e]?Q.getBlank():Ve(`/icon/property/${zc[e]}`),getCharacterPortraitById:e=>e?Ve(`/image/character_portrait/${e}.webp`):(console.warn("No id found"),Q.getBlank()),getCharacterAvatarById:e=>e?Ve(`/icon/avatar/${e}.webp`):Q.getBlank(),getCharacterPreviewById:e=>e?Ve(`/image/character_preview/${e}.webp`):Q.getBlank(),getLightConePortrait:e=>e?Ve(`/image/light_cone_portrait/${e.id}.webp`):Q.getBlank(),getLightConePortraitById:e=>e?Ve(`/image/light_cone_portrait/${e}.webp`):Q.getBlank(),getLightConeIconById:e=>e?Ve(`/icon/light_cone/${e}.webp`):Q.getBlank(),getPath:e=>e?Ve(`/icon/path/${e}.webp`):Q.getBlank(),getPathFromClass:e=>e?Ve(`/icon/path/${e}.webp`):Q.getBlank(),getElement:e=>e?Ve(`/icon/element/${e}.webp`):Q.getBlank(),getBlank:()=>Ve("/misc/blank.webp"),getQuestion:()=>Ve("/misc/tooltip.webp"),getLogo:()=>Ve("/misc/logo.webp"),getDiscord:()=>Ve("/misc/badgediscord.webp"),getGithub:()=>Ve("/misc/badgegithub.webp"),getKofi:()=>Ve("/misc/badgekofi.webp"),getJade:()=>Ve("/misc/jade.webp"),getPass:()=>Ve("/misc/pass.webp"),getStarlight:()=>Ve("/misc/starlight.webp"),getStar:()=>Ve("/misc/StarBig.webp"),getScore:()=>Ve("/misc/QuestMainIcon.webp"),getScoreNoSpeed:()=>Ve("/misc/noSpdScore.webp"),getPart:e=>{const a={[E.Head]:"partHead",[E.Hands]:"partHands",[E.Body]:"partBody",[E.Feet]:"partFeet",[E.PlanarSphere]:"partPlanarSphere",[E.LinkRope]:"partLinkRope"};return Ve(`/misc/${a[e]}.webp`)},getChangelog:e=>Ve(`/misc/changelog/${e}`),getSetImage:(e,a=f.Parts.PlanarSphere,t=!1)=>{if(e==-1)return Q.getBlank();const s=String(e),o={base:"",[f.Parts.Head]:"_0",[f.Parts.Hands]:"_1",[f.Parts.Body]:"_2",[f.Parts.Feet]:"_3",[f.Parts.PlanarSphere]:"_0",[f.Parts.LinkRope]:"_1"};return t?e==Ls||e==Os?Ve(`/icon/relic/${pt[f.Sets.SacerdosRelivedOrdeal]}.webp`):Ve(`/icon/relic/${pt[s]}.webp`):e==Ls||e==Os?Ve(`/icon/relic/${pt[f.Sets.SacerdosRelivedOrdeal]}${o[a]}.webp`):Ve(`/icon/relic/${pt[s]}${o[a]}.webp`)},getHomeFeature:(e,a="en_US")=>Ve(`/misc/home/${a}/${e}.webp`),getHomeBackground:e=>Ve(`/misc/home/background/${e}.webp`),getGlobe:()=>Ve("/misc/globe.webp")},_t=e=>i.jsx(As,{content:e.type.content,title:e.type.title,overlayStyle:{width:500},children:i.jsx("img",{src:Q.getQuestion(),style:{width:16,opacity:.6}})}),Ul=W.memo(({id:e,eidolon:a,teammateIndex:t})=>{const{t:s}=ee("optimizerTab"),o=e;if(!e||!el[o])return i.jsxs(D,{justify:"space-between",align:"center",children:[i.jsx(le,{children:s("CharacterPassives")}),i.jsx(_t,{type:Rt.characterPassives()})]});const r=el[o],l=r(a,!0),c=t!=null?l.teammateContent?l.teammateContent():void 0:l.content();return i.jsxs(D,{vertical:!0,gap:5,children:[t==null&&i.jsxs(D,{justify:"space-between",align:"center",children:[i.jsx(le,{children:s("CharacterPassives")}),i.jsx(_t,{type:Rt.characterPassives()})]}),i.jsx(Od,{content:c,teammateIndex:t})]})});Ul.displayName="CharacterConditionalDisplay";const jl=W.memo(e=>{var d;const{t:a}=ee("optimizerTab"),{id:t,superImposition:s,teammateIndex:o}=e,r=o==null?window.optimizerForm.getFieldValue("characterId"):(d=window.optimizerForm.getFieldValue(`teammate${o}`))==null?void 0:d.characterId,l=Un({characterId:r,characterEidolon:0,lightCone:t,lightConeSuperimposition:s},e.dbMetadata),c=Sa.get(l,!0),u=o!=null?c.teammateContent?c.teammateContent():void 0:c.content();return i.jsxs(D,{vertical:!0,gap:5,children:[o==null&&i.jsxs(D,{justify:"space-between",align:"center",children:[i.jsx(le,{children:a("LightconePassives")}),i.jsx(_t,{type:Rt.lightConePassives()})]}),i.jsx(Od,{content:u,teammateIndex:o})]})});jl.displayName="LightConeConditionalDisplay";const Xb=go([{color:"#5A1A06",pos:0},{color:"#343127",pos:.35},{color:"#38821F",pos:1}]);let mr=go("#343127","#38821F");const Yb={"augmentedStats.HP":169.35,"augmentedStats.ATK":84.675,"augmentedStats.DEF":84.675,"augmentedStats.SPD":10,"augmentedStats.ATK%":.1728,"augmentedStats.HP%":.1728,"augmentedStats.DEF%":.216,"augmentedStats.CRIT Rate":.1296,"augmentedStats.CRIT DMG":.2592,"augmentedStats.Effect Hit Rate":.1728,"augmentedStats.Effect RES":.1728,"augmentedStats.Break Effect":.2592,cv:.4,"weights.current":64.8,"weights.potentialSelected.averagePct":100,"weights.potentialSelected.bestPct":100,"weights.potentialAllAll":100,"weights.rerollAvgSelectedDelta":40},Be={getColor:(e,a)=>a.rgbAt(e).toHexString(),getOptimizerColumnGradient:e=>{const a=de.getAggregations();try{const t=e.column.colId,s=de.getColumnsToAggregateMap();if(e.data&&a&&s[t]){const o=a.min[t],r=a.max[t];let c=(e.value-o)/(r-o);return r==o&&(c=.5),{backgroundColor:Be.getColor(Math.min(Math.max(c,0),1),Xb)}}}catch(t){console.error(t)}},setTheme(e){mr=go(e.colorBgBase,e.colorPrimary)},setToken(e){mr=go(e.colorBgElevated,e.colorPrimaryHover)},getRelicGradient(e){const a=e.column.colId,t=e.value;if(isNaN(t)||t==0)return{};let s;return a=="weights.rerollAvgSelectedDelta"?s=t/40:a.startsWith("weights.potential")||a.startsWith("weights.reroll")?s=t/100:a.startsWith("weights.")?s=t/(6.48*9):s=t/Yb[a],{backgroundColor:Be.getColor(Math.min(Math.max(s,0),1),mr)}}},Wl={de_DE:{locale:"de_DE",nativeName:"Deutsch",shortName:"Deutsch"},en_US:{locale:"en_US",nativeName:"English",shortName:"English"},es_ES:{locale:"es_ES",nativeName:"Español",shortName:"Español"},fr_FR:{locale:"fr_FR",nativeName:"Français",shortName:"Français"},it_IT:{locale:"it_IT",nativeName:"Italiano",shortName:"Italiano"},ja_JP:{locale:"ja_JP",nativeName:"日本語",shortName:"日本語"},ko_KR:{locale:"ko_KR",nativeName:"한국어",shortName:"한국어"},pt_BR:{locale:"pt_BR",nativeName:"Português",shortName:"Português"},ru_RU:{locale:"ru_RU",nativeName:"русский",shortName:"русский"},tr_TR:{locale:"tr_TR",nativeName:"Türkçe",shortName:"Türkçe"},vi_VN:{locale:"vi_VN",nativeName:"Tiếng Việt",shortName:"Tiếng Việt"},zh_CN:{locale:"zh_CN",nativeName:"中文",shortName:"中文"},zh_TW:{locale:"zh_TW",nativeName:"中文",shortName:"中文"},aa_ER:{locale:"aa_ER",nativeName:"inContext",shortName:"inContext"}},Jb=Object.values(Wl).reduce((e,a)=>(e[a.locale]=a.locale.replace("_","-"),e),{});function fr(e,a=0,t=!1){return e.toLocaleString(tn(),{maximumFractionDigits:a,minimumFractionDigits:a,useGrouping:t})}const Qb={maximumFractionDigits:0,minimumFractionDigits:0,useGrouping:!0},$b={maximumFractionDigits:1,minimumFractionDigits:1,useGrouping:!0},qb={maximumFractionDigits:0,minimumFractionDigits:0,useGrouping:!1},eD={maximumFractionDigits:1,minimumFractionDigits:1,useGrouping:!1},tD={maximumFractionDigits:2,minimumFractionDigits:2,useGrouping:!1},aD={maximumFractionDigits:3,minimumFractionDigits:3,useGrouping:!1},Ea=e=>e.toLocaleString(tn(),Qb),nD=e=>e.toLocaleString(tn(),$b),Ln=e=>e.toLocaleString(tn(),qb),Ot=e=>e.toLocaleString(tn(),eD),si=e=>e.toLocaleString(tn(),tD),Qn=e=>e.toLocaleString(tn(),aD);function tn(){return Jb[Y.resolvedLanguage]}const $={floor:e=>(e==null?void 0:e.value)==null?"":Ln(Math.floor(e.value)),x100Tenths:e=>(e==null?void 0:e.value)==null?"":Ot(Math.floor(J.precisionRound(e.value*100)*10)/10),tenths:e=>(e==null?void 0:e.value)==null?"":Ot(Math.floor(J.precisionRound(e.value)*10)/10),relicSet:e=>{if((e==null?void 0:e.value)==null||isNaN(e.value))return"";const a=e.value,t=Object.values(f.SetsRelics).length,s=[],o=a%t,r=(a-o)/t%t,l=(a-r*t-o)/(t*t)%t,c=(a-l*t*t-r*t-o)/(t*t*t)%t,u=[o,r,l,c];for(;u.length>0;){const d=u[0];if(u.lastIndexOf(d)){const m=Object.entries(f.RelicSetToIndex).find(C=>C[1]==d)[0],h=Q.getSetImage(m,f.Parts.Head);s.push(h);const g=u.lastIndexOf(d);u.splice(g,1)}u.splice(0,1)}return s.sort(),i.jsxs(D,{justify:"center",style:{marginTop:-1},children:[i.jsx(Mi,{asset:s[0]}),i.jsx(Mi,{asset:s[1]})]})},ornamentSet:e=>{if((e==null?void 0:e.value)==null)return"";const a=e.value,t=Object.values(f.SetsOrnaments).length;let s;const o=a%t,r=(a-o)/t%t;if(o==r){const l=Object.entries(f.OrnamentSetToIndex).find(c=>c[1]==o)[0];return s=Q.getSetImage(l,f.Parts.PlanarSphere),i.jsx(D,{justify:"center",style:{marginTop:-1},children:i.jsx(Mi,{asset:s})})}else return""},anySet:e=>{if((e==null?void 0:e.value)==null)return"";const a=e.data.part,t=Q.getSetImage(e.data.set,a);return i.jsx(D,{justify:"center",title:e.data.set,style:{marginTop:-1},children:i.jsx(Mi,{asset:t})})},characterIcon:e=>{if((e==null?void 0:e.value)==null)return"";const a=e.data.equippedBy;if(!a)return"";const t=Q.getCharacterAvatarById(a);return i.jsx(D,{justify:"center",style:{marginTop:-1},children:i.jsx(Mi,{asset:t})})},readableStat:e=>(e==null?void 0:e.value)==null?"":Y.t(`common:ShortReadableStats.${e.value}`),readablePart:e=>(e==null?void 0:e.value)==null?"":Y.t(`common:ReadableParts.${e.value}`),partIcon:e=>(e==null?void 0:e.value)==null?"":i.jsx(D,{justify:"center",style:{marginTop:-1,width:20,marginBottom:3},children:i.jsx(Mi,{asset:Q.getPart(e.value)})}),hideZeroesFloor:e=>e.value==0?"":""+Math.floor(e.value),hideZeroes10thsRelicTabSpd:e=>{if(e.value==0)return"";const a=J.precisionRound(Math.floor(e.value*10)/10);return e.data.verified?a.toFixed(1):a},mainValueRenderer:e=>{const a=e.data.part;return a==f.Parts.Hands||a==f.Parts.Head?e.value==0?"":Ln(Math.floor(e.value)):e.value==0?"":J.truncate10ths(e.value).toLocaleString(tn())},hideZeroesX100Tenths:e=>e.value==0?"":$.x100Tenths(e),hideNaNAndFloor:e=>isNaN(e.value)?0:Math.floor(e.value),hideNaNAndFloorPercent:e=>(isNaN(e.value)?0:Math.floor(e.value))+"%",renderSubstatNumber:(e,a)=>e.stat==f.Stats.SPD?a.verified?Ot(J.truncate10ths(e.value)):Math.floor(e.value):J.isFlat(e.stat)?Ln(Math.floor(e.value)):Ot(J.truncate10ths(e.value)),renderMainStatNumber:e=>J.isFlat(e.stat)?Ln(Math.floor(e.value)):Ot(J.truncate10ths(e.value)),renderGradeCell:e=>{const a=e.data;return $.renderGrade(a)},renderGrade:e=>{const a=iD[e.grade]||"";return e.verified?i.jsx(Cu,{mouseEnterDelay:.4,title:Y.t("common:VerifiedRelicHoverText"),children:i.jsx(bo,{style:{fontSize:"14px",color:a}})}):i.jsx(D,{children:i.jsx("svg",{width:"14",height:"14",viewBox:"0 0 14 14",style:{display:"inline-block",verticalAlign:"middle"},children:i.jsx("circle",{cx:"7",cy:"7",r:"7",fill:a==""?"transparent":a})})})},renderEquippedBy:e=>e=="true"?i.jsx(bo,{style:{fontSize:"14px",color:"#6de362"}}):i.jsx(bl,{style:{fontSize:"14px",color:"#de5555"}})},iD={5:"#efb679",4:"#cc52f1",3:"#58beed",2:"#63e0ac",[-1]:"#bdbdbd"};function Mi(e){return e.asset?i.jsx(Eu,{src:e.asset,width:32,preview:!1}):""}const Pt=46,He=50,Jo=52,at=56,Qo=62,Kt=5,Ca=211,Vi=11,Xc={rowHeight:33,pagination:!0,rowModelType:"infinite",datasource:null,paginationPageSize:500,paginationPageSizeSelector:[100,500,1e3],cacheBlockSize:500,maxBlocksInCache:1,alwaysShowVerticalScroll:!0,suppressDragLeaveHidesColumns:!0,suppressScrollOnNewData:!0,suppressMultiSort:!0,getRowId:e=>String(e.data.id||J.randomId())},sD={cellStyle:Be.getOptimizerColumnGradient,sortable:!0,sortingOrder:["desc","asc"],wrapHeaderText:!0,autoHeaderHeight:!0},mt="ᴹ";function oD(e){return[{field:"relicSetIndex",cellRenderer:$.relicSet,width:72,headerName:e("Grid.Headers.Basic.Set")},{field:"ornamentSetIndex",cellRenderer:$.ornamentSet,width:42,headerName:e("Grid.Headers.Basic.Set")},{field:f.Stats.ATK,valueFormatter:$.floor,minWidth:He,flex:10,headerName:e("Grid.Headers.Basic.ATK"),cellStyle:Be.getOptimizerColumnGradient},{field:f.Stats.DEF,valueFormatter:$.floor,minWidth:He,flex:10,headerName:e("Grid.Headers.Basic.DEF"),cellStyle:Be.getOptimizerColumnGradient},{field:f.Stats.HP,valueFormatter:$.floor,minWidth:He,flex:10,headerName:e("Grid.Headers.Basic.HP"),cellStyle:Be.getOptimizerColumnGradient},{field:f.Stats.SPD,valueFormatter:$.tenths,minWidth:He,flex:10,headerName:e("Grid.Headers.Basic.SPD"),cellStyle:Be.getOptimizerColumnGradient},{field:f.Stats.CR,valueFormatter:$.x100Tenths,minWidth:He,flex:10,headerName:e("Grid.Headers.Basic.CR"),cellStyle:Be.getOptimizerColumnGradient},{field:f.Stats.CD,valueFormatter:$.x100Tenths,minWidth:He,flex:10,headerName:e("Grid.Headers.Basic.CD"),cellStyle:Be.getOptimizerColumnGradient},{field:f.Stats.EHR,valueFormatter:$.x100Tenths,minWidth:He,flex:10,headerName:e("Grid.Headers.Basic.EHR"),cellStyle:Be.getOptimizerColumnGradient},{field:f.Stats.RES,valueFormatter:$.x100Tenths,minWidth:Pt,flex:10,headerName:e("Grid.Headers.Basic.RES"),cellStyle:Be.getOptimizerColumnGradient},{field:f.Stats.BE,valueFormatter:$.x100Tenths,minWidth:He,flex:10,headerName:e("Grid.Headers.Basic.BE"),cellStyle:Be.getOptimizerColumnGradient},{field:f.Stats.OHB,valueFormatter:$.x100Tenths,minWidth:Pt,flex:10,headerName:e("Grid.Headers.Basic.OHB")},{field:f.Stats.ERR,valueFormatter:$.x100Tenths,minWidth:Pt,flex:10,headerName:e("Grid.Headers.Basic.ERR")},{field:"ED",valueFormatter:$.x100Tenths,minWidth:He,flex:10,headerName:e("Grid.Headers.Basic.DMG")},{field:"EHP",valueFormatter:$.floor,minWidth:He,flex:10,headerName:e("Grid.Headers.Basic.EHP")},{field:"HEAL",valueFormatter:$.floor,minWidth:Pt,flex:10,headerName:e("Grid.Headers.Basic.HEAL")},{field:"SHIELD",valueFormatter:$.floor,minWidth:Pt,flex:10,headerName:e("Grid.Headers.Basic.SHIELD")},{field:"WEIGHT",valueFormatter:$.floor,minWidth:Jo,flex:10,headerName:e("Grid.Headers.Basic.WEIGHT")},{field:"BASIC",valueFormatter:$.floor,minWidth:at,flex:12,headerName:e("Grid.Headers.Basic.BASIC")},{field:"SKILL",valueFormatter:$.floor,minWidth:at,flex:12,headerName:e("Grid.Headers.Basic.SKILL")},{field:"ULT",valueFormatter:$.floor,minWidth:at,flex:12,headerName:e("Grid.Headers.Basic.ULT")},{field:"FUA",valueFormatter:$.floor,minWidth:at,flex:12,headerName:e("Grid.Headers.Basic.FUA")},{field:"MEMO_SKILL",valueFormatter:$.floor,minWidth:at,flex:12,headerName:e("Grid.Headers.Basic.MEMO_SKILL")},{field:"MEMO_TALENT",valueFormatter:$.floor,minWidth:at,flex:12,headerName:e("Grid.Headers.Basic.MEMO_TALENT")},{field:"DOT",valueFormatter:$.floor,minWidth:at,flex:12,headerName:e("Grid.Headers.Basic.DOT")},{field:"BREAK",valueFormatter:$.floor,minWidth:He,flex:12,headerName:e("Grid.Headers.Basic.BREAK")},{field:"COMBO",valueFormatter:$.floor,minWidth:Qo,flex:13,headerName:e("Grid.Headers.Basic.COMBO")}]}function rD(e){return[{field:"relicSetIndex",cellRenderer:$.relicSet,width:72,headerName:e("Grid.Headers.Basic.Set")},{field:"ornamentSetIndex",cellRenderer:$.ornamentSet,width:42,headerName:e("Grid.Headers.Basic.Set")},{field:"mATK",valueFormatter:$.floor,minWidth:He,flex:10,headerName:e("Grid.Headers.Basic.ATK")+mt,cellStyle:Be.getOptimizerColumnGradient},{field:"mDEF",valueFormatter:$.floor,minWidth:He,flex:10,headerName:e("Grid.Headers.Basic.DEF")+mt,cellStyle:Be.getOptimizerColumnGradient},{field:"mHP",valueFormatter:$.floor,minWidth:He,flex:10,headerName:e("Grid.Headers.Basic.HP")+mt,cellStyle:Be.getOptimizerColumnGradient},{field:"mSPD",valueFormatter:$.tenths,minWidth:He,flex:10,headerName:e("Grid.Headers.Basic.SPD")+mt,cellStyle:Be.getOptimizerColumnGradient},{field:"mCR",valueFormatter:$.x100Tenths,minWidth:He,flex:10,headerName:e("Grid.Headers.Basic.CR")+mt,cellStyle:Be.getOptimizerColumnGradient},{field:"mCD",valueFormatter:$.x100Tenths,minWidth:He,flex:10,headerName:e("Grid.Headers.Basic.CD")+mt,cellStyle:Be.getOptimizerColumnGradient},{field:"mEHR",valueFormatter:$.x100Tenths,minWidth:He,flex:10,headerName:e("Grid.Headers.Basic.EHR")+mt,cellStyle:Be.getOptimizerColumnGradient},{field:"mRES",valueFormatter:$.x100Tenths,minWidth:Pt,flex:10,headerName:e("Grid.Headers.Basic.RES")+mt,cellStyle:Be.getOptimizerColumnGradient},{field:"mBE",valueFormatter:$.x100Tenths,minWidth:He,flex:10,headerName:e("Grid.Headers.Basic.BE")+mt,cellStyle:Be.getOptimizerColumnGradient},{field:"mOHB",valueFormatter:$.x100Tenths,minWidth:Pt,flex:10,headerName:e("Grid.Headers.Basic.OHB")+mt},{field:"mERR",valueFormatter:$.x100Tenths,minWidth:Pt,flex:10,headerName:e("Grid.Headers.Basic.ERR")+mt},{field:"mELEMENTAL_DMG",valueFormatter:$.x100Tenths,minWidth:He,flex:10,headerName:e("Grid.Headers.Basic.DMG")+mt},{field:"mxEHP",valueFormatter:$.floor,minWidth:He,flex:10,headerName:e("Grid.Headers.Basic.EHP")},{field:"HEAL",valueFormatter:$.floor,minWidth:Pt,flex:10,headerName:e("Grid.Headers.Basic.HEAL")},{field:"SHIELD",valueFormatter:$.floor,minWidth:Pt,flex:10,headerName:e("Grid.Headers.Basic.SHIELD")},{field:"WEIGHT",valueFormatter:$.floor,minWidth:Jo,flex:10,headerName:e("Grid.Headers.Basic.WEIGHT")},{field:"BASIC",valueFormatter:$.floor,minWidth:at,flex:12,headerName:e("Grid.Headers.Basic.BASIC")},{field:"SKILL",valueFormatter:$.floor,minWidth:at,flex:12,headerName:e("Grid.Headers.Basic.SKILL")},{field:"ULT",valueFormatter:$.floor,minWidth:at,flex:12,headerName:e("Grid.Headers.Basic.ULT")},{field:"FUA",valueFormatter:$.floor,minWidth:at,flex:12,headerName:e("Grid.Headers.Basic.FUA")},{field:"MEMO_SKILL",valueFormatter:$.floor,minWidth:at,flex:12,headerName:e("Grid.Headers.Basic.MEMO_SKILL")},{field:"MEMO_TALENT",valueFormatter:$.floor,minWidth:at,flex:12,headerName:e("Grid.Headers.Basic.MEMO_TALENT")},{field:"DOT",valueFormatter:$.floor,minWidth:at,flex:12,headerName:e("Grid.Headers.Basic.DOT")},{field:"BREAK",valueFormatter:$.floor,minWidth:He,flex:12,headerName:e("Grid.Headers.Basic.BREAK")},{field:"COMBO",valueFormatter:$.floor,minWidth:Qo,flex:13,headerName:e("Grid.Headers.Basic.COMBO")}]}function lD(e){return[{field:"relicSetIndex",cellRenderer:$.relicSet,width:72,headerName:e("Grid.Headers.Combat.Set")},{field:"ornamentSetIndex",cellRenderer:$.ornamentSet,width:42,headerName:e("Grid.Headers.Combat.Set")},{field:"xATK",valueFormatter:$.floor,minWidth:He,flex:10,cellStyle:Be.getOptimizerColumnGradient,headerName:e("Grid.Headers.Combat.ATK")},{field:"xDEF",valueFormatter:$.floor,minWidth:He,flex:10,cellStyle:Be.getOptimizerColumnGradient,headerName:e("Grid.Headers.Combat.DEF")},{field:"xHP",valueFormatter:$.floor,minWidth:He,flex:10,cellStyle:Be.getOptimizerColumnGradient,headerName:e("Grid.Headers.Combat.HP")},{field:"xSPD",valueFormatter:$.tenths,minWidth:He,flex:10,cellStyle:Be.getOptimizerColumnGradient,headerName:e("Grid.Headers.Combat.SPD")},{field:"xCR",valueFormatter:$.x100Tenths,minWidth:He,flex:10,cellStyle:Be.getOptimizerColumnGradient,headerName:e("Grid.Headers.Combat.CR")},{field:"xCD",valueFormatter:$.x100Tenths,minWidth:He,flex:10,cellStyle:Be.getOptimizerColumnGradient,headerName:e("Grid.Headers.Combat.CD")},{field:"xEHR",valueFormatter:$.x100Tenths,minWidth:He,flex:10,cellStyle:Be.getOptimizerColumnGradient,headerName:e("Grid.Headers.Combat.EHR")},{field:"xRES",valueFormatter:$.x100Tenths,minWidth:Pt,flex:10,cellStyle:Be.getOptimizerColumnGradient,headerName:e("Grid.Headers.Combat.RES")},{field:"xBE",valueFormatter:$.x100Tenths,minWidth:He,flex:10,cellStyle:Be.getOptimizerColumnGradient,headerName:e("Grid.Headers.Combat.BE")},{field:"xOHB",valueFormatter:$.x100Tenths,minWidth:Pt,flex:10,headerName:e("Grid.Headers.Combat.OHB")},{field:"xERR",valueFormatter:$.x100Tenths,minWidth:Pt,flex:10,headerName:e("Grid.Headers.Combat.ERR")},{field:"xELEMENTAL_DMG",valueFormatter:$.x100Tenths,minWidth:He,flex:10,headerName:e("Grid.Headers.Combat.DMG")},{field:"EHP",valueFormatter:$.floor,minWidth:He,flex:10,headerName:e("Grid.Headers.Combat.EHP")},{field:"HEAL",valueFormatter:$.floor,minWidth:Pt,flex:10,headerName:e("Grid.Headers.Combat.HEAL")},{field:"SHIELD",valueFormatter:$.floor,minWidth:Pt,flex:10,headerName:e("Grid.Headers.Combat.SHIELD")},{field:"WEIGHT",valueFormatter:$.floor,minWidth:Jo,flex:10,headerName:e("Grid.Headers.Combat.WEIGHT")},{field:"BASIC",valueFormatter:$.floor,minWidth:at,flex:12,headerName:e("Grid.Headers.Combat.BASIC")},{field:"SKILL",valueFormatter:$.floor,minWidth:at,flex:12,headerName:e("Grid.Headers.Combat.SKILL")},{field:"ULT",valueFormatter:$.floor,minWidth:at,flex:12,headerName:e("Grid.Headers.Combat.ULT")},{field:"FUA",valueFormatter:$.floor,minWidth:at,flex:12,headerName:e("Grid.Headers.Combat.FUA")},{field:"MEMO_SKILL",valueFormatter:$.floor,minWidth:at,flex:12,headerName:e("Grid.Headers.Combat.MEMO_SKILL")},{field:"MEMO_TALENT",valueFormatter:$.floor,minWidth:at,flex:12,headerName:e("Grid.Headers.Combat.MEMO_TALENT")},{field:"DOT",valueFormatter:$.floor,minWidth:at,flex:12,headerName:e("Grid.Headers.Combat.DOT")},{field:"BREAK",valueFormatter:$.floor,minWidth:He,flex:12,headerName:e("Grid.Headers.Combat.BREAK")},{field:"COMBO",valueFormatter:$.floor,minWidth:Qo,flex:13,headerName:e("Grid.Headers.Combat.COMBO")}]}function cD(e){return[{field:"relicSetIndex",cellRenderer:$.relicSet,width:72,headerName:e("Grid.Headers.Combat.Set")},{field:"ornamentSetIndex",cellRenderer:$.ornamentSet,width:42,headerName:e("Grid.Headers.Combat.Set")},{field:"mxATK",valueFormatter:$.floor,minWidth:He,flex:10,cellStyle:Be.getOptimizerColumnGradient,headerName:e("Grid.Headers.Combat.ATK")+mt},{field:"mxDEF",valueFormatter:$.floor,minWidth:He,flex:10,cellStyle:Be.getOptimizerColumnGradient,headerName:e("Grid.Headers.Combat.DEF")+mt},{field:"mxHP",valueFormatter:$.floor,minWidth:He,flex:10,cellStyle:Be.getOptimizerColumnGradient,headerName:e("Grid.Headers.Combat.HP")+mt},{field:"mxSPD",valueFormatter:$.tenths,minWidth:He,flex:10,cellStyle:Be.getOptimizerColumnGradient,headerName:e("Grid.Headers.Combat.SPD")+mt},{field:"mxCR",valueFormatter:$.x100Tenths,minWidth:He,flex:10,cellStyle:Be.getOptimizerColumnGradient,headerName:e("Grid.Headers.Combat.CR")+mt},{field:"mxCD",valueFormatter:$.x100Tenths,minWidth:He,flex:10,cellStyle:Be.getOptimizerColumnGradient,headerName:e("Grid.Headers.Combat.CD")+mt},{field:"mxEHR",valueFormatter:$.x100Tenths,minWidth:He,flex:10,cellStyle:Be.getOptimizerColumnGradient,headerName:e("Grid.Headers.Combat.EHR")+mt},{field:"mxRES",valueFormatter:$.x100Tenths,minWidth:Pt,flex:10,cellStyle:Be.getOptimizerColumnGradient,headerName:e("Grid.Headers.Combat.RES")+mt},{field:"mxBE",valueFormatter:$.x100Tenths,minWidth:He,flex:10,cellStyle:Be.getOptimizerColumnGradient,headerName:e("Grid.Headers.Combat.BE")+mt},{field:"mxOHB",valueFormatter:$.x100Tenths,minWidth:Pt,flex:10,headerName:e("Grid.Headers.Combat.OHB")+mt},{field:"mxERR",valueFormatter:$.x100Tenths,minWidth:Pt,flex:10,headerName:e("Grid.Headers.Combat.ERR")+mt},{field:"mxELEMENTAL_DMG",valueFormatter:$.x100Tenths,minWidth:He,flex:10,headerName:e("Grid.Headers.Combat.DMG")+mt},{field:"mxEHP",valueFormatter:$.floor,minWidth:He,flex:10,headerName:e("Grid.Headers.Combat.EHP")},{field:"HEAL",valueFormatter:$.floor,minWidth:Pt,flex:10,headerName:e("Grid.Headers.Combat.HEAL")},{field:"SHIELD",valueFormatter:$.floor,minWidth:Pt,flex:10,headerName:e("Grid.Headers.Combat.SHIELD")},{field:"WEIGHT",valueFormatter:$.floor,minWidth:Jo,flex:10,headerName:e("Grid.Headers.Combat.WEIGHT")},{field:"BASIC",valueFormatter:$.floor,minWidth:at,flex:12,headerName:e("Grid.Headers.Combat.BASIC")},{field:"SKILL",valueFormatter:$.floor,minWidth:at,flex:12,headerName:e("Grid.Headers.Combat.SKILL")},{field:"ULT",valueFormatter:$.floor,minWidth:at,flex:12,headerName:e("Grid.Headers.Combat.ULT")},{field:"FUA",valueFormatter:$.floor,minWidth:at,flex:12,headerName:e("Grid.Headers.Combat.FUA")},{field:"MEMO_SKILL",valueFormatter:$.floor,minWidth:at,flex:12,headerName:e("Grid.Headers.Combat.MEMO_SKILL")},{field:"MEMO_TALENT",valueFormatter:$.floor,minWidth:at,flex:12,headerName:e("Grid.Headers.Combat.MEMO_TALENT")},{field:"DOT",valueFormatter:$.floor,minWidth:at,flex:12,headerName:e("Grid.Headers.Combat.DOT")},{field:"BREAK",valueFormatter:$.floor,minWidth:He,flex:12,headerName:e("Grid.Headers.Combat.BREAK")},{field:"COMBO",valueFormatter:$.floor,minWidth:Qo,flex:13,headerName:e("Grid.Headers.Combat.COMBO")}]}const uD=()=>{const{t:e}=ee("optimizerTab",{keyPrefix:"AdvancedOptions"}),a=window.store(c=>c.setCombatBuffsDrawerOpen),t=window.store(c=>c.setEnemyConfigurationsDrawerOpen),s=window.store(c=>c.setStatTracesDrawerOpen),o=window.store(c=>c.setStatTracesDrawerFocusCharacter),r=q.useWatch(c=>c.combatBuffs,window.optimizerForm),l=W.useMemo(()=>r?Object.values(r).filter(c=>c!=null).length:0,[r]);return i.jsxs(D,{vertical:!0,gap:Kt,children:[i.jsx(le,{style:{marginTop:25},children:e("Header")}),i.jsx(se,{onClick:()=>{s(!0),o(window.store.getState().optimizerTabFocusCharacter)},icon:i.jsx(Ua,{}),children:e("CustomTracesButtonText")}),i.jsx(se,{onClick:()=>a(!0),icon:i.jsx(Ua,{}),children:l?e("CombatBuffsButtonText",{activeCount:l}):e("CombatBuffsButtonTextNone")}),i.jsx(se,{onClick:()=>t(!0),icon:i.jsx(Ua,{}),children:e("EnemyConfigButtonText")})]})};function vd(){const e=Y.getFixedT(null,"gameData","Characters"),a=b.clone(V.getMetadata().characters);for(const t of Object.values(a))t.value=t.id,t.label=e(`${t.id}.LongName`);return Object.values(a).sort((t,s)=>t.label.localeCompare(s.label,tn()))}function dD(e){const a=Y.getFixedT(null,"gameData","Lightcones"),t=b.clone(V.getMetadata().lightCones);let s=null;for(const o of Object.values(t))o.value=o.id,o.label=a(`${o.id}.Name`);return Object.values(t).filter(o=>!s).sort((o,r)=>o.label.localeCompare(r.label,tn()))}const{useToken:mD}=Xt,{Paragraph:fD}=_e,hD=100,SD=150,Hd=e=>i.jsxs("div",{children:[i.jsx("img",{width:e.innerW,src:e.imgSrc,style:{transform:`translate(${(e.innerW-hD)/2/e.innerW*-100}%, ${(e.innerH-SD)/2/e.innerH*-100}%)`}}),i.jsx(fD,{ellipsis:{rows:e.rows},style:{position:"absolute",bottom:0,left:0,width:"110%",textAlign:"center",background:"#282B31",color:"#D0D0D2",marginLeft:"-5%",paddingLeft:10,paddingRight:10,lineHeight:"16px",height:18*e.rows,alignItems:"center",marginBottom:0,fontSize:13},children:i.jsx("div",{style:{position:"relative",top:"50%",transform:"translateY(-50%)",maxHeight:18*e.rows,textOverflow:"ellipsis",overflow:"hidden"},children:e.text})})]});function Vl(){return Object.keys(Pa).map(e=>({key:e,display:i.jsx("img",{style:{width:32},src:Q.getPath(e)})}))}function pD(){return[5,4,3].map(e=>{const a=[];for(let t=0;t<e;t++)a.push(i.jsx("img",{style:{width:16},src:Q.getStar()},t));return{key:e,display:i.jsx(D,{flex:1,justify:"center",align:"center",style:{marginTop:1},children:a})}})}function Fd(){return Object.keys(Di).map(e=>({key:e,display:i.jsx("img",{style:{width:30},src:Q.getElement(e)})}))}function es(e){const{token:a}=mD(),{currentFilters:t,name:s,flexBasis:o,tags:r,setCurrentFilters:l}=e,c=t[s],u=(d,m)=>{const h=m?[...c,d]:c.filter(C=>C!=d),g=b.clone(t);g[s]=h,console.log("filters",s,g),l(g)};return i.jsx(D,{style:{flexWrap:"wrap",flexGrow:1,backgroundColor:a.colorBgContainer,boxShadow:`0px 0px 0px 1px ${a.colorBorder} inset`,borderRadius:6,overflow:"hidden",height:40},children:r.map(d=>i.jsx(Tu,{checked:xn(c,d.key),onChange:m=>u(d.key,m),style:{flex:1,flexBasis:o,boxShadow:`1px 1px 1px 0px ${a.colorBorder}`,backgroundColor:xn(c,d.key)?a.colorPrimary:"transparent"},children:i.jsx(D,{align:"center",justify:"space-around",style:{height:"100%"},children:d.display})},d.key))})}const gD=100,bD=150,DD=150,CD=170,ED="linear-gradient(#8A6700 0px, #D6A100 63px, #D6A100 130px, #282B31 130px, #282B31 150px)",TD="linear-gradient(#5F388C 0px, #9F6CD9 63px, #9F6CD9 130px, #282B31 130px, #282B31 150px)",Yc={rarity:[],path:[],element:[],name:""},ts=({value:e,onChange:a,selectStyle:t,multipleSelect:s,withIcon:o,externalOpen:r,setExternalOpen:l})=>{const c=W.useRef(null),{t:u}=ee("modals",{keyPrefix:"CharacterSelect"}),[d,m]=W.useState(!1),[h,g]=W.useState(J.clone(Yc)),C=W.useMemo(()=>vd(),[u]),[M,x]=W.useState(new Map),O=window.store(N=>N.excludedRelicPotentialCharacters),H=[];for(const N of C)H.push({value:N.value,label:i.jsxs(D,{gap:5,align:"center",children:[i.jsx("img",{src:Q.getCharacterAvatarById(N.value),style:{height:22,marginRight:4}}),N.label]})});W.useEffect(()=>{if((d||r)&&(setTimeout(()=>{var N;return(N=c==null?void 0:c.current)==null?void 0:N.focus()},100),s)){const N=new Map(O.map(U=>[U,!0]));x(N)}},[d,r]);function _(N){return!(h.element.length&&!h.element.includes(N.element)||h.path.length&&!h.path.includes(N.path)||!N.label.toLowerCase().includes(h.name))}const A=N=>{s?(M.set(N,!M.get(N)),x(new Map(M))):(m(!1),l&&l(!1),a&&a(N))},L=()=>{const N=new Map(M);C.filter(_).forEach(U=>N.set(U.id,!0)),x(N)},v=()=>{const N=new Map(M);C.filter(_).forEach(U=>N.delete(U.id)),x(N)};return i.jsxs(i.Fragment,{children:[i.jsx(ne,{style:t,value:e,options:o?H:C,placeholder:u(s?"MultiSelect.Placeholder":"SingleSelect.Placeholder"),allowClear:!0,maxTagCount:0,maxTagPlaceholder:()=>i.jsx("span",{children:O.length?u("MultiSelect.MaxTagPlaceholderSome",{count:O.length}):u("MultiSelect.MaxTagPlaceholderNone")}),onClear:()=>{a&&a(null)},onDropdownVisibleChange:N=>{N&&(m(!0),g(J.clone(Yc)))},dropdownStyle:{display:"none"},suffixIcon:null,mode:s?"multiple":void 0}),i.jsx(Vt,{open:d||r,centered:!0,destroyOnClose:!0,width:"90%",style:{height:"80%",maxWidth:1450},title:u(s?"MultiSelect.ModalTitle":"SingleSelect.ModalTitle"),onCancel:()=>{s&&a&&a(M),m(!1),l&&l(!1)},footer:null,children:i.jsxs(D,{vertical:!0,gap:12,style:{minWidth:350},children:[i.jsxs(D,{gap:12,wrap:"wrap",children:[i.jsxs(D,{wrap:"nowrap",style:{flexGrow:1},gap:10,children:[i.jsx(qt,{size:"large",style:{height:40,flex:1},placeholder:u("SearchPlaceholder"),ref:c,onChange:N=>{const U=J.clone(h);U.name=N.target.value.toLowerCase(),g(U)},onPressEnter:()=>{const N=C.filter(_)[0];N&&A(N.id)}}),s&&i.jsxs(D,{gap:12,children:[i.jsx(se,{onClick:L,style:{height:"100%",width:120},children:u("ExcludeButton")}),i.jsx(se,{onClick:v,style:{height:"100%",width:120},children:u("ClearButton")})]})]}),i.jsxs(D,{wrap:"wrap",style:{minWidth:350,flexGrow:1},gap:12,children:[i.jsx(D,{wrap:"wrap",style:{minWidth:350,flexGrow:1},children:i.jsx(es,{name:"element",tags:Fd(),flexBasis:"14.2%",currentFilters:h,setCurrentFilters:g})}),i.jsx(D,{wrap:"wrap",style:{minWidth:350,flexGrow:1},children:i.jsx(es,{name:"path",tags:Vl(),flexBasis:"12.5%",currentFilters:h,setCurrentFilters:g})})]})]}),i.jsx("div",{style:{display:"grid",gridTemplateColumns:`repeat(auto-fill, minmax(${gD}px, 1fr))`,gridGap:8},children:C.sort(J.sortRarityDesc).filter(_).map(N=>i.jsx(hi,{hoverable:!0,style:{background:N.rarity===5?ED:TD,overflow:"hidden",height:`${bD}px`,...M.get(N.id)?{opacity:.25,background:"grey"}:{}},styles:{body:{padding:1}},onMouseDown:()=>A(N.id),children:i.jsx(Hd,{imgSrc:Q.getCharacterPreviewById(N.id),text:N.label,innerW:DD,innerH:CD,rows:1})},N.id))})]})})]})},RD="linear-gradient(#8A6700 0px, #D6A100 63px, #D6A100 112px, #282B31 112px, #282B31 150px)",BD="linear-gradient(#5F388C 0px, #9F6CD9 63px, #9F6CD9 112px, #282B31 112px, #282B31 150px)",ID="linear-gradient(#2d4cc5 0px, #4A85C8 63px, #4A85C8 112px, #282B31 112px, #282B31 150px)",yD={5:RD,4:BD,3:ID},MD=100,GD=150,PD=115,_D=150,Zl=({characterId:e,value:a,onChange:t,selectStyle:s,initialPath:o,withIcon:r,externalOpen:l,setExternalOpen:c})=>{const u=V.getMetadata(),[d,m]=W.useState(!1),{t:h}=ee("modals",{keyPrefix:"LightconeSelect"}),g=W.useMemo(()=>({rarity:[],path:o??(e?[u.characters[e].path]:[]),name:""}),[e,o]),C=W.useRef(null),[M,x]=W.useState(J.clone(g)),O=W.useMemo(()=>dD(),[h]),H=W.useMemo(()=>{const L=[];for(const v of O)L.push({value:v.value,label:i.jsxs(D,{gap:5,align:"center",children:[i.jsx("img",{src:Q.getPath(u.lightCones[v.value].path),style:{height:22,marginRight:4}}),v.label]})});return L},[O]);W.useEffect(()=>{(d||l)&&setTimeout(()=>{var L;return(L=C==null?void 0:C.current)==null?void 0:L.focus()},100)},[d,l]);function _(L){return!(M.rarity.length&&!M.rarity.includes(L.rarity)||M.path.length&&!M.path.includes(L.path)||!L.name.toLowerCase().includes(M.name))}const A=L=>{m(!1),c&&c(!1),t&&t(L)};return i.jsxs(i.Fragment,{children:[i.jsx(ne,{style:s,value:a,options:r?H:O,placeholder:h("Placeholder"),allowClear:!0,onClear:()=>{t&&t(null)},onDropdownVisibleChange:L=>{L&&(m(!0),x(J.clone(g)))},dropdownStyle:{display:"none"},suffixIcon:null}),i.jsx(Vt,{open:d||l,centered:!0,width:"90%",style:{height:"70%",maxWidth:1200},destroyOnClose:!0,title:h("Title"),onCancel:()=>{m(!1),c&&c(!1)},footer:null,children:i.jsxs(D,{vertical:!0,gap:12,children:[i.jsxs(D,{gap:12,wrap:"wrap",children:[i.jsx(D,{vertical:!0,wrap:"wrap",style:{minWidth:300,flexGrow:1},children:i.jsx(qt,{size:"large",style:{height:40},placeholder:h("Placeholder"),ref:C,onChange:L=>{const v=J.clone(M);v.name=L.target.value.toLowerCase(),x(v)},onPressEnter:()=>{const L=O.filter(_)[0];L&&A(L.id)}})}),i.jsxs(D,{wrap:"wrap",style:{flexGrow:1},gap:12,children:[i.jsx(D,{wrap:"wrap",style:{minWidth:350,flexGrow:1},children:i.jsx(es,{name:"path",tags:Vl(),flexBasis:"12.5%",currentFilters:M,setCurrentFilters:x})}),i.jsx(D,{wrap:"wrap",style:{minWidth:350,flexGrow:1},children:i.jsx(es,{name:"rarity",tags:pD(),flexBasis:"14.2%",currentFilters:M,setCurrentFilters:x})})]})]}),i.jsx("div",{style:{display:"grid",gridTemplateColumns:`repeat(auto-fill, minmax(${MD}px, 1fr))`,gridGap:8},children:O.sort(J.sortRarityDesc).filter(_).map(L=>i.jsx(hi,{hoverable:!0,style:{background:yD[L.rarity],overflow:"hidden",height:`${GD}px`},onMouseDown:()=>A(L.id),styles:{body:{padding:1}},children:i.jsx(Hd,{imgSrc:Q.getLightConeIconById(L.id),text:L.label,innerW:PD,innerH:_D,rows:2})},L.id))})]})})]})};function AD(){const{t:e}=ee(["optimizerTab","common"]),a=window.store(g=>g.optimizerTabFocusCharacter),t=window.store(g=>g.setOptimizerTabFocusCharacter),s=window.store(g=>g.setOptimizerFormCharacterEidolon),o=window.store(g=>g.setOptimizerFormSelectedLightCone),r=window.store(g=>g.setOptimizerFormSelectedLightConeSuperimposition),l=window.store(g=>g.optimizerTabFocusCharacterSelectModalOpen),c=window.store(g=>g.setOptimizerTabFocusCharacterSelectModalOpen);W.useEffect(()=>{de.updateCharacter(a)},[a]);const u=W.useMemo(()=>{const g=[];for(let C=0;C<=6;C++)g.push({value:C,label:e("common:EidolonNShort",{eidolon:C})});return g},[e]),d=W.useMemo(()=>{const g=[];for(let C=1;C<=5;C++)g.push({value:C,label:e("common:SuperimpositionNShort",{superimposition:C})});return g},[e]),m=W.useMemo(()=>{const g=[];for(let C=64;C<=65536;C=C*2)g.push({value:C,label:e("ResultLimitN",{limit:C})});return g},[e]),h=W.useMemo(()=>[{label:e("SortOptions.DMGLabel"),options:[{value:k.COMBO.key,label:e("SortOptions.COMBO")},{value:k.BASIC.key,label:e("SortOptions.BASIC")},{value:k.SKILL.key,label:e("SortOptions.SKILL")},{value:k.ULT.key,label:e("SortOptions.ULT")},{value:k.FUA.key,label:e("SortOptions.FUA")},{value:k.MEMO_SKILL.key,label:e("SortOptions.MEMO_SKILL")},{value:k.MEMO_TALENT.key,label:e("SortOptions.MEMO_TALENT")},{value:k.DOT.key,label:e("SortOptions.DOT")},{value:k.BREAK.key,label:e("SortOptions.BREAK")},{value:k.HEAL.key,label:e("SortOptions.HEAL")},{value:k.SHIELD.key,label:e("SortOptions.SHIELD")}]},{label:e("SortOptions.StatLabel"),options:[{value:k.HP.key,label:e("SortOptions.HP")},{value:k.ATK.key,label:e("SortOptions.ATK")},{value:k.DEF.key,label:e("SortOptions.DEF")},{value:k.SPD.key,label:e("SortOptions.SPD")},{value:k.CR.key,label:e("SortOptions.CR")},{value:k.CD.key,label:e("SortOptions.CD")},{value:k.EHR.key,label:e("SortOptions.EHR")},{value:k.RES.key,label:e("SortOptions.RES")},{value:k.BE.key,label:e("SortOptions.BE")},{value:k.OHB.key,label:e("SortOptions.OHB")},{value:k.ERR.key,label:e("SortOptions.ERR")},{value:k.ELEMENTAL_DMG.key,label:e("SortOptions.DMG")},{value:k.EHP.key,label:e("SortOptions.EHP")}]}],[e]);return i.jsxs(D,{vertical:!0,gap:Kt,children:[i.jsxs(D,{justify:"space-between",align:"center",children:[i.jsx(le,{children:e("CharacterSelector.Character")}),i.jsx(_t,{type:Rt.character()})]}),i.jsxs(D,{gap:Kt,children:[i.jsx(q.Item,{name:"characterId",children:i.jsx(ts,{value:"",selectStyle:{width:151},onChange:t,externalOpen:l,setExternalOpen:c})}),i.jsx(q.Item,{name:"characterEidolon",children:i.jsx(ne,{showSearch:!0,style:{width:55},options:u,onChange:s,placeholder:e("CharacterSelector.EidolonPlaceholder"),popupMatchSelectWidth:55,suffixIcon:null})})]}),i.jsxs(D,{justify:"space-between",align:"center",children:[i.jsx(le,{children:e("CharacterSelector.Lightcone")}),i.jsx(_t,{type:Rt.lightCone()})]}),i.jsx(D,{vertical:!0,gap:Kt,children:i.jsxs(D,{gap:Kt,children:[i.jsx(q.Item,{name:"lightCone",children:i.jsx(Zl,{value:"",selectStyle:{width:151},characterId:a,onChange:o})}),i.jsx(q.Item,{name:"lightConeSuperimposition",children:i.jsx(ne,{showSearch:!0,style:{width:55},onChange:r,options:d,placeholder:e("CharacterSelector.SuperimpositionPlaceholder"),popupMatchSelectWidth:55,suffixIcon:null})})]})}),i.jsx(D,{justify:"space-between",align:"center",style:{marginTop:30},children:i.jsx(le,{children:e("CharacterSelector.Presets")})}),i.jsx(bE,{}),i.jsx(D,{justify:"space-between",align:"center",style:{marginTop:30},children:i.jsx(le,{children:e("CharacterSelector.Target")})}),i.jsx(q.Item,{name:"resultsLimit",children:i.jsx(ne,{showSearch:!0,style:{width:Ca},options:m,placeholder:e("CharacterSelector.ResultsPlaceholder"),listHeight:800})}),i.jsx(q.Item,{name:"resultSort",children:i.jsx(ne,{showSearch:!0,style:{width:Ca},options:h,listHeight:900,popupMatchSelectWidth:250,placeholder:e("CharacterSelector.TargetPlaceholder"),filterOption:J.labelFilterOption})})]})}const qe=22,lt=8,Hs=280*3+lt*2,mn=198*2+lt,xD=1024,LD=240,OD=280,wd=250,vD=1260/902*wd,HD=240,Mo=zt(ma)`
    width: 60px
`,{Text:FD}=_e,wD=()=>{const{t:e}=ee("optimizerTab",{keyPrefix:"CombatBuffs"}),a=window.store(o=>o.combatBuffsDrawerOpen),t=window.store(o=>o.setCombatBuffsDrawerOpen),s=W.useMemo(()=>Object.values(Vo).map(o=>i.jsx(kD,{title:e(`${o.key}`),name:o.key},o.key)),[e]);return i.jsx(Si,{title:e("Title"),placement:"right",onClose:()=>t(!1),open:a,width:300,forceRender:!0,children:i.jsx(D,{vertical:!0,gap:lt,children:i.jsx(D,{vertical:!0,gap:Kt,children:s})})})};function kD(e){return i.jsxs(D,{justify:"space-between",children:[i.jsx(FD,{children:e.title}),i.jsx(q.Item,{name:["combatBuffs",e.name],children:i.jsx(Mo,{size:"small",controls:!1})})]})}function KD(){const e=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${e}px`,document.body.style.width="100%"}function ND(){const e=parseInt(document.body.style.top||"0")*-1;document.body.style.position="",document.body.style.top="",document.body.style.width="",window.scrollTo(0,e)}function Is(e){const{value:a,label:t,closable:s,onClose:o}=e,r=typeof t=="string"?t.replace(/[^0-9+]/g,""):null;return a?i.jsx(Zi,{closable:s,onClose:o,style:{display:"flex",flexDirection:"row",paddingInline:"1px",marginInlineEnd:"4px",height:21,alignItems:"center",overflow:"hidden"},children:i.jsx(D,{children:i.jsx("img",{title:a,src:Q.getSetImage(a,f.Parts.PlanarSphere),style:{width:24,height:24}})})}):i.jsx(Zi,{closable:s,onClose:o,children:i.jsx(D,{children:r})})}const zl=()=>Object.values(bi).filter(e=>!zi[e]).map(e=>({value:e,label:i.jsxs(D,{gap:5,align:"center",children:[i.jsx("img",{src:Q.getSetImage(e,f.Parts.PlanarSphere),style:{width:21,height:21}}),i.jsx("div",{style:{display:"inline-block",overflow:"hidden",textOverflow:"ellipsis",width:250,whiteSpace:"nowrap"},children:Y.t(`common:RelicSets.${pt[e]}.Name`)})]})})),UD=()=>{const e=Y.getFixedT(null,"optimizerTab","RelicSetSelector"),a=Y.getFixedT(null,"gameData","RelicSets"),t=[{value:_a.relic4Piece,label:e("4pcLabel"),children:[]},{value:_a.relic2Plus2Piece,label:e("2+2pcLabel"),children:[]},{value:_a.relic2PlusAny,label:e("2pcLabel"),children:[]}],s=Object.entries(f.SetsRelics).filter(r=>!zi[r[1]]).map(r=>({value:r[1],label:r[1]})),o=(r,l,c)=>{const u=r=="Any"?Q.getBlank():Q.getSetImage(r,f.Parts.Head);return i.jsxs(D,{gap:5,align:"center",children:[i.jsx("img",{src:u,style:{width:26,height:26}}),i.jsx("div",{style:{display:"inline-block",overflow:"hidden",textOverflow:"ellipsis",width:250,whiteSpace:"nowrap"},children:l+c})]})};for(const r of Object.entries(f.SetsRelics).filter(l=>!zi[l[1]]))t[0].children.push({value:r[1],label:o(r[1],"(4) ",a(`${pt[r[1]]}.Name`))}),t[1].children.push({value:r[1],label:o(r[1],"(2) ",a(`${pt[r[1]]}.Name`)),children:s.map(l=>({value:l.value,label:o(l.value,"(2) ",a(`${pt[l.label]}.Name`))}))}),t[2].children.push({value:r[1],label:o(r[1],"(2) ",a(`${pt[r[1]]}.Name`))});return t},tl=()=>{const e=Y.getFixedT(null,"gameData","RelicSets");return Object.values(f.SetsRelics).filter(a=>!zi[a]).map(a=>({value:a,label:i.jsxs(D,{gap:5,align:"center",children:[i.jsx("img",{src:Q.getSetImage(a,f.Parts.Head),style:{width:21,height:21}}),i.jsx("div",{style:{display:"inline-block",overflow:"hidden",textOverflow:"ellipsis",width:250,whiteSpace:"nowrap"},children:e(`${pt[a]}.Name`)})]})}))};function Zt(e){return i.jsx("a",{href:e.url,target:"_blank",onClick:e.onClick,rel:"noreferrer",children:i.jsxs("span",{style:{display:"inline-flex",gap:"4px",alignItems:"center",textDecoration:e.noUnderline?"":"underline",color:"#91bfff"},children:[e.text,e.linkIcon&&i.jsx(Ru,{}),e.externalIcon&&i.jsx(Bu,{})]})})}const Go={fontSize:20};function jD(){const e=window.store(c=>c.comboDrawerOpen),a=window.store(c=>c.setComboDrawerOpen),t=window.store(c=>c.formValues),s=window.store(c=>c.comboState),o=window.store(c=>c.setComboState),r=W.useRef(!0),l=W.useRef(void 0);return W.useEffect(()=>{if(e){KD();const c=de.getForm();if(!(c!=null&&c.characterId)||!c.characterConditionals)return;const u=Bo(c,!0);o(u)}else ND(),xl(s)},[t,e]),i.jsx(Si,{title:i.jsx(WD,{}),placement:"right",onClose:()=>a(!1),open:e,width:1125,className:".comboDrawer",extra:i.jsx(D,{style:{width:716},align:"center",children:i.jsx(XD,{comboState:s})}),children:i.jsxs("div",{style:{width:1050,height:"100%"},children:[i.jsx(QD,{comboState:s}),i.jsx(lf,{className:"selecto-selection",selectableTargets:[".selectable"],selectByClick:!0,selectFromInside:!0,continueSelect:!0,keyContainer:window,hitRate:0,onDrag:c=>{const u=c.inputEvent.srcElement.getAttribute("data-key")??"{}";u!=l.current&&(Oc(u,s),l.current=u)},onDragStart:c=>{const u=c.inputEvent.srcElement.getAttribute("data-key")??"{}",d=Al(u,s);r.current=!(d&&d.value),l.current=void 0},onSelect:c=>{const u={...s};c.added.forEach(m=>{Lc(Jc(m),r.current,u)}),c.removed.forEach(m=>{Lc(Jc(m),r.current,u)});const d=c.inputEvent.srcElement.getAttribute("data-key")??"{}";d!=l.current&&(Oc(d,s),l.current=d),o(u)}})]})})}function WD(){const{t:e}=ee("optimizerTab",{keyPrefix:"ComboDrawer"});return i.jsx("div",{style:{width:"fit-content"},children:i.jsx(Zt,{text:e("Title"),url:"https://github.com/fribbels/hsr-optimizer/blob/main/docs/guides/en/advanced-rotations.md",linkIcon:!0})})}function VD(e){return e.index==0?i.jsx(i.Fragment,{}):i.jsx(ne,{dropdownStyle:{width:"fit-content"},style:{width:kd},listHeight:800,optionLabelProp:"display",options:e.abilitySelectOptions,placement:"bottomLeft",value:e.comboAbilities[e.index],allowClear:!0,onSelect:a=>{Hc(e.index,a)},onDeselect:a=>{},onClear:()=>{Hc(e.index,null)}})}const kd=70,ZD=6,zD=[{value:"BASIC",label:"Basic"},{value:"SKILL",label:"Skill"},{value:"ULT",label:"Ult"},{value:"FUA",label:"Fua"},{value:"MEMO_SKILL",label:"MemoSkill"},{value:"MEMO_TALENT",label:"MemoTalent"}];function XD(e){const{t:a}=ee("optimizerTab",{keyPrefix:"ComboFilter.ComboOptions"}),t=e.comboState.comboAbilities,s=W.useMemo(()=>{const l=[];for(const c of zD)l.push({value:c.value,label:a(`${c.label}`),display:a(`${c.label}`)});return l},[a]);if(!t)return i.jsx(i.Fragment,{});const o=t.length,r=Array(Math.min(9,o+1)).fill(!1).map((l,c)=>i.jsx(VD,{comboAbilities:t,index:c,abilitySelectOptions:s},c));return i.jsxs(D,{gap:ZD,children:[i.jsx("div",{style:{width:kd}}),r]})}function Jc(e){return e.getAttribute("data-key")??"{}"}function eo(e){return i.jsx(Ut,{plain:!0,children:e.text})}function Qc(e){return i.jsx(ne,{dropdownStyle:{width:300},listHeight:800,mode:"multiple",allowClear:!0,style:{flex:1},options:e.options,tagRender:Is,placeholder:e.placeholder,maxTagCount:"responsive",placement:"topRight",value:e.selected??[],onSelect:a=>{[...e.selected],e.submit([...e.selected,a])},onDeselect:a=>{const t=e.selected.filter(s=>s!==a);e.submit(t)},onClear:()=>{e.submit([])}})}function YD(e){var r,l;const{t:a,i18n:t}=ee("optimizerTab",{keyPrefix:"ComboDrawer.Placeholders"}),s=W.useMemo(()=>zl(),[t.resolvedLanguage]),o=W.useMemo(()=>tl(),[t.resolvedLanguage]);return i.jsxs(D,{style:{width:"100%"},gap:10,children:[i.jsx(Qc,{selected:(r=e.comboOrigin)==null?void 0:r.displayedRelicSets,options:o,placeholder:a("Sets"),submit:c=>{vc(c,!1)}}),i.jsx(Qc,{selected:(l=e.comboOrigin)==null?void 0:l.displayedOrnamentSets,options:s,placeholder:a("Ornaments"),submit:c=>{vc(c,!0)}})]})}function JD(e){var o,r;const a=((o=e.comboOrigin)==null?void 0:o.displayedRelicSets)||[],t=((r=e.comboOrigin)==null?void 0:r.displayedOrnamentSets)||[],s=[...a,...t].map(l=>i.jsx(Jt,{comboOrigin:e.comboOrigin,conditionalType:l,actionCount:e.actionCount,originKey:e.originKey},l));return i.jsx(D,{vertical:!0,gap:8,children:s})}function QD(e){var c,u,d,m,h,g;const a=(c=e.comboState)==null?void 0:c.comboCharacter,t=(u=e.comboState)==null?void 0:u.comboTeammate0,s=(d=e.comboState)==null?void 0:d.comboTeammate1,o=(m=e.comboState)==null?void 0:m.comboTeammate2,r=((g=(h=e.comboState)==null?void 0:h.comboAbilities)==null?void 0:g.length)||0,{t:l}=ee("optimizerTab",{keyPrefix:"ComboDrawer"});return i.jsxs(D,{vertical:!0,gap:8,children:[i.jsx(Jt,{comboOrigin:a,actionCount:r,conditionalType:"character",originKey:"comboCharacter"}),i.jsx(Jt,{comboOrigin:a,actionCount:r,conditionalType:"lightCone",originKey:"comboCharacterLightCone"}),i.jsx(eo,{text:l("GroupHeaders.Sets")}),i.jsx(YD,{comboOrigin:a}),i.jsx(JD,{comboOrigin:a,conditionalType:"relicSets",actionCount:r,originKey:"comboCharacterRelicSets"}),i.jsx(eo,{text:l("GroupHeaders.Teammate1")}),i.jsx(Jt,{comboOrigin:t,actionCount:r,conditionalType:"character",originKey:"comboTeammate0"}),i.jsx(Jt,{comboOrigin:t,actionCount:r,conditionalType:"lightCone",originKey:"comboTeammate0LightCone"}),i.jsx(Jt,{comboOrigin:t,actionCount:r,conditionalType:"lightCone",originKey:"comboTeammate0RelicSet"}),i.jsx(Jt,{comboOrigin:t,actionCount:r,conditionalType:"lightCone",originKey:"comboTeammate0OrnamentSet"}),i.jsx(eo,{text:l("GroupHeaders.Teammate2")}),i.jsx(Jt,{comboOrigin:s,actionCount:r,conditionalType:"character",originKey:"comboTeammate1"}),i.jsx(Jt,{comboOrigin:s,actionCount:r,conditionalType:"lightCone",originKey:"comboTeammate1LightCone"}),i.jsx(Jt,{comboOrigin:s,actionCount:r,conditionalType:"lightCone",originKey:"comboTeammate1RelicSet"}),i.jsx(Jt,{comboOrigin:s,actionCount:r,conditionalType:"lightCone",originKey:"comboTeammate1OrnamentSet"}),i.jsx(eo,{text:l("GroupHeaders.Teammate3")}),i.jsx(Jt,{comboOrigin:o,actionCount:r,conditionalType:"character",originKey:"comboTeammate2"}),i.jsx(Jt,{comboOrigin:o,actionCount:r,conditionalType:"lightCone",originKey:"comboTeammate2LightCone"}),i.jsx(Jt,{comboOrigin:o,actionCount:r,conditionalType:"lightCone",originKey:"comboTeammate2RelicSet"}),i.jsx(Jt,{comboOrigin:o,actionCount:r,conditionalType:"lightCone",originKey:"comboTeammate2OrnamentSet"})]})}function Jt(e){const{t:a,i18n:t}=ee("gameData",{keyPrefix:"RelicSets"}),{t:s}=ee("optimizerTab",{keyPrefix:"SetConditionals.SelectOptions"}),o=W.useMemo(()=>kg(s),[s]),r=W.useMemo(()=>{var C,M;if(!e.comboOrigin)return null;let l,c,u;const d=e.originKey.includes("Teammate"),m=e.comboOrigin,h=e.comboOrigin,g=m.metadata;if(e.originKey.includes("LightCone")){const x=Sa.get(g,!0);l=d?((C=x.teammateContent)==null?void 0:C.call(x))??[]:x.content(),c=Q.getLightConeIconById(g.lightCone),u=m.lightConeConditionals}else if(e.originKey.includes("comboCharacterRelicSets")){const x=e.conditionalType,O=!qi[x].modifiable,H=m.setConditionals[x];if(H.type==he.BOOLEAN)l=[{formItem:"switch",disabled:O,id:x,name:x,text:a(`${pt[x]}.Name`),title:"",content:a(`${pt[x]}.Name`)}];else if(H.type==he.NUMBER)l=[{formItem:"slider",disabled:O,id:x,name:x,text:a(`${pt[x]}.Name`),title:"",content:a(`${pt[x]}.Name`),min:0,max:10}];else if(H.type==he.SELECT)l=[{formItem:"select",disabled:O,id:x,name:x,text:a(`${pt[x]}.Name`),title:"",content:a(`${pt[x]}.Name`),options:o[x]}];else return null;c=Q.getSetImage(x,null,!0),u=m.setConditionals}else if(e.originKey.includes("RelicSet")){const x=Object.keys(h.relicSetConditionals);if(x.length){const O=x[0];l=[{formItem:"switch",id:O,name:O,text:O,title:O,content:O}],c=Q.getSetImage(O,null,!0),u=h.relicSetConditionals}else return null}else if(e.originKey.includes("OrnamentSet")){const x=Object.keys(h.ornamentSetConditionals);if(x.length){const O=x[0];l=[{formItem:"switch",id:O,name:O,text:O,title:O,content:O}],c=Q.getSetImage(O,null,!0),u=h.ornamentSetConditionals}else return null}else{const x=Ta.get(g,!0);l=d?((M=x.teammateContent)==null?void 0:M.call(x))??[]:x.content(),c=Q.getCharacterAvatarById(g.characterId),u=m.characterConditionals}return{content:l,src:c,conditionals:u}},[e.comboOrigin,t.resolvedLanguage]);return r?i.jsxs(D,{gap:10,align:"center",style:{padding:8,background:"#677dbd1c",borderRadius:5},children:[i.jsx("img",{src:r.src,style:{width:80,height:80}}),i.jsx($D,{contentItems:r.content,comboConditionals:r.conditionals,actionCount:e.actionCount,sourceKey:e.originKey})]}):i.jsx(i.Fragment,{})}function $D(e){const{t:a,i18n:t}=ee("optimizerTab",{keyPrefix:"ComboDrawer"}),s=W.useMemo(()=>{const o=[];for(const r of e.contentItems){const l=e.comboConditionals[r.id];if(l==null)continue;const c=i.jsx(qD,{contentItem:r,comboConditional:l,actionCount:e.actionCount,sourceKey:e.sourceKey},r.id);o.push(c)}return o},[JSON.stringify(e.comboConditionals),e.actionCount,t.resolvedLanguage]);return i.jsx(D,{vertical:!0,children:s.length==0?i.jsx("div",{style:{marginLeft:5},children:a("NoConditionals")}):s})}function qD(e){return e.contentItem.formItem=="switch"?i.jsx(eC,{contentItem:e.contentItem,activations:e.comboConditional.activations,actionCount:e.actionCount,sourceKey:e.sourceKey}):e.contentItem.formItem=="select"?i.jsx(aC,{comboConditional:e.comboConditional,contentItem:e.contentItem,actionCount:e.actionCount,sourceKey:e.sourceKey}):i.jsx(tC,{comboConditional:e.comboConditional,contentItem:e.contentItem,actionCount:e.actionCount,sourceKey:e.sourceKey})}function eC(e){const a=[];for(let t=0;t<e.activations.length;t++)a.push(JSON.stringify({id:e.contentItem.id,source:e.sourceKey,index:t}));return i.jsxs(D,{style:{height:45},children:[i.jsx(nC,{contentItem:e.contentItem,sourceKey:e.sourceKey,value:e.activations[0]}),i.jsx(Nd,{activations:e.activations,actionCount:e.actionCount,dataKeys:a,partition:!1,unselectable:e.contentItem.disabled})]},e.contentItem.id)}function tC(e){const a=e.comboConditional,t=[];for(let o=0;o<a.partitions.length;o++){const r=a.partitions[o];t.push({value:r.value,display:i.jsx(Kd,{partition:r,contentItem:e.contentItem,activations:r.activations,partitionIndex:o,actionCount:e.actionCount,sourceKey:e.sourceKey},o)})}const s=t.sort((o,r)=>o.value-r.value).map(o=>o.display);return i.jsxs(D,{vertical:!0,style:{position:"relative"},children:[i.jsx(Po,{}),s,i.jsx(Po,{bottom:!0})]})}function Po(e){return i.jsx("div",{style:{position:"absolute",top:e.bottom?void 0:-1,bottom:e.bottom?0:void 0,left:0,right:0,borderTop:"1px solid #7999c8",pointerEvents:"none"}})}function aC(e){const a=e.comboConditional,t=[];for(let s=0;s<a.partitions.length;s++){const o=a.partitions[s];t.push(i.jsx(Kd,{partition:o,contentItem:e.contentItem,activations:o.activations,partitionIndex:s,actionCount:e.actionCount,sourceKey:e.sourceKey},s))}return i.jsxs(D,{vertical:!0,style:{position:"relative"},children:[i.jsx(Po,{}),t,i.jsx(Po,{bottom:!0})]})}function Kd(e){const a=[];for(let s=0;s<e.activations.length;s++)a.push(JSON.stringify({id:e.contentItem.id,source:e.sourceKey,partitionIndex:e.partitionIndex,index:s}));const t=e.contentItem.formItem=="slider"?i.jsx(iC,{contentItem:e.contentItem,value:e.partition.value,sourceKey:e.sourceKey,partitionIndex:e.partitionIndex}):i.jsx(sC,{contentItem:e.contentItem,value:e.partition.value,sourceKey:e.sourceKey,partitionIndex:e.partitionIndex});return i.jsxs(D,{style:{height:45},children:[t,i.jsx(Nd,{activations:e.activations,actionCount:e.actionCount,dataKeys:a,partition:!0})]},e.partitionIndex)}function nC(e){const a=e.contentItem;return i.jsx(D,{style:{width:250,marginRight:10},align:"center",gap:0,children:i.jsx(D,{style:{width:210},align:"center",children:i.jsx(Ad,{...a,name:a.id,title:a.text,teammateIndex:Xl(e.sourceKey),content:Us(a.content),text:a.text,removeForm:!1,set:e.sourceKey.includes("comboCharacterRelicSets"),value:e.value,disabled:e.sourceKey.includes("Teammate")&&e.sourceKey.includes("Set")||e.contentItem.disabled})})})}function Xl(e){if(e.includes("Teammate0"))return 0;if(e.includes("Teammate1"))return 1;if(e.includes("Teammate2"))return 2}function iC(e){const a=e.contentItem;return i.jsxs(D,{style:{width:250,marginRight:10},align:"center",gap:0,children:[i.jsx(D,{style:{width:210},align:"center",children:i.jsx(Ld,{...a,name:a.id,title:a.text,content:Us(a.content),teammateIndex:Xl(e.sourceKey),text:a.text,onChange:t=>gd(e.sourceKey,a.id,e.partitionIndex,t),value:e.value,removeForm:e.partitionIndex>0},e.value+e.partitionIndex)}),i.jsx(se,{type:"text",shape:"circle",icon:e.partitionIndex==0?i.jsx(Iu,{style:Go}):i.jsx(yu,{style:Go}),onClick:()=>{e.partitionIndex==0?Sd(e.sourceKey,e.contentItem.id,e.partitionIndex):pd(e.sourceKey,e.contentItem.id,e.partitionIndex)}})]})}function sC(e){const a=e.contentItem;return i.jsxs(D,{style:{width:250,marginRight:10},align:"center",gap:5,children:[i.jsx(xd,{...a,name:a.id,title:a.text,teammateIndex:Xl(e.sourceKey),content:Us(a.content),text:a.text,set:e.sourceKey.includes("comboCharacterRelicSets"),onChange:t=>gd(e.sourceKey,a.id,e.partitionIndex,t),value:e.value,removeForm:e.partitionIndex>0,fullWidth:!e.sourceKey.includes("comboCharacterRelicSets")}),i.jsx(se,{type:"text",shape:"circle",icon:e.partitionIndex==0?i.jsx(Iu,{style:Go}):i.jsx(yu,{style:Go}),onClick:()=>{e.partitionIndex==0?Sd(e.sourceKey,e.contentItem.id,e.partitionIndex):pd(e.sourceKey,e.contentItem.id,e.partitionIndex)}})]})}function Nd(e){return i.jsx(D,{children:e.activations.map((a,t)=>i.jsx(oC,{dataKey:e.dataKeys[t],active:a,disabled:t>=e.actionCount,index:t,partition:e.partition,unselectable:e.unselectable},t))})}const oC=Lt.memo(function(a){let t;return a.disabled?t="disabledSelect":(a.unselectable?t=a.active?"unselectable selected defaultShaded":"unselectable defaultShaded":t=a.active?"selectable selected":"selectable",a.index==0&&(t+=" defaultShaded"),a.partition&&a.active&&(t+=" partitionShaded")),i.jsx("div",{className:t,"data-key":a.dataKey,style:{width:75,marginLeft:-1,marginTop:-1}})},(e,a)=>e.dataKey===a.dataKey&&e.active===a.active&&e.disabled===a.disabled&&e.index===a.index&&e.partition===a.partition&&e.unselectable===a.unselectable),$c={display:"flex",flex:1,justifyContent:"center",paddingInline:0},rC=()=>{const{t:e}=ee("optimizerTab",{keyPrefix:"ComboFilter"}),{t:a}=ee("common"),t=q.useFormInstance(),s=window.store(l=>l.setComboDrawerOpen),o=q.useWatch("comboType",t),r=W.useMemo(()=>[{label:e("ComboOptions.Basic"),value:"BASIC"},{label:e("ComboOptions.Skill"),value:"SKILL"},{label:e("ComboOptions.Ult"),value:"ULT"},{label:e("ComboOptions.Fua"),value:"FUA"},{label:e("ComboOptions.MemoSkill"),value:"MEMO_SKILL"},{label:e("ComboOptions.MemoTalent"),value:"MEMO_TALENT"}],[e]);return i.jsxs(D,{vertical:!0,gap:Kt,children:[i.jsx(le,{children:e("Header")}),i.jsx(q.Item,{name:"comboType",children:i.jsx(nt.Group,{size:"small",buttonStyle:"solid",style:{width:"100%"},children:i.jsxs(D,{align:"center",children:[i.jsx(nt.Button,{style:$c,value:"simple",children:e("ModeSelector.Simple")}),i.jsx(nt.Button,{style:$c,value:"advanced",children:e("ModeSelector.Advanced")})]})})}),i.jsxs(D,{style:{width:"100%"},gap:5,children:[i.jsx(se,{size:"small",variant:"outlined",style:{flex:1},onClick:()=>lC(t),children:e("RowControls.Add")}),i.jsx(Kn,{title:a("Confirm"),description:e("RowControls.ResetConfirm.Description"),onConfirm:()=>uC(t),placement:"bottom",okText:a("Yes"),cancelText:a("Cancel"),children:i.jsx(se,{size:"small",variant:"outlined",style:{flex:1},children:a("Reset")})}),i.jsx(se,{size:"small",variant:"outlined",style:{flex:1},onClick:()=>cC(t),children:e("RowControls.Remove")})]}),i.jsx(dC,{comboOptions:r}),i.jsxs(i.Fragment,{children:[i.jsx(D,{vertical:!0,gap:8,style:{marginTop:5},children:i.jsx(se,{onClick:()=>s(!0),icon:i.jsx(Ua,{}),disabled:o=="simple",children:e("RotationButton")})}),i.jsx(q.Item,{name:"comboStateJson",style:{height:0},children:i.jsx(qt,{placeholder:"This is a fake hidden input to save combo data into the form",style:{display:"none"}})}),i.jsx(jD,{})]})]})};function lC(e){var t;const a=e.getFieldsValue();for(let s=1;s<=10;s++)if(((t=a.comboAbilities)==null?void 0:t[s])==null){e.setFieldValue(["comboAbilities",s],"BASIC");break}}function cC(e){var t;const a=e.getFieldsValue();for(let s=10;s>1;s--)if(((t=a.comboAbilities)==null?void 0:t[s])!=null){e.setFieldValue(["comboAbilities",s],null);break}}function uC(e){var l,c,u,d,m,h;const a=window.store.getState().optimizerTabFocusCharacter,t=V.getMetadata().characters[a];if(!t)return;const s=((c=(l=t.scoringMetadata)==null?void 0:l.simulation)==null?void 0:c.comboAbilities)??[null,"BASIC"],o=((d=(u=t.scoringMetadata)==null?void 0:u.simulation)==null?void 0:d.comboDot)??0,r=((h=(m=t.scoringMetadata)==null?void 0:m.simulation)==null?void 0:h.comboBreak)??0;for(let g=0;g<=10;g++)e.setFieldValue(["comboAbilities",g],s[g]??null);e.setFieldValue(["comboDot"],o),e.setFieldValue(["comboBreak"],r),e.setFieldValue(["comboStateJson"],"{}")}function dC(e){const{t:a}=ee("optimizerTab",{keyPrefix:"ComboFilter"});return i.jsxs(D,{children:[i.jsxs(D,{vertical:!0,flex:1,style:{marginLeft:2},gap:3,children:[i.jsx(le,{children:a("AbilityLabel")}),i.jsx(En,{index:1,comboOptions:e.comboOptions}),i.jsx(En,{index:2,comboOptions:e.comboOptions}),i.jsx(En,{index:3,comboOptions:e.comboOptions}),i.jsx(En,{index:4,comboOptions:e.comboOptions}),i.jsx(En,{index:5,comboOptions:e.comboOptions}),i.jsx(En,{index:6,comboOptions:e.comboOptions}),i.jsx(En,{index:7,comboOptions:e.comboOptions}),i.jsx(En,{index:8,comboOptions:e.comboOptions})]}),i.jsx(Ga,{width:10}),i.jsxs(D,{vertical:!0,gap:10,flex:1,align:"flex-start",children:[i.jsxs(D,{vertical:!0,children:[i.jsx(le,{children:a("CounterLabels.Dot")}),i.jsx(qc,{name:"comboDot"})]}),i.jsxs(D,{vertical:!0,children:[i.jsx(le,{children:a("CounterLabels.Break")}),i.jsx(qc,{name:"comboBreak"})]})]})]})}function En(e){return i.jsx(q.Item,{shouldUpdate:(a,t)=>a.comboAbilities!==t.comboAbilities,noStyle:!0,children:({getFieldValue:a})=>(a("comboAbilities")||[])[e.index]!=null||e.index<2?i.jsx(q.Item,{noStyle:!0,name:["comboAbilities",e.index],children:i.jsx(ne,{size:"small",variant:"borderless",className:"select-no-padding select-20",options:e.comboOptions,labelRender:o=>`${e.index}. ${o.label}`})}):null})}function qc(e){return i.jsx(q.Item,{name:e.name,children:i.jsx(Mo,{addonBefore:"⨯",size:"small",controls:!0,style:{width:"100%"},rootClassName:"comboInputNumber"})})}const{Text:e0}=_e,mC=()=>{const{t:e}=ee("optimizerTab",{keyPrefix:"EnemyConfiguration"}),a=window.store(u=>u.enemyConfigurationsDrawerOpen),t=window.store(u=>u.setEnemyConfigurationsDrawerOpen),s=W.useMemo(()=>{const u=[];for(let d=95;d>=1;d--)u.push({value:d,label:e("LevelOptionLabel",{level:d,defense:200+10*d})});return u},[e]),o=W.useMemo(()=>{const u=[];for(let d=1;d<=5;d+=2)u.push({value:d,label:e("CountOptionLabel",{targetCount:d})});return u},[e]),r=W.useMemo(()=>{const u=[];for(let d=20;d<=60;d+=20)u.push({value:d/100,label:e("DmgResOptionLabel",{resistance:d})});return u},[e]),l=W.useMemo(()=>{const u=[];for(let d=0;d<=40;d+=10)u.push({value:d/100,label:e("EffResOptionLabel",{resistance:d})});return u},[e]),c=W.useMemo(()=>{const u=[];for(let d=720;d>=1;d-=30)u.push({value:d,label:e("ToughnessOptionLabel",{toughness:d/3})});return u},[e]);return i.jsx(Si,{title:e("Title"),placement:"right",onClose:()=>t(!1),open:a,width:300,forceRender:!0,children:i.jsxs(D,{vertical:!0,gap:5,children:[i.jsxs(D,{justify:"space-between",align:"center",style:{marginBottom:5},children:[i.jsx(le,{children:e("StatHeader")}),i.jsx(_t,{type:Rt.enemyOptions()})]}),i.jsx(q.Item,{name:"enemyLevel",children:i.jsx(ne,{showSearch:!0,filterOption:J.labelFilterOption,options:s})}),i.jsx(q.Item,{name:"enemyResistance",children:i.jsx(ne,{showSearch:!0,filterOption:J.labelFilterOption,options:r})}),i.jsx(q.Item,{name:"enemyEffectResistance",children:i.jsx(ne,{showSearch:!0,filterOption:J.labelFilterOption,options:l})}),i.jsx(q.Item,{name:"enemyMaxToughness",children:i.jsx(ne,{showSearch:!0,filterOption:J.labelFilterOption,options:c})}),i.jsx(q.Item,{name:"enemyCount",children:i.jsx(ne,{showSearch:!0,filterOption:J.labelFilterOption,options:o})}),i.jsxs(D,{align:"center",children:[i.jsx(q.Item,{name:"enemyElementalWeak",valuePropName:"checked",children:i.jsx(vn,{checkedChildren:i.jsx(Hn,{}),unCheckedChildren:i.jsx(Qa,{}),defaultChecked:!0,style:{width:45,marginRight:5}})}),i.jsx(e0,{children:e("WeaknessLabel")})]}),i.jsxs(D,{align:"center",children:[i.jsx(q.Item,{name:"enemyWeaknessBroken",valuePropName:"checked",children:i.jsx(vn,{checkedChildren:i.jsx(Hn,{}),unCheckedChildren:i.jsx(Qa,{}),style:{width:45,marginRight:5}})}),i.jsx(e0,{children:e("BrokenLabel")})]})]})})};const{Text:Ki}=_e,_o=40,Ao=200,to=80,Ni=5;function fC(){const{t:e}=ee("optimizerTab",{keyPrefix:"SetConditionals"}),a=window.store(g=>g.conditionalSetEffectsDrawerOpen),t=window.store(g=>g.setConditionalSetEffectsDrawerOpen),s=W.useMemo(()=>{const g=[];for(let C=0;C<=5;C++)g.push({display:e("SelectOptions.Streetwise.Display",{stackCount:C}),value:C,label:e("SelectOptions.Streetwise.Label",{stackCount:C,buffValue:5*C})});return g},[e]),o=W.useMemo(()=>[{display:e("SelectOptions.Wastelander.Off.Display"),value:0,label:e("SelectOptions.Wastelander.Off.Label")},{display:e("SelectOptions.Wastelander.Debuffed.Display"),value:1,label:e("SelectOptions.Wastelander.Debuffed.Label")},{display:e("SelectOptions.Wastelander.Imprisoned.Display"),value:2,label:e("SelectOptions.Wastelander.Imprisoned.Label")}],[e]),r=W.useMemo(()=>{const g=[];for(let C=0;C<=2;C++)g.push({display:e("SelectOptions.Sacerdos.Display",{stackCount:C}),value:C,label:e("SelectOptions.Sacerdos.Label",{stackCount:C,buffValue:18*C})});return g},[e]),l=W.useMemo(()=>{const g=[];for(let C=0;C<=2;C++)g.push({display:e("SelectOptions.Longevous.Display",{stackCount:C}),value:C,label:e("SelectOptions.Longevous.Label",{stackCount:C,buffValue:8*C})});return g},[e]),c=W.useMemo(()=>{const g=[];for(let C=0;C<=8;C++)g.push({display:e("SelectOptions.Ashblazing.Display",{stackCount:C}),value:C,label:e("SelectOptions.Ashblazing.Label",{stackCount:C,buffValue:6*C})});return g},[e]),u=W.useMemo(()=>{const g=[];for(let C=0;C<=3;C++)g.push({display:e("SelectOptions.Prisoner.Display",{stackCount:C}),value:C,label:e("SelectOptions.Prisoner.Label",{stackCount:C,buffValue:6*C})});return g},[e]),d=W.useMemo(()=>[{display:e("SelectOptions.Diver.Off.Display"),value:-1,label:e("SelectOptions.Diver.Off.Label")},{display:e("SelectOptions.Diver.1Debuff.Display"),value:0,label:e("SelectOptions.Diver.1Debuff.Label")},{display:e("SelectOptions.Diver.2Debuff.Display"),value:1,label:e("SelectOptions.Diver.2Debuff.Label")},{display:e("SelectOptions.Diver.3Debuff.Display"),value:2,label:e("SelectOptions.Diver.3Debuff.Label")},{display:e("SelectOptions.Diver.2+Debuff.Display"),value:3,label:e("SelectOptions.Diver.2+Debuff.Label")},{display:e("SelectOptions.Diver.3+Debuff.Display"),value:4,label:e("SelectOptions.Diver.3+Debuff.Label")}],[e]),m=W.useMemo(()=>{const g=[];for(let C=0;C<=10;C++)g.push({display:e("SelectOptions.Sigonia.Display",{stackCount:C}),value:C,label:e("SelectOptions.Sigonia.Label",{stackCount:C,buffValue:4*C})});return g},[e]),h=W.useMemo(()=>{const g=[];for(let C=0;C<=5;C++)g.push({display:e("SelectOptions.Duran.Display",{stackCount:C}),value:C,label:e("SelectOptions.Duran.Label",{stackCount:C,buffValue:5*C})});return g[5].label=e("SelectOptions.Duran.Label5"),g},[e]);return i.jsx(Si,{title:e("Title"),placement:"right",onClose:()=>t(!1),open:a,width:750,forceRender:!0,children:i.jsxs(D,{justify:"center",children:[i.jsxs(D,{vertical:!0,gap:Ni,children:[i.jsxs(D,{gap:Ni,align:"center",justify:"flex-start",children:[i.jsx(Ki,{style:{width:_o}}),i.jsx(Ki,{style:{width:Ao}})]}),i.jsx(xe,{set:f.Sets.PasserbyOfWanderingCloud,description:e("RelicDescription",{id:101}),conditional:e("Conditionals.DefaultMessage"),p4Checked:!0}),i.jsx(xe,{set:f.Sets.MusketeerOfWildWheat,description:e("RelicDescription",{id:102}),conditional:e("Conditionals.DefaultMessage"),p4Checked:!0}),i.jsx(xe,{set:f.Sets.KnightOfPurityPalace,description:e("RelicDescription",{id:103}),conditional:e("Conditionals.DefaultMessage"),p4Checked:!0}),i.jsx(xe,{set:f.Sets.HunterOfGlacialForest,description:e("RelicDescription",{id:104}),conditional:e("Conditionals.Hunter")}),i.jsx(xe,{set:f.Sets.ChampionOfStreetwiseBoxing,selectOptions:s,description:e("RelicDescription",{id:105}),conditional:e("Conditionals.Streetwise")}),i.jsx(xe,{set:f.Sets.GuardOfWutheringSnow,description:e("RelicDescription",{id:106}),conditional:e("Conditionals.DefaultMessage"),p4Checked:!0}),i.jsx(xe,{set:f.Sets.FiresmithOfLavaForging,description:e("RelicDescription",{id:107}),conditional:e("Conditionals.Firesmith")}),i.jsx(xe,{set:f.Sets.GeniusOfBrilliantStars,description:e("RelicDescription",{id:108}),conditional:e("Conditionals.Genius")}),i.jsx(xe,{set:f.Sets.BandOfSizzlingThunder,description:e("RelicDescription",{id:109}),conditional:e("Conditionals.Thunder")}),i.jsx(xe,{set:f.Sets.EagleOfTwilightLine,description:e("RelicDescription",{id:110}),conditional:e("Conditionals.DefaultMessage"),p4Checked:!0}),i.jsx(xe,{set:f.Sets.ThiefOfShootingMeteor,description:e("RelicDescription",{id:111}),conditional:e("Conditionals.DefaultMessage"),p4Checked:!0}),i.jsx(xe,{set:f.Sets.WastelanderOfBanditryDesert,selectOptions:o,description:e("RelicDescription",{id:112}),conditional:e("Conditionals.Wastelander")}),i.jsx(xe,{set:f.Sets.LongevousDisciple,selectOptions:l,description:e("RelicDescription",{id:113}),conditional:e("Conditionals.Longevous")}),i.jsx(xe,{set:f.Sets.MessengerTraversingHackerspace,description:e("RelicDescription",{id:114}),conditional:e("Conditionals.Messenger")}),i.jsx(xe,{set:f.Sets.TheAshblazingGrandDuke,selectOptions:c,description:e("RelicDescription",{id:115}),conditional:e("Conditionals.Ashblazing")}),i.jsx(xe,{set:f.Sets.PrisonerInDeepConfinement,selectOptions:u,description:e("RelicDescription",{id:116}),conditional:e("Conditionals.Prisoner")}),i.jsx(xe,{set:f.Sets.PioneerDiverOfDeadWaters,selectOptions:d,description:e("RelicDescription",{id:117}),conditional:e("Conditionals.Diver")}),i.jsx(xe,{set:f.Sets.WatchmakerMasterOfDreamMachinations,description:e("RelicDescription",{id:118}),conditional:e("Conditionals.Watchmaker")}),i.jsx(xe,{set:f.Sets.IronCavalryAgainstTheScourge,description:e("RelicDescription",{id:119}),conditional:e("Conditionals.DefaultMessage"),p4Checked:!0}),i.jsx(xe,{set:f.Sets.TheWindSoaringValorous,description:e("RelicDescription",{id:120}),conditional:e("Conditionals.Valorous")}),i.jsx(xe,{set:f.Sets.SacerdosRelivedOrdeal,selectOptions:r,description:e("RelicDescription",{id:121}),conditional:e("Conditionals.Sacerdos")}),i.jsx(xe,{set:f.Sets.ScholarLostInErudition,description:e("RelicDescription",{id:122}),conditional:e("Conditionals.DefaultMessage")}),i.jsx(xe,{set:f.Sets.HeroOfTriumphantSong,description:e("RelicDescription",{id:123}),conditional:e("Conditionals.DefaultMessage")}),i.jsx(xe,{set:f.Sets.PoetOfMourningCollapse,description:e("RelicDescription",{id:124}),conditional:e("Conditionals.DefaultMessage"),p4Checked:!0})]}),i.jsx(Ga,{}),i.jsxs(D,{vertical:!0,gap:Ni,style:{marginLeft:5},children:[i.jsxs(D,{gap:Ni,align:"center",justify:"flex-start",children:[i.jsx(Ki,{style:{width:_o}}),i.jsx(Ki,{style:{width:Ao}})]}),i.jsx(xe,{set:f.Sets.SpaceSealingStation,description:e("PlanarDescription",{id:301}),conditional:e("Conditionals.DefaultMessage"),p2Checked:!0}),i.jsx(xe,{set:f.Sets.FleetOfTheAgeless,description:e("PlanarDescription",{id:302}),conditional:e("Conditionals.DefaultMessage"),p2Checked:!0}),i.jsx(xe,{set:f.Sets.PanCosmicCommercialEnterprise,description:e("PlanarDescription",{id:303}),conditional:e("Conditionals.DefaultMessage"),p2Checked:!0}),i.jsx(xe,{set:f.Sets.BelobogOfTheArchitects,description:e("PlanarDescription",{id:304}),conditional:e("Conditionals.DefaultMessage"),p2Checked:!0}),i.jsx(xe,{set:f.Sets.CelestialDifferentiator,description:e("PlanarDescription",{id:305}),conditional:e("Conditionals.Differentiator")}),i.jsx(xe,{set:f.Sets.InertSalsotto,description:e("PlanarDescription",{id:306}),conditional:e("Conditionals.DefaultMessage"),p2Checked:!0}),i.jsx(xe,{set:f.Sets.TaliaKingdomOfBanditry,description:e("PlanarDescription",{id:307}),conditional:e("Conditionals.DefaultMessage"),p2Checked:!0}),i.jsx(xe,{set:f.Sets.SprightlyVonwacq,description:e("PlanarDescription",{id:308}),conditional:e("Conditionals.DefaultMessage"),p2Checked:!0}),i.jsx(xe,{set:f.Sets.RutilantArena,description:e("PlanarDescription",{id:309}),conditional:e("Conditionals.DefaultMessage"),p2Checked:!0}),i.jsx(xe,{set:f.Sets.BrokenKeel,description:e("PlanarDescription",{id:310}),conditional:e("Conditionals.DefaultMessage"),p2Checked:!0}),i.jsx(xe,{set:f.Sets.FirmamentFrontlineGlamoth,description:e("PlanarDescription",{id:311}),conditional:e("Conditionals.DefaultMessage"),p2Checked:!0}),i.jsx(xe,{set:f.Sets.PenaconyLandOfTheDreams,description:e("PlanarDescription",{id:312}),conditional:e("Conditionals.Penacony")}),i.jsx(xe,{set:f.Sets.SigoniaTheUnclaimedDesolation,selectOptions:m,description:e("PlanarDescription",{id:313}),conditional:e("Conditionals.Sigonia")}),i.jsx(xe,{set:f.Sets.IzumoGenseiAndTakamaDivineRealm,description:e("PlanarDescription",{id:314}),conditional:e("Conditionals.Izumo")}),i.jsx(xe,{set:f.Sets.DuranDynastyOfRunningWolves,selectOptions:h,description:e("PlanarDescription",{id:315}),conditional:e("Conditionals.Duran")}),i.jsx(xe,{set:f.Sets.ForgeOfTheKalpagniLantern,description:e("PlanarDescription",{id:316}),conditional:e("Conditionals.Kalpagni")}),i.jsx(xe,{set:f.Sets.LushakaTheSunkenSeas,description:e("PlanarDescription",{id:317}),conditional:e("Conditionals.Lushaka"),p2Checked:!0}),i.jsx(xe,{set:f.Sets.TheWondrousBananAmusementPark,description:e("PlanarDescription",{id:318}),conditional:e("Conditionals.Banana")}),i.jsx(xe,{set:f.Sets.BoneCollectionsSereneDemesne,description:e("PlanarDescription",{id:319}),conditional:e("Conditionals.DefaultMessage"),p2Checked:!0}),i.jsx(xe,{set:f.Sets.GiantTreeOfRaptBrooding,description:e("PlanarDescription",{id:320}),conditional:e("Conditionals.DefaultMessage"),p2Checked:!0})]})]})})}function xe(e){const{t:a}=ee("optimizerTab",{keyPrefix:"SetConditionals"}),t=i.jsxs(D,{vertical:!0,gap:10,children:[i.jsxs(D,{vertical:!0,children:[i.jsx(le,{children:i.jsx("p",{children:a("DescriptionHeader")})}),i.jsx("p",{children:Us(e.description)})]}),i.jsxs(D,{vertical:!0,children:[i.jsx(le,{children:i.jsx("p",{children:a("EffectHeader")})}),i.jsx("p",{children:e.conditional})]})]});if(f.SetsRelicsNames.includes(e.set)){let s=i.jsx(vn,{disabled:e.p4Checked});return e.selectOptions&&(s=i.jsx(ne,{optionLabelProp:"display",listHeight:500,size:"small",style:{width:to},dropdownStyle:{width:"fit-content"},options:e.selectOptions})),i.jsx(As,{content:t,title:a("SetName",{id:pt[e.set]}),mouseEnterDelay:.5,overlayStyle:{width:600},children:i.jsxs(D,{gap:Ni,align:"center",justify:"flex-start",children:[i.jsx(D,{style:{width:_o},children:i.jsx("img",{src:Q.getSetImage(e.set,f.Parts.PlanarSphere),style:{width:36,height:36}})}),i.jsx(Ki,{style:{width:Ao,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:a("SetName",{id:pt[e.set]})}),i.jsx(D,{style:{width:to},justify:"flex-end",children:i.jsx(q.Item,{name:["setConditionals",e.set,1],valuePropName:e.selectOptions?"value":"checked",children:s})})]})})}else{let s=i.jsx(vn,{disabled:e.p2Checked});return e.selectOptions&&(s=i.jsx(ne,{optionLabelProp:"display",listHeight:500,size:"small",style:{width:to},dropdownStyle:{width:"fit-content"},options:e.selectOptions})),i.jsx(As,{content:t,title:a("SetName",{id:pt[e.set]}),mouseEnterDelay:.5,overlayStyle:{width:600},children:i.jsxs(D,{gap:Ni,align:"center",justify:"flex-start",children:[i.jsx(D,{style:{width:_o},children:i.jsx("img",{src:Q.getSetImage(e.set,f.Parts.PlanarSphere),style:{width:36,height:36}})}),i.jsx(Ki,{style:{width:Ao,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:a("SetName",{id:pt[e.set]})}),i.jsx(D,{style:{width:to},justify:"flex-end",children:i.jsx(q.Item,{name:["setConditionals",e.set,1],valuePropName:e.selectOptions?"value":"checked",children:s})})]})})}}xe.propTypes={description:ca.string,p2Checked:ca.bool,p4Checked:ca.bool,set:ca.string,conditional:ca.string,selectOptions:ca.array};function Yl(e){const{currentCharacters:a,excludeCharacters:t,withNobodyOption:s}={currentCharacters:[],excludeCharacters:[],withNobodyOption:!0,...e},o=a.filter(r=>!t.includes(r)).map(r=>({value:r.id,label:i.jsxs(D,{gap:5,align:"center",children:[i.jsx("img",{src:Q.getCharacterAvatarById(r.id),style:{height:22,marginRight:4}}),e.longNameLabel?Y.t(`gameData:Characters.${r.id}.LongName`):Y.t(`gameData:Characters.${r.id}.Name`)]}),title:e.longNameTitle?Y.t(`gameData:Characters.${r.id}.LongName`):Y.t(`gameData:Characters.${r.id}.Name`)})).sort((r,l)=>r.title.localeCompare(l.title));return s&&o.unshift({value:"None",label:"None",title:"None"}),o}const{Text:hr}=_e,hC=()=>{const{t:e,i18n:a}=ee(["optimizerTab","common"]),t=window.store(l=>l.characters),s=window.store(l=>l.optimizerTabFocusCharacter),o=W.useMemo(()=>Yl({currentCharacters:t,excludeCharacters:[V.getCharacterById(s)],withNobodyOption:!1,longNameLabel:!0}),[t,s,a.resolvedLanguage]),r=W.useMemo(()=>t.map(l=>({value:l.rank,label:i.jsxs(D,{gap:5,children:[i.jsx("img",{src:Q.getCharacterAvatarById(l.id),style:{height:22,marginRight:6}}),e("OptimizerOptions.Priority.Label",{rank:l.rank+1,id:l.id})]}),name:e("OptimizerOptions.Priority.Name",{rank:l.rank+1})})),[t,e]);return i.jsx(D,{vertical:!0,children:i.jsxs(D,{vertical:!0,gap:Kt,children:[i.jsxs(D,{justify:"space-between",align:"center",children:[i.jsx(le,{children:e("OptimizerOptions.Header")}),i.jsx(_t,{type:Rt.optimizerOptions()})]}),i.jsxs(D,{align:"center",children:[i.jsx(q.Item,{name:"includeEquippedRelics",valuePropName:"checked",children:i.jsx(vn,{checkedChildren:i.jsx(Hn,{}),unCheckedChildren:i.jsx(Qa,{}),defaultChecked:!0,style:{width:45,marginRight:5}})}),i.jsx(hr,{children:e("OptimizerOptions.AllowEquipped")})]}),i.jsxs(D,{align:"center",children:[i.jsx(q.Item,{name:"rankFilter",valuePropName:"checked",children:i.jsx(vn,{checkedChildren:i.jsx(Hn,{}),unCheckedChildren:i.jsx(Qa,{}),defaultChecked:!0,style:{width:45,marginRight:5}})}),i.jsx(hr,{children:e("OptimizerOptions.PriorityFilter")})]}),i.jsxs(D,{align:"center",children:[i.jsx(q.Item,{name:"keepCurrentRelics",valuePropName:"checked",children:i.jsx(vn,{checkedChildren:i.jsx(Hn,{}),unCheckedChildren:i.jsx(Qa,{}),defaultChecked:!0,style:{width:45,marginRight:5}})}),i.jsx(hr,{children:e("OptimizerOptions.KeepCurrent")})]}),i.jsxs(D,{gap:Kt,style:{marginTop:10},children:[i.jsxs(D,{vertical:!0,gap:2,children:[i.jsx(le,{children:e("OptimizerOptions.Priority.Header")}),i.jsx(q.Item,{name:"rank",children:i.jsx(ne,{style:{width:(Ca-Kt)/2},options:r,popupMatchSelectWidth:225,listHeight:500,optionLabelProp:"name",placeholder:e("OptimizerOptions.Priority.Header"),showSearch:!0,filterOption:J.nameFilterOption})})]}),i.jsxs(D,{vertical:!0,gap:2,children:[i.jsx(le,{children:e("OptimizerOptions.Exclude")}),i.jsx(q.Item,{name:"exclude",children:i.jsx(ne,{style:{width:(Ca-Kt)/2},mode:"multiple",maxTagCount:"responsive",popupMatchSelectWidth:250,listHeight:500,allowClear:!0,showSearch:!0,optionLabelProp:"title",placeholder:e("OptimizerOptions.Exclude"),options:o,filterOption:J.titleFilterOption})})]})]}),i.jsxs(D,{justify:"space-between",children:[i.jsxs(D,{vertical:!0,gap:2,children:[i.jsx(le,{children:e("OptimizerOptions.MinEnhance.Header")}),i.jsx(q.Item,{name:"enhance",children:i.jsx(ne,{style:{width:(Ca-Kt)/2},options:[{value:0,label:e("OptimizerOptions.MinEnhance.Label0")},{value:3,label:e("OptimizerOptions.MinEnhance.Label3")},{value:6,label:e("OptimizerOptions.MinEnhance.Label6")},{value:9,label:e("OptimizerOptions.MinEnhance.Label9")},{value:12,label:e("OptimizerOptions.MinEnhance.Label12")},{value:15,label:e("OptimizerOptions.MinEnhance.Label15")}]})})]}),i.jsxs(D,{vertical:!0,gap:2,children:[i.jsx(le,{children:e("OptimizerOptions.MinRarity.Header")}),i.jsx(q.Item,{name:"grade",children:i.jsx(ne,{style:{width:(Ca-Kt)/2},options:[{value:2,label:e("OptimizerOptions.MinRarity.Label2")},{value:3,label:e("OptimizerOptions.MinRarity.Label3")},{value:4,label:e("OptimizerOptions.MinRarity.Label4")},{value:5,label:e("OptimizerOptions.MinRarity.Label5")}]})})]})]}),i.jsx(D,{justify:"space-between",align:"center",children:i.jsxs(D,{vertical:!0,gap:2,children:[i.jsx(le,{children:e("OptimizerOptions.BoostMain.Header")}),i.jsx(q.Item,{name:"mainStatUpscaleLevel",children:i.jsx(ne,{style:{width:(Ca-Kt)/2},options:[{value:3,label:e("OptimizerOptions.BoostMain.Label3")},{value:6,label:e("OptimizerOptions.BoostMain.Label6")},{value:9,label:e("OptimizerOptions.BoostMain.Label9")},{value:12,label:e("OptimizerOptions.BoostMain.Label12")},{value:15,label:e("OptimizerOptions.BoostMain.Label15")}]})})]})})]})})},Ud=233,jd=350,Sr=350,t0=400,SC=()=>{const e=window.store(a=>a.optimizerTabFocusCharacter);return i.jsx("div",{style:{width:Ud,height:jd,borderRadius:10,position:"relative"},children:i.jsx(Wd,{id:e})})};function Wd(e){const a=e.parentH??jd,t=a>=t0?a:t0;return i.jsx("img",{width:Sr,src:Q.getCharacterPreviewById(e.id),style:{transform:`translate(${(Sr-Ud)/2/Sr*-100}%, ${(t-a)/2/t*-100}%)`,cursor:e.disableClick?"":"pointer"},onClick:()=>{e.disableClick||window.store.getState().setOptimizerTabFocusCharacterSelectModalOpen(!0)}})}function pC(e){const{value:a,label:t,closable:s,onClose:o}=e;if(!a){const c=typeof t=="string"?t.replace(/[^0-9+]/g,""):null;return i.jsx(Zi,{closable:s,onClose:o,children:i.jsx(D,{children:c})})}const r=a.split("__RC_CASCADER_SPLIT__");let l;return r[0]==_a.relic4Piece&&(l=i.jsxs(Lt.Fragment,{children:[i.jsx("img",{title:r[1],src:Q.getSetImage(r[1],f.Parts.Head),style:{width:26,height:26}}),i.jsx("img",{title:r[1],src:Q.getSetImage(r[1],f.Parts.Head),style:{width:26,height:26}})]})),r[0]==_a.relic2Plus2Piece&&(l=i.jsxs(Lt.Fragment,{children:[i.jsx("img",{title:r[1],src:Q.getSetImage(r[1],f.Parts.Head),style:{width:26,height:26}}),i.jsx("img",{title:r[2],src:Q.getSetImage(r[2],f.Parts.Head),style:{width:26,height:26}})]})),r[0]==_a.relic2PlusAny&&(l=i.jsx(Lt.Fragment,{children:i.jsx("img",{title:r[1],src:Q.getSetImage(r[1],f.Parts.Head),style:{width:26,height:26}})})),i.jsx(Zi,{closable:!1,onClose:o,style:{display:"flex",flexDirection:"row",paddingInline:"1px",marginInlineEnd:"4px",height:22,alignItems:"center",overflow:"hidden"},children:i.jsx(D,{children:l})})}const{SHOW_CHILD:gC}=Mu;function bC(){const{t:e}=ee(["optimizerTab","common"]),a=window.store(t=>t.setConditionalSetEffectsDrawerOpen);return i.jsxs(D,{vertical:!0,gap:Kt,children:[i.jsxs(D,{justify:"space-between",align:"center",children:[i.jsx(le,{children:e("MainStats")}),i.jsx(_t,{type:Rt.mainStats()})]}),i.jsxs(D,{vertical:!0,gap:7,children:[i.jsx(q.Item,{name:"mainBody",children:i.jsxs(ne,{mode:"multiple",allowClear:!0,style:{width:Ca},placeholder:e("common:Parts.Body"),optionLabelProp:"label",maxTagCount:"responsive",suffixIcon:i.jsx("img",{style:{width:16},src:Q.getPart(E.Body)}),children:[i.jsx(ne.Option,{value:f.Stats.HP_P,label:e("common:ShortStats.HP%"),children:e("common:Stats.HP%")}),i.jsx(ne.Option,{value:f.Stats.ATK_P,label:e("common:ShortStats.ATK%"),children:e("common:Stats.ATK%")}),i.jsx(ne.Option,{value:f.Stats.DEF_P,label:e("common:ShortStats.DEF%"),children:e("common:Stats.DEF%")}),i.jsx(ne.Option,{value:f.Stats.CR,label:e("common:ShortStats.CRIT Rate"),children:e("common:Stats.CRIT Rate")}),i.jsx(ne.Option,{value:f.Stats.CD,label:e("common:ShortStats.CRIT DMG"),children:e("common:Stats.CRIT DMG")}),i.jsx(ne.Option,{value:f.Stats.EHR,label:e("common:ShortStats.Effect Hit Rate"),children:e("common:Stats.Effect Hit Rate")}),i.jsx(ne.Option,{value:f.Stats.OHB,label:e("common:ShortStats.Outgoing Healing Boost"),children:e("common:Stats.Outgoing Healing Boost")})]})}),i.jsx(q.Item,{name:"mainFeet",children:i.jsxs(ne,{mode:"multiple",allowClear:!0,style:{width:Ca},placeholder:e("common:Parts.Feet"),optionLabelProp:"label",maxTagCount:"responsive",suffixIcon:i.jsx("img",{style:{width:16},src:Q.getPart(E.Feet)}),children:[i.jsx(ne.Option,{value:f.Stats.HP_P,label:e("common:ShortStats.HP%"),children:e("common:Stats.HP%")}),i.jsx(ne.Option,{value:f.Stats.ATK_P,label:e("common:ShortStats.ATK%"),children:e("common:Stats.ATK%")}),i.jsx(ne.Option,{value:f.Stats.DEF_P,label:e("common:ShortStats.DEF%"),children:e("common:Stats.DEF%")}),i.jsx(ne.Option,{value:f.Stats.SPD,label:e("common:ShortStats.SPD"),children:e("common:Stats.SPD")})]})}),i.jsx(q.Item,{name:"mainPlanarSphere",children:i.jsxs(ne,{mode:"multiple",allowClear:!0,style:{width:Ca},placeholder:e("common:Parts.PlanarSphere"),optionLabelProp:"label",listHeight:400,maxTagCount:"responsive",suffixIcon:i.jsx("img",{style:{width:16},src:Q.getPart(E.PlanarSphere)}),children:[i.jsx(ne.Option,{value:f.Stats.HP_P,label:e("common:ShortStats.HP%"),children:e("common:Stats.HP%")}),i.jsx(ne.Option,{value:f.Stats.ATK_P,label:e("common:ShortStats.ATK%"),children:e("common:Stats.ATK%")}),i.jsx(ne.Option,{value:f.Stats.DEF_P,label:e("common:ShortStats.DEF%"),children:e("common:Stats.DEF%")}),i.jsx(ne.Option,{value:f.Stats.Physical_DMG,label:e("common:ShortStats.Physical DMG Boost"),children:e("common:Stats.Physical DMG Boost")}),i.jsx(ne.Option,{value:f.Stats.Fire_DMG,label:e("common:ShortStats.Fire DMG Boost"),children:e("common:Stats.Fire DMG Boost")}),i.jsx(ne.Option,{value:f.Stats.Ice_DMG,label:e("common:ShortStats.Ice DMG Boost"),children:e("common:Stats.Ice DMG Boost")}),i.jsx(ne.Option,{value:f.Stats.Lightning_DMG,label:e("common:ShortStats.Lightning DMG Boost"),children:e("common:Stats.Lightning DMG Boost")}),i.jsx(ne.Option,{value:f.Stats.Wind_DMG,label:e("common:ShortStats.Wind DMG Boost"),children:e("common:Stats.Wind DMG Boost")}),i.jsx(ne.Option,{value:f.Stats.Quantum_DMG,label:e("common:ShortStats.Quantum DMG Boost"),children:e("common:Stats.Quantum DMG Boost")}),i.jsx(ne.Option,{value:f.Stats.Imaginary_DMG,label:e("common:ShortStats.Imaginary DMG Boost"),children:e("common:Stats.Imaginary DMG Boost")})]})}),i.jsx(q.Item,{name:"mainLinkRope",children:i.jsxs(ne,{mode:"multiple",allowClear:!0,style:{width:Ca},placeholder:e("common:Parts.LinkRope"),optionLabelProp:"label",maxTagCount:"responsive",suffixIcon:i.jsx("img",{style:{width:16},src:Q.getPart(E.LinkRope)}),children:[i.jsx(ne.Option,{value:f.Stats.HP_P,label:e("common:ShortStats.HP%"),children:e("common:Stats.HP%")}),i.jsx(ne.Option,{value:f.Stats.ATK_P,label:e("common:ShortStats.ATK%"),children:e("common:Stats.ATK%")}),i.jsx(ne.Option,{value:f.Stats.DEF_P,label:e("common:ShortStats.DEF%"),children:e("common:Stats.DEF%")}),i.jsx(ne.Option,{value:f.Stats.BE,label:e("common:ShortStats.Break Effect"),children:e("common:Stats.Break Effect")}),i.jsx(ne.Option,{value:f.Stats.ERR,label:e("common:ShortStats.Energy Regeneration Rate"),children:e("common:Stats.Energy Regeneration Rate")})]})})]}),i.jsxs(D,{justify:"space-between",align:"center",style:{marginTop:30},children:[i.jsx(le,{children:e("Sets")}),i.jsx(_t,{type:Rt.sets()})]}),i.jsxs(D,{vertical:!0,gap:7,children:[i.jsx(oi,{theme:{components:{Cascader:{dropdownHeight:730,controlItemWidth:100,controlWidth:100,optionPadding:"2px 12px"}}},children:i.jsx(q.Item,{name:"relicSets",children:i.jsx(Mu,{placeholder:e("RelicSetSelector.Placeholder"),options:W.useMemo(()=>UD(),[e]),showCheckedStrategy:gC,tagRender:pC,placement:"bottomLeft",maxTagCount:"responsive",multiple:!0,expandTrigger:"hover"})})}),i.jsx(q.Item,{name:"ornamentSets",children:i.jsx(ne,{dropdownStyle:{width:250},listHeight:800,mode:"multiple",allowClear:!0,style:{width:Ca},options:W.useMemo(()=>zl(),[e]),tagRender:Is,placeholder:e("OrnamentSetSelector.Placeholder"),maxTagCount:"responsive"})}),i.jsx(se,{onClick:()=>a(!0),icon:i.jsx(Ua,{}),children:e("SetConditionals.Title")})]})]})}const{Text:DC}=_e,CC=zt(DC)`
    display: block;
    text-align: center;
`,Mt=e=>i.jsxs(D,{justify:"space-between",style:{margin:0},children:[i.jsx(q.Item,{name:`min${e.name}`,style:{margin:0},children:i.jsx(Mo,{size:"small",controls:!1,style:{margin:0,width:63}})}),i.jsx(CC,{children:e.label}),i.jsx(q.Item,{name:`max${e.name}`,style:{marginRight:0},children:i.jsx(Mo,{size:"small",controls:!1,style:{margin:0,width:63}})})]}),EC=()=>{const{t:e}=ee("optimizerTab",{keyPrefix:"MinMaxFilters"});return i.jsxs(D,{vertical:!0,gap:Kt,children:[i.jsxs(D,{justify:"space-between",align:"center",children:[i.jsx(le,{children:e("StatHeader")}),i.jsx(_t,{type:Rt.statFilters()})]}),i.jsxs(D,{vertical:!0,gap:7,children:[i.jsx(Mt,{name:"Hp",label:e("HPLabel")}),i.jsx(Mt,{name:"Atk",label:e("ATKLabel")}),i.jsx(Mt,{name:"Def",label:e("DEFLabel")}),i.jsx(Mt,{name:"Spd",label:e("SPDLabel")}),i.jsx(Mt,{name:"Cr",label:e("CRLabel")}),i.jsx(Mt,{name:"Cd",label:e("CDLabel")}),i.jsx(Mt,{name:"Ehr",label:e("EHRLabel")}),i.jsx(Mt,{name:"Res",label:e("RESLabel")}),i.jsx(Mt,{name:"Be",label:e("BELabel")}),i.jsx(Mt,{name:"Err",label:e("ERRLabel")})]})]})},TC=()=>{const{t:e}=ee("optimizerTab",{keyPrefix:"MinMaxFilters"});return i.jsxs(D,{vertical:!0,gap:Kt,children:[i.jsxs(D,{justify:"space-between",align:"center",children:[i.jsx(le,{children:e("RatingHeader")}),i.jsx(_t,{type:Rt.ratingFilters()})]}),i.jsxs(D,{vertical:!0,gap:7,children:[i.jsx(Mt,{name:"Ehp",label:e("EHPLabel")}),i.jsx(Mt,{name:"Basic",label:e("BASICLabel")}),i.jsx(Mt,{name:"Skill",label:e("SKILLLabel")}),i.jsx(Mt,{name:"Ult",label:e("ULTLabel")}),i.jsx(Mt,{name:"Fua",label:e("FUALabel")}),i.jsx(Mt,{name:"MemoSkill",label:e("MEMOSKILLLabel")}),i.jsx(Mt,{name:"Dot",label:e("DOTLabel")}),i.jsx(Mt,{name:"Break",label:e("BREAKLabel")}),i.jsx(Mt,{name:"Heal",label:e("HEALLabel")}),i.jsx(Mt,{name:"Shield",label:e("SHIELDLabel")})]})]})};function Vd(){var s;const e=window.optimizerForm.getFieldsValue();console.log("Save statSim",e.statSim);const a=window.store.getState().statSimulationDisplay;if(a==Dn.Disabled||!((s=e.statSim)!=null&&s[a]))return console.warn("Invalid sim",e,a),null;const t=e.statSim[a];return RC(t)?Zd(t,a,!0):(console.warn("Invalid sim",e,a),null)}function Zd(e,a,t=!1){const s=window.store.getState().statSimulations||[],o=J.randomId(),l={name:e.name||void 0,key:o,simType:a,request:e},c=a0(l);for(const u of s){const d=a0(u);if(c==d)return oe.error(Y.t("optimizerTab:StatSimulation.DuplicateSimMessage")),null}s.push(l),window.store.getState().setStatSimulations(s),$o(s),t&&zd(),js()}function a0(e){const a={};for(const t of Object.entries(e.request))t[1]!=null&&(a[t[0]]=t[1]);return J.objectHash({simType:e.simType,request:a})}function RC(e){return!e.simBody||!e.simFeet||!e.simLinkRope||!e.simPlanarSphere?(oe.error(Y.t("optimizerTab:StatSimulation.MissingMainstatsMessage")),!1):!0}function BC(e){return i.jsxs(D,{gap:5,children:[i.jsx(IC,{sim:e}),"|",i.jsx(yC,{sim:e}),"|",i.jsx(D,{children:e.name?`${e.name}`:null}),i.jsx(D,{children:e.name?"|":null}),i.jsx(MC,{sim:e})]})}function IC(e){const a=e.sim.request,t=22,s=Q.getSetImage(a.simRelicSet1),o=Q.getSetImage(a.simRelicSet2),r=a.simOrnamentSet?Q.getSetImage(a.simOrnamentSet):Q.getBlank();return i.jsxs(D,{gap:5,children:[i.jsxs(D,{style:{width:t*2+5},justify:"center",children:[i.jsx("img",{style:{width:a.simRelicSet1?t:0},src:s}),i.jsx("img",{style:{width:a.simRelicSet2?t:0},src:o})]}),i.jsx("img",{style:{width:t},src:r})]})}function yC(e){const a=e.sim.request,t=22;return i.jsxs(D,{children:[i.jsx("img",{style:{width:t},src:Q.getStatIcon(a.simBody,!0)}),i.jsx("img",{style:{width:t},src:Q.getStatIcon(a.simFeet,!0)}),i.jsx("img",{style:{width:t},src:Q.getStatIcon(a.simPlanarSphere,!0)}),i.jsx("img",{style:{width:t},src:Q.getStatIcon(a.simLinkRope,!0)})]})}const n0={[n.ATK_P]:0,[n.ATK]:1,[n.CR]:2,[n.CD]:3,[n.SPD]:4,[n.BE]:5,[n.HP_P]:6,[n.HP]:7,[n.DEF_P]:8,[n.DEF]:9,[n.EHR]:10,[n.RES]:11};function MC(e){const{t:a}=ee("common",{keyPrefix:"ShortStats"}),t=[],s=e.sim.request.stats;for(const r of f.SubStats){const l=s[r];l&&t.push({stat:r,value:l})}t.sort((r,l)=>n0[r.stat]-n0[l.stat]);function o(r){return e.sim.simType==Dn.SubstatRolls?`${a([r.stat])} x ${r.value}`:`${a([r.stat])} ${r.value}${J.isFlat(r.stat)?"":"%"}`}return i.jsx(D,{gap:0,children:t.map(r=>i.jsx(D,{children:i.jsx(Zi,{style:{paddingInline:"5px",marginInlineEnd:"5px"},children:o(r)})},r.stat))})}function GC(){if(Vd()===null)return;const e=window.store.getState().selectedStatSimulations,a=window.store.getState().statSimulations,t=a.map(o=>o.key===e[0]?a.at(-1):o),s=t.pop();window.store.getState().setStatSimulations(t),$o(t),window.store.getState().setSelectedStatSimulations([s.key]),js()}function PC(e){console.log("Delete sim",e);const a=window.store.getState().statSimulations,t=J.clone(a.filter(s=>s.key!=e.key));window.store.getState().setStatSimulations(t),$o(t),js()}function _C(){window.store.getState().setStatSimulations([]),$o([]),js()}function $o(e){window.optimizerForm.setFieldValue(["statSim","simulations"],e)}const AC=new Wa(!1),xC=new bn(!1),LC={quality:1,speedRollValue:2.6,mainStatMultiplier:1,substatRollsModifier:e=>e,simulationFlags:{}};function $a(e,a,t,s={},o=!1){const r={...LC,...s},l=r.simulationFlags.forceBasicSpd?r.simulationFlags.forceBasicSpdValue:void 0,c=[];for(const u of t){const d=u.request,m=Ri(),h=Ri(),g=Ri(),C=Ri(),M=Ri(),x=Ri();m.augmentedStats.mainStat=f.Stats.HP,h.augmentedStats.mainStat=f.Stats.ATK,g.augmentedStats.mainStat=d.simBody,C.augmentedStats.mainStat=d.simFeet,M.augmentedStats.mainStat=d.simLinkRope,x.augmentedStats.mainStat=d.simPlanarSphere,m.augmentedStats.mainValue=705.6,h.augmentedStats.mainValue=352.8,g.augmentedStats.mainValue=Ht.getMaxedStatValue(d.simBody)*r.mainStatMultiplier,C.augmentedStats.mainValue=Ht.getMaxedStatValue(d.simFeet)*r.mainStatMultiplier,M.augmentedStats.mainValue=Ht.getMaxedStatValue(d.simLinkRope)*r.mainStatMultiplier,x.augmentedStats.mainValue=Ht.getMaxedStatValue(d.simPlanarSphere)*r.mainStatMultiplier;const O=pn.filter(F=>F!=d.simRelicSet1&&F!=d.simRelicSet2);m.set=d.simRelicSet1||O[0],h.set=d.simRelicSet1||O[1],g.set=d.simRelicSet2||O[2],C.set=d.simRelicSet2||O[3],M.set=d.simOrnamentSet||gn[0],x.set=d.simOrnamentSet||gn[1],m.part=E.Head,h.part=E.Hands,g.part=E.Body,C.part=E.Feet,M.part=E.LinkRope,x.part=E.PlanarSphere;const H={[E.Head]:[m],[E.Hands]:[h],[E.Body]:[g],[E.Feet]:[C],[E.LinkRope]:[M],[E.PlanarSphere]:[x]},_={[E.Head]:m,[E.Hands]:h,[E.Body]:g,[E.Feet]:C,[E.LinkRope]:M,[E.PlanarSphere]:x},A=[];for(const F of fa){let P=u.request.stats[F];if(u.simType==Dn.SubstatRolls){const T=F==n.SPD?r.speedRollValue:Ht.getMaxedSubstatValue(F,r.quality);let y=J.precisionRound(u.request.stats[F]||0);y=r.substatRollsModifier(y,F,_),P=y*T}P&&A.push({stat:F,value:P})}m.substats=A,ct.condenseRelicSubstatsForOptimizer(H);const L=e.trace?new bn(!0):xC,v=e.trace?new Wa(!0):AC,N=mi(e,_,a,L,v,!0,!0,!1,l,o),U=Kl(N);U.statSim={key:u.key},c.push(U)}return c}function zd(){const e=de.getForm(),a=window.store.getState().statSimulations||[];if(a.length==0||!de.validateForm(e))return;console.log("Starting sims",a);const t=$a(e,null,a,void 0,!0);t.forEach(r=>r.id=r.statSim.key),de.setRows(t),kl(e),window.optimizerGrid.current.api.updateGridOptions({datasource:de.getDataSource()});const s=k[e.resultSort],o=e.statDisplay=="combat"?s.combatGridColumn:s.basicGridColumn;qo(o),js()}function js(){const e=de.getForm();V.addFromForm(e),Pe.delayedSave()}function OC(){const e=window.optimizerGrid.current.api.getSelectedRows()[0];if(!e){oe.warning(Y.t("optimizerTab:StatSimulation.NothingToImport"));return}if(e.statSim){oe.warning(Y.t("optimizerTab:StatSimulation.BuildAlreadyImported"));return}const a=de.calculateRelicsFromId(e.id),t=e.relicSetIndex,s=Xd(t),o=e.ornamentSetIndex,r=Yd(o),l=Jl(a,s[0],s[1],r,1);Zd(l,Dn.SubstatRolls,!1)}function Xd(e){const a=Object.values(f.SetsRelics).length,t=e%a,s=(e-t)/a%a,o=(e-s*a-t)/(a*a)%a,r=(e-o*a*a-s*a-t)/(a*a*a)%a;return Jd([t,s,o,r])}function Yd(e){const a=Object.values(f.SetsOrnaments).length,t=e%a,s=(e-t)/a%a;return Qd([t,s],!1)}function Jl(e,a,t,s,o=1,r=2.6){const l=Object.values(e),c={};fa.map(u=>c[u]=0);for(const u of l)for(const d of u.substats)c[d.stat]+=d.value/(d.stat==n.SPD?r:Ht.getMaxedSubstatValue(d.stat,o));return fa.map(u=>c[u]=J.precisionRound(c[u],4)),{name:"",simRelicSet1:a,simRelicSet2:t,simOrnamentSet:s,simBody:e[E.Body].main.stat,simFeet:e[E.Feet].main.stat,simPlanarSphere:e[E.PlanarSphere].main.stat,simLinkRope:e[E.LinkRope].main.stat,stats:{[n.HP]:c[n.HP]||null,[n.ATK]:c[n.ATK]||null,[n.DEF]:c[n.DEF]||null,[n.HP_P]:c[n.HP_P]||null,[n.ATK_P]:c[n.ATK_P]||null,[n.DEF_P]:c[n.DEF_P]||null,[n.CR]:c[n.CR]||null,[n.CD]:c[n.CD]||null,[n.SPD]:c[n.SPD]||null,[n.EHR]:c[n.EHR]||null,[n.RES]:c[n.RES]||null,[n.BE]:c[n.BE]||null}}}function Jd(e,a=!1){const t=[];for(;e.length>0;){const s=e[0];if(e.lastIndexOf(s)){const o=a?s:Object.entries(f.RelicSetToIndex).find(l=>l[1]==s)[0];t.push(o);const r=e.lastIndexOf(s);e.splice(r,1)}e.splice(0,1)}return t}function Qd(e,a=!0){if(e[0]!=null&&e[0]==e[1])return a?e[1]:Object.entries(f.OrnamentSetToIndex).find(t=>t[1]==e[1])[0]}const vC=[{title:i.jsx(D,{style:{marginLeft:5},children:"Simulation details"}),dataIndex:"name",fixed:"left",width:"560",render:(e,a)=>BC(a),key:"y",ellipsis:!0},{title:"",dataIndex:"",key:"x",render:(e,a)=>i.jsx("a",{onClick:()=>{PC(a)},style:{display:"flex",justifyContent:"center"},children:i.jsx(Qa,{})}),width:36,fixed:"right"}];function HC(e){for(const a of Object.entries(e))a[1]==0&&(e[a[0]]=null);return e}function FC(){const{t:e}=ee("optimizerTab",{keyPrefix:"StatSimulation"}),a=window.store(r=>r.statSimulations),t=window.store(r=>r.selectedStatSimulations),s=window.store(r=>r.setSelectedStatSimulations);function o(r){t[0]!=r&&s(r!=null?[r]:[]);const l=a.find(d=>d.key===r);if(console.log("Syncing matching statSim",l),!l)return;let c;window.optimizerGrid.current.api.forEachNode(d=>{var m,h;((h=(m=d.data)==null?void 0:m.statSim)==null?void 0:h.key)==l.key&&(c=d)}),c&&c.setSelected(!0,!0);const u=J.clone(l.request);HC(u.stats),window.optimizerForm.setFieldValue(["statSim",l.simType],u),window.store.getState().setStatSimulationDisplay(l.simType)}return W.useEffect(()=>{t.length&&o(t[0])},[t]),i.jsx(pi,{showHeader:!1,locale:{emptyText:i.jsx(pc,{image:pc.PRESENTED_IMAGE_SIMPLE,description:e("NoStatSimulations")})},rowSelection:{selectedRowKeys:t,type:"radio",columnWidth:0,renderCell:()=>""},columns:vC,dataSource:a,onRow:r=>({onClick:()=>{s(r.key!=null?[r.key]:[])}}),pagination:!1,size:"small",style:{flex:1,width:qd,height:"100%",backgroundColor:"#0000001a",border:"1px solid rgba(255, 255, 255, 0.15)"},scroll:{y:300}})}const{useToken:wC}=Xt,Ws="rgba(0, 0, 0, 0.25) 0px 0.0625em 0.0625em, rgba(0, 0, 0, 0.25) 0px 0.125em 0.5em, rgba(255, 255, 255, 0.15) 0px 0px 0px 1px inset",Vs="rgba(0, 0, 0, 0.25) 0px 0.0625em 0.0625em, rgba(0, 0, 0, 0.25) 0px 0.125em 0.5em",kC=5,KC=Ca,NC=373,UC=1183,jC={small:KC,narrow:233,medium:NC,large:UC};function ya(e){var o,r;const{token:a}=wC(),t=e.size??"small",s=jC[t];return i.jsx(D,{style:{borderRadius:5,backgroundColor:a.colorBgContainer,height:e.height??400,padding:((o=e.style)==null?void 0:o.padding)??Vi,boxShadow:Ws,overflow:(r=e.style)==null?void 0:r.overflow},children:i.jsx(D,{style:{width:s},justify:e.justify??void 0,children:i.jsx(D,{vertical:!0,style:{width:s},gap:kC,justify:e.justify??void 0,children:e.children})})})}const{Text:$d}=_e;var Dn=(e=>(e.Disabled="disabled",e.SubstatTotals="substatTotals",e.SubstatRolls="substatRolls",e))(Dn||{});const WC=425,qd=680,ys=215,em=190;function VC(){const{t:e}=ee("optimizerTab",{keyPrefix:"StatSimulation"}),{t:a}=ee("common"),t=window.store(l=>l.statSimulationDisplay),s=window.store(l=>l.setStatSimulationDisplay),o=window.store(l=>l.setConditionalSetEffectsDrawerOpen);function r(){return t=="disabled"||!t}return i.jsx(ya,{style:{overflow:"hidden"},size:"large",height:WC,children:i.jsxs(D,{gap:15,style:{height:"100%"},children:[i.jsxs(D,{vertical:!0,gap:15,align:"center",children:[i.jsxs(nt.Group,{onChange:l=>{const{target:{value:c}}=l;s(c)},optionType:"button",buttonStyle:"solid",value:t,style:{width:`${qd}px`,display:"flex"},children:[i.jsx(nt,{style:{display:"flex",flex:.3,justifyContent:"center",paddingInline:0},value:"disabled",children:e("ModeSelector.Off")}),i.jsx(nt,{style:{display:"flex",flex:1,justifyContent:"center",paddingInline:0},value:"substatRolls",children:e("ModeSelector.RollCount")}),i.jsx(nt,{style:{display:"flex",flex:1,justifyContent:"center",paddingInline:0},value:"substatTotals",children:e("ModeSelector.Totals")})]}),i.jsx(D,{style:{minHeight:302},children:i.jsx(FC,{})}),i.jsxs(D,{gap:10,children:[i.jsx(se,{style:{width:200},disabled:r(),onClick:zd,icon:i.jsx(Uo,{}),children:e("FooterLabels.Simulate")}),i.jsx(se,{style:{width:200},disabled:r(),onClick:OC,icon:i.jsx(cf,{}),children:e("FooterLabels.Import")}),i.jsx(se,{style:{width:200},disabled:r(),onClick:()=>o(!0),icon:i.jsx(Ua,{}),children:e("FooterLabels.Conditionals")})]})]}),i.jsx(D,{vertical:!0,justify:"space-around",children:i.jsxs(D,{vertical:!0,gap:10,children:[i.jsx(se,{type:"primary",style:{width:35,height:100,padding:0},onClick:Vd,disabled:r(),children:i.jsx(uf,{})}),i.jsx(se,{type:"dashed",style:{width:35,height:35,padding:0},disabled:r(),onClick:GC,children:i.jsx(Gu,{})}),i.jsx(Kn,{title:e("DeletePopup.Title"),description:e("DeletePopup.Description"),onConfirm:_C,placement:"bottom",okText:a("Yes"),cancelText:a("Cancel"),children:i.jsx(se,{type:"dashed",style:{width:35,height:35,padding:0},disabled:r(),children:i.jsx(Dl,{})})})]})}),i.jsx(ZC,{})]})})}function ZC(){const{t:e}=ee("optimizerTab",{keyPrefix:"StatSimulation"}),a=window.store(r=>r.statSimulationDisplay),t=q.useWatch(r=>r.statSim,window.optimizerForm),s=W.useMemo(()=>{if(!t)return 0;let r=0;for(const l of fa){const c=t.substatRolls;c!=null&&c.stats[l]&&(r+=c.stats[l])}return r},[t]),o=W.useMemo(()=>i.jsxs(i.Fragment,{children:[i.jsx(q.Item,{name:Fn("simulations"),children:i.jsx(qt,{placeholder:"This is a fake hidden input to save simulations into the form",style:{display:"none"}})}),i.jsxs(D,{gap:5,style:{display:a=="substatTotals"?"flex":"none"},children:[i.jsxs(D,{vertical:!0,gap:5,style:{width:ys},children:[i.jsx(i0,{simType:"substatTotals"}),i.jsx(s0,{simType:"substatTotals"}),i.jsx(le,{children:e("OptionsHeader")}),i.jsx(q.Item,{name:Fn("substatTotals","name"),children:i.jsx(qt,{placeholder:e("SimulationNamePlaceholder"),autoComplete:"off"})})]}),i.jsx(Ga,{}),i.jsx(o0,{simType:"substatTotals",title:e("TotalsHeader")})]}),i.jsxs(D,{gap:5,style:{display:a=="substatRolls"?"flex":"none"},children:[i.jsxs(D,{vertical:!0,gap:5,style:{width:ys},children:[i.jsx(i0,{simType:"substatRolls"}),i.jsx(s0,{simType:"substatRolls"}),i.jsx(le,{children:e("OptionsHeader")}),i.jsx(q.Item,{name:Fn("substatRolls","name"),children:i.jsx(qt,{placeholder:e("SimulationNamePlaceholder"),autoComplete:"off"})})]}),i.jsx(Ga,{}),i.jsx(o0,{simType:"substatRolls",title:e("RollsHeader"),total:s})]}),i.jsxs(D,{gap:5,style:{display:a=="disabled"?"flex":"none"},children:[i.jsx("div",{style:{width:ys}}),i.jsx(Ga,{})]})]}),[a,s,e]);return i.jsx(D,{style:{minHeight:300},children:o})}function i0(e){const{t:a,i18n:t}=ee("optimizerTab",{keyPrefix:"StatSimulation"});return i.jsxs(i.Fragment,{children:[i.jsx(le,{children:a("SetSelection.Header")}),i.jsx(q.Item,{name:Fn(e.simType,"simRelicSet1"),style:{maxHeight:32},children:i.jsx(ne,{dropdownStyle:{width:250},listHeight:700,allowClear:!0,options:W.useMemo(()=>tl(),[t.resolvedLanguage]),tagRender:Is,placeholder:a("SetSelection.RelicPlaceholder"),maxTagCount:"responsive",showSearch:!0})}),i.jsx(q.Item,{name:Fn(e.simType,"simRelicSet2"),style:{maxHeight:32},children:i.jsx(ne,{dropdownStyle:{width:250},listHeight:700,allowClear:!0,options:W.useMemo(()=>tl(),[t.resolvedLanguage]),tagRender:Is,placeholder:a("SetSelection.RelicPlaceholder"),maxTagCount:"responsive",showSearch:!0})}),i.jsx(q.Item,{name:Fn(e.simType,"simOrnamentSet"),style:{maxHeight:32},children:i.jsx(ne,{dropdownStyle:{width:250},listHeight:600,allowClear:!0,options:W.useMemo(()=>zl(),[t.resolvedLanguage]),tagRender:Is,placeholder:a("SetSelection.OrnamentPlaceholder"),maxTagCount:"responsive",showSearch:!0})})]})}function s0(e){const{t:a}=ee("optimizerTab",{keyPrefix:"StatSimulation.MainStatsSelection"}),t=W.useMemo(()=>[n.HP_P,n.ATK_P,n.DEF_P,n.CR,n.CD,n.EHR,n.OHB].map(l=>({value:l,short:a("ShortStat",{stat:l}),label:a("LabelStat",{stat:l})})),[a]),s=W.useMemo(()=>[n.HP_P,n.ATK_P,n.DEF_P,n.SPD].map(l=>({value:l,short:a("ShortStat",{stat:l}),label:a("LabelStat",{stat:l})})),[a]),o=W.useMemo(()=>[n.HP_P,n.ATK_P,n.DEF_P,n.BE,n.ERR].map(l=>({value:l,short:a("ShortStat",{stat:l}),label:a("LabelStat",{stat:l})})),[a]),r=W.useMemo(()=>[n.HP_P,n.ATK_P,n.DEF_P,n.Physical_DMG,n.Fire_DMG,n.Ice_DMG,n.Lightning_DMG,n.Wind_DMG,n.Quantum_DMG,n.Imaginary_DMG].map(l=>({value:l,short:a("ShortStat",{stat:l}),label:a("LabelStat",{stat:l})})),[a]);return i.jsxs(i.Fragment,{children:[i.jsx(le,{children:a("Header")}),i.jsxs(D,{vertical:!0,gap:5,children:[i.jsxs(D,{gap:5,style:{width:ys},children:[i.jsx(ao,{placeholder:a("BodyPlaceholder"),part:E.Body,options:t,simType:e.simType}),i.jsx(ao,{placeholder:a("FeetPlaceholder"),part:E.Feet,options:s,simType:e.simType})]}),i.jsxs(D,{gap:5,style:{width:ys},children:[i.jsx(ao,{placeholder:a("SpherePlaceholder"),part:E.PlanarSphere,options:r,simType:e.simType}),i.jsx(ao,{placeholder:a("SpherePlaceholder"),part:E.LinkRope,options:o,simType:e.simType})]})]})]})}function ao(e){return i.jsx(q.Item,{name:Fn(e.simType,"sim"+e.part),style:{flex:1},children:i.jsx(ne,{placeholder:e.placeholder,style:{flex:1},allowClear:!0,optionLabelProp:"short",maxTagCount:"responsive",suffixIcon:i.jsx("img",{style:{width:16},src:Q.getPart(e.part)}),options:e.options,listHeight:750,popupMatchSelectWidth:200,showSearch:!0})})}function o0(e){const{t:a}=ee("optimizerTab",{keyPrefix:"StatSimulation"});return i.jsx(i.Fragment,{children:i.jsxs(D,{vertical:!0,children:[i.jsx(le,{children:e.title}),i.jsxs(D,{vertical:!0,gap:5,children:[i.jsx(Ba,{simType:e.simType,name:n.ATK_P,label:a("SubstatSelectorLabel",{stat:n.ATK_P})}),i.jsx(Ba,{simType:e.simType,name:n.ATK,label:a("SubstatSelectorLabel",{stat:n.ATK})}),i.jsx(Ba,{simType:e.simType,name:n.CR,label:a("SubstatSelectorLabel",{stat:n.CR})}),i.jsx(Ba,{simType:e.simType,name:n.CD,label:a("SubstatSelectorLabel",{stat:n.CD})}),i.jsx(Ba,{simType:e.simType,name:n.SPD,label:a("SubstatSelectorLabel",{stat:n.SPD})}),i.jsx(Ba,{simType:e.simType,name:n.BE,label:a("SubstatSelectorLabel",{stat:n.BE})}),i.jsx(Ba,{simType:e.simType,name:n.HP_P,label:a("SubstatSelectorLabel",{stat:n.HP_P})}),i.jsx(Ba,{simType:e.simType,name:n.HP,label:a("SubstatSelectorLabel",{stat:n.HP})}),i.jsx(Ba,{simType:e.simType,name:n.DEF_P,label:a("SubstatSelectorLabel",{stat:n.DEF_P})}),i.jsx(Ba,{simType:e.simType,name:n.DEF,label:a("SubstatSelectorLabel",{stat:n.DEF})}),i.jsx(Ba,{simType:e.simType,name:n.EHR,label:a("SubstatSelectorLabel",{stat:n.EHR})}),i.jsx(Ba,{simType:e.simType,name:n.RES,label:a("SubstatSelectorLabel",{stat:n.RES})}),e.simType=="substatRolls"&&i.jsxs(D,{justify:"space-between",style:{width:em},children:[i.jsx($d,{children:a("TotalRolls")}),i.jsx(ma,{size:"small",controls:!1,disabled:!0,value:J.truncate10ths(e.total),variant:"borderless",formatter:t=>`${t} / 54`,max:54,status:e.total>54?"error":void 0,style:{width:70}})]})]})]})})}function Ba(e){return i.jsxs(D,{justify:"space-between",style:{width:em},children:[i.jsx($d,{children:e.label}),i.jsx(q.Item,{name:Fn(e.simType,"stats",e.name),children:i.jsx(ma,{size:"small",controls:!1,disabled:e.disabled,value:e.value,style:{width:70}})})]})}function Fn(e,a,t){return["statSim",e,a,t].filter(s=>s)}zt(_e)`
    white-space: pre-line;
`;const zC=[{text:"HPFilterText",name:f.Stats.HP_P},{text:"ATKFilterText",name:f.Stats.ATK_P},{text:"DEFFilterText",name:f.Stats.DEF_P},{text:"SPDFilterText",name:f.Stats.SPD},{text:"CRFilterText",name:f.Stats.CR},{text:"CDFilterText",name:f.Stats.CD},{text:"EHRFilterText",name:f.Stats.EHR},{text:"RESFilterText",name:f.Stats.RES},{text:"BEFilterText",name:f.Stats.BE}];function XC(){const{t:e}=ee("optimizerTab",{keyPrefix:"WeightFilter"}),a=[],t=[];for(const s of zC)a.push(i.jsx("span",{style:{textWrap:"nowrap"},children:e(s.text)},s.name)),t.push(i.jsx(q.Item,{name:["weights",s.name],style:{width:"100%",alignContent:"end",alignSelf:"end"},children:i.jsx(No,{min:0,max:1,step:.25,style:{width:"100%",marginTop:0,marginBottom:0,marginLeft:"auto",marginRight:"auto"},onChangeComplete:()=>window.onOptimizerFormValuesChange({},de.getForm(),!0)})},s.name));return i.jsxs(D,{gap:10,children:[i.jsx(D,{vertical:!0,style:{width:"max-content"},gap:3,children:a}),i.jsx(D,{vertical:!0,gap:3,style:{width:"100%",marginLeft:10,marginRight:10},align:"flex-end",children:t})]})}const YC={0:[E.Head,E.Hands],1:[E.Body,E.Feet],2:[E.PlanarSphere,E.LinkRope]},JC={0:"headHands",1:"bodyFeet",2:"sphereRope"},r0=5;function pr(e){const{index:a}=e,t=YC[a],s=JC[a],[o,r]=W.useState(1),l=c=>{r(c)};return i.jsxs(D,{gap:5,style:{marginBottom:0},align:"center",children:[i.jsxs(D,{gap:5,justify:"flex-start",style:{minWidth:50},children:[i.jsx("img",{src:Q.getPart(t[0]),style:{width:18}}),i.jsx("img",{src:Q.getPart(t[1]),style:{width:18}})]}),i.jsx(D,{align:"center",justify:"flex-start",gap:10,children:i.jsx(q.Item,{name:["weights",s],children:i.jsx(No,{min:0,max:r0,step:.5,style:{minWidth:105,marginTop:0,marginBottom:0,marginLeft:0,marginRight:5},keyboard:!1,tooltip:{formatter:c=>`${J.precisionRound(c)}`},value:typeof o=="number"?o:0,onChange:l,onChangeComplete:()=>window.onOptimizerFormValuesChange({},de.getForm(),!0)})})}),i.jsx(q.Item,{name:["weights",s],children:i.jsx(ma,{size:"small",className:"center-input-text",style:{width:40},controls:!1,min:0,max:r0,variant:"borderless",onChange:c=>{l(c),window.onOptimizerFormValuesChange({},de.getForm(),!0)}})})]})}const QC=()=>{const{t:e}=ee("optimizerTab",{keyPrefix:"WeightFilter"});return i.jsxs(D,{vertical:!0,gap:20,children:[i.jsxs(D,{vertical:!0,gap:0,children:[i.jsxs(D,{justify:"space-between",align:"center",children:[i.jsx(le,{children:e("WeightFilterHeader")}),i.jsx(_t,{type:Rt.substatWeightFilter()})]}),i.jsx(XC,{})]}),i.jsxs(D,{vertical:!0,gap:3,children:[i.jsx(le,{children:e("RollFilterHeader")}),i.jsxs(D,{vertical:!0,gap:7,children:[i.jsx(pr,{index:0}),i.jsx(pr,{index:1}),i.jsx(pr,{index:2})]})]})]})},{Text:tm}=_e,Ui=110,$C=Ui,qC=Ui,Zs=120,eE=Zs,tE=Zs,l0=Zs,c0=Zs,aE=480,u0=e=>e.data.value?i.jsxs(D,{gap:10,align:"center",children:[i.jsx(D,{children:i.jsx("img",{src:Q.getSetImage(e.data.value,f.Parts.PlanarSphere),style:{width:26,height:26}})}),e.data.desc]}):i.jsx(tm,{children:"None"}),Tn=(e,a)=>i.jsxs(D,{align:"center",gap:3,children:[i.jsx("img",{src:Q.getSetImage(e,f.Parts.PlanarSphere),style:{width:20,height:20}}),i.jsx(tm,{style:{fontSize:12},children:a})]});function nE(e){return`teammate${e}`}function iE(){return{characterEidolon:0,characterConditionals:{},lightConeSuperimposition:1,lightConeConditionals:{}}}const sE=[G.MessengerTraversingHackerspace,G.WatchmakerMasterOfDreamMachinations,G.SacerdosRelivedOrdeal],oE=[G.BrokenKeel,G.FleetOfTheAgeless,G.PenaconyLandOfTheDreams,G.LushakaTheSunkenSeas];function rE(e){const a=Object.values(e.equipped).map(s=>V.getRelicById(s)).filter(s=>s),t={};for(const s of sE)if(a.filter(o=>o.set==s).length==4){if(s==G.MessengerTraversingHackerspace)continue;s==G.SacerdosRelivedOrdeal?e.id=="1313"||e.id=="1306"?t.teamRelicSet=Os:t.teamRelicSet=Ls:t.teamRelicSet=s}for(const s of oE)a.filter(o=>o.set==s).length==2&&(t.teamOrnamentSet=s);return t}function lE(){const e=window.optimizerForm.getFieldsValue();return[e.teammate0,e.teammate1,e.teammate2].filter(a=>a==null?void 0:a.characterId).length}const gr=e=>{const{t:a}=ee("optimizerTab",{keyPrefix:"TeammateCard"}),t=W.useMemo(()=>nE(e.index),[e.index]),s=q.useWatch([t,"characterId"],window.optimizerForm),o=q.useWatch([t,"characterEidolon"],window.optimizerForm),r=q.useWatch([t,"lightCone"],window.optimizerForm),l=q.useWatch([t,"lightConeSuperimposition"],window.optimizerForm),[c,u]=W.useState(!1),[d,m]=W.useState(!1),h=s==null,g=W.useMemo(()=>[{value:G.MessengerTraversingHackerspace,desc:a("TeammateSets.Messenger.Desc"),label:Tn(G.MessengerTraversingHackerspace,a("TeammateSets.Messenger.Text"))},{value:G.WatchmakerMasterOfDreamMachinations,desc:a("TeammateSets.Watchmaker.Desc"),label:Tn(G.WatchmakerMasterOfDreamMachinations,a("TeammateSets.Watchmaker.Text"))},{value:Ls,desc:a("TeammateSets.Sacerdos1Stack.Desc"),label:Tn(G.SacerdosRelivedOrdeal,a("TeammateSets.Sacerdos1Stack.Text"))},{value:Os,desc:a("TeammateSets.Sacerdos2Stack.Desc"),label:Tn(G.SacerdosRelivedOrdeal,a("TeammateSets.Sacerdos2Stack.Text"))}],[a]),C=W.useMemo(()=>[{value:G.BrokenKeel,desc:a("TeammateSets.Keel.Desc"),label:Tn(G.BrokenKeel,a("TeammateSets.Keel.Text"))},{value:G.FleetOfTheAgeless,desc:a("TeammateSets.Ageless.Desc"),label:Tn(G.FleetOfTheAgeless,a("TeammateSets.Ageless.Text"))},{value:G.PenaconyLandOfTheDreams,desc:a("TeammateSets.Penacony.Desc"),label:Tn(G.PenaconyLandOfTheDreams,a("TeammateSets.Penacony.Text"))},{value:G.LushakaTheSunkenSeas,desc:a("TeammateSets.Lushaka.Desc"),label:Tn(G.LushakaTheSunkenSeas,a("TeammateSets.Lushaka.Text"))}],[a]),M=W.useMemo(()=>{const H=[];for(let _=1;_<=5;_++)H.push({value:_,label:a("SuperimpositionN",{superimposition:_})});return H},[a]),x=W.useMemo(()=>{const H=[];for(let _=0;_<=6;_++)H.push({value:_,label:a("EidolonN",{eidolon:_})});return H},[a]);function O(){if(window.store.getState().setTeammateCount(lE()),!s){window.optimizerForm.setFieldValue([t],iE());return}const _=de.formToDisplay(de.getForm())[t],A=V.getCharacterById(s);if(A){_.lightCone=A.form.lightCone,_.lightConeSuperimposition=A.form.lightConeSuperimposition||1,_.characterEidolon=A.form.characterEidolon;const v=rE(A);_.teamRelicSet=v.teamRelicSet,_.teamOrnamentSet=v.teamOrnamentSet}else _.lightConeSuperimposition=1,_.characterEidolon=0;const L=Ta.get({characterId:s,characterEidolon:_.characterEidolon});L.teammateDefaults&&(_.characterConditionals=Object.assign({},L.teammateDefaults(),_.characterConditionals)),window.optimizerForm.setFieldValue([t],_)}return W.useEffect(()=>{O()},[s,e.index]),W.useEffect(()=>{if(!r)return;const H=de.formToDisplay(de.getForm()),_=H[t],A=Un(_,e.dbMetadata),L=Sa.get(A);if(!L.teammateDefaults)return;const v=Object.assign({},L.teammateDefaults(),H[t].lightConeConditionals);window.optimizerForm.setFieldValue([t,"lightConeConditionals"],v)},[r,l,s,e.index]),i.jsx(ya,{size:"medium",height:aE,style:{overflow:"auto"},children:i.jsxs(D,{vertical:!0,gap:5,children:[i.jsxs(D,{gap:5,children:[i.jsx(q.Item,{name:[t,"characterId"],style:{flex:1},children:i.jsx(ts,{value:"",selectStyle:{},externalOpen:c,setExternalOpen:u})}),i.jsx(se,{icon:i.jsx(Pu,{}),style:{width:35},disabled:h,onClick:()=>{O(),oe.success(a("TeammateSyncSuccessMessage"))}}),i.jsx(q.Item,{name:[t,"characterEidolon"],children:i.jsx(ne,{showSearch:!0,style:{width:110},options:x,placeholder:a("EidolonPlaceholder"),disabled:h})})]}),i.jsxs(D,{children:[i.jsx(D,{vertical:!0,style:{minWidth:258,marginLeft:5},children:i.jsx(Ul,{id:s,eidolon:o,teammateIndex:e.index})}),i.jsxs(D,{vertical:!0,gap:5,children:[i.jsx("div",{style:{width:`${Ui}px`,height:`${Ui}px`,borderRadius:"10px"},children:i.jsx("img",{width:Ui,height:Ui,src:Q.getCharacterAvatarById(s),onClick:()=>u(!0),style:{cursor:"pointer"}})}),i.jsx(q.Item,{name:[t,"teamRelicSet"],children:i.jsx(ne,{className:"teammate-set-select",style:{width:110},options:g,placeholder:a("RelicsPlaceholder"),allowClear:!0,popupMatchSelectWidth:!1,optionLabelProp:"label",optionRender:u0,disabled:h})}),i.jsx(q.Item,{name:[t,"teamOrnamentSet"],children:i.jsx(ne,{className:"teammate-set-select",style:{width:110},options:C,placeholder:a("OrnamentsPlaceholder"),allowClear:!0,popupMatchSelectWidth:!1,optionLabelProp:"label",optionRender:u0,disabled:h})})]})]}),i.jsxs(D,{gap:5,children:[i.jsx(q.Item,{name:[t,"lightCone"],children:i.jsx(Zl,{value:"",selectStyle:{width:258},characterId:s,externalOpen:d,setExternalOpen:m})}),i.jsx(q.Item,{name:[t,"lightConeSuperimposition"],children:i.jsx(ne,{showSearch:!0,style:{width:110},options:M,placeholder:a("SuperimpositionPlaceholder"),disabled:h})})]}),i.jsxs(D,{children:[i.jsx(D,{vertical:!0,style:{minWidth:258,marginLeft:5},children:i.jsx(jl,{id:r,superImposition:l,teammateIndex:e.index,dbMetadata:e.dbMetadata})}),i.jsx(D,{children:i.jsx("div",{style:{width:`${$C}px`,height:`${qC}px`,borderRadius:"10px"},children:i.jsx("img",{width:Zs,src:Q.getLightConeIconById(r),style:{marginLeft:-5,transform:`translate(${(l0-eE)/2/l0*-100}%, ${(c0-tE)/2/c0*-100}%)`,cursor:"pointer"},onClick:()=>m(!0)})})})]})]})})};function am(e){return i.jsx(D,{vertical:!0,style:{overflow:"hidden",borderRadius:5,paddingBottom:10,background:"rgb(29 42 81 / 73%)",boxShadow:Vs,backdropFilter:"blur(5px)",border:"1px solid rgba(255, 255, 255, 0.10)",WebkitBackdropFilter:"blur(5px)",width:1227},children:e.children})}const ka={characterOptions:"Character options",relicAndStatFilters:"Relic & stat filters",teammates:"Teammates",characterStatsSimulation:"Character custom stats simulation",analysis:"Analysis"};function Ms(e){const{t:a}=ee("optimizerTab",{keyPrefix:"FormRowLabels"}),t=window.store(l=>l.optimizerMenuState),s=window.store(l=>l.setOptimizerMenuState);function o(l){t[e.id]=l.length>0,s(t)}const r=[{key:e.id,label:i.jsx(D,{style:{paddingTop:6},children:e.label??a(`${e.id}`)}),forceRender:!0,children:i.jsx(D,{style:{paddingLeft:10,marginTop:5,paddingRight:10},gap:10,children:e.children})}];return i.jsx(D,{gap:0,vertical:!0,className:"form-row",style:{minWidth:"100%"},children:i.jsx(jo,{defaultActiveKey:t[e.id]?e.id:void 0,items:r,onChange:o,expandIconPosition:"end",ghost:!0})})}function cE(e){const{t:a}=ee("optimizerTab",{keyPrefix:"TeammateRow"}),t=window.store(o=>o.teammateCount),s=W.useMemo(()=>a("Header",{teammateCount:t?` (${t})`:""}),[t,a]);return i.jsx(Ms,{id:e.id,label:s,children:e.children})}const Ql={};function uE(){console.log("======================================================================= RENDER OptimizerForm");const[e]=q.useForm();window.optimizerForm=e,W.useEffect(()=>{var l;const o=V.getCharacters()||[],r=window.store.getState().savedSession[$e.optimizerCharacterId];de.updateCharacter(r??((l=o[0])==null?void 0:l.id))},[]);const a=W.useMemo(()=>V.getMetadata(),[]),t=(o,r,l=!1)=>{if(!o||!(r!=null&&r.characterId))return;const c=Object.keys(o);if(c.length==1&&(c[0]=="characterConditionals"||c[0]=="lightConeConditionals"||c[0]=="setConditionals"||c[0].startsWith("teammate"))&&n2(o),!l){if(c.length==1&&(c[0].startsWith("min")||c[0].startsWith("max")||c[0].startsWith("buff")||c[0].startsWith("statDisplay")||c[0].startsWith("statSim")||c[0].startsWith("teammate")||c[0].startsWith("combatBuffs")||c[0]=="characterConditionals"||c[0]=="lightConeConditionals"))return}const u=r;c[0]==="characterId"&&(window.store.getState().setSavedSessionKey($e.optimizerCharacterId,o.characterId),Pe.delayedSave()),!V.getCharacterById(r.characterId)&&c[0]!="characterId"&&V.addFromForm(r),o.rank!=null&&V.getCharacterById(r.characterId).rank!=r.rank&&(V.insertCharacter(r.characterId,r.rank),V.refreshCharacters());const[d,m]=yo.getFilteredRelics(u),h={Head:d.Head.length,Hands:d.Hands.length,Body:d.Body.length,Feet:d.Feet.length,PlanarSphere:d.PlanarSphere.length,LinkRope:d.LinkRope.length,HeadTotal:m.Head.length,HandsTotal:m.Hands.length,BodyTotal:m.Body.length,FeetTotal:m.Feet.length,PlanarSphereTotal:m.PlanarSphere.length,LinkRopeTotal:m.LinkRope.length};window.store.getState().setPermutationDetails(h),window.store.getState().setPermutations(d.Head.length*d.Hands.length*d.Body.length*d.Feet.length*d.PlanarSphere.length*d.LinkRope.length)};window.onOptimizerFormValuesChange=t;function s(){console.log("Start clicked");const o=de.getForm();if(!de.validateForm(o))return;window.store.getState().setPermutationsSearched(0),window.store.getState().setPermutationsResults(0),window.store.getState().setOptimizationInProgress(!0),setTimeout(()=>{V.addFromForm(o)},2e3),Pe.delayedSave();const r=J.randomId();window.store.getState().setOptimizationId(r),o.optimizationId=r,o.statDisplay=window.store.getState().statDisplay,Ql[r]=o,console.log("Form finished",o),setTimeout(()=>yo.optimize(o),50)}return window.optimizerStartClicked=s,i.jsx("div",{style:{position:"relative"},children:i.jsxs(q,{form:e,layout:"vertical",onValuesChange:t,children:[i.jsx(fC,{}),i.jsxs(am,{children:[i.jsxs(Ms,{id:ka.characterOptions,children:[i.jsx(ya,{style:{overflow:"hidden",padding:"none"},size:"narrow",children:i.jsx(SC,{})}),i.jsx(ya,{children:i.jsx(AD,{})}),i.jsx(ya,{children:i.jsx(dE,{})}),i.jsx(ya,{justify:"space-between",children:i.jsx(mE,{metadata:a})}),i.jsx(ya,{children:i.jsx(hC,{})})]}),i.jsxs(Ms,{id:ka.relicAndStatFilters,children:[i.jsx(ya,{children:i.jsx(bC,{})}),i.jsx(ya,{children:i.jsx(QC,{})}),i.jsx(ya,{children:i.jsx(EC,{})}),i.jsx(ya,{children:i.jsx(TC,{})}),i.jsxs(ya,{children:[i.jsx(rC,{}),i.jsx(wD,{}),i.jsx(mC,{})]})]}),i.jsxs(cE,{id:ka.teammates,children:[i.jsx(gr,{index:0,dbMetadata:a}),i.jsx(gr,{index:1,dbMetadata:a}),i.jsx(gr,{index:2,dbMetadata:a})]}),i.jsx(Ms,{id:ka.characterStatsSimulation,children:i.jsx(VC,{})})]})]})})}function dE(){const e=q.useWatch(["characterId"],window.optimizerForm),a=q.useWatch(["characterEidolon"],window.optimizerForm);return i.jsx(Ul,{id:e,eidolon:a})}function mE(e){const{metadata:a}=e,t=q.useWatch(["lightCone"],window.optimizerForm),s=q.useWatch(["lightConeSuperimposition"],window.optimizerForm),o=q.useWatch(["characterId"],window.optimizerForm);return W.useEffect(()=>{var d;const r=Un({characterId:o,characterEidolon:0,lightCone:t,lightConeSuperimposition:s},a),c=Sa.get(r).defaults(),u=((d=V.getCharacterById(o))==null?void 0:d.form.lightConeConditionals)||{};J.mergeDefinedValues(c,u),window.optimizerForm.setFieldValue("lightConeConditionals",c)},[t,s,o]),i.jsxs(D,{vertical:!0,justify:"space-between",style:{height:"100%",marginBottom:8},children:[i.jsx(jl,{id:t,superImposition:s,dbMetadata:a}),i.jsx(uD,{})]})}function fE(e){const a=f.MAX_INT;e.statDisplay=window.store.getState().statDisplay||ks,e.memoDisplay=window.store.getState().memoDisplay||Wo,e.maxHp=we(e.maxHp,a),e.minHp=we(e.minHp,0),e.maxAtk=we(e.maxAtk,a),e.minAtk=we(e.minAtk,0),e.maxDef=we(e.maxDef,a),e.minDef=we(e.minDef,0),e.maxSpd=we(e.maxSpd,a),e.minSpd=we(e.minSpd,0),e.maxCr=we(e.maxCr,a,100),e.minCr=we(e.minCr,0,100),e.maxCd=we(e.maxCd,a,100),e.minCd=we(e.minCd,0,100),e.maxEhr=we(e.maxEhr,a,100),e.minEhr=we(e.minEhr,0,100),e.maxRes=we(e.maxRes,a,100),e.minRes=we(e.minRes,0,100),e.maxBe=we(e.maxBe,a,100),e.minBe=we(e.minBe,0,100),e.maxErr=we(e.maxErr,a,100),e.minErr=we(e.minErr,0,100),e.maxEhp=we(e.maxEhp,a),e.minEhp=we(e.minEhp,0),e.maxBasic=we(e.maxBasic,a),e.minBasic=we(e.minBasic,0),e.maxSkill=we(e.maxSkill,a),e.minSkill=we(e.minSkill,0),e.maxUlt=we(e.maxUlt,a),e.minUlt=we(e.minUlt,0),e.maxFua=we(e.maxFua,a),e.minFua=we(e.minFua,0),e.maxMemoSkill=we(e.maxMemoSkill,a),e.minMemoSkill=we(e.minMemoSkill,0),e.maxMemoTalent=we(e.maxMemoTalent,a),e.minMemoTalent=we(e.minMemoTalent,0),e.maxDot=we(e.maxDot,a),e.minDot=we(e.minDot,0),e.maxBreak=we(e.maxBreak,a),e.minBreak=we(e.minBreak,0),e.maxHeal=we(e.maxHeal,a),e.minHeal=we(e.minHeal,0),e.maxShield=we(e.maxShield,a),e.minShield=we(e.minShield,0),e.combatBuffs||(e.combatBuffs={});for(const t of Object.values(Vo))e.combatBuffs[t.key]=we(e.combatBuffs[t.key],0,t.percent?100:0);return e.characterConditionals||(e.characterConditionals={}),e.lightConeConditionals||(e.lightConeConditionals={}),e.mainHead=e.mainHead||[],e.mainHands=e.mainHands||[],e.mainBody=e.mainBody||[],e.mainFeet=e.mainFeet||[],e.mainPlanarSphere=e.mainPlanarSphere||[],e.mainLinkRope=e.mainLinkRope||[],e}function hE(e){var d;const a=e.characterId,t=b.clone(e),s=V.getMetadata(),o=a?s.characters[a]:null,r=a?V.getScoringMetadata(a):null;t.maxHp=Et(e.maxHp),t.minHp=gt(e.minHp),t.maxAtk=Et(e.maxAtk),t.minAtk=gt(e.minAtk),t.maxDef=Et(e.maxDef),t.minDef=gt(e.minDef),t.maxSpd=Et(e.maxSpd),t.minSpd=gt(e.minSpd),t.maxCr=Et(e.maxCr,!0),t.minCr=gt(e.minCr,!0),t.maxCd=Et(e.maxCd,!0),t.minCd=gt(e.minCd,!0),t.maxEhr=Et(e.maxEhr,!0),t.minEhr=gt(e.minEhr,!0),t.maxRes=Et(e.maxRes,!0),t.minRes=gt(e.minRes,!0),t.maxBe=Et(e.maxBe,!0),t.minBe=gt(e.minBe,!0),t.maxErr=Et(e.maxErr,!0),t.minErr=gt(e.minErr,!0),t.maxEhp=Et(e.maxEhp),t.minEhp=gt(e.minEhp),t.maxBasic=Et(e.maxBasic),t.minBasic=gt(e.minBasic),t.maxSkill=Et(e.maxSkill),t.minSkill=gt(e.minSkill),t.maxUlt=Et(e.maxUlt),t.minUlt=gt(e.minUlt),t.maxFua=Et(e.maxFua),t.minFua=gt(e.minFua),t.maxMemoSkill=Et(e.maxMemoSkill),t.minMemoSkill=gt(e.minMemoSkill),t.maxMemoTalent=Et(e.maxMemoTalent),t.minMemoTalent=gt(e.minMemoTalent),t.maxDot=Et(e.maxDot),t.minDot=gt(e.minDot),t.maxBreak=Et(e.maxBreak),t.minBreak=gt(e.minBreak),t.maxHeal=Et(e.maxHeal),t.minHeal=gt(e.minHeal),t.maxShield=Et(e.maxShield),t.minShield=gt(e.minShield);const l={};e.combatBuffs||(e.combatBuffs={});for(const m of Object.values(Vo))l[m.key]=gt(e.combatBuffs[m.key],m.percent);t.combatBuffs=l,t.setConditionals?J.mergeUndefinedValues(t.setConditionals,ji):t.setConditionals=ji;const c=lm();if(e.enemyLevel||(t.enemyLevel=c.enemyLevel),e.enemyCount||(t.enemyCount=c.enemyCount),e.enemyResistance||(t.enemyResistance=c.enemyResistance),e.enemyEffectResistance||(t.enemyEffectResistance=c.enemyEffectResistance),e.enemyElementalWeak==null&&(t.enemyElementalWeak=c.enemyElementalWeak),e.enemyWeaknessBroken==null&&(t.enemyWeaknessBroken=c.enemyWeaknessBroken),e.enemyMaxToughness||(t.enemyMaxToughness=c.enemyMaxToughness),t.characterId){const m=Ta.get(e).defaults();t.characterConditionals||(t.characterConditionals={});for(const h of Object.keys(m))t.characterConditionals[h]==null&&(t.characterConditionals[h]=m[h])}if(t.lightCone){const m=Un(e,s),h=Sa.get(m).defaults();t.lightConeConditionals||(t.lightConeConditionals={});for(const g of Object.keys(h))t.lightConeConditionals[g]==null&&(t.lightConeConditionals[g]=h[g])}else t.lightCone=void 0,t.lightConeLevel=80,t.lightConeSuperimposition=1,t.lightConeConditionals={};t.statDisplay||(t.statDisplay=ks),t.memoDisplay||(t.memoDisplay=Wo);const u=V.getCharacterById(a);if(u)t.rank=u.rank;else if(t.rank=V.getCharacters().length,o&&r){for(const m of r.presets||[])m.apply(t);t.mainBody=r.parts[f.Parts.Body],t.mainFeet=r.parts[f.Parts.Feet],t.mainPlanarSphere=r.parts[f.Parts.PlanarSphere],t.mainLinkRope=r.parts[f.Parts.LinkRope],t.weights=r.stats,t.weights.headHands=0,t.weights.bodyFeet=0,t.weights.sphereRope=0,sm(t,r)}if(t.weights||(t.weights=il(a)),t.weights.headHands||(t.weights.headHands=0),t.weights.bodyFeet||(t.weights.bodyFeet=0),t.weights.sphereRope||(t.weights.sphereRope=0),t.exclude||(t.exclude=[]),t.exclude=t.exclude.filter(m=>V.getCharacterById(m)),t.includeEquippedRelics==null&&(t.includeEquippedRelics=!0),[1,3,5].includes(t.enemyCount)||(t.enemyCount=1),t.teammate0=br(e.teammate0),t.teammate1=br(e.teammate1),t.teammate2=br(e.teammate2),t.weights||(t.weights=il()),t.resultSort||o&&(t.resultSort=o.scoringMetadata.sortOption.key),t.resultsLimit||(t.resultsLimit=1024),t.mainStatUpscaleLevel||(t.mainStatUpscaleLevel=15),t.comboStateJson||(t.comboStateJson="{}"),!t.comboAbilities&&o){const m=(d=o.scoringMetadata)==null?void 0:d.simulation;t.comboAbilities=(m==null?void 0:m.comboAbilities)??[null,"BASIC"],t.comboDot=(m==null?void 0:m.comboDot)??0,t.comboBreak=(m==null?void 0:m.comboBreak)??0}t.comboType||(t.comboType="simple");for(const[m,h]of Object.entries(t.setConditionals)){const g=m;if(!qi[g]){delete e.setConditionals[g],delete t.setConditionals[g];continue}qi[g].type===he.SELECT?typeof h[1]!="number"&&(t.setConditionals[g][1]=ji[g][1]):typeof h[1]!="boolean"&&(t.setConditionals[g][1]=ji[g][1])}return t}function we(e,a,t=0){return e==null?a:(t=t||1,e/t)}function gt(e,a=!1){if(e!=null)return e==0?void 0:parseFloat((a?e*100:e).toFixed(3))}function Et(e,a=!1){if(e!=null)return e==f.MAX_INT?void 0:parseFloat((a?e*100:e).toFixed(3))}function br(e){return e!=null&&e.characterId?{characterId:e.characterId??null,characterEidolon:e.characterEidolon??null,lightCone:e.lightCone??null,lightConeSuperimposition:e.lightConeSuperimposition??null,characterConditionals:d0(e.characterConditionals),lightConeConditionals:d0(e.lightConeConditionals)}:po()}function d0(e){if(!e)return null;for(const a of Object.keys(e))e[a]==null&&delete e[a];return e}function $l(){return window.optimizerGrid.current.api}let Vn,Zn,al,$t=[],nl,ds,ai;const nm={[n.HP]:!0,[n.ATK]:!0,[n.DEF]:!0,[n.SPD]:!0,[n.CR]:!0,[n.CD]:!0,[n.EHR]:!0,[n.RES]:!0,[n.BE]:!0,[n.ERR]:!0,[n.OHB]:!0,ED:!0,WEIGHT:!0,EHP:!0,BASIC:!0,SKILL:!0,ULT:!0,FUA:!0,MEMO_SKILL:!0,MEMO_TALENT:!0,DOT:!0,BREAK:!0,COMBO:!0,HEAL:!0,SHIELD:!0,xATK:!0,xDEF:!0,xHP:!0,xSPD:!0,xCR:!0,xCD:!0,xEHR:!0,xRES:!0,xBE:!0,xERR:!0,xOHB:!0,xELEMENTAL_DMG:!0,mATK:!0,mDEF:!0,mHP:!0,mSPD:!0,mCR:!0,mCD:!0,mEHR:!0,mRES:!0,mBE:!0,mERR:!0,mOHB:!0,mELEMENTAL_DMG:!0,mxATK:!0,mxDEF:!0,mxHP:!0,mxSPD:!0,mxCR:!0,mxCD:!0,mxEHR:!0,mxRES:!0,mxBE:!0,mxERR:!0,mxOHB:!0,mxELEMENTAL_DMG:!0,mxEHP:!0},SE=Object.keys(nm),de={setMetadata:(e,a)=>{Zn=e,Vn=a},getAggregations:()=>al,setRows:e=>{$t=e},setTopRow:(e,a=!1)=>{var s,o,r,l,c;if(a){(s=window.optimizerGrid.current)==null||s.api.updateGridOptions({pinnedTopRowData:[e]});return}const t=((l=(r=(o=window.optimizerGrid)==null?void 0:o.current)==null?void 0:r.api)==null?void 0:l.getGridOption("pinnedTopRowData"))??[];t[0]=e,(c=window.optimizerGrid.current)==null||c.api.updateGridOptions({pinnedTopRowData:t})},getRows:()=>$t,scrollToGrid:()=>{const e=document.getElementById("optimizerGridContainer");e&&b.smoothScrollNearest(e,250)},getForm:()=>{const e=window.optimizerForm.getFieldsValue();return de.displayToForm(e)},formToDisplay:e=>hE(e),displayToForm:e=>fE(e),equipClicked:()=>{var r,l,c;console.log("Equip clicked");const e=de.getForm(),a=e.characterId;if(!a)return;V.addFromForm(e);const t=(r=window.optimizerGrid.current)==null?void 0:r.api.getSelectedNodes();if(!t||t.length==0||(c=(l=t[0])==null?void 0:l.data)!=null&&c.statSim)return;const s=t[0].data,o=de.calculateRelicIdsFromId(s.id);V.equipRelicIdsToCharacter(Object.values(o),a),oe.success("Equipped relics"),de.setTopRow(s),window.store.getState().setOptimizerBuild(o),Pe.delayedSave(),de.updateFilters()},cellClicked:e=>{var o,r;const a=e.data,t=$l();if(window.store.getState().setOptimizerSelectedRowData(a),e.rowPinned=="top"){console.log("Top row clicked",a);const l=de.getForm();if(a&&l.characterId){a.id||t.deselectAll();const c=V.getCharacterById(l.characterId);if(c&&a.id){const u=a.id,d=de.calculateRelicIdsFromId(u,l);window.store.getState().setOptimizerBuild(d);const m=t.getRowNode(String(a.id));if(m){const h=t.getGridOption("pinnedTopRowData")??[];String(h[0].id)==String(m.data.id)?(o=window.optimizerGrid.current)==null||o.api.deselectAll():m.setSelected(!0)}}else c&&window.store.getState().setOptimizerBuild(c.equipped)}return}if(console.log("cellClicked",e),a.statSim){const l=a.statSim.key;window.store.getState().setSelectedStatSimulations([l]),window.store.getState().setOptimizerBuild({}),(r=window.optimizerGrid.current)==null||r.api.deselectAll();return}const s=de.calculateRelicIdsFromId(a.id);window.store.getState().setOptimizerBuild(s)},getColumnsToAggregate:()=>SE,getColumnsToAggregateMap:()=>nm,resetDataSource:()=>{var e,a;(a=(e=window.optimizerGrid.current)==null?void 0:e.api)==null||a.updateGridOptions({datasource:de.getDataSource(ai,ds)})},getDataSource:(e,a)=>(e&&(ai=e),a&&(ds=a),{getRows:t=>{var s,o,r;al=void 0,(o=(s=window==null?void 0:window.optimizerGrid)==null?void 0:s.current)!=null&&o.api&&((r=window.optimizerGrid.current)==null||r.api.setGridOption("loading",!0)),b.sleep(100).then(()=>{var l,c,u;if(t.sortModel.length>0&&t.sortModel[0]!=ai&&(ai=t.sortModel[0],pE()),ds){gE(ds);const d=nl.slice(t.startRow,t.endRow),m=[];for(const h of d)m.push($t[h]);m0(m),t.successCallback(m,nl.length)}else{const d=$t.slice(t.startRow,t.endRow);m0(d),t.successCallback(d,$t.length)}(c=(l=window==null?void 0:window.optimizerGrid)==null?void 0:l.current)!=null&&c.api&&((u=window.optimizerGrid.current)==null||u.api.setGridOption("loading",!1)),de.redrawRows()})}}),calculateRelicsFromId:(e,a)=>{if(e===-1){const x=a??Ql[window.store.getState().optimizationId],O=V.getCharacterById(x.characterId).equipped,H={};for(const _ of Object.keys(O))H[_]=V.getRelicById(O[_]);return H}const t=Zn.lSize,s=Zn.pSize,o=Zn.fSize,r=Zn.bSize,l=Zn.gSize,c=Zn.hSize,u=e,d=u%t,m=(u-d)/t%s,h=(u-m*t-d)/(t*s)%o,g=(u-h*s*t-m*t-d)/(t*s*o)%r,C=(u-g*o*s*t-h*s*t-m*t-d)/(t*s*o*r)%l,M=(u-C*r*o*s*t-g*o*s*t-h*s*t-m*t-d)/(t*s*o*r*l)%c;return{Head:Vn.Head[M],Hands:Vn.Hands[C],Body:Vn.Body[g],Feet:Vn.Feet[h],PlanarSphere:Vn.PlanarSphere[m],LinkRope:Vn.LinkRope[d]}},calculateRelicIdsFromId:(e,a)=>{var s,o,r,l,c,u;const t=de.calculateRelicsFromId(e,a);return{Head:(s=t.Head)==null?void 0:s.id,Hands:(o=t.Hands)==null?void 0:o.id,Body:(r=t.Body)==null?void 0:r.id,Feet:(l=t.Feet)==null?void 0:l.id,PlanarSphere:(c=t.PlanarSphere)==null?void 0:c.id,LinkRope:(u=t.LinkRope)==null?void 0:u.id}},validateForm:e=>{if(console.log("validate",e),!e.lightCone||!e.lightConeSuperimposition)return oe.error("Missing light cone fields"),console.log("Missing light cone"),!1;if(!e.characterId||e.characterEidolon==null)return oe.error("Missing character fields"),console.log("Missing character"),!1;if(!e.resultsLimit||!e.resultSort)return oe.error("Missing optimization target fields"),console.log("Missing optimization target fields"),!1;if(Object.values(f.Stats).map(o=>e.weights[o]).filter(o=>!!o).length==0)return oe.error("All substat weights are set to 0. Make sure to set the substat weights for your character or use the Recommended presets button.",10),console.log("Top percent"),!1;const a=V.getMetadata(),t=a.lightCones[e.lightCone],s=a.characters[e.characterId];return t.path!=s.path&&(oe.warning("Character path doesn't match light cone path.",10),console.log("Path mismatch")),!0},updateFilters:()=>{if(window.optimizerForm&&window.onOptimizerFormValuesChange){const e=de.getForm();window.onOptimizerFormValuesChange({},e)}},resetFilters:()=>{const e=de.getForm(),a={characterEidolon:e.characterEidolon,characterId:e.characterId,characterLevel:80,enhance:9,grade:5,mainStatUpscaleLevel:15,rankFilter:!0,includeEquippedRelics:!0,keepCurrentRelics:!1,lightCone:e.lightCone,lightConeLevel:80,lightConeSuperimposition:e.lightConeSuperimposition,mainBody:[],mainFeet:[],mainHands:[],mainHead:[],mainLinkRope:[],mainPlanarSphere:[],ornamentSets:[],relicSets:[]};window.optimizerForm.setFieldsValue(de.formToDisplay(a)),de.updateFilters()},setCharacter:e=>{window.store.getState().setOptimizerTabFocusCharacter(e),window.optimizerForm.setFieldValue("characterId",e),window.store.getState().setSavedSessionKey($e.optimizerCharacterId,e),Pe.delayedSave()},updateCharacter:e=>{if(console.log("@updateCharacter",e),!e)return;de.setRows([]),de.resetDataSource();const a=V.getCharacterById(e),t=a?a.form:os({id:e}),s=de.formToDisplay(t);window.optimizerForm.setFieldsValue(s);const o=de.displayToForm(s),r=Bo(o,!0);window.store.getState().setComboState(r),setTimeout(()=>{var l,c,u;window.store.getState().setOptimizerFormSelectedLightCone(t.lightCone),window.store.getState().setOptimizerFormSelectedLightConeSuperimposition(t.lightConeSuperimposition),window.store.getState().setOptimizerTabFocusCharacter(e),window.store.getState().setOptimizerFormCharacterEidolon(t.characterEidolon),window.store.getState().setStatDisplay(t.statDisplay??ks),window.store.getState().setStatSimulations(((l=t.statSim)==null?void 0:l.simulations)??[]),window.store.getState().setOptimizerSelectedRowData(null),(u=(c=window.optimizerGrid.current)==null?void 0:c.api)==null||u.deselectAll(),ss(o),kl(o),window.onOptimizerFormValuesChange({},s)},50)},redrawRows:()=>{var e;(e=window.optimizerGrid.current)==null||e.api.refreshCells({force:!0})},applyRowFilters:()=>{const e=de.getForm();e.statDisplay=window.store.getState().statDisplay,ds=e,console.log("Apply filters to rows",e),de.resetDataSource()}};function m0(e){const a=Ht.getZeroes();for(const o of de.getColumnsToAggregate())a[o]=f.MAX_INT;function t(o){a[o]=f.MAX_INT,s[o]=0}const s=Ht.getZeroes();a.ED=f.MAX_INT,s.ED=0,a.WEIGHT=f.MAX_INT,s.WEIGHT=0,a.EHP=f.MAX_INT,s.EHP=0,t("BASIC"),t("SKILL"),t("ULT"),t("FUA"),t("MEMO_SKILL"),t("MEMO_TALENT"),t("DOT"),t("BREAK"),t("COMBO"),t("HEAL"),t("SHIELD"),t("xATK"),t("xDEF"),t("xHP"),t("xSPD"),t("xCR"),t("xCD"),t("xEHR"),t("xRES"),t("xBE"),t("xERR"),t("xOHB"),t("xELEMENTAL_DMG"),t("mATK"),t("mDEF"),t("mHP"),t("mSPD"),t("mCR"),t("mCD"),t("mEHR"),t("mRES"),t("mBE"),t("mERR"),t("mOHB"),t("mELEMENTAL_DMG"),t("mxATK"),t("mxDEF"),t("mxHP"),t("mxSPD"),t("mxCR"),t("mxCD"),t("mxEHR"),t("mxRES"),t("mxBE"),t("mxERR"),t("mxOHB"),t("mxELEMENTAL_DMG"),t("mxEHP");for(const o of e)for(const r of de.getColumnsToAggregate()){const l=o[r];l<a[r]&&(a[r]=l),l>s[r]&&(s[r]=l)}al={min:a,max:s}}function pE(){ai.sort=="desc"?gc($t).desc(e=>e[ai.colId]):gc($t).asc(e=>e[ai.colId])}function gE(e){const a=e.statDisplay=="combat",t=e.memoDisplay=="memo",s=[];if(a)if(t)for(let o=0;o<$t.length;o++){const r=$t[o];r.mxHP>=e.minHp&&r.mxHP<=e.maxHp&&r.mxATK>=e.minAtk&&r.mxATK<=e.maxAtk&&r.mxDEF>=e.minDef&&r.mxDEF<=e.maxDef&&r.mxSPD>=e.minSpd&&r.mxSPD<=e.maxSpd&&r.mxCR>=e.minCr&&r.mxCR<=e.maxCr&&r.mxCD>=e.minCd&&r.mxCD<=e.maxCd&&r.mxEHR>=e.minEhr&&r.mxEHR<=e.maxEhr&&r.mxRES>=e.minRes&&r.mxRES<=e.maxRes&&r.mxBE>=e.minBe&&r.mxBE<=e.maxBe&&r.mxERR>=e.minErr&&r.mxERR<=e.maxErr&&r.EHP>=e.minEhp&&r.EHP<=e.maxEhp&&r.BASIC>=e.minBasic&&r.BASIC<=e.maxBasic&&r.SKILL>=e.minSkill&&r.SKILL<=e.maxSkill&&r.ULT>=e.minUlt&&r.ULT<=e.maxUlt&&r.FUA>=e.minFua&&r.FUA<=e.maxFua&&r.MEMO_SKILL>=e.minMemoSkill&&r.MEMO_SKILL<=e.maxMemoSkill&&r.MEMO_TALENT>=e.minMemoTalent&&r.MEMO_TALENT<=e.maxMemoTalent&&r.DOT>=e.minDot&&r.DOT<=e.maxDot&&r.BREAK>=e.minBreak&&r.BREAK<=e.maxBreak&&r.HEAL>=e.minHeal&&r.HEAL<=e.maxHeal&&r.SHIELD>=e.minShield&&r.SHIELD<=e.maxShield&&s.push(o)}else for(let o=0;o<$t.length;o++){const r=$t[o];r.xHP>=e.minHp&&r.xHP<=e.maxHp&&r.xATK>=e.minAtk&&r.xATK<=e.maxAtk&&r.xDEF>=e.minDef&&r.xDEF<=e.maxDef&&r.xSPD>=e.minSpd&&r.xSPD<=e.maxSpd&&r.xCR>=e.minCr&&r.xCR<=e.maxCr&&r.xCD>=e.minCd&&r.xCD<=e.maxCd&&r.xEHR>=e.minEhr&&r.xEHR<=e.maxEhr&&r.xRES>=e.minRes&&r.xRES<=e.maxRes&&r.xBE>=e.minBe&&r.xBE<=e.maxBe&&r.xERR>=e.minErr&&r.xERR<=e.maxErr&&r.EHP>=e.minEhp&&r.EHP<=e.maxEhp&&r.BASIC>=e.minBasic&&r.BASIC<=e.maxBasic&&r.SKILL>=e.minSkill&&r.SKILL<=e.maxSkill&&r.ULT>=e.minUlt&&r.ULT<=e.maxUlt&&r.FUA>=e.minFua&&r.FUA<=e.maxFua&&r.MEMO_SKILL>=e.minMemoSkill&&r.MEMO_SKILL<=e.maxMemoSkill&&r.MEMO_TALENT>=e.minMemoTalent&&r.MEMO_TALENT<=e.maxMemoTalent&&r.DOT>=e.minDot&&r.DOT<=e.maxDot&&r.BREAK>=e.minBreak&&r.BREAK<=e.maxBreak&&r.HEAL>=e.minHeal&&r.HEAL<=e.maxHeal&&r.SHIELD>=e.minShield&&r.SHIELD<=e.maxShield&&s.push(o)}else if(t)for(let o=0;o<$t.length;o++){const r=$t[o];r.mHP>=e.minHp&&r.mHP<=e.maxHp&&r.mATK>=e.minAtk&&r.mATK<=e.maxAtk&&r.mDEF>=e.minDef&&r.mDEF<=e.maxDef&&r.mSPD>=e.minSpd&&r.mSPD<=e.maxSpd&&r.mCR>=e.minCr&&r.mCR<=e.maxCr&&r.mCD>=e.minCd&&r.mCD<=e.maxCd&&r.mEHR>=e.minEhr&&r.mEHR<=e.maxEhr&&r.mRES>=e.minRes&&r.mRES<=e.maxRes&&r.mBE>=e.minBe&&r.mBE<=e.maxBe&&r.mERR>=e.minErr&&r.mERR<=e.maxErr&&r.EHP>=e.minEhp&&r.EHP<=e.maxEhp&&r.BASIC>=e.minBasic&&r.BASIC<=e.maxBasic&&r.SKILL>=e.minSkill&&r.SKILL<=e.maxSkill&&r.ULT>=e.minUlt&&r.ULT<=e.maxUlt&&r.FUA>=e.minFua&&r.FUA<=e.maxFua&&r.MEMO_SKILL>=e.minMemoSkill&&r.MEMO_SKILL<=e.maxMemoSkill&&r.MEMO_TALENT>=e.minMemoTalent&&r.MEMO_TALENT<=e.maxMemoTalent&&r.DOT>=e.minDot&&r.DOT<=e.maxDot&&r.BREAK>=e.minBreak&&r.BREAK<=e.maxBreak&&r.HEAL>=e.minHeal&&r.HEAL<=e.maxHeal&&r.SHIELD>=e.minShield&&r.SHIELD<=e.maxShield&&s.push(o)}else for(let o=0;o<$t.length;o++){const r=$t[o];r[n.HP]>=e.minHp&&r[n.HP]<=e.maxHp&&r[n.ATK]>=e.minAtk&&r[n.ATK]<=e.maxAtk&&r[n.DEF]>=e.minDef&&r[n.DEF]<=e.maxDef&&r[n.SPD]>=e.minSpd&&r[n.SPD]<=e.maxSpd&&r[n.CR]>=e.minCr&&r[n.CR]<=e.maxCr&&r[n.CD]>=e.minCd&&r[n.CD]<=e.maxCd&&r[n.EHR]>=e.minEhr&&r[n.EHR]<=e.maxEhr&&r[n.RES]>=e.minRes&&r[n.RES]<=e.maxRes&&r[n.BE]>=e.minBe&&r[n.BE]<=e.maxBe&&r[n.ERR]>=e.minErr&&r[n.ERR]<=e.maxErr&&r.EHP>=e.minEhp&&r.EHP<=e.maxEhp&&r.BASIC>=e.minBasic&&r.BASIC<=e.maxBasic&&r.SKILL>=e.minSkill&&r.SKILL<=e.maxSkill&&r.ULT>=e.minUlt&&r.ULT<=e.maxUlt&&r.FUA>=e.minFua&&r.FUA<=e.maxFua&&r.MEMO_SKILL>=e.minMemoSkill&&r.MEMO_SKILL<=e.maxMemoSkill&&r.MEMO_TALENT>=e.minMemoTalent&&r.MEMO_TALENT<=e.maxMemoTalent&&r.DOT>=e.minDot&&r.DOT<=e.maxDot&&r.BREAK>=e.minBreak&&r.BREAK<=e.maxBreak&&r.HEAL>=e.minHeal&&r.HEAL<=e.maxHeal&&r.SHIELD>=e.minShield&&r.SHIELD<=e.maxShield&&s.push(o)}nl=s}const me={fnAshblazingSet:e=>({name:"fnAshblazingSet",value:e,apply:a=>{a.setConditionals[G.TheAshblazingGrandDuke][1]=e}}),fnPioneerSet:e=>({name:"fnPioneerSet",value:e,apply:a=>{a.setConditionals[G.PioneerDiverOfDeadWaters][1]=e}}),fnSacerdosSet:e=>({name:"fnSacerdosSet",value:e,apply:a=>{a.setConditionals[G.SacerdosRelivedOrdeal][1]=e}}),PRISONER_SET:{name:"PRISONER_SET",value:3,apply:e=>{e.setConditionals[G.PrisonerInDeepConfinement][1]=3}},WASTELANDER_SET:{name:"WASTELANDER_SET",value:2,apply:e=>{e.setConditionals[G.WastelanderOfBanditryDesert][1]=2}},VALOROUS_SET:{name:"VALOROUS_SET",value:!0,apply:e=>{e.setConditionals[G.TheWindSoaringValorous][1]=!0}},BANANA_SET:{name:"BANANA_SET",value:!0,apply:e=>{e.setConditionals[G.TheWondrousBananAmusementPark][1]=!0}},GENIUS_SET:{name:"GENIUS_SET",value:!0,apply:e=>{e.setConditionals[G.GeniusOfBrilliantStars][1]=!0}}};function qo(e){var t;const a={state:[{colId:e,sort:"desc"}],defaultState:{sort:null}};(t=window.optimizerGrid.current)==null||t.api.applyColumnState(a)}function im(e){return{SPD0:{key:"SPD0",label:e("SpdValues.SPD0"),value:void 0},SPD111:{key:"SPD111",label:e("SpdValues.SPD111"),value:111.112},SPD114:{key:"SPD114",label:e("SpdValues.SPD114"),value:114.286},SPD120:{key:"SPD120",label:e("SpdValues.SPD120"),value:120},SPD133:{key:"SPD133",label:e("SpdValues.SPD133"),value:133.334},SPD142:{key:"SPD142",label:e("SpdValues.SPD142"),value:142.858},SPD155:{key:"SPD155",label:e("SpdValues.SPD155"),value:155.556},SPD160:{key:"SPD160",label:e("SpdValues.SPD160"),value:160},SPD171:{key:"SPD171",label:e("SpdValues.SPD171"),value:171.429},SPD177:{key:"SPD177",label:e("SpdValues.SPD177"),value:177.778},SPD200:{key:"SPD200",label:e("SpdValues.SPD200"),value:200}}}const bE=()=>{const{t:e}=ee("optimizerTab",{keyPrefix:"Presets"}),a=window.store(c=>c.optimizerTabFocusCharacter),t=W.useMemo(()=>im(e),[e]),s=Object.values(t);s.map(c=>c.label=i.jsx("div",{style:{minWidth:450},children:c.label}));function o(c){return{key:c,label:c,children:s}}const l={items:W.useMemo(function(){if(!a)return[];const c=V.getMetadata().characters[a];return c?[o(e("StandardLabel",{id:c.id}))]:[]},[a,e]),onClick:c=>{t[c.key]?f0(t[c.key].value,a):oe.warning(e("PresetNotAvailable"))}};return i.jsx(ws.Button,{className:"full-width-dropdown-button",type:"primary",menu:l,onClick:()=>f0(t.SPD0.value,a),icon:i.jsx(Uo,{}),style:{flex:1,width:"100%"},children:e("RecommendedPresets")})};function f0(e,a){if(!a)return;const t=V.getMetadata().characters[a],s=b.clone(t.scoringMetadata),o=de.formToDisplay(de.getForm()),r=de.formToDisplay(os(t));o.setConditionals=r.setConditionals;const l=window.store.getState().scoringMetadataOverrides[a];l&&(J.mergeDefinedValues(s.parts,l.parts),J.mergeDefinedValues(s.stats,l.stats)),o.minSpd=e,sm(o,s);const c=s.sortOption;o.resultSort=c.key,qo(c.combatGridColumn),window.optimizerForm.setFieldsValue(o),window.onOptimizerFormValuesChange({},o)}function sm(e,a){var t,s,o;J.mergeUndefinedValues(e,os()),e.comboAbilities=((t=a==null?void 0:a.simulation)==null?void 0:t.comboAbilities)||[null,"BASIC"],e.comboDot=((s=a==null?void 0:a.simulation)==null?void 0:s.comboDot)||0,e.comboBreak=((o=a==null?void 0:a.simulation)==null?void 0:o.comboBreak)||0,e.maxSpd=void 0,e.mainBody=a.parts[f.Parts.Body],e.mainFeet=a.parts[f.Parts.Feet],e.mainPlanarSphere=a.parts[f.Parts.PlanarSphere],e.mainLinkRope=a.parts[f.Parts.LinkRope],e.weights={...e.weights,...a.stats},e.weights.headHands=e.weights.headHands||0,e.weights.bodyFeet=e.weights.bodyFeet||0,e.weights.sphereRope=e.weights.sphereRope||0,rm(e),om(e)}function om(e){var s;const a=V.getMetadata().characters[e.characterId],t=((s=a==null?void 0:a.scoringMetadata)==null?void 0:s.presets)??[];for(const o of t)o.apply(e)}function rm(e){const a=V.getMetadata().characters[e.characterId];J.mergeUndefinedValues(e.setConditionals,ji);const t=a==null?void 0:a.element;e.setConditionals[G.GeniusOfBrilliantStars][1]=t==Eo.Quantum,e.setConditionals[G.ForgeOfTheKalpagniLantern][1]=t==Eo.Fire;const s=a==null?void 0:a.path;e.setConditionals[G.HeroOfTriumphantSong][1]=s==Pa.Remembrance}function il(e){if(e){const a=b.clone(V.getScoringMetadata(e));return a.stats.headHands=0,a.stats.bodyFeet=0,a.stats.sphereRope=0,a.stats}return{[f.Stats.HP_P]:1,[f.Stats.ATK_P]:1,[f.Stats.DEF_P]:1,[f.Stats.SPD_P]:1,[f.Stats.HP]:1,[f.Stats.ATK]:1,[f.Stats.DEF]:1,[f.Stats.SPD]:1,[f.Stats.CD]:1,[f.Stats.CR]:1,[f.Stats.EHR]:1,[f.Stats.RES]:1,[f.Stats.BE]:1,headHands:0,bodyFeet:0,sphereRope:0}}function os(e){var l,c;const a=(l=V.getMetadata().characters[e==null?void 0:e.id])==null?void 0:l.scoringMetadata,t=(a==null?void 0:a.parts)||{},s=(a==null?void 0:a.stats)||il(),o={};Object.values(Vo).map(u=>o[u.key]=0);const r=b.clone({characterId:e==null?void 0:e.id,mainBody:t[f.Parts.Body]||[],mainFeet:t[f.Parts.Feet]||[],mainPlanarSphere:t[f.Parts.PlanarSphere]||[],mainLinkRope:t[f.Parts.LinkRope]||[],relicSets:[],ornamentSets:[],characterLevel:80,characterEidolon:0,lightConeLevel:80,lightConeSuperimposition:1,mainStatUpscaleLevel:15,rankFilter:!0,includeEquippedRelics:!0,keepCurrentRelics:!1,enhance:9,grade:5,mainHead:[],mainHands:[],statDisplay:ks,memoDisplay:Wo,weights:s,setConditionals:ji,teammate0:po(),teammate1:po(),teammate2:po(),resultSort:a==null?void 0:a.sortOption.key,resultsLimit:1024,combatBuffs:o,combo:{BASIC:0,SKILL:0,ULT:0,FUA:0,DOT:0,BREAK:0},comboStateJson:"{}",...lm()});return rm(r),om(r),(c=a==null?void 0:a.simulation)!=null&&c.comboAbilities&&(r.comboAbilities=a.simulation.comboAbilities,r.comboDot=a.simulation.comboDot,r.comboBreak=a.simulation.comboBreak),r}function po(){return{characterId:void 0,characterEidolon:0,lightCone:void 0,lightConeSuperimposition:1}}function lm(){return{enemyLevel:95,enemyCount:1,enemyResistance:.2,enemyEffectResistance:.2,enemyMaxToughness:360,enemyElementalWeak:!0,enemyWeaknessBroken:!1}}const ji={[G.PasserbyOfWanderingCloud]:[void 0,!0],[G.MusketeerOfWildWheat]:[void 0,!0],[G.KnightOfPurityPalace]:[void 0,!0],[G.HunterOfGlacialForest]:[void 0,!0],[G.ChampionOfStreetwiseBoxing]:[void 0,5],[G.GuardOfWutheringSnow]:[void 0,!0],[G.FiresmithOfLavaForging]:[void 0,!0],[G.GeniusOfBrilliantStars]:[void 0,!0],[G.BandOfSizzlingThunder]:[void 0,!0],[G.EagleOfTwilightLine]:[void 0,!0],[G.ThiefOfShootingMeteor]:[void 0,!0],[G.WastelanderOfBanditryDesert]:[void 0,1],[G.LongevousDisciple]:[void 0,2],[G.MessengerTraversingHackerspace]:[void 0,!1],[G.TheAshblazingGrandDuke]:[void 0,0],[G.PrisonerInDeepConfinement]:[void 0,0],[G.PioneerDiverOfDeadWaters]:[void 0,2],[G.WatchmakerMasterOfDreamMachinations]:[void 0,!1],[G.IronCavalryAgainstTheScourge]:[void 0,!0],[G.TheWindSoaringValorous]:[void 0,!1],[G.SacerdosRelivedOrdeal]:[void 0,0],[G.ScholarLostInErudition]:[void 0,!0],[G.HeroOfTriumphantSong]:[void 0,!1],[G.PoetOfMourningCollapse]:[void 0,!0],[G.SpaceSealingStation]:[void 0,!0],[G.FleetOfTheAgeless]:[void 0,!0],[G.PanCosmicCommercialEnterprise]:[void 0,!0],[G.BelobogOfTheArchitects]:[void 0,!0],[G.CelestialDifferentiator]:[void 0,!1],[G.InertSalsotto]:[void 0,!0],[G.TaliaKingdomOfBanditry]:[void 0,!0],[G.SprightlyVonwacq]:[void 0,!0],[G.RutilantArena]:[void 0,!0],[G.BrokenKeel]:[void 0,!0],[G.FirmamentFrontlineGlamoth]:[void 0,!0],[G.PenaconyLandOfTheDreams]:[void 0,!0],[G.SigoniaTheUnclaimedDesolation]:[void 0,4],[G.IzumoGenseiAndTakamaDivineRealm]:[void 0,!0],[G.DuranDynastyOfRunningWolves]:[void 0,5],[G.ForgeOfTheKalpagniLantern]:[void 0,!1],[G.LushakaTheSunkenSeas]:[void 0,!1],[G.TheWondrousBananAmusementPark]:[void 0,!1],[G.BoneCollectionsSereneDemesne]:[void 0,!0],[G.GiantTreeOfRaptBrooding]:[void 0,!0]},{Text:no}=_e,DE=5,Dr=zt.span`
    white-space: wrap !important;
    word-break: break-word !important;`,Je={RelicEquippingBehavior:{name:"RelicEquippingBehavior",Swap:"Swap",Replace:"Replace"},PermutationsSidebarBehavior:{name:"PermutationsSidebarBehavior",NoShow:"Do Not Show",ShowXL:"Show XL",ShowXXL:"Show XXL"},RelicPotentialLoadBehavior:{name:"RelicPotentialLoadBehavior",ScoreAtStartup:"Score at startup",ManuallyClickReapplyScores:"Manually click reapply scores"},ExpandedInfoPanelPosition:{name:"ExpandedInfoPanelPosition",Above:"Above",Below:"Below"}},cm={[Je.RelicEquippingBehavior.name]:Je.RelicEquippingBehavior.Replace,[Je.PermutationsSidebarBehavior.name]:Je.PermutationsSidebarBehavior.ShowXL,[Je.RelicPotentialLoadBehavior.name]:Je.RelicPotentialLoadBehavior.ScoreAtStartup,[Je.ExpandedInfoPanelPosition.name]:Je.ExpandedInfoPanelPosition.Below},CE=()=>{const[e]=q.useForm(),a=window.store(h=>h.settingsDrawerOpen),t=window.store(h=>h.setSettingsDrawerOpen),s=window.store(h=>h.settings),o=window.store(h=>h.setSettings),{t:r}=ee("settings"),l=[{value:Je.RelicEquippingBehavior.Replace,label:i.jsx("span",{children:r("RelicEquippingBehaviour.Replace")})},{value:Je.RelicEquippingBehavior.Swap,label:i.jsx("span",{children:r("RelicEquippingBehaviour.Swap")})}],c=[{value:Je.PermutationsSidebarBehavior.ShowXL,label:i.jsx("span",{children:r("PermutationSidebarBehaviour.XL")})},{value:Je.PermutationsSidebarBehavior.ShowXXL,label:i.jsx("span",{children:r("PermutationSidebarBehaviour.XXL")})},{value:Je.PermutationsSidebarBehavior.NoShow,label:i.jsx("span",{children:r("PermutationSidebarBehaviour.NoShow")})}],u=[{value:Je.RelicPotentialLoadBehavior.ScoreAtStartup,label:i.jsx("span",{children:r("RelicPotentialLoadBehaviour.OnStartup")})},{value:Je.RelicPotentialLoadBehavior.ManuallyClickReapplyScores,label:i.jsx("span",{children:r("RelicPotentialLoadBehaviour.Manual")})}],d=[{value:Je.ExpandedInfoPanelPosition.Above,label:i.jsx("span",{children:"Show expanded info above relics preview"})},{value:Je.ExpandedInfoPanelPosition.Below,label:i.jsx("span",{children:"Default: Show expanded info below relics preview"})}];W.useEffect(()=>{const h=b.clone(cm),g=J.mergeDefinedValues(h,s);o(g),e.setFieldsValue(g)},[]);const m=(h,g)=>{o(g),Pe.delayedSave()};return i.jsx(q,{form:e,onValuesChange:m,children:i.jsx(Si,{title:r("Title"),placement:"right",onClose:()=>t(!1),open:a,width:900,forceRender:!0,children:i.jsxs(D,{vertical:!0,gap:DE,children:[i.jsxs(D,{justify:"space-between",align:"center",children:[i.jsx(no,{children:r("RelicEquippingBehaviour.Label")}),i.jsx(q.Item,{name:Je.RelicEquippingBehavior.name,children:i.jsx(ne,{style:{width:500},options:l})})]}),i.jsxs(D,{justify:"space-between",align:"center",children:[i.jsx(no,{children:r("PermutationSidebarBehaviour.Label")}),i.jsx(q.Item,{name:Je.PermutationsSidebarBehavior.name,children:i.jsx(ne,{style:{width:500},options:c,optionRender:h=>i.jsx(Dr,{children:h.label})})})]}),i.jsxs(D,{justify:"space-between",align:"center",children:[i.jsx(no,{children:r("RelicPotentialLoadBehaviour.Label")}),i.jsx(q.Item,{name:Je.RelicPotentialLoadBehavior.name,children:i.jsx(ne,{style:{width:500},options:u,optionRender:h=>i.jsx(Dr,{children:h.label})})})]}),i.jsxs(D,{justify:"space-between",align:"center",children:[i.jsx(no,{children:"Optimizer Expanded info panel position"}),i.jsx(q.Item,{name:Je.ExpandedInfoPanelPosition.name,children:i.jsx(ne,{style:{width:500},options:d,optionRender:h=>i.jsx(Dr,{children:h.label})})})]})]})})})},um={1:f.Parts.Head,2:f.Parts.Hands,3:f.Parts.Body,4:f.Parts.Feet,5:f.Parts.PlanarSphere,6:f.Parts.LinkRope},dm={6:5,5:4,4:3,3:2},sl={HPAddedRatio:f.Stats.HP_P,AttackAddedRatio:f.Stats.ATK_P,DefenceAddedRatio:f.Stats.DEF_P,HPDelta:f.Stats.HP,AttackDelta:f.Stats.ATK,DefenceDelta:f.Stats.DEF,SpeedDelta:f.Stats.SPD,CriticalDamageBase:f.Stats.CD,CriticalChanceBase:f.Stats.CR,StatusProbabilityBase:f.Stats.EHR,StatusResistanceBase:f.Stats.RES,BreakDamageAddedRatioBase:f.Stats.BE,SPRatioBase:f.Stats.ERR,HealRatioBase:f.Stats.OHB,PhysicalAddedRatio:f.Stats.Physical_DMG,FireAddedRatio:f.Stats.Fire_DMG,IceAddedRatio:f.Stats.Ice_DMG,ThunderAddedRatio:f.Stats.Lightning_DMG,WindAddedRatio:f.Stats.Wind_DMG,QuantumAddedRatio:f.Stats.Quantum_DMG,ImaginaryAddedRatio:f.Stats.Imaginary_DMG},ql={convert:e=>{const a=e.relicList||[],t=e.equipment,s=e.rank||0,o=""+e.avatarId,r=t?""+t.tid:void 0,l=t?t.level:0,c=t?t.rank:0,u=a.map(m=>EE(m)).filter(m=>!!m),d={};for(const m of u)m.equippedBy=o,d[m.part]=m;return{id:o,key:J.randomId(),form:{characterLevel:80,characterId:o,characterEidolon:s,lightCone:r,lightConeLevel:l,lightConeSuperimposition:c},equipped:d}},getConstantConversions:()=>({statConversion:sl,partConversion:um,gradeConversion:dm})},Gi={55001:{set:"101",part:"3",main:"436"},55002:{set:"101",part:"4",main:"441"},55003:{set:"102",part:"3",main:"434"},55004:{set:"103",part:"3",main:"433"},55005:{set:"103",part:"4",main:"443"},55006:{set:"105",part:"3",main:"434"}};function EE(e){try{const a=V.getMetadata().relics,t=""+e.tid,s=e.level||0;let o=t.substring(1,4);Gi[t]&&(o=Gi[t].set);const r=a.relicSets[o].name;let l=t.substring(4,5);Gi[t]&&(l=Gi[t].part);const c=um[l],u=t.substring(0,1),d=dm[u];let m=e.mainAffixId;m||(m=Object.values(a.relicMainAffixes[`${d}${l}`].affixes).find(A=>A.property==e.main_affix.type).affix_id);let h=a.relicMainAffixes[`${d}${l}`].affixes[m];Gi[t]&&(h=a.relicMainAffixes[Gi[t].main].affixes[m]);const g=sl[h.property],C=h.base,M=h.step,x=C+M*s,O={stat:g,value:J.precisionRound(x*(J.isFlat(g)?1:100),5)},H=[];for(const A of e.subAffixList){let L=A.affixId;L||(L=Object.values(a.relicSubAffixes[`${d}`].affixes).find(p=>p.property==A.type).affix_id);const v=A.cnt??A.count,N=A.step||0,U=a.relicSubAffixes[d].affixes[L],F=sl[U.property],P=U.base,T=U.step,y=P*v+T*N;if(v!=null&&N!=null){const p=ec(v,N).rolls;H.push({stat:F,value:J.precisionRound(y*(J.isFlat(F)?1:100),5),addedRolls:Math.max(0,v-1),rolls:p})}else H.push({stat:F,value:J.precisionRound(y*(J.isFlat(F)?1:100),5)})}const _={verified:!0,part:c,set:r,enhance:s,grade:d,main:O,substats:H};return fi.augment(_)}catch(a){return console.error(a),null}}function ec(e,a){const t={high:0,mid:0,low:0};let s=!1;if(e!=null&&a!=null){t.low=e;for(let o=0;o<a;o++)t.low==0?(t.high++,t.mid--):(t.mid++,t.low--);(t.high>e||t.mid<0||t.low<0)&&(s=!0),t.high=Math.min(e,t.high),t.mid=Math.max(0,t.mid),t.low=Math.max(0,t.low)}else s=!0;return{rolls:t,errorFlag:s}}let h0,Cr,S0,Er=!1;const as={fixMainStatValue:e=>{Er||as.initialize();const a=e.enhance,t=e.main.stat,s=S0[e.part],r=`${e.grade}${s}`,l=V.getMetadata().relics.relicMainAffixes[r].affixes,c=Object.values(l).find(g=>g.property==Cr[t]);if(!c)return 0;const u=c.step,m=c.base+u*a,h=J.isFlat(t)?m:m*100;return b.precisionRound(h,5)},fixSubStatValue:(e,a,t)=>{if(Er||as.initialize(),e==f.Stats.SPD)return a;const s=TE[t];if(!s)return a;const o=h0[e];if(!o||!s[o])return a;const l=s[o][a];if(!l)return a;const c=typeof l!="number"?l[0]:l,u=V.getMetadata().relics.relicSubAffixes[t].affixes,d=Object.values(u).find(x=>x.property==Cr[e]);if(!d)return a;const m=d.base,h=d.step,C=(m+h*2)*c,M=J.isFlat(e)?C:C*100;return J.precisionRound(M,5)},initialize:()=>{Er=!0;const e=ql.getConstantConversions();Cr=b.flipStringMapping(e.statConversion),S0=b.flipStringMapping(e.partConversion),h0=J.flipMapping({ATK:f.Stats.ATK,HP:f.Stats.HP,DEF:f.Stats.DEF,ATK_:f.Stats.ATK_P,HP_:f.Stats.HP_P,DEF_:f.Stats.DEF_P,SPD:f.Stats.SPD,"CRIT Rate_":f.Stats.CR,"CRIT DMG_":f.Stats.CD,"Effect Hit Rate_":f.Stats.EHR,"Effect RES_":f.Stats.RES,"Break Effect_":f.Stats.BE})}},TE={2:{HP:{13:.8,15:.9,16:1},ATK:{6:.8,7:.9,8:1},DEF:{6:.8,7:.9,8:1},HP_:{1.3:.8,1.5:.9,1.7:1},ATK_:{1.3:.8,1.5:.9,1.7:1},DEF_:{1.7:.8,1.9:.9,2.1:1},SPD:{1:[.8,.9,1]},"CRIT Rate_":{1:.8,1.1:.9,1.2:1},"CRIT DMG_":{2:.8,2.3:.9,2.5:1},"Effect Hit Rate_":{1.3:.8,1.5:.9,1.7:1},"Effect RES_":{1.3:.8,1.5:.9,1.7:1},"Break Effect_":{2:.8,2.3:.9,2.5:1}},3:{HP:{20:.8,22:.9,25:1,40:1.6,43:1.7,45:1.8,48:1.9,50:2},ATK:{10:.8,11:.9,12:1,20:1.6,21:1.7,22:1.8,24:1.9,25:2},DEF:{10:.8,11:.9,12:1,20:1.6,21:1.7,22:1.8,24:1.9,25:2},HP_:{2:.8,2.3:.9,2.5:1,4.1:1.6,4.4:1.7,4.6:1.8,4.9:1.9,5.1:2},ATK_:{2:.8,2.3:.9,2.5:1,4.1:1.6,4.4:1.7,4.6:1.8,4.9:1.9,5.1:2},DEF_:{2.5:.8,2.9:.9,3.2:1,5.1:1.6,5.5:1.7,5.8:1.8,6.1:1.9,6.4:2},SPD:{1:[.8,.9,1],2:[1.6,1.7,1.8,1.9,2]},"CRIT Rate_":{1.5:.8,1.7:.9,1.9:1,3.1:1.6,3.3:1.7,3.4:1.8,3.6:1.9,3.8:2},"CRIT DMG_":{3.1:.8,3.4:.9,3.8:1,6.2:1.6,6.6:1.7,6.9:1.8,7.3:1.9,7.7:2},"Effect Hit Rate_":{2:.8,2.3:.9,2.5:1,4.1:1.6,4.4:1.7,4.6:1.8,4.9:1.9,5.1:2},"Effect RES_":{2:.8,2.3:.9,2.5:1,4.1:1.6,4.4:1.7,4.6:1.8,4.9:1.9,5.1:2},"Break Effect_":{3.1:.8,3.4:.9,3.8:1,6.2:1.6,6.6:1.7,6.9:1.8,7.3:1.9,7.7:2}},4:{HP:{27:.8,30:.9,33:1,54:1.6,57:1.7,60:1.8,64:1.9,67:2,81:2.4,84:2.5,88:2.6,91:2.7,94:2.8,98:2.9,101:3,108:3.2,111:3.3,115:3.4,118:3.5,121:3.6,125:3.7,128:3.8,132:3.9,135:4},ATK:{13:.8,15:.9,16:1,27:1.6,28:1.7,30:1.8,32:1.9,33:2,40:2.4,42:2.5,44:2.6,45:2.7,47:2.8,49:2.9,50:3,54:3.2,55:3.3,57:3.4,59:3.5,60:3.6,62:3.7,64:3.8,66:3.9,67:4},DEF:{13:.8,15:.9,16:1,27:1.6,28:1.7,30:1.8,32:1.9,33:2,40:2.4,42:2.5,44:2.6,45:2.7,47:2.8,49:2.9,50:3,54:3.2,55:3.3,57:3.4,59:3.5,60:3.6,62:3.7,64:3.8,66:3.9,67:4},HP_:{2.7:.8,3.1:.9,3.4:1,5.5:1.6,5.8:1.7,6.2:1.8,6.5:1.9,6.9:2,8.2:2.4,8.6:2.5,8.9:2.6,9.3:2.7,9.6:2.8,10:2.9,10.3:3,11:3.2,11.4:3.3,11.7:3.4,12:3.5,12.4:3.6,12.7:3.7,13.1:3.8,13.4:3.9,13.8:4},ATK_:{2.7:.8,3.1:.9,3.4:1,5.5:1.6,5.8:1.7,6.2:1.8,6.5:1.9,6.9:2,8.2:2.4,8.6:2.5,8.9:2.6,9.3:2.7,9.6:2.8,10:2.9,10.3:3,11:3.2,11.4:3.3,11.7:3.4,12:3.5,12.4:3.6,12.7:3.7,13.1:3.8,13.4:3.9,13.8:4},DEF_:{3.4:.8,3.8:.9,4.3:1,6.9:1.6,7.3:1.7,7.7:1.8,8.2:1.9,8.6:2,10.3:2.4,10.8:2.5,11.2:2.6,11.6:2.7,12:2.8,12.5:2.9,12.9:3,13.8:3.2,14.2:3.3,14.6:3.4,15.1:3.5,15.5:3.6,15.9:3.7,16.4:3.8,16.8:3.9,17.2:4},SPD:{1:[.8,.9],2:1,3:[1.6,1.7,1.8,1.9],4:[2,2.4],5:[2.5,2.6,2.7,2.8,2.9],6:[3,3.2,3.3,3.4],7:[3.5,3.6,3.7,3.8,3.9],8:4},"CRIT Rate_":{2:.8,2.3:.9,2.5:1,4.1:1.6,4.4:1.7,4.6:1.8,4.9:1.9,5.1:2,6.2:2.4,6.4:2.5,6.7:2.6,6.9:2.7,7.2:2.8,7.5:2.9,7.7:3,8.2:3.2,8.5:3.3,8.8:3.4,9:3.5,9.3:3.6,9.5:3.7,9.8:3.8,10.1:3.9,10.3:4},"CRIT DMG_":{4.1:.8,4.6:.9,5.1:1,8.2:1.6,8.8:1.7,9.3:1.8,9.8:1.9,10.3:2,12.4:2.4,12.9:2.5,13.4:2.6,13.9:2.7,14.5:2.8,15:2.9,15.5:3,16.5:3.2,17.1:3.3,17.6:3.4,18.1:3.5,18.6:3.6,19.1:3.7,19.6:3.8,20.2:3.9,20.7:4},"Effect Hit Rate_":{2.7:.8,3.1:.9,3.4:1,5.5:1.6,5.8:1.7,6.2:1.8,6.5:1.9,6.9:2,8.2:2.4,8.6:2.5,8.9:2.6,9.3:2.7,9.6:2.8,10:2.9,10.3:3,11:3.2,11.4:3.3,11.7:3.4,12:3.5,12.4:3.6,12.7:3.7,13.1:3.8,13.4:3.9,13.8:4},"Effect RES_":{2.7:.8,3.1:.9,3.4:1,5.5:1.6,5.8:1.7,6.2:1.8,6.5:1.9,6.9:2,8.2:2.4,8.6:2.5,8.9:2.6,9.3:2.7,9.6:2.8,10:2.9,10.3:3,11:3.2,11.4:3.3,11.7:3.4,12:3.5,12.4:3.6,12.7:3.7,13.1:3.8,13.4:3.9,13.8:4},"Break Effect_":{4.1:.8,4.6:.9,5.1:1,8.2:1.6,8.8:1.7,9.3:1.8,9.8:1.9,10.3:2,12.4:2.4,12.9:2.5,13.4:2.6,13.9:2.7,14.5:2.8,15:2.9,15.5:3,16.5:3.2,17.1:3.3,17.6:3.4,18.1:3.5,18.6:3.6,19.1:3.7,19.6:3.8,20.2:3.9,20.7:4}},5:{HP:{33:.8,38:.9,42:1,67:1.6,71:1.7,76:1.8,80:1.9,84:2,101:2.4,105:2.5,110:2.6,114:2.7,118:2.8,122:2.9,127:3,135:3.2,139:3.3,143:3.4,148:3.5,152:3.6,156:3.7,160:3.8,165:3.9,169:4,173:4.1,177:4.2,182:4.3,186:4.4,190:4.5,194:4.6,198:4.7,203:4.8,207:4.9,211:5,215:5.1,220:5.2,224:5.3,228:5.4,232:5.5,237:5.6,241:5.7,245:5.8,249:5.9,254:6},ATK:{16:.8,19:.9,21:1,33:1.6,35:1.7,38:1.8,40:1.9,42:2,50:2.4,52:2.5,55:2.6,57:2.7,59:2.8,61:2.9,63:3,67:3.2,69:3.3,71:3.4,74:3.5,76:3.6,78:3.7,80:3.8,82:3.9,84:4,86:4.1,88:4.2,91:4.3,93:4.4,95:4.5,97:4.6,99:4.7,101:4.8,103:4.9,105:5,107:5.1,110:5.2,112:5.3,114:5.4,116:5.5,118:5.6,120:5.7,122:5.8,124:5.9,127:6},DEF:{16:.8,19:.9,21:1,33:1.6,35:1.7,38:1.8,40:1.9,42:2,50:2.4,52:2.5,55:2.6,57:2.7,59:2.8,61:2.9,63:3,67:3.2,69:3.3,71:3.4,74:3.5,76:3.6,78:3.7,80:3.8,82:3.9,84:4,86:4.1,88:4.2,91:4.3,93:4.4,95:4.5,97:4.6,99:4.7,101:4.8,103:4.9,105:5,107:5.1,110:5.2,112:5.3,114:5.4,116:5.5,118:5.6,120:5.7,122:5.8,124:5.9,127:6},HP_:{3.4:.8,3.8:.9,4.3:1,6.9:1.6,7.3:1.7,7.7:1.8,8.2:1.9,8.6:2,10.3:2.4,10.8:2.5,11.2:2.6,11.6:2.7,12:2.8,12.5:2.9,12.9:3,13.8:3.2,14.2:3.3,14.6:3.4,15.1:3.5,15.5:3.6,15.9:3.7,16.4:3.8,16.8:3.9,17.2:4,17.7:4.1,18.1:4.2,18.5:4.3,19:4.4,19.4:4.5,19.8:4.6,20.3:4.7,20.7:4.8,21.1:4.9,21.6:5,22:5.1,22.4:5.2,22.8:5.3,23.3:5.4,23.7:5.5,24.1:5.6,24.6:5.7,25:5.8,25.4:5.9,25.9:6},ATK_:{3.4:.8,3.8:.9,4.3:1,6.9:1.6,7.3:1.7,7.7:1.8,8.2:1.9,8.6:2,10.3:2.4,10.8:2.5,11.2:2.6,11.6:2.7,12:2.8,12.5:2.9,12.9:3,13.8:3.2,14.2:3.3,14.6:3.4,15.1:3.5,15.5:3.6,15.9:3.7,16.4:3.8,16.8:3.9,17.2:4,17.7:4.1,18.1:4.2,18.5:4.3,19:4.4,19.4:4.5,19.8:4.6,20.3:4.7,20.7:4.8,21.1:4.9,21.6:5,22:5.1,22.4:5.2,22.8:5.3,23.3:5.4,23.7:5.5,24.1:5.6,24.6:5.7,25:5.8,25.4:5.9,25.9:6},DEF_:{4.3:.8,4.8:.9,5.4:1,8.6:1.6,9.1:1.7,9.7:1.8,10.2:1.9,10.8:2,12.9:2.4,13.5:2.5,14:2.6,14.5:2.7,15.1:2.8,15.6:2.9,16.2:3,17.2:3.2,17.8:3.3,18.3:3.4,18.9:3.5,19.4:3.6,19.9:3.7,20.5:3.8,21:3.9,21.6:4,22.1:4.1,22.6:4.2,23.2:4.3,23.7:4.4,24.3:4.5,24.8:4.6,25.3:4.7,25.9:4.8,26.4:4.9,27:5,27.5:5.1,28:5.2,28.6:5.3,29.1:5.4,29.7:5.5,30.2:5.6,30.7:5.7,31.3:5.8,31.8:5.9,32.4:6},SPD:{2:[.8,.9,1],4:[1.6,1.7,1.8,1.9],5:2,6:[2.4,2.5,2.6],7:[2.7,2.8,2.9,3],8:[3.2,3.3,3.4],9:[3.5,3.6,3.7,3.8],10:[3.9,4,4.1,4.2],11:[4.3,4.4,4.5,4.6],12:[4.7,4.8,4.9],13:[5,5.1,5.2,5.3],14:[5.4,5.5,5.6,5.7],15:[5.8,5.9,6]},"CRIT Rate_":{2.5:.8,2.9:.9,3.2:1,5.1:1.6,5.5:1.7,5.8:1.8,6.1:1.9,6.4:2,7.7:2.4,8.1:2.5,8.4:2.6,8.7:2.7,9:2.8,9.3:2.9,9.7:3,10.3:3.2,10.6:3.3,11:3.4,11.3:3.5,11.6:3.6,11.9:3.7,12.3:3.8,12.6:3.9,12.9:4,13.2:4.1,13.6:4.2,13.9:4.3,14.2:4.4,14.5:4.5,14.9:4.6,15.2:4.7,15.5:4.8,15.8:4.9,16.2:5,16.5:5.1,16.8:5.2,17.1:5.3,17.4:5.4,17.8:5.5,18.1:5.6,18.4:5.7,18.7:5.8,19.1:5.9,19.4:6},"CRIT DMG_":{5.1:.8,5.8:.9,6.4:1,10.3:1.6,11:1.7,11.6:1.8,12.3:1.9,12.9:2,15.5:2.4,16.2:2.5,16.8:2.6,17.4:2.7,18.1:2.8,18.7:2.9,19.4:3,20.7:3.2,21.3:3.3,22:3.4,22.6:3.5,23.3:3.6,23.9:3.7,24.6:3.8,25.2:3.9,25.9:4,26.5:4.1,27.2:4.2,27.8:4.3,28.5:4.4,29.1:4.5,29.8:4.6,30.4:4.7,31.1:4.8,31.7:4.9,32.4:5,33:5.1,33.6:5.2,34.3:5.3,34.9:5.4,35.6:5.5,36.2:5.6,36.9:5.7,37.5:5.8,38.2:5.9,38.8:6},"Effect Hit Rate_":{3.4:.8,3.8:.9,4.3:1,6.9:1.6,7.3:1.7,7.7:1.8,8.2:1.9,8.6:2,10.3:2.4,10.8:2.5,11.2:2.6,11.6:2.7,12:2.8,12.5:2.9,12.9:3,13.8:3.2,14.2:3.3,14.6:3.4,15.1:3.5,15.5:3.6,15.9:3.7,16.4:3.8,16.8:3.9,17.2:4,17.7:4.1,18.1:4.2,18.5:4.3,19:4.4,19.4:4.5,19.8:4.6,20.3:4.7,20.7:4.8,21.1:4.9,21.6:5,22:5.1,22.4:5.2,22.8:5.3,23.3:5.4,23.7:5.5,24.1:5.6,24.6:5.7,25:5.8,25.4:5.9,25.9:6},"Effect RES_":{3.4:.8,3.8:.9,4.3:1,6.9:1.6,7.3:1.7,7.7:1.8,8.2:1.9,8.6:2,10.3:2.4,10.8:2.5,11.2:2.6,11.6:2.7,12:2.8,12.5:2.9,12.9:3,13.8:3.2,14.2:3.3,14.6:3.4,15.1:3.5,15.5:3.6,15.9:3.7,16.4:3.8,16.8:3.9,17.2:4,17.7:4.1,18.1:4.2,18.5:4.3,19:4.4,19.4:4.5,19.8:4.6,20.3:4.7,20.7:4.8,21.1:4.9,21.6:5,22:5.1,22.4:5.2,22.8:5.3,23.3:5.4,23.7:5.5,24.1:5.6,24.6:5.7,25:5.8,25.4:5.9,25.9:6},"Break Effect_":{5.1:.8,5.8:.9,6.4:1,10.3:1.6,11:1.7,11.6:1.8,12.3:1.9,12.9:2,15.5:2.4,16.2:2.5,16.8:2.6,17.4:2.7,18.1:2.8,18.7:2.9,19.4:3,20.7:3.2,21.3:3.3,22:3.4,22.6:3.5,23.3:3.6,23.9:3.7,24.6:3.8,25.2:3.9,25.9:4,26.5:4.1,27.2:4.2,27.8:4.3,28.5:4.4,29.1:4.5,29.8:4.6,30.4:4.7,31.1:4.8,31.7:4.9,32.4:5,33:5.1,33.6:5.2,34.3:5.3,34.9:5.4,35.6:5.5,36.2:5.6,36.9:5.7,37.5:5.8,38.2:5.9,38.8:6}}},mm={calculateIncrementCounts(e,a){let t=1/0,s=null;function o(r,l,c){if(c===Object.keys(a).length){Math.abs(r-e)<Math.abs(t-e)&&(t=r,s={...l});return}const u=Object.keys(a)[c];for(let d=0;r+d*a[u]<=e+.01;d++)l[u]=d,o(r+d*a[u],l,c+1)}return o(0,{high:0,mid:0,low:0},0),s},calculateRelicSubstatRolls(e){if(e.verified&&!e.substats.some(t=>t.rolls==null))return;if(e.grade<5){e.substats.map(t=>{t.addedRolls=0});return}let a=0;if(e.substats.forEach(t=>{const s=Ge[t.stat][e.grade],o=this.calculateIncrementCounts(t.value,s);o&&(t.addedRolls=Math.min(5,Math.max(0,o.high+o.mid+o.low-1)),t.rolls=o,a+=t.addedRolls)}),a>Math.floor(e.enhance/3)){const t=e.substats.reduce((s,o)=>s.addedRolls>o.addedRolls?s:o);t.addedRolls-=1}}},fi={augment:function(e){const a={};if(e.grade&&!e.main)return null;const t=e.main.stat;e.main.value=as.fixMainStatValue(e);const s=e.main.value;a.mainStat=t,a.mainValue=s,RE(e);for(const o of e.substats){const r=o.stat;o.value=J.precisionRound(o.value),o.value=as.fixSubStatValue(r,o.value,e.grade),a[r]=o.value}return e.enhance>12&&e.grade!=5&&(e.grade=5),e.id||(e.id=J.randomId()),e.augmentedStats=a,BE([e]),mm.calculateRelicSubstatRolls(e),e}},p0={[n.HP]:0,[n.ATK]:1,[n.DEF]:2,[n.HP_P]:3,[n.ATK_P]:4,[n.DEF_P]:5,[n.SPD]:6,[n.CR]:7,[n.CD]:8,[n.EHR]:9,[n.RES]:10,[n.BE]:11};function RE(e){e.substats=e.substats.sort((a,t)=>p0[a.stat]-p0[t.stat])}function BE(e){return e.map(a=>{for(const t of Object.values(f.Stats))a.augmentedStats&&(a.augmentedStats[t]=a.augmentedStats[t]||0,J.isFlat(t)||(a.augmentedStats.mainStat==t&&(a.augmentedStats.mainValue=a.augmentedStats.mainValue/100),a.augmentedStats[t]=a.augmentedStats[t]/100));return a})}const ol={BLUE:{colorTextBase:"#ffffff",colorBgBase:"#182239",colorPrimary:"#1677FF"},ALT:{colorTextBase:"#ffffff",colorBgBase:"#182239",colorPrimary:"#1677FF"}};function tc(e){return{"--ag-background-color":e.colorBgContainer,"--ag-odd-row-background-color":e.colorBgElevated,"--ag-header-background-color":e.colorBgLayout,"--ag-border-color":e.colorBorderSecondary,"--ag-row-hover-color":e.colorPrimary}}function IE(e){return{token:{motionUnit:.1,opacityLoading:.2,colorBgBase:e.colorBgBase,colorTextBase:e.colorTextBase,colorPrimary:e.colorPrimary,colorPrimaryBorderHover:e.colorPrimary,screenXL:1530,screenXLMin:1530,screenXXL:1660,screenXXLMin:1660},components:{Collapse:{contentPadding:"0px 0px"},Menu:{margin:2,itemPaddingInline:0,subMenuItemBg:"rgba(255, 255, 255, 0.05)"},Table:{headerBg:"#00000036",cellPaddingInlineSM:5,cellPaddingBlockSM:6},Slider:{dotBorderColor:e.colorPrimary,dotActiveBorderColor:e.colorPrimary,handleActiveColor:e.colorPrimary,handleColor:e.colorPrimary,handleColorDisabled:e.colorPrimary,trackBg:e.colorPrimary,trackHoverBg:e.colorPrimary,railHoverBg:"#ffffff80",railBg:"#ffffff12",handleSize:5,handleSizeHover:5,handleLineWidth:3,handleLineWidthHover:3,railSize:3},InputNumber:{paddingInlineSM:6},Tag:{defaultColor:"#ffffff"},Notification:{width:450},Dropdown:{zIndexPopup:900}},algorithm:Xt.darkAlgorithm}}const yE={1001:{ATK:0,"ATK%":0,DEF:1,"DEF%":1,HP:.5,"HP%":.5,SPD:1,"CRIT Rate":0,"CRIT DMG":0,"Effect Hit Rate":1,"Effect RES":.75,"Break Effect":0,"Energy Regeneration Rate":1,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1002:{ATK:.75,"ATK%":.75,DEF:0,"DEF%":0,HP:0,"HP%":0,SPD:1,"CRIT Rate":1,"CRIT DMG":1,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":1,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1003:{ATK:.75,"ATK%":.75,DEF:0,"DEF%":0,HP:0,"HP%":0,SPD:1,"CRIT Rate":1,"CRIT DMG":1,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":.5,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":1,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1004:{ATK:.75,"ATK%":.75,DEF:0,"DEF%":0,HP:0,"HP%":0,SPD:1,"CRIT Rate":1,"CRIT DMG":1,"Effect Hit Rate":1,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":1,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":1},1005:{ATK:1,"ATK%":1,DEF:0,"DEF%":0,HP:0,"HP%":0,SPD:1,"CRIT Rate":.5,"CRIT DMG":.5,"Effect Hit Rate":.5,"Effect RES":0,"Break Effect":.75,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":1,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1006:{ATK:.5,"ATK%":.5,DEF:.25,"DEF%":.25,HP:.25,"HP%":.25,SPD:1,"CRIT Rate":.75,"CRIT DMG":.75,"Effect Hit Rate":1,"Effect RES":0,"Break Effect":.75,"Energy Regeneration Rate":1,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":1,"Imaginary DMG Boost":0},1008:{ATK:.75,"ATK%":.75,DEF:0,"DEF%":0,HP:0,"HP%":0,SPD:1,"CRIT Rate":1,"CRIT DMG":1,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":1,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1009:{ATK:.75,"ATK%":.75,DEF:.75,"DEF%":.75,HP:.75,"HP%":.75,SPD:1,"CRIT Rate":0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":.75,"Break Effect":.5,"Energy Regeneration Rate":1,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":1,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1013:{ATK:.75,"ATK%":.75,DEF:0,"DEF%":0,HP:0,"HP%":0,SPD:1,"CRIT Rate":1,"CRIT DMG":1,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":1,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1101:{ATK:0,"ATK%":0,DEF:.75,"DEF%":.75,HP:.75,"HP%":.75,SPD:1,"CRIT Rate":0,"CRIT DMG":1,"Effect Hit Rate":0,"Effect RES":.75,"Break Effect":0,"Energy Regeneration Rate":1,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":1,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1102:{ATK:.75,"ATK%":.75,DEF:0,"DEF%":0,HP:0,"HP%":0,SPD:1,"CRIT Rate":1,"CRIT DMG":1,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":1,"Imaginary DMG Boost":0},1103:{ATK:.75,"ATK%":.75,DEF:0,"DEF%":0,HP:0,"HP%":0,SPD:1,"CRIT Rate":1,"CRIT DMG":1,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":1,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1104:{ATK:0,"ATK%":0,DEF:1,"DEF%":1,HP:.5,"HP%":.5,SPD:1,"CRIT Rate":0,"CRIT DMG":0,"Effect Hit Rate":.75,"Effect RES":.75,"Break Effect":0,"Energy Regeneration Rate":1,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1105:{ATK:0,"ATK%":0,DEF:.75,"DEF%":.75,HP:1,"HP%":1,SPD:1,"CRIT Rate":0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":.75,"Break Effect":0,"Energy Regeneration Rate":1,"Outgoing Healing Boost":1,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1106:{ATK:0,"ATK%":0,DEF:.75,"DEF%":.75,HP:.75,"HP%":.75,SPD:1,"CRIT Rate":0,"CRIT DMG":0,"Effect Hit Rate":1,"Effect RES":.75,"Break Effect":0,"Energy Regeneration Rate":1,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":1,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1107:{ATK:.75,"ATK%":.75,DEF:0,"DEF%":0,HP:0,"HP%":0,SPD:1,"CRIT Rate":1,"CRIT DMG":1,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":1,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1108:{ATK:1,"ATK%":1,DEF:0,"DEF%":0,HP:0,"HP%":0,SPD:1,"CRIT Rate":0,"CRIT DMG":0,"Effect Hit Rate":1,"Effect RES":0,"Break Effect":1,"Energy Regeneration Rate":1,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":1,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1109:{ATK:.75,"ATK%":.75,DEF:0,"DEF%":0,HP:0,"HP%":0,SPD:1,"CRIT Rate":1,"CRIT DMG":1,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":1,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1110:{ATK:0,"ATK%":0,DEF:.75,"DEF%":.75,HP:1,"HP%":1,SPD:1,"CRIT Rate":0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":.75,"Break Effect":0,"Energy Regeneration Rate":1,"Outgoing Healing Boost":1,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1111:{ATK:1,"ATK%":1,DEF:0,"DEF%":0,HP:0,"HP%":0,SPD:1,"CRIT Rate":0,"CRIT DMG":0,"Effect Hit Rate":1,"Effect RES":0,"Break Effect":.75,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":1,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1112:{ATK:.75,"ATK%":.75,DEF:0,"DEF%":0,HP:0,"HP%":0,SPD:1,"CRIT Rate":1,"CRIT DMG":1,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":1,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1201:{ATK:.75,"ATK%":.75,DEF:0,"DEF%":0,HP:0,"HP%":0,SPD:1,"CRIT Rate":1,"CRIT DMG":1,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":1,"Imaginary DMG Boost":0},1202:{ATK:1,"ATK%":1,DEF:.75,"DEF%":.75,HP:.75,"HP%":.75,SPD:1,"CRIT Rate":0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":.75,"Break Effect":0,"Energy Regeneration Rate":1,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1203:{ATK:1,"ATK%":1,DEF:.75,"DEF%":.75,HP:.75,"HP%":.75,SPD:1,"CRIT Rate":0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":.75,"Break Effect":0,"Energy Regeneration Rate":1,"Outgoing Healing Boost":1,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1204:{ATK:.75,"ATK%":.75,DEF:0,"DEF%":0,HP:0,"HP%":0,SPD:1,"CRIT Rate":1,"CRIT DMG":1,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":1,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1205:{ATK:.25,"ATK%":.25,DEF:0,"DEF%":0,HP:1,"HP%":1,SPD:1,"CRIT Rate":1,"CRIT DMG":1,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":1,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1206:{ATK:.75,"ATK%":.75,DEF:0,"DEF%":0,HP:0,"HP%":0,SPD:1,"CRIT Rate":1,"CRIT DMG":1,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":.5,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":1,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1207:{ATK:.75,"ATK%":.75,DEF:0,"DEF%":0,HP:0,"HP%":0,SPD:1,"CRIT Rate":1,"CRIT DMG":1,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":1,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":1},1208:{ATK:0,"ATK%":0,DEF:.75,"DEF%":.75,HP:1,"HP%":1,SPD:1,"CRIT Rate":0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":.75,"Break Effect":0,"Energy Regeneration Rate":1,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1209:{ATK:.75,"ATK%":.75,DEF:0,"DEF%":0,HP:0,"HP%":0,SPD:1,"CRIT Rate":1,"CRIT DMG":1,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":1,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1210:{ATK:1,"ATK%":1,DEF:0,"DEF%":0,HP:0,"HP%":0,SPD:1,"CRIT Rate":0,"CRIT DMG":0,"Effect Hit Rate":1,"Effect RES":0,"Break Effect":.75,"Energy Regeneration Rate":1,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":1,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1211:{ATK:0,"ATK%":0,DEF:.75,"DEF%":.75,HP:1,"HP%":1,SPD:1,"CRIT Rate":0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":.75,"Break Effect":0,"Energy Regeneration Rate":1,"Outgoing Healing Boost":1,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1212:{ATK:.75,"ATK%":.75,DEF:0,"DEF%":0,HP:0,"HP%":0,SPD:1,"CRIT Rate":1,"CRIT DMG":1,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":1,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1213:{ATK:.75,"ATK%":.75,DEF:0,"DEF%":0,HP:0,"HP%":0,SPD:1,"CRIT Rate":1,"CRIT DMG":1,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":1},1214:{ATK:.75,"ATK%":.75,DEF:0,"DEF%":0,HP:0,"HP%":0,SPD:1,"CRIT Rate":1,"CRIT DMG":1,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":1,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":1,"Imaginary DMG Boost":0},1215:{ATK:0,"ATK%":0,DEF:.75,"DEF%":.75,HP:.75,"HP%":.75,SPD:1,"CRIT Rate":0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":.75,"Break Effect":0,"Energy Regeneration Rate":1,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1217:{ATK:0,"ATK%":0,DEF:.75,"DEF%":.75,HP:1,"HP%":1,SPD:1,"CRIT Rate":0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":.75,"Break Effect":0,"Energy Regeneration Rate":1,"Outgoing Healing Boost":1,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1218:{ATK:.5,"ATK%":.5,DEF:.5,"DEF%":.5,HP:.5,"HP%":.5,SPD:1,"CRIT Rate":0,"CRIT DMG":0,"Effect Hit Rate":1,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":1,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1220:{ATK:.75,"ATK%":.75,DEF:0,"DEF%":0,HP:0,"HP%":0,SPD:1,"CRIT Rate":1,"CRIT DMG":1,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":1,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1221:{ATK:.75,"ATK%":.75,DEF:0,"DEF%":0,HP:0,"HP%":0,SPD:1,"CRIT Rate":1,"CRIT DMG":1,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":1,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1222:{ATK:.75,"ATK%":.75,DEF:.5,"DEF%":.5,HP:.5,"HP%":.5,SPD:1,"CRIT Rate":0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":.75,"Break Effect":1,"Energy Regeneration Rate":1,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":1,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1223:{ATK:.75,"ATK%":.75,DEF:0,"DEF%":0,HP:0,"HP%":0,SPD:1,"CRIT Rate":1,"CRIT DMG":1,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":1,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1224:{ATK:.75,"ATK%":.75,DEF:0,"DEF%":0,HP:0,"HP%":0,SPD:1,"CRIT Rate":1,"CRIT DMG":1,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":1},1301:{ATK:0,"ATK%":0,DEF:.75,"DEF%":.75,HP:.75,"HP%":.75,SPD:1,"CRIT Rate":0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":.75,"Break Effect":1,"Energy Regeneration Rate":1,"Outgoing Healing Boost":1,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1302:{ATK:.75,"ATK%":.75,DEF:0,"DEF%":0,HP:0,"HP%":0,SPD:1,"CRIT Rate":1,"CRIT DMG":1,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":1,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1303:{ATK:0,"ATK%":0,DEF:.75,"DEF%":.75,HP:.75,"HP%":.75,SPD:1,"CRIT Rate":0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":.75,"Break Effect":1,"Energy Regeneration Rate":1,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1304:{ATK:0,"ATK%":0,DEF:1,"DEF%":1,HP:.5,"HP%":.5,SPD:1,"CRIT Rate":1,"CRIT DMG":1,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":1,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":1},1305:{ATK:.75,"ATK%":.75,DEF:0,"DEF%":0,HP:0,"HP%":0,SPD:1,"CRIT Rate":1,"CRIT DMG":1,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":1},1306:{ATK:0,"ATK%":0,DEF:.75,"DEF%":.75,HP:.75,"HP%":.75,SPD:1,"CRIT Rate":0,"CRIT DMG":1,"Effect Hit Rate":0,"Effect RES":.75,"Break Effect":0,"Energy Regeneration Rate":1,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1307:{ATK:1,"ATK%":1,DEF:0,"DEF%":0,HP:0,"HP%":0,SPD:1,"CRIT Rate":0,"CRIT DMG":0,"Effect Hit Rate":1,"Effect RES":0,"Break Effect":.5,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":1,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1308:{ATK:.75,"ATK%":.75,DEF:0,"DEF%":0,HP:0,"HP%":0,SPD:1,"CRIT Rate":1,"CRIT DMG":1,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":1,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1309:{ATK:1,"ATK%":1,DEF:.75,"DEF%":.75,HP:.75,"HP%":.75,SPD:1,"CRIT Rate":0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":.75,"Break Effect":0,"Energy Regeneration Rate":1,"Outgoing Healing Boost":0,"Physical DMG Boost":1,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1310:{ATK:1,"ATK%":1,DEF:0,"DEF%":0,HP:0,"HP%":0,SPD:1,"CRIT Rate":0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":1,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1312:{ATK:.75,"ATK%":.75,DEF:0,"DEF%":0,HP:0,"HP%":0,SPD:1,"CRIT Rate":1,"CRIT DMG":1,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":1,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1314:{ATK:.75,"ATK%":.75,DEF:0,"DEF%":0,HP:0,"HP%":0,SPD:1,"CRIT Rate":1,"CRIT DMG":1,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":1,"Imaginary DMG Boost":0},1315:{ATK:.5,"ATK%":.5,DEF:0,"DEF%":0,HP:0,"HP%":0,SPD:1,"CRIT Rate":.75,"CRIT DMG":.75,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":1,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":1,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},8001:{ATK:.75,"ATK%":.75,DEF:0,"DEF%":0,HP:0,"HP%":0,SPD:1,"CRIT Rate":1,"CRIT DMG":1,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":.5,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":1,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},8002:{ATK:.75,"ATK%":.75,DEF:0,"DEF%":0,HP:0,"HP%":0,SPD:1,"CRIT Rate":1,"CRIT DMG":1,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":.5,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":1,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},8003:{ATK:0,"ATK%":0,DEF:1,"DEF%":1,HP:.5,"HP%":.5,SPD:1,"CRIT Rate":0,"CRIT DMG":0,"Effect Hit Rate":.75,"Effect RES":.75,"Break Effect":0,"Energy Regeneration Rate":1,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},8004:{ATK:0,"ATK%":0,DEF:1,"DEF%":1,HP:.5,"HP%":.5,SPD:1,"CRIT Rate":0,"CRIT DMG":0,"Effect Hit Rate":.75,"Effect RES":.75,"Break Effect":0,"Energy Regeneration Rate":1,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},8005:{ATK:0,"ATK%":0,DEF:.75,"DEF%":.75,HP:.75,"HP%":.75,SPD:1,"CRIT Rate":0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":.75,"Break Effect":1,"Energy Regeneration Rate":1,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},8006:{ATK:0,"ATK%":0,DEF:.75,"DEF%":.75,HP:.75,"HP%":.75,SPD:1,"CRIT Rate":0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":.75,"Break Effect":1,"Energy Regeneration Rate":1,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0}},ME=()=>(e,a)=>{console.log(`Publishing [${e}] with data: ${a}`),document.dispatchEvent(new CustomEvent(e,{detail:a}))},{Text:ms}=_e,GE=zt(Ut)`
    margin-top: 10px !important;
    margin-bottom: 10px !important;
`,PE=zt(ma)`
    width: 62px
`;function _E(){const{t:e}=ee(["modals","common"]),a=ME(),[t]=q.useForm(),s=window.store(A=>A.scoringAlgorithmFocusCharacter),o=window.store(A=>A.setScoringAlgorithmFocusCharacter),r=window.store(A=>A.setScoringModalOpen),l=window.store(A=>A.scoringModalOpen);function c(A){o(A)}function u(A){for(const L of Object.entries(A.stats))L[1]==0&&(A.stats[L[0]]=null);return A}W.useEffect(()=>{const A=s;if(A){let L=b.clone(V.getScoringMetadata(A));L=u(L),t.setFieldsValue(L)}},[s,l,t]);const d=220,m=5,h=260;function g(A){return i.jsxs(D,{justify:"flex-start",style:{width:d},align:"center",gap:5,children:[i.jsx(q.Item,{name:["stats",A.stat],children:i.jsx(PE,{controls:!1,size:"small",min:0,max:1})}),i.jsxs(D,{children:[i.jsx("img",{src:Q.getStatIcon(A.stat),style:{width:25,height:25,marginRight:3}}),i.jsx(ms,{style:{lineHeight:1.8},children:e(`common:ReadableStats.${A.stat}`)})]})]})}function C(){console.log("onModalOk OK");const A=t.getFieldsValue();M(A),r(!1),a("refreshRelicsScore","null")}const M=A=>{if(!s)return;console.log("Form finished",A),A.stats[n.ATK_P]=A.stats[n.ATK],A.stats[n.DEF_P]=A.stats[n.DEF],A.stats[n.HP_P]=A.stats[n.HP];const L=b.clone(V.getMetadata().characters[s].scoringMetadata),v=V.getScoringMetadata(s);L.simulation=v.simulation,V.updateCharacterScoreOverrides(s,A)},x=()=>{if(!s)return;const A=V.getMetadata().characters[s].scoringMetadata,L=u(A);V.updateCharacterScoreOverrides(s,A),t.setFieldsValue(L)};function O(){const A=()=>{console.log("Reset the scoring algorithm for all characters");const L=window.store.getState().charactersById;for(const v of Object.keys(L)){const N=V.getMetadata().characters[v].scoringMetadata;V.updateCharacterScoreOverrides(v,N)}if(s){const v=V.getMetadata().characters[s].scoringMetadata,N=u(v);t.setFieldsValue(N)}};return i.jsx(Kn,{title:e("Scoring.ResetAllConfirm.Title"),description:e("Scoring.ResetAllConfirm.Description"),onConfirm:A,okText:e("common:Yes"),cancelText:e("common:No"),children:i.jsx(se,{danger:!0,children:e("Scoring.Footer.ResetAll")})})}const H=()=>{r(!1)},_=s?Q.getCharacterPreviewById(s):Q.getBlank();return i.jsx(Vt,{open:l,width:900,destroyOnClose:!0,centered:!0,forceRender:!0,onOk:C,onCancel:H,footer:[i.jsx(se,{onClick:H,children:e("common:Cancel")},"back"),i.jsx(se,{onClick:x,children:e("Scoring.Footer.Reset")},"default"),i.jsx(O,{},"resetAll"),i.jsx(se,{type:"primary",onClick:C,children:e("Scoring.Footer.Save")},"submit")],children:i.jsxs(q,{form:t,preserve:!1,layout:"vertical",onFinish:M,children:[i.jsx(GE,{children:e("Scoring.StatWeightsHeader")}),i.jsxs(D,{gap:20,children:[i.jsxs(D,{vertical:!0,gap:5,children:[i.jsx(q.Item,{name:"characterId",children:i.jsx(ts,{value:"",selectStyle:{},onChange:c})}),i.jsx("div",{style:{height:230,width:d,overflow:"hidden"},children:i.jsx("img",{src:_,style:{width:d}})})]}),i.jsx(Ga,{}),i.jsx(D,{vertical:!0,children:i.jsx(D,{justify:"space-between",children:i.jsxs(D,{vertical:!0,gap:m*2,children:[i.jsxs(D,{vertical:!0,gap:1,justify:"flex-start",children:[i.jsx(ms,{style:{marginLeft:5},children:e("common:Parts.Body")}),i.jsx(q.Item,{name:["parts",E.Body],children:i.jsxs(ne,{mode:"multiple",allowClear:!0,style:{width:h},placeholder:e("common:Parts.Body"),maxTagCount:"responsive",children:[i.jsx(ne.Option,{value:n.HP_P,children:e(`common:Stats.${n.HP_P}`)}),i.jsx(ne.Option,{value:n.ATK_P,children:e(`common:Stats.${n.ATK_P}`)}),i.jsx(ne.Option,{value:n.DEF_P,children:e(`common:Stats.${n.DEF_P}`)}),i.jsx(ne.Option,{value:n.CR,children:e(`common:Stats.${n.CR}`)}),i.jsx(ne.Option,{value:n.CD,children:e(`common:Stats.${n.CD}`)}),i.jsx(ne.Option,{value:n.OHB,children:e(`common:Stats.${n.OHB}`)}),i.jsx(ne.Option,{value:n.EHR,children:e(`common:Stats.${n.EHR}`)})]})})]}),i.jsxs(D,{vertical:!0,gap:1,justify:"flex-start",children:[i.jsx(ms,{style:{marginLeft:5},children:e("common:Parts.Feet")}),i.jsx(q.Item,{name:["parts",E.Feet],children:i.jsxs(ne,{mode:"multiple",allowClear:!0,style:{width:h},placeholder:e("common:Parts.Feet"),maxTagCount:"responsive",children:[i.jsx(ne.Option,{value:n.HP_P,children:e(`common:Stats.${n.HP_P}`)}),i.jsx(ne.Option,{value:n.ATK_P,children:e(`common:Stats.${n.ATK_P}`)}),i.jsx(ne.Option,{value:n.DEF_P,children:e(`common:Stats.${n.DEF_P}`)}),i.jsx(ne.Option,{value:n.SPD,children:e(`common:Stats.${n.SPD}`)})]})})]}),i.jsxs(D,{vertical:!0,gap:1,justify:"flex-start",children:[i.jsx(ms,{style:{marginLeft:5},children:e("common:Parts.PlanarSphere")}),i.jsx(q.Item,{name:["parts",E.PlanarSphere],children:i.jsxs(ne,{mode:"multiple",allowClear:!0,style:{width:h},placeholder:e("common:Parts.PlanarSphere"),listHeight:400,maxTagCount:"responsive",children:[i.jsx(ne.Option,{value:n.HP_P,children:e(`common:Stats.${n.HP_P}`)}),i.jsx(ne.Option,{value:n.ATK_P,children:e(`common:Stats.${n.ATK_P}`)}),i.jsx(ne.Option,{value:n.DEF_P,children:e(`common:Stats.${n.DEF_P}`)}),i.jsx(ne.Option,{value:n.Physical_DMG,children:e(`common:Stats.${n.Physical_DMG}`)}),i.jsx(ne.Option,{value:n.Fire_DMG,children:e(`common:Stats.${n.Fire_DMG}`)}),i.jsx(ne.Option,{value:n.Ice_DMG,children:e(`common:Stats.${n.Ice_DMG}`)}),i.jsx(ne.Option,{value:n.Lightning_DMG,children:e(`common:Stats.${n.Lightning_DMG}`)}),i.jsx(ne.Option,{value:n.Wind_DMG,children:e(`common:Stats.${n.Wind_DMG}`)}),i.jsx(ne.Option,{value:n.Quantum_DMG,children:e(`common:Stats.${n.Quantum_DMG}`)}),i.jsx(ne.Option,{value:n.Imaginary_DMG,children:e(`common:Stats.${n.Imaginary_DMG}`)})]})})]}),i.jsxs(D,{vertical:!0,gap:1,justify:"flex-start",children:[i.jsx(ms,{style:{marginLeft:5},children:e("common:Parts.LinkRope")}),i.jsx(q.Item,{name:["parts",E.LinkRope],children:i.jsxs(ne,{mode:"multiple",allowClear:!0,style:{width:h},placeholder:e("common:Parts.LinkRope"),maxTagCount:"responsive",children:[i.jsx(ne.Option,{value:n.HP_P,children:e(`common:Stats.${n.HP_P}`)}),i.jsx(ne.Option,{value:n.ATK_P,children:e(`common:Stats.${n.ATK_P}`)}),i.jsx(ne.Option,{value:n.DEF_P,children:e(`common:Stats.${n.DEF_P}`)}),i.jsx(ne.Option,{value:n.BE,children:e(`common:Stats.${n.BE}`)}),i.jsx(ne.Option,{value:n.ERR,children:e(`common:Stats.${n.ERR}`)})]})})]})]})})}),i.jsx(Ga,{}),i.jsxs(D,{vertical:!0,gap:3,children:[i.jsx(g,{stat:n.ATK}),i.jsx(g,{stat:n.HP}),i.jsx(g,{stat:n.DEF}),i.jsx(g,{stat:n.SPD}),i.jsx(g,{stat:n.CR}),i.jsx(g,{stat:n.CD}),i.jsx(g,{stat:n.EHR}),i.jsx(g,{stat:n.RES}),i.jsx(g,{stat:n.BE})]})]}),i.jsx(Ut,{style:{marginTop:10,marginBottom:40},children:i.jsx(Zt,{text:e("Scoring.WeightMethodology.Header"),linkIcon:!0,url:"https://github.com/fribbels/hsr-optimizer/blob/main/docs/guides/en/stat-score.md"})})]})})}function g0(e){return e??0}var fm=(e=>(e[e.DEFAULT=0]="DEFAULT",e[e.DEFAULT_NO_SPEED=1]="DEFAULT_NO_SPEED",e[e.MODIFIED=2]="MODIFIED",e))(fm||{});function AE(e,a){let t=!1,s=!0,o=!1;for(const r of Object.values(n)){const l=a.stats[r];e.stats[r]!=l&&(t=!0,r==n.SPD&&l==0?o=!0:s=!1)}return s&&o||!t&&e.stats[n.SPD]==0?1:t?2:0}function Tr(e,a){a.modified=!1;for(const t of Object.values(n))g0(a.stats[t])!=g0(e.stats[t])&&(a.modified=!0)}const b0={};function xE(e,a,t){const s=b0[e];s&&clearTimeout(s),b0[e]=setTimeout(()=>{t()},a)}const D0={metadata:{}};var xo=(e=>(e.MAIN="/hsr-optimizer",e.BETA="/dreary-quibbles",e))(xo||{});const Qt="/dreary-quibbles",ge={OPTIMIZER:"OPTIMIZER",CHARACTERS:"CHARACTERS",RELICS:"RELICS",IMPORT:"IMPORT",GETTING_STARTED:"GETTING_STARTED",CHANGELOG:"CHANGELOG",RELIC_SCORER:"RELIC_SCORER",SHOWCASE:"SHOWCASE",WARP:"WARP",WEBGPU_TEST:"WEBGPU_TEST",METADATA_TEST:"METADATA_TEST",HOME:"HOME"},Da={[ge.HOME]:Qt,[ge.OPTIMIZER]:Qt+"#main",[ge.RELIC_SCORER]:Qt+"#scorer",[ge.SHOWCASE]:Qt+"#showcase",[ge.WARP]:Qt+"#warp",[ge.CHANGELOG]:Qt+"#changelog",[ge.GETTING_STARTED]:Qt+"#getting-started",[ge.WEBGPU_TEST]:Qt+"#webgpu",[ge.METADATA_TEST]:Qt+"#metadata"},LE={[Da[ge.OPTIMIZER]]:ge.OPTIMIZER,[Da[ge.RELIC_SCORER]]:ge.SHOWCASE,[Da[ge.SHOWCASE]]:ge.SHOWCASE,[Da[ge.WARP]]:ge.WARP,[Da[ge.CHANGELOG]]:ge.CHANGELOG,[Da[ge.GETTING_STARTED]]:ge.GETTING_STARTED,[Da[ge.WEBGPU_TEST]]:ge.WEBGPU_TEST,[Da[ge.METADATA_TEST]]:ge.METADATA_TEST,[Da[ge.HOME]]:ge.HOME},hm={[$e.optimizerCharacterId]:null,[$e.relicScorerSidebarOpen]:!0,[$e.scoringType]:Xi,[$e.combatScoreDetails]:yl,[$e.computeEngine]:Yi,[$e.showcaseStandardMode]:!1,[$e.showcaseDarkMode]:!1,[$e.showcaseUID]:!0,[$e.showcasePreciseSpd]:!1};function OE(){const e=b.stripTrailingSlashes(window.location.pathname);return LE[e+window.location.hash.split("?")[0]]??ge.HOME}window.store=df(e=>({version:Co,colorTheme:ol.BLUE,globalThemeConfig:IE(ol.BLUE),formValues:void 0,optimizerGrid:void 0,comboState:{},optimizerTabFocusCharacter:void 0,characterTabFocusCharacter:void 0,scoringAlgorithmFocusCharacter:void 0,statTracesDrawerFocusCharacter:void 0,relicsTabFocusCharacter:void 0,inventoryWidth:9,rowLimit:10,activeKey:OE(),characters:[],charactersById:{},conditionalSetEffectsDrawerOpen:!1,comboDrawerOpen:!1,combatBuffsDrawerOpen:!1,statTracesDrawerOpen:!1,enemyConfigurationsDrawerOpen:!1,settingsDrawerOpen:!1,gettingStartedDrawerOpen:!1,permutations:0,permutationsResults:0,permutationsSearched:0,relicsById:{},scorerId:"",scoringMetadataOverrides:{},showcasePreferences:{},showcaseTemporaryOptions:{},warpRequest:{},warpResult:{},statDisplay:ks,memoDisplay:Wo,statSimulationDisplay:Dn.Disabled,statSimulations:[],selectedStatSimulations:[],optimizationInProgress:!1,optimizationId:null,teammateCount:0,zeroPermutationModalOpen:!1,zeroResultModalOpen:!1,scoringModalOpen:!1,menuSidebarOpen:!0,relicScorerSidebarOpen:!0,optimizerRunningEngine:Yi,optimizerStartTime:null,optimizerEndTime:null,optimizerTabFocusCharacterSelectModalOpen:!1,optimizerFormCharacterEidolon:0,optimizerFormSelectedLightCone:void 0,optimizerFormSelectedLightConeSuperimposition:1,permutationDetails:{Head:0,Hands:0,Body:0,Feet:0,PlanarSphere:0,LinkRope:0,HeadTotal:0,HandsTotal:0,BodyTotal:0,FeetTotal:0,PlanarSphereTotal:0,LinkRopeTotal:0},relicTabFilters:{set:[],part:[],enhance:[],mainStats:[],subStats:[],grade:[],verified:[],equippedBy:[]},characterTabFilters:{name:"",element:[],path:[],rarity:[]},excludedRelicPotentialCharacters:[],optimizerMenuState:{[ka.characterOptions]:!0,[ka.relicAndStatFilters]:!0,[ka.teammates]:!0,[ka.characterStatsSimulation]:!1,[ka.analysis]:!0},savedSession:hm,settings:cm,optimizerBuild:null,optimizerExpandedPanelBuildData:null,optimizerSelectedRowData:null,optimizerBuffGroups:void 0,setComboState:t=>e(()=>({comboState:t})),setVersion:t=>e(()=>({version:t})),setActiveKey:t=>e(()=>({activeKey:t})),setFormValues:t=>e(()=>({formValues:t})),setCharacters:t=>e(()=>({characters:t})),setCharactersById:t=>e(()=>({charactersById:t})),setInventoryWidth:t=>e(()=>({inventoryWidth:t})),setRowLimit:t=>e(()=>({rowLimit:t})),setConditionalSetEffectsDrawerOpen:t=>e(()=>({conditionalSetEffectsDrawerOpen:t})),setComboDrawerOpen:t=>e(()=>({comboDrawerOpen:t})),setCombatBuffsDrawerOpen:t=>e(()=>({combatBuffsDrawerOpen:t})),setStatTracesDrawerOpen:t=>e(()=>({statTracesDrawerOpen:t})),setEnemyConfigurationsDrawerOpen:t=>e(()=>({enemyConfigurationsDrawerOpen:t})),setSettingsDrawerOpen:t=>e(()=>({settingsDrawerOpen:t})),setGettingStartedDrawerOpen:t=>e(()=>({gettingStartedDrawerOpen:t})),setOptimizerTabFocusCharacter:t=>e(()=>({optimizerTabFocusCharacter:t})),setCharacterTabFocusCharacter:t=>e(()=>({characterTabFocusCharacter:t})),setScoringAlgorithmFocusCharacter:t=>e(()=>({scoringAlgorithmFocusCharacter:t})),setStatTracesDrawerFocusCharacter:t=>e(()=>({statTracesDrawerFocusCharacter:t})),setRelicsTabFocusCharacter:t=>e(()=>({relicsTabFocusCharacter:t})),setPermutationDetails:t=>e(()=>({permutationDetails:t})),setPermutations:t=>e(()=>({permutations:t})),setPermutationsResults:t=>e(()=>({permutationsResults:t})),setPermutationsSearched:t=>e(()=>({permutationsSearched:t})),setRelicsById:t=>e(()=>({relicsById:t})),setRelicTabFilters:t=>e(()=>({relicTabFilters:t})),setCharacterTabFilters:t=>e(()=>({characterTabFilters:t})),setScorerId:t=>e(()=>({scorerId:t})),setScoringMetadataOverrides:t=>e(()=>({scoringMetadataOverrides:t})),setShowcasePreferences:t=>e(()=>({showcasePreferences:t})),setShowcaseTemporaryOptions:t=>e(()=>({showcaseTemporaryOptions:t})),setWarpRequest:t=>e(()=>({warpRequest:t})),setWarpResult:t=>e(()=>({warpResult:t})),setStatDisplay:t=>e(()=>({statDisplay:t})),setMemoDisplay:t=>e(()=>({memoDisplay:t})),setStatSimulationDisplay:t=>e(()=>({statSimulationDisplay:t})),setStatSimulations:t=>e(()=>({statSimulations:J.clone(t)})),setSelectedStatSimulations:t=>e(()=>({selectedStatSimulations:t})),setOptimizerMenuState:t=>e(()=>({optimizerMenuState:t})),setOptimizationInProgress:t=>e(()=>({optimizationInProgress:t})),setOptimizationId:t=>e(()=>({optimizationId:t})),setOptimizerStartTime:t=>e(()=>({optimizerStartTime:t})),setOptimizerRunningEngine:t=>e(()=>({optimizerRunningEngine:t})),setOptimizerEndTime:t=>e(()=>({optimizerEndTime:t})),setTeammateCount:t=>e(()=>({teammateCount:t})),setOptimizerFormCharacterEidolon:t=>e(()=>({optimizerFormCharacterEidolon:t})),setOptimizerFormSelectedLightCone:t=>e(()=>({optimizerFormSelectedLightCone:t})),setOptimizerFormSelectedLightConeSuperimposition:t=>e(()=>({optimizerFormSelectedLightConeSuperimposition:t})),setOptimizerTabFocusCharacterSelectModalOpen:t=>e(()=>({optimizerTabFocusCharacterSelectModalOpen:t})),setZeroPermutationsModalOpen:t=>e(()=>({zeroPermutationModalOpen:t})),setZeroResultModalOpen:t=>e(()=>({zeroResultModalOpen:t})),setScoringModalOpen:t=>e(()=>({scoringModalOpen:t})),setExcludedRelicPotentialCharacters:t=>e(()=>({excludedRelicPotentialCharacters:t})),setMenuSidebarOpen:t=>e(()=>({menuSidebarOpen:t})),setSettings:t=>e(()=>({settings:t})),setSavedSession:t=>e(()=>({savedSession:t})),setSavedSessionKey:(t,s)=>e(o=>({savedSession:{...o.savedSession,[t]:s}})),setColorTheme:t=>e(()=>({colorTheme:t})),setOptimizerBuild:t=>e(()=>({optimizerBuild:t})),setOptimizerExpandedPanelBuildData:t=>e(()=>({optimizerExpandedPanelBuildData:t})),setOptimizerSelectedRowData:t=>e(()=>({optimizerSelectedRowData:t})),setOptimizerBuffGroups:t=>e(()=>({optimizerBuffGroups:t})),setGlobalThemeConfig:t=>e(()=>({globalThemeConfig:t}))}));const V={getMetadata:()=>D0.metadata,setMetadata:e=>D0.metadata=e,getCharacters:()=>window.store.getState().characters,getCharacterById:e=>window.store.getState().charactersById[e],setCharacters:e=>{const a={};for(const s of e)a[s.id]=s;C0(e);const t=[...e];window.store.getState().setCharacters(t),window.store.getState().setCharactersById(a)},setCharacter:e=>{const a=window.store.getState().charactersById;a[e.id]=e,window.store.getState().setCharactersById(a)},addCharacter:e=>{const a=V.getCharacters();a.push(e),V.setCharacters(a)},insertCharacter:(e,a)=>{console.log("insert",e,a);const t=V.getCharacters();a<0&&(a=t.length);const s=V.getCharacterById(e);if(!s)return console.warn("No matching character to insert",e,a);const o=t.splice(s.rank,1);t.splice(a,0,o[0]),V.setCharacters(t),window.onOptimizerFormValuesChange({},de.getForm())},refreshCharacters:()=>{window.setCharacterRows&&window.setCharacterRows(V.getCharacters())},getRelics:()=>Object.values(window.store.getState().relicsById),getRelicsById:()=>window.store.getState().relicsById,setRelics:e=>{const a={};for(const t of e)a[t.id]=t;window.store.getState().setRelicsById(a)},getRelicById:e=>window.store.getState().relicsById[e],setRelic:e=>{var s;if(!e.id)return console.warn("No matching relic",e);const a=V.getRelicById(e.id);!a?(e.ageIndex=V.getRelics().length,zn(e),e.equippedBy&&V.equipRelic(e,e.equippedBy)):((a.part!==e.part||!e.equippedBy)&&(V.unequipRelicById(e.id),zn(e)),e.equippedBy&&((s=V.getCharacterById(e.equippedBy))==null?void 0:s.equipped[e.part])!==e.id&&V.equipRelic(e,e.equippedBy),zn(e))},refreshRelics:()=>{window.setRelicRows&&window.setRelicRows(V.getRelics())},getState:()=>window.store.getState(),getScoringMetadata:e=>{const t=V.getMetadata().characters[e].scoringMetadata,o=window.store.getState().scoringMetadataOverrides[e],r=J.mergeUndefinedValues(o||{},t);for(const l of Object.keys(t.stats))r.stats[l]==null&&(r.stats[l]=0);return Tr(t,r),delete r.presets,r},updateCharacterScoreOverrides:(e,a)=>{const t=window.store.getState().scoringMetadataOverrides;t[e]?J.mergeDefinedValues(t[e],a):t[e]=a,a.modified;const s=V.getMetadata().characters[e].scoringMetadata;Tr(s,t[e]),window.store.getState().setScoringMetadataOverrides(t),Pe.delayedSave()},updateSimulationScoreOverrides:(e,a)=>{if(!a)return;const t=window.store.getState().scoringMetadataOverrides;t[e]?t[e].simulation=a:t[e]={simulation:a},window.store.getState().setScoringMetadataOverrides(t),Pe.delayedSave()},setStore:(e,a=!0)=>{var o,r,l,c,u,d,m,h,g;const t={},s=V.getMetadata().characters;V.getMetadata().lightCones,e.characters=e.characters.filter(C=>s[C.id]);for(const C of e.characters)C.equipped={},t[C.id]=C,(r=(o=C.form)==null?void 0:o.statSim)!=null&&r.simulations&&(C.form.statSim.simulations=C.form.statSim.simulations.filter(M=>{var x;return(x=M.request)==null?void 0:x.stats})),C.form.characterLevel=80,C.form.lightConeLevel=80,C.form.resultSort==="WEIGHT"&&(C.form.resultSort="SPD"),C.form.mainBody=fs(C.form.mainBody),C.form.mainFeet=fs(C.form.mainFeet),C.form.mainPlanarSphere=fs(C.form.mainPlanarSphere),C.form.mainLinkRope=fs(C.form.mainLinkRope),(((c=(l=C.form.setConditionals)==null?void 0:l[G.DuranDynastyOfRunningWolves])==null?void 0:c[1])??!1)&&(C.form.setConditionals[G.DuranDynastyOfRunningWolves][1]=5),typeof((d=(u=C.form.setConditionals)==null?void 0:u[G.SacerdosRelivedOrdeal])==null?void 0:d[1])=="boolean"&&(C.form.setConditionals[G.SacerdosRelivedOrdeal][1]=0);for(const C of Object.values(s))for(const M of Object.keys(f.Parts))C.scoringMetadata.parts[M]=fs(C.scoringMetadata.parts[M]);for(const C of e.relics){fi.augment(C);const M=t[C.equippedBy];M&&!M.equipped[C.part]?M.equipped[C.part]=C.id:C.equippedBy=void 0}if(Rr(e.relics),e.scoringMetadataOverrides){for(const[C,M]of Object.entries(e.scoringMetadataOverrides)){M.length&&delete e.scoringMetadataOverrides[C];const x=e.scoringMetadataOverrides[C];if(x){if(!((m=s[C])!=null&&m.scoringMetadata))continue;const O=yE[C]||{},H=s[C].scoringMetadata;let _=!0;for(const A of Object.values(f.Stats))if(J.nullUndefinedToZero(x.stats[A])!=J.nullUndefinedToZero(O[A])){_=!1;break}if(_)x.stats=J.clone(H.stats),x.modified=!1;else{let A=!1;for(const L of f.SubStats){const v=x.stats[L];J.nullUndefinedToZero(v)!=J.nullUndefinedToZero(H.stats[L])&&(A=!0),v<0&&(x.stats[L]=0),v>1&&(x.stats[L]=1)}A&&(x.modified=!0)}Tr(H,x)}}window.store.getState().setScoringMetadataOverrides(e.scoringMetadataOverrides||{})}if(e.showcasePreferences&&window.store.getState().setShowcasePreferences(e.showcasePreferences||{}),e.warpRequest&&window.store.getState().setWarpRequest(e.warpRequest||{}),window.store.getState().setScorerId(e.scorerId),e.optimizerMenuState){const C=window.store.getState().optimizerMenuState;for(const M of Object.values(ka))e.optimizerMenuState[M]!=null&&(C[M]=e.optimizerMenuState[M]);window.store.getState().setOptimizerMenuState(C)}if(e.savedSession){const C=e.savedSession.optimizerCharacterId;C&&!s[C]&&delete e.savedSession.optimizerCharacterId;const M={...hm,...e.savedSession};window.store.getState().setSavedSession(M)}e.settings&&window.store.getState().setSettings(e.settings),window.store.getState().setExcludedRelicPotentialCharacters(e.excludedRelicPotentialCharacters||[]),window.store.getState().setVersion(e.version),window.store.getState().setInventoryWidth(((h=e.relicLocator)==null?void 0:h.inventoryWidth)??9),window.store.getState().setRowLimit(((g=e.relicLocator)==null?void 0:g.rowLimit)??10),C0(e.characters),V.setRelics(e.relics),V.setCharacters(e.characters),V.refreshCharacters(),V.refreshRelics(),a&&Pe.delayedSave()},resetStore:()=>{const e={relics:[],characters:[],showcasePreferences:{}};V.setStore(e)},replaceCharacterForm:e=>{const a=V.getCharacterById(e.characterId);a&&(a.form={...a.form,...e})},addFromForm:(e,a=!0)=>{var o,r;const t=V.getCharacters();let s=V.getCharacterById(e.characterId);if(s)s.form={...s.form,...e},V.setCharacters(t);else{const l=os({id:e.characterId});s={id:e.characterId,form:{...l,...e},equipped:{}},V.addCharacter(s)}return(r=(o=window.characterGrid)==null?void 0:o.current)!=null&&r.api&&(window.characterGrid.current.api.updateGridOptions({rowData:t}),window.characterGrid.current.api.forEachNode(l=>{l.data.id==s.id&&l.setSelected(!0)}),window.store.getState().setCharacterTabFocusCharacter(s.id)),a&&Pe.delayedSave(),s},saveCharacterPortrait:(e,a)=>{let t=V.getCharacterById(e);t||(V.addFromForm({characterId:e}),t=V.getCharacterById(e),console.log("Character did not previously exist, adding",t)),t.portrait=a,V.setCharacter(t),console.log("Saved portrait",V.getState())},deleteCharacterPortrait:e=>{const a=V.getCharacterById(e);if(!a){console.warn("No character selected");return}delete a.portrait,V.setCharacter(a),console.log("Deleted portrait",V.getState())},saveCharacterBuild:(e,a,t)=>{var r;const s=V.getCharacterById(a);if(!s){console.warn("No character selected");return}if((r=s.builds)==null?void 0:r.find(l=>l.name==e)){const l=`Build name [${e}] already exists`;return console.warn(l),{error:l}}else s.builds||(s.builds=[]),s.builds.push({name:e,build:[...Object.values(s.equipped)],score:t}),V.setCharacter(s),console.log("Saved build",V.getState())},deleteCharacterBuild:(e,a)=>{const t=V.getCharacterById(e);if(!t)return console.warn("No character to delete build for");t.builds=t.builds.filter(s=>s.name!=a),V.setCharacter(t)},clearCharacterBuilds:e=>{const a=V.getCharacterById(e);if(!a)return console.warn("No character to clear builds for");a.builds=[],V.setCharacter(a)},unequipCharacter:e=>{const a=V.getCharacterById(e);if(!a)return console.warn("No character to unequip");console.log("Unequipping character",e,a);for(const t of Object.values(f.Parts)){const s=a.equipped[t];if(!s)continue;const o=V.getRelicById(s);a.equipped[t]=void 0,o&&(o.equippedBy=void 0,zn(o))}V.setCharacter(a)},removeCharacter:e=>{V.unequipCharacter(e);let a=V.getCharacters();a=a.filter(t=>t.id!=e),V.setCharacters(a)},unequipRelicById:e=>{var s;if(!e)return console.warn("No relic");const a=V.getRelicById(e);console.log("UNEQUIP RELIC");const t=V.getCharacters();for(const o of t)(s=o.equipped)!=null&&s[a.part]&&o.equipped[a.part]==a.id&&(o.equipped[a.part]=void 0);V.setCharacters(t),a.equippedBy=void 0,zn(a)},equipRelic:(e,a,t=!1)=>{if(!(e!=null&&e.id))return console.warn("No relic");if(!a)return console.warn("No character");e=V.getRelicById(e.id);const s=e.equippedBy,o=V.getCharacterById(s),r=V.getCharacterById(a),l=V.getRelicById(r.equipped[e.part]);l&&V.unequipRelicById(l.id);const c=t||V.getState().settings[Je.RelicEquippingBehavior.name]==Je.RelicEquippingBehavior.Swap;s!==a&&o&&(l&&c?(o.equipped[e.part]=l.id,l.equippedBy=o.id,zn(l)):o.equipped[e.part]=void 0,V.setCharacter(o)),r.equipped[e.part]=e.id,e.equippedBy=r.id,V.setCharacter(r),zn(e),xE("refreshRelics",500,()=>{var u,d;return(d=(u=window.relicsGrid)==null?void 0:u.current)==null?void 0:d.api.refreshCells()})},equipRelicIdsToCharacter:(e,a,t=!1)=>{if(!a)return console.warn("No characterId to equip to");console.log("Equipping relics to character",e,a);for(const s of e)V.equipRelic({id:s},a,t)},switchRelics:(e,a)=>{if(!e)return console.warn("No characterId to equip from");if(!a)return console.warn("No characterId to equip to");console.log(`Switching relics from character ${e} to character ${a}`);const t=V.getCharacterById(e);V.equipRelicIdsToCharacter(Object.values(t.equipped),a,!0)},deleteRelic:e=>{var t,s;if(!e)return oe.error("Unable to delete relic");V.unequipRelicById(e);const a=window.store.getState().relicsById;delete a[e],window.store.getState().setRelicsById(a),(s=(t=window.characterGrid)==null?void 0:t.current)!=null&&s.api&&window.characterGrid.current.api.redrawRows()},mergeRelicsWithState:(e,a)=>{var c,u,d,m,h;const t=V.getRelics();if(e=J.clone(e)||[],a=J.clone(a)||[],console.log("Merging relics",e,a),a)for(const g of a)V.addFromForm(g,!1);const s=V.getCharacters(),o={};for(const g of t){const C=E0(g);o[C]=g}let r=[];e.length==0&&(r=t);for(let g of e){const C=E0(g),M=o[C];let x;if(M?(g.verified&&(M.verified=!0,M.substats=g.substats,M.augmentedStats=g.augmentedStats),g.equippedBy&&a.length&&(M.equippedBy=g.equippedBy,g=M),r.push(M),x=M.id,delete o[C]):(x=g.id,r.push(g)),g.equippedBy&&a.length){const O=s.find(H=>H.id==g.equippedBy);O?O.equipped[g.part]=x:console.log("No character to equip relic to",g)}}Rr(r),console.log("Replacement relics",r),V.setRelics(r);for(const g of s)for(const C of Object.values(f.Parts))(c=g.equipped)!=null&&c[C]&&!V.getRelicById(g.equipped[C])&&(g.equipped[C]=void 0);for(const g of V.getRelics()){if(!g.equippedBy)continue;const C=V.getCharacterById(g.equippedBy);(!C||C.equipped[g.part]!=g.id)&&(g.equippedBy=void 0)}for(const g of V.getCharacters())for(const C of Object.keys(g.equipped)){const M=g.equipped[C];M&&V.getRelicById(M).equippedBy!=g.id&&(g.equipped[C]=void 0)}V.setRelics(r),V.setCharacters(s),(d=(u=window.relicsGrid)==null?void 0:u.current)!=null&&d.api&&window.relicsGrid.current.api.updateGridOptions({rowData:r}),(h=(m=window.characterGrid)==null?void 0:m.current)!=null&&h.api&&window.characterGrid.current.api.redrawRows();const l=de.getForm();window.onOptimizerFormValuesChange({},l),window.refreshRelicsScore()},mergePartialRelicsWithState:(e,a=[])=>{var l,c;const t=b.clone(V.getRelics())||[];e=b.clone(e)||[];const s=[],o=[],r=[];for(const u of e){const d=vE(u,t);d?(d.substats=u.substats,d.main=u.main,d.enhance=u.enhance,d.verified=!0,s.push(d),r.push({relic:d,equippedBy:u.equippedBy})):(t.push(u),o.push(u),r.push({relic:u,equippedBy:u.equippedBy}),u.equippedBy=void 0)}console.log("addedNewRelics",o),console.log("updatedOldRelics",s),t.map(u=>fi.augment(u)),Rr(t),V.setRelics(t);for(const u of r)a.find(d=>d.id==u.equippedBy)&&V.equipRelic(u.relic,u.equippedBy);V.refreshRelics(),window.refreshRelicsScore(),(c=(l=window.characterGrid)==null?void 0:l.current)!=null&&c.api&&window.characterGrid.current.api.redrawRows(),s.length&&oe.success(Y.t("importSaveTab:PartialImport.OldRelics",{count:s.length}),8),o.length&&oe.success(Y.t("importSaveTab:PartialImport.NewRelics",{count:o.length}),8)}};function vE(e,a){const t={};for(const l of a){const c=R0(l);t[c]||(t[c]=[]),t[c].push(l)}const s=R0(e),o=t[s]||[];let r;for(const l of o){if(e.enhance<l.enhance||e.substats.length<l.substats.length)continue;let c=!1,u=0;for(let m=0;m<l.substats.length;m++){const h=l.substats[m],g=e.substats.find(C=>C.stat==h.stat);if(!g){c=!0;break}if(h.stat!=g.stat){c=!0;break}if(T0(h,g)==-1){c=!0;break}T0(h,g)==1&&u++}if(c)continue;const d=Math.round((Math.floor(e.enhance/3)*3-Math.floor(l.enhance/3)*3)/3);if(!(u>d)){r=l;break}}return r}function C0(e){for(let t=0;t<e.length;t++)e[t].rank=t;const a=V.getCharacterById(window.store.getState().optimizerTabFocusCharacter);return a&&window.optimizerForm.setFieldValue("rank",a.rank),e}function E0(e){const a=[],t=[];for(const o of e.substats)J.isFlat(o.stat)?a.push(Math.floor(o.value)):a.push(J.precisionRound(J.truncate10ths(o.value))),t.push(o.stat);const s={part:e.part,set:e.set,grade:e.grade,enhance:e.enhance,mainStat:e.main.stat,mainValue:Math.floor(e.main.value),substatValues:a,substatStats:t};return b.objectHash(s)}function T0(e,a){let t,s;return J.isFlat(e.stat)?(t=Math.floor(e.value),s=Math.floor(a.value)):(t=J.precisionRound(J.truncate10ths(e.value)),s=J.precisionRound(J.truncate10ths(a.value))),t==s?0:t<s?1:-1}function R0(e){const a={part:e.part,set:e.set,grade:e.grade,mainStat:e.main.stat};return b.objectHash(a)}function zn(e){const a=window.store.getState().relicsById;a[e.id]=e,window.store.getState().setRelicsById(a)}function fs(e){return e==null?e:[...new Set(e)]}function Rr(e){const a=e.length;for(let t=0;t<a;t++)e[t].ageIndex=a-t-1}function HE(e){const a=Y.getFixedT(null,"notifications","Changelog");try{const t=!e||_u.lt(e,Co);if(console.log(`Is out of date? ${t}`,e,Co),!t)return;const s=i.jsxs(Cl,{children:[i.jsx(se,{type:"primary",icon:i.jsx(Au,{}),onClick:()=>{window.notificationApi.destroy(),window.store.getState().setActiveKey(ge.CHANGELOG)},children:a("View")}),i.jsx(se,{type:"default",onClick:()=>window.notificationApi.destroy(),children:a("Dismiss")})]});window.notificationApi.success({message:a("Message"),description:a("Description"),btn:s,duration:30})}catch(t){console.error(t)}}function FE(){const e=Y.getFixedT(null,"notifications","GPU"),a=Y.getFixedT(null,"notifications","GPUCrash");try{window.notificationApi.warning({message:e("Message"),description:i.jsxs(D,{vertical:!0,children:[i.jsx("div",{children:e("Description.l1")}),i.jsx("div",{children:i.jsxs("ul",{children:[i.jsx("li",{children:e("Description.l2")}),i.jsx("li",{children:i.jsx(xt,{t:e,i18nKey:"Description.l3",components:{CustomLink:i.jsx(Zt,{url:"https://github.com/gpuweb/gpuweb/wiki/Implementation-Status",linkIcon:!0})}})})]})}),i.jsx("p",{children:e("Description.l4")}),i.jsx("p",{children:i.jsx(xt,{t:a,i18nKey:"Description.l2",components:{CustomLink:i.jsx(Zt,{url:"https://github.com/fribbels/hsr-optimizer/blob/main/docs/guides/en/troubleshooting.md#gpu",linkIcon:!0})}})})]}),duration:15})}catch(t){console.error(t)}}function wE(){const e=Y.getFixedT(null,"notifications","GPUCrash");try{window.notificationApi.warning({message:e("Message"),description:i.jsxs(D,{vertical:!0,gap:10,children:[i.jsx("div",{children:e("Description.l1")}),i.jsx("div",{children:i.jsx(xt,{t:e,i18nKey:"Description.l2",components:{CustomLink:i.jsx(Zt,{url:"https://github.com/fribbels/hsr-optimizer/blob/main/docs/guides/en/troubleshooting.md#gpu",linkIcon:!0})}})})]}),duration:15})}catch(a){console.error(a)}}window.yaml=xu;const rl=["en_US","fr_FR","ja_JP","ko_KR","pt_BR","vi_VN","zh_CN"],ll=Qt===xo.BETA,kE=ll?Object.keys(Wl):rl;Y.use(mf).use(ff).use(hf).init({ns:["charactersTab","common","conditionals","gameData","getStartedTab","hint","hometab","importSaveTab","modals","notifications","optimizerTab","relicScorerTab","relicsTab","settings","sidebar","warpCalculatorTab"],defaultNS:"common",fallbackNS:["common","gameData"],debug:!1,supportedLngs:kE,load:"currentOnly",fallbackLng:"en_US",interpolation:{escapeValue:!1},backend:{loadPath:Qt+"/locales/{{lng}}/{{ns}}.yaml",parse:function(e){return xu.load(e)}}});function KE(){const{i18n:e}=ee(),a=Object.values(Wl).filter(t=>t.locale!=="aa_ER"?ll||rl.includes(t.locale):Qt===xo.BETA).map(({locale:t,nativeName:s,shortName:o})=>({value:t,display:i.jsxs(D,{align:"center",gap:10,children:[i.jsx("img",{style:{width:22},src:Q.getGlobe()}),o]}),label:i.jsxs(D,{gap:8,title:t,children:[s,ll?` (${t})`:"",rl.includes(t)?"":" - (WIP)"]})}));return i.jsx(ne,{options:a,optionRender:t=>t.data.label,onChange:t=>{e.changeLanguage(t).then(()=>{Qt===xo.BETA&&(t==="aa_ER"?window.jipt.start():window.jipt.stop()),console.log("setting language to:",e.resolvedLanguage)})},style:{width:135,marginRight:6,height:36},placement:"bottomLeft",optionLabelProp:"display",dropdownStyle:{width:210},defaultValue:e.resolvedLanguage,dropdownRender:t=>i.jsxs(D,{gap:4,vertical:!0,children:[t,i.jsx(se,{type:"primary",style:{borderRadius:5,height:32},onClick:()=>window.open("https://discord.gg/rDmB4Un7qg"),children:"Help translate the website!"})]})})}const{useToken:NE}=Xt,{Header:UE}=xs;function jE(){const e=window.store(s=>s.menuSidebarOpen),a=window.store(s=>s.setMenuSidebarOpen),{token:t}=NE();return i.jsx(UE,{style:{display:"flex",alignItems:"center",paddingLeft:"30px",paddingRight:"0px",height:48,width:"100%",backgroundColor:t.colorBgLayout,backgroundImage:"linear-gradient(rgb(0 0 0/60%) 0 0)"},children:i.jsxs(D,{align:"center",justify:"space-between",style:{width:"100%"},children:[i.jsxs(D,{children:[i.jsx(se,{type:"text",icon:e?i.jsx(Qa,{}):i.jsx(Sf,{}),onClick:()=>a(!e),style:{fontSize:"16px",position:"relative",left:"-20px"}}),i.jsx("a",{href:Qt,children:i.jsxs(D,{align:"center",style:{position:"relative",left:"-10px"},children:[i.jsx("img",{src:Q.getLogo(),style:{width:30,height:30,marginRight:15}}),i.jsx(_e,{style:{fontWeight:600,fontSize:22},color:"inherit",children:"Fribbels Honkai Star Rail Optimizer (Beta)"})]})})]}),i.jsxs(D,{children:[i.jsx(KE,{}),i.jsx("a",{href:"https://ko-fi.com/fribbels",target:"_blank",rel:"noreferrer",children:i.jsx(D,{children:i.jsx("img",{src:Q.getKofi(),style:{height:36,marginRight:6,borderRadius:5}})})}),i.jsx("a",{href:"https://github.com/fribbels/hsr-optimizer",target:"_blank",rel:"noreferrer",children:i.jsx(D,{children:i.jsx("img",{src:Q.getGithub(),style:{height:36,marginRight:6,borderRadius:5}})})}),i.jsx("a",{href:"https://discord.gg/rDmB4Un7qg",target:"_blank",rel:"noreferrer",children:i.jsx(D,{children:i.jsx("img",{src:Q.getDiscord(),style:{height:36,marginRight:8,borderRadius:5}})})})]})]})})}const WE=()=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",children:[i.jsx("path",{fillRule:"evenodd",d:"M.5 6a.5.5 0 0 0-.488.608l1.652 7.434A2.5 2.5 0 0 0 4.104 16h5.792a2.5 2.5 0 0 0 2.44-1.958l.131-.59a3 3 0 0 0 1.3-5.854l.221-.99A.5.5 0 0 0 13.5 6zM13 12.5a2.01 2.01 0 0 1-.316-.025l.867-3.898A2.001 2.001 0 0 1 13 12.5"}),i.jsx("path",{d:"m4.4.8-.003.004-.014.019a4.167 4.167 0 0 0-.204.31 2.327 2.327 0 0 0-.141.267c-.026.06-.034.092-.037.103v.004a.593.593 0 0 0 .091.248c.075.133.178.272.308.445l.01.012c.118.158.26.347.37.543.112.2.22.455.22.745 0 .188-.065.368-.119.494a3.31 3.31 0 0 1-.202.388 5.444 5.444 0 0 1-.253.382l-.018.025-.005.008-.002.002A.5.5 0 0 1 3.6 4.2l.003-.004.014-.019a4.149 4.149 0 0 0 .204-.31 2.06 2.06 0 0 0 .141-.267c.026-.06.034-.092.037-.103a.593.593 0 0 0-.09-.252A4.334 4.334 0 0 0 3.6 2.8l-.01-.012a5.099 5.099 0 0 1-.37-.543A1.53 1.53 0 0 1 3 1.5c0-.188.065-.368.119-.494.059-.138.134-.274.202-.388a5.446 5.446 0 0 1 .253-.382l.025-.035A.5.5 0 0 1 4.4.8m3 0-.003.004-.014.019a4.167 4.167 0 0 0-.204.31 2.327 2.327 0 0 0-.141.267c-.026.06-.034.092-.037.103v.004a.593.593 0 0 0 .091.248c.075.133.178.272.308.445l.01.012c.118.158.26.347.37.543.112.2.22.455.22.745 0 .188-.065.368-.119.494a3.31 3.31 0 0 1-.202.388 5.444 5.444 0 0 1-.253.382l-.018.025-.005.008-.002.002A.5.5 0 0 1 6.6 4.2l.003-.004.014-.019a4.149 4.149 0 0 0 .204-.31 2.06 2.06 0 0 0 .141-.267c.026-.06.034-.092.037-.103a.593.593 0 0 0-.09-.252A4.334 4.334 0 0 0 6.6 2.8l-.01-.012a5.099 5.099 0 0 1-.37-.543A1.53 1.53 0 0 1 6 1.5c0-.188.065-.368.119-.494.059-.138.134-.274.202-.388a5.446 5.446 0 0 1 .253-.382l.025-.035A.5.5 0 0 1 7.4.8m3 0-.003.004-.014.019a4.077 4.077 0 0 0-.204.31 2.337 2.337 0 0 0-.141.267c-.026.06-.034.092-.037.103v.004a.593.593 0 0 0 .091.248c.075.133.178.272.308.445l.01.012c.118.158.26.347.37.543.112.2.22.455.22.745 0 .188-.065.368-.119.494a3.198 3.198 0 0 1-.202.388 5.385 5.385 0 0 1-.252.382l-.019.025-.005.008-.002.002A.5.5 0 0 1 9.6 4.2l.003-.004.014-.019a4.149 4.149 0 0 0 .204-.31 2.06 2.06 0 0 0 .141-.267c.026-.06.034-.092.037-.103a.593.593 0 0 0-.09-.252A4.334 4.334 0 0 0 9.6 2.8l-.01-.012a5.099 5.099 0 0 1-.37-.543A1.53 1.53 0 0 1 9 1.5c0-.188.065-.368.119-.494.059-.138.134-.274.202-.388a5.446 5.446 0 0 1 .253-.382l.025-.035A.5.5 0 0 1 10.4.8"})]}),VE=e=>i.jsx(ri,{component:WE,...e}),ZE=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 -1 16 16",children:i.jsx("path",{d:"M13.545 2.907a13.227 13.227 0 0 0-3.257-1.011.05.05 0 0 0-.052.025c-.141.25-.297.577-.406.833a12.19 12.19 0 0 0-3.658 0 8.258 8.258 0 0 0-.412-.833.051.051 0 0 0-.052-.025c-1.125.194-2.22.534-3.257 1.011a.041.041 0 0 0-.021.018C.356 6.024-.213 9.047.066 12.032c.001.014.01.028.021.037a13.276 13.276 0 0 0 3.995 2.02.05.05 0 0 0 .056-.019c.308-.42.582-.863.818-1.329a.05.05 0 0 0-.01-.059.051.051 0 0 0-.018-.011 8.875 8.875 0 0 1-1.248-.595.05.05 0 0 1-.02-.066.051.051 0 0 1 .015-.019c.084-.063.168-.129.248-.195a.05.05 0 0 1 .051-.007c2.619 1.196 5.454 1.196 8.041 0a.052.052 0 0 1 .053.007c.08.066.164.132.248.195a.051.051 0 0 1-.004.085 8.254 8.254 0 0 1-1.249.594.05.05 0 0 0-.03.03.052.052 0 0 0 .003.041c.24.465.515.909.817 1.329a.05.05 0 0 0 .056.019 13.235 13.235 0 0 0 4.001-2.02.049.049 0 0 0 .021-.037c.334-3.451-.559-6.449-2.366-9.106a.034.034 0 0 0-.02-.019Zm-8.198 7.307c-.789 0-1.438-.724-1.438-1.612 0-.889.637-1.613 1.438-1.613.807 0 1.45.73 1.438 1.613 0 .888-.637 1.612-1.438 1.612m5.316 0c-.788 0-1.438-.724-1.438-1.612 0-.889.637-1.613 1.438-1.613.807 0 1.451.73 1.438 1.613 0 .888-.631 1.612-1.438 1.612"})}),zE=e=>i.jsx(ri,{component:ZE,...e}),XE=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",children:i.jsx("path",{d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8"})}),YE=e=>i.jsx(ri,{component:XE,...e});function wt(e,a,t,s){return{label:e,key:a,icon:t,children:s}}const JE=()=>{const{t:e}=ee("sidebar"),a=window.store(r=>r.activeKey),t=window.store(r=>r.setActiveKey),s=W.useMemo(()=>[wt(e("Tools.Title"),"subTools",i.jsx(Lu,{}),[wt(i.jsxs(D,{children:[i.jsx(pf,{style:{marginRight:5,width:16}})," ",e("Tools.Showcase")]}),ge.SHOWCASE),wt(i.jsxs(D,{children:[i.jsx(gf,{style:{marginRight:5,width:16}})," ",e("Tools.WarpPlanner")]}),ge.WARP)]),wt(e("Optimization.Title"),"subOptimizer",i.jsx(Ef,{}),[wt(i.jsxs(D,{children:[i.jsx(bf,{style:{marginRight:5,width:16}})," ",e("Optimization.Optimizer")]}),ge.OPTIMIZER),wt(i.jsxs(D,{children:[i.jsx(Ou,{style:{marginRight:5,width:16}})," ",e("Optimization.Characters")]}),ge.CHARACTERS),wt(i.jsxs(D,{children:[i.jsx(Df,{style:{marginRight:5,width:16}})," ",e("Optimization.Relics")]}),ge.RELICS),wt(i.jsxs(D,{children:[i.jsx(El,{style:{marginRight:5,width:16}})," ",e("Optimization.Import")]}),ge.IMPORT),wt(i.jsxs(D,{onClick:()=>window.store.getState().setSettingsDrawerOpen(!0),style:{width:"100%"},children:[i.jsx(Ua,{style:{marginRight:5,width:16}})," ",e("Optimization.Settings")]}),"link settings"),wt(i.jsxs(D,{onClick:()=>window.store.getState().setGettingStartedDrawerOpen(!0),style:{width:"100%"},children:[i.jsx(Cf,{style:{marginRight:5,width:16}})," ",e("Optimization.Start")]}),"link gettingstarted")]),wt(e("Links.Title"),"subLinks",i.jsx(Rf,{}),[wt(i.jsxs(_e.Link,{children:[i.jsx(Tf,{style:{marginRight:2,width:16}})," ",e("Links.Home")]}),ge.HOME),wt(i.jsxs(_e.Link,{children:[i.jsx(Au,{style:{marginRight:2,width:16}})," ",e("Links.Changelog")]}),ge.CHANGELOG),wt(i.jsxs(_e.Link,{href:"https://ko-fi.com/fribbels",target:"_blank",rel:"noopener noreferrer",children:[i.jsx(VE,{style:{marginRight:5}})," ",e("Links.Kofi")]}),"link donate"),wt(i.jsxs(_e.Link,{href:"https://discord.gg/rDmB4Un7qg",target:"_blank",rel:"noopener noreferrer",children:[i.jsx(zE,{style:{marginRight:5}})," ",e("Links.Discord")]}),"link discord"),wt(i.jsxs(_e.Link,{href:"https://github.com/fribbels/hsr-optimizer",target:"_blank",rel:"noopener noreferrer",children:[i.jsx(YE,{style:{marginRight:5}})," ",e("Links.Github")]}),"link github"),wt(i.jsxs(_e.Link,{href:"https://starrailoptimizer.github.io/",target:"_blank",rel:"noopener noreferrer",children:[i.jsx(Ru,{style:{marginRight:5}})," ",e("Links.Unleak")]}),"link leaks free")])],[e]),o=r=>{var l;(l=r.key)!=null&&l.includes("link")||t(r.key)};return i.jsx(Bf,{onClick:o,inlineIndent:12,defaultSelectedKeys:["1"],defaultOpenKeys:["subOptimizer","subTools","subLinks"],selectedKeys:[a],mode:"inline",items:s,className:"no-highlight"})},{useToken:QE}=Xt,{Sider:$E}=xs;function qE(){const{token:e}=QE(),a=window.store(t=>t.menuSidebarOpen);return i.jsx($E,{width:170,style:{background:e.colorBgContainer},collapsible:!0,collapsedWidth:48,collapsed:!a,trigger:null,children:i.jsx("div",{style:{position:"sticky",top:0},children:i.jsx(JE,{})})})}const eT=[{part:"Head",set:"Hunter of Glacial Forest",enhance:15,grade:5,main:{stat:"HP",value:705.6000000101048},substats:[{stat:"CRIT Rate",value:11.016,scoreMeta:{multiplier:1,score:22}},{stat:"CRIT DMG",value:10.367999999999999,scoreMeta:{multiplier:1,score:10.3}},{stat:"Effect RES",value:3.456,scoreMeta:{multiplier:0,score:0}},{stat:"Break Effect",value:5.183999999999999,scoreMeta:{multiplier:0,score:0}}],id:"cd85c14c-a662-4413-a149-a379e6d538d3",augmentedStats:{mainStat:"HP",mainValue:705.6000000101048,"CRIT Rate":.11016,"CRIT DMG":.10367999999999998,"Effect RES":.03456,"Break Effect":.05183999999999999,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"Effect Hit Rate":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:32.3,ss:5.184,ds:5.183999999999999,cs:32.4,equippedBy:"1212",weightScore:42.767999999999994},{part:"Head",set:"Passerby of Wandering Cloud",enhance:15,grade:5,main:{stat:"HP",value:705.6000000101048},substats:[{stat:"DEF",value:19.0518957},{stat:"HP%",value:12.096},{stat:"DEF%",value:14.580000000000002},{stat:"Effect RES",value:7.344}],id:"0bd7404f-3420-4bf5-9e45-f79343728685",augmentedStats:{mainStat:"HP",mainValue:705.6000000101048,DEF:19.0518957,"HP%":.12096,"DEF%":.1458,"Effect RES":.07344,"ATK%":0,"SPD%":0,HP:0,ATK:0,SPD:0,"CRIT DMG":0,"CRIT Rate":0,"Effect Hit Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:0,ss:46.656,ds:0,equippedBy:"1217",cs:0},{part:"Head",set:"Hunter of Glacial Forest",enhance:15,grade:5,main:{stat:"HP",value:705.6000000101048},substats:[{stat:"ATK",value:35.9869141},{stat:"SPD",value:8},{stat:"CRIT Rate",value:2.916},{stat:"Effect RES",value:7.344}],id:"77ac4c85-21a7-4526-999a-6e54646dda6d",augmentedStats:{mainStat:"HP",mainValue:705.6000000101048,ATK:35.9869141,SPD:8,"CRIT Rate":.02916,"Effect RES":.07344,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,DEF:0,"CRIT DMG":0,"Effect Hit Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:26.6,ss:31.816000000000003,ds:20.8,cs:26.632,weightScore:41.5581710950614},{part:"Head",set:"Longevous Disciple",enhance:15,grade:5,main:{stat:"HP",value:705.6000000101048},substats:[{stat:"ATK%",value:4.32},{stat:"SPD",value:4},{stat:"CRIT Rate",value:10.367999999999999},{stat:"Effect RES",value:4.32}],id:"e898e418-bc4e-404d-be3f-2477dec9839a",augmentedStats:{mainStat:"HP",mainValue:705.6000000101048,"ATK%":.0432,SPD:4,"CRIT Rate":.10367999999999998,"Effect RES":.0432,"HP%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,DEF:0,"CRIT DMG":0,"Effect Hit Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:37.45,ss:16.880000000000003,ds:16.880000000000003,equippedBy:"1205",cs:31.135999999999996},{part:"Head",set:"Genius of Brilliant Stars",enhance:15,grade:5,main:{stat:"HP",value:705.6000000101048},substats:[{stat:"DEF",value:19.0518957},{stat:"CRIT Rate",value:8.424},{stat:"CRIT DMG",value:18.144},{stat:"Effect RES",value:8.208}],id:"eda5ede8-dfaa-4fa9-b2c2-17011ed0abe6",augmentedStats:{mainStat:"HP",mainValue:705.6000000101048,DEF:19.0518957,"CRIT Rate":.08424,"CRIT DMG":.18144,"Effect RES":.08208,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,SPD:0,"Effect Hit Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:34.900000000000006,ss:12.312000000000001,ds:0,equippedBy:"1102",cs:34.992},{part:"Head",set:"Hunter of Glacial Forest",enhance:15,grade:5,main:{stat:"HP",value:705.6000000101048},substats:[{stat:"DEF",value:38.1037914},{stat:"DEF%",value:5.4},{stat:"CRIT Rate",value:2.916},{stat:"CRIT DMG",value:23.976}],id:"8de51c73-36b5-40ea-91a2-e566d97da2a9",augmentedStats:{mainStat:"HP",mainValue:705.6000000101048,DEF:38.1037914,"DEF%":.054000000000000006,"CRIT Rate":.02916,"CRIT DMG":.23976,"HP%":0,"ATK%":0,"SPD%":0,HP:0,ATK:0,SPD:0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:29.7,ss:6.48,ds:0,equippedBy:"1101",cs:29.808,weightScore:41.00089936920223},{part:"Head",set:"Band of Sizzling Thunder",enhance:15,grade:5,main:{stat:"HP",value:705.6000000101048},substats:[{stat:"ATK%",value:10.8},{stat:"DEF%",value:9.719999999999999},{stat:"SPD",value:2},{stat:"Break Effect",value:12.312}],id:"354bde06-a10b-4449-8365-16f0dcac7b88",augmentedStats:{mainStat:"HP",mainValue:705.6000000101048,"ATK%":.10800000000000001,"DEF%":.0972,SPD:2,"Break Effect":.12312,"HP%":0,"SPD%":0,HP:0,ATK:0,DEF:0,"CRIT DMG":0,"CRIT Rate":0,"Effect Hit Rate":0,"Effect RES":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:21.400000000000002,ss:16.863999999999997,ds:33.712,equippedBy:"1005",cs:5.2},{part:"Head",set:"Messenger Traversing Hackerspace",enhance:15,grade:5,main:{stat:"HP",value:705.6000000101048},substats:[{stat:"HP%",value:3.456},{stat:"ATK%",value:7.776},{stat:"DEF%",value:10.26},{stat:"CRIT DMG",value:17.496000000000002}],id:"1e0de4ea-c1bf-4990-a0bd-739b1eea2e1d",augmentedStats:{mainStat:"HP",mainValue:705.6000000101048,"HP%":.03456,"ATK%":.07776,"DEF%":.1026,"CRIT DMG":.17496000000000003,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"CRIT Rate":0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:28.95,ss:17.496,ds:11.664,cs:17.496000000000002},{part:"Head",set:"Hunter of Glacial Forest",enhance:15,grade:5,main:{stat:"HP",value:705.6000000101048},substats:[{stat:"ATK",value:40.2206687},{stat:"DEF",value:21.168773},{stat:"ATK%",value:12.096},{stat:"CRIT Rate",value:9.072}],id:"be226101-f443-4ea0-93e8-81813e48f692",augmentedStats:{mainStat:"HP",mainValue:705.6000000101048,ATK:40.2206687,DEF:21.168773,"ATK%":.12096,"CRIT Rate":.09072,"HP%":0,"DEF%":0,"SPD%":0,HP:0,SPD:0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:36,ss:0,ds:18.144,cs:18.144,weightScore:43.34799806299142},{part:"Head",set:"Hunter of Glacial Forest",enhance:15,grade:5,main:{stat:"HP",value:705.6000000101048},substats:[{stat:"HP%",value:12.528,scoreMeta:{multiplier:0,score:0}},{stat:"DEF%",value:9.719999999999999,scoreMeta:{multiplier:0,score:0}},{stat:"CRIT Rate",value:5.832,scoreMeta:{multiplier:1,score:11.664}},{stat:"CRIT DMG",value:12.959999999999999,scoreMeta:{multiplier:1,score:12.959999999999999}}],id:"e30bce86-38ef-42db-9cea-58b18a94d4bc",augmentedStats:{mainStat:"HP",mainValue:705.6000000101048,"HP%":.12528,"DEF%":.0972,"CRIT Rate":.05832,"CRIT DMG":.1296,"ATK%":0,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:24.5,ss:30.456,ds:0,cs:24.624,weightScore:55.08},{part:"Head",set:"Hunter of Glacial Forest",enhance:15,grade:5,main:{stat:"HP",value:705.6000000101048},substats:[{stat:"ATK%",value:15.552},{stat:"DEF%",value:9.719999999999999},{stat:"SPD",value:2},{stat:"CRIT DMG",value:6.4799999999999995}],id:"01287db9-7fe8-49c9-b30e-907db3b6d0d0",augmentedStats:{mainStat:"HP",mainValue:705.6000000101048,"ATK%":.15552,"DEF%":.0972,SPD:2,"CRIT DMG":.0648,"HP%":0,"SPD%":0,HP:0,ATK:0,DEF:0,"CRIT Rate":0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:34.85,ss:16.863999999999997,ds:28.528,cs:11.68,weightScore:46.655999999999985},{part:"Head",set:"Hunter of Glacial Forest",enhance:15,grade:5,main:{stat:"HP",value:705.6000000101048},substats:[{stat:"ATK",value:19.0518957},{stat:"HP%",value:3.456},{stat:"SPD",value:6},{stat:"CRIT DMG",value:18.792}],id:"85c1d15d-a89e-4e08-ab91-29c09449eaf7",augmentedStats:{mainStat:"HP",mainValue:705.6000000101048,ATK:19.0518957,"HP%":.03456,SPD:6,"CRIT DMG":.18792,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,DEF:0,"CRIT Rate":0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:34.3,ss:20.784000000000002,ds:15.600000000000001,cs:34.392,weightScore:41.63197293267957},{part:"Head",set:"Hunter of Glacial Forest",enhance:15,grade:5,main:{stat:"HP",value:705.6000000101048},substats:[{stat:"HP%",value:4.32},{stat:"DEF%",value:13.5},{stat:"CRIT Rate",value:8.748000000000001},{stat:"CRIT DMG",value:5.832}],id:"15153c3a-7c55-4f18-8b0f-5938ea3165a9",augmentedStats:{mainStat:"HP",mainValue:705.6000000101048,"HP%":.0432,"DEF%":.135,"CRIT Rate":.08748000000000002,"CRIT DMG":.05832,"ATK%":0,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:23.2,ss:22.68,ds:0,cs:23.328000000000003,weightScore:46.008},{part:"Head",set:"Hunter of Glacial Forest",enhance:15,grade:5,main:{stat:"HP",value:705.6000000101048},substats:[{stat:"DEF",value:38.1037914},{stat:"HP%",value:11.664},{stat:"CRIT Rate",value:6.156},{stat:"CRIT DMG",value:12.312}],id:"406b32a8-1a17-4a85-a9b2-f707bbb7d789",augmentedStats:{mainStat:"HP",mainValue:705.6000000101048,DEF:38.1037914,"HP%":.11664,"CRIT Rate":.06156,"CRIT DMG":.12312,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,SPD:0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:24.5,ss:17.496,ds:0,cs:24.624,weightScore:46.832899369202224},{part:"Head",set:"Hunter of Glacial Forest",enhance:15,grade:5,main:{stat:"HP",value:705.6000000101048},substats:[{stat:"SPD",value:4},{stat:"CRIT DMG",value:23.976},{stat:"Effect Hit Rate",value:7.776},{stat:"Effect RES",value:3.888}],id:"32478990-1729-40f5-a85a-c6c448abf4e3",augmentedStats:{mainStat:"HP",mainValue:705.6000000101048,SPD:4,"CRIT DMG":.23976,"Effect Hit Rate":.07776,"Effect RES":.03888,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,DEF:0,"CRIT Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:34.3,ss:16.232,ds:22.064,cs:34.376,weightScore:51.839999999999996},{part:"Head",set:"Hunter of Glacial Forest",enhance:15,grade:5,main:{stat:"HP",value:705.6000000101048},substats:[{stat:"DEF",value:16.9350184},{stat:"HP%",value:11.664},{stat:"SPD",value:4},{stat:"CRIT Rate",value:6.156}],id:"631dc239-48a5-4109-b4ad-57db6387e61a",augmentedStats:{mainStat:"HP",mainValue:705.6000000101048,DEF:16.9350184,"HP%":.11664,SPD:4,"CRIT Rate":.06156,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:22.6,ss:27.896,ds:10.4,cs:22.712,weightScore:42.27062194186765},{part:"Head",set:"Hunter of Glacial Forest",enhance:15,grade:5,main:{stat:"HP",value:705.6000000101048},substats:[{stat:"ATK",value:38.1037914},{stat:"SPD",value:4},{stat:"CRIT DMG",value:11.016},{stat:"Effect RES",value:8.208}],id:"f02e66d8-7de8-4d81-97d1-3ea73fce4056",augmentedStats:{mainStat:"HP",mainValue:705.6000000101048,ATK:38.1037914,SPD:4,"CRIT DMG":.11016,"Effect RES":.08208,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,DEF:0,"CRIT Rate":0,"Effect Hit Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:21.4,ss:22.712000000000003,ds:10.4,cs:21.416,weightScore:37.90394586535913},{part:"Head",set:"Musketeer of Wild Wheat",enhance:12,grade:5,main:{stat:"HP",value:587.059200008167},substats:[{stat:"DEF",value:33.8700368},{stat:"HP%",value:8.208},{stat:"CRIT Rate",value:5.832},{stat:"Effect Hit Rate",value:8.208}],id:"e3169778-e239-4cc6-b673-f02137df9378",augmentedStats:{mainStat:"HP",mainValue:587.059200008167,DEF:33.8700368,"HP%":.08208,"CRIT Rate":.05832,"Effect Hit Rate":.08208,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,SPD:0,"CRIT DMG":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:11.6,ss:12.312000000000001,ds:12.312000000000001,cs:11.664},{part:"Head",set:"Genius of Brilliant Stars",enhance:12,grade:5,main:{stat:"HP",value:587.059200008167},substats:[{stat:"HP%",value:6.912},{stat:"ATK%",value:8.208},{stat:"CRIT Rate",value:5.183999999999999},{stat:"CRIT DMG",value:5.832}],id:"f5ca028c-ebfc-4a3f-86b9-92e8c191ca0f",augmentedStats:{mainStat:"HP",mainValue:587.059200008167,"HP%":.06912,"ATK%":.08208,"CRIT Rate":.05183999999999999,"CRIT DMG":.05832,"DEF%":0,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:28.299999999999997,ss:10.368,ds:12.312000000000001,cs:16.2},{part:"Head",set:"Longevous Disciple",enhance:12,grade:5,main:{stat:"HP",value:587.059200008167},substats:[{stat:"HP%",value:7.776},{stat:"DEF%",value:9.180000000000001},{stat:"CRIT DMG",value:6.4799999999999995},{stat:"Effect RES",value:7.776}],id:"712b4702-b22a-4e75-8921-1fe6dcca2f50",augmentedStats:{mainStat:"HP",mainValue:587.059200008167,"HP%":.07776,"DEF%":.09180000000000002,"CRIT DMG":.0648,"Effect RES":.07776,"ATK%":0,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"CRIT Rate":0,"Effect Hit Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:6.4,ss:34.344,ds:0,cs:6.4799999999999995},{part:"Head",set:"Messenger Traversing Hackerspace",enhance:12,grade:5,main:{stat:"HP",value:587.059200008167},substats:[{stat:"HP%",value:6.912},{stat:"ATK%",value:7.344},{stat:"SPD",value:2},{stat:"Break Effect",value:11.664}],id:"0ad72590-0a68-46b5-b2ba-1d7a45d77fd7",augmentedStats:{mainStat:"HP",mainValue:587.059200008167,"HP%":.06912,"ATK%":.07344,SPD:2,"Break Effect":.11664,"DEF%":0,"SPD%":0,HP:0,ATK:0,DEF:0,"CRIT DMG":0,"CRIT Rate":0,"Effect Hit Rate":0,"Effect RES":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:16.15,ss:15.568000000000001,ds:27.88,cs:5.2},{part:"Head",set:"Longevous Disciple",enhance:12,grade:5,main:{stat:"HP",value:587.059200008167},substats:[{stat:"CRIT Rate",value:6.156},{stat:"CRIT DMG",value:16.848},{stat:"Effect RES",value:4.32},{stat:"Break Effect",value:6.4799999999999995}],id:"5e6a0316-5618-4e9e-8c7f-ae788edea454",augmentedStats:{mainStat:"HP",mainValue:587.059200008167,"CRIT Rate":.06156,"CRIT DMG":.16848,"Effect RES":.0432,"Break Effect":.0648,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"Effect Hit Rate":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:29,ss:6.48,ds:6.4799999999999995,cs:29.159999999999997},{part:"Head",set:"Longevous Disciple",enhance:12,grade:5,main:{stat:"HP",value:587.059200008167},substats:[{stat:"ATK",value:40.2206687},{stat:"HP%",value:4.32},{stat:"CRIT DMG",value:12.312},{stat:"Effect Hit Rate",value:6.912}],id:"f8667a7d-7ba6-4e2f-931e-cbe2230b51bc",augmentedStats:{mainStat:"HP",mainValue:587.059200008167,ATK:40.2206687,"HP%":.0432,"CRIT DMG":.12312,"Effect Hit Rate":.06912,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,DEF:0,SPD:0,"CRIT Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:12.3,ss:6.48,ds:10.368,cs:12.312},{part:"Head",set:"Band of Sizzling Thunder",enhance:12,grade:5,main:{stat:"HP",value:587.059200008167},substats:[{stat:"HP%",value:4.32},{stat:"ATK%",value:3.456},{stat:"CRIT Rate",value:6.4799999999999995},{stat:"Effect Hit Rate",value:10.367999999999999}],id:"3a3dcda5-a6b0-4514-9aa3-5930e832aca5",augmentedStats:{mainStat:"HP",mainValue:587.059200008167,"HP%":.0432,"ATK%":.03456,"CRIT Rate":.0648,"Effect Hit Rate":.10367999999999998,"DEF%":0,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"CRIT DMG":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:17.900000000000002,ss:6.48,ds:20.735999999999997,cs:12.959999999999999},{part:"Head",set:"Band of Sizzling Thunder",enhance:12,grade:5,main:{stat:"HP",value:587.059200008167},substats:[{stat:"ATK",value:40.2206687},{stat:"HP%",value:3.888},{stat:"SPD",value:4},{stat:"CRIT Rate",value:9.072}],id:"75756842-66be-4ac6-bb65-70b51f222b0a",augmentedStats:{mainStat:"HP",mainValue:587.059200008167,ATK:40.2206687,"HP%":.03888,SPD:4,"CRIT Rate":.09072,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,DEF:0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:28.4,ss:16.232,ds:10.4,cs:28.543999999999997},{part:"Head",set:"Hunter of Glacial Forest",enhance:12,grade:5,main:{stat:"HP",value:587.059200008167},substats:[{stat:"CRIT Rate",value:5.832},{stat:"CRIT DMG",value:12.959999999999999},{stat:"Effect RES",value:7.344},{stat:"Break Effect",value:11.664}],id:"c4adf66e-d769-47be-bf6d-d22f94786308",augmentedStats:{mainStat:"HP",mainValue:587.059200008167,"CRIT Rate":.05832,"CRIT DMG":.1296,"Effect RES":.07344,"Break Effect":.11664,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"Effect Hit Rate":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:24.5,ss:11.016,ds:11.664,cs:24.624},{part:"Hands",set:"Hunter of Glacial Forest",enhance:15,grade:5,main:{stat:"ATK",value:352.8000000116881},substats:[{stat:"HP%",value:3.456,scoreMeta:{multiplier:0,score:0}},{stat:"SPD",value:4,scoreMeta:{multiplier:1,score:10.368}},{stat:"CRIT DMG",value:22.68,scoreMeta:{multiplier:1,score:22.6}},{stat:"Effect Hit Rate",value:3.456,scoreMeta:{multiplier:0,score:0}}],id:"798657c8-5c5c-4b44-9c5f-f5f094414289",augmentedStats:{mainStat:"ATK",mainValue:352.8000000116881,"HP%":.03456,SPD:4,"CRIT DMG":.2268,"Effect Hit Rate":.03456,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,DEF:0,"CRIT Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:33,ss:15.584,ds:15.584,equippedBy:"1212",cs:33.08,weightScore:43.416},{part:"Hands",set:"Passerby of Wandering Cloud",enhance:15,grade:5,main:{stat:"ATK",value:352.8000000116881},substats:[{stat:"HP%",value:8.208},{stat:"ATK%",value:4.32},{stat:"CRIT DMG",value:17.496000000000002},{stat:"Effect RES",value:7.776}],id:"9b3f7f9b-b394-4c87-af67-0f4f7e41a6a8",augmentedStats:{mainStat:"ATK",mainValue:352.8000000116881,"HP%":.08208,"ATK%":.0432,"CRIT DMG":.17496000000000003,"Effect RES":.07776,"DEF%":0,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"CRIT Rate":0,"Effect Hit Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:23.849999999999998,ss:23.976,ds:6.48,equippedBy:"1217",cs:17.496000000000002},{part:"Hands",set:"Longevous Disciple",enhance:15,grade:5,main:{stat:"ATK",value:352.8000000116881},substats:[{stat:"SPD",value:7},{stat:"CRIT Rate",value:5.508},{stat:"CRIT DMG",value:11.664},{stat:"Effect Hit Rate",value:4.32}],id:"71b088e8-e254-4219-96d5-f56cde1702d3",augmentedStats:{mainStat:"ATK",mainValue:352.8000000116881,SPD:7,"CRIT Rate":.05508,"CRIT DMG":.11664,"Effect Hit Rate":.0432,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,DEF:0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:40.8,ss:18.2,ds:24.68,equippedBy:"1205",cs:40.879999999999995},{part:"Hands",set:"Genius of Brilliant Stars",enhance:15,grade:5,main:{stat:"ATK",value:352.8000000116881},substats:[{stat:"HP",value:38.1037941},{stat:"ATK%",value:7.776},{stat:"CRIT Rate",value:8.748000000000001},{stat:"CRIT DMG",value:12.312}],id:"d0b2b781-33dc-4029-b875-81ecbc659466",augmentedStats:{mainStat:"ATK",mainValue:352.8000000116881,HP:38.1037941,"ATK%":.07776,"CRIT Rate":.08748000000000002,"CRIT DMG":.12312,"HP%":0,"DEF%":0,"SPD%":0,ATK:0,DEF:0,SPD:0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:41.25,ss:0,ds:11.664,equippedBy:"1102",cs:29.808},{part:"Hands",set:"Hunter of Glacial Forest",enhance:15,grade:5,main:{stat:"ATK",value:352.8000000116881},substats:[{stat:"HP%",value:3.456},{stat:"SPD",value:4},{stat:"CRIT DMG",value:17.496000000000002},{stat:"Effect RES",value:10.8}],id:"1c3f175d-c9db-4b42-aa7d-0ffb5f9f3cf4",augmentedStats:{mainStat:"ATK",mainValue:352.8000000116881,"HP%":.03456,SPD:4,"CRIT DMG":.17496000000000003,"Effect RES":.10800000000000001,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,DEF:0,"CRIT Rate":0,"Effect Hit Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:27.799999999999997,ss:31.784000000000006,ds:10.4,cs:27.896,weightScore:49.248000000000005},{part:"Hands",set:"Genius of Brilliant Stars",enhance:15,grade:5,main:{stat:"ATK",value:352.8000000116881},substats:[{stat:"HP",value:38.1037941},{stat:"CRIT Rate",value:5.832},{stat:"CRIT DMG",value:16.2},{stat:"Effect Hit Rate",value:8.208}],id:"9f2ab764-badb-4240-9b57-484fdab84ff7",augmentedStats:{mainStat:"ATK",mainValue:352.8000000116881,HP:38.1037941,"CRIT Rate":.05832,"CRIT DMG":.162,"Effect Hit Rate":.08208,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,ATK:0,DEF:0,SPD:0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:27.799999999999997,ss:0,ds:12.312000000000001,cs:27.863999999999997},{part:"Hands",set:"Genius of Brilliant Stars",enhance:15,grade:5,main:{stat:"ATK",value:352.8000000116881},substats:[{stat:"HP",value:42.337549},{stat:"DEF",value:69.8569509},{stat:"ATK%",value:10.367999999999999},{stat:"CRIT Rate",value:2.5919999999999996}],id:"25966262-0749-4675-a5c3-7e701163e083",augmentedStats:{mainStat:"ATK",mainValue:352.8000000116881,HP:42.337549,DEF:69.8569509,"ATK%":.10367999999999998,"CRIT Rate":.025919999999999995,"HP%":0,"DEF%":0,"SPD%":0,ATK:0,SPD:0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:20.450000000000003,ss:0,ds:15.551999999999998,cs:5.183999999999999},{part:"Hands",set:"Band of Sizzling Thunder",enhance:15,grade:5,main:{stat:"ATK",value:352.8000000116881},substats:[{stat:"HP",value:42.337549},{stat:"ATK%",value:15.120000000000001},{stat:"CRIT DMG",value:11.664},{stat:"Break Effect",value:5.832}],id:"81a06240-1434-4b48-b7c4-cedbca15ff50",augmentedStats:{mainStat:"ATK",mainValue:352.8000000116881,HP:42.337549,"ATK%":.1512,"CRIT DMG":.11664,"Break Effect":.05832,"HP%":0,"DEF%":0,"SPD%":0,ATK:0,DEF:0,SPD:0,"CRIT Rate":0,"Effect Hit Rate":0,"Effect RES":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:34.25,ss:0,ds:28.512,equippedBy:"1005",cs:11.664},{part:"Hands",set:"Messenger Traversing Hackerspace",enhance:15,grade:5,main:{stat:"ATK",value:352.8000000116881},substats:[{stat:"DEF%",value:4.32},{stat:"SPD",value:4},{stat:"Effect Hit Rate",value:12.096},{stat:"Effect RES",value:7.776}],id:"24a8bb7d-4924-446c-8d8d-56b7d782ab70",augmentedStats:{mainStat:"ATK",mainValue:352.8000000116881,"DEF%":.0432,SPD:4,"Effect Hit Rate":.12096,"Effect RES":.07776,"HP%":0,"ATK%":0,"SPD%":0,HP:0,ATK:0,DEF:0,"CRIT DMG":0,"CRIT Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:10.4,ss:27.247999999999998,ds:28.543999999999997,cs:10.4},{part:"Hands",set:"Messenger Traversing Hackerspace",enhance:15,grade:5,main:{stat:"ATK",value:352.8000000116881},substats:[{stat:"HP%",value:3.888},{stat:"ATK%",value:8.208},{stat:"DEF%",value:4.859999999999999},{stat:"SPD",value:9}],id:"039ac008-c1a4-453a-92d2-0aaece2fb9ca",augmentedStats:{mainStat:"ATK",mainValue:352.8000000116881,"HP%":.03888,"ATK%":.08208,"DEF%":.0486,SPD:9,"SPD%":0,HP:0,ATK:0,DEF:0,"CRIT DMG":0,"CRIT Rate":0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:35.7,ss:35.064,ds:35.712,cs:23.400000000000002},{part:"Hands",set:"Messenger Traversing Hackerspace",enhance:15,grade:5,main:{stat:"ATK",value:352.8000000116881},substats:[{stat:"DEF",value:42.337546},{stat:"SPD",value:4},{stat:"Effect Hit Rate",value:8.64},{stat:"Break Effect",value:12.959999999999999}],id:"0d95b359-89d2-4809-9f84-e0dc5794a367",augmentedStats:{mainStat:"ATK",mainValue:352.8000000116881,DEF:42.337546,SPD:4,"Effect Hit Rate":.0864,"Break Effect":.1296,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,"CRIT DMG":0,"CRIT Rate":0,"Effect RES":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:10.4,ss:10.4,ds:36.32,cs:10.4},{part:"Hands",set:"Band of Sizzling Thunder",enhance:15,grade:5,main:{stat:"ATK",value:352.8000000116881},substats:[{stat:"HP%",value:7.776},{stat:"ATK%",value:15.984000000000002},{stat:"CRIT Rate",value:5.832},{stat:"CRIT DMG",value:5.183999999999999}],id:"19cb32c1-62e9-4a24-8b09-2e4d48056681",augmentedStats:{mainStat:"ATK",mainValue:352.8000000116881,"HP%":.07776,"ATK%":.15984,"CRIT Rate":.05832,"CRIT DMG":.05183999999999999,"DEF%":0,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:40.550000000000004,ss:11.664,ds:23.976000000000003,cs:16.848},{part:"Hands",set:"Genius of Brilliant Stars",enhance:15,grade:5,main:{stat:"ATK",value:352.8000000116881},substats:[{stat:"DEF",value:38.1037914},{stat:"ATK%",value:3.888},{stat:"SPD",value:6},{stat:"CRIT Rate",value:5.508}],id:"58fd5666-2e8a-4a56-a675-5098c886ff87",augmentedStats:{mainStat:"ATK",mainValue:352.8000000116881,DEF:38.1037914,"ATK%":.03888,SPD:6,"CRIT Rate":.05508,"HP%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:32.3,ss:15.600000000000001,ds:21.432000000000002,cs:26.616},{part:"Hands",set:"Genius of Brilliant Stars",enhance:15,grade:5,main:{stat:"ATK",value:352.8000000116881},substats:[{stat:"DEF",value:55.0388098},{stat:"CRIT Rate",value:2.5919999999999996},{stat:"CRIT DMG",value:11.016},{stat:"Effect RES",value:10.8}],id:"92158d7b-fd3a-462c-b4fd-2091b81286b2",augmentedStats:{mainStat:"ATK",mainValue:352.8000000116881,DEF:55.0388098,"CRIT Rate":.025919999999999995,"CRIT DMG":.11016,"Effect RES":.10800000000000001,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,SPD:0,"Effect Hit Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:16,ss:16.200000000000003,ds:0,cs:16.2},{part:"Hands",set:"Hunter of Glacial Forest",enhance:15,grade:5,main:{stat:"ATK",value:352.8000000116881},substats:[{stat:"HP%",value:7.776},{stat:"CRIT Rate",value:5.183999999999999},{stat:"CRIT DMG",value:16.2},{stat:"Break Effect",value:10.367999999999999}],id:"26d1567a-3fe8-4c02-9874-80612a6fa4a7",augmentedStats:{mainStat:"ATK",mainValue:352.8000000116881,"HP%":.07776,"CRIT Rate":.05183999999999999,"CRIT DMG":.162,"Break Effect":.10367999999999998,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"Effect Hit Rate":0,"Effect RES":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:26.4,ss:11.664,ds:10.367999999999999,cs:26.567999999999998,weightScore:48.599999999999994},{part:"Hands",set:"Hunter of Glacial Forest",enhance:15,grade:5,main:{stat:"ATK",value:352.8000000116881},substats:[{stat:"DEF",value:40.2206687},{stat:"CRIT Rate",value:9.072},{stat:"CRIT DMG",value:5.832},{stat:"Break Effect",value:18.144}],id:"130a284c-8e10-40bf-9ba9-b3e56ac894b9",augmentedStats:{mainStat:"ATK",mainValue:352.8000000116881,DEF:40.2206687,"CRIT Rate":.09072,"CRIT DMG":.05832,"Break Effect":.18144,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,SPD:0,"Effect Hit Rate":0,"Effect RES":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:23.8,ss:0,ds:18.144,cs:23.976,weightScore:47.09472711193568},{part:"Hands",set:"Hunter of Glacial Forest",enhance:15,grade:5,main:{stat:"ATK",value:352.8000000116881},substats:[{stat:"HP%",value:7.344},{stat:"DEF%",value:9.719999999999999},{stat:"CRIT Rate",value:5.832},{stat:"CRIT DMG",value:11.016}],id:"0bb9bf7e-5f26-496b-91ff-fa0087f1407b",augmentedStats:{mainStat:"ATK",mainValue:352.8000000116881,"HP%":.07344,"DEF%":.0972,"CRIT Rate":.05832,"CRIT DMG":.11016,"ATK%":0,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:22.6,ss:22.68,ds:0,cs:22.68,weightScore:45.35999999999999},{part:"Hands",set:"Hunter of Glacial Forest",enhance:15,grade:5,main:{stat:"ATK",value:352.8000000116881},substats:[{stat:"HP%",value:7.776,scoreMeta:{multiplier:0,score:0}},{stat:"SPD",value:8,scoreMeta:{multiplier:1,score:20.736}},{stat:"CRIT DMG",value:6.4799999999999995,scoreMeta:{multiplier:1,score:6.4799999999999995}},{stat:"Effect Hit Rate",value:7.344,scoreMeta:{multiplier:0,score:0}}],id:"5b198c90-85fd-4baa-b44a-556f6e9d4d18",augmentedStats:{mainStat:"ATK",mainValue:352.8000000116881,"HP%":.07776,SPD:8,"CRIT DMG":.0648,"Effect Hit Rate":.07344,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,DEF:0,"CRIT Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:27.200000000000003,ss:32.464,ds:31.816000000000003,cs:27.28,weightScore:49.895999999999994},{part:"Hands",set:"Hunter of Glacial Forest",enhance:15,grade:5,main:{stat:"ATK",value:352.8000000116881},substats:[{stat:"DEF",value:19.0518957},{stat:"CRIT Rate",value:5.183999999999999},{stat:"CRIT DMG",value:12.312},{stat:"Effect RES",value:10.8}],id:"85589ec4-df10-4cbc-b190-8a3fca0030b0",augmentedStats:{mainStat:"ATK",mainValue:352.8000000116881,DEF:19.0518957,"CRIT Rate":.05183999999999999,"CRIT DMG":.12312,"Effect RES":.10800000000000001,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,SPD:0,"Effect Hit Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:22.5,ss:16.200000000000003,ds:0,cs:22.68,weightScore:41.23644968460111},{part:"Hands",set:"Hunter of Glacial Forest",enhance:15,grade:5,main:{stat:"ATK",value:352.8000000116881},substats:[{stat:"HP%",value:3.456},{stat:"ATK%",value:7.776},{stat:"CRIT Rate",value:11.988},{stat:"Effect RES",value:3.888}],id:"467aa841-1d6b-4d13-8b7b-3f6d4c288367",augmentedStats:{mainStat:"ATK",mainValue:352.8000000116881,"HP%":.03456,"ATK%":.07776,"CRIT Rate":.11988,"Effect RES":.03888,"DEF%":0,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"CRIT DMG":0,"Effect Hit Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:35.35,ss:11.016,ds:11.664,cs:23.976,weightScore:46.656},{part:"Hands",set:"Hunter of Glacial Forest",enhance:15,grade:5,main:{stat:"ATK",value:352.8000000116881},substats:[{stat:"ATK%",value:8.64},{stat:"DEF%",value:9.180000000000001},{stat:"CRIT DMG",value:12.312},{stat:"Break Effect",value:12.959999999999999}],id:"df9b4eda-ad97-4940-935e-a2094414414c",augmentedStats:{mainStat:"ATK",mainValue:352.8000000116881,"ATK%":.0864,"DEF%":.09180000000000002,"CRIT DMG":.12312,"Break Effect":.1296,"HP%":0,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"CRIT Rate":0,"Effect Hit Rate":0,"Effect RES":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:25.2,ss:11.016000000000002,ds:25.92,cs:12.312,weightScore:49.248},{part:"Hands",set:"Guard of Wuthering Snow",enhance:12,grade:5,main:{stat:"ATK",value:293.52960000932217},substats:[{stat:"HP%",value:3.888},{stat:"DEF%",value:4.32},{stat:"Effect Hit Rate",value:6.912},{stat:"Effect RES",value:10.8}],id:"605af0bc-ad64-46da-9681-e8889fa8d66d",augmentedStats:{mainStat:"ATK",mainValue:293.52960000932217,"HP%":.03888,"DEF%":.0432,"Effect Hit Rate":.06912,"Effect RES":.10800000000000001,"ATK%":0,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"CRIT DMG":0,"CRIT Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:0,ss:27.216,ds:10.368,cs:0},{part:"Hands",set:"Musketeer of Wild Wheat",enhance:12,grade:5,main:{stat:"ATK",value:293.52960000932217},substats:[{stat:"HP",value:71.9738333},{stat:"DEF",value:33.8700368},{stat:"HP%",value:12.959999999999999},{stat:"DEF%",value:4.32}],id:"67999399-0a5f-4a94-9267-32c42a7fbbe5",augmentedStats:{mainStat:"ATK",mainValue:293.52960000932217,HP:71.9738333,DEF:33.8700368,"HP%":.1296,"DEF%":.0432,"ATK%":0,"SPD%":0,ATK:0,SPD:0,"CRIT DMG":0,"CRIT Rate":0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:0,ss:24.624,ds:0,equippedBy:"1202",cs:0},{part:"Hands",set:"Longevous Disciple",enhance:12,grade:5,main:{stat:"ATK",value:293.52960000932217},substats:[{stat:"HP%",value:16.416},{stat:"ATK%",value:7.776},{stat:"CRIT DMG",value:5.832},{stat:"Effect Hit Rate",value:3.456}],id:"2fa02060-e9c7-4910-bd20-c89864379aff",augmentedStats:{mainStat:"ATK",mainValue:293.52960000932217,"HP%":.16416,"ATK%":.07776,"CRIT DMG":.05832,"Effect Hit Rate":.03456,"DEF%":0,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"CRIT Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:17.35,ss:24.624000000000002,ds:16.848,cs:5.832},{part:"Hands",set:"Hunter of Glacial Forest",enhance:12,grade:5,main:{stat:"ATK",value:293.52960000932217},substats:[{stat:"DEF",value:57.1556871},{stat:"ATK%",value:8.64},{stat:"CRIT Rate",value:3.2399999999999998},{stat:"CRIT DMG",value:5.183999999999999}],id:"5e67a642-be84-4d5d-b887-cc323b84e8c6",augmentedStats:{mainStat:"ATK",mainValue:293.52960000932217,DEF:57.1556871,"ATK%":.0864,"CRIT Rate":.0324,"CRIT DMG":.05183999999999999,"HP%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,SPD:0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:24.4,ss:0,ds:12.96,cs:11.663999999999998},{part:"Hands",set:"Hunter of Glacial Forest",enhance:12,grade:5,main:{stat:"ATK",value:293.52960000932217},substats:[{stat:"HP",value:38.1037941},{stat:"SPD",value:6},{stat:"CRIT DMG",value:6.4799999999999995},{stat:"Effect RES",value:10.8}],id:"6f1373fd-b42f-4dc3-a562-9c44fbe8e1fb",augmentedStats:{mainStat:"ATK",mainValue:293.52960000932217,HP:38.1037941,SPD:6,"CRIT DMG":.0648,"Effect RES":.10800000000000001,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,ATK:0,DEF:0,"CRIT Rate":0,"Effect Hit Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:22,ss:31.800000000000004,ds:15.600000000000001,cs:22.080000000000002},{part:"Hands",set:"Hunter of Glacial Forest",enhance:12,grade:5,main:{stat:"ATK",value:293.52960000932217},substats:[{stat:"HP",value:42.337549},{stat:"SPD",value:2},{stat:"CRIT DMG",value:11.664},{stat:"Effect RES",value:12.096}],id:"63457d83-ec25-40dd-a1d1-04dda49a3740",augmentedStats:{mainStat:"ATK",mainValue:293.52960000932217,HP:42.337549,SPD:2,"CRIT DMG":.11664,"Effect RES":.12096,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,ATK:0,DEF:0,"CRIT Rate":0,"Effect Hit Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:16.8,ss:23.343999999999998,ds:5.2,cs:16.864},{part:"Hands",set:"Guard of Wuthering Snow",enhance:10,grade:3,main:{stat:"ATK",value:152.40960001200438},substats:[{stat:"HP",value:71},{stat:"HP%",value:8.2},{stat:"Effect Hit Rate",value:8.2},{stat:"Effect RES",value:3.8}],id:"d6aaf5a8-2351-4880-bcd6-0f7ceb011956",augmentedStats:{mainStat:"ATK",mainValue:152.40960001200438,HP:71,"HP%":.08199999999999999,"Effect Hit Rate":.08199999999999999,"Effect RES":.038,"ATK%":0,"DEF%":0,"SPD%":0,ATK:0,DEF:0,SPD:0,"CRIT DMG":0,"CRIT Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},cs:0,ss:18,ds:12.299999999999999},{part:"Hands",set:"Musketeer of Wild Wheat",enhance:9,grade:3,main:{stat:"ATK",value:140.55552001087926},substats:[{stat:"HP%",value:3.4},{stat:"DEF%",value:10.2},{stat:"Effect RES",value:7.3},{stat:"Break Effect",value:5.1}],id:"d61a533d-e721-4edb-99f4-787708a08132",augmentedStats:{mainStat:"ATK",mainValue:140.55552001087926,"HP%":.034,"DEF%":.102,"Effect RES":.073,"Break Effect":.051,"ATK%":0,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"CRIT DMG":0,"CRIT Rate":0,"Effect Hit Rate":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},cs:0,ss:28.29,ds:5.1},{part:"Hands",set:"Passerby of Wandering Cloud",enhance:9,grade:3,main:{stat:"ATK",value:140.55552001087926},substats:[{stat:"HP",value:42},{stat:"HP%",value:7.7},{stat:"CRIT Rate",value:5.5},{stat:"Effect Hit Rate",value:3.4}],id:"a75828e1-5e27-49ab-8bca-67e2e1fdd3ec",augmentedStats:{mainStat:"ATK",mainValue:140.55552001087926,HP:42,"HP%":.077,"CRIT Rate":.055,"Effect Hit Rate":.034,"ATK%":0,"DEF%":0,"SPD%":0,ATK:0,DEF:0,SPD:0,"CRIT DMG":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},cs:11,ss:11.55,ds:5.1000000000000005},{part:"Hands",set:"Guard of Wuthering Snow",enhance:9,grade:3,main:{stat:"ATK",value:140.55552001087926},substats:[{stat:"DEF",value:38},{stat:"DEF%",value:15.6},{stat:"CRIT Rate",value:2.9},{stat:"Effect Hit Rate",value:3.4}],id:"1c2a19ba-fb58-4ff6-9f4d-582c3db368ae",augmentedStats:{mainStat:"ATK",mainValue:140.55552001087926,DEF:38,"DEF%":.156,"CRIT Rate":.028999999999999998,"Effect Hit Rate":.034,"HP%":0,"ATK%":0,"SPD%":0,HP:0,ATK:0,SPD:0,"CRIT DMG":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},cs:5.8,ss:18.72,ds:5.1000000000000005},{part:"Hands",set:"Band of Sizzling Thunder",enhance:9,grade:3,main:{stat:"ATK",value:140.55552001087926},substats:[{stat:"HP%",value:8.6},{stat:"DEF%",value:4.3},{stat:"SPD",value:2},{stat:"Break Effect",value:11}],id:"30362d67-7152-4dd2-a57c-4408c0287b8e",augmentedStats:{mainStat:"ATK",mainValue:140.55552001087926,"HP%":.086,"DEF%":.043,SPD:2,"Break Effect":.11,"ATK%":0,"SPD%":0,HP:0,ATK:0,DEF:0,"CRIT DMG":0,"CRIT Rate":0,"Effect Hit Rate":0,"Effect RES":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},cs:5.2,ss:23.259999999999998,ds:16.2},{part:"Hands",set:"Longevous Disciple",enhance:9,grade:3,main:{stat:"ATK",value:140.55552001087926},substats:[{stat:"HP%",value:3.4},{stat:"DEF%",value:14.5},{stat:"CRIT DMG",value:6.4},{stat:"Effect Hit Rate",value:3.8}],id:"0a4f8d97-9ca4-452c-b872-3d19a9576b4c",augmentedStats:{mainStat:"ATK",mainValue:140.55552001087926,"HP%":.034,"DEF%":.145,"CRIT DMG":.064,"Effect Hit Rate":.038,"ATK%":0,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"CRIT Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},cs:6.4,ss:22.5,ds:5.699999999999999},{part:"Hands",set:"Band of Sizzling Thunder",enhance:9,grade:3,main:{stat:"ATK",value:140.55552001087926},substats:[{stat:"HP%",value:3.8},{stat:"ATK%",value:3.4},{stat:"Effect Hit Rate",value:12},{stat:"Break Effect",value:5.8}],id:"4e512372-e8b0-456e-a37e-8080445edfed",augmentedStats:{mainStat:"ATK",mainValue:140.55552001087926,"HP%":.038,"ATK%":.034,"Effect Hit Rate":.12,"Break Effect":.057999999999999996,"DEF%":0,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"CRIT DMG":0,"CRIT Rate":0,"Effect RES":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},cs:0,ss:5.699999999999999,ds:28.900000000000002},{part:"Hands",set:"Hunter of Glacial Forest",enhance:9,grade:3,main:{stat:"ATK",value:140.55552001087926},substats:[{stat:"DEF",value:21.5921488},{stat:"SPD",value:2},{stat:"CRIT Rate",value:5.8},{stat:"Effect RES",value:7.3}],id:"c128854c-b34e-4a05-acdc-5179534bf55f",augmentedStats:{mainStat:"ATK",mainValue:140.55552001087926,DEF:21.5921488,SPD:2,"CRIT Rate":.057999999999999996,"Effect RES":.073,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,"CRIT DMG":0,"Effect Hit Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},cs:16.8,ss:16.15,ds:5.2},{part:"Hands",set:"Hunter of Glacial Forest",enhance:9,grade:3,main:{stat:"ATK",value:140.55552001087926},substats:[{stat:"HP",value:71},{stat:"ATK%",value:3.8},{stat:"DEF%",value:4.8},{stat:"CRIT Rate",value:5.5}],id:"9e27d180-01ec-4b06-86fc-cd7cb7868724",augmentedStats:{mainStat:"ATK",mainValue:140.55552001087926,HP:71,"ATK%":.038,"DEF%":.048,"CRIT Rate":.055,"HP%":0,"SPD%":0,ATK:0,DEF:0,SPD:0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},cs:11,ss:5.76,ds:5.699999999999999},{part:"Hands",set:"Hunter of Glacial Forest",enhance:9,grade:3,main:{stat:"ATK",value:140.55552001087926},substats:[{stat:"DEF%",value:5.4},{stat:"SPD",value:4},{stat:"CRIT DMG",value:5.8},{stat:"Effect RES",value:8.2}],id:"8ed0420b-66e4-4b5e-83d0-6aa75db77e5d",augmentedStats:{mainStat:"ATK",mainValue:140.55552001087926,"DEF%":.054000000000000006,SPD:4,"CRIT DMG":.057999999999999996,"Effect RES":.08199999999999999,"HP%":0,"ATK%":0,"SPD%":0,HP:0,ATK:0,DEF:0,"CRIT Rate":0,"Effect Hit Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},cs:16.2,ss:29.18,ds:10.4},{part:"Hands",set:"Hunter of Glacial Forest",enhance:9,grade:3,main:{stat:"ATK",value:140.55552001087926},substats:[{stat:"HP%",value:3.4},{stat:"ATK%",value:3.8},{stat:"DEF%",value:9.7},{stat:"CRIT Rate",value:5.8}],id:"0d3e87b1-c8de-4a05-a817-4e1e59f0281f",augmentedStats:{mainStat:"ATK",mainValue:140.55552001087926,"HP%":.034,"ATK%":.038,"DEF%":.09699999999999999,"CRIT Rate":.057999999999999996,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},cs:11.6,ss:16.74,ds:5.699999999999999},{part:"Hands",set:"Passerby of Wandering Cloud",enhance:9,grade:3,main:{stat:"ATK",value:140.55552001087926},substats:[{stat:"DEF",value:16},{stat:"HP%",value:4.3},{stat:"DEF%",value:15.1},{stat:"Break Effect",value:6.4}],id:"98fdd38c-9f98-41b4-ba20-9b9333a4ed22",augmentedStats:{mainStat:"ATK",mainValue:140.55552001087926,DEF:16,"HP%":.043,"DEF%":.151,"Break Effect":.064,"ATK%":0,"SPD%":0,HP:0,ATK:0,SPD:0,"CRIT DMG":0,"CRIT Rate":0,"Effect Hit Rate":0,"Effect RES":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},cs:0,ss:24.569999999999997,ds:6.4},{part:"Body",set:"Hunter of Glacial Forest",enhance:15,grade:5,main:{stat:"CRIT DMG",value:64.8000007029628},substats:[{stat:"HP",value:114.3113823,scoreMeta:{multiplier:0,score:0}},{stat:"ATK%",value:7.344,scoreMeta:{multiplier:.75,score:8.212499999999999}},{stat:"DEF%",value:4.32,scoreMeta:{multiplier:0,score:0}},{stat:"CRIT Rate",value:8.1,scoreMeta:{multiplier:1,score:16.2}}],id:"b3376a19-62f9-489e-80e6-8f98335af158",augmentedStats:{mainStat:"CRIT DMG",mainValue:.648000007029628,HP:114.3113823,"ATK%":.07344,"DEF%":.0432,"CRIT Rate":.081,"HP%":0,"SPD%":0,ATK:0,DEF:0,SPD:0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:27.15,ss:5.184,ds:11.016,equippedBy:"1212",cs:16.2,weightScore:38.37073442122549},{part:"Body",set:"Passerby of Wandering Cloud",enhance:15,grade:5,main:{stat:"Outgoing Healing Boost",value:34.5606000395488},substats:[{stat:"DEF",value:21.5921488},{stat:"DEF%",value:14.04},{stat:"Effect RES",value:7.776},{stat:"Break Effect",value:11.664}],id:"0241587d-bbff-4ffb-b93c-d201728d1c0b",augmentedStats:{mainStat:"Outgoing Healing Boost",mainValue:.345606000395488,DEF:21.5921488,"DEF%":.1404,"Effect RES":.07776,"Break Effect":.11664,"HP%":0,"ATK%":0,"SPD%":0,HP:0,ATK:0,SPD:0,"CRIT DMG":0,"CRIT Rate":0,"Effect Hit Rate":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},cs:0,ss:28.512,ds:11.664},{part:"Body",set:"Longevous Disciple",enhance:15,grade:5,main:{stat:"CRIT DMG",value:64.8000007029628},substats:[{stat:"HP",value:139.7139117},{stat:"DEF%",value:4.32},{stat:"SPD",value:4},{stat:"Break Effect",value:5.832}],id:"7cdd90c6-73fc-4a5f-9cea-6458d5e6f456",augmentedStats:{mainStat:"CRIT DMG",mainValue:.648000007029628,HP:139.7139117,"DEF%":.0432,SPD:4,"Break Effect":.05832,"HP%":0,"ATK%":0,"SPD%":0,ATK:0,DEF:0,"CRIT DMG":0,"CRIT Rate":0,"Effect Hit Rate":0,"Effect RES":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:10.4,ss:15.584,ds:16.232,equippedBy:"1205",cs:10.4},{part:"Body",set:"Genius of Brilliant Stars",enhance:15,grade:5,main:{stat:"CRIT Rate",value:32.399999862536205},substats:[{stat:"ATK%",value:12.096},{stat:"SPD",value:4},{stat:"Effect Hit Rate",value:6.912},{stat:"Break Effect",value:5.183999999999999}],id:"4b8dafeb-6f5a-410c-bcbc-4caaef116af2",augmentedStats:{mainStat:"CRIT Rate",mainValue:.32399999862536205,"ATK%":.12096,SPD:4,"Effect Hit Rate":.06912,"Break Effect":.05183999999999999,"HP%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,DEF:0,"CRIT DMG":0,"CRIT Rate":0,"Effect RES":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:28.4,ss:10.4,ds:44.096,equippedBy:"1102",cs:10.4},{part:"Body",set:"Hunter of Glacial Forest",enhance:15,grade:5,main:{stat:"CRIT DMG",value:64.8000007029628},substats:[{stat:"HP",value:71.9738333},{stat:"DEF",value:21.5921488},{stat:"SPD",value:5},{stat:"Break Effect",value:17.496000000000002}],id:"1717f468-9cb4-495a-b20d-57f69205b5f6",augmentedStats:{mainStat:"CRIT DMG",mainValue:.648000007029628,HP:71.9738333,DEF:21.5921488,SPD:5,"Break Effect":.17496000000000003,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,ATK:0,"CRIT DMG":0,"CRIT Rate":0,"Effect Hit Rate":0,"Effect RES":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},cs:13,ss:13,ds:30.496000000000002,weightScore:36.885994320187535},{part:"Body",set:"Genius of Brilliant Stars",enhance:15,grade:5,main:{stat:"CRIT DMG",value:64.8000007029628},substats:[{stat:"HP",value:110.0776274},{stat:"ATK%",value:8.64},{stat:"CRIT Rate",value:6.156},{stat:"Break Effect",value:5.832}],id:"3e94d21f-f47c-4dba-8470-8eaf4b8624e9",augmentedStats:{mainStat:"CRIT DMG",mainValue:.648000007029628,HP:110.0776274,"ATK%":.0864,"CRIT Rate":.06156,"Break Effect":.05832,"HP%":0,"DEF%":0,"SPD%":0,ATK:0,DEF:0,SPD:0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:25.099999999999998,ss:0,ds:18.792,cs:12.312},{part:"Body",set:"Band of Sizzling Thunder",enhance:15,grade:5,main:{stat:"ATK%",value:43.200000724755604},substats:[{stat:"HP",value:71.9738333},{stat:"DEF%",value:9.180000000000001},{stat:"SPD",value:4},{stat:"Break Effect",value:12.312}],id:"dd7d21eb-5a85-466e-a7a3-98fc6f63e546",augmentedStats:{mainStat:"ATK%",mainValue:.43200000724755605,HP:71.9738333,"DEF%":.09180000000000002,SPD:4,"Break Effect":.12312,"HP%":0,"ATK%":0,"SPD%":0,ATK:0,DEF:0,"CRIT DMG":0,"CRIT Rate":0,"Effect Hit Rate":0,"Effect RES":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:10.4,ss:21.416000000000004,ds:22.712,equippedBy:"1005",cs:10.4},{part:"Body",set:"Messenger Traversing Hackerspace",enhance:15,grade:5,main:{stat:"CRIT DMG",value:64.8000007029628},substats:[{stat:"HP%",value:8.64},{stat:"ATK%",value:7.776},{stat:"DEF%",value:10.26},{stat:"Effect Hit Rate",value:12.528}],id:"29f91de6-5c70-4e10-90e1-cf79888932d6",augmentedStats:{mainStat:"CRIT DMG",mainValue:.648000007029628,"HP%":.0864,"ATK%":.07776,"DEF%":.1026,"Effect Hit Rate":.12528,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"CRIT DMG":0,"CRIT Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:11.55,ss:25.272,ds:30.456000000000003,cs:0},{part:"Body",set:"Eagle of Twilight Line",enhance:15,grade:5,main:{stat:"CRIT DMG",value:64.8000007029628},substats:[{stat:"HP%",value:11.232000000000001},{stat:"SPD",value:2},{stat:"CRIT Rate",value:6.4799999999999995},{stat:"Effect RES",value:7.344}],id:"b41c1519-2f34-4701-9d04-2c54cbfa8a3f",augmentedStats:{mainStat:"CRIT DMG",mainValue:.648000007029628,"HP%":.11232000000000002,SPD:2,"CRIT Rate":.0648,"Effect RES":.07344,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,DEF:0,"CRIT DMG":0,"Effect Hit Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},cs:18.16,ss:33.06400000000001,ds:5.2},{part:"Body",set:"Eagle of Twilight Line",enhance:15,grade:5,main:{stat:"HP%",value:43.200000724755604},substats:[{stat:"HP",value:76.2075882},{stat:"DEF%",value:4.32},{stat:"SPD",value:6},{stat:"CRIT DMG",value:12.312}],id:"834292d9-899b-42a7-84b1-82f663bc007d",augmentedStats:{mainStat:"HP%",mainValue:.43200000724755605,HP:76.2075882,"DEF%":.0432,SPD:6,"CRIT DMG":.12312,"HP%":0,"ATK%":0,"SPD%":0,ATK:0,DEF:0,"CRIT Rate":0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:27.900000000000002,ss:20.784000000000002,ds:15.600000000000001,cs:27.912},{part:"Body",set:"Guard of Wuthering Snow",enhance:15,grade:5,main:{stat:"Outgoing Healing Boost",value:34.5606000395488},substats:[{stat:"HP%",value:7.344},{stat:"DEF%",value:10.26},{stat:"Effect Hit Rate",value:3.456},{stat:"Effect RES",value:12.096}],id:"9a5915a8-e547-47aa-9ff1-fd907341a6c3",augmentedStats:{mainStat:"Outgoing Healing Boost",mainValue:.345606000395488,"HP%":.07344,"DEF%":.1026,"Effect Hit Rate":.03456,"Effect RES":.12096,"ATK%":0,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"CRIT DMG":0,"CRIT Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:0,ss:41.471999999999994,ds:5.184,cs:0},{part:"Body",set:"Hunter of Glacial Forest",enhance:15,grade:5,main:{stat:"CRIT DMG",value:64.8000007029628},substats:[{stat:"HP",value:67.7400784},{stat:"ATK%",value:7.776},{stat:"CRIT Rate",value:5.832},{stat:"Break Effect",value:16.848}],id:"b1006c27-f93f-4965-911b-4a934cd41021",augmentedStats:{mainStat:"CRIT DMG",mainValue:.648000007029628,HP:67.7400784,"ATK%":.07776,"CRIT Rate":.05832,"Break Effect":.16848,"HP%":0,"DEF%":0,"SPD%":0,ATK:0,DEF:0,SPD:0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:23.15,ss:0,ds:28.512,cs:11.664,weightScore:43.71421299035585},{part:"Body",set:"Hunter of Glacial Forest",enhance:15,grade:5,main:{stat:"CRIT DMG",value:64.8000007029628},substats:[{stat:"ATK%",value:7.776,scoreMeta:{multiplier:.75,score:8.748}},{stat:"CRIT Rate",value:6.156,scoreMeta:{multiplier:1,score:12.312}},{stat:"Effect RES",value:7.344,scoreMeta:{multiplier:0,score:0}},{stat:"Break Effect",value:12.312,scoreMeta:{multiplier:0,score:0}}],id:"a8d2e198-7d41-4251-91ef-f7259ff39df4",augmentedStats:{mainStat:"CRIT DMG",mainValue:.648000007029628,"ATK%":.07776,"CRIT Rate":.06156,"Effect RES":.07344,"Break Effect":.12312,"HP%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"CRIT DMG":0,"Effect Hit Rate":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:23.75,ss:11.016,ds:23.976,cs:12.312,weightScore:47.303999999999995},{part:"Body",set:"Hunter of Glacial Forest",enhance:15,grade:5,main:{stat:"CRIT DMG",value:64.8000007029628},substats:[{stat:"ATK",value:19.0518957},{stat:"DEF",value:40.2206687},{stat:"HP%",value:15.984000000000002},{stat:"CRIT Rate",value:2.916}],id:"f3177930-819d-4e84-8818-adc97455f734",augmentedStats:{mainStat:"CRIT DMG",mainValue:.648000007029628,ATK:19.0518957,DEF:40.2206687,"HP%":.15984,"CRIT Rate":.02916,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,SPD:0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:5.8,ss:23.976000000000003,ds:0,cs:5.832,weightScore:36.886700044615246},{part:"Body",set:"Passerby of Wandering Cloud",enhance:15,grade:5,main:{stat:"Outgoing Healing Boost",value:34.5606000395488},substats:[{stat:"HP",value:38.1037941},{stat:"SPD",value:9},{stat:"CRIT DMG",value:12.312},{stat:"Effect RES",value:3.456}],id:"725e6ee5-9465-45a2-8172-ed69241c1e54",augmentedStats:{mainStat:"Outgoing Healing Boost",mainValue:.345606000395488,HP:38.1037941,SPD:9,"CRIT DMG":.12312,"Effect RES":.03456,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,ATK:0,DEF:0,"CRIT Rate":0,"Effect Hit Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:35.7,ss:28.584000000000003,ds:23.400000000000002,equippedBy:"1217",cs:35.712},{part:"Body",set:"Guard of Wuthering Snow",enhance:14,grade:5,main:{stat:"CRIT DMG",value:61.1712006619205},substats:[{stat:"DEF%",value:4.859999999999999},{stat:"SPD",value:4},{stat:"Effect RES",value:11.232000000000001},{stat:"Break Effect",value:5.832}],id:"79f1d0f3-741b-4430-9685-87e29267e01d",augmentedStats:{mainStat:"CRIT DMG",mainValue:.611712006619205,"DEF%":.0486,SPD:4,"Effect RES":.11232000000000002,"Break Effect":.05832,"HP%":0,"ATK%":0,"SPD%":0,HP:0,ATK:0,DEF:0,"CRIT DMG":0,"CRIT Rate":0,"Effect Hit Rate":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},cs:10.4,ss:33.08,ds:16.232},{part:"Body",set:"Musketeer of Wild Wheat",enhance:12,grade:5,main:{stat:"Outgoing Healing Boost",value:28.7544000428167},substats:[{stat:"HP",value:38.1037941},{stat:"ATK",value:35.9869141},{stat:"ATK%",value:8.64},{stat:"SPD",value:4}],id:"0b4bdbc7-dac3-4648-bd6f-631d6750a5b5",augmentedStats:{mainStat:"Outgoing Healing Boost",mainValue:.287544000428167,HP:38.1037941,ATK:35.9869141,"ATK%":.0864,SPD:4,"HP%":0,"DEF%":0,"SPD%":0,DEF:0,"CRIT DMG":0,"CRIT Rate":0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:23.299999999999997,ss:10.4,ds:23.36,cs:10.4},{part:"Body",set:"Messenger Traversing Hackerspace",enhance:12,grade:5,main:{stat:"HP%",value:35.9424005728218},substats:[{stat:"SPD",value:4},{stat:"CRIT Rate",value:5.508},{stat:"CRIT DMG",value:11.664},{stat:"Break Effect",value:6.4799999999999995}],id:"fb53d114-66ea-4014-9ef6-7dc4519cc4e1",augmentedStats:{mainStat:"HP%",mainValue:.35942400572821803,SPD:4,"CRIT Rate":.05508,"CRIT DMG":.11664,"Break Effect":.0648,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,DEF:0,"Effect Hit Rate":0,"Effect RES":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:33,ss:10.4,ds:16.88,cs:33.08},{part:"Body",set:"Messenger Traversing Hackerspace",enhance:12,grade:5,main:{stat:"HP%",value:35.9424005728218},substats:[{stat:"HP",value:105.8438725},{stat:"SPD",value:4},{stat:"CRIT DMG",value:6.4799999999999995},{stat:"Effect Hit Rate",value:4.32}],id:"45ad26f9-f51b-4ca6-960b-b0db7edb5087",augmentedStats:{mainStat:"HP%",mainValue:.35942400572821803,HP:105.8438725,SPD:4,"CRIT DMG":.0648,"Effect Hit Rate":.0432,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,ATK:0,DEF:0,"CRIT Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:16.8,ss:10.4,ds:16.880000000000003,cs:16.88},{part:"Body",set:"Champion of Streetwise Boxing",enhance:12,grade:5,main:{stat:"CRIT DMG",value:53.913600579835894},substats:[{stat:"HP%",value:4.32},{stat:"ATK%",value:8.208},{stat:"CRIT Rate",value:5.508},{stat:"Break Effect",value:10.367999999999999}],id:"3f8b30aa-4c91-4677-af83-8906d7d968d9",augmentedStats:{mainStat:"CRIT DMG",mainValue:.539136005798359,"HP%":.0432,"ATK%":.08208,"CRIT Rate":.05508,"Break Effect":.10367999999999998,"DEF%":0,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:23.299999999999997,ss:6.48,ds:22.68,cs:11.016},{part:"Body",set:"Hunter of Glacial Forest",enhance:12,grade:5,main:{stat:"CRIT DMG",value:53.913600579835894},substats:[{stat:"HP",value:110.0776274},{stat:"DEF",value:38.1037914},{stat:"ATK%",value:3.456},{stat:"CRIT Rate",value:3.2399999999999998}],id:"c23bb26b-ccb0-4318-ae7b-a8aec9ef0db1",augmentedStats:{mainStat:"CRIT DMG",mainValue:.539136005798359,HP:110.0776274,DEF:38.1037914,"ATK%":.03456,"CRIT Rate":.0324,"HP%":0,"DEF%":0,"SPD%":0,ATK:0,SPD:0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:11.5,ss:0,ds:5.184,cs:6.4799999999999995},{part:"Body",set:"Musketeer of Wild Wheat",enhance:12,grade:5,main:{stat:"DEF%",value:44.9280005414036},substats:[{stat:"ATK%",value:3.888},{stat:"SPD",value:6},{stat:"Effect Hit Rate",value:7.344},{stat:"Break Effect",value:12.959999999999999}],id:"3147142d-dd65-4524-85ff-2535a61bd342",augmentedStats:{mainStat:"DEF%",mainValue:.449280005414036,"ATK%":.03888,SPD:6,"Effect Hit Rate":.07344,"Break Effect":.1296,"HP%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,DEF:0,"CRIT DMG":0,"CRIT Rate":0,"Effect RES":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:21.3,ss:15.600000000000001,ds:45.408,cs:15.600000000000001},{part:"Body",set:"Knight of Purity Palace",enhance:12,grade:4,main:{stat:"DEF%",value:35.9424005728218},substats:[{stat:"DEF",value:28.789534},{stat:"ATK%",value:6.5664},{stat:"SPD",value:1},{stat:"Effect Hit Rate",value:6.912}],id:"c85f95b4-28af-4519-8992-bd274ed268f1",augmentedStats:{mainStat:"DEF%",mainValue:.35942400572821803,DEF:28.789534,"ATK%":.065664,SPD:1,"Effect Hit Rate":.06912,"HP%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,"CRIT DMG":0,"CRIT Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:12.35,ss:2.6,ds:22.8176,cs:2.6},{part:"Body",set:"Musketeer of Wild Wheat",enhance:12,grade:4,main:{stat:"HP%",value:28.7544000428167},substats:[{stat:"HP",value:30.4830351},{stat:"DEF%",value:12.096},{stat:"SPD",value:3},{stat:"Break Effect",value:4.1472}],id:"cd8b362d-24e4-4427-b09e-2666c1fb97b4",augmentedStats:{mainStat:"HP%",mainValue:.287544000428167,HP:30.4830351,"DEF%":.12096,SPD:3,"Break Effect":.041471999999999995,"HP%":0,"ATK%":0,"SPD%":0,ATK:0,DEF:0,"CRIT DMG":0,"CRIT Rate":0,"Effect Hit Rate":0,"Effect RES":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:7.800000000000001,ss:22.3152,ds:11.9472,equippedBy:"1202",cs:7.800000000000001},{part:"Body",set:"Passerby of Wandering Cloud",enhance:12,grade:4,main:{stat:"Outgoing Healing Boost",value:23.003300675190395},substats:[{stat:"HP%",value:2.7647999999999997},{stat:"ATK%",value:3.1104},{stat:"SPD",value:3},{stat:"CRIT DMG",value:14.5152}],id:"05045a76-0f4c-4ad8-8997-878b60b2d226",augmentedStats:{mainStat:"Outgoing Healing Boost",mainValue:.23003300675190397,"HP%":.027647999999999995,"ATK%":.031104,SPD:3,"CRIT DMG":.145152,"DEF%":0,"SPD%":0,HP:0,ATK:0,DEF:0,"CRIT Rate":0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:26.95,ss:11.9472,ds:12.4656,cs:22.3152},{part:"Body",set:"Guard of Wuthering Snow",enhance:9,grade:3,main:{stat:"DEF%",value:21.5135999489572},substats:[{stat:"DEF",value:40},{stat:"HP%",value:3.4},{stat:"ATK%",value:4.3},{stat:"CRIT Rate",value:5.8}],id:"6be4a25d-b557-44a5-9176-12499975ba72",augmentedStats:{mainStat:"DEF%",mainValue:.215135999489572,DEF:40,"HP%":.034,"ATK%":.043,"CRIT Rate":.057999999999999996,"DEF%":0,"SPD%":0,HP:0,ATK:0,SPD:0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},cs:11.6,ss:5.1000000000000005,ds:6.449999999999999},{part:"Body",set:"Genius of Brilliant Stars",enhance:9,grade:3,main:{stat:"ATK%",value:17.210700223222197},substats:[{stat:"ATK",value:35},{stat:"HP%",value:7.7},{stat:"SPD",value:2},{stat:"Effect Hit Rate",value:3.4}],id:"c1257f42-d466-4cc6-ac37-a164be4efd1b",augmentedStats:{mainStat:"ATK%",mainValue:.17210700223222197,ATK:35,"HP%":.077,SPD:2,"Effect Hit Rate":.034,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,DEF:0,"CRIT DMG":0,"CRIT Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},cs:5.2,ss:16.75,ds:10.3},{part:"Body",set:"Genius of Brilliant Stars",enhance:9,grade:3,main:{stat:"HP%",value:17.210700223222197},substats:[{stat:"ATK",value:38},{stat:"DEF",value:21.5921488},{stat:"DEF%",value:5.4},{stat:"SPD",value:6}],id:"5629890a-6aec-4990-851c-74532f2f37af",augmentedStats:{mainStat:"HP%",mainValue:.17210700223222197,ATK:38,DEF:21.5921488,"DEF%":.054000000000000006,SPD:6,"HP%":0,"ATK%":0,"SPD%":0,HP:0,"CRIT DMG":0,"CRIT Rate":0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},cs:15.600000000000001,ss:22.080000000000002,ds:15.600000000000001},{part:"Body",set:"Messenger Traversing Hackerspace",enhance:9,grade:3,main:{stat:"CRIT DMG",value:25.8165008621286},substats:[{stat:"HP%",value:3.8},{stat:"DEF%",value:9.1},{stat:"SPD",value:4},{stat:"CRIT Rate",value:2.9}],id:"8b8127ed-1513-4b8e-bfc5-e2f6ae07f501",augmentedStats:{mainStat:"CRIT DMG",mainValue:.258165008621286,"HP%":.038,"DEF%":.091,SPD:4,"CRIT Rate":.028999999999999998,"ATK%":0,"SPD%":0,HP:0,ATK:0,DEF:0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},cs:16.2,ss:27.019999999999996,ds:10.4},{part:"Body",set:"Hunter of Glacial Forest",enhance:9,grade:3,main:{stat:"CRIT Rate",value:12.9078010562808},substats:[{stat:"ATK",value:35},{stat:"DEF",value:42},{stat:"CRIT DMG",value:6.4},{stat:"Break Effect",value:6.4}],id:"ca9148ab-988c-4e5f-b24d-36336521b584",augmentedStats:{mainStat:"CRIT Rate",mainValue:.129078010562808,ATK:35,DEF:42,"CRIT DMG":.064,"Break Effect":.064,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,SPD:0,"CRIT Rate":0,"Effect Hit Rate":0,"Effect RES":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},cs:6.4,ss:0,ds:6.4},{part:"Body",set:"Hunter of Glacial Forest",enhance:9,grade:3,main:{stat:"CRIT DMG",value:25.8165008621286},substats:[{stat:"HP",value:33},{stat:"ATK",value:33},{stat:"ATK%",value:3.4},{stat:"Break Effect",value:12.3}],id:"9bc3914c-ef10-492c-b9dc-20b9bbb53678",augmentedStats:{mainStat:"CRIT DMG",mainValue:.258165008621286,HP:33,ATK:33,"ATK%":.034,"Break Effect":.12300000000000001,"HP%":0,"DEF%":0,"SPD%":0,DEF:0,SPD:0,"CRIT DMG":0,"CRIT Rate":0,"Effect Hit Rate":0,"Effect RES":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},cs:0,ss:0,ds:17.400000000000002},{part:"Feet",set:"Hunter of Glacial Forest",enhance:15,grade:5,main:{stat:"SPD",value:25.03200000547804},substats:[{stat:"ATK",value:21.168773,scoreMeta:{multiplier:.75,score:1.7533107772329706}},{stat:"ATK%",value:11.664,scoreMeta:{multiplier:.75,score:13.121999999999996}},{stat:"DEF%",value:4.859999999999999,scoreMeta:{multiplier:0,score:0}},{stat:"CRIT DMG",value:17.496000000000002,scoreMeta:{multiplier:1,score:17.496000000000002}}],id:"92c53d06-80d0-43a8-b896-2feeda419674",augmentedStats:{mainStat:"SPD",mainValue:25.03200000547804,ATK:21.168773,"ATK%":.11664,"DEF%":.0486,"CRIT DMG":.17496000000000003,"HP%":0,"SPD%":0,HP:0,DEF:0,SPD:0,"CRIT Rate":0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:34.8,ss:5.831999999999999,ds:17.496,equippedBy:"1212",cs:17.496000000000002,weightScore:43.161747702977294},{part:"Feet",set:"Passerby of Wandering Cloud",enhance:15,grade:5,main:{stat:"SPD",value:25.03200000547804},substats:[{stat:"HP",value:148.1814215},{stat:"ATK%",value:6.912},{stat:"Effect Hit Rate",value:3.888},{stat:"Break Effect",value:5.183999999999999}],id:"f8d42acd-c848-484a-9eee-d03a7b88f030",augmentedStats:{mainStat:"SPD",mainValue:25.03200000547804,HP:148.1814215,"ATK%":.06912,"Effect Hit Rate":.03888,"Break Effect":.05183999999999999,"HP%":0,"DEF%":0,"SPD%":0,ATK:0,DEF:0,SPD:0,"CRIT DMG":0,"CRIT Rate":0,"Effect RES":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:10.350000000000001,ss:0,ds:21.384,equippedBy:"1217",cs:0},{part:"Feet",set:"Longevous Disciple",enhance:15,grade:5,main:{stat:"SPD",value:25.03200000547804},substats:[{stat:"ATK",value:38.1037914},{stat:"DEF",value:21.168773},{stat:"HP%",value:16.848},{stat:"CRIT DMG",value:5.183999999999999}],id:"726e7b1f-f630-4182-ac11-1e8523a33fc1",augmentedStats:{mainStat:"SPD",mainValue:25.03200000547804,ATK:38.1037914,DEF:21.168773,"HP%":.16848,"CRIT DMG":.05183999999999999,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,SPD:0,"CRIT Rate":0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:5.1,ss:25.272,ds:0,equippedBy:"1205",cs:5.183999999999999},{part:"Feet",set:"Musketeer of Wild Wheat",enhance:15,grade:5,main:{stat:"SPD",value:25.03200000547804},substats:[{stat:"HP",value:38.1037941},{stat:"HP%",value:8.208},{stat:"ATK%",value:11.664},{stat:"Effect Hit Rate",value:11.232000000000001}],id:"ac206198-c5b1-4be7-8dda-0d7b85e1aabf",augmentedStats:{mainStat:"SPD",mainValue:25.03200000547804,HP:38.1037941,"HP%":.08208,"ATK%":.11664,"Effect Hit Rate":.11232000000000002,"DEF%":0,"SPD%":0,ATK:0,DEF:0,SPD:0,"CRIT DMG":0,"CRIT Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:17.4,ss:12.312000000000001,ds:34.344,equippedBy:"1202",cs:0},{part:"Feet",set:"Musketeer of Wild Wheat",enhance:15,grade:5,main:{stat:"SPD",value:25.03200000547804},substats:[{stat:"HP",value:76.2075882},{stat:"ATK",value:38.1037914},{stat:"Effect RES",value:7.776},{stat:"Break Effect",value:12.312}],id:"ad67f0ac-1c0e-4869-8855-3718b601447b",augmentedStats:{mainStat:"SPD",mainValue:25.03200000547804,HP:76.2075882,ATK:38.1037914,"Effect RES":.07776,"Break Effect":.12312,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,DEF:0,SPD:0,"CRIT DMG":0,"CRIT Rate":0,"Effect Hit Rate":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:0,ss:11.664,ds:12.312,cs:0},{part:"Feet",set:"Genius of Brilliant Stars",enhance:15,grade:5,main:{stat:"ATK%",value:43.200000724755604},substats:[{stat:"DEF",value:38.1037914},{stat:"DEF%",value:4.859999999999999},{stat:"SPD",value:9},{stat:"CRIT DMG",value:11.664}],id:"9d68a932-b623-4ac7-bd0a-7c54779b64fb",augmentedStats:{mainStat:"ATK%",mainValue:.43200000724755605,DEF:38.1037914,"DEF%":.0486,SPD:9,"CRIT DMG":.11664,"HP%":0,"ATK%":0,"SPD%":0,HP:0,ATK:0,"CRIT Rate":0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:35,ss:29.232,ds:23.400000000000002,equippedBy:"1102",cs:35.064},{part:"Feet",set:"Eagle of Twilight Line",enhance:15,grade:5,main:{stat:"SPD",value:25.03200000547804},substats:[{stat:"HP",value:84.675098},{stat:"HP%",value:4.32},{stat:"DEF%",value:5.4},{stat:"Effect RES",value:16.416}],id:"dd1bb72d-80f3-432c-b8d9-0b62c7790b9a",augmentedStats:{mainStat:"SPD",mainValue:25.03200000547804,HP:84.675098,"HP%":.0432,"DEF%":.054000000000000006,"Effect RES":.16416,"ATK%":0,"SPD%":0,ATK:0,DEF:0,SPD:0,"CRIT DMG":0,"CRIT Rate":0,"Effect Hit Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:0,ss:37.584,ds:0,equippedBy:"1101",cs:0},{part:"Feet",set:"Genius of Brilliant Stars",enhance:15,grade:5,main:{stat:"ATK%",value:43.200000724755604},substats:[{stat:"DEF%",value:9.180000000000001},{stat:"SPD",value:2},{stat:"CRIT Rate",value:11.016},{stat:"CRIT DMG",value:12.312}],id:"a615dc2f-c26d-4f13-8c92-0b2c746e0f3f",augmentedStats:{mainStat:"ATK%",mainValue:.43200000724755605,"DEF%":.09180000000000002,SPD:2,"CRIT Rate":.11016,"CRIT DMG":.12312,"HP%":0,"ATK%":0,"SPD%":0,HP:0,ATK:0,DEF:0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:39.5,ss:16.216,ds:5.2,cs:39.544000000000004},{part:"Feet",set:"Band of Sizzling Thunder",enhance:15,grade:5,main:{stat:"SPD",value:25.03200000547804},substats:[{stat:"DEF",value:16.9350184},{stat:"ATK%",value:4.32},{stat:"CRIT Rate",value:2.5919999999999996},{stat:"Effect RES",value:19.872}],id:"53a00fa5-22a9-40bc-948b-8469d6e248ec",augmentedStats:{mainStat:"SPD",mainValue:25.03200000547804,DEF:16.9350184,"ATK%":.0432,"CRIT Rate":.025919999999999995,"Effect RES":.19872,"HP%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,SPD:0,"CRIT DMG":0,"Effect Hit Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:11.45,ss:29.808,ds:6.48,equippedBy:"1005",cs:5.183999999999999},{part:"Feet",set:"Messenger Traversing Hackerspace",enhance:15,grade:5,main:{stat:"SPD",value:25.03200000547804},substats:[{stat:"ATK",value:33.8700368},{stat:"ATK%",value:7.344},{stat:"DEF%",value:19.439999999999998},{stat:"CRIT Rate",value:2.916}],id:"76603793-39c6-477f-9874-194d66f8ae88",augmentedStats:{mainStat:"SPD",mainValue:25.03200000547804,ATK:33.8700368,"ATK%":.07344,"DEF%":.1944,"CRIT Rate":.02916,"HP%":0,"SPD%":0,HP:0,DEF:0,SPD:0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:16.75,ss:23.327999999999996,ds:11.016,cs:5.832},{part:"Feet",set:"Genius of Brilliant Stars",enhance:15,grade:5,main:{stat:"ATK%",value:43.200000724755604},substats:[{stat:"HP",value:156.6489313},{stat:"DEF%",value:5.4},{stat:"SPD",value:7},{stat:"Break Effect",value:5.832}],id:"5ba46dc3-191b-4a37-9781-bcaa1adf7f0d",augmentedStats:{mainStat:"ATK%",mainValue:.43200000724755605,HP:156.6489313,"DEF%":.054000000000000006,SPD:7,"Break Effect":.05832,"HP%":0,"ATK%":0,"SPD%":0,ATK:0,DEF:0,"CRIT DMG":0,"CRIT Rate":0,"Effect Hit Rate":0,"Effect RES":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:18.2,ss:24.68,ds:24.032,cs:18.2},{part:"Feet",set:"Hunter of Glacial Forest",enhance:15,grade:5,main:{stat:"ATK%",value:43.200000724755604},substats:[{stat:"ATK",value:16.9350184},{stat:"DEF",value:19.0518957},{stat:"SPD",value:4},{stat:"CRIT DMG",value:22.68}],id:"af5b9fae-fdcc-4b11-bf4a-0ce3bd832648",augmentedStats:{mainStat:"ATK%",mainValue:.43200000724755605,ATK:16.9350184,DEF:19.0518957,SPD:4,"CRIT DMG":.2268,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,"CRIT Rate":0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:33,ss:10.4,ds:10.4,cs:33.08},{part:"Feet",set:"Hunter of Glacial Forest",enhance:15,grade:5,main:{stat:"SPD",value:25.03200000547804},substats:[{stat:"ATK",value:40.2206687},{stat:"ATK%",value:3.888},{stat:"CRIT Rate",value:8.424},{stat:"Break Effect",value:11.016}],id:"01eca278-3dec-4b6a-bb39-e199603423f3",augmentedStats:{mainStat:"SPD",mainValue:25.03200000547804,ATK:40.2206687,"ATK%":.03888,"CRIT Rate":.08424,"Break Effect":.11016,"HP%":0,"DEF%":0,"SPD%":0,HP:0,DEF:0,SPD:0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:22.5,ss:0,ds:16.848,cs:16.848,weightScore:38.137720635656855},{part:"Feet",set:"Genius of Brilliant Stars",enhance:12,grade:5,main:{stat:"SPD",value:20.832000004360452},substats:[{stat:"ATK%",value:3.456},{stat:"DEF%",value:10.8},{stat:"Effect Hit Rate",value:7.776},{stat:"Break Effect",value:11.664}],id:"d348e2e3-87f5-4782-81db-1478c1ab2901",augmentedStats:{mainStat:"SPD",mainValue:20.832000004360452,"ATK%":.03456,"DEF%":.10800000000000001,"Effect Hit Rate":.07776,"Break Effect":.11664,"HP%":0,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"CRIT DMG":0,"CRIT Rate":0,"Effect RES":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:5.1000000000000005,ss:12.96,ds:28.512,cs:0},{part:"Feet",set:"Guard of Wuthering Snow",enhance:12,grade:4,main:{stat:"SPD",value:16.42560000135563},substats:[{stat:"ATK",value:28.789534},{stat:"DEF%",value:7.344},{stat:"Effect Hit Rate",value:3.456},{stat:"Effect RES",value:2.7647999999999997}],id:"4fa7cb12-80ac-43af-ae67-cec01b31208d",augmentedStats:{mainStat:"SPD",mainValue:16.42560000135563,ATK:28.789534,"DEF%":.07344,"Effect Hit Rate":.03456,"Effect RES":.027647999999999995,"HP%":0,"ATK%":0,"SPD%":0,HP:0,DEF:0,SPD:0,"CRIT DMG":0,"CRIT Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:0,ss:12.959999999999999,ds:5.184,cs:0},{part:"Feet",set:"Passerby of Wandering Cloud",enhance:12,grade:4,main:{stat:"SPD",value:16.42560000135563},substats:[{stat:"ATK%",value:9.6768},{stat:"Effect Hit Rate",value:2.7647999999999997},{stat:"Effect RES",value:3.456},{stat:"Break Effect",value:5.183999999999999}],id:"120c957e-4880-4fd7-a1a9-33fd9e5b5b74",augmentedStats:{mainStat:"SPD",mainValue:16.42560000135563,"ATK%":.096768,"Effect Hit Rate":.027647999999999995,"Effect RES":.03456,"Break Effect":.05183999999999999,"HP%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"CRIT DMG":0,"CRIT Rate":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:14.399999999999999,ss:5.184,ds:23.846399999999996,cs:0},{part:"Feet",set:"Guard of Wuthering Snow",enhance:9,grade:3,main:{stat:"DEF%",value:21.5135999489572},substats:[{stat:"HP",value:38},{stat:"DEF",value:57},{stat:"HP%",value:4.3},{stat:"CRIT Rate",value:3.2}],id:"685b8eec-9f29-4213-b26e-7fc46ce17f43",augmentedStats:{mainStat:"DEF%",mainValue:.215135999489572,HP:38,DEF:57,"HP%":.043,"CRIT Rate":.032,"ATK%":0,"DEF%":0,"SPD%":0,ATK:0,SPD:0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},cs:6.4,ss:6.449999999999999,ds:0},{part:"Feet",set:"Hunter of Glacial Forest",enhance:9,grade:3,main:{stat:"SPD",value:11.419199999887496},substats:[{stat:"HP%",value:8.6},{stat:"ATK%",value:3.4},{stat:"CRIT Rate",value:6.1},{stat:"Effect Hit Rate",value:7.7}],id:"a616f8ad-8b70-43f9-a877-ec33ba60d6e8",augmentedStats:{mainStat:"SPD",mainValue:11.419199999887496,"HP%":.086,"ATK%":.034,"CRIT Rate":.061,"Effect Hit Rate":.077,"DEF%":0,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"CRIT DMG":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},cs:12.2,ss:12.899999999999999,ds:16.650000000000002},{part:"Feet",set:"Hunter of Glacial Forest",enhance:9,grade:3,main:{stat:"ATK%",value:17.210700223222197},substats:[{stat:"DEF%",value:4.8},{stat:"CRIT Rate",value:5.5},{stat:"Effect Hit Rate",value:3.4},{stat:"Effect RES",value:7.3}],id:"578c0fdb-8976-4408-9271-fe43ce0afc5d",augmentedStats:{mainStat:"ATK%",mainValue:.17210700223222197,"DEF%":.048,"CRIT Rate":.055,"Effect Hit Rate":.034,"Effect RES":.073,"HP%":0,"ATK%":0,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"CRIT DMG":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},cs:11,ss:16.71,ds:5.1000000000000005},{part:"Feet",set:"Hunter of Glacial Forest",enhance:9,grade:3,main:{stat:"SPD",value:11.419199999887496},substats:[{stat:"HP",value:33},{stat:"ATK",value:21.5921488},{stat:"CRIT Rate",value:6.1},{stat:"Effect RES",value:8.2}],id:"620a1f8e-ba95-47d9-99c1-8fd7713c7b10",augmentedStats:{mainStat:"SPD",mainValue:11.419199999887496,HP:33,ATK:21.5921488,"CRIT Rate":.061,"Effect RES":.08199999999999999,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,DEF:0,SPD:0,"CRIT DMG":0,"Effect Hit Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},cs:12.2,ss:12.299999999999999,ds:0},{part:"Feet",set:"Hunter of Glacial Forest",enhance:9,grade:3,main:{stat:"ATK%",value:17.210700223222197},substats:[{stat:"HP",value:38},{stat:"HP%",value:12.5},{stat:"SPD",value:5},{stat:"CRIT Rate",value:3.2}],id:"fe8aca62-7935-4897-ad02-fae126b720b1",augmentedStats:{mainStat:"ATK%",mainValue:.17210700223222197,HP:38,"HP%":.125,SPD:5,"CRIT Rate":.032,"ATK%":0,"DEF%":0,"SPD%":0,ATK:0,DEF:0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},cs:19.4,ss:31.75,ds:13},{part:"PlanarSphere",set:"Rutilant Arena",enhance:15,grade:5,main:{stat:"Ice DMG Boost",value:38.8803014298894},substats:[{stat:"DEF",value:74.0907055,scoreMeta:{multiplier:0,score:0}},{stat:"CRIT Rate",value:5.508,scoreMeta:{multiplier:1,score:11.016}},{stat:"CRIT DMG",value:12.312,scoreMeta:{multiplier:1,score:12.312}},{stat:"Effect Hit Rate",value:4.32,scoreMeta:{multiplier:0,score:0}}],id:"80abbd56-b1a0-4587-a349-754c33627217",augmentedStats:{mainStat:"Ice DMG Boost",mainValue:.388803014298894,DEF:74.0907055,"CRIT Rate":.05508,"CRIT DMG":.12312,"Effect Hit Rate":.0432,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,SPD:0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:23.3,ss:0,ds:6.48,equippedBy:"1212",cs:23.328,weightScore:38.97197099567099},{part:"PlanarSphere",set:"Fleet of the Ageless",enhance:15,grade:5,main:{stat:"HP%",value:43.200000724755604},substats:[{stat:"ATK%",value:12.096},{stat:"DEF%",value:4.32},{stat:"Effect Hit Rate",value:4.32},{stat:"Break Effect",value:17.496000000000002}],id:"f89266f4-241e-43bc-b04a-a864eea60e49",augmentedStats:{mainStat:"HP%",mainValue:.43200000724755605,"ATK%":.12096,"DEF%":.0432,"Effect Hit Rate":.0432,"Break Effect":.17496000000000003,"HP%":0,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"CRIT DMG":0,"CRIT Rate":0,"Effect RES":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:18,ss:5.184,ds:42.120000000000005,equippedBy:"1217",cs:0},{part:"PlanarSphere",set:"Broken Keel",enhance:15,grade:5,main:{stat:"DEF%",value:54.0000006789338},substats:[{stat:"HP%",value:8.208},{stat:"ATK%",value:3.888},{stat:"SPD",value:4},{stat:"Effect RES",value:11.664}],id:"16f7f4d9-5734-401f-b14f-2a74eaec9dcc",augmentedStats:{mainStat:"DEF%",mainValue:.540000006789338,"HP%":.08208,"ATK%":.03888,SPD:4,"Effect RES":.11664,"DEF%":0,"SPD%":0,HP:0,ATK:0,DEF:0,"CRIT DMG":0,"CRIT Rate":0,"Effect Hit Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:16.1,ss:40.208,ds:16.232,cs:10.4},{part:"PlanarSphere",set:"Inert Salsotto",enhance:15,grade:5,main:{stat:"HP%",value:43.200000724755604},substats:[{stat:"ATK",value:19.0518957},{stat:"CRIT Rate",value:6.4799999999999995},{stat:"CRIT DMG",value:17.496000000000002},{stat:"Effect RES",value:7.776}],id:"9714ef68-45e7-4f62-81f2-b437649d3a49",augmentedStats:{mainStat:"HP%",mainValue:.43200000724755605,ATK:19.0518957,"CRIT Rate":.0648,"CRIT DMG":.17496000000000003,"Effect RES":.07776,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,DEF:0,SPD:0,"Effect Hit Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:30.2,ss:11.664,ds:0,equippedBy:"1205",cs:30.456000000000003},{part:"PlanarSphere",set:"Space Sealing Station",enhance:15,grade:5,main:{stat:"Physical DMG Boost",value:38.8803014298894},substats:[{stat:"SPD",value:2},{stat:"CRIT Rate",value:2.5919999999999996},{stat:"CRIT DMG",value:23.328},{stat:"Effect RES",value:7.776}],id:"2340f351-b46e-4e11-87a2-732c5c887941",augmentedStats:{mainStat:"Physical DMG Boost",mainValue:.388803014298894,SPD:2,"CRIT Rate":.025919999999999995,"CRIT DMG":.23328,"Effect RES":.07776,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,DEF:0,"Effect Hit Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:33.5,ss:16.864,ds:5.2,cs:33.712},{part:"PlanarSphere",set:"Rutilant Arena",enhance:15,grade:5,main:{stat:"Quantum DMG Boost",value:38.8803014298894},substats:[{stat:"ATK%",value:7.776},{stat:"DEF%",value:4.859999999999999},{stat:"SPD",value:4},{stat:"CRIT DMG",value:18.144}],id:"4806d951-5a01-48bb-876f-5368059a674d",augmentedStats:{mainStat:"Quantum DMG Boost",mainValue:.388803014298894,"ATK%":.07776,"DEF%":.0486,SPD:4,"CRIT DMG":.18144,"HP%":0,"SPD%":0,HP:0,ATK:0,DEF:0,"CRIT Rate":0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:40.050000000000004,ss:16.232,ds:22.064,equippedBy:"1102",cs:28.543999999999997},{part:"PlanarSphere",set:"Broken Keel",enhance:15,grade:5,main:{stat:"HP%",value:43.200000724755604},substats:[{stat:"DEF",value:59.2725644},{stat:"DEF%",value:5.4},{stat:"CRIT DMG",value:5.183999999999999},{stat:"Effect Hit Rate",value:11.232000000000001}],id:"1735bd09-55f7-4023-866f-509dc716badf",augmentedStats:{mainStat:"HP%",mainValue:.43200000724755605,DEF:59.2725644,"DEF%":.054000000000000006,"CRIT DMG":.05183999999999999,"Effect Hit Rate":.11232000000000002,"HP%":0,"ATK%":0,"SPD%":0,HP:0,ATK:0,SPD:0,"CRIT Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},cs:5.183999999999999,ss:6.48,ds:16.848000000000003},{part:"PlanarSphere",set:"Space Sealing Station",enhance:15,grade:5,main:{stat:"Lightning DMG Boost",value:38.8803014298894},substats:[{stat:"ATK",value:59.2725644},{stat:"ATK%",value:8.208},{stat:"DEF%",value:5.4},{stat:"Effect Hit Rate",value:6.912}],id:"15d53aff-64cc-421f-837f-5ccfd55240b6",augmentedStats:{mainStat:"Lightning DMG Boost",mainValue:.388803014298894,ATK:59.2725644,"ATK%":.08208,"DEF%":.054000000000000006,"Effect Hit Rate":.06912,"HP%":0,"SPD%":0,HP:0,DEF:0,SPD:0,"CRIT DMG":0,"CRIT Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:12.299999999999999,ss:6.48,ds:22.68,equippedBy:"1005",cs:0},{part:"PlanarSphere",set:"Broken Keel",enhance:15,grade:5,main:{stat:"HP%",value:43.200000724755604},substats:[{stat:"HP",value:67.7400784},{stat:"ATK",value:38.1037914},{stat:"DEF%",value:9.719999999999999},{stat:"Effect Hit Rate",value:6.912}],id:"86816eed-af3c-441e-9379-22aca07bc15f",augmentedStats:{mainStat:"HP%",mainValue:.43200000724755605,HP:67.7400784,ATK:38.1037914,"DEF%":.0972,"Effect Hit Rate":.06912,"HP%":0,"ATK%":0,"SPD%":0,DEF:0,SPD:0,"CRIT DMG":0,"CRIT Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:0,ss:11.663999999999998,ds:10.368,equippedBy:"1101",cs:0},{part:"PlanarSphere",set:"Rutilant Arena",enhance:15,grade:5,main:{stat:"Ice DMG Boost",value:38.8803014298894},substats:[{stat:"DEF",value:40.2206687},{stat:"SPD",value:9},{stat:"CRIT Rate",value:2.5919999999999996},{stat:"Effect Hit Rate",value:3.456}],id:"1e00ea87-98be-4601-a1b6-90eed8929758",augmentedStats:{mainStat:"Ice DMG Boost",mainValue:.388803014298894,DEF:40.2206687,SPD:9,"CRIT Rate":.025919999999999995,"Effect Hit Rate":.03456,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,"CRIT DMG":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:28.400000000000002,ss:23.400000000000002,ds:28.584000000000003,cs:28.584000000000003,weightScore:38.670727111935676},{part:"PlanarSphere",set:"Space Sealing Station",enhance:15,grade:5,main:{stat:"Quantum DMG Boost",value:38.8803014298894},substats:[{stat:"HP%",value:7.344},{stat:"ATK%",value:6.912},{stat:"CRIT Rate",value:9.072},{stat:"CRIT DMG",value:5.832}],id:"030acc28-213c-4913-b527-fd5e4242ade5",augmentedStats:{mainStat:"Quantum DMG Boost",mainValue:.388803014298894,"HP%":.07344,"ATK%":.06912,"CRIT Rate":.09072,"CRIT DMG":.05832,"DEF%":0,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:34.150000000000006,ss:11.016,ds:10.368,cs:23.976},{part:"PlanarSphere",set:"Fleet of the Ageless",enhance:12,grade:5,main:{stat:"DEF%",value:44.9280005414036},substats:[{stat:"DEF",value:61.3894417},{stat:"HP%",value:3.888},{stat:"ATK%",value:8.64},{stat:"SPD",value:2}],id:"687f3295-1bfa-4349-b529-68145a681f3d",augmentedStats:{mainStat:"DEF%",mainValue:.449280005414036,DEF:61.3894417,"HP%":.03888,"ATK%":.0864,SPD:2,"DEF%":0,"SPD%":0,HP:0,ATK:0,"CRIT DMG":0,"CRIT Rate":0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:18.099999999999998,ss:11.032,ds:18.16,cs:5.2},{part:"PlanarSphere",set:"Fleet of the Ageless",enhance:12,grade:5,main:{stat:"ATK%",value:35.9424005728218},substats:[{stat:"HP",value:33.8700392},{stat:"HP%",value:7.344},{stat:"Effect Hit Rate",value:8.208},{stat:"Break Effect",value:12.959999999999999}],id:"f838c821-addf-477a-97e7-605a00417a80",augmentedStats:{mainStat:"ATK%",mainValue:.35942400572821803,HP:33.8700392,"HP%":.07344,"Effect Hit Rate":.08208,"Break Effect":.1296,"ATK%":0,"DEF%":0,"SPD%":0,ATK:0,DEF:0,SPD:0,"CRIT DMG":0,"CRIT Rate":0,"Effect RES":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:0,ss:11.016,ds:25.272,cs:0},{part:"PlanarSphere",set:"Fleet of the Ageless",enhance:12,grade:5,main:{stat:"ATK%",value:35.9424005728218},substats:[{stat:"HP",value:122.7788921},{stat:"ATK",value:38.1037914},{stat:"HP%",value:4.32},{stat:"CRIT DMG",value:6.4799999999999995}],id:"2576e256-b473-481b-9e69-5e5ce2641f1a",augmentedStats:{mainStat:"ATK%",mainValue:.35942400572821803,HP:122.7788921,ATK:38.1037914,"HP%":.0432,"CRIT DMG":.0648,"ATK%":0,"DEF%":0,"SPD%":0,DEF:0,SPD:0,"CRIT Rate":0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:6.4,ss:6.48,ds:0,equippedBy:"1202",cs:6.4799999999999995},{part:"PlanarSphere",set:"Sprightly Vonwacq",enhance:12,grade:5,main:{stat:"HP%",value:35.9424005728218},substats:[{stat:"DEF",value:21.168773},{stat:"ATK%",value:8.64},{stat:"CRIT Rate",value:5.832},{stat:"Effect RES",value:8.208}],id:"29ec4a4e-a2d1-470b-8898-4271e5d58801",augmentedStats:{mainStat:"HP%",mainValue:.35942400572821803,DEF:21.168773,"ATK%":.0864,"CRIT Rate":.05832,"Effect RES":.08208,"HP%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,SPD:0,"CRIT DMG":0,"Effect Hit Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:24.5,ss:12.312000000000001,ds:12.96,cs:11.664},{part:"PlanarSphere",set:"Rutilant Arena",enhance:12,grade:5,main:{stat:"Ice DMG Boost",value:32.348401146008996},substats:[{stat:"ATK",value:38.1037914},{stat:"DEF%",value:9.180000000000001},{stat:"CRIT Rate",value:6.156},{stat:"Break Effect",value:5.832}],id:"6ea90a16-c508-400a-84e5-956be061dd81",augmentedStats:{mainStat:"Ice DMG Boost",mainValue:.32348401146009,ATK:38.1037914,"DEF%":.09180000000000002,"CRIT Rate":.06156,"Break Effect":.05832,"HP%":0,"ATK%":0,"SPD%":0,HP:0,DEF:0,SPD:0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:12.2,ss:11.016000000000002,ds:5.832,cs:12.312},{part:"PlanarSphere",set:"Rutilant Arena",enhance:12,grade:5,main:{stat:"Quantum DMG Boost",value:32.348401146008996},substats:[{stat:"ATK",value:21.168773},{stat:"ATK%",value:7.344},{stat:"DEF%",value:10.26},{stat:"CRIT Rate",value:6.156}],id:"f6f59c42-c75d-4b13-8630-cf4030317fb6",augmentedStats:{mainStat:"Quantum DMG Boost",mainValue:.32348401146009,ATK:21.168773,"ATK%":.07344,"DEF%":.1026,"CRIT Rate":.06156,"HP%":0,"SPD%":0,HP:0,DEF:0,SPD:0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:23.15,ss:12.312,ds:11.016,cs:12.312},{part:"PlanarSphere",set:"Fleet of the Ageless",enhance:9,grade:3,main:{stat:"HP%",value:17.210700223222197},substats:[{stat:"HP",value:42},{stat:"ATK%",value:11.2},{stat:"DEF%",value:5.4},{stat:"Effect Hit Rate",value:3.4}],id:"bc8d6ec2-f7ce-46b5-99bd-f9abcb5cd7d3",augmentedStats:{mainStat:"HP%",mainValue:.17210700223222197,HP:42,"ATK%":.11199999999999999,"DEF%":.054000000000000006,"Effect Hit Rate":.034,"HP%":0,"SPD%":0,ATK:0,DEF:0,SPD:0,"CRIT DMG":0,"CRIT Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},cs:0,ss:6.48,ds:21.9},{part:"PlanarSphere",set:"Belobog of the Architects",enhance:9,grade:3,main:{stat:"DEF%",value:21.5135999489572},substats:[{stat:"DEF",value:52},{stat:"HP%",value:7.7},{stat:"Effect RES",value:3.4},{stat:"Break Effect",value:6.4}],id:"1d4bfa56-f16b-4380-8124-481ef3c284f2",augmentedStats:{mainStat:"DEF%",mainValue:.215135999489572,DEF:52,"HP%":.077,"Effect RES":.034,"Break Effect":.064,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,SPD:0,"CRIT DMG":0,"CRIT Rate":0,"Effect Hit Rate":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},cs:0,ss:16.650000000000002,ds:6.4},{part:"PlanarSphere",set:"Broken Keel",enhance:9,grade:3,main:{stat:"HP%",value:17.210700223222197},substats:[{stat:"HP",value:33},{stat:"ATK",value:19},{stat:"Effect Hit Rate",value:7.3},{stat:"Effect RES",value:6.9}],id:"5968a21b-6035-45f7-8347-3445cb23dd48",augmentedStats:{mainStat:"HP%",mainValue:.17210700223222197,HP:33,ATK:19,"Effect Hit Rate":.073,"Effect RES":.069,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,DEF:0,SPD:0,"CRIT DMG":0,"CRIT Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},cs:0,ss:10.350000000000001,ds:10.95},{part:"LinkRope",set:"Rutilant Arena",enhance:15,grade:5,main:{stat:"ATK%",value:43.200000724755604},substats:[{stat:"HP",value:80.4413431,scoreMeta:{multiplier:0,score:0}},{stat:"CRIT Rate",value:8.424,scoreMeta:{multiplier:1,score:16.8}},{stat:"CRIT DMG",value:10.367999999999999,scoreMeta:{multiplier:1,score:10.3}},{stat:"Break Effect",value:5.832,scoreMeta:{multiplier:0,score:0}}],id:"c521dc03-6c6e-45ef-9933-811367312441",augmentedStats:{mainStat:"ATK%",mainValue:.43200000724755605,HP:80.4413431,"CRIT Rate":.08424,"CRIT DMG":.10367999999999998,"Break Effect":.05832,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,ATK:0,DEF:0,SPD:0,"Effect Hit Rate":0,"Effect RES":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:27.1,ss:0,ds:5.832,equippedBy:"1212",cs:27.215999999999998,weightScore:37.249627926047566},{part:"LinkRope",set:"Fleet of the Ageless",enhance:15,grade:5,main:{stat:"Energy Regeneration Rate",value:19.4394017569722},substats:[{stat:"ATK",value:38.1037914},{stat:"DEF",value:21.168773},{stat:"DEF%",value:15.659999999999998},{stat:"Break Effect",value:12.312}],id:"e1650ead-9ec8-4e2a-9ab9-c4199e1b609c",augmentedStats:{mainStat:"Energy Regeneration Rate",mainValue:.194394017569722,ATK:38.1037914,DEF:21.168773,"DEF%":.1566,"Break Effect":.12312,"HP%":0,"ATK%":0,"SPD%":0,HP:0,SPD:0,"CRIT DMG":0,"CRIT Rate":0,"Effect Hit Rate":0,"Effect RES":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:0,ss:18.791999999999998,ds:12.312,equippedBy:"1217",cs:0},{part:"LinkRope",set:"Inert Salsotto",enhance:15,grade:5,main:{stat:"HP%",value:43.200000724755604},substats:[{stat:"CRIT Rate",value:6.156},{stat:"Effect Hit Rate",value:7.344},{stat:"Effect RES",value:8.208},{stat:"Break Effect",value:12.312}],id:"426a1d2d-c361-42d0-a7d6-5001755c220d",augmentedStats:{mainStat:"HP%",mainValue:.43200000724755605,"CRIT Rate":.06156,"Effect Hit Rate":.07344,"Effect RES":.08208,"Break Effect":.12312,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"CRIT DMG":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:12.2,ss:12.312000000000001,ds:23.328,equippedBy:"1205",cs:12.312},{part:"LinkRope",set:"Fleet of the Ageless",enhance:15,grade:5,main:{stat:"Energy Regeneration Rate",value:19.4394017569722},substats:[{stat:"DEF",value:35.9869141},{stat:"ATK%",value:7.776},{stat:"DEF%",value:14.04},{stat:"SPD",value:2}],id:"9c66993a-07b4-4994-8bb5-86507e6ba49b",augmentedStats:{mainStat:"Energy Regeneration Rate",mainValue:.194394017569722,DEF:35.9869141,"ATK%":.07776,"DEF%":.1404,SPD:2,"HP%":0,"SPD%":0,HP:0,ATK:0,"CRIT DMG":0,"CRIT Rate":0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:16.75,ss:22.048,ds:16.864,equippedBy:"1202",cs:5.2},{part:"LinkRope",set:"Belobog of the Architects",enhance:15,grade:5,main:{stat:"Energy Regeneration Rate",value:19.4394017569722},substats:[{stat:"ATK%",value:14.688},{stat:"DEF%",value:5.4},{stat:"Effect Hit Rate",value:7.776},{stat:"Break Effect",value:5.183999999999999}],id:"f751b41e-8099-4b80-94c1-a86d264ca8bd",augmentedStats:{mainStat:"Energy Regeneration Rate",mainValue:.194394017569722,"ATK%":.14688,"DEF%":.054000000000000006,"Effect Hit Rate":.07776,"Break Effect":.05183999999999999,"HP%":0,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"CRIT DMG":0,"CRIT Rate":0,"Effect RES":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:21.9,ss:6.48,ds:38.879999999999995,cs:0},{part:"LinkRope",set:"Rutilant Arena",enhance:15,grade:5,main:{stat:"ATK%",value:43.200000724755604},substats:[{stat:"SPD",value:2},{stat:"CRIT DMG",value:18.144},{stat:"Effect Hit Rate",value:7.344},{stat:"Effect RES",value:7.776}],id:"c32194b9-dddc-47de-853e-17ac8b8f61a4",augmentedStats:{mainStat:"ATK%",mainValue:.43200000724755605,SPD:2,"CRIT DMG":.18144,"Effect Hit Rate":.07344,"Effect RES":.07776,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,DEF:0,"CRIT Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:23.3,ss:16.864,ds:16.216,equippedBy:"1102",cs:23.343999999999998,weightScore:46.007999999999996},{part:"LinkRope",set:"Broken Keel",enhance:15,grade:5,main:{stat:"Energy Regeneration Rate",value:19.4394017569722},substats:[{stat:"HP%",value:15.984000000000002},{stat:"ATK%",value:3.888},{stat:"CRIT Rate",value:3.2399999999999998},{stat:"CRIT DMG",value:17.496000000000002}],id:"5788b45d-6d75-4189-9689-872fd84280f7",augmentedStats:{mainStat:"Energy Regeneration Rate",mainValue:.194394017569722,"HP%":.15984,"ATK%":.03888,"CRIT Rate":.0324,"CRIT DMG":.17496000000000003,"DEF%":0,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:29.5,ss:23.976000000000003,ds:5.832,equippedBy:"1101",cs:23.976000000000003},{part:"LinkRope",set:"Space Sealing Station",enhance:15,grade:5,main:{stat:"ATK%",value:43.200000724755604},substats:[{stat:"HP",value:38.1037941},{stat:"ATK",value:63.506319},{stat:"SPD",value:5},{stat:"Effect Hit Rate",value:8.208}],id:"c46c97d3-0cc6-4ac9-8b0d-2d5ad0f0a0e7",augmentedStats:{mainStat:"ATK%",mainValue:.43200000724755605,HP:38.1037941,ATK:63.506319,SPD:5,"Effect Hit Rate":.08208,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,DEF:0,"CRIT DMG":0,"CRIT Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:13,ss:13,ds:25.312,equippedBy:"1005",cs:13},{part:"LinkRope",set:"Rutilant Arena",enhance:15,grade:5,main:{stat:"ATK%",value:43.200000724755604},substats:[{stat:"DEF%",value:10.8},{stat:"CRIT Rate",value:9.072},{stat:"Effect Hit Rate",value:6.912},{stat:"Break Effect",value:6.4799999999999995}],id:"9dc0a37b-9c62-4c1a-80f9-3edd769b0e68",augmentedStats:{mainStat:"ATK%",mainValue:.43200000724755605,"DEF%":.10800000000000001,"CRIT Rate":.09072,"Effect Hit Rate":.06912,"Break Effect":.0648,"HP%":0,"ATK%":0,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"CRIT DMG":0,"Effect RES":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:18,ss:12.96,ds:16.848,cs:18.144,weightScore:47.95199999999999},{part:"LinkRope",set:"Rutilant Arena",enhance:15,grade:5,main:{stat:"ATK%",value:43.200000724755604},substats:[{stat:"HP",value:38.1037941},{stat:"DEF%",value:10.8},{stat:"CRIT DMG",value:18.792},{stat:"Effect RES",value:7.776}],id:"b63d8cc1-3b84-476f-b8f7-ea31e0a83dbc",augmentedStats:{mainStat:"ATK%",mainValue:.43200000724755605,HP:38.1037941,"DEF%":.10800000000000001,"CRIT DMG":.18792,"Effect RES":.07776,"HP%":0,"ATK%":0,"SPD%":0,ATK:0,DEF:0,SPD:0,"CRIT Rate":0,"Effect Hit Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:18.7,ss:24.624000000000002,ds:0,cs:18.792,weightScore:45.40624480707517},{part:"LinkRope",set:"Rutilant Arena",enhance:15,grade:5,main:{stat:"ATK%",value:43.200000724755604},substats:[{stat:"ATK",value:35.9869141,scoreMeta:{multiplier:.75,score:2.9806283212960496}},{stat:"HP%",value:3.456,scoreMeta:{multiplier:0,score:0}},{stat:"CRIT DMG",value:5.183999999999999,scoreMeta:{multiplier:1,score:5.183999999999999}},{stat:"Effect RES",value:15.984000000000002,scoreMeta:{multiplier:0,score:0}}],id:"7d1bb971-e351-47ee-9ab9-3c605386b6f8",augmentedStats:{mainStat:"ATK%",mainValue:.43200000724755605,ATK:35.9869141,"HP%":.03456,"CRIT DMG":.05183999999999999,"Effect RES":.15984,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,DEF:0,SPD:0,"CRIT Rate":0,"Effect Hit Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:5.1,ss:29.160000000000004,ds:0,cs:5.183999999999999,weightScore:38.318171095061395},{part:"LinkRope",set:"Rutilant Arena",enhance:15,grade:5,main:{stat:"Energy Regeneration Rate",value:19.4394017569722},substats:[{stat:"HP",value:38.1037941},{stat:"ATK",value:78.3244601},{stat:"ATK%",value:7.776},{stat:"CRIT DMG",value:11.664}],id:"fce0a251-7922-469e-a3e6-b63783177cbf",augmentedStats:{mainStat:"Energy Regeneration Rate",mainValue:.194394017569722,HP:38.1037941,ATK:78.3244601,"ATK%":.07776,"CRIT DMG":.11664,"HP%":0,"DEF%":0,"SPD%":0,DEF:0,SPD:0,"CRIT Rate":0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:23.15,ss:0,ds:11.664,cs:11.664},{part:"LinkRope",set:"Fleet of the Ageless",enhance:15,grade:5,main:{stat:"Energy Regeneration Rate",value:19.4394017569722},substats:[{stat:"HP",value:33.8700392},{stat:"ATK",value:57.1556871},{stat:"DEF%",value:5.4},{stat:"CRIT DMG",value:17.496000000000002}],id:"4de09d13-9ab5-48c0-8552-c99e0961c6d7",augmentedStats:{mainStat:"Energy Regeneration Rate",mainValue:.194394017569722,HP:33.8700392,ATK:57.1556871,"DEF%":.054000000000000006,"CRIT DMG":.17496000000000003,"HP%":0,"ATK%":0,"SPD%":0,DEF:0,SPD:0,"CRIT Rate":0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:17.4,ss:6.48,ds:0,cs:17.496000000000002},{part:"LinkRope",set:"Space Sealing Station",enhance:15,grade:5,main:{stat:"ATK%",value:43.200000724755604},substats:[{stat:"SPD",value:4},{stat:"CRIT DMG",value:6.4799999999999995},{stat:"Effect RES",value:7.344},{stat:"Break Effect",value:18.144}],id:"5336ce8e-c6be-426f-9e6b-cbdf058d7eb8",augmentedStats:{mainStat:"ATK%",mainValue:.43200000724755605,SPD:4,"CRIT DMG":.0648,"Effect RES":.07344,"Break Effect":.18144,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,DEF:0,"CRIT Rate":0,"Effect Hit Rate":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:16.8,ss:21.416,ds:28.543999999999997,cs:16.88},{part:"LinkRope",set:"Space Sealing Station",enhance:15,grade:5,main:{stat:"ATK%",value:43.200000724755604},substats:[{stat:"DEF",value:38.1037914},{stat:"DEF%",value:17.82},{stat:"CRIT Rate",value:2.5919999999999996},{stat:"Effect RES",value:3.456}],id:"507b39d1-d464-4b88-a968-074059a16326",augmentedStats:{mainStat:"ATK%",mainValue:.43200000724755605,DEF:38.1037914,"DEF%":.1782,"CRIT Rate":.025919999999999995,"Effect RES":.03456,"HP%":0,"ATK%":0,"SPD%":0,HP:0,ATK:0,SPD:0,"CRIT DMG":0,"Effect Hit Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:5,ss:26.568,ds:0,cs:5.183999999999999},{part:"LinkRope",set:"Fleet of the Ageless",enhance:12,grade:5,main:{stat:"DEF%",value:44.9280005414036},substats:[{stat:"DEF",value:38.1037914},{stat:"HP%",value:4.32},{stat:"ATK%",value:3.888},{stat:"Effect Hit Rate",value:15.552}],id:"13562a04-2e82-44a6-acee-42500b505634",augmentedStats:{mainStat:"DEF%",mainValue:.449280005414036,DEF:38.1037914,"HP%":.0432,"ATK%":.03888,"Effect Hit Rate":.15552,"DEF%":0,"SPD%":0,HP:0,ATK:0,SPD:0,"CRIT DMG":0,"CRIT Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:5.699999999999999,ss:6.48,ds:29.16,cs:0},{part:"LinkRope",set:"Fleet of the Ageless",enhance:12,grade:5,main:{stat:"Energy Regeneration Rate",value:16.1736014066265},substats:[{stat:"DEF",value:16.9350184},{stat:"DEF%",value:9.719999999999999},{stat:"CRIT Rate",value:3.2399999999999998},{stat:"Effect RES",value:12.096}],id:"1364b4d9-1dc2-4ea9-973c-5508c5676a78",augmentedStats:{mainStat:"Energy Regeneration Rate",mainValue:.161736014066265,DEF:16.9350184,"DEF%":.0972,"CRIT Rate":.0324,"Effect RES":.12096,"HP%":0,"ATK%":0,"SPD%":0,HP:0,ATK:0,SPD:0,"CRIT DMG":0,"Effect Hit Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:6.4,ss:29.807999999999996,ds:0,cs:6.4799999999999995},{part:"LinkRope",set:"Space Sealing Station",enhance:12,grade:5,main:{stat:"ATK%",value:35.9424005728218},substats:[{stat:"HP%",value:15.552},{stat:"DEF%",value:9.180000000000001},{stat:"CRIT DMG",value:5.183999999999999},{stat:"Break Effect",value:6.4799999999999995}],id:"439c6e66-9371-4872-a5dc-916756a46a99",augmentedStats:{mainStat:"ATK%",mainValue:.35942400572821803,"HP%":.15552,"DEF%":.09180000000000002,"CRIT DMG":.05183999999999999,"Break Effect":.0648,"ATK%":0,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"CRIT Rate":0,"Effect Hit Rate":0,"Effect RES":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:5.1,ss:34.344,ds:6.4799999999999995,cs:5.183999999999999},{part:"LinkRope",set:"Space Sealing Station",enhance:12,grade:5,main:{stat:"ATK%",value:35.9424005728218},substats:[{stat:"ATK",value:19.0518957},{stat:"HP%",value:7.776},{stat:"Effect Hit Rate",value:11.664},{stat:"Break Effect",value:5.183999999999999}],id:"24e5659e-51f5-428d-83b7-0daa994ecf97",augmentedStats:{mainStat:"ATK%",mainValue:.35942400572821803,ATK:19.0518957,"HP%":.07776,"Effect Hit Rate":.11664,"Break Effect":.05183999999999999,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,DEF:0,SPD:0,"CRIT DMG":0,"CRIT Rate":0,"Effect RES":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:0,ss:11.664,ds:22.68,cs:0},{part:"LinkRope",set:"Rutilant Arena",enhance:12,grade:5,main:{stat:"ATK%",value:35.9424005728218},substats:[{stat:"ATK",value:40.2206687},{stat:"DEF",value:40.2206687},{stat:"CRIT DMG",value:11.664},{stat:"Effect Hit Rate",value:3.888}],id:"3aac125b-f436-4a66-bc76-124bccee2190",augmentedStats:{mainStat:"ATK%",mainValue:.35942400572821803,ATK:40.2206687,DEF:40.2206687,"CRIT DMG":.11664,"Effect Hit Rate":.03888,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,SPD:0,"CRIT Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:11.6,ss:0,ds:5.832,cs:11.664},{part:"LinkRope",set:"Broken Keel",enhance:9,grade:3,main:{stat:"Energy Regeneration Rate",value:7.7450001612309},substats:[{stat:"DEF",value:19},{stat:"SPD",value:4},{stat:"Effect Hit Rate",value:7.7},{stat:"Effect RES",value:4.3}],id:"563780c9-ac0a-4c54-98fa-2c24883f633b",augmentedStats:{mainStat:"Energy Regeneration Rate",mainValue:.077450001612309,DEF:19,SPD:4,"Effect Hit Rate":.077,"Effect RES":.043,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,"CRIT DMG":0,"CRIT Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},cs:10.4,ss:16.85,ds:21.950000000000003},{part:"LinkRope",set:"Broken Keel",enhance:9,grade:3,main:{stat:"Energy Regeneration Rate",value:7.7450001612309},substats:[{stat:"HP",value:38},{stat:"ATK%",value:12.5},{stat:"CRIT DMG",value:10.3},{stat:"Effect RES",value:4.3}],id:"bc344db6-5740-44ed-9858-46f15000d4a8",augmentedStats:{mainStat:"Energy Regeneration Rate",mainValue:.077450001612309,HP:38,"ATK%":.125,"CRIT DMG":.10300000000000001,"Effect RES":.043,"HP%":0,"DEF%":0,"SPD%":0,ATK:0,DEF:0,SPD:0,"CRIT Rate":0,"Effect Hit Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},cs:10.3,ss:6.449999999999999,ds:18.75},{part:"LinkRope",set:"Rutilant Arena",enhance:9,grade:3,main:{stat:"ATK%",value:17.210700223222197},substats:[{stat:"DEF",value:40},{stat:"CRIT Rate",value:5.5},{stat:"Effect Hit Rate",value:3.8},{stat:"Effect RES",value:3.4}],id:"802a690c-b6be-4c91-8551-c79c4fe019d1",augmentedStats:{mainStat:"ATK%",mainValue:.17210700223222197,DEF:40,"CRIT Rate":.055,"Effect Hit Rate":.038,"Effect RES":.034,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,SPD:0,"CRIT DMG":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},cs:11,ss:5.1000000000000005,ds:5.699999999999999},{part:"LinkRope",set:"Rutilant Arena",enhance:9,grade:3,main:{stat:"HP%",value:17.210700223222197},substats:[{stat:"ATK%",value:7.7},{stat:"CRIT Rate",value:5.8},{stat:"CRIT DMG",value:6.4},{stat:"Break Effect",value:11}],id:"13ec2e5b-6f28-40b2-b85a-72a862499671",augmentedStats:{mainStat:"HP%",mainValue:.17210700223222197,"ATK%":.077,"CRIT Rate":.057999999999999996,"CRIT DMG":.064,"Break Effect":.11,"HP%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"Effect Hit Rate":0,"Effect RES":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},cs:18,ss:0,ds:22.55},{part:"LinkRope",set:"Inert Salsotto",enhance:9,grade:3,main:{stat:"Energy Regeneration Rate",value:7.7450001612309},substats:[{stat:"DEF",value:16},{stat:"DEF%",value:10.2},{stat:"Effect Hit Rate",value:8.6},{stat:"Effect RES",value:7.7}],id:"6a81c65c-861d-4568-8373-d0a4ffe52989",augmentedStats:{mainStat:"Energy Regeneration Rate",mainValue:.077450001612309,DEF:16,"DEF%":.102,"Effect Hit Rate":.086,"Effect RES":.077,"HP%":0,"ATK%":0,"SPD%":0,HP:0,ATK:0,SPD:0,"CRIT DMG":0,"CRIT Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},cs:0,ss:23.79,ds:12.899999999999999}],tT=[{id:"1212",form:{characterId:"1212",characterLevel:80,characterEidolon:1,lightCone:"23014",lightConeLevel:80,lightConeSuperimposition:1,mainBody:["CRIT DMG"],mainFeet:["SPD"],mainPlanarSphere:["Ice DMG Boost"],mainLinkRope:["ATK%"],ornamentSets:["Rutilant Arena"],relicSets:[["4 Piece","Hunter of Glacial Forest"]],minAtk:0,maxAtk:2147483647,minHp:0,maxHp:2147483647,minDef:0,maxDef:2147483647,minSpd:134,maxSpd:2147483647,minCr:0,maxCr:2147483647,minCd:0,maxCd:2147483647,minEhr:0,maxEhr:2147483647,minRes:0,maxRes:2147483647,minBe:0,maxBe:2147483647,minCv:0,maxCv:2147483647,minDmg:0,maxDmg:2147483647,minMcd:0,maxMcd:2147483647,minEhp:0,maxEhp:2147483647,buffAtk:0,buffAtkP:3.12,buffCr:0,buffCd:0,rankFilter:!0,predictMaxedMainStat:!0,mainStatUpscaleLevel:12,keepCurrentRelics:!1,enhance:15,grade:5,mainHead:[],mainHands:[],setConditionals:{"Passerby of Wandering Cloud":[null,!0],"Musketeer of Wild Wheat":[null,!0],"Knight of Purity Palace":[null,!0],"Hunter of Glacial Forest":[null,!0],"Champion of Streetwise Boxing":[null,5],"Guard of Wuthering Snow":[null,!0],"Firesmith of Lava-Forging":[null,!0],"Genius of Brilliant Stars":[null,!0],"Band of Sizzling Thunder":[null,!0],"Eagle of Twilight Line":[null,!0],"Thief of Shooting Meteor":[null,!0],"Wastelander of Banditry Desert":[null,0],"Longevous Disciple":[null,2],"Messenger Traversing Hackerspace":[null,!0],"The Ashblazing Grand Duke":[null,0],"Prisoner in Deep Confinement":[null,0],"Space Sealing Station":[null,!0],"Fleet of the Ageless":[null,!0],"Pan-Cosmic Commercial Enterprise":[null,!0],"Belobog of the Architects":[null,!0],"Celestial Differentiator":[null,!1],"Inert Salsotto":[null,!0],"Talia: Kingdom of Banditry":[null,!0],"Sprightly Vonwacq":[null,!0],"Rutilant Arena":[null,!0],"Broken Keel":[null,!0],"Firmament Frontline: Glamoth":[null,!0],"Penacony, Land of the Dreams":[null,!0]},characterConditionals:{talentEnhancedState:!0,talentHpDrainAtkBuff:1.8,e1CdBuff:!0,e2SkillDmgBuff:!0},lightConeConditionals:{eclipseStacks:3,maxStackDefPen:!0},enemyLevel:95,enemyCount:1,enemyResistance:.2,enemyMaxToughness:360,enemyElementalWeak:!0,enemyWeaknessBroken:!1,statDisplay:"base",weights:{"ATK%":1,"DEF%":1,"HP%":1,SPD:1,"CRIT Rate":1,"CRIT DMG":1,"Effect Hit Rate":1,"Effect RES":1,"Break Effect":1,topPercent:100,ATK:1,DEF:1,HP:1},minWeight:0,maxWeight:2147483647,minBasic:0,maxBasic:2147483647,minSkill:0,maxSkill:2147483647,minUlt:0,maxUlt:2147483647,minFua:0,maxFua:2147483647,minDot:0,maxDot:2147483647,buffSpd:0,buffSpdP:0,buffBe:0,buffDmgBoost:0,buffDefShred:0,buffResPen:0},equipped:{Head:"cd85c14c-a662-4413-a149-a379e6d538d3",Hands:"798657c8-5c5c-4b44-9c5f-f5f094414289",Body:"b3376a19-62f9-489e-80e6-8f98335af158",Feet:"92c53d06-80d0-43a8-b896-2feeda419674",PlanarSphere:"80abbd56-b1a0-4587-a349-754c33627217",LinkRope:"c521dc03-6c6e-45ef-9933-811367312441"},rank:0},{id:"1005",form:{characterId:"1005",characterLevel:80,characterEidolon:0,lightCone:"21022",lightConeLevel:80,lightConeSuperimposition:5,mainBody:["ATK%"],mainFeet:["SPD"],mainPlanarSphere:["Lightning DMG Boost"],mainLinkRope:["ATK%"],relicSets:[["4 Piece","Band of Sizzling Thunder"]],ornamentSets:["Space Sealing Station"],minAtk:0,maxAtk:2147483647,minHp:0,maxHp:2147483647,minDef:0,maxDef:2147483647,minSpd:130,maxSpd:2147483647,minCr:0,maxCr:2147483647,minCd:0,maxCd:2147483647,minEhr:0,maxEhr:2147483647,minRes:0,maxRes:2147483647,minBe:0,maxBe:2147483647,minDmg:0,maxDmg:2147483647,minMcd:0,maxMcd:2147483647,minEhp:0,maxEhp:2147483647,buffAtk:0,buffAtkP:0,buffCr:0,buffCd:0,rankFilter:!0,predictMaxedMainStat:!0,keepCurrentRelics:!1,enhance:9,grade:5,mainHead:[],mainHands:[]},equipped:{Head:"354bde06-a10b-4449-8365-16f0dcac7b88",Hands:"81a06240-1434-4b48-b7c4-cedbca15ff50",Body:"dd7d21eb-5a85-466e-a7a3-98fc6f63e546",Feet:"53a00fa5-22a9-40bc-948b-8469d6e248ec",PlanarSphere:"15d53aff-64cc-421f-837f-5ccfd55240b6",LinkRope:"c46c97d3-0cc6-4ac9-8b0d-2d5ad0f0a0e7"},rank:1},{id:"1102",form:{characterId:"1102",characterLevel:80,characterEidolon:0,lightCone:"24001",lightConeLevel:80,lightConeSuperimposition:5,mainBody:["CRIT DMG","CRIT Rate"],mainFeet:["ATK%"],mainPlanarSphere:["Quantum DMG Boost"],mainLinkRope:["ATK%"],relicSets:[["4 Piece","Genius of Brilliant Stars"]],ornamentSets:["Rutilant Arena"],minAtk:0,maxAtk:2147483647,minHp:0,maxHp:2147483647,minDef:0,maxDef:2147483647,minSpd:130,maxSpd:2147483647,minCr:0,maxCr:2147483647,minCd:0,maxCd:2147483647,minEhr:0,maxEhr:2147483647,minRes:0,maxRes:2147483647,minBe:0,maxBe:2147483647,minDmg:0,maxDmg:2147483647,minMcd:0,maxMcd:2147483647,minEhp:0,maxEhp:2147483647,buffAtk:0,buffAtkP:0,buffCr:0,buffCd:0,rankFilter:!0,predictMaxedMainStat:!0,keepCurrentRelics:!1,enhance:9,grade:5,mainHead:[],mainHands:[]},equipped:{Head:"eda5ede8-dfaa-4fa9-b2c2-17011ed0abe6",Hands:"d0b2b781-33dc-4029-b875-81ecbc659466",Body:"4b8dafeb-6f5a-410c-bcbc-4caaef116af2",Feet:"9d68a932-b623-4ac7-bd0a-7c54779b64fb",PlanarSphere:"4806d951-5a01-48bb-876f-5368059a674d",LinkRope:"c32194b9-dddc-47de-853e-17ac8b8f61a4"},rank:2},{id:"1217",form:{characterId:"1217",characterLevel:80,characterEidolon:0,lightCone:"21000",lightConeLevel:80,lightConeSuperimposition:4,mainBody:["Outgoing Healing Boost"],mainFeet:["SPD"],mainPlanarSphere:["HP%"],mainLinkRope:["Energy Regeneration Rate"],relicSets:[["4 Piece","Passerby of Wandering Cloud"]],ornamentSets:["Fleet of the Ageless"],minAtk:0,maxAtk:2147483647,minHp:0,maxHp:2147483647,minDef:0,maxDef:2147483647,minSpd:130,maxSpd:2147483647,minCr:0,maxCr:2147483647,minCd:0,maxCd:2147483647,minEhr:0,maxEhr:2147483647,minRes:0,maxRes:2147483647,minBe:0,maxBe:2147483647,minDmg:0,maxDmg:2147483647,minMcd:0,maxMcd:2147483647,minEhp:0,maxEhp:2147483647,buffAtk:0,buffAtkP:0,buffCr:0,buffCd:0,rankFilter:!0,predictMaxedMainStat:!0,keepCurrentRelics:!1,enhance:9,grade:5,mainHead:[],mainHands:[]},equipped:{Head:"0bd7404f-3420-4bf5-9e45-f79343728685",Hands:"9b3f7f9b-b394-4c87-af67-0f4f7e41a6a8",Body:"725e6ee5-9465-45a2-8172-ed69241c1e54",Feet:"f8d42acd-c848-484a-9eee-d03a7b88f030",PlanarSphere:"f89266f4-241e-43bc-b04a-a864eea60e49",LinkRope:"e1650ead-9ec8-4e2a-9ab9-c4199e1b609c"},rank:3},{id:"1205",form:{characterId:"1205",characterLevel:80,characterEidolon:0,lightCone:"21012",lightConeLevel:80,lightConeSuperimposition:1,mainBody:["CRIT Rate","CRIT DMG"],mainFeet:["SPD"],mainPlanarSphere:["Wind DMG Boost","HP%"],mainLinkRope:["HP%"],relicSets:[["4 Piece","Longevous Disciple"]],ornamentSets:["Inert Salsotto"],minAtk:0,maxAtk:2147483647,minHp:0,maxHp:2147483647,minDef:0,maxDef:2147483647,minSpd:134,maxSpd:2147483647,minCr:0,maxCr:2147483647,minCd:0,maxCd:2147483647,minEhr:0,maxEhr:2147483647,minRes:0,maxRes:2147483647,minBe:0,maxBe:2147483647,minDmg:0,maxDmg:2147483647,minMcd:0,maxMcd:2147483647,minEhp:0,maxEhp:2147483647,buffAtk:0,buffAtkP:0,buffCr:0,buffCd:0,rankFilter:!0,predictMaxedMainStat:!0,keepCurrentRelics:!1,enhance:9,grade:5,mainHead:[],mainHands:[]},equipped:{Head:"e898e418-bc4e-404d-be3f-2477dec9839a",Hands:"71b088e8-e254-4219-96d5-f56cde1702d3",Body:"7cdd90c6-73fc-4a5f-9cea-6458d5e6f456",Feet:"726e7b1f-f630-4182-ac11-1e8523a33fc1",PlanarSphere:"9714ef68-45e7-4f62-81f2-b437649d3a49",LinkRope:"426a1d2d-c361-42d0-a7d6-5001755c220d"},rank:4},{id:"1202",form:{characterId:"1202",characterLevel:80,characterEidolon:6,lightCone:"21032",lightConeLevel:80,lightConeSuperimposition:4,mainBody:["HP%","ATK%"],mainFeet:["SPD"],mainPlanarSphere:["HP%","ATK%"],mainLinkRope:["Energy Regeneration Rate"],relicSets:[["4 Piece","Musketeer of Wild Wheat"]],ornamentSets:["Fleet of the Ageless"],minAtk:0,maxAtk:2147483647,minHp:0,maxHp:2147483647,minDef:0,maxDef:2147483647,minSpd:140,maxSpd:2147483647,minCr:0,maxCr:2147483647,minCd:0,maxCd:2147483647,minEhr:0,maxEhr:2147483647,minRes:0,maxRes:2147483647,minBe:0,maxBe:2147483647,minDmg:0,maxDmg:2147483647,minMcd:0,maxMcd:2147483647,minEhp:0,maxEhp:2147483647,buffAtk:0,buffAtkP:0,buffCr:0,buffCd:0,rankFilter:!0,predictMaxedMainStat:!0,keepCurrentRelics:!1,enhance:9,grade:5,mainHead:[],mainHands:[]},equipped:{Hands:"67999399-0a5f-4a94-9267-32c42a7fbbe5",Body:"cd8b362d-24e4-4427-b09e-2666c1fb97b4",Feet:"ac206198-c5b1-4be7-8dda-0d7b85e1aabf",PlanarSphere:"2576e256-b473-481b-9e69-5e5ce2641f1a",LinkRope:"9c66993a-07b4-4994-8bb5-86507e6ba49b"},rank:5},{id:"1101",form:{characterId:"1101",characterLevel:80,characterEidolon:1,lightCone:"23003",lightConeLevel:80,lightConeSuperimposition:1,mainBody:["CRIT DMG","HP%"],mainFeet:["SPD"],mainPlanarSphere:["HP%","DEF%"],mainLinkRope:["Energy Regeneration Rate"],relicSets:[["2 Piece","Eagle of Twilight Line"]],ornamentSets:["Fleet of the Ageless","Broken Keel"],minAtk:0,maxAtk:2147483647,minHp:0,maxHp:2147483647,minDef:0,maxDef:2147483647,minSpd:134,maxSpd:2147483647,minCr:0,maxCr:2147483647,minCd:0,maxCd:2147483647,minEhr:0,maxEhr:2147483647,minRes:0,maxRes:2147483647,minBe:0,maxBe:2147483647,minDmg:0,maxDmg:2147483647,minMcd:0,maxMcd:2147483647,minEhp:0,maxEhp:2147483647,buffAtk:0,buffAtkP:0,buffCr:0,buffCd:0,rankFilter:!0,predictMaxedMainStat:!0,keepCurrentRelics:!1,enhance:9,grade:5,mainHead:[],mainHands:[]},equipped:{Head:"8de51c73-36b5-40ea-91a2-e566d97da2a9",Feet:"dd1bb72d-80f3-432c-b8d9-0b62c7790b9a",PlanarSphere:"86816eed-af3c-441e-9379-22aca07bc15f",LinkRope:"5788b45d-6d75-4189-9689-872fd84280f7"},rank:6},{id:"1105",form:{characterId:"1105",characterLevel:80,characterEidolon:6,lightCone:"21007",lightConeLevel:80,lightConeSuperimposition:1,mainBody:["Outgoing Healing Boost"],mainFeet:["SPD"],mainPlanarSphere:["HP%"],mainLinkRope:["Energy Regeneration Rate"],relicSets:[],ornamentSets:[],minAtk:0,maxAtk:2147483647,minHp:0,maxHp:2147483647,minDef:0,maxDef:2147483647,minSpd:0,maxSpd:2147483647,minCr:0,maxCr:2147483647,minCd:0,maxCd:2147483647,minEhr:0,maxEhr:2147483647,minRes:0,maxRes:2147483647,minBe:0,maxBe:2147483647,minDmg:0,maxDmg:2147483647,minMcd:0,maxMcd:2147483647,minEhp:0,maxEhp:2147483647,buffAtk:0,buffAtkP:0,buffCr:0,buffCd:0,rankFilter:!0,predictMaxedMainStat:!0,keepCurrentRelics:!1,enhance:9,grade:5,mainHead:[],mainHands:[]},equipped:{},rank:7}],aT={relics:eT,characters:tT},nT=()=>{const{t:e}=ee(["getStartedTab","common"]),a=window.store(o=>o.gettingStartedDrawerOpen),t=window.store(o=>o.setGettingStartedDrawerOpen);function s(){V.setStore(JSON.parse(JSON.stringify(aT)),!1),Pe.save(),oe.success(e("TryOut.SuccessMessage"))}return i.jsx(Si,{title:e("TryOut.Header"),placement:"right",onClose:()=>t(!1),open:a,width:250,children:i.jsxs(D,{vertical:!0,gap:20,children:[i.jsx(Zt,{text:e("TryOut.DocumentationTitle"),linkIcon:!0,url:"https://github.com/fribbels/hsr-optimizer/blob/main/docs/guides/en/optimizer.md"}),i.jsx(Kn,{title:e("common:Confirm"),description:e("TryOut.description"),onConfirm:s,placement:"bottom",okText:e("common:Yes"),cancelText:e("common:Cancel"),children:i.jsx(se,{type:"primary",icon:i.jsx(Cs,{}),style:{width:200},children:e("TryOut.ButtonText")})})]})})},iT=()=>{const{t:e}=ee("common",{keyPrefix:"Stats"}),{t:a}=ee("optimizerTab",{keyPrefix:"TracesDrawer"}),t=window.store(x=>x.statTracesDrawerOpen),s=window.store(x=>x.setStatTracesDrawerOpen),o=window.store.getState().statTracesDrawerFocusCharacter,[r,l]=W.useState([]),[c,u]=W.useState([]),[d,m]=W.useState(!1),h=W.useMemo(()=>{if(o){const x=V.getScoringMetadata(o),O=V.getMetadata().characters[o].traceTree,H=[...O],_=[];for(;H.length;){const A=H.pop();for(const L of A.children)H.push(L);_.push(A.id)}if(l(_),x.traces){const A=x.traces.deactivated??[],L=_.filter(v=>!A.includes(v));u(L)}else u(_);return O}return[]},[o]),g={},C=[...h];for(;C.length;){const x=C.pop();for(const O of x.children)C.push(O);g[x.id]=x}const M=(x,O)=>{let H=x.checked;const _=g[O.node.key];if(_){if(O.checked){let A=_.id;for(;A;){const v=g[A];if(!v)break;H=Array.from(new Set([...H,v.id])),A=v.pre}const L=[_];for(;L.length;){const v=L.pop();H=Array.from(new Set([...H,v.id]));for(const N of v.children)L.push(N)}}else{const A=[_];for(;A.length;){const L=A.pop();H=H.filter(v=>v!==L.id);for(const v of L.children)A.push(v)}}u(H)}};return i.jsx(Si,{title:a("Title"),placement:"right",onClose:()=>s(!1),open:t,width:400,forceRender:!0,children:i.jsxs(D,{vertical:!0,gap:15,style:{display:o?"flex":"none"},children:[i.jsx(le,{children:a("Header")}),i.jsx(If,{checkable:!0,checkStrictly:!0,showLine:!0,expandedKeys:r,selectable:!1,onCheck:M,checkedKeys:c,fieldNames:{title:"stat",key:"id",children:"children"},defaultExpandParent:!0,defaultExpandAll:!0,switcherIcon:i.jsx(yf,{}),treeData:h,titleRender:x=>i.jsxs(D,{gap:0,align:"center",children:[i.jsx("img",{src:Q.getStatIcon(x.stat),style:{height:20,marginLeft:-6,marginRight:4}}),i.jsx("div",{style:{whiteSpace:"pre-wrap"},children:`${J.isFlat(x.stat)?x.value:J.precisionRound(x.value*100)+"%"} - ${e(x.stat)}`})]}),style:{padding:8}}),i.jsx(se,{block:!0,type:"primary",loading:d,onClick:()=>{if(!o)return;m(!0);const O=Object.keys(g).filter(_=>!c.includes(_)),H=V.getScoringMetadata(o);H.traces={deactivated:O},V.updateCharacterScoreOverrides(o,H),setTimeout(()=>{oe.success("Saved"),m(!1),Pe.delayedSave(),s(!1)},500)},children:a("ButtonText")})]})})},{useToken:sT}=Xt,{Text:oT}=_e;function rT(){const{token:e}=sT(),a=window.store(o=>o.activeKey),t=W.useMemo(()=>lT(),[]);if(a!=ge.CHANGELOG)return i.jsx(i.Fragment,{});function s(o,r){const l=[];let c=0;for(const d of o)d.endsWith(".webp")?l.push(i.jsx("img",{src:Q.getChangelog(`${r.date}/${d}`),loading:"lazy",style:{border:`2px solid ${e.colorBgContainer}`,margin:5,maxWidth:1200}},c++)):d.startsWith("https")?l.push(i.jsx("li",{children:i.jsx(Zt,{text:d,url:d},c++)},c++)):l.push(i.jsx("li",{children:i.jsx(oT,{style:{fontSize:16},children:d})},c++));const u=r.date!=""?`Update ${r.date}`:r.title;return i.jsxs(D,{vertical:!0,children:[i.jsx(_e.Title,{style:{marginLeft:20},children:i.jsx("u",{children:u})}),i.jsx("ul",{children:l})]})}return i.jsx(bc,{itemLayout:"vertical",size:"large",pagination:{onChange:o=>{console.log(o)},position:"bottom",align:"start",pageSize:4},dataSource:t,renderItem:o=>i.jsx(bc.Item,{children:s(o.content,o)},o.title)})}function lT(){const e=[{title:`Current data version: ${ht}`,date:"",content:[]},{title:"",date:"2025-03-10",content:["Updated content to 3.2v3","Added a DPS Score progress meter to visualize the scoring benchmarks and the damage increments between them","meter.webp","Updated main stat / substat upgrade tables on the DPS Score analysis page","The main stat upgrades now show the damage difference on downgrades as well","upgrade.webp","Updated warp income options to v3.2","income.webp","Added a New / Rerun banner selector to the Warp Planner page","When Rerun is selected, the current eidolon and superimposition options are shown","rerun.webp","Optimizer stat upgrades are now shown as an additional max stat roll instead of min roll","maxRoll.webp","Added a new Relics tab column for Reroll average delta potential vs currently equipped relics","This column can be used to sort by the most likely upgrades to a character's current relics","vs.webp","The Combat buffs menu will now show ability scalings by the scaling stat","scaling.webp","Relic displays will now accurately show previously ambiguous roll counts on relics verified by the Showcase page or Reliquary Archiver","roll.webp","Toughness measurement displays are now updated to 10 per basic atk instead of 30 per basic atk, no functional changes","Selecting Trailblazers on character menus will now default to E6","Improved performance of GPU optimization engine","Improved performance of CPU optimization engine on Firefox","Light cone effects will no longer activate when its path is mismatched with the character","Fix: Acheron's trace will now automatically update based on the number of Nihility teammates","Fix: Sparkle's trace will now automatically update based on the number of Quantum teammates","Fix: The Herta's trace will now automatically update based on the number of Erudition teammates","Fix: Poised To Bloom light cone will now automatically update based on teammates' paths","Fix: Izumo Gensei and Takama Divine Realm set will automatically update based on teammates' paths","Fix: On-Hit ATK / CR / CD boosting abilities will now no longer count towards filters and conditional activations, e.g. Ruan Mei E2, Acheron's E1","Fix: E6 Sparkle now correctly buffs memosprites","Fix: Penacony, Land of the Dreams set will now correctly buff the wearer's memosprite","Fix: Rappa's break vulnerability now correctly applies to memosprites","Fix: Long Road Leads Home light cone break vulnerability now correctly applies to memosprites","Fix: Buff priority no longer disables Castorice and her memosprite's self buffs","Fix: Clicking substat upgrades on the Edit Relic menu will now upgrade to the nearest 3, instead of adding 3","Balance: Mydei's benchmark now defaults to Bone Collection's Serene Demesne set","Balance: Acheron's simulated benchmarks can now also optimize with ATK % body"]},{title:"",date:"2025-02-25",content:["Updated content to v3.2v1","Added Castorice showcase","castorice.webp","Added Anaxa showcase","anaxa.webp","Fix: Improved GPU optimization performance and faster compile times","Fix: Combo DMG optimization on GPU on Mac no longer crashes"]},{title:"",date:"2025-02-21",content:["Added an Optimization Results Analysis panel with in depth information & comparisons for optimizer results","analysis.webp","Enabled i18n support for Korean","Enabled i18n support for Vietnamese","vnkr.webp","Added a display for tracking sources of combat buffs on the showcase analysis and optimizer analysis","buffs.webp","Improved the additional warp resources selector to include warp income per half patch","income.webp","Added an overwrite button to the custom stats simulation tool, to edit and replace an existing simulation","replace.webp","UID is now shown by default on the character showcase","uid.webp","Added a UID show / hide selector on the showcase customization toolbar","showUid.webp","Added an importer option to only import characters that are already in the optimizer","import.webp","Bronya / Remembrance Trailblazer / Sunday Crit DMG limits are increased to 400% on optimizer conditionals","cd.webp","The optimizer now selects the character's currently equipped relics for stat display and the analysis panel",'Character scores are now set to "?" ranking for non-6 piece builds and missing light cones',"Improved UI performance for loading showcases","Optimization performance improvements for CPU engine","Fix: Forcing weakness break from certain character conditionals now also correctly applies the global weakness broken DMG multiplier","Fix: Optimizer input changes now save correctly after page refresh","Fix: Aglaea and Remembrance Trailblazer conditionals now enable The Wondrous BananAmusement Park set by default","Fix: Memosprites now correctly receive SPD buffs","Fix: Memosprites now correctly calculate Super Break DMG","Fix: Additional DMG instances now correctly get calculated without ability-type DMG boosts","Fix: Tribbie E1 now correctly applies to the entire team","Fix: True DMG now correctly applies to DOT and Break DMG instances","Fix: Home page UID input now searches on Enter key press","Fix: Damage upgrades will no longer recommend an existing main stat","Fix: Damage upgrades will no longer recommend other ropes when the benchmark is matching Energy Regen rope","Fix: Mydei now correctly uses basic HP for conversion instead of combat HP","Fix: Sacerdos' Relived Ordeal set now syncs correctly on optimizer teammates","Fix: Bone Collection's Serene Demesne and Giant Tree of Rapt Brooding sets are now applied correctly in SubDPS scoring mode","Balance: Argenti's benchmarks now equalize for Energy Regen rope","Balance: Tribbie's SPD weight updated 0 -> 1.0 again after buffs","Balance: Tribbie's benchmarks now use Genius of Brilliant Stars by default, while matching the user's Poet of Mourning Collapse set","Balance: Tribbie's combo rotation now uses 4 -> 3 FUAs","Balance: Blade's default benchmark set is now Bone Collection's Serene Demesne"]},{title:"",date:"2025-01-26",content:["Updated content to version 3.1v3","Added a Warp Planner tab for calculating warp probabilities","warp.webp","Added a new customization sidebar for showcase scoring and stat views","stats.webp","Stat trace trees can now be customized, allowing SPD traces to be disabled for Poet of Mourning Collapse sets for example","trace.webp","The SPD precision selector will allow for toggling between 1 and 3 decimal places for SPD displays for precise SPD tuning","Modified traces will show with an asterisk *","spd.webp","The SPD weight selector will allow for toggling the value of SPD substats between 0% and 100% for better grading of low SPD builds","0% weight SPD scores are marked with a special boots icon when SPD = 0 is the only customized weight","weight.webp","The SPD benchmark selector will force the benchmark simulations to target a specific SPD value that is lower than your character's SPD","benchmark.webp","Scores with a modified SPD benchmark will show their SPD target on the DPS score display","benchmarkScore.webp","The Buff Priority selector will allow for toggling between making the character the primary target of single target buffs or not","priority.webp","When a character is on Buff Priority: Low, they will no longer be targeted with single target buffs, and will be labeled as a Sub DPS","Their Combat Stats and DPS score will also adjust based on their buff status","subdps.webp","Updated the auto color selection algorithm for custom portraits","Removed the CV value display from character cards, adjusted the logic for showing relevant stats","Fixed: Showcase shadows on mobile screenshot downloads","Fixed: Various formatting issues were corrected in conditional text popups","Fixed: Relic potential scoring now matches the main stats for optimal main stat relics","Balance: Added ERR rope to Tribbie scoring","Balance: Set Tribbie's default SPD weight to 0","Balance: Set Tribbie's default set to Poet of Mourning Collapse","Balance: Enabling Sub DPS mode by default for Tribbie / Aventurine / Fugue / Serval / Topaz / Moze / March 7th (Hunt)"]},{title:"",date:"2025-01-13",content:["Updated content to version 3.1v1","Added Tribbie showcase","tribbie.webp","Added Mydei showcase","mydei.webp","Added new relic sets for 3.1","sets.webp","Added new relic rating columns for relic reroll potential","— The reroll column shows the average potential of the relic after using reroll dice on it","— The reroll delta column shows the expected increase in potential from the current relic to its post-reroll stats","ratingColumns.webp","The reroll and delta columns are now sortable in the relics grid","columns.webp","Added buff priority selectors for Remembrance characters, for choosing between prioritizing the summoner or memosprite when receiving single target buffs","buffPrio.webp","Fix: Added Aglaea missing Seam Stitch conditional","Fix: Added Black Swan missing E4 conditional","Fix: Dmg RES and Eff RES enemy options labels were swapped","Fix: Showcase rendering on mobile devices","Fix: Relic potential changed between re-scores in certain cases","Balance: Added ERR rope to Serval scoring","Balance: Added ERR rope to Welt scoring"]},{title:"",date:"2025-01-07",content:["Added a no-scoring showcase card view","noScore.webp","Added dark mode for showcase card colors","Adjusted showcase card colors for various characters","dark.webp","Content has been updated for version 3.0","Added Memosprite handling logic for remembrance characters","Optimizer sidebar now has a Summoner / Memosprite stats view selector which changes the optimizer stat targets, similar to Combat / Basic mode","memoView.webp","On the optimizer grid, columns for Memosprite stats are now denoted in superscript such as Σ ATKᴹ","Added a new ability damage column for Memosprite skills: SKILLᴹ DMG","memoSkill.webp","The Combo DMG ability rotation panel is updated to include SKILLᴹ DMG","memoCombo.webp","Aglaea DPS scoring is now active, defaulting to Hero of Triumphant Song + The Wondrous BananAmusement Park sets","aglaea.webp","Remembrance Trailblazer True DMG scoring conditionals are now active","rmc.webp","Single target buffs are assumed to apply to the summoner, certain Sunday buffs / RMC buffs / team buffs can apply to both summoner and memo","Hero of Triumphant Song and Poet of Mourning Collapse sets are now active","heroPoet.webp","Added rerun characters to showcase presets","rerun.webp","Added support for Japanese translations in the i18n menu","jp.webp","Imported characters' light cones are now preselected on character / teammate menus","Updated menu banner to identify no leaks / beta sites",'Fix: Showcase Damage Improvements tab now shows Elemental + Ability DMG as "DMG %" to not overflow space',"Fix: The 100% benchmark for DPS scoring will now exactly match the user's SPD stat (except for Poet of Mourning Collapse sets)","Fix: The 200% incorrectly assumed the 100%'s boots were optimal - now, 200% will always choose the optimal SPD / ATK boots, resulting in possible score decreases","Balance: Added diminishing returns for 100% benchmark with high SPD, for characters like Kafka","Balance: Benchmarks with the Poet of Mourning Collapse set will now match the set's SPD threshold at 110 or 95 SPD, instead of matching the user's SPD","Balance: The Wondrous BananAmusement Park set is now matched for summoner benchmarks","Balance: Updated some outdated characters' relic / ornament benchmark sets for combat score",'Balance: 4 star relics are now rated as "?"',"Balance: Scoring changes for version 3.0 dice and resin","— Previously, main stats were given between 1 to 2 free substats worth of score to balance for rarity / difficulty of obtaining optimal the main stat","— This was balanced for version 1.x but now with the addition of reroll dice and substat resin in 3.x, optimal main stats are much easier to obtain","— We're adjusting this free score to be worth 1 substat roll for all main stats, which will result in a slight Character / Relic score decrease","— For Combat scoring, the scaling thresholds have also been updated for grades above the 100% benchmark to adjust for score inflation from dice / resin","score.webp"]},{title:"",date:"2024-11-27",content:["The optimizer site has a new home page","home.webp","Updated the character showcase design","showcase.webp","Added a new showcase theme customization sidebar","custom.webp","I18n support has been enabled with support for: Français, Português (BR), 中文","i18n.webp","Added healing and shielding columns and filters for sustain characters, and adjusted their default sort columns","heal.webp","Added new selector conditional type for healing and shielding sources","healSource.webp","Added a new AEON tier for DPS score at 150% with verified-only relics","aeon.webp","Incorrect main stat pieces will now get a (?) rating on the character showcase","question.webp","The optimizer grid will now remove irrelevant columns for characters to hide the full-zero columns","Made slight adjustments to relic scoring - flat stats are now valued at a static 0.40x of their percentage counterpart","Fix: Fugue E4 break DMG buff now calculates correctly","Balance: Sim scoring will now match Energy Regeneration rope for certain character / eidolon combinations","Balance: Fugue now has additional Break instances in her combo damage rotation to push towards break focus"]},{title:"",date:"2024-10-19",content:["Updated content for version 2.7","fugue.webp","Added a new ability rotation calculation methodology, where damage abilities are evaluated sequentially for buff activation","rotation.webp","Added an Advanced Rotation panel for full customizability of buff uptime and in-battle conditional calculations for the entire team","Simple mode will automatically apply presets, while Advanced mode grants full control. Improved preset accuracy is under development","advanced.webp","DPS score now shows the combo rotation abilities","abilities.webp","Added i18n support, looking for contributors to help translate the website","i18n.webp","Removed Stat Weight sort and filter options for optimizer simplification. The stat weight column still remains","Sacerdos has been added as a personal relic set conditional for characters with self buffs","Fix: The Recommended Presets button no longer resets weighted rolls per relic","Fix: Improved Firefox optimizer search performance","Balance: DPS score overvalued ATK boots in certain situations with large amount of speed buffs, mostly affects ATK boots Kafka S1 builds","Balance: Jiaoqiu is now recommended ATK / ERR rope by default","Balance: Ruan Mei can now use all mains stats for feet","Balance: Shadowed by Night light cone now has SPD buff enabled by default"]},{title:"",date:"2024-09-20",content:["Added a Relic Locator tool to the Relics tab for finding the relic's row / column in the inventory","locator.webp","Updated all assets files to high quality images for character portraits, light cones, icons","Readjusted the crop and zoom for the new portrait assets","Reduced the light cone portrait height for Combat scoring view","Moved the Character Menu button to the top of the Characters tab for better findability","characterTab.webp","Reliquary is now updated for 2.5","reliquary.webp","Updated Rappa's default scoring team","rappaTeam.webp","Added pointer cursors to clickable icons","Optimizer tab character and teammate menus are now open upon clicking their icons","Fix: Save file now correctly loads previous scoring algorithm changes","Fix: Pioneer Diver of Dead Waters 0x conditional now correctly applies","Balance: Lowered the scoring penalty for missing flat stat breakpoints for combat scoring","Balance: Updated Pioneer Diver of Dead Waters default conditional to 3x+ for characters with debuffs","Balance: Changed Rappa's scoring weights from 1 ATK / 1 SPD / 1 BE to 0.5 ATK / 1 SPD / 1 BE"]},{title:"",date:"2024-09-08",content:["Added GPU acceleration to perform calculations on the graphics card for a significant improvement in optimizer search speed","Enabling GPU acceleration will improve the optimizer's search speed to hundreds of millions of permutations per second, up to billions on high end devices","3 compute engine options are now available","— GPU Experimental: Fastest search speed but potentially unsupported on some devices","— GPU Stable: Fast search speed for general device compatability (default)","— CPU Only","GPU acceleration only supported on Windows & Mac: Chrome, Opera, Edge browsers, Linux: Chromium browsers with a cli flag","gpu.webp","Updated the substat scoring algorithm to score relics stats relative to the maximum possible score on the relic","This means that when a weighted substat is occupied by the main stat, the score value of the remaining substat weights increases","Default character weights were rebalanced to account for this, and now more accurately reflect the true value of substats, for example:","Firefly's previous weight of 1.0 ATK / 1.0 SPD / 1.0 BE has been updated to 0.5 ATK / 1.0 SPD / 1.0 BE since her passive converts ATK at roughly half the value of BE","While the ATK weight was reduced, this actually makes the score value of SPD and BE higher since the new system scores stats relative to the other weights","The updated substat weight methodology can be viewed from the Scoring Algorithm menu","scoring.webp","Updated the copy screenshot button to work for all browsers. Also works on mobile devices now","screenshot.webp","Updated the Edit Portrait workflow to be smoother. Added an 'Upload new image' button to change the portrait","portrait.webp","Multiple relics can now be selected and deleted simultaneously on the Relics tab with Shift + Click and Ctrl + Click","multiselect.webp","Added a new setting for enabling / disabling a full inventory rescore on page load. Disable for faster load times on large inventories","scoreSetting.webp","Results limits for the optimization target have been changed to be compatible with GPU optimizer - now defaults to 1024 results","resultCount.webp","The Relic Insights tool now opens the character scoring panel on click, and now updates correctly when the selected character is changed","insights.webp","Updated with version 2.6v1 content","rappa.webp","Clicking the light cone portrait on character cards now bring up the Edit Character / Light Cone menu","Added a confirmation popup for resetting optimizer filters","Added on-hit buffs for the character's primary ability to the Combat stats section of scoring cards","Relic scorer URL can now be shared with user IDs included","Relic cards now show a border on hover","Performance: Improved relic scorer stability","Performance: Improved portrait image loading times, fixed images jumping around when loading","Performance: Improved character card loading time for Combat score cards","Performance: Improved relic import responsiveness","Performance: Improved editing and saving relics responsiveness","Fix: Some custom portrait dimensions were not cropping correctly","Fix: On the Relics tab, relics will remain selected after editing it","Fix: Prevent Combat stats panel from overflowing on scoring cards","Fix: Firesmith of Lava-Forging 4p was incorrectly adding combat buffs","Fix: Relic / ornament set selector on Optimizer tab was incorrectly rendering overflowing tags","Fix: But the Battle Isn't Over was not showing the Energy Regeneration Rate passive","Balance: Allow ATK % rope on Lingsha default scoring","Balance: Fixed a bug where the 200% benchmark used an extra substat roll in some cases, resulting in an impossible build. Minor DPS Score buff to affected characters","Balance: The Wind-Soaring Valorous 4p is now disabled by default, but activated by default only for specific characters who can benefit from it","Balance: Updated Jiaoqiu to have 3x stacks of Prisoner in Deep Confinement 4p by default","Balance: Updated Moze to have 3x+ stacks of Pioneer Diver of Dead Waters 4p by default","Balance: Updated Jade to have 8x stacks of The Ashblazing Grand Duke 4p by default","Balance: Updated Herta to have 8x stacks of The Ashblazing Grand Duke 4p by default","Balance: Updated Yunli to have 8x stacks of The Ashblazing Grand Duke 4p by default","Balance: Updated Himeko to have 8x stacks of The Ashblazing Grand Duke 4p by default","Balance: Revisited all characters weights and adjusted values for maximum-potential based relic scoring","Balance: Kafka weights","— Prev: 1.0 ATK / 1.0 SPD / 0.5 CR / 0.5 CD / 0.5 EHR / 0.75 BE","— Now: 1.0 ATK, 1.0 SPD, 0.5 EHR","Balance: Silver Wolf weights","— Prev: 0.5 ATK / 0.25 DEF / 0.25 HP / 1.0 SPD / 0.75 CR / 0.75 CD / 1.0 EHR / 0.75 BE","— Now: 0.5 DEF / 0.5 HP / 1.0 SPD / 1.0 EHR / 0.5 RES","Balance: Asta weights","— Prev: 0.75 ATK / 0.75 DEF / 0.75 HP / 1.0 SPD / 0.75 RES / 0.5 BE","— Now: 0.5 ATK / 0.5 DEF / 1.0 HP / 1.0 SPD / 0.5 RES / 0.5 BE","Balance: Bronya weights","— Prev: 0.75 DEF / 0.75 HP / 1.0 SPD / 1.0 CD / 0.75 RES","— Now: 0.5 DEF / 0.5 HP / 1.0 SPD / 1.0 CD / 0.75 RES","Balance: Pela weights","— Prev: 0.75 DEF / 0.75 HP / 1.0 SPD / 1.0 EHR / 0.75 RES","— Now: 0.75 DEF / 0.75 HP / 1.0 SPD / 1.0 EHR / 0.5 RES","Balance: Tingyun weights","— Prev: 1.0 ATK / 0.75 DEF / 0.75 HP / 1.0 SPD / 0.75 RES","— Now: 1.0 ATK / 0.75 DEF / 0.75 HP / 1.0 SPD / 0.5 RES","Balance: Fu Xuan weights","— Prev: 0.75 DEF / 1.0 HP / 1.0 SPD / 0.75 RES","— Now: 1.0 DEF / 1.0 HP / 1.0 SPD / 0.5 RES","Balance: Guinaifen weights","— Prev: 1.0 ATK / 1.0 SPD / 1.0 EHR / 0.75 BE","— Now: 1.0 ATK / 0.5 DEF / 0.5 HP / 1.0 SPD / 1.0 EHR / 0.5 RES","Balance: Hanya weights","— Prev: 0.75 DEF / 0.75 HP / 1.0 SPD / 0.75 RES","— Now: 0.75 DEF / 0.75 HP / 1.0 SPD / 0.5 RES","Balance: Jiaoqiu weights","— Prev: 0.5 ATK / 0.5 DEF / 0.5 HP / 1.0 SPD / 1.0 EHR","— Now: 0.5 ATK / 0.5 DEF / 0.5 HP / 1.0 SPD / 1.0 EHR / 0.5 RES","Balance: Ruan Mei weights","— Prev: 0.75 DEF / 0.75 HP / 1.0 SPD / 0.75 RES / 1.0 BE","— Now: 0.5 DEF / 0.5 HP / 1.0 SPD / 0.5 RES / 1.0 BE","Balance: Aventurine weights","— Prev: 1.0 DEF / 0.5 HP / 1.0 SPD / 1.0 CR / 1.0 CD","— Now: 1.0 DEF / 1.0 SPD / 1.0 CR / 1.0 CD","Balance: Sparkle weights","— Prev: 0.75 DEF / 0.75 HP / 1.0 SPD / 1.0 CD / 0.75 RES","— Now: 0.5 DEF / 0.5 HP / 1.0 SPD / 1.0 CD / 0.5 RES","Balance: Black Swan weights","— Prev: 1.0 ATK / 1.0 SPD / 1.0 EHR / 0.5 BE","— Now: 1.0 ATK / 1.0 SPD / 1.0 EHR","Balance: Robin weights","— Prev: 1.0 ATK / 0.75 DEF / 0.75 HP / 1.0 SPD / 0.75 RES","— Now: 1.0 ATK / 0.5 DEF / 0.5 HP / 1.0 SPD / 0.5 RES","Balance: Firefly weights","— Prev: 1.0 ATK / 1.0 SPD / 1.0 BE","— Now: 0.5 ATK / 1.0 SPD / 1.0 BE","Balance: Boothill weights","— Prev: 0.5 ATK / 1.0 SPD / 0.75 CR / 0.75 CD / 1.0 BE","— Now: 0.25 ATK / 1.0 SPD / 0.25 CR / 0.25 CD / 1.0 BE","Balance: Trailblazer Harmony weights","— Prev: 0.75 DEF / 0.75 HP / 1.0 SPD / 0.75 RES / 1.0 BE","— New: 0.5 DEF / 0.5 HP / 1.0 SPD / 0.5 RES / 1.0 BE","Keep in mind with the new substat scoring system, a reduction in one stat's weight now actually makes the other substats worth more","Meaning in most cases these weight reductions actually are buffs to the scores of good relics"]},{title:"",date:"2024-08-19",content:["Added a new Combat Stats view for the score card, showing the character's fully buffed in-combat details","combat.webp","Added a new toggle to switch between Combat Stats and Damage Upgrades card view","upgrades.webp","Added a new panel to suggest filter changes when optimizer searches produce zero results","popup.webp","Updated scoring card with better rules for showing relevant stats","Renamed Sim Damage to Combo DMG for clarity","stats.webp","Updated Edit Character menu to auto-populate the light cone path, added path icons","Switching light cones will now reset its superimposition to S1","modal.webp","Relic scorer card now has an Edit character button","edit.webp","Moved Relic Scorer tab to a new Showcase menu at the top of the sidebar for visibility","showcase.webp","Updated content to version 2.5v4","Editing a relic now re-scores it automatically and updates the Relics tab grid","Updated Kel-Z and Reliquary Archiver imports to support the new v4 format","Fix: Some relic set text descriptions were out of date","Fix: Importing relics no longer overwrites the optimizer's equipped owner","Balance: Kafka / Black Swan's sim scoring updated to lean more towards DoT","Balance: Moze's default sim updated to to 4p Pioneer, allow Ashblazing and Izumo","Balance: Feixiao's damage combo updated to remove Break, updated combo with her ult changes"]},{title:"",date:"2024-08-10",content:["Added Healing Boost and Energy Regen on the character score card","Removed CV from the stat card","card.webp","Optimizer builds can now be pinned to the top of the grid for easier comparisons","pin.webp","The Relic scorer can now import characters along with relics","import.webp","Updated the Edit character menu with more convenient selectors","edit.webp","Added estimated time remaining to optimizer searches","eta.webp","Added an Equipped state filter to the Relics tab","equipped.webp","Added Lushaka set to teammate effects","lushaka.webp","Updated with 2.5 beta data","Fix: Conditional sliders max/min selections will now update properly when eidolons change","Fix: The baseline simulation will now use the best default set when the user's character isn't using an equivalent set","Fix: Lingsha calculations now correctly take into account teammate super break triggers","Balance: Himeko's default ornament set is now Duran","Balance: Dr Ratio's default ornament set is now Duran","Balance: Feixiao secondary ult now forces weakness break to enabled","Balance: Removed break damage from Feixiao's rotation","Balance: Adjusted logic for simulation scoring using speed boots vs atk boots"]},{title:"",date:"2024-07-08",content:["Buffed DPS scores across all characters, making the 100% benchmark slightly easier to reach","benchmark.webp","The Characters tab now has a search bar, and filters for element / path","search.webp","The Relics tab custom characters menu now has buttons to Exclude all / Clear","Custom view is now the default","exclude.webp","Reliquary archiver is back online and been updated for v2.3, new download required","reliquary.webp","Re-formatted optimizer grid headers for readability","grid.webp","Characters' default scoring combo is now automatically filled in on the optimizer","combo.webp","Updated Yunli's default scoring team","yunli.webp","Updated Yunli and March 8th's Ashblazing set calcs","Updated v2.3 characters conditional tooltips","Re-centered all light cones for simulation scoring view","Fix: Updated ability-type buff logic to correctly apply DMG buffs on characters that can change ability types","Fix: Aventurine now correctly applies CD buff on Unnerved","Fix: Certain relics weren't showing correctly in Hoyolab import","Fix: Duran and Lantern set stats are now applied correctly for scoring","Fix: Manual relic creation was broken in certain cases","Balance: Allow the scoring simulation to use Lantern/Talia sets as well as Cavalry on Harmony MC teams","Balance: Seele E1 CR buff is now disabled by default","Balance: March 8th now uses S5 Cruising in the Stellar Sea for scoring"]},{title:"",date:"2024-06-18",content:["Added 2.4 characters and light cones","beta.webp","Changed DPS Score Improvements -> Damage improvements and updated the percentage to use damage","damageImprovements.webp","Added relic counter on the relics tab grid","relicCount.webp","The sorted optimizer column is now highlighted","highlightColumn.webp","Moved enemy options to an Enemy configurations menu under Advanced options","advancedOptions.webp","Added Effect RES as a customizable enemy option for DoT calcs","enemyConfigurations.webp","Added options to toggle seeing all / custom characters on the potential graph","customCharacters.webp","Expanded the Extra combat stats menu with more buff options","combatBuffs.webp","Added a new Boost main stat option to select the desired main stat upgrade level","optimizerOptions.webp","Added character icons to various places","Character cards now zoom out properly for the smaller sim scoring portrait","Fix: Herta's technique now disabled by default","Fix: Manually editing verified relics will now remove their verified status","Fix: Elemental damage now shows correctly on the character card","Fix: Corrected display bug on relics tab potential upgrades suggesting invalid stats","Fix: Ruan Mei's E2 is now correctly calculated for Firefly","Fix: Harmony Trailblazer is now imported correctly from the scanners","Balance: Increased DoT scoring for Luka / Sampo","Balance: Adding Break Effect and Cavalry set as valid BiS scoring options when HMC is on the simulation team","Balance: Adjusted multiple support characters main stats to be more flexible","Balance: Firefly's scoring stats have been adjusted","Balance: Firefly's default sim now uses Cavalry / Lantern sets"]},{title:"",date:"2024-06-06",content:["Improved relic edit menu UI, with automatic substat upgrade calculations","relicModal.webp","DPS Score upgrades section now shows the score improvement of switching main stats, and switching to BiS relic set","scoreUpgrades.webp","Adding option to switch between scoring types","switchScoring.webp","Added a settings menu for combat sim options","scoringSettings.webp","Added new Edit character button to the Characters tab for changing eidolons / lcs","editCharacter.webp","Added new Sim Damage stat for showing the simulated combo damage used for scoring","simDamage.webp","Added new version of the substat weight filter, to filter relics by minimum weighted rolls per gear slot","substatWeight.webp","Changed the scoring grade scale to balance DPS score changes","newGrades.webp","Updated build analysis section with more details about the benchmark builds","buildAnalysis.webp","Added HoyoLab import to the scanner options","importer.webp","Various other DPS score balance changes, detailed out in the methodology section. New benchmark ruleset measures against 0% / 100% / 200% builds","Fix: Sets were not activating correctly in some cases for Aventurine","Fix: Jade now correctly applies Ashblazing set buffs","Fix: Boothill's Standoff conditional now correctly applies as a vulnerability instead of DMG increase","Fix: Sleep Like the Dead's Crit Rate buff is now deactivated by default","Fix: Cruising in the Stellar Sea's Crit Rate buff is now deactivated by default","Fix: Adjusted Firefly and Boothill scoring main stats","Fix: Ruan Mei scoring can now use all main stats for body / sphere"]},{title:"",date:"2024-05-22",content:["Updated with new character card layout","Added damage simulation based character scoring","newScore.webp","Add custom teammates display","customTeam.webp","Added a substat upgrade calculation for damage scoring","scoreUpgrades.webp","More details about the simulation scoring can be found below the character card","scoreSummary.webp","Added EHR considerations for DoT damage calculation, assumes 20% enemy RES","Adding customizable Rotation Combo damage formula","comboMenu.webp","The combo results can be filtered and sorted in the optimizer","comboGrid.webp","Added responsive handling to optimizer permutations sidebar, which now collapses into a footer for smaller screens","footer.webp","Moved Combat Buffs menu into a drawer","combatBuffs.webp","Added a +3 enhance button to the Relic Edit modal for easy enhancing","plusThree.webp","Added bar search to damage sim selectors","Raised Robin’s ATK cap to 8000","Raised Robin’s ATK default to 5000","Reliquary version bumped to 0.1.6","Character / light cone images are now blurred while loading","Updated with beta 5.3v3 changes","Fix: Fixed Firefly Break Effect conversion interaction with ratio converted ATK buffs (Robin/Lynx)","Fix: Ruan Mei’s default sort is now Break Effect","Fix: Robin’s default sort is now ATK","Fix: Prevent Ult DMG buffs from applying to Robin’s ult (Salsotto)","Fix: Removed Jade skill damage","Fix: Sparkle now correctly applies her skill CD","Fix: Custom character weights are now applied to the optimizer page","Fix: Allow all main stats for Harmony MC on body and sphere","Fix: Super break override now applies correctly to HMC","Fix: Prevent teammate sync from adding messenger set to calculations","Fix: Various relics tab potential optimality bugs have been fixed","Fix: Characters with not enough desired stats now score correctly on relics tab","Fix: Renamed Base stats to Basic stats"]},{title:"",date:"2024-05-07",content:['Added a new "Character custom stats simulation" feature',"This allows for simulating and comparing multiple character builds with custom main stats / teammates / sets / substats without having to edit relics","The substat rolls view calculates builds based on the number of max rolls in each substat","Optimizer builds can be imported as substat roll simulations","rollSim.webp","The substat totals view simulates the sum of the substat values","totalsSim.webp","Jade and Firefly have been added with damage calculations, and to the Relic Scorer experiment options","jade.webp","Custom character portraits can now be saved from the Relic Scorer","scorer.webp","Updated Harmony Trailblazer with Super Break DMG calculations","When the Super Break conditional is enabled, each ability's toughness DMG will be used to calculate Super Break DMG, which is added to the respective ability's damage column","superBreak.webp","Added new 2.3 relic sets","relics.webp","Added new 2.3 ornament sets","ornaments.webp","Reliquary Archiver is now the recommended scanner","Note: It may have a few hours of downtime following new ingame patches","import.webp","New updates will now show a notification linking to the changelog","update.webp","Added a new settings panel","The first setting is toggle the behavior when equipping relics with another owner, which now defaults to replacing without swapping","settings.webp","Using the Recommended Presets button now takes into account custom scoring overrides","Newly added characters will have their recommended presets applied by default","Harmony Trailblazer's default teammate Break Effect conditional is now 200%, and the cap is increased to 400%","The Genius set's conditional effects are now only active by default on Quantum characters, and disabled by default otherwise","Fix: Tingyun SPD buff is now disabled by default due to having inconsistent uptime","Fix: Himeko's SPD buff is now disabled by default due to having inconsistent uptime","Fix: Qingque's SPD buff is now disabled by default due to having inconsistent uptime","Fix: Sparkle's self-skill buff is now disabled on herself by default","Fix: Bronya's battle-start buffs are now disabled by default","Fix: Asta's skill now correctly calculates the sum of the bounces for damage instead of an individual hit","Fix: Remove ATK% rope from Robin's presets","Fix: Main stat free rolls are now applied correctly to non-full-weight main stats. This results in a minor score buff for certain main stats","Fix: Various visual overflow issues on small screens"]},{title:"",date:"2024-04-18",content:["Launched a new leak-free version of the optimizer which has no leaks and only contains officially released content","https://starrailoptimizer.github.io","noLeaks.webp","Added a one-click-optimize button to the Relic Scorer page, accessed by clicking the graph icon or the Optimize Character Stats button","This automatically imports the scored profile relics, adds the character and light cone, applies recommended filters and conditionals, and starts an optimizer search","This is meant to be an easy way for new users to get started using the optimizer","oneClick.webp","Updated the Get Started tab with up to date instructions and a step-by-step guide to using the optimizer for the first time","getStarted.webp","Added new Average potential view as an option alongside Max potential on Relics tab","potentialUpdates.webp","Relic potential ratings menu now has a Custom characters view enabled by default, where only a subset of characters are considered for the potential calculations","relicRatings.webp","All characters are included initially, then specific characters can be selected to excluded from the relic potential view","customCharacters.webp","Clicking empty relic slots now brings up the Add New Relic menu","clickEmpty.webp","Added icons to sidebar menu tabs","Added a button to hide the menu sidebar for easier viewing on smaller screens","hideSidebar.webp","Updated the Recommended Presets speed breakpoints to 1000ths precision","breakpoints.webp","Ambiguous speed values near specific breakpoints (such as 133.333..) are now displayed to 1000ths precision for checking if the breakpoint is met","spdValues.webp","Added a Reset All Characters button to the scoring algorithm menu","resetAll.webp","Rephrased pioneer conditional to specify between basic and combat stat buffs","The last optimized character will now be open by default on the next session","The Simulate Relics On Another Character menu is now open by default on the Relic Scorer tab","Updated Boothill damage calcs","Updated Robin damage calcs","Fix: Herta now correctly defaults to FUA sort","Fix: Removed leftover unused character level selectors, all characters now default to level 80","Fix: Black Swan E1 now correctly only applies res shred on DOT elements","Fix: Scores for saved builds will now update with scoring changes","Fix: Creating new relics with an owner now equips the relic"]},{title:"",date:"2024-04-04",content:["Added Break DMG calculations for all characters and a sortable BREAK column in the optimizer grid","breakDmg.webp","Updated Boothill's Enhanced basic attack calculation to include his Talent's additional break damage",`Updated Boothill's conditional toggle to be "Talent break DMG (forces weakness break)" which overrides the weakness break option when enabled`,"Updated Boothill's default sort option to Basic DMG","boothill.webp","Updated Boothill's scoring algorithm to prioritize SPD and Break Effect","boothillScore.webp","Added a display for the artist's name on custom character portraits","artist.webp","The artist name can be updated along with the image on the crop menu","Enabled gif uploads for custom character portraits","artistInput.webp","Updated Reliquary Archiver import for 2.1 patch, which imports accurate speed decimals for the entire inventory","archiver.webp",'Added new character action menu entry to "Sort by score" which rearranges the character priority by their character scores',"sortByScore.webp","Updated conditional set effects for Pioneer Diver of Dead Waters set with a 0x debuffs option which disables the 2p effect","pioneer.webp","Removed the Enemy HP% selector from the enemy options panel, and replaced it with Enemy Toughness, which affects the Break DMG calculations in the optimizer","tough.webp","Since the Enemy HP% selector was removed, updated character conditionals that depended on it to have their own toggle","Dan Heng now has an enemy HP% threshold toggle","Himeko now has an enemy HP% threshold toggle","Herta now has an enemy HP% threshold toggle","Argenti now has an enemy HP% threshold toggle","Reduced the filesize of assets for faster image loading","Optimizer search speed improvements for unfiltered searches","Added warning popup for optimizer searches with mismatching character and light cone paths",`Ruan Mei's teammate buff renamed to "Overtone buff" and now also applies her weakness break efficiency buff`,"Gallagher's Besotted buff added with Break DMG vulnerability","Fix: Argenti A6 trace now correctly applies to all his abilities instead of just ult DMG","Fix: Updated tooltips for 2.1 light cones","Fix: Updated Along the Passing Shore light cone's passive effect to Mirage Fizzle","Fix: Planetary Rendezvous now shows correctly on the teammate buffs panel","Fix: Bug with unselectable main stats being available in the Edit Relic view in certain cases","Fix: Stat filters are now saved to 1000ths precision"]},{title:"",date:"2024-03-26",content:['Added custom character portrait images, through the "Edit portrait" menu button on the character preview/relic scorer',"sparkle.webp","Portrait images can be selected by url or uploaded from file","crop.webp","Added substat roll count indicators to relics, showing the number of additional rolls per stat","rollQuality.webp","Added new relic rating tools to the Relics tab: for evaluating relic potential for the selected character or all characters","When selecting a character on the Relics grid, all selected relics will show their score according to the selected character's weights","relicsGrid.webp","Added new Relic Insights: Buckets graphs to display the potential of a relic and which characters are the best fit for the stats","relicBuckets.webp","The Relic Insights: Top 10 view shows the min/max range of potential for the top 10 best fit characters","relicTop10.webp","Added new 2.1 sets: Sigonia, the Unclaimed Desolation & Izumo Gensei and Takama Divine Realm","21sets.webp","Added new importer option for the Reliquary Archiver (beta) which can import accurate speed decimals for the entire inventory","importer.webp","Added new Optimization Target options to the optimizer page.","optimimationTarget.webp","This removes the 2 million results hard cap from before.","resultsLimit.webp","Choose the desired optimization goal for damage/stats/rating, and select a results limit, to find the top search results sorted by the target","sortBy.webp","Stat decimals are now shown to 1000ths precision on the Character preview when hovered","spdHover.webp","Added new Character action to switch relics with another character","switchRelics.webp","Added new 2.2 characters: Robin / Boothill / Harmony Trailblazer","Added new 2.2 light cones: Boundless Choreo / For Tomorrow's Journey / Flowing Nightglow / Sailing Towards A Second Life","22chars.webp","Adjusted character optimal main stats, allowing more lenient options such as ATK% spheres for DPS and any sphere stats for Bronya/Sparkle","Removed level selectors on Optimizer tab - all optimizations now assume level 80 character and light cone","Made the sidebar menu always stay on screen when scrolling","Fix: Relic imports from scanning newly rolled relics before logout no longer causes duplicate relics","Fix: Download screenshot button on mobile devices and Safari browsers now generates the image correctly","Fix: Pela E2 skill conditional SPD buff is now off by default","Fix: Bronya technique conditional ATK buff is now off by default","Fix: Silver Wolf skill conditional weakness implanted RES shred is now off by default","Fix: Sparkle talent conditional Quantum allies ATK buff now only applies to Quantum elemental main characters","Fix: Acheron trace Stygian Resurge now has its own slider instead of assuming all hits on target","Fix: Seele E1 conditional CR buff now has its own toggle instead of being linked to the enemy HP selector"]},{title:"",date:"2024-03-12",content:["Added a new visual character selector menu with search and filters","charSelect.webp","Light cone selectors are also updated and now default to the selected character's path","lcSelect.webp","Added a new menu that automatically shows suggestions to fix common misconfigurations in setting up optimizer searches that result in 0 permutations","zeroPerm.webp","Presets speed breakpoints are now defined to 100ths precision","presets.webp","Added def values to enemy level selector","enemyDef.webp","Updated calculations with the latest beta character abilities","Reorganized some stat orderings for consistency",`Fix: Light cone "Today is Another Peaceful Day" now defaults to the character's max energy`,"Fix: E2/E5 eidolon calculations for some characters","Fix: EHP filter works again","Fix: Linking to #scorer and other pages works again","Fix: Permutations now refresh when navigating to Optimizer tab","Fix: Alerts can now be closed when clicking on them"]},{title:"",date:"2024-02-28",content:["Enabled up/down arrow key navigation for grids","Updated the selected row overlay to be more visible","gridRow.webp","Added new priority and exclusion selectors in optimizer options","Priority can now be changed from the optimizer tab now instead of dragging. Exclude will additionally filter out specific characters relics","priorityExclude.webp","Added a notice to update when the scanner version is out of date","outOfDate.webp","Relic scorer Simulate button has been move to a sidebar, and now has preset characters for current/upcoming banners","simulate.webp","Added a sortable CV column for crit value to the Relics tab","cvColumn.webp",'Added a "Move to top" action button to the Characters tab',"moveToTop.webp","Started adding more icons to selectors for readability, more to come","icons.webp","Removed CV column & filter from optimizer tab - damage calculations are a better option to sort by now",'Stats display is set to "Combat Stats" by default now, also the setting now saves correctly per character',"Changed relic scorer API in preparation for upcoming leaderboards update"]},{title:"",date:"2024-02-20",content:["Added: Acheron / Aventurine / Gallagher","newChars.webp",'Added: "Simulate relics on another character" button on the Relic scorer.',"Now the profile characters' builds can be simulated as unowned or unreleased characters & light cones to preview their gear with accurate base stats","simulate.webp","Added: Teammates menu for the optimizer. This automatically adds the teammate's character passives/eidolons/light cone/relic sets to the calculations for more accurate results","teammates.webp","Added: Character builds can now be saved as loadouts, keeping a history of saved builds that can be easily swapped between","savedBuilds.webp","Added: Changelog page to track new optimizer changes","changelog.webp","Moved stat display to the sidebar for easier access","statDisplay.webp",'Clicking "Start optimizing" now scrolls the page down to the results grid',"Deprecated the Fribbels scanner option in favor of the Kel-Z scanner","Energy Regeneration Rate column can be filtered on now","Imports now work with scanner files that only contain characters/light cones without relics","Minor scoring changes for: Sushang, Luka, Physical Trailblazer, Blade, Silver Wolf, Kafka, and Preservation characters"]},{title:"",date:"2024-02-05",content:["Added 'Recommended Presets' button to fill out the optimizer with some suggested values","presets.webp","Added the new Pioneer & Watchmaker relic sets","newSets.webp","Added support for 8 relic scorer slots","scorer8Characters.webp","All character and light cone passives now have descriptions on hover","skillDescriptions.webp","Reorganized Character tab buttons with new Add / Edit character actions","characterActions.webp","Added a Screenshot button for copying the character preview to clipboard / downloads","screenshot.webp","Added a progress bar for the search","progress.webp","Updated damage calcs with all 2.0 light cones","Relic set filters now have a 2 piece + Any option","Improved optimizer search performance, should run 3-6x faster now"]},{title:"",date:"2024-01-22",content:["Black Swan / Sparkle / Misha added with dmg calcs and their signature light cones","newChars.webp","New 'Use equipped relics' optimizer filter toggle","useEquipped.webp","Optimizer grid now shows speed decimals","spd.webp","QOLs for relic editing for autofilled main stats","Double clicking on the characters list now will navigate to the optimizer"]},{title:"",date:"2024-01-13",content:["Big update to the relics tab, including filters and a relic recommendation tool","The recommendation tool scores each relic by its potential at +15 to help with picking which unenhanced relics to roll while building characters","relicsTab.webp","Also updated the Relic Scorer with an import option - now you can import relics directly from your ingame profile characters, with accurate speed values","import.webp"]},{title:"",date:"2024-01-06",content:["Accurate damage calculations for every character, and new optimization columns for average Basic / Skill / Ult / Follow-up / DoT damage","calcs.webp","Character abilities + Light cone passive selectors to customize the damage simulation","passives.webp","Relic set effects menu for customizing which sets to activate","setEffects.webp","New filtering tools including the substat weight filter to reduce permutations & improve search time","weightFilter.webp","Enemy count / DEF / RES / HP / and weakness selectors for optimizing specific combat scenarios","enemyOptions.webp","Integrated with the Kel-Z HSR Scanner for faster & more accurate scans","importer.webp","Expanded combat buffs options for adding more team effects like SPD / DMG% / DEF & RES shred / etc","Relic stat editor and better handling for hidden decimals","New character importer option - Import all your character builds and light cones directly from the game"]}];return e.map(a=>a.content=a.content.filter(t=>t.length>0)),e}const{Text:cT}=_e;var vt=(e=>(e[e.CHARACTER_TAB=0]="CHARACTER_TAB",e[e.SHOWCASE_TAB=1]="SHOWCASE_TAB",e[e.BUILDS_MODAL=2]="BUILDS_MODAL",e))(vt||{});function uT(){const e=navigator.userAgent,a=/Android|iPhone|iPad|iPod|Opera Mini|IEMobile|WPDesktop|BlackBerry/i.test(e),t=/^((?!chrome|android).)*safari/i.test(e);return a||t}const ns=uT()?"rgb(0, 0, 0) 1px 0px 6px":"rgb(0, 0, 0) 1px 1px 6px",Sm=", inset rgb(255 255 255 / 30%) 0px 0px 2px",B0="rgba(255, 255, 255, 0.20) solid 1px",is="rgba(255, 255, 255, 0.40) solid 1px",cl="blur(3px)",Br={flex:"auto",opacity:0,transition:"opacity 0.3s ease",visibility:"hidden"};function I0(e){const a=e.top;return i.jsx(D,{vertical:!0,style:{position:"relative",height:0,top:a},align:"center",children:i.jsx(cT,{style:{position:"absolute",backgroundColor:"rgba(0, 0, 0, 0.85)",padding:"2px 14px",borderRadius:4,fontSize:12,whiteSpace:"nowrap",textShadow:"0px 0px 10px black",outline:is,lineHeight:"12px"},children:e.text})})}function dT(e){return e==E.PlanarSphere||e==E.LinkRope}function mT(e){return e==E.Head||e==E.Hands||e==E.Body||e==E.Feet}const ac={onEditOk:(e,a)=>{a.id=e.id;const t={...e,...a};return window.rescoreSingleRelic(t),V.setRelic(t),window.setRelicRows(V.getRelics()),console.log("onEditOk",t),oe.success(Y.t("modals:Relic.Messages.EditSuccess")),setTimeout(()=>{Pe.delayedSave(),window.forceCharacterTabUpdate(),de.updateFilters()},200),t}};function io(e){return isNaN(parseFloat(e))}function fT(e){if(console.log("Form finished",e),!e.part)return oe.error(Y.t("modals:Relic.Messages.Error.PartMissing"));if(!e.mainStatType)return oe.error(Y.t("modals:Relic.Messages.Error.MainstatMissing"));if(!e.mainStatValue)return oe.error(Y.t("modals:Relic.Messages.Error.MainstatMissing"));if(!e.set)return oe.error(Y.t("modals:Relic.Messages.Error.SetMissing"));if(e.enhance==null)return oe.error(Y.t("modals:Relic.Messages.Error.EnhanceMissing"));if(e.grade==null)return oe.error(Y.t("modals:Relic.Messages.Error.GradeMissing"));if(e.grade>5||e.grade<2)return oe.error(Y.t("modals:Relic.Messages.Error.GradeInvalid"));if(e.enhance>15||e.enhance<0)return oe.error(Y.t("modals:Relic.Messages.Error.EnhanceInvalid"));if(e.enhance>e.grade*3)return oe.error(Y.t("modals:Relic.Messages.Error.EnhanceTooHigh"));if(!xn(pn,e.set)&&!xn(gn,e.set))return oe.error(Y.t("modals:Relic.Messages.Error.SetInvalid"));if(xn(pn,e.set)&&dT(e.part))return oe.error(Y.t("modals:Relic.Messages.Error.SetNotOrnament"));if(xn(gn,e.set)&&mT(e.part))return oe.error(Y.t("modals:Relic.Messages.Error.SetNotRelic"));if(e.substatType0!=null&&io(e.substatValue0)||e.substatType0==null&&e.substatValue0!=null)return oe.error(Y.t("modals:Relic.Messages.Error.SubNInvalid",{number:1}));if(e.substatType1!=null&&io(e.substatValue1)||e.substatType1==null&&e.substatValue1!=null)return oe.error(Y.t("modals:Relic.Messages.Error.SubNInvalid",{number:2}));if(e.substatType2!=null&&io(e.substatValue2)||e.substatType2==null&&e.substatValue2!=null)return oe.error(Y.t("modals:Relic.Messages.Error.SubNInvalid",{number:3}));if(e.substatType3!=null&&io(e.substatValue3)||e.substatType3==null&&e.substatValue3!=null)return oe.error(Y.t("modals:Relic.Messages.Error.SubNInvalid",{number:4}));if(e.substatType3!=null&&(e.substatType0==null||e.substatType1==null||e.substatType2==null))return oe.error(Y.t("modals:Relic.Messages.Error.SubsOutOfOrder"));if(e.substatType2!=null&&(e.substatType0==null||e.substatType1==null))return oe.error(Y.t("modals:Relic.Messages.Error.SubsOutOfOrder"));if(e.substatType1!=null&&e.substatType0==null)return oe.error(Y.t("modals:Relic.Messages.Error.SubsOutOfOrder"));const a=[e.substatType0,e.substatType1,e.substatType2,e.substatType3].filter(u=>u!=null);if(new Set(a).size!==a.length)return oe.error(Y.t("modals:Relic.Messages.Error.DuplicateSubs"));if(a.includes(e.mainStatType))return oe.error(Y.t("modals:Relic.Messages.Error.MainAsSub"));const t=parseFloat(e.substatValue0),s=parseFloat(e.substatValue1),o=parseFloat(e.substatValue2),r=parseFloat(e.substatValue3);if(t>=1e3||s>=1e3||o>=1e3||r>=1e3)return oe.error(Y.t("modals:Relic.Messages.Error.SubTooBig"));if(e.mainStatValue>=1e3)return oe.error(Y.t("modals:Relic.Messages.Error.MainTooBig"));if(t<=0||s<=0||o<=0||r<=0)return oe.error(Y.t("modals:Relic.Messages.Error.SubTooSmall"));if(e.mainStatValue<=0)return oe.error(Y.t("modals:Relic.Messages.Error.MainTooSmall"));const l={equippedBy:e.equippedBy=="None"?void 0:e.equippedBy,enhance:e.enhance,grade:e.grade,part:e.part,set:e.set,main:{stat:e.mainStatType,value:e.mainStatValue}},c=[];return e.substatType0!=null&&e.substatValue0!=null&&c.push({stat:e.substatType0,value:t}),e.substatType1!=null&&e.substatValue1!=null&&c.push({stat:e.substatType1,value:s}),e.substatType2!=null&&e.substatValue2!=null&&c.push({stat:e.substatType2,value:o}),e.substatType3!=null&&e.substatValue3!=null&&c.push({stat:e.substatType3,value:r}),l.substats=c,fi.augment(l),l}function hT(e){const a=[{stat:e.substatType0,value:e.substatValue0},{stat:e.substatType1,value:e.substatValue1},{stat:e.substatType2,value:e.substatValue2},{stat:e.substatType3,value:e.substatValue3}],t=[];for(let{stat:s,value:o}of a)if(s!=null&&o!=null){if(o=="")o="0";else if(isNaN(parseFloat(o))){t.push({low:void 0,mid:void 0,high:void 0});continue}if(s==n.SPD){const u=parseFloat(o)+(e.grade==5?2:1);t.push({low:Math.floor(u),mid:void 0,high:Math.floor(u+1)});continue}const r=J.truncate10ths(J.precisionRound(parseFloat(o))),l=as.fixSubStatValue(s,r,5),c=J.clone(Ge[s][e.grade]);J.isFlat(s)?(c.low=Ir(l+c.low),c.mid=Ir(l+c.mid),c.high=Ir(l+c.high)):(c.low=yr(l+c.low),c.mid=yr(l+c.mid),c.high=yr(l+c.high)),t.push(c)}else t.push({low:void 0,mid:void 0,high:void 0});return t}function Ir(e){return Math.floor(b.precisionRound(e))}function yr(e){return parseFloat(J.truncate10ths(b.precisionRound(e)).toFixed(1))}const y0=["F","F","F","F+","D","D+","C","C+","B","B+","A","A+","S","S+","SS","SS+","SSS","SSS+","WTF","WTF+"],Mr={HP:.4,ATK:.4,DEF:.4},va=.582,nc=5.1,Rn={[f.Stats.HP_P]:64.8/43.2,[f.Stats.ATK_P]:64.8/43.2,[f.Stats.DEF_P]:64.8/54,[f.Stats.HP]:64.8/43.2*Ge[f.Stats.HP_P][5].high/Ge[f.Stats.HP][5].high,[f.Stats.ATK]:64.8/43.2*Ge[f.Stats.ATK_P][5].high/Ge[f.Stats.ATK][5].high,[f.Stats.DEF]:64.8/54*Ge[f.Stats.DEF_P][5].high/Ge[f.Stats.DEF][5].high,[f.Stats.CR]:64.8/32.4,[f.Stats.CD]:64.8/64.8,[f.Stats.OHB]:64.8/34.5606,[f.Stats.EHR]:64.8/43.2,[f.Stats.RES]:64.8/43.2,[f.Stats.SPD]:64.8/25.032,[f.Stats.BE]:64.8/64.8},Gr=[n.Physical_DMG,n.Fire_DMG,n.Ice_DMG,n.Lightning_DMG,n.Wind_DMG,n.Quantum_DMG,n.Imaginary_DMG],so=new Set(f.SubStats);class Dt{constructor(){tt(this,"characterRelicScoreMetas");tt(this,"optimalPartScore");tt(this,"currentRelicScore");tt(this,"futureRelicScore");this.characterRelicScoreMetas=new Map,this.optimalPartScore=new Map,this.currentRelicScore=new Map,this.futureRelicScore=new Map}static scoreFutureRelic(a,t,s=!1){return new Dt().getFutureRelicScore(a,t,s)}static scoreCurrentRelic(a,t){return new Dt().getCurrentRelicScore(a,t)}static scoreCharacterWithRelics(a,t){return new Dt().scoreCharacterWithRelics(a,t)}static scoreCharacter(a){return new Dt().scoreCharacter(a)}static scoreRelicPotential(a,t,s=!1){return new Dt().scoreRelicPotential(a,t,s)}getRelicScoreMeta(a){let t=this.characterRelicScoreMetas.get(a);if(t)return t;t=J.clone(V.getScoringMetadata(a));const s=V.getMetadata().characters[a].scoringMetadata;t.category=AE(s,{stats:t.stats}),t.stats[f.Stats.HP]=t.stats[f.Stats.HP_P]*Mr.HP,t.stats[f.Stats.ATK]=t.stats[f.Stats.ATK_P]*Mr.ATK,t.stats[f.Stats.DEF]=t.stats[f.Stats.DEF_P]*Mr.DEF,t.sortedSubstats=Object.entries(t.stats).filter(l=>so.has(l[0])).sort((l,c)=>c[1]*Rn[c[0]]*Ge[c[0]][5].high-l[1]*Rn[l[0]]*Ge[l[0]][5].high),t.groupedSubstats=new Map;for(const[l,c]of t.sortedSubstats)t.groupedSubstats.has(c)||t.groupedSubstats.set(c,[]),t.groupedSubstats.get(c).push(l);for(const l of t.groupedSubstats.values())l.sort();let o=0;Object.entries(t.stats).forEach(([l,c])=>{Gr.includes(l)&&c&&o++});let r=0;if(t.parts.PlanarSphere.forEach(l=>{Gr.includes(l)&&r++}),o<2&&r<2){const l=[t.parts.Head,t.parts.Hands,t.parts.Body,t.parts.Feet,t.parts.PlanarSphere.filter(c=>!Gr.includes(c)),t.parts.LinkRope];t.greedyHash=b.objectHash({sortedSubstats:t.sortedSubstats,parts:l}),t.hash=b.objectHash({...t.stats,...t.parts})}else t.greedyHash=b.objectHash({stats:t.stats,parts:t.parts}),t.hash=t.greedyHash;return this.characterRelicScoreMetas.set(a,t),t}getOptimalPartScore(a,t,s){var l,c;const o=this.getRelicScoreMeta(s).greedyHash;let r=(c=(l=this.optimalPartScore.get(a))==null?void 0:l.get(o))==null?void 0:c.get(t);return r||(r=this.scoreOptimalRelic(a,t,s),this.optimalPartScore.has(a)||this.optimalPartScore.set(a,new Map),this.optimalPartScore.get(a).has(o)||this.optimalPartScore.get(a).set(o,new Map),this.optimalPartScore.get(a).get(o).set(t,r)),r}getFutureRelicScore(a,t,s=!1){var l;const o=this.getRelicScoreMeta(t).hash;let r=(l=this.futureRelicScore.get(a.id))==null?void 0:l.get(o);return r||(r=this.scoreFutureRelic(a,t,s),this.futureRelicScore.has(a.id)||this.futureRelicScore.set(a.id,new Map),this.futureRelicScore.get(a.id).set(o,r)),r}getCurrentRelicScore(a,t){var r;if(!a)return{score:"0",rating:"",mainStatScore:0};const s=this.getRelicScoreMeta(t).hash;let o=(r=this.currentRelicScore.get(a.id))==null?void 0:r.get(s);return o||(o=this.scoreCurrentRelic(a,t),this.currentRelicScore.has(a.id)||this.currentRelicScore.set(a.id,new Map),this.currentRelicScore.get(a.id).set(s,o)),o}substatScore(a,t){const s=this.getRelicScoreMeta(t);if(!s||!t||!a)return console.warn("substatScore() called but missing 1 or more arguments. relic:",a,"meta:",s,"id:",t),{score:0,mainStatScore:0,scoringMetadata:s,part:a==null?void 0:a.part};const o=s.stats;let r=0;for(const c of a.substats)r+=c.value*(o[c.stat]||0)*Rn[c.stat];const l=((c,u,d,m)=>{if(d==E.Head||d==E.Hands)return 0;let h;switch(u){case 2:h=12.8562;break;case 3:h=25.8165;break;case 4:h=43.1304;break;default:h=64.8}return h*(m[d].includes(c)?1:o[c])})(a.main.stat,a.grade,a.part,s.parts);return{score:r,mainStatScore:l,part:a.part,scoringMetadata:s}}scoreOptimalRelic(a,t,s){let o=0,r;const l=this.getRelicScoreMeta(s),c=pT(l);switch(c){case 5:o=1/0;break;case 1:case 2:case 3:{let u=[];const d=l.sortedSubstats[0][0],m=l.sortedSubstats[1][0];a==f.Parts.Head&&c==1||a==f.Parts.Hands&&c==2?u=Xn(5,{stat:d,value:Ge[d][5].high*6}):u=Xn(5,{stat:d,value:Ge[d][5].high*6},{stat:m,value:Ge[m][5].high}),r=Pi(5,15,a,f.Stats.HP_P,u),o=this.substatScore(r,s).score}break;case 0:{const u=l.sortedSubstats[0][0],d=Xn(5,{stat:u,value:Ge[u][5].high*6});o=this.substatScore(Pi(5,15,a,f.Stats.HP_P,d),s).score}break;case 4:{let u="";const d=l.parts[a]||[];if(d.includes(t)||l.stats[t]==1||!J.hasMainStat(a))u=t;else{const C=Object.entries(l.stats).map(A=>d.includes(A[0])||l.stats[A[0]]==1?[A[0],1]:[A[0],A[1]]).sort((A,L)=>{const v=so.has(A[0])?A[1]*Rn[A[0]]*Ge[A[0]][5].high:A[1]*6.48;return(so.has(L[0])?L[1]*Rn[L[0]]*Ge[L[0]][5].high:L[1]*6.48)-v}),M=Il[a],x=C.findIndex(([A,L])=>M.includes(A)),O=C[x][1];u=C[x][0];let H=!1,_=!0;for(let A=x;A<C.length;A++){const[L,v]=C[A];if(v!=O)break;if(!M.includes(L))continue;const N=d.includes(L),U=so.has(L);H&&!N||!_&&U||H===N&&_==U||(u=L,H=N,_=U)}}const h=l.sortedSubstats.filter(([C,M])=>C!==u).slice(0,4),g=Xn(5,{stat:h[0][0],value:Ge[h[0][0]][5].high*6},{stat:h[1][0],value:Ge[h[1][0]][5].high},{stat:h[2][0],value:Ge[h[2][0]][5].high},{stat:h[3][0],value:Ge[h[3][0]][5].high});r=Pi(5,15,a,u,g),o=this.substatScore(r,s).score}break}return o}scoreFutureRelic(a,t,s=!1){if(!t||!a)return console.warn("scoreFutureRelic() called but lacking arguments"),{current:0,best:0,average:0,worst:0,rerollAvg:0,idealScore:1,meta:{bestAddedStats:[""],bestUpgradedStats:[""]},substatScore:{best:0,average:0,worst:0}};const o=this.getRelicScoreMeta(t);if(!o.sortedSubstats[0][0])return{current:0,best:0,average:0,worst:0,rerollAvg:0,idealScore:1,meta:{bestAddedStats:[""],bestUpgradedStats:[""]},substatScore:{best:0,average:0,worst:0}};const r=(()=>{switch(a.grade){case 2:return 12.8562;case 3:return 25.8165;case 4:return 43.1304;case 5:return 64.8}})(),l=J.hasMainStat(a.part)?(CT(a,o)-1)*r:0,c=o.sortedSubstats.filter(F=>F[0]!=a.main.stat&&!a.substats.map(P=>P.stat).includes(F[0])),u=Math.ceil((oo(a.grade)-a.enhance)/3)-(4-a.substats.length),d=Pr(a.part,a.main.stat,o),m=this.getOptimalPartScore(a.part,a.main.stat,t),h=Math.max(0,(this.substatScore(a,t).score+d)/m*100*va+l),g=[{stat:"HP",value:0},{stat:"HP",value:0},{stat:"HP",value:0},{stat:"HP",value:0}];for(let F=0;F<a.substats.length;F++)g[F].stat=a.substats[F].stat,g[F].value=a.substats[F].value;for(let F=a.substats.length;F<4;F++){const P=c[F-a.substats.length][0];g[F].stat=P,g[F].value=Ge[P][5].high}const C=gT(g,o);g[C.index].value+=u*Ge[C.stat][a.grade].high;let M=Pi(a.grade,oo(a.grade),a.part,a.main.stat,Xn(5,g[0],g[1],g[2],g[3]));const x=Math.max(0,(this.substatScore(M,t).score+l)/m*100*va+d),O=[{stat:"HP",value:0},{stat:"HP",value:0},{stat:"HP",value:0},{stat:"HP",value:0}];for(let F=0;F<a.substats.length;F++)O[F].stat=a.substats[F].stat,O[F].value=a.substats[F].value+u/4*Ge[O[F].stat][a.grade].mid;let H=0;for(const F of c){const[P,T]=F;H+=Ge[P][a.grade].mid*T*Rn[P]}H=H/c.length;for(let F=a.substats.length;F<4;F++)O[F].stat=o.sortedSubstats[0][0],O[F].value=H*(1+u/4)/(Rn[o.sortedSubstats[0][0]]*o.sortedSubstats[0][1]);M=Pi(a.grade,oo(a.grade),a.part,a.main.stat,Xn(5,O[0],O[1],O[2],O[3]));const _=Math.max(0,(this.substatScore(M,t).score+l)/m*100*va+d);c.reverse();const A=[{stat:"HP",value:0},{stat:"HP",value:0},{stat:"HP",value:0},{stat:"HP",value:0}];for(let F=0;F<a.substats.length;F++)A[F].stat=a.substats[F].stat,A[F].value=a.substats[F].value;for(let F=a.substats.length;F<4;F++){const P=c[F-a.substats.length][0];A[F].stat=P,A[F].value=Ge[P][5].high}const L=bT(A,o);A[L.index].value+=Ge[L.stat][a.grade].low*u,M=Pi(a.grade,oo(a.grade),a.part,a.main.stat,Xn(5,A[0],A[1],A[2],A[3]));const v=Math.max(0,(this.substatScore(M,t).score+l)/m*100*va+d);let N;if(s){const F=[];if(a.substats.length<4)for(const[I,B]of c)B>=c[c.length-1][1]&&F.push(I);const P=o.sortedSubstats.filter(I=>a.main.stat!==I[0]),T=[],y={...Yg(a.substats,"stat"),...Jg(F)},p=P.filter(I=>y[I[0]]),R=p[0][1];for(const[I,B]of p)y[I]&&B>=R&&T.push(I);F.forEach((I,B)=>F[B]=Y.t(`common:Stats.${I}`)),T.forEach((I,B)=>T[B]=Y.t(`common:Stats.${I}`)),N={bestAddedStats:F,bestUpgradedStats:T}}let U=0;if(a.grade>=5&&a.substats.length==4){const F=b.sumArray(a.substats.map(y=>y.addedRolls??0)),P=Math.ceil((15-a.enhance)/3),T=Math.min(F+P,5);for(const y of a.substats){const p=y.stat,R=Ge[p][5].high*o.stats[p]*Rn[p];T>=5?U+=R*2.25:U+=R*2}U=Math.min(U,m),U=(U+l)/m*100*va+d}return{current:h,best:x,average:_,worst:v,rerollAvg:U,meta:N}}scoreCurrentRelic(a,t){if(!a)return{score:"",scoreNumber:0,rating:"",mainStatScore:0};if(!t)return console.warn("scoreCurrentRelic called but lacking character",a),{score:"",scoreNumber:0,rating:"",mainStatScore:0};const s=this.getRelicScoreMeta(t),o=a.part,r=Pr(a.part,a.main.stat,s),l=this.substatScore(a,t),c=this.getOptimalPartScore(o,a.main.stat,t),u=l.score/c*100*va+r,d=M0(u,l,a),m=l.mainStatScore;return{score:u.toFixed(1),scoreNumber:u,rating:d,mainStatScore:m,part:o,meta:s}}scoreCharacterWithRelics(a,t){if(!(a!=null&&a.id))return console.warn("scoreCharacterWithRelics called but no character given"),{relics:[],totalScore:0,totalRating:"?"};const s=t.map(c=>this.getCurrentRelicScore(c,a.id));let o=0;for(const c of s)o+=Number(c.score)+Number(c.mainStatScore);const r=3-ST(t.filter(c=>c!=null).map(c=>c.set));o=Math.max(0,o-r*3*nc);const l=s.length<6?"?":M0((o-4*64.8)/6);return{relics:s,totalScore:o,totalRating:l}}scoreCharacter(a){if(!a)return{};const t=window.store.getState().relicsById,s=Object.values(a.equipped).map(o=>t[o??""]);return this.scoreCharacterWithRelics(a,s)}scoreRelicPotential(a,t,s=!1){const o=this.getRelicScoreMeta(t),r=Pr(a.part,a.main.stat,o),l=this.getFutureRelicScore(a,t,s);return{currentPct:Math.max(0,l.current-r)/va,bestPct:Math.max(0,l.best-r)/va,averagePct:Math.max(0,l.average-r)/va,worstPct:Math.max(0,l.worst-r)/va,rerollAvgPct:Math.max(0,l.rerollAvg-r)/va,meta:l.meta}}}function ST(e){let a=0;const t={};return e.forEach(s=>{t[s]?(a+=1,t[s]=0):t[s]=1}),a}function Pr(e,a,t){const s=t.stats,o=t.parts;if(e==f.Parts.Body||e==f.Parts.Feet||e==f.Parts.PlanarSphere||e==f.Parts.LinkRope){const r=o[e].includes(a)?1:s[a];return 1*nc*r}return 0}function Pi(e,a,t,s,o){return{enhance:a,grade:e,part:t,main:{stat:s,value:Qr[s][e].base+Qr[s][e].increment*a},substats:o}}function Xn(e,a,t,s,o){const r=[{stat:a.stat,value:a.value,rolls:{high:Ge[a.stat][e].high,mid:Ge[a.stat][e].mid,low:Ge[a.stat][e].low},addedRolls:0}];return t&&r.push({stat:t.stat,value:t.value,rolls:{high:Ge[t.stat][e].high,mid:Ge[t.stat][e].mid,low:Ge[t.stat][e].low},addedRolls:0}),s&&r.push({stat:s.stat,value:s.value,rolls:{high:Ge[s.stat][e].high,mid:Ge[s.stat][e].mid,low:Ge[s.stat][e].low},addedRolls:0}),o&&r.push({stat:o.stat,value:o.value,rolls:{high:Ge[o.stat][e].high,mid:Ge[o.stat][e].mid,low:Ge[o.stat][e].low},addedRolls:0}),r}function pT(e){const a=e.sortedSubstats;return a[0][1]==0?5:a[1][1]==0?0:a[2][1]>0?4:a[1][0]==n.HP&&a[0][0]==n.HP_P||a[1][0]==n.HP_P&&a[0][0]==n.HP?1:a[1][0]==n.ATK&&a[0][0]==n.ATK_P||a[1][0]==n.ATK_P&&a[0][0]==n.ATK?2:a[1][0]==n.DEF&&a[0][0]==n.DEF_P||a[1][0]==n.DEF_P&&a[0][0]==n.DEF?3:4}function gT(e,a){let t=0,s=0,o="";for(let r=0;r<e.length;r++){const l=a.stats[e[r].stat];(l>s||r==0)&&(s=l,t=r,o=e[r].stat)}return{index:t,weight:s,stat:o}}function bT(e,a){let t=0,s=1,o="";for(let r=0;r<e.length;r++){const l=a.stats[e[r].stat];(l<s||r==0)&&(s=l,t=r,o=e[r].stat)}return{index:t,weight:s,stat:o}}function oo(e){switch(e){case 2:return 6;case 3:return 9;case 4:return 12;default:return 15}}function M0(e,a,t){if(t&&t.grade!=5)return"?";const s=Math.min(Math.floor(e/(nc/2)),y0.length-1);return s<0||DT(a)?"?":y0[s]}function DT(e){return e&&e.part!=E.Hands&&e.part!=E.Head&&b.precisionRound(e.mainStatScore)<=0}function CT(e,a){return J.hasMainStat(e.part)?a.parts[e.part].includes(e.main.stat)?1:a.stats[e.main.stat]:0}function pm(e,a,t){return{[n.HP_P]:a.freeRolls,[n.ATK_P]:a.freeRolls,[n.DEF_P]:a.freeRolls,[n.HP]:a.freeRolls,[n.ATK]:a.freeRolls,[n.DEF]:a.freeRolls,[n.SPD]:e.speedRollsDeduction,[n.CR]:a.freeRolls,[n.CD]:a.freeRolls,[n.EHR]:a.freeRolls,[n.RES]:a.freeRolls,[n.BE]:a.freeRolls}}function gm(e,a,t,s,o){var m;const r=e.simulation.request,l={[n.HP_P]:0,[n.ATK_P]:0,[n.DEF_P]:0,[n.HP]:0,[n.ATK]:0,[n.DEF]:0,[n.SPD]:0,[n.CR]:0,[n.CD]:0,[n.EHR]:0,[n.RES]:0,[n.BE]:0};for(const h of a.substats)l[h]=t.maxPerSub;l[r.simBody]-=t.deductionPerMain,l[r.simFeet]-=t.deductionPerMain,l[r.simPlanarSphere]-=t.deductionPerMain,l[r.simLinkRope]-=t.deductionPerMain;for(const h of fa)l[h]=Math.min(l[h],t.substatGoal-10*t.freeRolls-Math.ceil(e.speedRollsDeduction)),l[h]=Math.max(l[h],t.freeRolls),((m=a.maxBonusRolls)==null?void 0:m[h])!=null&&(l[h]=Math.min(l[h],a.maxBonusRolls[h]+t.freeRolls));if(t.limitFlatStats&&(l[n.ATK]=t.freeRolls,l[n.HP]=t.freeRolls,l[n.DEF]=t.freeRolls),l[n.ATK]=Math.min(10,l[n.ATK]),l[n.HP]=Math.min(10,l[n.HP]),l[n.DEF]=Math.min(10,l[n.DEF]),l[n.SPD]=e.speedRollsDeduction,!o.overcapCritRate){const h=Ht.getMaxedSubstatValue(n.CR,t.quality),g=Math.max(0,100-s.xa[S.CR]*100);l[n.CR]=Math.max(t.baselineFreeRolls,Math.max(t.enforcePossibleDistribution?6:0,Math.min(r.simBody==n.CR?Math.ceil((g-32.4)/h):Math.ceil(g/h),l[n.CR])))}const c=Ht.getMaxedSubstatValue(n.EHR,t.quality),u=Math.max(0,120-s.xa[S.EHR]*100);l[n.EHR]=l[n.EHR]==0?0:Math.max(t.baselineFreeRolls,Math.max(t.enforcePossibleDistribution?6:0,Math.min(r.simBody==n.EHR?Math.ceil((u-43.2)/c):Math.ceil(u/c),l[n.EHR])));const d=Math.ceil(e.speedRollsDeduction)-6;for(const h of fa)h!=n.SPD&&(l[h]=Math.max(t.baselineFreeRolls,Math.min(l[h],36-d)));return l}const za={quality:.8,speedRollValue:2.3,substatGoal:48,freeRolls:2,maxPerSub:30,deductionPerMain:5,baselineFreeRolls:2,limitFlatStats:!0,enforcePossibleDistribution:!1,substatRollsModifier:ET},ul={...za,substatRollsModifier:e=>e},_i={quality:1,speedRollValue:2.6,substatGoal:54,freeRolls:0,maxPerSub:36,deductionPerMain:6,baselineFreeRolls:0,limitFlatStats:!1,enforcePossibleDistribution:!0,substatRollsModifier:e=>e};function ET(e,a,t){const s=Object.values(t).filter(o=>o.augmentedStats.mainStat==a).length;return a==n.SPD?Lo(s,e):bm(s,e)}function bm(e,a){const t=12-2*e;if(a<=t)return a;const s=Math.max(0,a-t),o=s/Math.pow(s,.25);return t+o}function Lo(e,a){const t=12-2*e;if(a<=t)return a;const s=Math.max(0,a-t),o=s/Math.pow(s,.1);return t+o}function TT(e,a,t){let s=0,o=0;for(;s<a;)o++,s=Lo(e,o)*t;const r=o-1;if(s===a)return o;let l=r,c=o,u=0;const d=1e-6;for(;c-l>d;)u=(l+c)/2,Lo(e,u)*t<a?l=u:c=u;return u}function RT(e){const a=b.clone(e),t={};for(const s of Object.values(E))t[s]=a[s]||{set:-1,substats:[],main:{stat:"NONE",value:0}};return t}function BT(e){return e.request.simFeet==n.SPD}function Dm(e,a){const t=BT(e);return a.substatGoal==48?t?25:26:t?30:36}function Cm(e,a){const t=e.result;return a.result.simScore-t.simScore}function IT(e,a,t,s,o,r,l,c,u){const d=a-l.xa[S.SPD],m=[];for(const h of t.parts[E.Feet])for(const g of t.parts[E.PlanarSphere]){const C=b.clone(e);C.request.simPlanarSphere=g,C.request.simFeet=h;const M=h==n.SPD?Math.max(0,b.precisionRound((d-25.032)/_i.speedRollValue)):Math.max(0,b.precisionRound(d/_i.speedRollValue));if(M>36&&h!=n.SPD)continue;const x={simulation:C,finalSpeed:0,speedRollsDeduction:Math.min(M,Dm(C,_i))},O=pm(x,_i),H=gm(x,t,_i,l,u);Object.values(fa).map(A=>x.simulation.request.stats[A]=H[A]);const _=Em(x,O,H,s,o,r,t,_i,u);m.push(_)}return m.sort(Cm),m[0]}const _r={};function yT(e,a,t,s){const o=e.form,r=o.characterId,l=o.characterEidolon,c=o.lightCone,u=o.lightConeSuperimposition,d=V.getMetadata().characters[r];if(!(d!=null&&d.scoringMetadata.simulation))return console.log("No scoring sim defined for this character"),null;if(!r||!o)return console.log("Invalid character sim setup"),null;const m=d.scoringMetadata,h=V.getScoringMetadata(r),g=b.clone(m.simulation),C=b.clone(h.simulation),M=h.traces,x=C.deprioritizeBuffs??!1;t==wi&&(g.teammates=C.teammates);const O=RT(a),H=b.objectHash({traces:M,characterId:r,characterEidolon:l,lightCone:c,lightConeSuperimposition:u,relicsByPart:O,metadata:g,customMetadata:C,showcaseTemporaryOptions:s});if(_r[H])return _r[H];const _={addBreakEffect:!1,overcapCritRate:!1,simPoetActive:!1,characterPoetActive:!1,forceBasicSpd:!0,forceBasicSpdValue:0},A=g.substats;g.comboBreak>0&&(_.addBreakEffect=!0),g.teammates.find(fe=>fe.characterId=="8005"||fe.characterId=="8006"||fe.characterId=="1225")&&(_.addBreakEffect=!0),_.addBreakEffect&&!A.includes(n.BE)&&A.push(n.BE),_.addBreakEffect&&!g.parts[E.LinkRope].includes(n.BE)&&g.parts[E.LinkRope].push(n.BE),_.addBreakEffect&&!g.relicSets.find(fe=>fe[0]==fe[1]&&fe[1]==G.IronCavalryAgainstTheScourge)&&g.relicSets.push([G.IronCavalryAgainstTheScourge,G.IronCavalryAgainstTheScourge]),_.addBreakEffect&&!g.relicSets.find(fe=>fe[0]==fe[1]&&fe[1]==G.IronCavalryAgainstTheScourge)&&g.relicSets.push([G.IronCavalryAgainstTheScourge,G.IronCavalryAgainstTheScourge]),_.addBreakEffect&&!g.ornamentSets.find(fe=>fe==G.TaliaKingdomOfBanditry)&&g.ornamentSets.push(G.TaliaKingdomOfBanditry),_.addBreakEffect&&!g.ornamentSets.find(fe=>fe==G.ForgeOfTheKalpagniLantern)&&g.ornamentSets.push(G.ForgeOfTheKalpagniLantern),g.teammates.find(fe=>fe.characterId=="1313"&&fe.characterEidolon==6)&&(_.overcapCritRate=!0);const L=PT(g,O);O.Head.set==G.PoetOfMourningCollapse&&O.Hands.set==G.PoetOfMourningCollapse&&O.Body.set==G.PoetOfMourningCollapse&&O.Feet.set==G.PoetOfMourningCollapse&&(_.characterPoetActive=!0),L.relicSet1==G.PoetOfMourningCollapse&&L.relicSet2==G.PoetOfMourningCollapse&&(_.simPoetActive=!0);const v=Wi(r,c,l,u,!1),N=Wi(g.teammates[0].characterId,g.teammates[0].lightCone,g.teammates[0].characterEidolon,g.teammates[0].lightConeSuperimposition,!0),U=Wi(g.teammates[1].characterId,g.teammates[1].lightCone,g.teammates[1].characterEidolon,g.teammates[1].lightConeSuperimposition,!0),F=Wi(g.teammates[2].characterId,g.teammates[2].lightCone,g.teammates[2].characterEidolon,g.teammates[2].lightConeSuperimposition,!0);v.teammate0=N,v.teammate1=U,v.teammate2=F,v.deprioritizeBuffs=x;const P=ss(v),T=(fe,ut=!0)=>{fe&&(fe.unpenalizedSimScore=fe.xa[S.COMBO_DMG],fe.penaltyMultiplier=xT(fe,g,za),fe.simScore=fe.unpenalizedSimScore*(ut?fe.penaltyMultiplier:1))};let{originalSimResult:y,originalSim:p}=dl(O,L,v,P,ul,_);const R=b.precisionRound(y.ca[S.SPD],3),{baselineSimResult:I,baselineSim:B}=AT(O,v,P,L,za,_);T(I);const j=s.spdBenchmark!=null?Math.max(I[n.SPD],s.spdBenchmark):null;_.simPoetActive?I[n.SPD]<95?_.forceBasicSpdValue=Math.min(R,94.999,j??94.999):I[n.SPD]<110&&(_.forceBasicSpdValue=Math.min(R,109.999,j??109.999)):_.forceBasicSpdValue=Math.min(j??R,R);const{originalSimResult:Z,originalSim:K}=dl(O,L,v,P,ul,_);let X;_.characterPoetActive?X=Z.xa[S.SPD]:_.simPoetActive?X=_.forceBasicSpdValue:(y=Z,p=K,X=y.xa[S.SPD]),T(y);const te=_T(e,g,L,p),ae=[];for(const fe of te){const ia=$a(v,P,[fe.simulation],za)[0].xa[S.SPD];fe.finalSpeed=ia;const Ci=fe.simulation.request.simFeet==n.SPD?1:0,jn=b.precisionRound(TT(Ci,X-ia,za.speedRollValue),3);if(fe.speedRollsDeduction=Math.min(Math.max(0,jn),Dm(fe.simulation,za)),fe.speedRollsDeduction>=26&&fe.simulation.request.simFeet!=n.SPD){console.log("Rejected candidate sim with non SPD boots");continue}const Ei=pm(fe,za),We=gm(fe,g,za,I,_);Object.values(fa).map(Cn=>fe.simulation.request.stats[Cn]=We[Cn]);const At=Em(fe,Ei,We,v,P,T,g,za,_);T(At.result),At.key=JSON.stringify(At.request),At.name="",fe.simulation.request.stats[n.SPD]>26&&fe.simulation.request.simFeet!=n.SPD?console.log("Rejected candidate sim"):ae.push(At)}ae.sort(Cm);const Te=ae[0],Ke=Te.result,Se=IT(Te,X,g,v,P,T,I,y,_),re=Se.result;T(re);const be=Ke.simScore,De=y.simScore,Ne=I.simScore,st=re.simScore,Wt=De>=be?1+(De-be)/(st-be):(De-Ne)/(be-Ne),{substatUpgradeResults:na,setUpgradeResults:xa,mainUpgradeResults:ce}=MT(y,p,ae[0],v,P,g,T,za);for(const fe of[...na,...xa,...ce]){const ut=fe.simulationResult.simScore,ia=ut>=be?1+(ut-be)/(st-be):(ut-Ne)/(be-Ne);fe.percent=ia}na.sort((fe,ut)=>ut.percent-fe.percent),xa.sort((fe,ut)=>ut.percent-fe.percent),ce.sort((fe,ut)=>ut.percent-fe.percent);const et={percent:Wt,originalSim:p,baselineSim:B,benchmarkSim:Te,maximumSim:Se,originalSimResult:y,baselineSimResult:I,benchmarkSimResult:Ke,maximumSimResult:re,originalSimScore:De,baselineSimScore:Ne,benchmarkSimScore:be,maximumSimScore:st,substatUpgrades:na,setUpgrades:xa,mainUpgrades:ce,simulationForm:v,simulationMetadata:g,characterMetadata:d,originalSpd:R,spdBenchmark:j,simulationFlags:_};return _r[H]=et,et}function MT(e,a,t,s,o,r,l,c){const u=[];for(const x of r.substats){const O=x,H=b.clone(a);H.request.stats[O]=(H.request.stats[O]??0)+1;const _=$a(s,o,[H],{...c,substatRollsModifier:A=>A})[0];l(_),u.push({stat:O,simulation:H,simulationResult:_})}const d=[],m=b.clone(a);m.request.simRelicSet1=t.request.simRelicSet1,m.request.simRelicSet2=t.request.simRelicSet2,m.request.simOrnamentSet=t.request.simOrnamentSet;const h=$a(s,o,[m],{...c,substatRollsModifier:x=>x})[0];l(h),d.push({simulation:m,simulationResult:h});const g=[],C=Tm(s,r,a);function M(x){for(const O of r.parts[x]){const H=b.clone(a),_=GT[x],A=H.request[_];if(C&&A==n.ERR||O==A||O==n.SPD||A==n.SPD)continue;H.request[_]=O;const L=$a(s,o,[H],{...c,substatRollsModifier:N=>N})[0];l(L);const v={stat:O,part:x,simulation:H,simulationResult:L};g.push(v)}}return M(E.Body),M(E.Feet),M(E.PlanarSphere),M(E.LinkRope),{substatUpgradeResults:u,setUpgradeResults:d,mainUpgradeResults:g}}const GT={[E.Body]:"simBody",[E.Feet]:"simFeet",[E.PlanarSphere]:"simPlanarSphere",[E.LinkRope]:"simLinkRope"};function Wi(e,a,t,s,o=!1){var g;if(!e)return null;const r=V.getMetadata(),l=os({id:e});l.characterId=e,l.characterEidolon=t,l.lightCone=a,l.lightConeSuperimposition=s,l.characterConditionals={},l.lightConeConditionals={};const c={characterId:e,characterEidolon:t},u=Un(l,r),d=Ta.get(c),m=Sa.get(u);o?(d.teammateDefaults&&J.mergeUndefinedValues(l.characterConditionals,d.teammateDefaults()),m.teammateDefaults&&J.mergeUndefinedValues(l.lightConeConditionals,m.teammateDefaults())):(d.defaults&&J.mergeUndefinedValues(l.characterConditionals,d.defaults()),m.defaults&&J.mergeUndefinedValues(l.lightConeConditionals,m.defaults()));const h=(g=V.getMetadata().characters[e].scoringMetadata)==null?void 0:g.simulation;return h?(l.comboAbilities=[...h.comboAbilities],l.comboDot=h.comboDot,l.comboBreak=h.comboBreak):(l.comboAbilities=[null,"BASIC"],l.comboDot=0,l.comboBreak=0),l}function Em(e,a,t,s,o,r,l,c,u){const d=a,m=t,h=l.breakpoints,g=c.substatGoal;let C=G0(m),M=e.simulation,x,O=!0,H=!0,_=0;const A=b.sumArray(Object.values(M.request.stats)),L=b.sumArray(Object.values(d));if(A==L||A<g)return M.result=$a(s,o,[M],{...c,substatRollsModifier:c.substatRollsModifier})[0],M;const v={parts:[]};if(c.enforcePossibleDistribution){H=!1,m[n.SPD]=Math.max(6,m[n.SPD]),M.request.stats[n.SPD]=Math.max(6,m[n.SPD]),C=G0(m);const U=[...l.substats,n.SPD],F=T=>{const y={};return U.forEach(p=>{p!=T&&(y[p]=!0)}),{main:T,substats:y}},P=e.simulation.request;v.parts=[F(P.simLinkRope),F(P.simPlanarSphere),F(P.simFeet),F(P.simBody),F(n.ATK),F(n.HP)]}const N={};for(;C>g;){let U,F,P,T;const y=Object.entries(M.request.stats).filter(([p,R])=>R>c.freeRolls).map(([p])=>p).filter(p=>!N[p]);M.request.stats;for(const p of y){if(M.request.stats[p]<=c.freeRolls||J.sumArray(Object.values(M.request.stats))<=c.substatGoal||p==n.SPD&&M.request.stats[n.SPD]<=Math.ceil(e.speedRollsDeduction)||M.request.stats[p]<=d[p])continue;const R=M.request.stats[p],I=M;I.request.stats[p]-=1;const B=$a(s,o,[I],{...c,substatRollsModifier:c.substatRollsModifier,simulationFlags:u})[0];if(_++,O&&(h!=null&&h[p])&&B.xa[Nt[p]]<h[p]){M.request.stats[p]=R;continue}r(B),(!U||B.simScore>P.simScore)&&(U=I,F=Object.assign({},I.request.stats),P=B,T=p),M.request.stats[p]=R}if(!P){if(O){O=!1;continue}if(H){H=!1;continue}C-=1;continue}if(c.enforcePossibleDistribution&&F[T]<6){const p=T,R=F[p],I=v.parts.map(B=>B.substats[p]).filter(B=>B).length;if(R<I){let B=!1;for(const j of v.parts)if(j.substats[p]&&!(Object.values(j.substats).length<=4)){delete j.substats[p],B=!0;break}if(!B){N[p]=!0;continue}}}M=U,x=P,M.request.stats=F,C-=1}return M.result=x,console.log("simulationRuns",_,e.simulation.request.simBody,e.simulation.request.simFeet,e.simulation.request.simLinkRope,e.simulation.request.simPlanarSphere),M}function G0(e){let a=0;for(const t of fa)a+=e[t];return a}function PT(e,a){const{relicSetNames:t,ornamentSetName:s}=Rm(a);let o=e.relicSets[0][0],r=e.relicSets[0][1],l=e.ornamentSets[0];const c=e.relicSets.map(d=>d.sort());for(const d of c){if(t[0]==d[0]&&t[1]==d[1]){o=d[0],r=d[1];break}if(d[0]!=d[1]&&d.includes(t[0])&&d.includes(t[1])){o=t[0],r=t[1];break}}const u=e.ornamentSets;for(const d of u)if(s==d){l=d;break}return{relicSet1:o,relicSet2:r,ornamentSet:l}}function Tm(e,a,t){return t.request.simLinkRope==n.ERR&&a.errRopeEidolon!=null&&e.characterEidolon>=a.errRopeEidolon}function _T(e,a,t,s){const o=a.parts[E.Feet],l=Tm(e.form,a,s)?[n.ERR]:a.parts[E.LinkRope],{relicSet1:c,relicSet2:u,ornamentSet:d}=t,m=[];for(const h of a.parts[E.Body])for(const g of o)for(const C of a.parts[E.PlanarSphere])for(const M of l){const x={name:"",simRelicSet1:c,simRelicSet2:u,simOrnamentSet:d,simBody:h,simFeet:g,simPlanarSphere:C,simLinkRope:M,stats:{[n.HP_P]:0,[n.ATK_P]:0,[n.DEF_P]:0,[n.HP]:0,[n.ATK]:0,[n.DEF]:0,[n.SPD]:0,[n.CR]:0,[n.CD]:0,[n.EHR]:0,[n.RES]:0,[n.BE]:0}},H={simulation:{name:"",key:"",simType:Dn.SubstatRolls,request:x},finalSpeed:0,speedRollsDeduction:0};m.push(H)}return m}function AT(e,a,t,s,o,r){const l=b.clone(e);Object.values(E).forEach(d=>l[d]=l[d]||Hl()),Object.values(E).forEach(d=>l[d].part=d),Object.values(l).map(d=>{if(d.substats=[],d.part==E.Head)for(const m of fa)m!=n.SPD&&d.substats.push({stat:m,value:Ht.getMaxedSubstatValue(m,o.quality)*0})});const{originalSimResult:c,originalSim:u}=dl(l,s,a,t,o,r,0,!0);return{baselineSimResult:c,baselineSim:u}}function dl(e,a,t,s,o,r,l=1,c=!1){const u=b.clone(e);Object.values(E).forEach(M=>u[M].part=M);const{relicSetNames:d,ornamentSetName:m}=Rm(u),h=Jl(u,d[0],d[1],m,o.quality,o.speedRollValue);if(c){const{relicSet1:M,relicSet2:x,ornamentSet:O}=a;h.simRelicSet1=M,h.simRelicSet2=x,h.simOrnamentSet=O}const g={name:"",key:"",simType:Dn.SubstatRolls,request:h},C=$a(t,s,[g],{...o,substatRollsModifier:M=>M,mainStatMultiplier:l,simulationFlags:r})[0];return g.result=C,{originalSimResult:C,originalSim:g}}function Rm(e){Object.values(E).forEach(r=>e[r]=e[r]||Hl());const a=[e[E.Head].set,e[E.Hands].set,e[E.Body].set,e[E.Feet].set].filter(r=>r!=-1),t=[e[E.PlanarSphere].set,e[E.LinkRope].set].filter(r=>r!=-1),s=Jd(a,!0),o=Qd(t,!0);return s.sort(),{relicSetNames:s,ornamentSetName:o}}function xT(e,a,t){let s=1;if(a.breakpoints)for(const o of Object.keys(a.breakpoints))J.isFlat(o)?s*=(Math.min(1,e.xa[Nt[o]]/a.breakpoints[o])+1)/2:s*=Math.min(1,1-(a.breakpoints[o]-e.xa[Nt[o]])/Ht.getMaxedSubstatValue(o,t.quality));return e.penaltyMultiplier=s,s}function LT(e,a,t,s=!0){if(t!=6||!s)return"?";let o="WTF+";const r=b.precisionRound(e*100);for(const[l,c]of Object.entries(Bm))if(!(l=="AEON"&&!a)&&(o=l,r>=c))return o;return"?"}const Bm={AEON:150,"WTF+":140,WTF:130,"SSS+":121,SSS:113,"SS+":106,SS:100,"S+":95,S:90,"A+":85,A:80,"B+":75,B:70,"C+":65,C:60,"D+":55,D:50,"F+":45,F:40};function OT(e,a,t){let s,o;if(e==vt.CHARACTER_TAB)s=Dt.scoreCharacter(a),o={Head:Ai(t,a,E.Head),Hands:Ai(t,a,E.Hands),Body:Ai(t,a,E.Body),Feet:Ai(t,a,E.Feet),PlanarSphere:Ai(t,a,E.PlanarSphere),LinkRope:Ai(t,a,E.LinkRope)};else{const r=a.equipped,l=Object.values(r);s=Dt.scoreCharacterWithRelics(a,l),o=r}return $g(Object.values(o)).forEach(r=>{const l=s.relics.find(c=>c.part==r.part);l&&(r.scoringResult=l)}),{scoringResults:s,displayRelics:o}}function Ai(e,a,t){var s;return(s=a.equipped)!=null&&s[t]?e[a.equipped[t]]:null}function vT(e){var s,o,r;const a=((s=e==null?void 0:e.portrait)==null?void 0:s.artistName)??((r=(o=V.getCharacterById(e==null?void 0:e.id))==null?void 0:o.portrait)==null?void 0:r.artistName);if(!a)return;const t=a.trim();return t.length<1?void 0:t}function HT(e,a){const o=V.getMetadata().characters[e.id].imageCenter,r=e.form.lightCone&&e.form.lightCone!="0"?V.getMetadata().lightCones[e.form.lightCone].imageCenter:0;let l=LD,c=OD,u=wd,d=vD,m=Hs,h=xD;return a&&(l=mn,c=128,u=mn+16,d=1260/902*u,m=Hs-128-8,h=950),{tempLcParentW:l,tempLcParentH:c,tempLcInnerW:u,tempLcInnerH:d,tempInnerW:h,tempParentH:m,newLcHeight:128,newLcMargin:8,charCenter:o,lcCenter:r}}function FT(e,a,t){const s=b.clone(a);ct.condenseRelicSubstatsForOptimizerSingle(Object.values(s).filter(c=>!!c));const l={...mi(de.displayToForm(de.formToDisplay(e.form)),s,null,null,null).c.toBasicStatsObject()};return l[t.elementalDmgType]=l.ELEMENTAL_DMG,l}function wT(e,a,t,s,o,r){if(t!=Xi)return null;const l=r[e.id]??{};let c=yT(e,a,s,l);return c!=null&&c.originalSim?c.originalSimResult[o.elementalDmgType]=c.originalSimResult.ELEMENTAL_DMG:c=null,c}function kT(e,a,t){const s=ac.onEditOk(a,e);t(s),Pe.delayedSave()}function KT(e,a){const t=Y.getFixedT(null,["charactersTab","modals","common"]);V.setRelic(e),window.setRelicRows(V.getRelics()),a(e),Pe.delayedSave(),oe.success(t("CharacterPreview.Messages.AddedRelic"))}function NT(e,a,t,s){const o=Y.getFixedT(null,["charactersTab","modals","common"]),{type:r,config:l}=a;switch(r){case"add":t(l),V.saveCharacterPortrait(e.id,l),oe.success(o("CharacterPreview.Messages.SavedPortrait")),Pe.delayedSave();break;case"delete":V.deleteCharacterPortrait(e.id),t(void 0),oe.success(o("CharacterPreview.Messages.RevertedPortrait")),Pe.delayedSave();break;default:console.error(`Payload of type '${r}' is not valid!`)}s(!1)}function UT(e,a,t){let s=t[e.id];const o=V.getMetadata().characters[e.id].scoringMetadata;if(o!=null&&o.simulation){const r=V.getScoringMetadata(e.id);J.objectHash(r.simulation.teammates)!=J.objectHash(o.simulation.teammates)&&s!=Es&&(s=wi)}return a.current=e.id,s??Es}function jT(e){const a=Y.getFixedT(null,["charactersTab","modals","common"]),t=e.form.characterId,s=V.getMetadata().characters[t],o=s.element,r=80,l=e.form.characterEidolon,c=t?a(`gameData:Characters.${t}.Name`):"",u=s.path,d=e.form.lightCone,m=80,h=e.form.lightConeSuperimposition,g=V.getMetadata().lightCones[d],C=d?a(`gameData:Lightcones.${d}.Name`):"",M=Q.getLightConePortrait(g)||"",x=Di[o];return{characterId:t,characterMetadata:s,characterElement:o,characterLevel:r,characterEidolon:l,characterName:c,characterPath:u,lightConeId:d,lightConeLevel:m,lightConeSuperimposition:h,lightConeMetadata:g,lightConeName:C,lightConeSrc:M,elementalDmgType:x}}const WT=[[111.1,111.2],[114.2,114.3],[133.3,133.4],[142.8,142.9],[155.5,155.6],[171.4,171.5],[177.7,177.8]],VT=e=>WT.some(([a,t])=>e>=a&&e<t),P0={"Fire DMG Boost":"Fire DMG","Ice DMG Boost":"Ice DMG","Imaginary DMG Boost":"Imaginary DMG","Lightning DMG Boost":"Lightning DMG","Physical DMG Boost":"Physical DMG","Quantum DMG Boost":"Quantum DMG","Wind DMG Boost":"Wind DMG"},ZT={simScore:"Combo DMG","Fire DMG Boost":"Fire DMG","Ice DMG Boost":"Ice DMG","Imaginary DMG Boost":"Imaginary DMG","Lightning DMG Boost":"Lightning DMG","Physical DMG Boost":"Physical DMG","Quantum DMG Boost":"Quantum DMG","Wind DMG Boost":"Wind DMG","Outgoing Healing Boost":"Healing Boost","Energy Regeneration Rate":"Energy Regen",BASIC:"Basic Damage",ULT:"Ult Damage",SKILL:"Skill Damage",FUA:"FUA Damage",DOT:"DoT Damage"};function oa(e){const{stat:a,finalStats:t,edits:s}=e,o=b.precisionRound(t[a]),{t:r,i18n:l}=ee("common"),c=ZT[a]||a=="CV"?l.exists(`ReadableStats.${a}`)?r(`ReadableStats.${a}`):r(`DMGTypes.${a}`):r(`Stats.${a}`),{valueDisplay:u,value1000thsPrecision:d}=ic(o,e.value,e.stat,e.preciseSpd);return t?i.jsxs(D,{justify:"space-between",align:"center",title:d,children:[i.jsx("img",{src:Q.getStatIcon(a),style:{width:qe,height:qe,marginRight:3}}),`${c}${s!=null&&s[a]?" *":""}`,i.jsx(Ut,{style:{margin:"auto 10px",flexGrow:1,width:"unset",minWidth:"unset"},dashed:!0}),`${u}${J.isFlat(a)||a=="CV"||a=="simScore"?"":"%"}${a=="simScore"?r("ThousandsSuffix"):""}`]}):(console.log("No final stats"),i.jsx("div",{}))}function ic(e,a,t,s){let o,r;return t=="CV"?(o=Ot(J.precisionRound(a)),r=Qn(J.precisionRound(a))):t=="simScore"||t=="COMBO_DMG"?(o=Ot(J.truncate10ths(J.precisionRound((a??0)/1e3))),r=Qn(J.precisionRound(a))):t==f.Stats.SPD?(o=VT(e)||s?Qn(J.precisionRound(e,3)):Ot(J.truncate10ths(J.precisionRound(e,3))),r=Qn(J.precisionRound(e))):J.isFlat(t)?(o=Ln(Math.floor(e)),r=Qn(J.precisionRound(e))):(o=Ot(J.truncate10ths(J.precisionRound(e*100))),r=Qn(J.truncate1000ths(J.precisionRound(e*100)))),{valueDisplay:o,value1000thsPrecision:r}}const{Text:sc}=_e,kn=zt(sc)`
    font-family: Segoe UI, Frutiger, Frutiger Linotype, Dejavu Sans, Helvetica Neue, Arial, sans-serif;
    font-size: 17px;
    font-weight: 400;
    white-space: nowrap;
`,zT=zt(sc)`
    font-family: Segoe UI, Frutiger, Frutiger Linotype, Dejavu Sans, Helvetica Neue, Arial, sans-serif;
    font-size: 17px;
    font-weight: 400;
    white-space: nowrap;
    text-overflow: ellipsis;
    overflow: hidden;
`,ei=zt(sc)`
    font-family: Segoe UI, Frutiger, Frutiger Linotype, Dejavu Sans, Helvetica Neue, Arial, sans-serif;
    font-size: 16px;
    font-weight: 400;
    white-space: nowrap;
`,_0=.001,ml=e=>{const a=XT(e.characterId),t=window.store(s=>s.savedSession[$e.showcasePreciseSpd]);return i.jsx(kn,{children:i.jsxs(D,{vertical:!0,style:{paddingLeft:4,paddingRight:6},gap:e.scoringType==hn?5:3,children:[i.jsx(oa,{finalStats:e.finalStats,stat:n.HP,edits:a}),i.jsx(oa,{finalStats:e.finalStats,stat:n.ATK,edits:a}),i.jsx(oa,{finalStats:e.finalStats,stat:n.DEF,edits:a}),i.jsx(oa,{finalStats:e.finalStats,stat:n.SPD,edits:a,preciseSpd:t}),i.jsx(oa,{finalStats:e.finalStats,stat:n.CR,edits:a}),i.jsx(oa,{finalStats:e.finalStats,stat:n.CD,edits:a}),i.jsx(oa,{finalStats:e.finalStats,stat:n.EHR,edits:a}),i.jsx(oa,{finalStats:e.finalStats,stat:n.RES,edits:a}),i.jsx(oa,{finalStats:e.finalStats,stat:n.BE,edits:a}),!e.simScore&&e.finalStats[n.OHB]>_0&&i.jsx(oa,{finalStats:e.finalStats,stat:n.OHB,edits:a}),(e.showAll||e.finalStats[n.ERR]>_0||e.simScore==null)&&i.jsx(oa,{finalStats:e.finalStats,stat:n.ERR,edits:a}),i.jsx(oa,{finalStats:e.finalStats,stat:e.elementalDmgValue,edits:a}),e.simScore!=null&&i.jsx(oa,{finalStats:e.finalStats,stat:"simScore",value:e.simScore})]})})};function XT(e){if(!e)return{};const a=V.getMetadata().characters[e],t=ad(a),s=a.traces,o={};for(const[r,l]of Object.entries(s))b.precisionRound(t[r])!=b.precisionRound(l)&&(o[r]=!0,r==n.ATK_P&&(o[n.ATK]=!0),r==n.DEF_P&&(o[n.DEF]=!0),r==n.HP_P&&(o[n.HP]=!0));return o}function oc(e,a=100){const[t,s]=W.useState(null);return W.useEffect(()=>{const o=setTimeout(()=>{s(e)},a);return()=>clearTimeout(o)},[e,a]),t}const YT=()=>i.jsx("svg",{className:"w-6 h-6 text-gray-800 dark:text-white","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",fill:"none",viewBox:"0 1 20 20",children:i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v13m0-13 4 4m-4-4-4 4"})}),JT=e=>i.jsx(ri,{component:YT,...e});function Im(e,a){const t=$T(e);return QT(t,a)}function QT(e,a){const t=Object.fromEntries(Object.values(da).map(o=>[o,{}])),s=V.getMetadata().characters[a.characterId].path==Pa.Remembrance;for(const o of[...e.buffsBasic,...e.buffs,...s?e.buffsMemo:[]]){const r=o.source.id,l=a.characterId==r?da.PRIMARY:o.source.buffType,c=t[l];c[r]||(c[r]=[]),c[r].push(o)}return t}function $T(e){const a=e.buffs,t=e.c.buffs,s=e.m?[...e.buffsMemo,...e.m.buffs]:[];return s.forEach(r=>r.memo=!0),{buffs:a,buffsMemo:s,buffsBasic:t}}function ym(e){const a=e.buffGroups??qT(e.result);if(!a)return i.jsx(i.Fragment,{});const t=[],s=[];let o=0;const r=e.size??390;for(const[l,c]of Object.entries(a.PRIMARY))t.push(i.jsx(ro,{id:l,buffs:c,buffType:da.PRIMARY,size:r},o++));for(const[l,c]of Object.entries(a.SETS))t.push(i.jsx(ro,{id:l,buffs:c,buffType:da.SETS,size:r},o++));for(const[l,c]of Object.entries(a.CHARACTER))s.push(i.jsx(ro,{id:l,buffs:c,buffType:da.CHARACTER,size:r},o++));for(const[l,c]of Object.entries(a.LIGHTCONE))s.push(i.jsx(ro,{id:l,buffs:c,buffType:da.LIGHTCONE,size:r},o++));return e.singleColumn?i.jsxs(D,{gap:20,vertical:!0,children:[t,s]}):i.jsxs(D,{justify:"space-between",style:{width:"100%"},children:[i.jsx(D,{gap:20,vertical:!0,children:t}),i.jsx(D,{gap:20,vertical:!0,children:s})]})}function qT(e){if(!e)return null;e.simulationForm.trace=!0;const t=$a(e.simulationForm,null,[e.originalSim],ul)[0].tracedX;return Im(t,e.simulationForm)}function ro(e){ee();const{id:a,buffs:t,buffType:s,size:o}=e;let r;return s==da.PRIMARY||s==da.CHARACTER?r=Q.getCharacterAvatarById(a):s==da.LIGHTCONE?r=Q.getLightConeIconById(a):s==da.SETS?r=Q.getSetImage(G[a]):r=Q.getBlank(),i.jsxs(D,{align:"center",gap:5,children:[i.jsx("img",{src:r,style:{width:64,height:64}}),i.jsx(eR,{buffs:t,size:o})]})}function eR(e){const{buffs:a}=e,{t}=ee(["gameData","optimizerTab"]),s=e.size??390,o=[{dataIndex:"value",key:"value",width:70,minWidth:70,render:l=>i.jsx("span",{style:{textWrap:"nowrap"},children:l})},{dataIndex:"stat",key:"stat",render:(l,c)=>i.jsxs(D,{justify:"space-between",children:[i.jsxs("span",{style:{flex:"1 1 auto",overflow:"hidden",textOverflow:"ellipsis",textWrap:"nowrap",marginRight:10,minWidth:130},children:[`${c.statLabel}`," ",c.memo?"ᴹ":""]}),i.jsx("span",{style:{flex:"1 1 auto",overflow:"hidden",textOverflow:"ellipsis",textWrap:"nowrap",textAlign:"end"},children:c.sourceLabel})]})}],r=a.map((l,c)=>{var M;const u=l.stat,d=!Rs[u].flat,m=Rs[u].bool,h=((M=Rs[u])==null?void 0:M.label)??u;let g;switch(l.source.buffType){case da.CHARACTER:g=t(`optimizerTab:ExpandedDataPanel.BuffsAnalysisDisplay.Sources.${l.source.ability}`);break;case da.LIGHTCONE:g=t(`Lightcones.${l.source.id}.Name`);break;case da.SETS:g=t(`RelicSets.${pt[G[l.source.id]]}.Name`);break;default:g=l.source.label}let C;return m?C=l.value?"True":"False":d?C=`${b.precisionRound(l.value*100,2)} %`:C=`${b.precisionRound(l.value,0)}`,{key:c,value:C,memo:l.memo,statLabel:h,sourceLabel:g}});return i.jsx(pi,{columns:o,dataSource:r,pagination:!1,size:"small",className:"buff-table remove-table-bottom-border",rowClassName:"buff-row",tableLayout:"fixed",style:{width:s,border:"1px solid #354b7d",boxShadow:Ws,borderRadius:5,overflow:"hidden",fontSize:14}})}var Mm=(e=>(e[e.SMALL=390]="SMALL",e[e.LARGE=450]="LARGE",e))(Mm||{});const Gm=730,Pm=400;function tR(e){const a=e.analysis.newX.dmgSplits;if(!a)return i.jsx("div",{});a.MEMO_SKILL_DMG=e.analysis.newX.m.dmgSplits.MEMO_SKILL_DMG,a.MEMO_TALENT_DMG=e.analysis.newX.m.dmgSplits.MEMO_TALENT_DMG;const t=Object.values(a);return i.jsx(D,{vertical:!0,align:"center",gap:8,style:{width:Gm,height:Pm,boxShadow:Ws,borderRadius:5,overflow:"hidden",background:"#243356"},children:i.jsx(aR,{data:t})})}const A0=["abilityDmg","dotDmg","superBreakDmg","jointDmg","memoDmg","additionalDmg","breakDmg","trueDmg"],x0="#DDD";function aR(e){const{t:a}=ee("optimizerTab",{keyPrefix:"ExpandedDataPanel.DamageSplits"}),[t,s]=W.useState(null),r=e.data.filter(l=>A0.some(c=>l[c]!==0)).map(l=>{const c=l;let u=0;for(const d of A0)u+=l[d]??0;return c.sum=u,c});return r.sort((l,c)=>{const u=Object.values(l).filter(m=>typeof m=="number").reduce((m,h)=>m+h,0);return Object.values(c).filter(m=>typeof m=="number").reduce((m,h)=>m+h,0)-u}),i.jsxs(D,{justify:"center",className:"pre-font",children:[i.jsx("span",{style:{position:"absolute",marginTop:20,fontSize:14},children:a("Title")}),i.jsxs(vu,{layout:"vertical",data:r,margin:{top:50,right:60,bottom:20,left:70},barCategoryGap:"25%",width:Gm,height:Pm,children:[i.jsx(Hu,{type:"number",tick:{fill:x0},tickFormatter:Gs,width:100}),i.jsx(Fu,{dataKey:"name",type:"category",axisLine:!1,tickLine:!1,tick:{fill:x0},tickFormatter:l=>a(`YAxisLabel.${l}`),tickMargin:10,width:20}),i.jsx(Mf,{cursor:!1,isAnimationActive:!1,content:i.jsx(nR,{bar:t})}),i.jsx(Gf,{formatter:l=>a(`Legend.${l}`),wrapperStyle:{paddingTop:10,paddingRight:40,paddingLeft:40}}),Bn("abilityDmg","#85c1e9",s),Bn("jointDmg","#2980b9",s),Bn("superBreakDmg","#e59866",s),Bn("additionalDmg","#bb8fce",s),Bn("dotDmg","#45b39d",s),Bn("memoDmg","#cd6155",s),Bn("breakDmg","#f8c471",s),Bn("trueDmg","#cacfd2",s,!0)]})]})}function Bn(e,a,t,s=!1){return i.jsx(wu,{dataKey:e,stackId:"a",fill:a,activeBar:!1,isAnimationActive:!1,onMouseEnter:()=>t(e),onMouseLeave:()=>t(null),children:s&&i.jsx(Pf,{dataKey:"sum",position:"right",formatter:Gs})},e)}const nR=e=>{const{t:a}=ee("optimizerTab",{keyPrefix:"ExpandedDataPanel.DamageSplits.TooltipText"}),{active:t,payload:s,bar:o}=e;if(!o||!s||!t)return null;const r=s.find(l=>l.dataKey==o);return r?i.jsxs(D,{vertical:!0,className:"pre-font",style:{background:"rgb(69,93,154)",padding:8,borderRadius:3},children:[i.jsx("span",{style:{fontSize:14,fontWeight:"bold"},children:a(o)}),i.jsx("span",{children:Ea(Math.floor(r.value))})]}):null};function Gs(e){return`${Math.floor(Number(e)/1e3)}${Y.t("common:ThousandsSuffix")}`}const iR={"WTF+":!0,"SSS+":!0,"SS+":!0,"S+":!0,"A+":!0,"B+":!0,"C+":!0,"D+":!0,"F+":!0};function sR(e){const{maximum:a,benchmark:t,minimum:s}=e,o=Math.min(a,Math.max(e.score,s)),r=Math.random(),l=Object.entries(Bm).sort((K,X)=>X[1]-K[1]),c=K=>{const X=K/100;if(K<=100)return s+(t-s)*X;{const te=(K-100)/100;return t+(a-t)*te}},u=[{name:"Score",value:o}],d="#666",m="#999",h=1060,g=150,C={top:45,right:20,left:20,bottom:55},M=10,x=28,O=36,H=h-C.left-C.right,_="#FF6355dd",A="#faf742dd",L="#b0fa42dd",v="#75ec46dd",N="#17D553dd",U="#23BBFFdd",F="#9F50FFdd",P="#BC38FFdD",T="0%",y=`${(t-s)/2/(a-s)*100}%`,p=`${(t-s)*(3/4)/(a-s)*100}%`,R=`${(t-s)/(a-s)*100}%`,I=`${((a-t)/4+(t-s))/(a-s)*100}%`,B=`${((a-t)/2+(t-s))/(a-s)*100}%`,j=`${((a-t)*(3/4)+(t-s))/(a-s)*100}%`;return i.jsx("div",{style:{width:1060},children:i.jsxs(vu,{layout:"vertical",width:h,height:g,data:u,margin:C,barSize:20,children:[i.jsx(Hu,{type:"number",domain:[s,a],tick:!1,tickLine:!1,axisLine:{stroke:"#777",strokeWidth:1}}),i.jsx(Fu,{type:"category",tick:!1,axisLine:!1,width:0,height:10}),i.jsx("defs",{children:i.jsxs("linearGradient",{id:`gradient${r}`,x1:"0%",y1:"0%",x2:"100%",y2:"0%",gradientUnits:"userSpaceOnUse",children:[i.jsx("stop",{offset:T,stopColor:_}),i.jsx("stop",{offset:y,stopColor:A}),i.jsx("stop",{offset:p,stopColor:L}),i.jsx("stop",{offset:R,stopColor:v}),i.jsx("stop",{offset:I,stopColor:N}),i.jsx("stop",{offset:B,stopColor:U}),i.jsx("stop",{offset:j,stopColor:F}),i.jsx("stop",{offset:"100%",stopColor:P})]})}),i.jsx("rect",{x:C.left,y:C.top,width:H,height:20,fill:`url(#gradient${r})`,opacity:.15}),i.jsx(wu,{dataKey:"value",minPointSize:5,isAnimationActive:!1,fill:`url(#gradient${r})`}),i.jsx(rs,{x:o,stroke:"#fff",strokeWidth:4}),i.jsxs(rs,{x:a,stroke:d,strokeWidth:1,children:[i.jsx(Ra,{value:"200%",position:"bottom",fontSize:12,offset:M,fill:m}),i.jsx(Ra,{value:`${Gs(a)}`,position:"top",fontSize:12,offset:x,fill:m}),i.jsx(Ra,{value:"DMG",position:"top",fontSize:12,offset:M,fill:m})]}),i.jsxs(rs,{x:t,stroke:d,strokeWidth:1,children:[i.jsx(Ra,{value:`${Gs(t)}`,position:"top",fontSize:12,offset:x,fill:m}),i.jsx(Ra,{value:"DMG",position:"top",fontSize:12,offset:M,fill:m})]}),i.jsxs(rs,{x:s,stroke:d,strokeWidth:1,children:[i.jsx(Ra,{value:"0%",position:"bottom",fontSize:12,offset:M,fill:m}),i.jsx(Ra,{value:`${Gs(s)}`,position:"top",fontSize:12,offset:x,fill:m}),i.jsx(Ra,{value:"DMG",position:"top",fontSize:12,offset:M,fill:m})]}),l.map(([K,X])=>{const te=c(X);return i.jsx(rs,{x:te,stroke:d,strokeWidth:1,children:iR[K]?i.jsxs(i.Fragment,{children:[i.jsx(Ra,{value:K,position:"bottom",fontSize:12,offset:O+M,fill:m}),i.jsx(Ra,{value:`${X}%`,position:"bottom",fontSize:11,offset:O+x,fill:m})]}):i.jsxs(i.Fragment,{children:[i.jsx(Ra,{value:K,position:"bottom",fontSize:12,offset:M,fill:m}),i.jsx(Ra,{value:`${X}%`,position:"bottom",fontSize:11,offset:x,fill:m})]})},K)})]})})}const oR=429,L0=730;function rR(e){const{analysis:a}=e;return i.jsxs(D,{style:{borderRadius:5,width:L0,height:oR},gap:10,children:[i.jsx(fR,{analysis:a}),i.jsx(D,{style:{borderRadius:5,width:L0,overflow:"hidden",padding:10,background:"#243356",boxShadow:Ws},children:i.jsx(lR,{analysis:a})})]})}function lR(e){const a=e.analysis.oldX.toComputedStatsObject(),t=e.analysis.newX.toComputedStatsObject();return a[e.analysis.elementalDmgValue]=a.ELEMENTAL_DMG,t[e.analysis.elementalDmgValue]=t.ELEMENTAL_DMG,a.simScore=a.COMBO_DMG,t.simScore=t.COMBO_DMG,i.jsx(kn,{style:{width:"100%"},children:i.jsxs(D,{vertical:!0,gap:5,children:[i.jsx(pa,{oldStats:a,newStats:t,stat:"COMBO_DMG"}),i.jsx(pa,{oldStats:a,newStats:t,stat:n.HP}),i.jsx(pa,{oldStats:a,newStats:t,stat:n.ATK}),i.jsx(pa,{oldStats:a,newStats:t,stat:n.DEF}),i.jsx(pa,{oldStats:a,newStats:t,stat:n.SPD}),i.jsx(pa,{oldStats:a,newStats:t,stat:n.CR}),i.jsx(pa,{oldStats:a,newStats:t,stat:n.CD}),i.jsx(pa,{oldStats:a,newStats:t,stat:n.EHR}),i.jsx(pa,{oldStats:a,newStats:t,stat:n.RES}),i.jsx(pa,{oldStats:a,newStats:t,stat:n.BE}),i.jsx(pa,{oldStats:a,newStats:t,stat:n.OHB}),i.jsx(pa,{oldStats:a,newStats:t,stat:n.ERR}),i.jsx(pa,{oldStats:a,newStats:t,stat:e.analysis.elementalDmgValue})]})})}function pa(e){const{oldStats:a,newStats:t,stat:s}=e,o=b.precisionRound(a[s]),r=b.precisionRound(t[s]),{valueDisplay:l}=ic(r,r,s,!1);return i.jsxs(D,{gap:12,align:"center",children:[i.jsx("div",{style:{width:240},children:i.jsx(oa,{finalStats:a,stat:s=="COMBO_DMG"?"simScore":s,value:s=="COMBO_DMG"?o:void 0})}),i.jsx("span",{style:{marginLeft:15,marginRight:15,fontSize:14,lineHeight:"17px"},children:"➤"}),i.jsx(D,{style:{width:55},justify:"end",children:i.jsx(_m,{value:l,stat:s})}),i.jsx(dR,{oldValue:o,newValue:r,stat:s})]})}function _m(e){const{t:a}=ee("common"),{value:t,stat:s}=e;return s=="COMBO_DMG"?t+(e.comboDiff?"%":a("ThousandsSuffix")):J.isFlat(s)?t:t+"%"}const cR="#95ef90",uR="#ff97a9";function Am(e){return e?cR:uR}function xm(e){return e?"▲":"▼"}function dR(e){const{newValue:a,oldValue:t,stat:s}=e;if(Ar(a,t,s)==0)return i.jsx(i.Fragment,{});const o=a>t,r=o?Ar(a,t,s):Ar(t,a,s),l=xm(o),c=Am(o),{valueDisplay:u}=mR(r,r,s);return i.jsxs(D,{style:{color:c,width:90},gap:10,justify:"end",align:"center",children:[i.jsx(_m,{value:u,stat:s,comboDiff:!0}),i.jsx("span",{style:{fontSize:10,lineHeight:"17px"},children:l})]})}function mR(e,a,t){if(t=="COMBO_DMG"){const s=`${J.truncate10ths(J.precisionRound(a??0)).toFixed(1)}`,o=J.precisionRound(a).toFixed(3);return{valueDisplay:s,value1000thsPrecision:o}}return ic(e,a,t)}function Ar(e,a,t){return t==n.SPD?b.precisionRound(J.truncate10ths(e)-J.truncate10ths(a)):J.isFlat(t)?b.precisionRound(Math.floor(e)-Math.floor(a)):t=="COMBO_DMG"?b.precisionRound((e/a-1)*100):b.precisionRound(J.truncate1000ths(e)-J.truncate1000ths(a))}function fR(e){return i.jsx("div",{style:{overflow:"hidden",boxShadow:Ws,borderRadius:5,minWidth:233,height:"100%",background:"#243356"},children:i.jsx(Wd,{id:e.analysis.request.characterId,disableClick:!0,parentH:400})})}function hR(e){const{t:a}=ee("charactersTab",{keyPrefix:"CharacterPreview.SubstatUpgradeComparisons"}),{t}=ee(["common","charactersTab"]),{simScore:s}=e,r=s.mainUpgrades.map(c=>{const u=c.stat,d=c.part;return{key:d+u,stat:u,part:d,...Lm(s,c)}}).sort((c,u)=>u.scorePercentUpgrade-c.scorePercentUpgrade),l=[{title:a("MainStatUpgrade"),dataIndex:"stat",align:"center",width:200,rowScope:"row",render:(c,u)=>i.jsxs(D,{align:"center",gap:5,children:[i.jsx("img",{src:Q.getPart(u.part),style:{width:qe,height:qe,marginLeft:3,marginRight:3}}),i.jsx("span",{children:"➔"}),i.jsx("img",{src:Q.getStatIcon(c),style:{width:qe,height:qe}}),i.jsx("span",{children:`${t(`ShortReadableStats.${c}`)}`})]})},...Om(a)];return i.jsx(pi,{className:"remove-table-bottom-border",columns:l,dataSource:r,pagination:!1,size:"small",style:vm,locale:{emptyText:""}})}function Lm(e,a){const t=a.simulationResult.simScore-e.originalSimScore,s=Math.abs(t)<1?0:t,o=a.percent-e.percent;return{scorePercentUpgrade:(Math.abs(o)<1e-4?0:o)*100,scoreValueUpgrade:a.percent*100,damagePercentUpgrade:s/e.originalSimScore*100,damageValueUpgrade:s}}function Om(e){return[{title:e("DpsScorePercentUpgrade"),dataIndex:"scorePercentUpgrade",align:"center",render:a=>i.jsxs(D,{align:"center",justify:"center",gap:5,children:[i.jsx(O0,{up:a>=0}),` ${si(a)}%`]})},{title:e("ComboDmgPercentUpgrade"),dataIndex:"damagePercentUpgrade",align:"center",render:a=>i.jsxs(D,{align:"center",justify:"center",gap:5,children:[i.jsx(O0,{up:a>=0}),` ${si(a)}%`]})},{title:e("UpgradedDpsScore"),dataIndex:"scoreValueUpgrade",align:"center",render:a=>i.jsx(i.Fragment,{children:`${Ot(Math.max(0,a))}%`})},{title:e("ComboDmgUpgrade"),dataIndex:"damageValueUpgrade",align:"center",render:a=>i.jsx(i.Fragment,{children:Ot(a)})}]}const vm={width:"100%",border:"1px solid #354b7d",boxShadow:Vs,borderRadius:5,overflow:"hidden"};function O0(e){return i.jsx("span",{style:{color:Am(e.up),fontSize:10},children:xm(e.up)})}function SR(e){const{t:a}=ee("charactersTab",{keyPrefix:"CharacterPreview.SubstatUpgradeComparisons"}),{t}=ee("common",{keyPrefix:"ShortSpacedStats"}),{simScore:s}=e,r=s.substatUpgrades.map(c=>{const u=c.stat;return{key:u,stat:u,...Lm(s,c)}}),l=[{title:a("SubStatUpgrade"),dataIndex:"stat",align:"center",width:200,rowScope:"row",render:(c,u)=>i.jsxs(D,{children:[i.jsx("img",{src:Q.getStatIcon(c),style:{width:qe,height:qe,marginLeft:3,marginRight:3}}),i.jsx("span",{style:{marginRight:10},children:`+1x roll ${t(c)} `})]})},...Om(a)];return i.jsx(pi,{className:"remove-table-bottom-border",columns:l,dataSource:r,pagination:!1,size:"small",style:vm,locale:{emptyText:""}})}const pR=e=>{const{t:a,i18n:t}=ee(["charactersTab","common"]);if(!e.simScoringResult)return i.jsx(i.Fragment,{});const s=b.clone(e.simScoringResult),o=s.simulationForm.characterId,r=V.getMetadata().characters[o],l=Di[r.element];function c(T){return i.jsx(D,{vertical:!0,align:"center",gap:2,children:i.jsx("img",{src:Q.getSetImage(T.set),style:{height:60}})})}function u(T){var p;const y=((p=T.stat)==null?void 0:p.replace("Boost",""))||"";return i.jsxs(D,{align:"center",gap:10,children:[i.jsx("img",{src:Q.getPart(T.part),style:{height:30}}),i.jsx("pre",{style:{margin:0},children:y})]})}function d(T){const y=T.precision??1,p=T.number??0,R=p!=0;return i.jsxs(D,{gap:15,justify:"space-between",children:[i.jsx("pre",{style:{margin:0},children:T.label}),i.jsx("pre",{style:{margin:0,textAlign:"right"},children:R&&fr(p,y,T.useGrouping)})]})}function m(T){const y=T.precision??1,p=T.number??0,R=T.parens??0,I=p!=0,B=R!=0;return i.jsxs(D,{gap:5,justify:"space-between",children:[i.jsx("pre",{style:{margin:0},children:T.label}),i.jsxs("pre",{style:{margin:0,textAlign:"right"},children:[I&&fr(p,y),B&&i.jsx("span",{style:{margin:3},children:"-"}),B&&fr(R,1)]})]})}function h(T){const y=T.number??0;return i.jsxs(D,{gap:9,justify:"space-between",children:[i.jsx("pre",{style:{margin:0},children:T.label}),i.jsx("pre",{style:{margin:0,width:T.valueWidth},children:y})]})}function g(T){const y=T.text??"";return i.jsxs(D,{align:"center",gap:1,justify:"space-between",children:[i.jsx("pre",{style:{margin:0},children:T.label}),i.jsx("pre",{style:{margin:0,textAlign:"right"},children:y})]})}function C(T){const y=t.exists(`charactersTab:CharacterPreview.BuildAnalysis.Rotation.${T.comboAbilities[T.index]}`)?a(`CharacterPreview.BuildAnalysis.Rotation.${T.comboAbilities[T.index]}`):null;return y==null?i.jsx(i.Fragment,{}):i.jsx(D,{align:"center",gap:15,children:i.jsx("pre",{style:{margin:0},children:`#${T.index} - ${y}`})})}const M=b.clone(s.originalSimResult),x=b.clone(s.benchmarkSimResult),O=b.clone(s.maximumSimResult),H=M.ca,_=x.ca,A=O.ca,L=M.xa,v=x.xa,N=O.xa;H[Nt[l]]=H[S.ELEMENTAL_DMG],_[Nt[l]]=_[S.ELEMENTAL_DMG],A[Nt[l]]=A[S.ELEMENTAL_DMG],L[Nt[l]]=L[S.ELEMENTAL_DMG],v[Nt[l]]=v[S.ELEMENTAL_DMG],N[Nt[l]]=N[S.ELEMENTAL_DMG];const U=300,F=i.jsx(D,{vertical:!0,children:i.jsx(Ut,{type:"vertical",style:{flexGrow:1,margin:"10px 30px"}})});function P(T){const y=T.simulation.request,p=b.clone(T.simulation.result),R=Xu(p.ca),I=Yu(p.xa),B=T.type=="Character",j="rgb(225, 165, 100)";R[l]=R.ELEMENTAL_DMG,I[l]=I.ELEMENTAL_DMG;const Z={};if(T.type=="Benchmark")for(const[te,ae]of Object.entries(y.stats)){const Te=[y.simBody,y.simFeet,y.simPlanarSphere,y.simLinkRope,n.ATK,n.HP].filter(Ke=>Ke==te).length;te==n.SPD?Z[te]=ae-Lo(Te,ae):Z[te]=ae-bm(Te,ae)}const K=y.stats,X=T.precision;return i.jsxs(D,{vertical:!0,gap:25,style:{margin:"auto"},children:[i.jsx(D,{vertical:!0,gap:lt,children:i.jsx(D,{justify:"space-around",children:i.jsx("pre",{style:{fontSize:20,fontWeight:"bold",color:B?j:""},children:i.jsx("u",{children:a(`CharacterPreview.ScoringColumn.${T.type}.Header`,{score:J.truncate10ths(J.precisionRound(T.percent*100))})})})})}),i.jsxs(D,{vertical:!0,gap:lt,style:{width:U,margin:"auto"},children:[i.jsx("pre",{style:{margin:"auto",color:B?j:""},children:a(`CharacterPreview.ScoringColumn.${T.type}.BasicStats`)}),i.jsx(ml,{characterId:o,finalStats:R,elementalDmgValue:l,simScore:p.simScore,showAll:!0})]}),i.jsxs(D,{vertical:!0,gap:lt,style:{width:U,margin:"auto"},children:[i.jsx("pre",{style:{margin:"auto",color:B?j:""},children:i.jsxs(xt,{t:a,i18nKey:`CharacterPreview.ScoringColumn.${T.type}.CombatStats`,children:["build type ",i.jsx("u",{children:"combat stats"})]})}),i.jsx(ml,{characterId:o,finalStats:I,elementalDmgValue:l,simScore:p.simScore,showAll:!0})]}),i.jsxs(D,{vertical:!0,gap:lt,children:[i.jsx("pre",{style:{margin:"10px auto",color:B?j:""},children:a(`CharacterPreview.ScoringColumn.${T.type}.Substats`)}),i.jsxs(D,{justify:"space-between",children:[i.jsxs(D,{vertical:!0,gap:lt,style:{width:125,paddingLeft:5},children:[i.jsx(m,{label:a(`common:ShortStats.${n.ATK_P}`)+":",number:K[n.ATK_P],parens:Z[n.ATK_P],precision:X}),i.jsx(m,{label:a(`common:ShortStats.${n.ATK}`)+":",number:K[n.ATK],parens:Z[n.ATK],precision:X}),i.jsx(m,{label:a(`common:ShortStats.${n.HP_P}`)+":",number:K[n.HP_P],parens:Z[n.HP_P],precision:X}),i.jsx(m,{label:a(`common:ShortStats.${n.HP}`)+":",number:K[n.HP],parens:Z[n.HP],precision:X}),i.jsx(m,{label:a(`common:ShortStats.${n.DEF_P}`)+":",number:K[n.DEF_P],parens:Z[n.DEF_P],precision:X}),i.jsx(m,{label:a(`common:ShortStats.${n.DEF}`)+":",number:K[n.DEF],parens:Z[n.DEF],precision:X})]}),i.jsx(Ga,{}),i.jsxs(D,{vertical:!0,gap:lt,style:{width:125,paddingRight:5},children:[i.jsx(m,{label:a(`common:ShortStats.${n.SPD}`)+":",number:K[n.SPD],parens:Z[n.SPD],precision:2}),i.jsx(m,{label:a(`common:ShortStats.${n.CR}`)+":",number:K[n.CR],parens:Z[n.CR],precision:X}),i.jsx(m,{label:a(`common:ShortStats.${n.CD}`)+":",number:K[n.CD],parens:Z[n.CD],precision:X}),i.jsx(m,{label:a(`common:ShortStats.${n.EHR}`)+":",number:K[n.EHR],parens:Z[n.EHR],precision:X}),i.jsx(m,{label:a(`common:ShortStats.${n.RES}`)+":",number:K[n.RES],parens:Z[n.RES],precision:X}),i.jsx(m,{label:a(`common:ShortStats.${n.BE}`)+":",number:K[n.BE],parens:Z[n.BE],precision:X})]})]})]}),i.jsxs(D,{vertical:!0,gap:lt,children:[i.jsx("pre",{style:{margin:"0 auto",color:B?j:""},children:a(`CharacterPreview.ScoringColumn.${T.type}.Mainstats`)}),i.jsx(D,{gap:lt,justify:"space-around",children:i.jsxs(D,{vertical:!0,gap:10,children:[i.jsx(u,{stat:y.simBody!=="NONE"?a(`common:ReadableStats.${y.simBody}`):"",part:E.Body}),i.jsx(u,{stat:y.simFeet!=="NONE"?a(`common:ReadableStats.${y.simFeet}`):"",part:E.Feet}),i.jsx(u,{stat:y.simPlanarSphere!=="NONE"?a(`common:ReadableStats.${y.simPlanarSphere}`):"",part:E.PlanarSphere}),i.jsx(u,{stat:y.simLinkRope!=="NONE"?a(`common:ReadableStats.${y.simLinkRope}`):"",part:E.LinkRope})]})})]}),i.jsxs(D,{vertical:!0,gap:20,children:[i.jsx("pre",{style:{margin:"0 auto",color:B?j:""},children:a(`CharacterPreview.ScoringColumn.${T.type}.Abilities`)}),i.jsx(D,{gap:lt,justify:"space-around",children:i.jsxs(D,{vertical:!0,gap:10,style:{width:230},children:[i.jsx(d,{label:String(a("common:ShortDMGTypes.Basic"))+":",number:p.BASIC,precision:1}),i.jsx(d,{label:String(a("common:ShortDMGTypes.Skill"))+":",number:p.SKILL,precision:1}),i.jsx(d,{label:String(a("common:ShortDMGTypes.Ult"))+":",number:p.ULT,precision:1}),i.jsx(d,{label:String(a("common:ShortDMGTypes.Fua"))+":",number:p.FUA,precision:1}),i.jsx(d,{label:String(a("common:ShortDMGTypes.Memo_Skill"))+":",number:p.MEMO_SKILL,precision:1}),i.jsx(d,{label:String(a("common:ShortDMGTypes.Memo_Talent"))+":",number:p.MEMO_TALENT,precision:1}),i.jsx(d,{label:String(a("common:ShortDMGTypes.Dot"))+":",number:p.DOT,precision:1}),i.jsx(d,{label:String(a("common:ShortDMGTypes.Break"))+":",number:p.BREAK,precision:1})]})})]})]})}return i.jsxs(D,{vertical:!0,gap:15,align:"center",style:{width:1068},children:[i.jsxs(D,{align:"center",style:{marginTop:15},vertical:!0,gap:15,children:[i.jsx("pre",{style:{fontSize:28,fontWeight:"bold",margin:0},children:i.jsx(Zt,{text:a("CharacterPreview.BuildAnalysis.Header"),linkIcon:!0,url:"https://github.com/fribbels/hsr-optimizer/blob/main/docs/guides/en/dps-score.md"})}),i.jsx("pre",{style:{textAlign:"center",color:"rgb(225, 165, 100)",lineHeight:"24px",fontSize:14,textWrap:"wrap",margin:0},children:a("CharacterPreview.BuildAnalysis.ScoringNote")}),i.jsx(sR,{score:s.originalSimScore,minimum:s.baselineSimScore,maximum:s.maximumSimScore,benchmark:s.benchmarkSimScore})]}),i.jsxs(D,{gap:lt,vertical:!0,style:{width:"100%"},align:"center",children:[i.jsx("pre",{style:{fontSize:22,textDecoration:"underline"},children:a("CharacterPreview.SubstatUpgradeComparisons.Header")}),i.jsx(SR,{simScore:s})]}),i.jsxs(D,{gap:lt,vertical:!0,style:{width:"100%"},align:"center",children:[i.jsx("pre",{style:{fontSize:22,textDecoration:"underline"},children:a("CharacterPreview.SubstatUpgradeComparisons.MainStatHeader")}),i.jsx(hR,{simScore:s})]}),i.jsxs(D,{gap:25,style:{width:"100%",marginTop:30},justify:"space-around",children:[i.jsxs(D,{vertical:!0,gap:lt,children:[i.jsx("pre",{style:{margin:"5px auto"},children:a("CharacterPreview.BuildAnalysis.SimulationTeammates")}),i.jsxs(D,{gap:15,children:[i.jsx(xr,{result:s,index:0}),i.jsx(xr,{result:s,index:1}),i.jsx(xr,{result:s,index:2})]})]}),i.jsx(Ga,{}),i.jsxs(D,{vertical:!0,gap:lt,children:[i.jsx("pre",{style:{margin:"5px auto"},children:a("CharacterPreview.BuildAnalysis.SimulationSets")}),i.jsxs(D,{vertical:!0,gap:lt,children:[i.jsxs(D,{children:[i.jsx(c,{set:s.maximumSim.request.simRelicSet1}),i.jsx(c,{set:s.maximumSim.request.simRelicSet2})]}),i.jsx(c,{set:s.maximumSim.request.simOrnamentSet})]})]}),i.jsx(Ga,{}),i.jsxs(D,{vertical:!0,gap:lt,children:[i.jsx("pre",{style:{margin:"5px auto"},children:a("CharacterPreview.BuildAnalysis.Rotation.Header")}),i.jsxs(D,{gap:30,children:[i.jsxs(D,{vertical:!0,gap:2,children:[i.jsx(C,{comboAbilities:s.simulationMetadata.comboAbilities,index:1}),i.jsx(C,{comboAbilities:s.simulationMetadata.comboAbilities,index:2}),i.jsx(C,{comboAbilities:s.simulationMetadata.comboAbilities,index:3}),i.jsx(C,{comboAbilities:s.simulationMetadata.comboAbilities,index:4}),i.jsx(C,{comboAbilities:s.simulationMetadata.comboAbilities,index:5}),i.jsx(C,{comboAbilities:s.simulationMetadata.comboAbilities,index:6}),i.jsx(C,{comboAbilities:s.simulationMetadata.comboAbilities,index:7}),i.jsx(C,{comboAbilities:s.simulationMetadata.comboAbilities,index:8})]}),i.jsxs(D,{vertical:!0,gap:2,children:[i.jsx(h,{label:a("CharacterPreview.BuildAnalysis.Rotation.DOTS"),number:s.simulationMetadata.comboDot}),i.jsx(h,{label:a("CharacterPreview.BuildAnalysis.Rotation.BREAKS"),number:s.simulationMetadata.comboBreak})]})]})]}),i.jsx(Ga,{}),i.jsxs(D,{vertical:!0,gap:10,children:[i.jsx("pre",{style:{margin:"5px auto"},children:a("CharacterPreview.BuildAnalysis.CombatResults.Header")}),i.jsxs(D,{vertical:!0,gap:10,style:{width:255},children:[i.jsx(g,{label:a("CharacterPreview.BuildAnalysis.CombatResults.Primary"),text:a(`CharacterPreview.BuildAnalysis.CombatResults.Abilities.${s.characterMetadata.scoringMetadata.sortOption.key}`)}),i.jsx(d,{label:a("CharacterPreview.BuildAnalysis.CombatResults.Character"),number:s.originalSimScore,precision:1}),i.jsx(d,{label:a("CharacterPreview.BuildAnalysis.CombatResults.Baseline"),number:s.baselineSimScore,precision:1}),i.jsx(d,{label:a("CharacterPreview.BuildAnalysis.CombatResults.Benchmark"),number:s.benchmarkSimScore,precision:1}),i.jsx(d,{label:a("CharacterPreview.BuildAnalysis.CombatResults.Maximum"),number:s.maximumSimScore,precision:1}),i.jsx(d,{label:a("CharacterPreview.BuildAnalysis.CombatResults.Score"),number:s.percent*100,precision:2})]})]})]}),i.jsxs(D,{children:[i.jsx(P,{simulation:s.originalSim,percent:s.percent,precision:2,type:"Character"}),F,i.jsx(P,{simulation:s.benchmarkSim,percent:1,precision:0,type:"Benchmark"}),F,i.jsx(P,{simulation:s.maximumSim,percent:2,precision:0,type:"Perfect"})]}),i.jsxs(D,{vertical:!0,align:"center",style:{width:"100%"},children:[i.jsx("pre",{style:{fontSize:22,textDecoration:"underline"},children:s.simulationForm.deprioritizeBuffs?a("CharacterPreview.BuildAnalysis.CombatBuffs.SubDpsHeader"):a("CharacterPreview.BuildAnalysis.CombatBuffs.Header")}),i.jsx(ym,{result:s,size:Mm.LARGE})]})]})};function xr(e){const{t:a}=ee("common"),t=e.result.simulationMetadata.teammates[e.index],s=60;return i.jsxs(D,{vertical:!0,align:"center",gap:5,children:[i.jsx("img",{src:Q.getCharacterAvatarById(t.characterId),style:{height:s}}),i.jsx("pre",{style:{margin:0},children:a("EidolonNShort",{eidolon:t.characterEidolon})}),i.jsx("img",{src:Q.getLightConeIconById(t.lightCone),style:{height:s}}),i.jsx("pre",{style:{margin:0},children:a("SuperimpositionNShort",{superimposition:t.lightConeSuperimposition})})]})}function gR(e,a){const t=a.key;e[S.ELEMENTAL_DMG]+=e[S[`${t}_DMG_BOOST`]],t!=k.DOT.key&&(e[S[`${t}_CR_BOOST`]]&&(e[S.CR]+=e[S[`${t}_CR_BOOST`]]),e[S[`${t}_CD_BOOST`]]&&(e[S.CD]+=e[S[`${t}_CD_BOOST`]]))}const v0={[n.ATK_P]:!0,[n.DEF_P]:!0,[n.HP_P]:!0};function bR(e){const a=e.result,t=new Float32Array(a.originalSimResult.xa),s=a.characterMetadata.scoringMetadata.sortOption;gR(t,s);const{t:o}=ee("common"),{t:r}=ee("charactersTab"),l=window.store(C=>C.savedSession[$e.showcasePreciseSpd]),c=a.characterMetadata.scoringMetadata.simulation,u=Di[a.characterMetadata.element];let d=c.substats;d=Qg(d).filter(C=>!v0[C]),d.length<5&&d.push(n.SPD),d.sort((C,M)=>fa.indexOf(C)-fa.indexOf(M));const m=[...d,u],h=[];for(const C of m){if(v0[C])continue;const M=P0[C]?t[S.ELEMENTAL_DMG]:t[Nt[C]],x=J.isFlat(C),O=P0[C]?J.precisionRound(t[S.ELEMENTAL_DMG],2)!=J.precisionRound(a.originalSimResult.ca[S.ELEMENTAL_DMG],2):J.precisionRound(t[Nt[C]],2)!=J.precisionRound(a.originalSimResult.ca[Nt[C]],2);let H=Ln(Math.floor(M));C==n.SPD?H=l?Qn(b.precisionRound(M,4)):Ot(J.truncate10ths(b.precisionRound(M,4))):x||(H=Ot(J.truncate10ths(M*100)));const _=C.includes("DMG Boost")?o("DamagePercent"):o(`ReadableStats.${C}`);h.push(i.jsxs(D,{justify:"space-between",align:"center",style:{width:"100%"},children:[i.jsx("img",{src:Q.getStatIcon(C),style:{width:qe,height:qe,marginRight:3}}),i.jsxs(D,{gap:1,align:"center",children:[i.jsx(ei,{children:_}),O&&i.jsx(DR,{})]}),i.jsx(Ut,{style:{margin:"auto 10px",flexGrow:1,width:"unset",minWidth:"unset"},dashed:!0}),i.jsx(ei,{children:`${H}${x?"":"%"}`})]},J.randomId()))}const g=a.simulationForm.deprioritizeBuffs?r("CharacterPreview.DetailsSlider.Labels.SubDpsCombatStats"):r("CharacterPreview.DetailsSlider.Labels.CombatStats");return i.jsxs(D,{vertical:!0,gap:1,align:"center",style:{paddingLeft:4,paddingRight:6,marginBottom:1},children:[i.jsx(le,{style:{fontSize:16},children:g}),h]})}function DR(){return i.jsx(D,{align:"center",children:i.jsx(JT,{})})}function CR(e){const{t:a}=ee(["common","charactersTab"]),t=e.result,s=[],o=t.originalSimResult.simScore,r=t.percent,l=t.substatUpgrades.filter(m=>m.stat!=n.SPD);for(const m of l.slice(0,4)){const h=m.stat,g=m.simulationResult.simScore/o-1;s.push(i.jsxs(D,{justify:"space-between",align:"center",style:{width:"100%"},children:[i.jsx("img",{src:Q.getStatIcon(h),style:{width:qe,height:qe,marginRight:3}}),i.jsx(ei,{children:`+1x ${a(`ShortReadableStats.${h}`)}`}),i.jsx(Ut,{style:{margin:"auto 10px",flexGrow:1,width:"unset",minWidth:"unset"},dashed:!0}),i.jsx(ei,{children:`+ ${si(g*100)}%`})]},J.randomId()))}const c=[],u=t.mainUpgrades[0];if(u&&u.percent-r>0){const m=u.part,h=u.stat,g=u.simulationResult.simScore/o-1;c.push(i.jsxs(D,{gap:3,justify:"space-between",align:"center",style:{width:"100%",paddingLeft:1},children:[i.jsx("img",{src:Q.getPart(m),style:{width:qe,height:qe,marginRight:3}}),i.jsx(ei,{children:`➔ ${a(`ShortReadableStats.${h}`)}`}),i.jsx(Ut,{style:{margin:"auto 10px",flexGrow:1,width:"unset",minWidth:"unset"},dashed:!0}),i.jsx(ei,{children:`+ ${si(g*100)}%`})]},J.randomId()))}const d=t.setUpgrades[0];if(d.percent-r>0){const m=d.simulationResult.simScore/o-1;c.push(i.jsxs(D,{gap:2,justify:"space-between",align:"center",style:{width:"100%",paddingLeft:1},children:[i.jsx("img",{src:Q.getSetImage(d.simulation.request.simRelicSet1),style:{width:qe,height:qe,marginRight:3}}),i.jsx("img",{src:Q.getSetImage(d.simulation.request.simRelicSet2),style:{width:qe,height:qe,marginRight:5}}),i.jsx("img",{src:Q.getSetImage(d.simulation.request.simOrnamentSet),style:{width:qe,height:qe,marginRight:3}}),i.jsx(Ut,{style:{margin:"auto 10px",flexGrow:1,width:"unset",minWidth:"unset"},dashed:!0}),i.jsx(ei,{children:`+ ${si(m*100)}%`})]},J.randomId()))}return c.length&&(s.splice(4-c.length,c.length),c.map(m=>s.unshift(m))),i.jsxs(D,{vertical:!0,gap:1,align:"center",style:{paddingLeft:4,paddingRight:6,marginBottom:0},children:[i.jsx(D,{vertical:!0,align:"center",children:i.jsx(le,{style:{fontSize:16},children:a("charactersTab:CharacterPreview.DMGUpgrades")})}),s]})}function ER(e,a,t,s){return{LinkRope:xi(e.LinkRope,a.LinkRope,t,s),PlanarSphere:xi(e.PlanarSphere,a.PlanarSphere,t,s),Feet:xi(e.Feet,a.Feet,t,s),Body:xi(e.Body,a.Body,t,s),Hands:xi(e.Hands,a.Hands,t,s),Head:xi(e.Head,a.Head,t,s)}}function xi(e,a,t,s){if(!e)return;const o=Dt.scoreRelicPotential(e,s),r=TR(e,t);return{relic:e,estDays:a,estTbp:a*240,currentPotential:o.currentPct,rerollPotential:o.rerollAvgPct,rerollDelta:o.rerollAvgPct-o.currentPct,weights:t.stats,weightedRolls:r}}function TR(e,a){let t=0;for(const s of e.substats){const o=s.stat;if(!(s.rolls&&s.rolls.low!=null&&s.rolls.mid!=null&&s.rolls.high!=null)){const r=s.addedRolls+1,l=o==n.SPD?.3:Ht.getMaxedSubstatValue(o)/10,c=s.value,u=Ht.getMaxedSubstatValue(o,.8)*r,m=Math.max(0,c-u)/l,h=b.precisionRound(m,0),g=ec(r,h);s.rolls=g.rolls}t+=a.stats[o]*Hm(o)*(s.rolls.high+s.rolls.mid*.9+s.rolls.low*.8)}return t}function Hm(e){return e==n.HP||e==n.DEF||e==n.ATK?.4:1}function RR(e,a){return b.objectHash({relicsHash:Object.values(e).map(BR),characterId:a})}function BR(e){return e?b.objectHash({enhance:e.enhance,equippedBy:e.equippedBy,grade:e.grade,id:e.id,main:e.main,part:e.part,set:e.set,substats:e.substats}):"-"}const IR=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10",viewBox:"0 0 24 24",children:i.jsx("g",{transform:"translate(24 1) scale(-1 1)",children:i.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeWidth:"3",d:"M8 12L15 5M8 12L15 19"})})}),yR=e=>i.jsx(ri,{component:IR,...e}),hs=(e,a,t)=>{const{t:s}=ee("common");if(!(e!=null&&e.stat)||e.value==null)return i.jsx("img",{src:Q.getBlank(),style:{width:qe,height:qe,marginRight:2,marginLeft:-3}});let o;return a?o=$.renderMainStatNumber(e):o=$.renderSubstatNumber(e,t),o+=J.isFlat(e.stat)?"":"%",i.jsxs(D,{justify:"space-between",align:"center",children:[i.jsxs(D,{children:[i.jsx("img",{src:Q.getStatIcon(e.stat),style:{width:qe,height:qe,marginRight:2,marginLeft:-3}}),s(`ReadableStats.${e.stat}`)]}),a?i.jsx(i.Fragment,{children:o}):i.jsxs(D,{justify:"space-between",style:{width:"41.5%"},children:[i.jsx(D,{gap:0,align:"center",children:e.addedRolls!=null&&MR(e)}),o]})]})};function MR(e){const a=[];for(let t=0;t<e.addedRolls;t++)a.push(i.jsx(yR,{style:{marginRight:-5,opacity:.75}},t));return e.addedRolls==0&&a.push(i.jsx("div",{},0)),a}const{Text:GR}=_e,PR=zt(GR)`
    ${e=>_R(e.language)}
`;function _R(e){switch(e){case"fr_FR":case"pt_BR":case"vi_VN":return`
        white-space: nowrap;
        letter-spacing: -0.2px;
        font-size: 13px;
        line-height: 22px;
      `;default:return`
        white-space: nowrap;
        letter-spacing: -0.2px;
      `}}function H0(e,a,t,s){return e<a?e+(a-e)*s:e>t?e-(e-t)*s:e}function AR(e,a){const r=ea(e),l=r.get("hsl.s"),c=H0(l,.2,.3,.96),u=r.set("hsl.s",c),d=u.luminance(H0(u.luminance(),.025,.03,.93)).alpha(a?.7:.765);return er(d,a).css()}function er(e,a){return a?e.desaturate(.05).darken(.2):e}function xR(e,a){const t=ea(e).desaturate(.55).luminance(.125).brighten(.75).alpha(.8);return er(t,a).css()}function LR(e,a){const t=ea(e).desaturate(.2).luminance(.02);return er(t,a).css()}function OR(e,a){const t=ea(e).desaturate(.5).luminance(.2).alpha(.3);return er(t,a).css()}function vR(){return"#00000000"}function fl(){return"background-color 0.35s, box-shadow 0.25s, border-color 0.25s"}const Fm="#2241be";function HR(e){const a=Fm;return!e||e.length===0||e.map(Lr).every(s=>s>.4)?a:e.reduce((s,o,r)=>{const l=ea.deltaE(s,a),c=ea.deltaE(o,a),u=Lr(s),d=Lr(o),m=l*(1+u);return c*(1+d)<m?o:s})}function Lr(e){const[s,o,r]=ea(e).hsl(),l=Math.abs(s-37.5),c=1-Math.min(l/40,1),u=Math.max(0,o-.2);return .8*c+.2*u}function FR(e,a){const[t,,s]=ea(e).hsl(),[o,,r]=ea(a).hsl(),l=r-s;return l!==0?l:t-o}function wR(e,a){const t=e.sort(FR),s=[];for(let o=0;o<t.length;o+=a){const l=t.slice(o,o+a).sort((c,u)=>{const d=ea(c).hsl()[0],m=ea(u).hsl()[0];return d-m});s.push(...l)}return s}function F0(e){const a=[e.Vibrant,e.DarkVibrant,e.Muted,e.DarkMuted,e.LightVibrant,e.LightMuted,...e.colors].slice(0,64);return wR(a,8)}function kR(e){if(e==Fm)return e;const a=ea(e),t=a.get("hsv.v"),s=t+(1-t)*.45,o=a.get("hsv.s"),r=o-o*.15;return a.set("hsv.v",s).set("hsv.s",r).hex()}function ua(e){const{source:a,characterId:t,score:s,scoringType:o,setEditModalOpen:r,setAddModalOpen:l,setSelectedRelic:c,showcaseTheme:u,unhoverable:d}=e,h={...{enhance:0,part:void 0,set:void 0,grade:0,substats:[],main:void 0,equippedBy:void 0},...e.relic},g=h.set?Q.getSetImage(h.set,h.part):Q.getBlank(),C=h.equippedBy?Q.getCharacterAvatarById(h.equippedBy):Q.getBlank(),M=()=>{!h.id&&!t||a==vt.SHOWCASE_TAB||a==vt.BUILDS_MODAL||(h.id?(c(h),r==null||r(!0)):(console.log(`Add new relic for characterId=${t}.`),h.equippedBy=t,h.enhance=15,h.grade=5,c(h),l==null||l(!0)))},x=o==hn?6:0,O=o==hn?54:50,H=o==hn?"space-around":"space-between";return i.jsx(hi,{size:"small",hoverable:a!=vt.SHOWCASE_TAB&&a!=vt.BUILDS_MODAL&&!d,onClick:M,style:{width:200,minWidth:200,height:280,backgroundColor:u==null?void 0:u.cardBackgroundColor,borderColor:u==null?void 0:u.cardBorderColor,transition:fl(),borderRadius:6,boxShadow:a==null?void 0:ns+Sm},children:i.jsx(PR,{language:Y.resolvedLanguage,children:i.jsxs(D,{vertical:!0,justify:H,style:{height:255},children:[i.jsxs(D,{justify:"space-between",align:"center",children:[i.jsx("img",{style:{height:O,width:O},title:h.set,src:g}),i.jsxs(D,{align:"center",gap:8,children:[i.jsx("span",{children:$.renderGrade(h)}),i.jsx("span",{children:h.id!=null?`+${h.enhance}`:""})]}),i.jsx("img",{style:{height:O,width:O,borderRadius:O/2,border:h.equippedBy?"1px solid rgba(150, 150, 150, 0.25)":void 0,backgroundColor:h.equippedBy?"rgba(0, 0, 0, 0.1)":void 0},src:C})]}),i.jsx(Ut,{style:{margin:"6px 0px 6px 0px"}}),hs(h.main,!0,h),i.jsx(Ut,{style:{margin:"6px 0px 6px 0px"}}),i.jsxs(D,{vertical:!0,gap:x,children:[hs(h.substats[0],!1,h),hs(h.substats[1],!1,h),hs(h.substats[2],!1,h),hs(h.substats[3],!1,h)]}),o!=hn&&i.jsx(KR,{score:s})]})})})}function KR(e){var l,c;const{t:a}=ee("common"),{score:t}=e;let s=Q.getBlank(),o=!1;const r=t!==void 0;return r&&(((l=t==null?void 0:t.meta)==null?void 0:l.category)==fm.DEFAULT_NO_SPEED?s=Q.getScoreNoSpeed():s=Q.getScore(),(c=t==null?void 0:t.meta)!=null&&c.modified&&(o=!0)),i.jsxs(i.Fragment,{children:[i.jsx(Ut,{style:{margin:"6px 0px 6px 0px"}}),i.jsxs(D,{justify:"space-between",children:[i.jsxs(D,{children:[i.jsx("img",{src:s,style:{width:qe,height:qe,marginRight:2,marginLeft:-3}}),r?`${a("Score")}${o?" *":""}`:""]}),r?`${nD(Number(t.score))} (${t.rating})`:""]})]})}const wm="Y29uc3QgaD17QVRLX1A6IkFUSyUiLEFUSzoiQVRLIixCRToiQnJlYWsgRWZmZWN0IixDRDoiQ1JJVCBETUciLENSOiJDUklUIFJhdGUiLERFRl9QOiJERUYlIixERUY6IkRFRiIsRUhSOiJFZmZlY3QgSGl0IFJhdGUiLEVSUjoiRW5lcmd5IFJlZ2VuZXJhdGlvbiBSYXRlIixGaXJlX0RNRzoiRmlyZSBETUcgQm9vc3QiLEhQX1A6IkhQJSIsSFA6IkhQIixJY2VfRE1HOiJJY2UgRE1HIEJvb3N0IixJbWFnaW5hcnlfRE1HOiJJbWFnaW5hcnkgRE1HIEJvb3N0IixMaWdodG5pbmdfRE1HOiJMaWdodG5pbmcgRE1HIEJvb3N0IixPSEI6Ik91dGdvaW5nIEhlYWxpbmcgQm9vc3QiLFBoeXNpY2FsX0RNRzoiUGh5c2ljYWwgRE1HIEJvb3N0IixRdWFudHVtX0RNRzoiUXVhbnR1bSBETUcgQm9vc3QiLFJFUzoiRWZmZWN0IFJFUyIsU1BEX1A6IlNQRCUiLFNQRDoiU1BEIixXaW5kX0RNRzoiV2luZCBETUcgQm9vc3QifSxLdD1baC5IUF9QLGguQVRLX1AsaC5ERUZfUCxoLkhQLGguQVRLLGguU1BELGguQ1IsaC5DRCxoLkVIUixoLkJFLGguT0hCLGguRVJSLGguUGh5c2ljYWxfRE1HLGguRmlyZV9ETUcsaC5JY2VfRE1HLGguTGlnaHRuaW5nX0RNRyxoLldpbmRfRE1HLGguUXVhbnR1bV9ETUcsaC5JbWFnaW5hcnlfRE1HXSxfdD17W2guSFBfUF06ezU6e2Jhc2U6Ni45MTIsaW5jcmVtZW50OjIuNDE5Mn0sNDp7YmFzZTo1LjUyOTYsaW5jcmVtZW50OjEuOTM1NH0sMzp7YmFzZTo0LjE0NzIsaW5jcmVtZW50OjEuNDUxNX0sMjp7YmFzZToyLjc2NDgsaW5jcmVtZW50Oi45Njc3fX0sW2guQVRLX1BdOns1OntiYXNlOjYuOTEyLGluY3JlbWVudDoyLjQxOTJ9LDQ6e2Jhc2U6NS41Mjk2LGluY3JlbWVudDoxLjkzNTR9LDM6e2Jhc2U6NC4xNDcyLGluY3JlbWVudDoxLjQ1MTV9LDI6e2Jhc2U6Mi43NjQ4LGluY3JlbWVudDouOTY3N319LFtoLkRFRl9QXTp7NTp7YmFzZTo4LjY0LGluY3JlbWVudDozLjAyNH0sNDp7YmFzZTo2LjkxMixpbmNyZW1lbnQ6Mi40MTkyfSwzOntiYXNlOjUuMTg0LGluY3JlbWVudDoxLjgxNDR9LDI6e2Jhc2U6My40NTYsaW5jcmVtZW50OjEuMjA5Nn19LFtoLkhQXTp7NTp7YmFzZToxMTIuODk2LGluY3JlbWVudDozOS41MTM2fSw0OntiYXNlOjkwLjMxNjgsaW5jcmVtZW50OjMxLjYxMDg4fSwzOntiYXNlOjY3LjczNzYsaW5jcmVtZW50OjIzLjcwODE2fSwyOntiYXNlOjQ1LjE1ODQsaW5jcmVtZW50OjE1LjgwNTQ0fX0sW2guQVRLXTp7NTp7YmFzZTo1Ni40NDgsaW5jcmVtZW50OjE5Ljc1Njh9LDQ6e2Jhc2U6NDUuMTU4NCxpbmNyZW1lbnQ6MTUuODA1NDR9LDM6e2Jhc2U6MzMuODY4OCxpbmNyZW1lbnQ6MTEuODU0MDh9LDI6e2Jhc2U6MjIuNTc5MixpbmNyZW1lbnQ6Ny45MDI3Mn19LFtoLlNQRF06ezU6e2Jhc2U6NC4wMzIsaW5jcmVtZW50OjEuNH0sNDp7YmFzZTozLjIyNixpbmNyZW1lbnQ6MS4xfSwzOntiYXNlOjIuNDE5LGluY3JlbWVudDoxfSwyOntiYXNlOjEuNjEzLGluY3JlbWVudDoxfX0sW2guQ1JdOns1OntiYXNlOjUuMTg0LGluY3JlbWVudDoxLjgxNDR9LDQ6e2Jhc2U6NC4xNDcyLGluY3JlbWVudDoxLjQ1MTV9LDM6e2Jhc2U6My4xMTA0LGluY3JlbWVudDoxLjA4ODZ9LDI6e2Jhc2U6Mi4wNzM2LGluY3JlbWVudDouNzI1OH19LFtoLkNEXTp7NTp7YmFzZToxMC4zNjgsaW5jcmVtZW50OjMuNjI4OH0sNDp7YmFzZTo4LjI5NDQsaW5jcmVtZW50OjIuOTAzfSwzOntiYXNlOjYuMjIwOCxpbmNyZW1lbnQ6Mi4xNzczfSwyOntiYXNlOjQuMTQ3MixpbmNyZW1lbnQ6MS40NTE1fX0sW2guRUhSXTp7NTp7YmFzZTo2LjkxMixpbmNyZW1lbnQ6Mi40MTkyfSw0OntiYXNlOjUuNTI5NixpbmNyZW1lbnQ6MS45MzU0fSwzOntiYXNlOjQuMTQ3MixpbmNyZW1lbnQ6MS40NTE1fSwyOntiYXNlOjIuNzY0OCxpbmNyZW1lbnQ6Ljk2Nzd9fSxbaC5CRV06ezU6e2Jhc2U6MTAuMzY4LGluY3JlbWVudDozLjYyODh9LDQ6e2Jhc2U6OC4yOTQ0LGluY3JlbWVudDoyLjkwM30sMzp7YmFzZTo2LjIyMDgsaW5jcmVtZW50OjIuMTc3M30sMjp7YmFzZTo0LjE0NzIsaW5jcmVtZW50OjEuNDUxNX19LFtoLkVSUl06ezU6e2Jhc2U6My4xMTA0LGluY3JlbWVudDoxLjA4ODZ9LDQ6e2Jhc2U6Mi40ODgzLGluY3JlbWVudDouODcwOX0sMzp7YmFzZToxLjg2NjIsaW5jcmVtZW50Oi42NTMyfSwyOntiYXNlOjEuMjQ0MixpbmNyZW1lbnQ6LjQzNTV9fSxbaC5PSEJdOns1OntiYXNlOjUuNTI5NixpbmNyZW1lbnQ6MS45MzU0fSw0OntiYXNlOjQuNDIzNyxpbmNyZW1lbnQ6MS41NDgzfSwzOntiYXNlOjMuMzE3OCxpbmNyZW1lbnQ6MS4xNjEyfSwyOntiYXNlOjIuMjExOCxpbmNyZW1lbnQ6Ljc3NDF9fSxbaC5QaHlzaWNhbF9ETUddOns1OntiYXNlOjYuMjIwOCxpbmNyZW1lbnQ6Mi4xNzczfSw0OntiYXNlOjQuOTc2NixpbmNyZW1lbnQ6MS43NDE4fSwzOntiYXNlOjMuNzMyNSxpbmNyZW1lbnQ6MS4zMDY0fSwyOntiYXNlOjIuNDg4MyxpbmNyZW1lbnQ6Ljg3MDl9fSxbaC5GaXJlX0RNR106ezU6e2Jhc2U6Ni4yMjA4LGluY3JlbWVudDoyLjE3NzN9LDQ6e2Jhc2U6NC45NzY2LGluY3JlbWVudDoxLjc0MTh9LDM6e2Jhc2U6My43MzI1LGluY3JlbWVudDoxLjMwNjR9LDI6e2Jhc2U6Mi40ODgzLGluY3JlbWVudDouODcwOX19LFtoLkljZV9ETUddOns1OntiYXNlOjYuMjIwOCxpbmNyZW1lbnQ6Mi4xNzczfSw0OntiYXNlOjQuOTc2NixpbmNyZW1lbnQ6MS43NDE4fSwzOntiYXNlOjMuNzMyNSxpbmNyZW1lbnQ6MS4zMDY0fSwyOntiYXNlOjIuNDg4MyxpbmNyZW1lbnQ6Ljg3MDl9fSxbaC5MaWdodG5pbmdfRE1HXTp7NTp7YmFzZTo2LjIyMDgsaW5jcmVtZW50OjIuMTc3M30sNDp7YmFzZTo0Ljk3NjYsaW5jcmVtZW50OjEuNzQxOH0sMzp7YmFzZTozLjczMjUsaW5jcmVtZW50OjEuMzA2NH0sMjp7YmFzZToyLjQ4ODMsaW5jcmVtZW50Oi44NzA5fX0sW2guV2luZF9ETUddOns1OntiYXNlOjYuMjIwOCxpbmNyZW1lbnQ6Mi4xNzczfSw0OntiYXNlOjQuOTc2NixpbmNyZW1lbnQ6MS43NDE4fSwzOntiYXNlOjMuNzMyNSxpbmNyZW1lbnQ6MS4zMDY0fSwyOntiYXNlOjIuNDg4MyxpbmNyZW1lbnQ6Ljg3MDl9fSxbaC5RdWFudHVtX0RNR106ezU6e2Jhc2U6Ni4yMjA4LGluY3JlbWVudDoyLjE3NzN9LDQ6e2Jhc2U6NC45NzY2LGluY3JlbWVudDoxLjc0MTh9LDM6e2Jhc2U6My43MzI1LGluY3JlbWVudDoxLjMwNjR9LDI6e2Jhc2U6Mi40ODgzLGluY3JlbWVudDouODcwOX19LFtoLkltYWdpbmFyeV9ETUddOns1OntiYXNlOjYuMjIwOCxpbmNyZW1lbnQ6Mi4xNzczfSw0OntiYXNlOjQuOTc2NixpbmNyZW1lbnQ6MS43NDE4fSwzOntiYXNlOjMuNzMyNSxpbmNyZW1lbnQ6MS4zMDY0fSwyOntiYXNlOjIuNDg4MyxpbmNyZW1lbnQ6Ljg3MDl9fX0sU3Q9W2guSFBfUCxoLkFUS19QLGguREVGX1AsaC5IUCxoLkFUSyxoLkRFRixoLlNQRCxoLkNSLGguQ0QsaC5FSFIsaC5SRVMsaC5CRV0sVnQ9e1toLkhQX1BdOiJIUCAlIixbaC5BVEtfUF06IkFUSyAlIixbaC5ERUZfUF06IkRFRiAlIixbaC5TUERfUF06IlNQRCAlIixbaC5IUF06IkhQIixbaC5BVEtdOiJBVEsiLFtoLkRFRl06IkRFRiIsW2guU1BEXToiU1BEIixbaC5DUl06IkNSSVQgUmF0ZSIsW2guQ0RdOiJDUklUIERNRyIsW2guRUhSXToiRWZmZWN0IEhJVCIsW2guUkVTXToiRWZmZWN0IFJFUyIsW2guQkVdOiJCcmVhayBFZmZlY3QiLFtoLkVSUl06IkVuZXJneSBSZWdlbiIsW2guT0hCXToiSGVhbGluZyBCb29zdCIsW2guUGh5c2ljYWxfRE1HXToiUGh5c2ljYWwgRE1HIixbaC5GaXJlX0RNR106IkZpcmUgRE1HIixbaC5JY2VfRE1HXToiSWNlIERNRyIsW2guTGlnaHRuaW5nX0RNR106IkxpZ2h0bmluZyBETUciLFtoLldpbmRfRE1HXToiV2luZCBETUciLFtoLlF1YW50dW1fRE1HXToiUXVhbnR1bSBETUciLFtoLkltYWdpbmFyeV9ETUddOiJJbWFnaW5hcnkgRE1HIn0sRj17SGVhZDoiSGVhZCIsSGFuZHM6IkhhbmRzIixCb2R5OiJCb2R5IixGZWV0OiJGZWV0IixQbGFuYXJTcGhlcmU6IlBsYW5hclNwaGVyZSIsTGlua1JvcGU6IkxpbmtSb3BlIn0sV3Q9e1tGLkhlYWRdOiJIZWFkIixbRi5IYW5kc106IkhhbmRzIixbRi5Cb2R5XToiQm9keSIsW0YuRmVldF06IkZlZXQiLFtGLlBsYW5hclNwaGVyZV06IlNwaGVyZSIsW0YuTGlua1JvcGVdOiJSb3BlIn0sSnQ9e1tGLkhlYWRdOltoLkhQXSxbRi5IYW5kc106W2guQVRLXSxbRi5Cb2R5XTpbaC5IUF9QLGguQVRLX1AsaC5ERUZfUCxoLkNSLGguQ0QsaC5PSEIsaC5FSFJdLFtGLkZlZXRdOltoLkhQX1AsaC5BVEtfUCxoLkRFRl9QLGguU1BEXSxbRi5QbGFuYXJTcGhlcmVdOltoLkhQX1AsaC5BVEtfUCxoLkRFRl9QLGguUGh5c2ljYWxfRE1HLGguRmlyZV9ETUcsaC5JY2VfRE1HLGguTGlnaHRuaW5nX0RNRyxoLldpbmRfRE1HLGguUXVhbnR1bV9ETUcsaC5JbWFnaW5hcnlfRE1HXSxbRi5MaW5rUm9wZV06W2guSFBfUCxoLkFUS19QLGguREVGX1AsaC5CRSxoLkVSUl19LHBlPXtQYXNzZXJieU9mV2FuZGVyaW5nQ2xvdWQ6IlBhc3NlcmJ5IG9mIFdhbmRlcmluZyBDbG91ZCIsTXVza2V0ZWVyT2ZXaWxkV2hlYXQ6Ik11c2tldGVlciBvZiBXaWxkIFdoZWF0IixLbmlnaHRPZlB1cml0eVBhbGFjZToiS25pZ2h0IG9mIFB1cml0eSBQYWxhY2UiLEh1bnRlck9mR2xhY2lhbEZvcmVzdDoiSHVudGVyIG9mIEdsYWNpYWwgRm9yZXN0IixDaGFtcGlvbk9mU3RyZWV0d2lzZUJveGluZzoiQ2hhbXBpb24gb2YgU3RyZWV0d2lzZSBCb3hpbmciLEd1YXJkT2ZXdXRoZXJpbmdTbm93OiJHdWFyZCBvZiBXdXRoZXJpbmcgU25vdyIsRmlyZXNtaXRoT2ZMYXZhRm9yZ2luZzoiRmlyZXNtaXRoIG9mIExhdmEtRm9yZ2luZyIsR2VuaXVzT2ZCcmlsbGlhbnRTdGFyczoiR2VuaXVzIG9mIEJyaWxsaWFudCBTdGFycyIsQmFuZE9mU2l6emxpbmdUaHVuZGVyOiJCYW5kIG9mIFNpenpsaW5nIFRodW5kZXIiLEVhZ2xlT2ZUd2lsaWdodExpbmU6IkVhZ2xlIG9mIFR3aWxpZ2h0IExpbmUiLFRoaWVmT2ZTaG9vdGluZ01ldGVvcjoiVGhpZWYgb2YgU2hvb3RpbmcgTWV0ZW9yIixXYXN0ZWxhbmRlck9mQmFuZGl0cnlEZXNlcnQ6Ildhc3RlbGFuZGVyIG9mIEJhbmRpdHJ5IERlc2VydCIsTG9uZ2V2b3VzRGlzY2lwbGU6Ikxvbmdldm91cyBEaXNjaXBsZSIsTWVzc2VuZ2VyVHJhdmVyc2luZ0hhY2tlcnNwYWNlOiJNZXNzZW5nZXIgVHJhdmVyc2luZyBIYWNrZXJzcGFjZSIsVGhlQXNoYmxhemluZ0dyYW5kRHVrZToiVGhlIEFzaGJsYXppbmcgR3JhbmQgRHVrZSIsUHJpc29uZXJJbkRlZXBDb25maW5lbWVudDoiUHJpc29uZXIgaW4gRGVlcCBDb25maW5lbWVudCIsUGlvbmVlckRpdmVyT2ZEZWFkV2F0ZXJzOiJQaW9uZWVyIERpdmVyIG9mIERlYWQgV2F0ZXJzIixXYXRjaG1ha2VyTWFzdGVyT2ZEcmVhbU1hY2hpbmF0aW9uczoiV2F0Y2htYWtlciwgTWFzdGVyIG9mIERyZWFtIE1hY2hpbmF0aW9ucyIsSXJvbkNhdmFscnlBZ2FpbnN0VGhlU2NvdXJnZToiSXJvbiBDYXZhbHJ5IEFnYWluc3QgdGhlIFNjb3VyZ2UiLFRoZVdpbmRTb2FyaW5nVmFsb3JvdXM6IlRoZSBXaW5kLVNvYXJpbmcgVmFsb3JvdXMiLFNhY2VyZG9zUmVsaXZlZE9yZGVhbDoiU2FjZXJkb3MnIFJlbGl2ZWQgT3JkZWFsIixTY2hvbGFyTG9zdEluRXJ1ZGl0aW9uOiJTY2hvbGFyIExvc3QgaW4gRXJ1ZGl0aW9uIixIZXJvT2ZUcml1bXBoYW50U29uZzoiSGVybyBvZiBUcml1bXBoYW50IFNvbmciLFBvZXRPZk1vdXJuaW5nQ29sbGFwc2U6IlBvZXQgb2YgTW91cm5pbmcgQ29sbGFwc2UifSxnZT17U3BhY2VTZWFsaW5nU3RhdGlvbjoiU3BhY2UgU2VhbGluZyBTdGF0aW9uIixGbGVldE9mVGhlQWdlbGVzczoiRmxlZXQgb2YgdGhlIEFnZWxlc3MiLFBhbkNvc21pY0NvbW1lcmNpYWxFbnRlcnByaXNlOiJQYW4tQ29zbWljIENvbW1lcmNpYWwgRW50ZXJwcmlzZSIsQmVsb2JvZ09mVGhlQXJjaGl0ZWN0czoiQmVsb2JvZyBvZiB0aGUgQXJjaGl0ZWN0cyIsQ2VsZXN0aWFsRGlmZmVyZW50aWF0b3I6IkNlbGVzdGlhbCBEaWZmZXJlbnRpYXRvciIsSW5lcnRTYWxzb3R0bzoiSW5lcnQgU2Fsc290dG8iLFRhbGlhS2luZ2RvbU9mQmFuZGl0cnk6IlRhbGlhOiBLaW5nZG9tIG9mIEJhbmRpdHJ5IixTcHJpZ2h0bHlWb253YWNxOiJTcHJpZ2h0bHkgVm9ud2FjcSIsUnV0aWxhbnRBcmVuYToiUnV0aWxhbnQgQXJlbmEiLEJyb2tlbktlZWw6IkJyb2tlbiBLZWVsIixGaXJtYW1lbnRGcm9udGxpbmVHbGFtb3RoOiJGaXJtYW1lbnQgRnJvbnRsaW5lOiBHbGFtb3RoIixQZW5hY29ueUxhbmRPZlRoZURyZWFtczoiUGVuYWNvbnksIExhbmQgb2YgdGhlIERyZWFtcyIsU2lnb25pYVRoZVVuY2xhaW1lZERlc29sYXRpb246IlNpZ29uaWEsIHRoZSBVbmNsYWltZWQgRGVzb2xhdGlvbiIsSXp1bW9HZW5zZWlBbmRUYWthbWFEaXZpbmVSZWFsbToiSXp1bW8gR2Vuc2VpIGFuZCBUYWthbWEgRGl2aW5lIFJlYWxtIixEdXJhbkR5bmFzdHlPZlJ1bm5pbmdXb2x2ZXM6IkR1cmFuLCBEeW5hc3R5IG9mIFJ1bm5pbmcgV29sdmVzIixGb3JnZU9mVGhlS2FscGFnbmlMYW50ZXJuOiJGb3JnZSBvZiB0aGUgS2FscGFnbmkgTGFudGVybiIsTHVzaGFrYVRoZVN1bmtlblNlYXM6Ikx1c2hha2EsIHRoZSBTdW5rZW4gU2VhcyIsVGhlV29uZHJvdXNCYW5hbkFtdXNlbWVudFBhcms6IlRoZSBXb25kcm91cyBCYW5hbkFtdXNlbWVudCBQYXJrIixCb25lQ29sbGVjdGlvbnNTZXJlbmVEZW1lc25lOiJCb25lIENvbGxlY3Rpb24ncyBTZXJlbmUgRGVtZXNuZSIsR2lhbnRUcmVlT2ZSYXB0QnJvb2Rpbmc6IkdpYW50IFRyZWUgb2YgUmFwdCBCcm9vZGluZyJ9LHp0PXsuLi5wZSwuLi5nZX0sRWU9T2JqZWN0LnZhbHVlcyhwZSksRGU9T2JqZWN0LnZhbHVlcyhnZSksUHQ9e307Zm9yKGxldCBuPTA7bjxEZS5sZW5ndGg7bisrKVB0W0RlW25dXT1uO2NvbnN0IHh0PXt9O2ZvcihsZXQgbj0wO248RWUubGVuZ3RoO24rKyl4dFtFZVtuXV09bjtPYmplY3QudmFsdWVzKHBlKS5sZW5ndGg7T2JqZWN0LnZhbHVlcyhnZSkubGVuZ3RoO2NvbnN0IE5lPXtTZXRzOnp0LFBhcnRzOkYsU3RhdHM6aCxNYWluU3RhdHM6S3QsTWFpblN0YXRzVmFsdWVzOl90LFN1YlN0YXRzOlN0LFNldHNPcm5hbWVudHM6Z2UsU2V0c1JlbGljczpwZSxTZXRzUmVsaWNzTmFtZXM6RWUsU2V0c09ybmFtZW50c05hbWVzOkRlLFN0YXRzVG9SZWFkYWJsZTpWdCxQYXJ0c1RvUmVhZGFibGU6V3QsUGFydHNNYWluU3RhdHM6SnQsUmVsaWNTZXRUb0luZGV4Onh0LE9ybmFtZW50U2V0VG9JbmRleDpQdCxNQVhfSU5UOjIxNDc0ODM2NDcsVEhSRUFEX0JVRkZFUl9MRU5HVEg6MTVlNH0sUXQ9e3R5cGU6ImxvZ2dlciIsbG9nKG4pe3RoaXMub3V0cHV0KCJsb2ciLG4pfSx3YXJuKG4pe3RoaXMub3V0cHV0KCJ3YXJuIixuKX0sZXJyb3Iobil7dGhpcy5vdXRwdXQoImVycm9yIixuKX0sb3V0cHV0KG4sZSl7Y29uc29sZSYmY29uc29sZVtuXSYmY29uc29sZVtuXS5hcHBseShjb25zb2xlLGUpfX07Y2xhc3MgYWV7Y29uc3RydWN0b3IoZSl7bGV0IHQ9YXJndW1lbnRzLmxlbmd0aD4xJiZhcmd1bWVudHNbMV0hPT12b2lkIDA/YXJndW1lbnRzWzFdOnt9O3RoaXMuaW5pdChlLHQpfWluaXQoZSl7bGV0IHQ9YXJndW1lbnRzLmxlbmd0aD4xJiZhcmd1bWVudHNbMV0hPT12b2lkIDA/YXJndW1lbnRzWzFdOnt9O3RoaXMucHJlZml4PXQucHJlZml4fHwiaTE4bmV4dDoiLHRoaXMubG9nZ2VyPWV8fFF0LHRoaXMub3B0aW9ucz10LHRoaXMuZGVidWc9dC5kZWJ1Z31sb2coKXtmb3IodmFyIGU9YXJndW1lbnRzLmxlbmd0aCx0PW5ldyBBcnJheShlKSxyPTA7cjxlO3IrKyl0W3JdPWFyZ3VtZW50c1tyXTtyZXR1cm4gdGhpcy5mb3J3YXJkKHQsImxvZyIsIiIsITApfXdhcm4oKXtmb3IodmFyIGU9YXJndW1lbnRzLmxlbmd0aCx0PW5ldyBBcnJheShlKSxyPTA7cjxlO3IrKyl0W3JdPWFyZ3VtZW50c1tyXTtyZXR1cm4gdGhpcy5mb3J3YXJkKHQsIndhcm4iLCIiLCEwKX1lcnJvcigpe2Zvcih2YXIgZT1hcmd1bWVudHMubGVuZ3RoLHQ9bmV3IEFycmF5KGUpLHI9MDtyPGU7cisrKXRbcl09YXJndW1lbnRzW3JdO3JldHVybiB0aGlzLmZvcndhcmQodCwiZXJyb3IiLCIiKX1kZXByZWNhdGUoKXtmb3IodmFyIGU9YXJndW1lbnRzLmxlbmd0aCx0PW5ldyBBcnJheShlKSxyPTA7cjxlO3IrKyl0W3JdPWFyZ3VtZW50c1tyXTtyZXR1cm4gdGhpcy5mb3J3YXJkKHQsIndhcm4iLCJXQVJOSU5HIERFUFJFQ0FURUQ6ICIsITApfWZvcndhcmQoZSx0LHIsaSl7cmV0dXJuIGkmJiF0aGlzLmRlYnVnP251bGw6KHR5cGVvZiBlWzBdPT0ic3RyaW5nIiYmKGVbMF09YCR7cn0ke3RoaXMucHJlZml4fSAke2VbMF19YCksdGhpcy5sb2dnZXJbdF0oZSkpfWNyZWF0ZShlKXtyZXR1cm4gbmV3IGFlKHRoaXMubG9nZ2VyLHtwcmVmaXg6YCR7dGhpcy5wcmVmaXh9OiR7ZX06YCwuLi50aGlzLm9wdGlvbnN9KX1jbG9uZShlKXtyZXR1cm4gZT1lfHx0aGlzLm9wdGlvbnMsZS5wcmVmaXg9ZS5wcmVmaXh8fHRoaXMucHJlZml4LG5ldyBhZSh0aGlzLmxvZ2dlcixlKX19dmFyIEM9bmV3IGFlO2NsYXNzIGhle2NvbnN0cnVjdG9yKCl7dGhpcy5vYnNlcnZlcnM9e319b24oZSx0KXtyZXR1cm4gZS5zcGxpdCgiICIpLmZvckVhY2gocj0+e3RoaXMub2JzZXJ2ZXJzW3JdfHwodGhpcy5vYnNlcnZlcnNbcl09bmV3IE1hcCk7Y29uc3QgaT10aGlzLm9ic2VydmVyc1tyXS5nZXQodCl8fDA7dGhpcy5vYnNlcnZlcnNbcl0uc2V0KHQsaSsxKX0pLHRoaXN9b2ZmKGUsdCl7aWYodGhpcy5vYnNlcnZlcnNbZV0pe2lmKCF0KXtkZWxldGUgdGhpcy5vYnNlcnZlcnNbZV07cmV0dXJufXRoaXMub2JzZXJ2ZXJzW2VdLmRlbGV0ZSh0KX19ZW1pdChlKXtmb3IodmFyIHQ9YXJndW1lbnRzLmxlbmd0aCxyPW5ldyBBcnJheSh0PjE/dC0xOjApLGk9MTtpPHQ7aSsrKXJbaS0xXT1hcmd1bWVudHNbaV07dGhpcy5vYnNlcnZlcnNbZV0mJkFycmF5LmZyb20odGhpcy5vYnNlcnZlcnNbZV0uZW50cmllcygpKS5mb3JFYWNoKGE9PntsZXRbbyxsXT1hO2ZvcihsZXQgZj0wO2Y8bDtmKyspbyguLi5yKX0pLHRoaXMub2JzZXJ2ZXJzWyIqIl0mJkFycmF5LmZyb20odGhpcy5vYnNlcnZlcnNbIioiXS5lbnRyaWVzKCkpLmZvckVhY2goYT0+e2xldFtvLGxdPWE7Zm9yKGxldCBmPTA7ZjxsO2YrKylvLmFwcGx5KG8sW2UsLi4ucl0pfSl9fWNvbnN0IEo9KCk9PntsZXQgbixlO2NvbnN0IHQ9bmV3IFByb21pc2UoKHIsaSk9PntuPXIsZT1pfSk7cmV0dXJuIHQucmVzb2x2ZT1uLHQucmVqZWN0PWUsdH0sTWU9bj0+bj09bnVsbD8iIjoiIituLHF0PShuLGUsdCk9PntuLmZvckVhY2gocj0+e2Vbcl0mJih0W3JdPWVbcl0pfSl9LFl0PS8jIyMvZyxqZT1uPT5uJiZuLmluZGV4T2YoIiMjIyIpPi0xP24ucmVwbGFjZShZdCwiLiIpOm4sQmU9bj0+IW58fHR5cGVvZiBuPT0ic3RyaW5nIix6PShuLGUsdCk9Pntjb25zdCByPXR5cGVvZiBlIT0ic3RyaW5nIj9lOmUuc3BsaXQoIi4iKTtsZXQgaT0wO2Zvcig7aTxyLmxlbmd0aC0xOyl7aWYoQmUobikpcmV0dXJue307Y29uc3Qgcz1qZShyW2ldKTshbltzXSYmdCYmKG5bc109bmV3IHQpLE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChuLHMpP249bltzXTpuPXt9LCsraX1yZXR1cm4gQmUobik/e306e29iajpuLGs6amUocltpXSl9fSxVZT0obixlLHQpPT57Y29uc3R7b2JqOnIsazppfT16KG4sZSxPYmplY3QpO2lmKHIhPT12b2lkIDB8fGUubGVuZ3RoPT09MSl7cltpXT10O3JldHVybn1sZXQgcz1lW2UubGVuZ3RoLTFdLGE9ZS5zbGljZSgwLGUubGVuZ3RoLTEpLG89eihuLGEsT2JqZWN0KTtmb3IoO28ub2JqPT09dm9pZCAwJiZhLmxlbmd0aDspcz1gJHthW2EubGVuZ3RoLTFdfS4ke3N9YCxhPWEuc2xpY2UoMCxhLmxlbmd0aC0xKSxvPXoobixhLE9iamVjdCksbyYmby5vYmomJnR5cGVvZiBvLm9ialtgJHtvLmt9LiR7c31gXTwidSImJihvLm9iaj12b2lkIDApO28ub2JqW2Ake28ua30uJHtzfWBdPXR9LFp0PShuLGUsdCxyKT0+e2NvbnN0e29iajppLGs6c309eihuLGUsT2JqZWN0KTtpW3NdPWlbc118fFtdLGlbc10ucHVzaCh0KX0sb2U9KG4sZSk9Pntjb25zdHtvYmo6dCxrOnJ9PXoobixlKTtpZih0KXJldHVybiB0W3JdfSxYdD0obixlLHQpPT57Y29uc3Qgcj1vZShuLHQpO3JldHVybiByIT09dm9pZCAwP3I6b2UoZSx0KX0sT3Q9KG4sZSx0KT0+e2Zvcihjb25zdCByIGluIGUpciE9PSJfX3Byb3RvX18iJiZyIT09ImNvbnN0cnVjdG9yIiYmKHIgaW4gbj90eXBlb2YgbltyXT09InN0cmluZyJ8fG5bcl1pbnN0YW5jZW9mIFN0cmluZ3x8dHlwZW9mIGVbcl09PSJzdHJpbmcifHxlW3JdaW5zdGFuY2VvZiBTdHJpbmc/dCYmKG5bcl09ZVtyXSk6T3QobltyXSxlW3JdLHQpOm5bcl09ZVtyXSk7cmV0dXJuIG59LE49bj0+bi5yZXBsYWNlKC9bXC1cW1xdXC9ce1x9XChcKVwqXCtcP1wuXFxcXlwkXHxdL2csIlxcJCYiKTt2YXIgZXI9eyImIjoiJmFtcDsiLCI8IjoiJmx0OyIsIj4iOiImZ3Q7IiwnIic6IiZxdW90OyIsIiciOiImIzM5OyIsIi8iOiImI3gyRjsifTtjb25zdCB0cj1uPT50eXBlb2Ygbj09InN0cmluZyI/bi5yZXBsYWNlKC9bJjw+IidcL10vZyxlPT5lcltlXSk6bjtjbGFzcyBycntjb25zdHJ1Y3RvcihlKXt0aGlzLmNhcGFjaXR5PWUsdGhpcy5yZWdFeHBNYXA9bmV3IE1hcCx0aGlzLnJlZ0V4cFF1ZXVlPVtdfWdldFJlZ0V4cChlKXtjb25zdCB0PXRoaXMucmVnRXhwTWFwLmdldChlKTtpZih0IT09dm9pZCAwKXJldHVybiB0O2NvbnN0IHI9bmV3IFJlZ0V4cChlKTtyZXR1cm4gdGhpcy5yZWdFeHBRdWV1ZS5sZW5ndGg9PT10aGlzLmNhcGFjaXR5JiZ0aGlzLnJlZ0V4cE1hcC5kZWxldGUodGhpcy5yZWdFeHBRdWV1ZS5zaGlmdCgpKSx0aGlzLnJlZ0V4cE1hcC5zZXQoZSxyKSx0aGlzLnJlZ0V4cFF1ZXVlLnB1c2goZSkscn19Y29uc3QgbnI9WyIgIiwiLCIsIj8iLCIhIiwiOyJdLGlyPW5ldyBycigyMCksc3I9KG4sZSx0KT0+e2U9ZXx8IiIsdD10fHwiIjtjb25zdCByPW5yLmZpbHRlcihhPT5lLmluZGV4T2YoYSk8MCYmdC5pbmRleE9mKGEpPDApO2lmKHIubGVuZ3RoPT09MClyZXR1cm4hMDtjb25zdCBpPWlyLmdldFJlZ0V4cChgKCR7ci5tYXAoYT0+YT09PSI/Ij8iXFw/IjphKS5qb2luKCJ8Iil9KWApO2xldCBzPSFpLnRlc3Qobik7aWYoIXMpe2NvbnN0IGE9bi5pbmRleE9mKHQpO2E+MCYmIWkudGVzdChuLnN1YnN0cmluZygwLGEpKSYmKHM9ITApfXJldHVybiBzfSxMZT1mdW5jdGlvbihuLGUpe2xldCB0PWFyZ3VtZW50cy5sZW5ndGg+MiYmYXJndW1lbnRzWzJdIT09dm9pZCAwP2FyZ3VtZW50c1syXToiLiI7aWYoIW4pcmV0dXJuO2lmKG5bZV0pcmV0dXJuIG5bZV07Y29uc3Qgcj1lLnNwbGl0KHQpO2xldCBpPW47Zm9yKGxldCBzPTA7czxyLmxlbmd0aDspe2lmKCFpfHx0eXBlb2YgaSE9Im9iamVjdCIpcmV0dXJuO2xldCBhLG89IiI7Zm9yKGxldCBsPXM7bDxyLmxlbmd0aDsrK2wpaWYobCE9PXMmJihvKz10KSxvKz1yW2xdLGE9aVtvXSxhIT09dm9pZCAwKXtpZihbInN0cmluZyIsIm51bWJlciIsImJvb2xlYW4iXS5pbmRleE9mKHR5cGVvZiBhKT4tMSYmbDxyLmxlbmd0aC0xKWNvbnRpbnVlO3MrPWwtcysxO2JyZWFrfWk9YX1yZXR1cm4gaX0sbGU9bj0+biYmbi5pbmRleE9mKCJfIik+MD9uLnJlcGxhY2UoIl8iLCItIik6bjtjbGFzcyBHZSBleHRlbmRzIGhle2NvbnN0cnVjdG9yKGUpe2xldCB0PWFyZ3VtZW50cy5sZW5ndGg+MSYmYXJndW1lbnRzWzFdIT09dm9pZCAwP2FyZ3VtZW50c1sxXTp7bnM6WyJ0cmFuc2xhdGlvbiJdLGRlZmF1bHROUzoidHJhbnNsYXRpb24ifTtzdXBlcigpLHRoaXMuZGF0YT1lfHx7fSx0aGlzLm9wdGlvbnM9dCx0aGlzLm9wdGlvbnMua2V5U2VwYXJhdG9yPT09dm9pZCAwJiYodGhpcy5vcHRpb25zLmtleVNlcGFyYXRvcj0iLiIpLHRoaXMub3B0aW9ucy5pZ25vcmVKU09OU3RydWN0dXJlPT09dm9pZCAwJiYodGhpcy5vcHRpb25zLmlnbm9yZUpTT05TdHJ1Y3R1cmU9ITApfWFkZE5hbWVzcGFjZXMoZSl7dGhpcy5vcHRpb25zLm5zLmluZGV4T2YoZSk8MCYmdGhpcy5vcHRpb25zLm5zLnB1c2goZSl9cmVtb3ZlTmFtZXNwYWNlcyhlKXtjb25zdCB0PXRoaXMub3B0aW9ucy5ucy5pbmRleE9mKGUpO3Q+LTEmJnRoaXMub3B0aW9ucy5ucy5zcGxpY2UodCwxKX1nZXRSZXNvdXJjZShlLHQscil7bGV0IGk9YXJndW1lbnRzLmxlbmd0aD4zJiZhcmd1bWVudHNbM10hPT12b2lkIDA/YXJndW1lbnRzWzNdOnt9O2NvbnN0IHM9aS5rZXlTZXBhcmF0b3IhPT12b2lkIDA/aS5rZXlTZXBhcmF0b3I6dGhpcy5vcHRpb25zLmtleVNlcGFyYXRvcixhPWkuaWdub3JlSlNPTlN0cnVjdHVyZSE9PXZvaWQgMD9pLmlnbm9yZUpTT05TdHJ1Y3R1cmU6dGhpcy5vcHRpb25zLmlnbm9yZUpTT05TdHJ1Y3R1cmU7bGV0IG87ZS5pbmRleE9mKCIuIik+LTE/bz1lLnNwbGl0KCIuIik6KG89W2UsdF0sciYmKEFycmF5LmlzQXJyYXkocik/by5wdXNoKC4uLnIpOnR5cGVvZiByPT0ic3RyaW5nIiYmcz9vLnB1c2goLi4uci5zcGxpdChzKSk6by5wdXNoKHIpKSk7Y29uc3QgbD1vZSh0aGlzLmRhdGEsbyk7cmV0dXJuIWwmJiF0JiYhciYmZS5pbmRleE9mKCIuIik+LTEmJihlPW9bMF0sdD1vWzFdLHI9by5zbGljZSgyKS5qb2luKCIuIikpLGx8fCFhfHx0eXBlb2YgciE9InN0cmluZyI/bDpMZSh0aGlzLmRhdGEmJnRoaXMuZGF0YVtlXSYmdGhpcy5kYXRhW2VdW3RdLHIscyl9YWRkUmVzb3VyY2UoZSx0LHIsaSl7bGV0IHM9YXJndW1lbnRzLmxlbmd0aD40JiZhcmd1bWVudHNbNF0hPT12b2lkIDA/YXJndW1lbnRzWzRdOntzaWxlbnQ6ITF9O2NvbnN0IGE9cy5rZXlTZXBhcmF0b3IhPT12b2lkIDA/cy5rZXlTZXBhcmF0b3I6dGhpcy5vcHRpb25zLmtleVNlcGFyYXRvcjtsZXQgbz1bZSx0XTtyJiYobz1vLmNvbmNhdChhP3Iuc3BsaXQoYSk6cikpLGUuaW5kZXhPZigiLiIpPi0xJiYobz1lLnNwbGl0KCIuIiksaT10LHQ9b1sxXSksdGhpcy5hZGROYW1lc3BhY2VzKHQpLFVlKHRoaXMuZGF0YSxvLGkpLHMuc2lsZW50fHx0aGlzLmVtaXQoImFkZGVkIixlLHQscixpKX1hZGRSZXNvdXJjZXMoZSx0LHIpe2xldCBpPWFyZ3VtZW50cy5sZW5ndGg+MyYmYXJndW1lbnRzWzNdIT09dm9pZCAwP2FyZ3VtZW50c1szXTp7c2lsZW50OiExfTtmb3IoY29uc3QgcyBpbiByKSh0eXBlb2YgcltzXT09InN0cmluZyJ8fEFycmF5LmlzQXJyYXkocltzXSkpJiZ0aGlzLmFkZFJlc291cmNlKGUsdCxzLHJbc10se3NpbGVudDohMH0pO2kuc2lsZW50fHx0aGlzLmVtaXQoImFkZGVkIixlLHQscil9YWRkUmVzb3VyY2VCdW5kbGUoZSx0LHIsaSxzKXtsZXQgYT1hcmd1bWVudHMubGVuZ3RoPjUmJmFyZ3VtZW50c1s1XSE9PXZvaWQgMD9hcmd1bWVudHNbNV06e3NpbGVudDohMSxza2lwQ29weTohMX0sbz1bZSx0XTtlLmluZGV4T2YoIi4iKT4tMSYmKG89ZS5zcGxpdCgiLiIpLGk9cixyPXQsdD1vWzFdKSx0aGlzLmFkZE5hbWVzcGFjZXModCk7bGV0IGw9b2UodGhpcy5kYXRhLG8pfHx7fTthLnNraXBDb3B5fHwocj1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHIpKSksaT9PdChsLHIscyk6bD17Li4ubCwuLi5yfSxVZSh0aGlzLmRhdGEsbyxsKSxhLnNpbGVudHx8dGhpcy5lbWl0KCJhZGRlZCIsZSx0LHIpfXJlbW92ZVJlc291cmNlQnVuZGxlKGUsdCl7dGhpcy5oYXNSZXNvdXJjZUJ1bmRsZShlLHQpJiZkZWxldGUgdGhpcy5kYXRhW2VdW3RdLHRoaXMucmVtb3ZlTmFtZXNwYWNlcyh0KSx0aGlzLmVtaXQoInJlbW92ZWQiLGUsdCl9aGFzUmVzb3VyY2VCdW5kbGUoZSx0KXtyZXR1cm4gdGhpcy5nZXRSZXNvdXJjZShlLHQpIT09dm9pZCAwfWdldFJlc291cmNlQnVuZGxlKGUsdCl7cmV0dXJuIHR8fCh0PXRoaXMub3B0aW9ucy5kZWZhdWx0TlMpLHRoaXMub3B0aW9ucy5jb21wYXRpYmlsaXR5QVBJPT09InYxIj97Li4udGhpcy5nZXRSZXNvdXJjZShlLHQpfTp0aGlzLmdldFJlc291cmNlKGUsdCl9Z2V0RGF0YUJ5TGFuZ3VhZ2UoZSl7cmV0dXJuIHRoaXMuZGF0YVtlXX1oYXNMYW5ndWFnZVNvbWVUcmFuc2xhdGlvbnMoZSl7Y29uc3QgdD10aGlzLmdldERhdGFCeUxhbmd1YWdlKGUpO3JldHVybiEhKHQmJk9iamVjdC5rZXlzKHQpfHxbXSkuZmluZChpPT50W2ldJiZPYmplY3Qua2V5cyh0W2ldKS5sZW5ndGg+MCl9dG9KU09OKCl7cmV0dXJuIHRoaXMuZGF0YX19dmFyIHd0PXtwcm9jZXNzb3JzOnt9LGFkZFBvc3RQcm9jZXNzb3Iobil7dGhpcy5wcm9jZXNzb3JzW24ubmFtZV09bn0saGFuZGxlKG4sZSx0LHIsaSl7cmV0dXJuIG4uZm9yRWFjaChzPT57dGhpcy5wcm9jZXNzb3JzW3NdJiYoZT10aGlzLnByb2Nlc3NvcnNbc10ucHJvY2VzcyhlLHQscixpKSl9KSxlfX07Y29uc3QgSGU9e307Y2xhc3MgdWUgZXh0ZW5kcyBoZXtjb25zdHJ1Y3RvcihlKXtsZXQgdD1hcmd1bWVudHMubGVuZ3RoPjEmJmFyZ3VtZW50c1sxXSE9PXZvaWQgMD9hcmd1bWVudHNbMV06e307c3VwZXIoKSxxdChbInJlc291cmNlU3RvcmUiLCJsYW5ndWFnZVV0aWxzIiwicGx1cmFsUmVzb2x2ZXIiLCJpbnRlcnBvbGF0b3IiLCJiYWNrZW5kQ29ubmVjdG9yIiwiaTE4bkZvcm1hdCIsInV0aWxzIl0sZSx0aGlzKSx0aGlzLm9wdGlvbnM9dCx0aGlzLm9wdGlvbnMua2V5U2VwYXJhdG9yPT09dm9pZCAwJiYodGhpcy5vcHRpb25zLmtleVNlcGFyYXRvcj0iLiIpLHRoaXMubG9nZ2VyPUMuY3JlYXRlKCJ0cmFuc2xhdG9yIil9Y2hhbmdlTGFuZ3VhZ2UoZSl7ZSYmKHRoaXMubGFuZ3VhZ2U9ZSl9ZXhpc3RzKGUpe2xldCB0PWFyZ3VtZW50cy5sZW5ndGg+MSYmYXJndW1lbnRzWzFdIT09dm9pZCAwP2FyZ3VtZW50c1sxXTp7aW50ZXJwb2xhdGlvbjp7fX07aWYoZT09bnVsbClyZXR1cm4hMTtjb25zdCByPXRoaXMucmVzb2x2ZShlLHQpO3JldHVybiByJiZyLnJlcyE9PXZvaWQgMH1leHRyYWN0RnJvbUtleShlLHQpe2xldCByPXQubnNTZXBhcmF0b3IhPT12b2lkIDA/dC5uc1NlcGFyYXRvcjp0aGlzLm9wdGlvbnMubnNTZXBhcmF0b3I7cj09PXZvaWQgMCYmKHI9IjoiKTtjb25zdCBpPXQua2V5U2VwYXJhdG9yIT09dm9pZCAwP3Qua2V5U2VwYXJhdG9yOnRoaXMub3B0aW9ucy5rZXlTZXBhcmF0b3I7bGV0IHM9dC5uc3x8dGhpcy5vcHRpb25zLmRlZmF1bHROU3x8W107Y29uc3QgYT1yJiZlLmluZGV4T2Yocik+LTEsbz0hdGhpcy5vcHRpb25zLnVzZXJEZWZpbmVkS2V5U2VwYXJhdG9yJiYhdC5rZXlTZXBhcmF0b3ImJiF0aGlzLm9wdGlvbnMudXNlckRlZmluZWROc1NlcGFyYXRvciYmIXQubnNTZXBhcmF0b3ImJiFzcihlLHIsaSk7aWYoYSYmIW8pe2NvbnN0IGw9ZS5tYXRjaCh0aGlzLmludGVycG9sYXRvci5uZXN0aW5nUmVnZXhwKTtpZihsJiZsLmxlbmd0aD4wKXJldHVybntrZXk6ZSxuYW1lc3BhY2VzOnN9O2NvbnN0IGY9ZS5zcGxpdChyKTsociE9PWl8fHI9PT1pJiZ0aGlzLm9wdGlvbnMubnMuaW5kZXhPZihmWzBdKT4tMSkmJihzPWYuc2hpZnQoKSksZT1mLmpvaW4oaSl9cmV0dXJuIHR5cGVvZiBzPT0ic3RyaW5nIiYmKHM9W3NdKSx7a2V5OmUsbmFtZXNwYWNlczpzfX10cmFuc2xhdGUoZSx0LHIpe2lmKHR5cGVvZiB0IT0ib2JqZWN0IiYmdGhpcy5vcHRpb25zLm92ZXJsb2FkVHJhbnNsYXRpb25PcHRpb25IYW5kbGVyJiYodD10aGlzLm9wdGlvbnMub3ZlcmxvYWRUcmFuc2xhdGlvbk9wdGlvbkhhbmRsZXIoYXJndW1lbnRzKSksdHlwZW9mIHQ9PSJvYmplY3QiJiYodD17Li4udH0pLHR8fCh0PXt9KSxlPT1udWxsKXJldHVybiIiO0FycmF5LmlzQXJyYXkoZSl8fChlPVtTdHJpbmcoZSldKTtjb25zdCBpPXQucmV0dXJuRGV0YWlscyE9PXZvaWQgMD90LnJldHVybkRldGFpbHM6dGhpcy5vcHRpb25zLnJldHVybkRldGFpbHMscz10LmtleVNlcGFyYXRvciE9PXZvaWQgMD90LmtleVNlcGFyYXRvcjp0aGlzLm9wdGlvbnMua2V5U2VwYXJhdG9yLHtrZXk6YSxuYW1lc3BhY2VzOm99PXRoaXMuZXh0cmFjdEZyb21LZXkoZVtlLmxlbmd0aC0xXSx0KSxsPW9bby5sZW5ndGgtMV0sZj10LmxuZ3x8dGhpcy5sYW5ndWFnZSxjPXQuYXBwZW5kTmFtZXNwYWNlVG9DSU1vZGV8fHRoaXMub3B0aW9ucy5hcHBlbmROYW1lc3BhY2VUb0NJTW9kZTtpZihmJiZmLnRvTG93ZXJDYXNlKCk9PT0iY2ltb2RlIil7aWYoYyl7Y29uc3Qgdj10Lm5zU2VwYXJhdG9yfHx0aGlzLm9wdGlvbnMubnNTZXBhcmF0b3I7cmV0dXJuIGk/e3JlczpgJHtsfSR7dn0ke2F9YCx1c2VkS2V5OmEsZXhhY3RVc2VkS2V5OmEsdXNlZExuZzpmLHVzZWROUzpsLHVzZWRQYXJhbXM6dGhpcy5nZXRVc2VkUGFyYW1zRGV0YWlscyh0KX06YCR7bH0ke3Z9JHthfWB9cmV0dXJuIGk/e3JlczphLHVzZWRLZXk6YSxleGFjdFVzZWRLZXk6YSx1c2VkTG5nOmYsdXNlZE5TOmwsdXNlZFBhcmFtczp0aGlzLmdldFVzZWRQYXJhbXNEZXRhaWxzKHQpfTphfWNvbnN0IGc9dGhpcy5yZXNvbHZlKGUsdCk7bGV0IHU9ZyYmZy5yZXM7Y29uc3QgcD1nJiZnLnVzZWRLZXl8fGEsZD1nJiZnLmV4YWN0VXNlZEtleXx8YSxtPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuYXBwbHkodSkseT1bIltvYmplY3QgTnVtYmVyXSIsIltvYmplY3QgRnVuY3Rpb25dIiwiW29iamVjdCBSZWdFeHBdIl0seD10LmpvaW5BcnJheXMhPT12b2lkIDA/dC5qb2luQXJyYXlzOnRoaXMub3B0aW9ucy5qb2luQXJyYXlzLFM9IXRoaXMuaTE4bkZvcm1hdHx8dGhpcy5pMThuRm9ybWF0LmhhbmRsZUFzT2JqZWN0O2lmKFMmJnUmJih0eXBlb2YgdSE9InN0cmluZyImJnR5cGVvZiB1IT0iYm9vbGVhbiImJnR5cGVvZiB1IT0ibnVtYmVyIikmJnkuaW5kZXhPZihtKTwwJiYhKHR5cGVvZiB4PT0ic3RyaW5nIiYmQXJyYXkuaXNBcnJheSh1KSkpe2lmKCF0LnJldHVybk9iamVjdHMmJiF0aGlzLm9wdGlvbnMucmV0dXJuT2JqZWN0cyl7dGhpcy5vcHRpb25zLnJldHVybmVkT2JqZWN0SGFuZGxlcnx8dGhpcy5sb2dnZXIud2FybigiYWNjZXNzaW5nIGFuIG9iamVjdCAtIGJ1dCByZXR1cm5PYmplY3RzIG9wdGlvbnMgaXMgbm90IGVuYWJsZWQhIik7Y29uc3Qgdj10aGlzLm9wdGlvbnMucmV0dXJuZWRPYmplY3RIYW5kbGVyP3RoaXMub3B0aW9ucy5yZXR1cm5lZE9iamVjdEhhbmRsZXIocCx1LHsuLi50LG5zOm99KTpga2V5ICcke2F9ICgke3RoaXMubGFuZ3VhZ2V9KScgcmV0dXJuZWQgYW4gb2JqZWN0IGluc3RlYWQgb2Ygc3RyaW5nLmA7cmV0dXJuIGk/KGcucmVzPXYsZy51c2VkUGFyYW1zPXRoaXMuZ2V0VXNlZFBhcmFtc0RldGFpbHModCksZyk6dn1pZihzKXtjb25zdCB2PUFycmF5LmlzQXJyYXkodSksUD12P1tdOnt9LEQ9dj9kOnA7Zm9yKGNvbnN0IFIgaW4gdSlpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodSxSKSl7Y29uc3QgJD1gJHtEfSR7c30ke1J9YDtQW1JdPXRoaXMudHJhbnNsYXRlKCQsey4uLnQsam9pbkFycmF5czohMSxuczpvfSksUFtSXT09PSQmJihQW1JdPXVbUl0pfXU9UH19ZWxzZSBpZihTJiZ0eXBlb2YgeD09InN0cmluZyImJkFycmF5LmlzQXJyYXkodSkpdT11LmpvaW4oeCksdSYmKHU9dGhpcy5leHRlbmRUcmFuc2xhdGlvbih1LGUsdCxyKSk7ZWxzZXtsZXQgdj0hMSxQPSExO2NvbnN0IEQ9dC5jb3VudCE9PXZvaWQgMCYmdHlwZW9mIHQuY291bnQhPSJzdHJpbmciLFI9dWUuaGFzRGVmYXVsdFZhbHVlKHQpLCQ9RD90aGlzLnBsdXJhbFJlc29sdmVyLmdldFN1ZmZpeChmLHQuY291bnQsdCk6IiIsR3Q9dC5vcmRpbmFsJiZEP3RoaXMucGx1cmFsUmVzb2x2ZXIuZ2V0U3VmZml4KGYsdC5jb3VudCx7b3JkaW5hbDohMX0pOiIiLEllPUQmJiF0Lm9yZGluYWwmJnQuY291bnQ9PT0wJiZ0aGlzLnBsdXJhbFJlc29sdmVyLnNob3VsZFVzZUludGxBcGkoKSxLPUllJiZ0W2BkZWZhdWx0VmFsdWUke3RoaXMub3B0aW9ucy5wbHVyYWxTZXBhcmF0b3J9emVyb2BdfHx0W2BkZWZhdWx0VmFsdWUkeyR9YF18fHRbYGRlZmF1bHRWYWx1ZSR7R3R9YF18fHQuZGVmYXVsdFZhbHVlOyF0aGlzLmlzVmFsaWRMb29rdXAodSkmJlImJih2PSEwLHU9SyksdGhpcy5pc1ZhbGlkTG9va3VwKHUpfHwoUD0hMCx1PWEpO2NvbnN0IEh0PSh0Lm1pc3NpbmdLZXlOb1ZhbHVlRmFsbGJhY2tUb0tleXx8dGhpcy5vcHRpb25zLm1pc3NpbmdLZXlOb1ZhbHVlRmFsbGJhY2tUb0tleSkmJlA/dm9pZCAwOnUsXz1SJiZLIT09dSYmdGhpcy5vcHRpb25zLnVwZGF0ZU1pc3Npbmc7aWYoUHx8dnx8Xyl7aWYodGhpcy5sb2dnZXIubG9nKF8/InVwZGF0ZUtleSI6Im1pc3NpbmdLZXkiLGYsbCxhLF8/Szp1KSxzKXtjb25zdCBMPXRoaXMucmVzb2x2ZShhLHsuLi50LGtleVNlcGFyYXRvcjohMX0pO0wmJkwucmVzJiZ0aGlzLmxvZ2dlci53YXJuKCJTZWVtcyB0aGUgbG9hZGVkIHRyYW5zbGF0aW9ucyB3ZXJlIGluIGZsYXQgSlNPTiBmb3JtYXQgaW5zdGVhZCBvZiBuZXN0ZWQuIEVpdGhlciBzZXQga2V5U2VwYXJhdG9yOiBmYWxzZSBvbiBpbml0IG9yIG1ha2Ugc3VyZSB5b3VyIHRyYW5zbGF0aW9ucyBhcmUgcHVibGlzaGVkIGluIG5lc3RlZCBmb3JtYXQuIil9bGV0IFY9W107Y29uc3QgWj10aGlzLmxhbmd1YWdlVXRpbHMuZ2V0RmFsbGJhY2tDb2Rlcyh0aGlzLm9wdGlvbnMuZmFsbGJhY2tMbmcsdC5sbmd8fHRoaXMubGFuZ3VhZ2UpO2lmKHRoaXMub3B0aW9ucy5zYXZlTWlzc2luZ1RvPT09ImZhbGxiYWNrIiYmWiYmWlswXSlmb3IobGV0IEw9MDtMPFoubGVuZ3RoO0wrKylWLnB1c2goWltMXSk7ZWxzZSB0aGlzLm9wdGlvbnMuc2F2ZU1pc3NpbmdUbz09PSJhbGwiP1Y9dGhpcy5sYW5ndWFnZVV0aWxzLnRvUmVzb2x2ZUhpZXJhcmNoeSh0LmxuZ3x8dGhpcy5sYW5ndWFnZSk6Vi5wdXNoKHQubG5nfHx0aGlzLmxhbmd1YWdlKTtjb25zdCBUZT0oTCxJLFcpPT57Y29uc3Qga2U9UiYmVyE9PXU/VzpIdDt0aGlzLm9wdGlvbnMubWlzc2luZ0tleUhhbmRsZXI/dGhpcy5vcHRpb25zLm1pc3NpbmdLZXlIYW5kbGVyKEwsbCxJLGtlLF8sdCk6dGhpcy5iYWNrZW5kQ29ubmVjdG9yJiZ0aGlzLmJhY2tlbmRDb25uZWN0b3Iuc2F2ZU1pc3NpbmcmJnRoaXMuYmFja2VuZENvbm5lY3Rvci5zYXZlTWlzc2luZyhMLGwsSSxrZSxfLHQpLHRoaXMuZW1pdCgibWlzc2luZ0tleSIsTCxsLEksdSl9O3RoaXMub3B0aW9ucy5zYXZlTWlzc2luZyYmKHRoaXMub3B0aW9ucy5zYXZlTWlzc2luZ1BsdXJhbHMmJkQ/Vi5mb3JFYWNoKEw9Pntjb25zdCBJPXRoaXMucGx1cmFsUmVzb2x2ZXIuZ2V0U3VmZml4ZXMoTCx0KTtJZSYmdFtgZGVmYXVsdFZhbHVlJHt0aGlzLm9wdGlvbnMucGx1cmFsU2VwYXJhdG9yfXplcm9gXSYmSS5pbmRleE9mKGAke3RoaXMub3B0aW9ucy5wbHVyYWxTZXBhcmF0b3J9emVyb2ApPDAmJkkucHVzaChgJHt0aGlzLm9wdGlvbnMucGx1cmFsU2VwYXJhdG9yfXplcm9gKSxJLmZvckVhY2goVz0+e1RlKFtMXSxhK1csdFtgZGVmYXVsdFZhbHVlJHtXfWBdfHxLKX0pfSk6VGUoVixhLEspKX11PXRoaXMuZXh0ZW5kVHJhbnNsYXRpb24odSxlLHQsZyxyKSxQJiZ1PT09YSYmdGhpcy5vcHRpb25zLmFwcGVuZE5hbWVzcGFjZVRvTWlzc2luZ0tleSYmKHU9YCR7bH06JHthfWApLChQfHx2KSYmdGhpcy5vcHRpb25zLnBhcnNlTWlzc2luZ0tleUhhbmRsZXImJih0aGlzLm9wdGlvbnMuY29tcGF0aWJpbGl0eUFQSSE9PSJ2MSI/dT10aGlzLm9wdGlvbnMucGFyc2VNaXNzaW5nS2V5SGFuZGxlcih0aGlzLm9wdGlvbnMuYXBwZW5kTmFtZXNwYWNlVG9NaXNzaW5nS2V5P2Ake2x9OiR7YX1gOmEsdj91OnZvaWQgMCk6dT10aGlzLm9wdGlvbnMucGFyc2VNaXNzaW5nS2V5SGFuZGxlcih1KSl9cmV0dXJuIGk/KGcucmVzPXUsZy51c2VkUGFyYW1zPXRoaXMuZ2V0VXNlZFBhcmFtc0RldGFpbHModCksZyk6dX1leHRlbmRUcmFuc2xhdGlvbihlLHQscixpLHMpe3ZhciBhPXRoaXM7aWYodGhpcy5pMThuRm9ybWF0JiZ0aGlzLmkxOG5Gb3JtYXQucGFyc2UpZT10aGlzLmkxOG5Gb3JtYXQucGFyc2UoZSx7Li4udGhpcy5vcHRpb25zLmludGVycG9sYXRpb24uZGVmYXVsdFZhcmlhYmxlcywuLi5yfSxyLmxuZ3x8dGhpcy5sYW5ndWFnZXx8aS51c2VkTG5nLGkudXNlZE5TLGkudXNlZEtleSx7cmVzb2x2ZWQ6aX0pO2Vsc2UgaWYoIXIuc2tpcEludGVycG9sYXRpb24pe3IuaW50ZXJwb2xhdGlvbiYmdGhpcy5pbnRlcnBvbGF0b3IuaW5pdCh7Li4ucixpbnRlcnBvbGF0aW9uOnsuLi50aGlzLm9wdGlvbnMuaW50ZXJwb2xhdGlvbiwuLi5yLmludGVycG9sYXRpb259fSk7Y29uc3QgZj10eXBlb2YgZT09InN0cmluZyImJihyJiZyLmludGVycG9sYXRpb24mJnIuaW50ZXJwb2xhdGlvbi5za2lwT25WYXJpYWJsZXMhPT12b2lkIDA/ci5pbnRlcnBvbGF0aW9uLnNraXBPblZhcmlhYmxlczp0aGlzLm9wdGlvbnMuaW50ZXJwb2xhdGlvbi5za2lwT25WYXJpYWJsZXMpO2xldCBjO2lmKGYpe2NvbnN0IHU9ZS5tYXRjaCh0aGlzLmludGVycG9sYXRvci5uZXN0aW5nUmVnZXhwKTtjPXUmJnUubGVuZ3RofWxldCBnPXIucmVwbGFjZSYmdHlwZW9mIHIucmVwbGFjZSE9InN0cmluZyI/ci5yZXBsYWNlOnI7aWYodGhpcy5vcHRpb25zLmludGVycG9sYXRpb24uZGVmYXVsdFZhcmlhYmxlcyYmKGc9ey4uLnRoaXMub3B0aW9ucy5pbnRlcnBvbGF0aW9uLmRlZmF1bHRWYXJpYWJsZXMsLi4uZ30pLGU9dGhpcy5pbnRlcnBvbGF0b3IuaW50ZXJwb2xhdGUoZSxnLHIubG5nfHx0aGlzLmxhbmd1YWdlfHxpLnVzZWRMbmcsciksZil7Y29uc3QgdT1lLm1hdGNoKHRoaXMuaW50ZXJwb2xhdG9yLm5lc3RpbmdSZWdleHApLHA9dSYmdS5sZW5ndGg7YzxwJiYoci5uZXN0PSExKX0hci5sbmcmJnRoaXMub3B0aW9ucy5jb21wYXRpYmlsaXR5QVBJIT09InYxIiYmaSYmaS5yZXMmJihyLmxuZz10aGlzLmxhbmd1YWdlfHxpLnVzZWRMbmcpLHIubmVzdCE9PSExJiYoZT10aGlzLmludGVycG9sYXRvci5uZXN0KGUsZnVuY3Rpb24oKXtmb3IodmFyIHU9YXJndW1lbnRzLmxlbmd0aCxwPW5ldyBBcnJheSh1KSxkPTA7ZDx1O2QrKylwW2RdPWFyZ3VtZW50c1tkXTtyZXR1cm4gcyYmc1swXT09PXBbMF0mJiFyLmNvbnRleHQ/KGEubG9nZ2VyLndhcm4oYEl0IHNlZW1zIHlvdSBhcmUgbmVzdGluZyByZWN1cnNpdmVseSBrZXk6ICR7cFswXX0gaW4ga2V5OiAke3RbMF19YCksbnVsbCk6YS50cmFuc2xhdGUoLi4ucCx0KX0scikpLHIuaW50ZXJwb2xhdGlvbiYmdGhpcy5pbnRlcnBvbGF0b3IucmVzZXQoKX1jb25zdCBvPXIucG9zdFByb2Nlc3N8fHRoaXMub3B0aW9ucy5wb3N0UHJvY2VzcyxsPXR5cGVvZiBvPT0ic3RyaW5nIj9bb106bztyZXR1cm4gZSE9bnVsbCYmbCYmbC5sZW5ndGgmJnIuYXBwbHlQb3N0UHJvY2Vzc29yIT09ITEmJihlPXd0LmhhbmRsZShsLGUsdCx0aGlzLm9wdGlvbnMmJnRoaXMub3B0aW9ucy5wb3N0UHJvY2Vzc1Bhc3NSZXNvbHZlZD97aTE4blJlc29sdmVkOnsuLi5pLHVzZWRQYXJhbXM6dGhpcy5nZXRVc2VkUGFyYW1zRGV0YWlscyhyKX0sLi4ucn06cix0aGlzKSksZX1yZXNvbHZlKGUpe2xldCB0PWFyZ3VtZW50cy5sZW5ndGg+MSYmYXJndW1lbnRzWzFdIT09dm9pZCAwP2FyZ3VtZW50c1sxXTp7fSxyLGkscyxhLG87cmV0dXJuIHR5cGVvZiBlPT0ic3RyaW5nIiYmKGU9W2VdKSxlLmZvckVhY2gobD0+e2lmKHRoaXMuaXNWYWxpZExvb2t1cChyKSlyZXR1cm47Y29uc3QgZj10aGlzLmV4dHJhY3RGcm9tS2V5KGwsdCksYz1mLmtleTtpPWM7bGV0IGc9Zi5uYW1lc3BhY2VzO3RoaXMub3B0aW9ucy5mYWxsYmFja05TJiYoZz1nLmNvbmNhdCh0aGlzLm9wdGlvbnMuZmFsbGJhY2tOUykpO2NvbnN0IHU9dC5jb3VudCE9PXZvaWQgMCYmdHlwZW9mIHQuY291bnQhPSJzdHJpbmciLHA9dSYmIXQub3JkaW5hbCYmdC5jb3VudD09PTAmJnRoaXMucGx1cmFsUmVzb2x2ZXIuc2hvdWxkVXNlSW50bEFwaSgpLGQ9dC5jb250ZXh0IT09dm9pZCAwJiYodHlwZW9mIHQuY29udGV4dD09InN0cmluZyJ8fHR5cGVvZiB0LmNvbnRleHQ9PSJudW1iZXIiKSYmdC5jb250ZXh0IT09IiIsbT10LmxuZ3M/dC5sbmdzOnRoaXMubGFuZ3VhZ2VVdGlscy50b1Jlc29sdmVIaWVyYXJjaHkodC5sbmd8fHRoaXMubGFuZ3VhZ2UsdC5mYWxsYmFja0xuZyk7Zy5mb3JFYWNoKHk9Pnt0aGlzLmlzVmFsaWRMb29rdXAocil8fChvPXksIUhlW2Ake21bMF19LSR7eX1gXSYmdGhpcy51dGlscyYmdGhpcy51dGlscy5oYXNMb2FkZWROYW1lc3BhY2UmJiF0aGlzLnV0aWxzLmhhc0xvYWRlZE5hbWVzcGFjZShvKSYmKEhlW2Ake21bMF19LSR7eX1gXT0hMCx0aGlzLmxvZ2dlci53YXJuKGBrZXkgIiR7aX0iIGZvciBsYW5ndWFnZXMgIiR7bS5qb2luKCIsICIpfSIgd29uJ3QgZ2V0IHJlc29sdmVkIGFzIG5hbWVzcGFjZSAiJHtvfSIgd2FzIG5vdCB5ZXQgbG9hZGVkYCwiVGhpcyBtZWFucyBzb21ldGhpbmcgSVMgV1JPTkcgaW4geW91ciBzZXR1cC4gWW91IGFjY2VzcyB0aGUgdCBmdW5jdGlvbiBiZWZvcmUgaTE4bmV4dC5pbml0IC8gaTE4bmV4dC5sb2FkTmFtZXNwYWNlIC8gaTE4bmV4dC5jaGFuZ2VMYW5ndWFnZSB3YXMgZG9uZS4gV2FpdCBmb3IgdGhlIGNhbGxiYWNrIG9yIFByb21pc2UgdG8gcmVzb2x2ZSBiZWZvcmUgYWNjZXNzaW5nIGl0ISEhIikpLG0uZm9yRWFjaCh4PT57aWYodGhpcy5pc1ZhbGlkTG9va3VwKHIpKXJldHVybjthPXg7Y29uc3QgUz1bY107aWYodGhpcy5pMThuRm9ybWF0JiZ0aGlzLmkxOG5Gb3JtYXQuYWRkTG9va3VwS2V5cyl0aGlzLmkxOG5Gb3JtYXQuYWRkTG9va3VwS2V5cyhTLGMseCx5LHQpO2Vsc2V7bGV0IHY7dSYmKHY9dGhpcy5wbHVyYWxSZXNvbHZlci5nZXRTdWZmaXgoeCx0LmNvdW50LHQpKTtjb25zdCBQPWAke3RoaXMub3B0aW9ucy5wbHVyYWxTZXBhcmF0b3J9emVyb2AsRD1gJHt0aGlzLm9wdGlvbnMucGx1cmFsU2VwYXJhdG9yfW9yZGluYWwke3RoaXMub3B0aW9ucy5wbHVyYWxTZXBhcmF0b3J9YDtpZih1JiYoUy5wdXNoKGMrdiksdC5vcmRpbmFsJiZ2LmluZGV4T2YoRCk9PT0wJiZTLnB1c2goYyt2LnJlcGxhY2UoRCx0aGlzLm9wdGlvbnMucGx1cmFsU2VwYXJhdG9yKSkscCYmUy5wdXNoKGMrUCkpLGQpe2NvbnN0IFI9YCR7Y30ke3RoaXMub3B0aW9ucy5jb250ZXh0U2VwYXJhdG9yfSR7dC5jb250ZXh0fWA7Uy5wdXNoKFIpLHUmJihTLnB1c2goUit2KSx0Lm9yZGluYWwmJnYuaW5kZXhPZihEKT09PTAmJlMucHVzaChSK3YucmVwbGFjZShELHRoaXMub3B0aW9ucy5wbHVyYWxTZXBhcmF0b3IpKSxwJiZTLnB1c2goUitQKSl9fWxldCBPO2Zvcig7Tz1TLnBvcCgpOyl0aGlzLmlzVmFsaWRMb29rdXAocil8fChzPU8scj10aGlzLmdldFJlc291cmNlKHgseSxPLHQpKX0pKX0pfSkse3JlczpyLHVzZWRLZXk6aSxleGFjdFVzZWRLZXk6cyx1c2VkTG5nOmEsdXNlZE5TOm99fWlzVmFsaWRMb29rdXAoZSl7cmV0dXJuIGUhPT12b2lkIDAmJiEoIXRoaXMub3B0aW9ucy5yZXR1cm5OdWxsJiZlPT09bnVsbCkmJiEoIXRoaXMub3B0aW9ucy5yZXR1cm5FbXB0eVN0cmluZyYmZT09PSIiKX1nZXRSZXNvdXJjZShlLHQscil7bGV0IGk9YXJndW1lbnRzLmxlbmd0aD4zJiZhcmd1bWVudHNbM10hPT12b2lkIDA/YXJndW1lbnRzWzNdOnt9O3JldHVybiB0aGlzLmkxOG5Gb3JtYXQmJnRoaXMuaTE4bkZvcm1hdC5nZXRSZXNvdXJjZT90aGlzLmkxOG5Gb3JtYXQuZ2V0UmVzb3VyY2UoZSx0LHIsaSk6dGhpcy5yZXNvdXJjZVN0b3JlLmdldFJlc291cmNlKGUsdCxyLGkpfWdldFVzZWRQYXJhbXNEZXRhaWxzKCl7bGV0IGU9YXJndW1lbnRzLmxlbmd0aD4wJiZhcmd1bWVudHNbMF0hPT12b2lkIDA/YXJndW1lbnRzWzBdOnt9O2NvbnN0IHQ9WyJkZWZhdWx0VmFsdWUiLCJvcmRpbmFsIiwiY29udGV4dCIsInJlcGxhY2UiLCJsbmciLCJsbmdzIiwiZmFsbGJhY2tMbmciLCJucyIsImtleVNlcGFyYXRvciIsIm5zU2VwYXJhdG9yIiwicmV0dXJuT2JqZWN0cyIsInJldHVybkRldGFpbHMiLCJqb2luQXJyYXlzIiwicG9zdFByb2Nlc3MiLCJpbnRlcnBvbGF0aW9uIl0scj1lLnJlcGxhY2UmJnR5cGVvZiBlLnJlcGxhY2UhPSJzdHJpbmciO2xldCBpPXI/ZS5yZXBsYWNlOmU7aWYociYmdHlwZW9mIGUuY291bnQ8InUiJiYoaS5jb3VudD1lLmNvdW50KSx0aGlzLm9wdGlvbnMuaW50ZXJwb2xhdGlvbi5kZWZhdWx0VmFyaWFibGVzJiYoaT17Li4udGhpcy5vcHRpb25zLmludGVycG9sYXRpb24uZGVmYXVsdFZhcmlhYmxlcywuLi5pfSksIXIpe2k9ey4uLml9O2Zvcihjb25zdCBzIG9mIHQpZGVsZXRlIGlbc119cmV0dXJuIGl9c3RhdGljIGhhc0RlZmF1bHRWYWx1ZShlKXtjb25zdCB0PSJkZWZhdWx0VmFsdWUiO2Zvcihjb25zdCByIGluIGUpaWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUscikmJnQ9PT1yLnN1YnN0cmluZygwLHQubGVuZ3RoKSYmZVtyXSE9PXZvaWQgMClyZXR1cm4hMDtyZXR1cm4hMX19Y29uc3QgbWU9bj0+bi5jaGFyQXQoMCkudG9VcHBlckNhc2UoKStuLnNsaWNlKDEpO2NsYXNzIEtle2NvbnN0cnVjdG9yKGUpe3RoaXMub3B0aW9ucz1lLHRoaXMuc3VwcG9ydGVkTG5ncz10aGlzLm9wdGlvbnMuc3VwcG9ydGVkTG5nc3x8ITEsdGhpcy5sb2dnZXI9Qy5jcmVhdGUoImxhbmd1YWdlVXRpbHMiKX1nZXRTY3JpcHRQYXJ0RnJvbUNvZGUoZSl7aWYoZT1sZShlKSwhZXx8ZS5pbmRleE9mKCItIik8MClyZXR1cm4gbnVsbDtjb25zdCB0PWUuc3BsaXQoIi0iKTtyZXR1cm4gdC5sZW5ndGg9PT0yfHwodC5wb3AoKSx0W3QubGVuZ3RoLTFdLnRvTG93ZXJDYXNlKCk9PT0ieCIpP251bGw6dGhpcy5mb3JtYXRMYW5ndWFnZUNvZGUodC5qb2luKCItIikpfWdldExhbmd1YWdlUGFydEZyb21Db2RlKGUpe2lmKGU9bGUoZSksIWV8fGUuaW5kZXhPZigiLSIpPDApcmV0dXJuIGU7Y29uc3QgdD1lLnNwbGl0KCItIik7cmV0dXJuIHRoaXMuZm9ybWF0TGFuZ3VhZ2VDb2RlKHRbMF0pfWZvcm1hdExhbmd1YWdlQ29kZShlKXtpZih0eXBlb2YgZT09InN0cmluZyImJmUuaW5kZXhPZigiLSIpPi0xKXtjb25zdCB0PVsiaGFucyIsImhhbnQiLCJsYXRuIiwiY3lybCIsImNhbnMiLCJtb25nIiwiYXJhYiJdO2xldCByPWUuc3BsaXQoIi0iKTtyZXR1cm4gdGhpcy5vcHRpb25zLmxvd2VyQ2FzZUxuZz9yPXIubWFwKGk9PmkudG9Mb3dlckNhc2UoKSk6ci5sZW5ndGg9PT0yPyhyWzBdPXJbMF0udG9Mb3dlckNhc2UoKSxyWzFdPXJbMV0udG9VcHBlckNhc2UoKSx0LmluZGV4T2YoclsxXS50b0xvd2VyQ2FzZSgpKT4tMSYmKHJbMV09bWUoclsxXS50b0xvd2VyQ2FzZSgpKSkpOnIubGVuZ3RoPT09MyYmKHJbMF09clswXS50b0xvd2VyQ2FzZSgpLHJbMV0ubGVuZ3RoPT09MiYmKHJbMV09clsxXS50b1VwcGVyQ2FzZSgpKSxyWzBdIT09InNnbiImJnJbMl0ubGVuZ3RoPT09MiYmKHJbMl09clsyXS50b1VwcGVyQ2FzZSgpKSx0LmluZGV4T2YoclsxXS50b0xvd2VyQ2FzZSgpKT4tMSYmKHJbMV09bWUoclsxXS50b0xvd2VyQ2FzZSgpKSksdC5pbmRleE9mKHJbMl0udG9Mb3dlckNhc2UoKSk+LTEmJihyWzJdPW1lKHJbMl0udG9Mb3dlckNhc2UoKSkpKSxyLmpvaW4oIi0iKX1yZXR1cm4gdGhpcy5vcHRpb25zLmNsZWFuQ29kZXx8dGhpcy5vcHRpb25zLmxvd2VyQ2FzZUxuZz9lLnRvTG93ZXJDYXNlKCk6ZX1pc1N1cHBvcnRlZENvZGUoZSl7cmV0dXJuKHRoaXMub3B0aW9ucy5sb2FkPT09Imxhbmd1YWdlT25seSJ8fHRoaXMub3B0aW9ucy5ub25FeHBsaWNpdFN1cHBvcnRlZExuZ3MpJiYoZT10aGlzLmdldExhbmd1YWdlUGFydEZyb21Db2RlKGUpKSwhdGhpcy5zdXBwb3J0ZWRMbmdzfHwhdGhpcy5zdXBwb3J0ZWRMbmdzLmxlbmd0aHx8dGhpcy5zdXBwb3J0ZWRMbmdzLmluZGV4T2YoZSk+LTF9Z2V0QmVzdE1hdGNoRnJvbUNvZGVzKGUpe2lmKCFlKXJldHVybiBudWxsO2xldCB0O3JldHVybiBlLmZvckVhY2gocj0+e2lmKHQpcmV0dXJuO2NvbnN0IGk9dGhpcy5mb3JtYXRMYW5ndWFnZUNvZGUocik7KCF0aGlzLm9wdGlvbnMuc3VwcG9ydGVkTG5nc3x8dGhpcy5pc1N1cHBvcnRlZENvZGUoaSkpJiYodD1pKX0pLCF0JiZ0aGlzLm9wdGlvbnMuc3VwcG9ydGVkTG5ncyYmZS5mb3JFYWNoKHI9PntpZih0KXJldHVybjtjb25zdCBpPXRoaXMuZ2V0TGFuZ3VhZ2VQYXJ0RnJvbUNvZGUocik7aWYodGhpcy5pc1N1cHBvcnRlZENvZGUoaSkpcmV0dXJuIHQ9aTt0PXRoaXMub3B0aW9ucy5zdXBwb3J0ZWRMbmdzLmZpbmQocz0+e2lmKHM9PT1pKXJldHVybiBzO2lmKCEocy5pbmRleE9mKCItIik8MCYmaS5pbmRleE9mKCItIik8MCkmJihzLmluZGV4T2YoIi0iKT4wJiZpLmluZGV4T2YoIi0iKTwwJiZzLnN1YnN0cmluZygwLHMuaW5kZXhPZigiLSIpKT09PWl8fHMuaW5kZXhPZihpKT09PTAmJmkubGVuZ3RoPjEpKXJldHVybiBzfSl9KSx0fHwodD10aGlzLmdldEZhbGxiYWNrQ29kZXModGhpcy5vcHRpb25zLmZhbGxiYWNrTG5nKVswXSksdH1nZXRGYWxsYmFja0NvZGVzKGUsdCl7aWYoIWUpcmV0dXJuW107aWYodHlwZW9mIGU9PSJmdW5jdGlvbiImJihlPWUodCkpLHR5cGVvZiBlPT0ic3RyaW5nIiYmKGU9W2VdKSxBcnJheS5pc0FycmF5KGUpKXJldHVybiBlO2lmKCF0KXJldHVybiBlLmRlZmF1bHR8fFtdO2xldCByPWVbdF07cmV0dXJuIHJ8fChyPWVbdGhpcy5nZXRTY3JpcHRQYXJ0RnJvbUNvZGUodCldKSxyfHwocj1lW3RoaXMuZm9ybWF0TGFuZ3VhZ2VDb2RlKHQpXSkscnx8KHI9ZVt0aGlzLmdldExhbmd1YWdlUGFydEZyb21Db2RlKHQpXSkscnx8KHI9ZS5kZWZhdWx0KSxyfHxbXX10b1Jlc29sdmVIaWVyYXJjaHkoZSx0KXtjb25zdCByPXRoaXMuZ2V0RmFsbGJhY2tDb2Rlcyh0fHx0aGlzLm9wdGlvbnMuZmFsbGJhY2tMbmd8fFtdLGUpLGk9W10scz1hPT57YSYmKHRoaXMuaXNTdXBwb3J0ZWRDb2RlKGEpP2kucHVzaChhKTp0aGlzLmxvZ2dlci53YXJuKGByZWplY3RpbmcgbGFuZ3VhZ2UgY29kZSBub3QgZm91bmQgaW4gc3VwcG9ydGVkTG5nczogJHthfWApKX07cmV0dXJuIHR5cGVvZiBlPT0ic3RyaW5nIiYmKGUuaW5kZXhPZigiLSIpPi0xfHxlLmluZGV4T2YoIl8iKT4tMSk/KHRoaXMub3B0aW9ucy5sb2FkIT09Imxhbmd1YWdlT25seSImJnModGhpcy5mb3JtYXRMYW5ndWFnZUNvZGUoZSkpLHRoaXMub3B0aW9ucy5sb2FkIT09Imxhbmd1YWdlT25seSImJnRoaXMub3B0aW9ucy5sb2FkIT09ImN1cnJlbnRPbmx5IiYmcyh0aGlzLmdldFNjcmlwdFBhcnRGcm9tQ29kZShlKSksdGhpcy5vcHRpb25zLmxvYWQhPT0iY3VycmVudE9ubHkiJiZzKHRoaXMuZ2V0TGFuZ3VhZ2VQYXJ0RnJvbUNvZGUoZSkpKTp0eXBlb2YgZT09InN0cmluZyImJnModGhpcy5mb3JtYXRMYW5ndWFnZUNvZGUoZSkpLHIuZm9yRWFjaChhPT57aS5pbmRleE9mKGEpPDAmJnModGhpcy5mb3JtYXRMYW5ndWFnZUNvZGUoYSkpfSksaX19bGV0IGFyPVt7bG5nczpbImFjaCIsImFrIiwiYW0iLCJhcm4iLCJiciIsImZpbCIsImd1biIsImxuIiwibWZlIiwibWciLCJtaSIsIm9jIiwicHQiLCJwdC1CUiIsInRnIiwidGwiLCJ0aSIsInRyIiwidXoiLCJ3YSJdLG5yOlsxLDJdLGZjOjF9LHtsbmdzOlsiYWYiLCJhbiIsImFzdCIsImF6IiwiYmciLCJibiIsImNhIiwiZGEiLCJkZSIsImRldiIsImVsIiwiZW4iLCJlbyIsImVzIiwiZXQiLCJldSIsImZpIiwiZm8iLCJmdXIiLCJmeSIsImdsIiwiZ3UiLCJoYSIsImhpIiwiaHUiLCJoeSIsImlhIiwiaXQiLCJrayIsImtuIiwia3UiLCJsYiIsIm1haSIsIm1sIiwibW4iLCJtciIsIm5haCIsIm5hcCIsIm5iIiwibmUiLCJubCIsIm5uIiwibm8iLCJuc28iLCJwYSIsInBhcCIsInBtcyIsInBzIiwicHQtUFQiLCJybSIsInNjbyIsInNlIiwic2kiLCJzbyIsInNvbiIsInNxIiwic3YiLCJzdyIsInRhIiwidGUiLCJ0ayIsInVyIiwieW8iXSxucjpbMSwyXSxmYzoyfSx7bG5nczpbImF5IiwiYm8iLCJjZ2ciLCJmYSIsImh0IiwiaWQiLCJqYSIsImpibyIsImthIiwia20iLCJrbyIsImt5IiwibG8iLCJtcyIsInNhaCIsInN1IiwidGgiLCJ0dCIsInVnIiwidmkiLCJ3byIsInpoIl0sbnI6WzFdLGZjOjN9LHtsbmdzOlsiYmUiLCJicyIsImNuciIsImR6IiwiaHIiLCJydSIsInNyIiwidWsiXSxucjpbMSwyLDVdLGZjOjR9LHtsbmdzOlsiYXIiXSxucjpbMCwxLDIsMywxMSwxMDBdLGZjOjV9LHtsbmdzOlsiY3MiLCJzayJdLG5yOlsxLDIsNV0sZmM6Nn0se2xuZ3M6WyJjc2IiLCJwbCJdLG5yOlsxLDIsNV0sZmM6N30se2xuZ3M6WyJjeSJdLG5yOlsxLDIsMyw4XSxmYzo4fSx7bG5nczpbImZyIl0sbnI6WzEsMl0sZmM6OX0se2xuZ3M6WyJnYSJdLG5yOlsxLDIsMyw3LDExXSxmYzoxMH0se2xuZ3M6WyJnZCJdLG5yOlsxLDIsMywyMF0sZmM6MTF9LHtsbmdzOlsiaXMiXSxucjpbMSwyXSxmYzoxMn0se2xuZ3M6WyJqdiJdLG5yOlswLDFdLGZjOjEzfSx7bG5nczpbImt3Il0sbnI6WzEsMiwzLDRdLGZjOjE0fSx7bG5nczpbImx0Il0sbnI6WzEsMiwxMF0sZmM6MTV9LHtsbmdzOlsibHYiXSxucjpbMSwyLDBdLGZjOjE2fSx7bG5nczpbIm1rIl0sbnI6WzEsMl0sZmM6MTd9LHtsbmdzOlsibW5rIl0sbnI6WzAsMSwyXSxmYzoxOH0se2xuZ3M6WyJtdCJdLG5yOlsxLDIsMTEsMjBdLGZjOjE5fSx7bG5nczpbIm9yIl0sbnI6WzIsMV0sZmM6Mn0se2xuZ3M6WyJybyJdLG5yOlsxLDIsMjBdLGZjOjIwfSx7bG5nczpbInNsIl0sbnI6WzUsMSwyLDNdLGZjOjIxfSx7bG5nczpbImhlIiwiaXciXSxucjpbMSwyLDIwLDIxXSxmYzoyMn1dLG9yPXsxOm49Pisobj4xKSwyOm49PisobiE9MSksMzpuPT4wLDQ6bj0+biUxMD09MSYmbiUxMDAhPTExPzA6biUxMD49MiYmbiUxMDw9NCYmKG4lMTAwPDEwfHxuJTEwMD49MjApPzE6Miw1Om49Pm49PTA/MDpuPT0xPzE6bj09Mj8yOm4lMTAwPj0zJiZuJTEwMDw9MTA/MzpuJTEwMD49MTE/NDo1LDY6bj0+bj09MT8wOm4+PTImJm48PTQ/MToyLDc6bj0+bj09MT8wOm4lMTA+PTImJm4lMTA8PTQmJihuJTEwMDwxMHx8biUxMDA+PTIwKT8xOjIsODpuPT5uPT0xPzA6bj09Mj8xOm4hPTgmJm4hPTExPzI6Myw5Om49Pisobj49MiksMTA6bj0+bj09MT8wOm49PTI/MTpuPDc/MjpuPDExPzM6NCwxMTpuPT5uPT0xfHxuPT0xMT8wOm49PTJ8fG49PTEyPzE6bj4yJiZuPDIwPzI6MywxMjpuPT4rKG4lMTAhPTF8fG4lMTAwPT0xMSksMTM6bj0+KyhuIT09MCksMTQ6bj0+bj09MT8wOm49PTI/MTpuPT0zPzI6MywxNTpuPT5uJTEwPT0xJiZuJTEwMCE9MTE/MDpuJTEwPj0yJiYobiUxMDA8MTB8fG4lMTAwPj0yMCk/MToyLDE2Om49Pm4lMTA9PTEmJm4lMTAwIT0xMT8wOm4hPT0wPzE6MiwxNzpuPT5uPT0xfHxuJTEwPT0xJiZuJTEwMCE9MTE/MDoxLDE4Om49Pm49PTA/MDpuPT0xPzE6MiwxOTpuPT5uPT0xPzA6bj09MHx8biUxMDA+MSYmbiUxMDA8MTE/MTpuJTEwMD4xMCYmbiUxMDA8MjA/MjozLDIwOm49Pm49PTE/MDpuPT0wfHxuJTEwMD4wJiZuJTEwMDwyMD8xOjIsMjE6bj0+biUxMDA9PTE/MTpuJTEwMD09Mj8yOm4lMTAwPT0zfHxuJTEwMD09ND8zOjAsMjI6bj0+bj09MT8wOm49PTI/MToobjwwfHxuPjEwKSYmbiUxMD09MD8yOjN9O2NvbnN0IGxyPVsidjEiLCJ2MiIsInYzIl0sdXI9WyJ2NCJdLF9lPXt6ZXJvOjAsb25lOjEsdHdvOjIsZmV3OjMsbWFueTo0LG90aGVyOjV9LGZyPSgpPT57Y29uc3Qgbj17fTtyZXR1cm4gYXIuZm9yRWFjaChlPT57ZS5sbmdzLmZvckVhY2godD0+e25bdF09e251bWJlcnM6ZS5ucixwbHVyYWxzOm9yW2UuZmNdfX0pfSksbn07Y2xhc3MgY3J7Y29uc3RydWN0b3IoZSl7bGV0IHQ9YXJndW1lbnRzLmxlbmd0aD4xJiZhcmd1bWVudHNbMV0hPT12b2lkIDA/YXJndW1lbnRzWzFdOnt9O3RoaXMubGFuZ3VhZ2VVdGlscz1lLHRoaXMub3B0aW9ucz10LHRoaXMubG9nZ2VyPUMuY3JlYXRlKCJwbHVyYWxSZXNvbHZlciIpLCghdGhpcy5vcHRpb25zLmNvbXBhdGliaWxpdHlKU09OfHx1ci5pbmNsdWRlcyh0aGlzLm9wdGlvbnMuY29tcGF0aWJpbGl0eUpTT04pKSYmKHR5cGVvZiBJbnRsPiJ1Inx8IUludGwuUGx1cmFsUnVsZXMpJiYodGhpcy5vcHRpb25zLmNvbXBhdGliaWxpdHlKU09OPSJ2MyIsdGhpcy5sb2dnZXIuZXJyb3IoIllvdXIgZW52aXJvbm1lbnQgc2VlbXMgbm90IHRvIGJlIEludGwgQVBJIGNvbXBhdGlibGUsIHVzZSBhbiBJbnRsLlBsdXJhbFJ1bGVzIHBvbHlmaWxsLiBXaWxsIGZhbGxiYWNrIHRvIHRoZSBjb21wYXRpYmlsaXR5SlNPTiB2MyBmb3JtYXQgaGFuZGxpbmcuIikpLHRoaXMucnVsZXM9ZnIoKSx0aGlzLnBsdXJhbFJ1bGVzQ2FjaGU9e319YWRkUnVsZShlLHQpe3RoaXMucnVsZXNbZV09dH1jbGVhckNhY2hlKCl7dGhpcy5wbHVyYWxSdWxlc0NhY2hlPXt9fWdldFJ1bGUoZSl7bGV0IHQ9YXJndW1lbnRzLmxlbmd0aD4xJiZhcmd1bWVudHNbMV0hPT12b2lkIDA/YXJndW1lbnRzWzFdOnt9O2lmKHRoaXMuc2hvdWxkVXNlSW50bEFwaSgpKXRyeXtjb25zdCByPWxlKGU9PT0iZGV2Ij8iZW4iOmUpLGk9dC5vcmRpbmFsPyJvcmRpbmFsIjoiY2FyZGluYWwiLHM9SlNPTi5zdHJpbmdpZnkoe2NsZWFuZWRDb2RlOnIsdHlwZTppfSk7aWYocyBpbiB0aGlzLnBsdXJhbFJ1bGVzQ2FjaGUpcmV0dXJuIHRoaXMucGx1cmFsUnVsZXNDYWNoZVtzXTtjb25zdCBhPW5ldyBJbnRsLlBsdXJhbFJ1bGVzKHIse3R5cGU6aX0pO3JldHVybiB0aGlzLnBsdXJhbFJ1bGVzQ2FjaGVbc109YSxhfWNhdGNoe3JldHVybn1yZXR1cm4gdGhpcy5ydWxlc1tlXXx8dGhpcy5ydWxlc1t0aGlzLmxhbmd1YWdlVXRpbHMuZ2V0TGFuZ3VhZ2VQYXJ0RnJvbUNvZGUoZSldfW5lZWRzUGx1cmFsKGUpe2xldCB0PWFyZ3VtZW50cy5sZW5ndGg+MSYmYXJndW1lbnRzWzFdIT09dm9pZCAwP2FyZ3VtZW50c1sxXTp7fTtjb25zdCByPXRoaXMuZ2V0UnVsZShlLHQpO3JldHVybiB0aGlzLnNob3VsZFVzZUludGxBcGkoKT9yJiZyLnJlc29sdmVkT3B0aW9ucygpLnBsdXJhbENhdGVnb3JpZXMubGVuZ3RoPjE6ciYmci5udW1iZXJzLmxlbmd0aD4xfWdldFBsdXJhbEZvcm1zT2ZLZXkoZSx0KXtsZXQgcj1hcmd1bWVudHMubGVuZ3RoPjImJmFyZ3VtZW50c1syXSE9PXZvaWQgMD9hcmd1bWVudHNbMl06e307cmV0dXJuIHRoaXMuZ2V0U3VmZml4ZXMoZSxyKS5tYXAoaT0+YCR7dH0ke2l9YCl9Z2V0U3VmZml4ZXMoZSl7bGV0IHQ9YXJndW1lbnRzLmxlbmd0aD4xJiZhcmd1bWVudHNbMV0hPT12b2lkIDA/YXJndW1lbnRzWzFdOnt9O2NvbnN0IHI9dGhpcy5nZXRSdWxlKGUsdCk7cmV0dXJuIHI/dGhpcy5zaG91bGRVc2VJbnRsQXBpKCk/ci5yZXNvbHZlZE9wdGlvbnMoKS5wbHVyYWxDYXRlZ29yaWVzLnNvcnQoKGkscyk9Pl9lW2ldLV9lW3NdKS5tYXAoaT0+YCR7dGhpcy5vcHRpb25zLnByZXBlbmR9JHt0Lm9yZGluYWw/YG9yZGluYWwke3RoaXMub3B0aW9ucy5wcmVwZW5kfWA6IiJ9JHtpfWApOnIubnVtYmVycy5tYXAoaT0+dGhpcy5nZXRTdWZmaXgoZSxpLHQpKTpbXX1nZXRTdWZmaXgoZSx0KXtsZXQgcj1hcmd1bWVudHMubGVuZ3RoPjImJmFyZ3VtZW50c1syXSE9PXZvaWQgMD9hcmd1bWVudHNbMl06e307Y29uc3QgaT10aGlzLmdldFJ1bGUoZSxyKTtyZXR1cm4gaT90aGlzLnNob3VsZFVzZUludGxBcGkoKT9gJHt0aGlzLm9wdGlvbnMucHJlcGVuZH0ke3Iub3JkaW5hbD9gb3JkaW5hbCR7dGhpcy5vcHRpb25zLnByZXBlbmR9YDoiIn0ke2kuc2VsZWN0KHQpfWA6dGhpcy5nZXRTdWZmaXhSZXRyb0NvbXBhdGlibGUoaSx0KToodGhpcy5sb2dnZXIud2Fybihgbm8gcGx1cmFsIHJ1bGUgZm91bmQgZm9yOiAke2V9YCksIiIpfWdldFN1ZmZpeFJldHJvQ29tcGF0aWJsZShlLHQpe2NvbnN0IHI9ZS5ub0Ficz9lLnBsdXJhbHModCk6ZS5wbHVyYWxzKE1hdGguYWJzKHQpKTtsZXQgaT1lLm51bWJlcnNbcl07dGhpcy5vcHRpb25zLnNpbXBsaWZ5UGx1cmFsU3VmZml4JiZlLm51bWJlcnMubGVuZ3RoPT09MiYmZS5udW1iZXJzWzBdPT09MSYmKGk9PT0yP2k9InBsdXJhbCI6aT09PTEmJihpPSIiKSk7Y29uc3Qgcz0oKT0+dGhpcy5vcHRpb25zLnByZXBlbmQmJmkudG9TdHJpbmcoKT90aGlzLm9wdGlvbnMucHJlcGVuZCtpLnRvU3RyaW5nKCk6aS50b1N0cmluZygpO3JldHVybiB0aGlzLm9wdGlvbnMuY29tcGF0aWJpbGl0eUpTT049PT0idjEiP2k9PT0xPyIiOnR5cGVvZiBpPT0ibnVtYmVyIj9gX3BsdXJhbF8ke2kudG9TdHJpbmcoKX1gOnMoKTp0aGlzLm9wdGlvbnMuY29tcGF0aWJpbGl0eUpTT049PT0idjIifHx0aGlzLm9wdGlvbnMuc2ltcGxpZnlQbHVyYWxTdWZmaXgmJmUubnVtYmVycy5sZW5ndGg9PT0yJiZlLm51bWJlcnNbMF09PT0xP3MoKTp0aGlzLm9wdGlvbnMucHJlcGVuZCYmci50b1N0cmluZygpP3RoaXMub3B0aW9ucy5wcmVwZW5kK3IudG9TdHJpbmcoKTpyLnRvU3RyaW5nKCl9c2hvdWxkVXNlSW50bEFwaSgpe3JldHVybiFsci5pbmNsdWRlcyh0aGlzLm9wdGlvbnMuY29tcGF0aWJpbGl0eUpTT04pfX1jb25zdCBWZT1mdW5jdGlvbihuLGUsdCl7bGV0IHI9YXJndW1lbnRzLmxlbmd0aD4zJiZhcmd1bWVudHNbM10hPT12b2lkIDA/YXJndW1lbnRzWzNdOiIuIixpPWFyZ3VtZW50cy5sZW5ndGg+NCYmYXJndW1lbnRzWzRdIT09dm9pZCAwP2FyZ3VtZW50c1s0XTohMCxzPVh0KG4sZSx0KTtyZXR1cm4hcyYmaSYmdHlwZW9mIHQ9PSJzdHJpbmciJiYocz1MZShuLHQscikscz09PXZvaWQgMCYmKHM9TGUoZSx0LHIpKSksc30seWU9bj0+bi5yZXBsYWNlKC9cJC9nLCIkJCQkIik7Y2xhc3MgcHJ7Y29uc3RydWN0b3IoKXtsZXQgZT1hcmd1bWVudHMubGVuZ3RoPjAmJmFyZ3VtZW50c1swXSE9PXZvaWQgMD9hcmd1bWVudHNbMF06e307dGhpcy5sb2dnZXI9Qy5jcmVhdGUoImludGVycG9sYXRvciIpLHRoaXMub3B0aW9ucz1lLHRoaXMuZm9ybWF0PWUuaW50ZXJwb2xhdGlvbiYmZS5pbnRlcnBvbGF0aW9uLmZvcm1hdHx8KHQ9PnQpLHRoaXMuaW5pdChlKX1pbml0KCl7bGV0IGU9YXJndW1lbnRzLmxlbmd0aD4wJiZhcmd1bWVudHNbMF0hPT12b2lkIDA/YXJndW1lbnRzWzBdOnt9O2UuaW50ZXJwb2xhdGlvbnx8KGUuaW50ZXJwb2xhdGlvbj17ZXNjYXBlVmFsdWU6ITB9KTtjb25zdHtlc2NhcGU6dCxlc2NhcGVWYWx1ZTpyLHVzZVJhd1ZhbHVlVG9Fc2NhcGU6aSxwcmVmaXg6cyxwcmVmaXhFc2NhcGVkOmEsc3VmZml4Om8sc3VmZml4RXNjYXBlZDpsLGZvcm1hdFNlcGFyYXRvcjpmLHVuZXNjYXBlU3VmZml4OmMsdW5lc2NhcGVQcmVmaXg6ZyxuZXN0aW5nUHJlZml4OnUsbmVzdGluZ1ByZWZpeEVzY2FwZWQ6cCxuZXN0aW5nU3VmZml4OmQsbmVzdGluZ1N1ZmZpeEVzY2FwZWQ6bSxuZXN0aW5nT3B0aW9uc1NlcGFyYXRvcjp5LG1heFJlcGxhY2VzOngsYWx3YXlzRm9ybWF0OlN9PWUuaW50ZXJwb2xhdGlvbjt0aGlzLmVzY2FwZT10IT09dm9pZCAwP3Q6dHIsdGhpcy5lc2NhcGVWYWx1ZT1yIT09dm9pZCAwP3I6ITAsdGhpcy51c2VSYXdWYWx1ZVRvRXNjYXBlPWkhPT12b2lkIDA/aTohMSx0aGlzLnByZWZpeD1zP04ocyk6YXx8Int7Iix0aGlzLnN1ZmZpeD1vP04obyk6bHx8In19Iix0aGlzLmZvcm1hdFNlcGFyYXRvcj1mfHwiLCIsdGhpcy51bmVzY2FwZVByZWZpeD1jPyIiOmd8fCItIix0aGlzLnVuZXNjYXBlU3VmZml4PXRoaXMudW5lc2NhcGVQcmVmaXg/IiI6Y3x8IiIsdGhpcy5uZXN0aW5nUHJlZml4PXU/Tih1KTpwfHxOKCIkdCgiKSx0aGlzLm5lc3RpbmdTdWZmaXg9ZD9OKGQpOm18fE4oIikiKSx0aGlzLm5lc3RpbmdPcHRpb25zU2VwYXJhdG9yPXl8fCIsIix0aGlzLm1heFJlcGxhY2VzPXh8fDFlMyx0aGlzLmFsd2F5c0Zvcm1hdD1TIT09dm9pZCAwP1M6ITEsdGhpcy5yZXNldFJlZ0V4cCgpfXJlc2V0KCl7dGhpcy5vcHRpb25zJiZ0aGlzLmluaXQodGhpcy5vcHRpb25zKX1yZXNldFJlZ0V4cCgpe2NvbnN0IGU9KHQscik9PnQmJnQuc291cmNlPT09cj8odC5sYXN0SW5kZXg9MCx0KTpuZXcgUmVnRXhwKHIsImciKTt0aGlzLnJlZ2V4cD1lKHRoaXMucmVnZXhwLGAke3RoaXMucHJlZml4fSguKz8pJHt0aGlzLnN1ZmZpeH1gKSx0aGlzLnJlZ2V4cFVuZXNjYXBlPWUodGhpcy5yZWdleHBVbmVzY2FwZSxgJHt0aGlzLnByZWZpeH0ke3RoaXMudW5lc2NhcGVQcmVmaXh9KC4rPykke3RoaXMudW5lc2NhcGVTdWZmaXh9JHt0aGlzLnN1ZmZpeH1gKSx0aGlzLm5lc3RpbmdSZWdleHA9ZSh0aGlzLm5lc3RpbmdSZWdleHAsYCR7dGhpcy5uZXN0aW5nUHJlZml4fSguKz8pJHt0aGlzLm5lc3RpbmdTdWZmaXh9YCl9aW50ZXJwb2xhdGUoZSx0LHIsaSl7bGV0IHMsYSxvO2NvbnN0IGw9dGhpcy5vcHRpb25zJiZ0aGlzLm9wdGlvbnMuaW50ZXJwb2xhdGlvbiYmdGhpcy5vcHRpb25zLmludGVycG9sYXRpb24uZGVmYXVsdFZhcmlhYmxlc3x8e30sZj1wPT57aWYocC5pbmRleE9mKHRoaXMuZm9ybWF0U2VwYXJhdG9yKTwwKXtjb25zdCB4PVZlKHQsbCxwLHRoaXMub3B0aW9ucy5rZXlTZXBhcmF0b3IsdGhpcy5vcHRpb25zLmlnbm9yZUpTT05TdHJ1Y3R1cmUpO3JldHVybiB0aGlzLmFsd2F5c0Zvcm1hdD90aGlzLmZvcm1hdCh4LHZvaWQgMCxyLHsuLi5pLC4uLnQsaW50ZXJwb2xhdGlvbmtleTpwfSk6eH1jb25zdCBkPXAuc3BsaXQodGhpcy5mb3JtYXRTZXBhcmF0b3IpLG09ZC5zaGlmdCgpLnRyaW0oKSx5PWQuam9pbih0aGlzLmZvcm1hdFNlcGFyYXRvcikudHJpbSgpO3JldHVybiB0aGlzLmZvcm1hdChWZSh0LGwsbSx0aGlzLm9wdGlvbnMua2V5U2VwYXJhdG9yLHRoaXMub3B0aW9ucy5pZ25vcmVKU09OU3RydWN0dXJlKSx5LHIsey4uLmksLi4udCxpbnRlcnBvbGF0aW9ua2V5Om19KX07dGhpcy5yZXNldFJlZ0V4cCgpO2NvbnN0IGM9aSYmaS5taXNzaW5nSW50ZXJwb2xhdGlvbkhhbmRsZXJ8fHRoaXMub3B0aW9ucy5taXNzaW5nSW50ZXJwb2xhdGlvbkhhbmRsZXIsZz1pJiZpLmludGVycG9sYXRpb24mJmkuaW50ZXJwb2xhdGlvbi5za2lwT25WYXJpYWJsZXMhPT12b2lkIDA/aS5pbnRlcnBvbGF0aW9uLnNraXBPblZhcmlhYmxlczp0aGlzLm9wdGlvbnMuaW50ZXJwb2xhdGlvbi5za2lwT25WYXJpYWJsZXM7cmV0dXJuW3tyZWdleDp0aGlzLnJlZ2V4cFVuZXNjYXBlLHNhZmVWYWx1ZTpwPT55ZShwKX0se3JlZ2V4OnRoaXMucmVnZXhwLHNhZmVWYWx1ZTpwPT50aGlzLmVzY2FwZVZhbHVlP3llKHRoaXMuZXNjYXBlKHApKTp5ZShwKX1dLmZvckVhY2gocD0+e2ZvcihvPTA7cz1wLnJlZ2V4LmV4ZWMoZSk7KXtjb25zdCBkPXNbMV0udHJpbSgpO2lmKGE9ZihkKSxhPT09dm9pZCAwKWlmKHR5cGVvZiBjPT0iZnVuY3Rpb24iKXtjb25zdCB5PWMoZSxzLGkpO2E9dHlwZW9mIHk9PSJzdHJpbmciP3k6IiJ9ZWxzZSBpZihpJiZPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoaSxkKSlhPSIiO2Vsc2UgaWYoZyl7YT1zWzBdO2NvbnRpbnVlfWVsc2UgdGhpcy5sb2dnZXIud2FybihgbWlzc2VkIHRvIHBhc3MgaW4gdmFyaWFibGUgJHtkfSBmb3IgaW50ZXJwb2xhdGluZyAke2V9YCksYT0iIjtlbHNlIHR5cGVvZiBhIT0ic3RyaW5nIiYmIXRoaXMudXNlUmF3VmFsdWVUb0VzY2FwZSYmKGE9TWUoYSkpO2NvbnN0IG09cC5zYWZlVmFsdWUoYSk7aWYoZT1lLnJlcGxhY2Uoc1swXSxtKSxnPyhwLnJlZ2V4Lmxhc3RJbmRleCs9YS5sZW5ndGgscC5yZWdleC5sYXN0SW5kZXgtPXNbMF0ubGVuZ3RoKTpwLnJlZ2V4Lmxhc3RJbmRleD0wLG8rKyxvPj10aGlzLm1heFJlcGxhY2VzKWJyZWFrfX0pLGV9bmVzdChlLHQpe2xldCByPWFyZ3VtZW50cy5sZW5ndGg+MiYmYXJndW1lbnRzWzJdIT09dm9pZCAwP2FyZ3VtZW50c1syXTp7fSxpLHMsYTtjb25zdCBvPShsLGYpPT57Y29uc3QgYz10aGlzLm5lc3RpbmdPcHRpb25zU2VwYXJhdG9yO2lmKGwuaW5kZXhPZihjKTwwKXJldHVybiBsO2NvbnN0IGc9bC5zcGxpdChuZXcgUmVnRXhwKGAke2N9WyBdKntgKSk7bGV0IHU9YHske2dbMV19YDtsPWdbMF0sdT10aGlzLmludGVycG9sYXRlKHUsYSk7Y29uc3QgcD11Lm1hdGNoKC8nL2cpLGQ9dS5tYXRjaCgvIi9nKTsocCYmcC5sZW5ndGglMj09PTAmJiFkfHxkLmxlbmd0aCUyIT09MCkmJih1PXUucmVwbGFjZSgvJy9nLCciJykpO3RyeXthPUpTT04ucGFyc2UodSksZiYmKGE9ey4uLmYsLi4uYX0pfWNhdGNoKG0pe3JldHVybiB0aGlzLmxvZ2dlci53YXJuKGBmYWlsZWQgcGFyc2luZyBvcHRpb25zIHN0cmluZyBpbiBuZXN0aW5nIGZvciBrZXkgJHtsfWAsbSksYCR7bH0ke2N9JHt1fWB9cmV0dXJuIGEuZGVmYXVsdFZhbHVlJiZhLmRlZmF1bHRWYWx1ZS5pbmRleE9mKHRoaXMucHJlZml4KT4tMSYmZGVsZXRlIGEuZGVmYXVsdFZhbHVlLGx9O2Zvcig7aT10aGlzLm5lc3RpbmdSZWdleHAuZXhlYyhlKTspe2xldCBsPVtdO2E9ey4uLnJ9LGE9YS5yZXBsYWNlJiZ0eXBlb2YgYS5yZXBsYWNlIT0ic3RyaW5nIj9hLnJlcGxhY2U6YSxhLmFwcGx5UG9zdFByb2Nlc3Nvcj0hMSxkZWxldGUgYS5kZWZhdWx0VmFsdWU7bGV0IGY9ITE7aWYoaVswXS5pbmRleE9mKHRoaXMuZm9ybWF0U2VwYXJhdG9yKSE9PS0xJiYhL3suKn0vLnRlc3QoaVsxXSkpe2NvbnN0IGM9aVsxXS5zcGxpdCh0aGlzLmZvcm1hdFNlcGFyYXRvcikubWFwKGc9PmcudHJpbSgpKTtpWzFdPWMuc2hpZnQoKSxsPWMsZj0hMH1pZihzPXQoby5jYWxsKHRoaXMsaVsxXS50cmltKCksYSksYSkscyYmaVswXT09PWUmJnR5cGVvZiBzIT0ic3RyaW5nIilyZXR1cm4gczt0eXBlb2YgcyE9InN0cmluZyImJihzPU1lKHMpKSxzfHwodGhpcy5sb2dnZXIud2FybihgbWlzc2VkIHRvIHJlc29sdmUgJHtpWzFdfSBmb3IgbmVzdGluZyAke2V9YCkscz0iIiksZiYmKHM9bC5yZWR1Y2UoKGMsZyk9PnRoaXMuZm9ybWF0KGMsZyxyLmxuZyx7Li4ucixpbnRlcnBvbGF0aW9ua2V5OmlbMV0udHJpbSgpfSkscy50cmltKCkpKSxlPWUucmVwbGFjZShpWzBdLHMpLHRoaXMucmVnZXhwLmxhc3RJbmRleD0wfXJldHVybiBlfX1jb25zdCBncj1uPT57bGV0IGU9bi50b0xvd2VyQ2FzZSgpLnRyaW0oKTtjb25zdCB0PXt9O2lmKG4uaW5kZXhPZigiKCIpPi0xKXtjb25zdCByPW4uc3BsaXQoIigiKTtlPXJbMF0udG9Mb3dlckNhc2UoKS50cmltKCk7Y29uc3QgaT1yWzFdLnN1YnN0cmluZygwLHJbMV0ubGVuZ3RoLTEpO2U9PT0iY3VycmVuY3kiJiZpLmluZGV4T2YoIjoiKTwwP3QuY3VycmVuY3l8fCh0LmN1cnJlbmN5PWkudHJpbSgpKTplPT09InJlbGF0aXZldGltZSImJmkuaW5kZXhPZigiOiIpPDA/dC5yYW5nZXx8KHQucmFuZ2U9aS50cmltKCkpOmkuc3BsaXQoIjsiKS5mb3JFYWNoKGE9PntpZihhKXtjb25zdFtvLC4uLmxdPWEuc3BsaXQoIjoiKSxmPWwuam9pbigiOiIpLnRyaW0oKS5yZXBsYWNlKC9eJyt8JyskL2csIiIpLGM9by50cmltKCk7dFtjXXx8KHRbY109ZiksZj09PSJmYWxzZSImJih0W2NdPSExKSxmPT09InRydWUiJiYodFtjXT0hMCksaXNOYU4oZil8fCh0W2NdPXBhcnNlSW50KGYsMTApKX19KX1yZXR1cm57Zm9ybWF0TmFtZTplLGZvcm1hdE9wdGlvbnM6dH19LE09bj0+e2NvbnN0IGU9e307cmV0dXJuKHQscixpKT0+e2xldCBzPWk7aSYmaS5pbnRlcnBvbGF0aW9ua2V5JiZpLmZvcm1hdFBhcmFtcyYmaS5mb3JtYXRQYXJhbXNbaS5pbnRlcnBvbGF0aW9ua2V5XSYmaVtpLmludGVycG9sYXRpb25rZXldJiYocz17Li4ucyxbaS5pbnRlcnBvbGF0aW9ua2V5XTp2b2lkIDB9KTtjb25zdCBhPXIrSlNPTi5zdHJpbmdpZnkocyk7bGV0IG89ZVthXTtyZXR1cm4gb3x8KG89bihsZShyKSxpKSxlW2FdPW8pLG8odCl9fTtjbGFzcyBocntjb25zdHJ1Y3Rvcigpe2xldCBlPWFyZ3VtZW50cy5sZW5ndGg+MCYmYXJndW1lbnRzWzBdIT09dm9pZCAwP2FyZ3VtZW50c1swXTp7fTt0aGlzLmxvZ2dlcj1DLmNyZWF0ZSgiZm9ybWF0dGVyIiksdGhpcy5vcHRpb25zPWUsdGhpcy5mb3JtYXRzPXtudW1iZXI6TSgodCxyKT0+e2NvbnN0IGk9bmV3IEludGwuTnVtYmVyRm9ybWF0KHQsey4uLnJ9KTtyZXR1cm4gcz0+aS5mb3JtYXQocyl9KSxjdXJyZW5jeTpNKCh0LHIpPT57Y29uc3QgaT1uZXcgSW50bC5OdW1iZXJGb3JtYXQodCx7Li4ucixzdHlsZToiY3VycmVuY3kifSk7cmV0dXJuIHM9PmkuZm9ybWF0KHMpfSksZGF0ZXRpbWU6TSgodCxyKT0+e2NvbnN0IGk9bmV3IEludGwuRGF0ZVRpbWVGb3JtYXQodCx7Li4ucn0pO3JldHVybiBzPT5pLmZvcm1hdChzKX0pLHJlbGF0aXZldGltZTpNKCh0LHIpPT57Y29uc3QgaT1uZXcgSW50bC5SZWxhdGl2ZVRpbWVGb3JtYXQodCx7Li4ucn0pO3JldHVybiBzPT5pLmZvcm1hdChzLHIucmFuZ2V8fCJkYXkiKX0pLGxpc3Q6TSgodCxyKT0+e2NvbnN0IGk9bmV3IEludGwuTGlzdEZvcm1hdCh0LHsuLi5yfSk7cmV0dXJuIHM9PmkuZm9ybWF0KHMpfSl9LHRoaXMuaW5pdChlKX1pbml0KGUpe2NvbnN0IHI9KGFyZ3VtZW50cy5sZW5ndGg+MSYmYXJndW1lbnRzWzFdIT09dm9pZCAwP2FyZ3VtZW50c1sxXTp7aW50ZXJwb2xhdGlvbjp7fX0pLmludGVycG9sYXRpb247dGhpcy5mb3JtYXRTZXBhcmF0b3I9ci5mb3JtYXRTZXBhcmF0b3I/ci5mb3JtYXRTZXBhcmF0b3I6ci5mb3JtYXRTZXBhcmF0b3J8fCIsIn1hZGQoZSx0KXt0aGlzLmZvcm1hdHNbZS50b0xvd2VyQ2FzZSgpLnRyaW0oKV09dH1hZGRDYWNoZWQoZSx0KXt0aGlzLmZvcm1hdHNbZS50b0xvd2VyQ2FzZSgpLnRyaW0oKV09TSh0KX1mb3JtYXQoZSx0LHIpe2xldCBpPWFyZ3VtZW50cy5sZW5ndGg+MyYmYXJndW1lbnRzWzNdIT09dm9pZCAwP2FyZ3VtZW50c1szXTp7fTtjb25zdCBzPXQuc3BsaXQodGhpcy5mb3JtYXRTZXBhcmF0b3IpO2lmKHMubGVuZ3RoPjEmJnNbMF0uaW5kZXhPZigiKCIpPjEmJnNbMF0uaW5kZXhPZigiKSIpPDAmJnMuZmluZChvPT5vLmluZGV4T2YoIikiKT4tMSkpe2NvbnN0IG89cy5maW5kSW5kZXgobD0+bC5pbmRleE9mKCIpIik+LTEpO3NbMF09W3NbMF0sLi4ucy5zcGxpY2UoMSxvKV0uam9pbih0aGlzLmZvcm1hdFNlcGFyYXRvcil9cmV0dXJuIHMucmVkdWNlKChvLGwpPT57Y29uc3R7Zm9ybWF0TmFtZTpmLGZvcm1hdE9wdGlvbnM6Y309Z3IobCk7aWYodGhpcy5mb3JtYXRzW2ZdKXtsZXQgZz1vO3RyeXtjb25zdCB1PWkmJmkuZm9ybWF0UGFyYW1zJiZpLmZvcm1hdFBhcmFtc1tpLmludGVycG9sYXRpb25rZXldfHx7fSxwPXUubG9jYWxlfHx1LmxuZ3x8aS5sb2NhbGV8fGkubG5nfHxyO2c9dGhpcy5mb3JtYXRzW2ZdKG8scCx7Li4uYywuLi5pLC4uLnV9KX1jYXRjaCh1KXt0aGlzLmxvZ2dlci53YXJuKHUpfXJldHVybiBnfWVsc2UgdGhpcy5sb2dnZXIud2FybihgdGhlcmUgd2FzIG5vIGZvcm1hdCBmdW5jdGlvbiBmb3IgJHtmfWApO3JldHVybiBvfSxlKX19Y29uc3QgZHI9KG4sZSk9PntuLnBlbmRpbmdbZV0hPT12b2lkIDAmJihkZWxldGUgbi5wZW5kaW5nW2VdLG4ucGVuZGluZ0NvdW50LS0pfTtjbGFzcyBtciBleHRlbmRzIGhle2NvbnN0cnVjdG9yKGUsdCxyKXtsZXQgaT1hcmd1bWVudHMubGVuZ3RoPjMmJmFyZ3VtZW50c1szXSE9PXZvaWQgMD9hcmd1bWVudHNbM106e307c3VwZXIoKSx0aGlzLmJhY2tlbmQ9ZSx0aGlzLnN0b3JlPXQsdGhpcy5zZXJ2aWNlcz1yLHRoaXMubGFuZ3VhZ2VVdGlscz1yLmxhbmd1YWdlVXRpbHMsdGhpcy5vcHRpb25zPWksdGhpcy5sb2dnZXI9Qy5jcmVhdGUoImJhY2tlbmRDb25uZWN0b3IiKSx0aGlzLndhaXRpbmdSZWFkcz1bXSx0aGlzLm1heFBhcmFsbGVsUmVhZHM9aS5tYXhQYXJhbGxlbFJlYWRzfHwxMCx0aGlzLnJlYWRpbmdDYWxscz0wLHRoaXMubWF4UmV0cmllcz1pLm1heFJldHJpZXM+PTA/aS5tYXhSZXRyaWVzOjUsdGhpcy5yZXRyeVRpbWVvdXQ9aS5yZXRyeVRpbWVvdXQ+PTE/aS5yZXRyeVRpbWVvdXQ6MzUwLHRoaXMuc3RhdGU9e30sdGhpcy5xdWV1ZT1bXSx0aGlzLmJhY2tlbmQmJnRoaXMuYmFja2VuZC5pbml0JiZ0aGlzLmJhY2tlbmQuaW5pdChyLGkuYmFja2VuZCxpKX1xdWV1ZUxvYWQoZSx0LHIsaSl7Y29uc3Qgcz17fSxhPXt9LG89e30sbD17fTtyZXR1cm4gZS5mb3JFYWNoKGY9PntsZXQgYz0hMDt0LmZvckVhY2goZz0+e2NvbnN0IHU9YCR7Zn18JHtnfWA7IXIucmVsb2FkJiZ0aGlzLnN0b3JlLmhhc1Jlc291cmNlQnVuZGxlKGYsZyk/dGhpcy5zdGF0ZVt1XT0yOnRoaXMuc3RhdGVbdV08MHx8KHRoaXMuc3RhdGVbdV09PT0xP2FbdV09PT12b2lkIDAmJihhW3VdPSEwKToodGhpcy5zdGF0ZVt1XT0xLGM9ITEsYVt1XT09PXZvaWQgMCYmKGFbdV09ITApLHNbdV09PT12b2lkIDAmJihzW3VdPSEwKSxsW2ddPT09dm9pZCAwJiYobFtnXT0hMCkpKX0pLGN8fChvW2ZdPSEwKX0pLChPYmplY3Qua2V5cyhzKS5sZW5ndGh8fE9iamVjdC5rZXlzKGEpLmxlbmd0aCkmJnRoaXMucXVldWUucHVzaCh7cGVuZGluZzphLHBlbmRpbmdDb3VudDpPYmplY3Qua2V5cyhhKS5sZW5ndGgsbG9hZGVkOnt9LGVycm9yczpbXSxjYWxsYmFjazppfSkse3RvTG9hZDpPYmplY3Qua2V5cyhzKSxwZW5kaW5nOk9iamVjdC5rZXlzKGEpLHRvTG9hZExhbmd1YWdlczpPYmplY3Qua2V5cyhvKSx0b0xvYWROYW1lc3BhY2VzOk9iamVjdC5rZXlzKGwpfX1sb2FkZWQoZSx0LHIpe2NvbnN0IGk9ZS5zcGxpdCgifCIpLHM9aVswXSxhPWlbMV07dCYmdGhpcy5lbWl0KCJmYWlsZWRMb2FkaW5nIixzLGEsdCksIXQmJnImJnRoaXMuc3RvcmUuYWRkUmVzb3VyY2VCdW5kbGUocyxhLHIsdm9pZCAwLHZvaWQgMCx7c2tpcENvcHk6ITB9KSx0aGlzLnN0YXRlW2VdPXQ/LTE6Mix0JiZyJiYodGhpcy5zdGF0ZVtlXT0wKTtjb25zdCBvPXt9O3RoaXMucXVldWUuZm9yRWFjaChsPT57WnQobC5sb2FkZWQsW3NdLGEpLGRyKGwsZSksdCYmbC5lcnJvcnMucHVzaCh0KSxsLnBlbmRpbmdDb3VudD09PTAmJiFsLmRvbmUmJihPYmplY3Qua2V5cyhsLmxvYWRlZCkuZm9yRWFjaChmPT57b1tmXXx8KG9bZl09e30pO2NvbnN0IGM9bC5sb2FkZWRbZl07Yy5sZW5ndGgmJmMuZm9yRWFjaChnPT57b1tmXVtnXT09PXZvaWQgMCYmKG9bZl1bZ109ITApfSl9KSxsLmRvbmU9ITAsbC5lcnJvcnMubGVuZ3RoP2wuY2FsbGJhY2sobC5lcnJvcnMpOmwuY2FsbGJhY2soKSl9KSx0aGlzLmVtaXQoImxvYWRlZCIsbyksdGhpcy5xdWV1ZT10aGlzLnF1ZXVlLmZpbHRlcihsPT4hbC5kb25lKX1yZWFkKGUsdCxyKXtsZXQgaT1hcmd1bWVudHMubGVuZ3RoPjMmJmFyZ3VtZW50c1szXSE9PXZvaWQgMD9hcmd1bWVudHNbM106MCxzPWFyZ3VtZW50cy5sZW5ndGg+NCYmYXJndW1lbnRzWzRdIT09dm9pZCAwP2FyZ3VtZW50c1s0XTp0aGlzLnJldHJ5VGltZW91dCxhPWFyZ3VtZW50cy5sZW5ndGg+NT9hcmd1bWVudHNbNV06dm9pZCAwO2lmKCFlLmxlbmd0aClyZXR1cm4gYShudWxsLHt9KTtpZih0aGlzLnJlYWRpbmdDYWxscz49dGhpcy5tYXhQYXJhbGxlbFJlYWRzKXt0aGlzLndhaXRpbmdSZWFkcy5wdXNoKHtsbmc6ZSxuczp0LGZjTmFtZTpyLHRyaWVkOmksd2FpdDpzLGNhbGxiYWNrOmF9KTtyZXR1cm59dGhpcy5yZWFkaW5nQ2FsbHMrKztjb25zdCBvPShmLGMpPT57aWYodGhpcy5yZWFkaW5nQ2FsbHMtLSx0aGlzLndhaXRpbmdSZWFkcy5sZW5ndGg+MCl7Y29uc3QgZz10aGlzLndhaXRpbmdSZWFkcy5zaGlmdCgpO3RoaXMucmVhZChnLmxuZyxnLm5zLGcuZmNOYW1lLGcudHJpZWQsZy53YWl0LGcuY2FsbGJhY2spfWlmKGYmJmMmJmk8dGhpcy5tYXhSZXRyaWVzKXtzZXRUaW1lb3V0KCgpPT57dGhpcy5yZWFkLmNhbGwodGhpcyxlLHQscixpKzEscyoyLGEpfSxzKTtyZXR1cm59YShmLGMpfSxsPXRoaXMuYmFja2VuZFtyXS5iaW5kKHRoaXMuYmFja2VuZCk7aWYobC5sZW5ndGg9PT0yKXt0cnl7Y29uc3QgZj1sKGUsdCk7ZiYmdHlwZW9mIGYudGhlbj09ImZ1bmN0aW9uIj9mLnRoZW4oYz0+byhudWxsLGMpKS5jYXRjaChvKTpvKG51bGwsZil9Y2F0Y2goZil7byhmKX1yZXR1cm59cmV0dXJuIGwoZSx0LG8pfXByZXBhcmVMb2FkaW5nKGUsdCl7bGV0IHI9YXJndW1lbnRzLmxlbmd0aD4yJiZhcmd1bWVudHNbMl0hPT12b2lkIDA/YXJndW1lbnRzWzJdOnt9LGk9YXJndW1lbnRzLmxlbmd0aD4zP2FyZ3VtZW50c1szXTp2b2lkIDA7aWYoIXRoaXMuYmFja2VuZClyZXR1cm4gdGhpcy5sb2dnZXIud2FybigiTm8gYmFja2VuZCB3YXMgYWRkZWQgdmlhIGkxOG5leHQudXNlLiBXaWxsIG5vdCBsb2FkIHJlc291cmNlcy4iKSxpJiZpKCk7dHlwZW9mIGU9PSJzdHJpbmciJiYoZT10aGlzLmxhbmd1YWdlVXRpbHMudG9SZXNvbHZlSGllcmFyY2h5KGUpKSx0eXBlb2YgdD09InN0cmluZyImJih0PVt0XSk7Y29uc3Qgcz10aGlzLnF1ZXVlTG9hZChlLHQscixpKTtpZighcy50b0xvYWQubGVuZ3RoKXJldHVybiBzLnBlbmRpbmcubGVuZ3RofHxpKCksbnVsbDtzLnRvTG9hZC5mb3JFYWNoKGE9Pnt0aGlzLmxvYWRPbmUoYSl9KX1sb2FkKGUsdCxyKXt0aGlzLnByZXBhcmVMb2FkaW5nKGUsdCx7fSxyKX1yZWxvYWQoZSx0LHIpe3RoaXMucHJlcGFyZUxvYWRpbmcoZSx0LHtyZWxvYWQ6ITB9LHIpfWxvYWRPbmUoZSl7bGV0IHQ9YXJndW1lbnRzLmxlbmd0aD4xJiZhcmd1bWVudHNbMV0hPT12b2lkIDA/YXJndW1lbnRzWzFdOiIiO2NvbnN0IHI9ZS5zcGxpdCgifCIpLGk9clswXSxzPXJbMV07dGhpcy5yZWFkKGkscywicmVhZCIsdm9pZCAwLHZvaWQgMCwoYSxvKT0+e2EmJnRoaXMubG9nZ2VyLndhcm4oYCR7dH1sb2FkaW5nIG5hbWVzcGFjZSAke3N9IGZvciBsYW5ndWFnZSAke2l9IGZhaWxlZGAsYSksIWEmJm8mJnRoaXMubG9nZ2VyLmxvZyhgJHt0fWxvYWRlZCBuYW1lc3BhY2UgJHtzfSBmb3IgbGFuZ3VhZ2UgJHtpfWAsbyksdGhpcy5sb2FkZWQoZSxhLG8pfSl9c2F2ZU1pc3NpbmcoZSx0LHIsaSxzKXtsZXQgYT1hcmd1bWVudHMubGVuZ3RoPjUmJmFyZ3VtZW50c1s1XSE9PXZvaWQgMD9hcmd1bWVudHNbNV06e30sbz1hcmd1bWVudHMubGVuZ3RoPjYmJmFyZ3VtZW50c1s2XSE9PXZvaWQgMD9hcmd1bWVudHNbNl06KCk9Pnt9O2lmKHRoaXMuc2VydmljZXMudXRpbHMmJnRoaXMuc2VydmljZXMudXRpbHMuaGFzTG9hZGVkTmFtZXNwYWNlJiYhdGhpcy5zZXJ2aWNlcy51dGlscy5oYXNMb2FkZWROYW1lc3BhY2UodCkpe3RoaXMubG9nZ2VyLndhcm4oYGRpZCBub3Qgc2F2ZSBrZXkgIiR7cn0iIGFzIHRoZSBuYW1lc3BhY2UgIiR7dH0iIHdhcyBub3QgeWV0IGxvYWRlZGAsIlRoaXMgbWVhbnMgc29tZXRoaW5nIElTIFdST05HIGluIHlvdXIgc2V0dXAuIFlvdSBhY2Nlc3MgdGhlIHQgZnVuY3Rpb24gYmVmb3JlIGkxOG5leHQuaW5pdCAvIGkxOG5leHQubG9hZE5hbWVzcGFjZSAvIGkxOG5leHQuY2hhbmdlTGFuZ3VhZ2Ugd2FzIGRvbmUuIFdhaXQgZm9yIHRoZSBjYWxsYmFjayBvciBQcm9taXNlIHRvIHJlc29sdmUgYmVmb3JlIGFjY2Vzc2luZyBpdCEhISIpO3JldHVybn1pZighKHI9PW51bGx8fHI9PT0iIikpe2lmKHRoaXMuYmFja2VuZCYmdGhpcy5iYWNrZW5kLmNyZWF0ZSl7Y29uc3QgbD17Li4uYSxpc1VwZGF0ZTpzfSxmPXRoaXMuYmFja2VuZC5jcmVhdGUuYmluZCh0aGlzLmJhY2tlbmQpO2lmKGYubGVuZ3RoPDYpdHJ5e2xldCBjO2YubGVuZ3RoPT09NT9jPWYoZSx0LHIsaSxsKTpjPWYoZSx0LHIsaSksYyYmdHlwZW9mIGMudGhlbj09ImZ1bmN0aW9uIj9jLnRoZW4oZz0+byhudWxsLGcpKS5jYXRjaChvKTpvKG51bGwsYyl9Y2F0Y2goYyl7byhjKX1lbHNlIGYoZSx0LHIsaSxvLGwpfSFlfHwhZVswXXx8dGhpcy5zdG9yZS5hZGRSZXNvdXJjZShlWzBdLHQscixpKX19fWNvbnN0IFdlPSgpPT4oe2RlYnVnOiExLGluaXRJbW1lZGlhdGU6ITAsbnM6WyJ0cmFuc2xhdGlvbiJdLGRlZmF1bHROUzpbInRyYW5zbGF0aW9uIl0sZmFsbGJhY2tMbmc6WyJkZXYiXSxmYWxsYmFja05TOiExLHN1cHBvcnRlZExuZ3M6ITEsbm9uRXhwbGljaXRTdXBwb3J0ZWRMbmdzOiExLGxvYWQ6ImFsbCIscHJlbG9hZDohMSxzaW1wbGlmeVBsdXJhbFN1ZmZpeDohMCxrZXlTZXBhcmF0b3I6Ii4iLG5zU2VwYXJhdG9yOiI6IixwbHVyYWxTZXBhcmF0b3I6Il8iLGNvbnRleHRTZXBhcmF0b3I6Il8iLHBhcnRpYWxCdW5kbGVkTGFuZ3VhZ2VzOiExLHNhdmVNaXNzaW5nOiExLHVwZGF0ZU1pc3Npbmc6ITEsc2F2ZU1pc3NpbmdUbzoiZmFsbGJhY2siLHNhdmVNaXNzaW5nUGx1cmFsczohMCxtaXNzaW5nS2V5SGFuZGxlcjohMSxtaXNzaW5nSW50ZXJwb2xhdGlvbkhhbmRsZXI6ITEscG9zdFByb2Nlc3M6ITEscG9zdFByb2Nlc3NQYXNzUmVzb2x2ZWQ6ITEscmV0dXJuTnVsbDohMSxyZXR1cm5FbXB0eVN0cmluZzohMCxyZXR1cm5PYmplY3RzOiExLGpvaW5BcnJheXM6ITEscmV0dXJuZWRPYmplY3RIYW5kbGVyOiExLHBhcnNlTWlzc2luZ0tleUhhbmRsZXI6ITEsYXBwZW5kTmFtZXNwYWNlVG9NaXNzaW5nS2V5OiExLGFwcGVuZE5hbWVzcGFjZVRvQ0lNb2RlOiExLG92ZXJsb2FkVHJhbnNsYXRpb25PcHRpb25IYW5kbGVyOm49PntsZXQgZT17fTtpZih0eXBlb2YgblsxXT09Im9iamVjdCImJihlPW5bMV0pLHR5cGVvZiBuWzFdPT0ic3RyaW5nIiYmKGUuZGVmYXVsdFZhbHVlPW5bMV0pLHR5cGVvZiBuWzJdPT0ic3RyaW5nIiYmKGUudERlc2NyaXB0aW9uPW5bMl0pLHR5cGVvZiBuWzJdPT0ib2JqZWN0Inx8dHlwZW9mIG5bM109PSJvYmplY3QiKXtjb25zdCB0PW5bM118fG5bMl07T2JqZWN0LmtleXModCkuZm9yRWFjaChyPT57ZVtyXT10W3JdfSl9cmV0dXJuIGV9LGludGVycG9sYXRpb246e2VzY2FwZVZhbHVlOiEwLGZvcm1hdDpuPT5uLHByZWZpeDoie3siLHN1ZmZpeDoifX0iLGZvcm1hdFNlcGFyYXRvcjoiLCIsdW5lc2NhcGVQcmVmaXg6Ii0iLG5lc3RpbmdQcmVmaXg6IiR0KCIsbmVzdGluZ1N1ZmZpeDoiKSIsbmVzdGluZ09wdGlvbnNTZXBhcmF0b3I6IiwiLG1heFJlcGxhY2VzOjFlMyxza2lwT25WYXJpYWJsZXM6ITB9fSksSmU9bj0+KHR5cGVvZiBuLm5zPT0ic3RyaW5nIiYmKG4ubnM9W24ubnNdKSx0eXBlb2Ygbi5mYWxsYmFja0xuZz09InN0cmluZyImJihuLmZhbGxiYWNrTG5nPVtuLmZhbGxiYWNrTG5nXSksdHlwZW9mIG4uZmFsbGJhY2tOUz09InN0cmluZyImJihuLmZhbGxiYWNrTlM9W24uZmFsbGJhY2tOU10pLG4uc3VwcG9ydGVkTG5ncyYmbi5zdXBwb3J0ZWRMbmdzLmluZGV4T2YoImNpbW9kZSIpPDAmJihuLnN1cHBvcnRlZExuZ3M9bi5zdXBwb3J0ZWRMbmdzLmNvbmNhdChbImNpbW9kZSJdKSksbiksWD0oKT0+e30seXI9bj0+e09iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKE9iamVjdC5nZXRQcm90b3R5cGVPZihuKSkuZm9yRWFjaCh0PT57dHlwZW9mIG5bdF09PSJmdW5jdGlvbiImJihuW3RdPW5bdF0uYmluZChuKSl9KX07Y2xhc3MgUSBleHRlbmRzIGhle2NvbnN0cnVjdG9yKCl7bGV0IGU9YXJndW1lbnRzLmxlbmd0aD4wJiZhcmd1bWVudHNbMF0hPT12b2lkIDA/YXJndW1lbnRzWzBdOnt9LHQ9YXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDA7aWYoc3VwZXIoKSx0aGlzLm9wdGlvbnM9SmUoZSksdGhpcy5zZXJ2aWNlcz17fSx0aGlzLmxvZ2dlcj1DLHRoaXMubW9kdWxlcz17ZXh0ZXJuYWw6W119LHlyKHRoaXMpLHQmJiF0aGlzLmlzSW5pdGlhbGl6ZWQmJiFlLmlzQ2xvbmUpe2lmKCF0aGlzLm9wdGlvbnMuaW5pdEltbWVkaWF0ZSlyZXR1cm4gdGhpcy5pbml0KGUsdCksdGhpcztzZXRUaW1lb3V0KCgpPT57dGhpcy5pbml0KGUsdCl9LDApfX1pbml0KCl7dmFyIGU9dGhpcztsZXQgdD1hcmd1bWVudHMubGVuZ3RoPjAmJmFyZ3VtZW50c1swXSE9PXZvaWQgMD9hcmd1bWVudHNbMF06e30scj1hcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMDt0aGlzLmlzSW5pdGlhbGl6aW5nPSEwLHR5cGVvZiB0PT0iZnVuY3Rpb24iJiYocj10LHQ9e30pLCF0LmRlZmF1bHROUyYmdC5kZWZhdWx0TlMhPT0hMSYmdC5ucyYmKHR5cGVvZiB0Lm5zPT0ic3RyaW5nIj90LmRlZmF1bHROUz10Lm5zOnQubnMuaW5kZXhPZigidHJhbnNsYXRpb24iKTwwJiYodC5kZWZhdWx0TlM9dC5uc1swXSkpO2NvbnN0IGk9V2UoKTt0aGlzLm9wdGlvbnM9ey4uLmksLi4udGhpcy5vcHRpb25zLC4uLkplKHQpfSx0aGlzLm9wdGlvbnMuY29tcGF0aWJpbGl0eUFQSSE9PSJ2MSImJih0aGlzLm9wdGlvbnMuaW50ZXJwb2xhdGlvbj17Li4uaS5pbnRlcnBvbGF0aW9uLC4uLnRoaXMub3B0aW9ucy5pbnRlcnBvbGF0aW9ufSksdC5rZXlTZXBhcmF0b3IhPT12b2lkIDAmJih0aGlzLm9wdGlvbnMudXNlckRlZmluZWRLZXlTZXBhcmF0b3I9dC5rZXlTZXBhcmF0b3IpLHQubnNTZXBhcmF0b3IhPT12b2lkIDAmJih0aGlzLm9wdGlvbnMudXNlckRlZmluZWROc1NlcGFyYXRvcj10Lm5zU2VwYXJhdG9yKTtjb25zdCBzPWM9PmM/dHlwZW9mIGM9PSJmdW5jdGlvbiI/bmV3IGM6YzpudWxsO2lmKCF0aGlzLm9wdGlvbnMuaXNDbG9uZSl7dGhpcy5tb2R1bGVzLmxvZ2dlcj9DLmluaXQocyh0aGlzLm1vZHVsZXMubG9nZ2VyKSx0aGlzLm9wdGlvbnMpOkMuaW5pdChudWxsLHRoaXMub3B0aW9ucyk7bGV0IGM7dGhpcy5tb2R1bGVzLmZvcm1hdHRlcj9jPXRoaXMubW9kdWxlcy5mb3JtYXR0ZXI6dHlwZW9mIEludGw8InUiJiYoYz1ocik7Y29uc3QgZz1uZXcgS2UodGhpcy5vcHRpb25zKTt0aGlzLnN0b3JlPW5ldyBHZSh0aGlzLm9wdGlvbnMucmVzb3VyY2VzLHRoaXMub3B0aW9ucyk7Y29uc3QgdT10aGlzLnNlcnZpY2VzO3UubG9nZ2VyPUMsdS5yZXNvdXJjZVN0b3JlPXRoaXMuc3RvcmUsdS5sYW5ndWFnZVV0aWxzPWcsdS5wbHVyYWxSZXNvbHZlcj1uZXcgY3IoZyx7cHJlcGVuZDp0aGlzLm9wdGlvbnMucGx1cmFsU2VwYXJhdG9yLGNvbXBhdGliaWxpdHlKU09OOnRoaXMub3B0aW9ucy5jb21wYXRpYmlsaXR5SlNPTixzaW1wbGlmeVBsdXJhbFN1ZmZpeDp0aGlzLm9wdGlvbnMuc2ltcGxpZnlQbHVyYWxTdWZmaXh9KSxjJiYoIXRoaXMub3B0aW9ucy5pbnRlcnBvbGF0aW9uLmZvcm1hdHx8dGhpcy5vcHRpb25zLmludGVycG9sYXRpb24uZm9ybWF0PT09aS5pbnRlcnBvbGF0aW9uLmZvcm1hdCkmJih1LmZvcm1hdHRlcj1zKGMpLHUuZm9ybWF0dGVyLmluaXQodSx0aGlzLm9wdGlvbnMpLHRoaXMub3B0aW9ucy5pbnRlcnBvbGF0aW9uLmZvcm1hdD11LmZvcm1hdHRlci5mb3JtYXQuYmluZCh1LmZvcm1hdHRlcikpLHUuaW50ZXJwb2xhdG9yPW5ldyBwcih0aGlzLm9wdGlvbnMpLHUudXRpbHM9e2hhc0xvYWRlZE5hbWVzcGFjZTp0aGlzLmhhc0xvYWRlZE5hbWVzcGFjZS5iaW5kKHRoaXMpfSx1LmJhY2tlbmRDb25uZWN0b3I9bmV3IG1yKHModGhpcy5tb2R1bGVzLmJhY2tlbmQpLHUucmVzb3VyY2VTdG9yZSx1LHRoaXMub3B0aW9ucyksdS5iYWNrZW5kQ29ubmVjdG9yLm9uKCIqIixmdW5jdGlvbihwKXtmb3IodmFyIGQ9YXJndW1lbnRzLmxlbmd0aCxtPW5ldyBBcnJheShkPjE/ZC0xOjApLHk9MTt5PGQ7eSsrKW1beS0xXT1hcmd1bWVudHNbeV07ZS5lbWl0KHAsLi4ubSl9KSx0aGlzLm1vZHVsZXMubGFuZ3VhZ2VEZXRlY3RvciYmKHUubGFuZ3VhZ2VEZXRlY3Rvcj1zKHRoaXMubW9kdWxlcy5sYW5ndWFnZURldGVjdG9yKSx1Lmxhbmd1YWdlRGV0ZWN0b3IuaW5pdCYmdS5sYW5ndWFnZURldGVjdG9yLmluaXQodSx0aGlzLm9wdGlvbnMuZGV0ZWN0aW9uLHRoaXMub3B0aW9ucykpLHRoaXMubW9kdWxlcy5pMThuRm9ybWF0JiYodS5pMThuRm9ybWF0PXModGhpcy5tb2R1bGVzLmkxOG5Gb3JtYXQpLHUuaTE4bkZvcm1hdC5pbml0JiZ1LmkxOG5Gb3JtYXQuaW5pdCh0aGlzKSksdGhpcy50cmFuc2xhdG9yPW5ldyB1ZSh0aGlzLnNlcnZpY2VzLHRoaXMub3B0aW9ucyksdGhpcy50cmFuc2xhdG9yLm9uKCIqIixmdW5jdGlvbihwKXtmb3IodmFyIGQ9YXJndW1lbnRzLmxlbmd0aCxtPW5ldyBBcnJheShkPjE/ZC0xOjApLHk9MTt5PGQ7eSsrKW1beS0xXT1hcmd1bWVudHNbeV07ZS5lbWl0KHAsLi4ubSl9KSx0aGlzLm1vZHVsZXMuZXh0ZXJuYWwuZm9yRWFjaChwPT57cC5pbml0JiZwLmluaXQodGhpcyl9KX1pZih0aGlzLmZvcm1hdD10aGlzLm9wdGlvbnMuaW50ZXJwb2xhdGlvbi5mb3JtYXQscnx8KHI9WCksdGhpcy5vcHRpb25zLmZhbGxiYWNrTG5nJiYhdGhpcy5zZXJ2aWNlcy5sYW5ndWFnZURldGVjdG9yJiYhdGhpcy5vcHRpb25zLmxuZyl7Y29uc3QgYz10aGlzLnNlcnZpY2VzLmxhbmd1YWdlVXRpbHMuZ2V0RmFsbGJhY2tDb2Rlcyh0aGlzLm9wdGlvbnMuZmFsbGJhY2tMbmcpO2MubGVuZ3RoPjAmJmNbMF0hPT0iZGV2IiYmKHRoaXMub3B0aW9ucy5sbmc9Y1swXSl9IXRoaXMuc2VydmljZXMubGFuZ3VhZ2VEZXRlY3RvciYmIXRoaXMub3B0aW9ucy5sbmcmJnRoaXMubG9nZ2VyLndhcm4oImluaXQ6IG5vIGxhbmd1YWdlRGV0ZWN0b3IgaXMgdXNlZCBhbmQgbm8gbG5nIGlzIGRlZmluZWQiKSxbImdldFJlc291cmNlIiwiaGFzUmVzb3VyY2VCdW5kbGUiLCJnZXRSZXNvdXJjZUJ1bmRsZSIsImdldERhdGFCeUxhbmd1YWdlIl0uZm9yRWFjaChjPT57dGhpc1tjXT1mdW5jdGlvbigpe3JldHVybiBlLnN0b3JlW2NdKC4uLmFyZ3VtZW50cyl9fSksWyJhZGRSZXNvdXJjZSIsImFkZFJlc291cmNlcyIsImFkZFJlc291cmNlQnVuZGxlIiwicmVtb3ZlUmVzb3VyY2VCdW5kbGUiXS5mb3JFYWNoKGM9Pnt0aGlzW2NdPWZ1bmN0aW9uKCl7cmV0dXJuIGUuc3RvcmVbY10oLi4uYXJndW1lbnRzKSxlfX0pO2NvbnN0IGw9SigpLGY9KCk9Pntjb25zdCBjPShnLHUpPT57dGhpcy5pc0luaXRpYWxpemluZz0hMSx0aGlzLmlzSW5pdGlhbGl6ZWQmJiF0aGlzLmluaXRpYWxpemVkU3RvcmVPbmNlJiZ0aGlzLmxvZ2dlci53YXJuKCJpbml0OiBpMThuZXh0IGlzIGFscmVhZHkgaW5pdGlhbGl6ZWQuIFlvdSBzaG91bGQgY2FsbCBpbml0IGp1c3Qgb25jZSEiKSx0aGlzLmlzSW5pdGlhbGl6ZWQ9ITAsdGhpcy5vcHRpb25zLmlzQ2xvbmV8fHRoaXMubG9nZ2VyLmxvZygiaW5pdGlhbGl6ZWQiLHRoaXMub3B0aW9ucyksdGhpcy5lbWl0KCJpbml0aWFsaXplZCIsdGhpcy5vcHRpb25zKSxsLnJlc29sdmUodSkscihnLHUpfTtpZih0aGlzLmxhbmd1YWdlcyYmdGhpcy5vcHRpb25zLmNvbXBhdGliaWxpdHlBUEkhPT0idjEiJiYhdGhpcy5pc0luaXRpYWxpemVkKXJldHVybiBjKG51bGwsdGhpcy50LmJpbmQodGhpcykpO3RoaXMuY2hhbmdlTGFuZ3VhZ2UodGhpcy5vcHRpb25zLmxuZyxjKX07cmV0dXJuIHRoaXMub3B0aW9ucy5yZXNvdXJjZXN8fCF0aGlzLm9wdGlvbnMuaW5pdEltbWVkaWF0ZT9mKCk6c2V0VGltZW91dChmLDApLGx9bG9hZFJlc291cmNlcyhlKXtsZXQgcj1hcmd1bWVudHMubGVuZ3RoPjEmJmFyZ3VtZW50c1sxXSE9PXZvaWQgMD9hcmd1bWVudHNbMV06WDtjb25zdCBpPXR5cGVvZiBlPT0ic3RyaW5nIj9lOnRoaXMubGFuZ3VhZ2U7aWYodHlwZW9mIGU9PSJmdW5jdGlvbiImJihyPWUpLCF0aGlzLm9wdGlvbnMucmVzb3VyY2VzfHx0aGlzLm9wdGlvbnMucGFydGlhbEJ1bmRsZWRMYW5ndWFnZXMpe2lmKGkmJmkudG9Mb3dlckNhc2UoKT09PSJjaW1vZGUiJiYoIXRoaXMub3B0aW9ucy5wcmVsb2FkfHx0aGlzLm9wdGlvbnMucHJlbG9hZC5sZW5ndGg9PT0wKSlyZXR1cm4gcigpO2NvbnN0IHM9W10sYT1vPT57aWYoIW98fG89PT0iY2ltb2RlIilyZXR1cm47dGhpcy5zZXJ2aWNlcy5sYW5ndWFnZVV0aWxzLnRvUmVzb2x2ZUhpZXJhcmNoeShvKS5mb3JFYWNoKGY9PntmIT09ImNpbW9kZSImJnMuaW5kZXhPZihmKTwwJiZzLnB1c2goZil9KX07aT9hKGkpOnRoaXMuc2VydmljZXMubGFuZ3VhZ2VVdGlscy5nZXRGYWxsYmFja0NvZGVzKHRoaXMub3B0aW9ucy5mYWxsYmFja0xuZykuZm9yRWFjaChsPT5hKGwpKSx0aGlzLm9wdGlvbnMucHJlbG9hZCYmdGhpcy5vcHRpb25zLnByZWxvYWQuZm9yRWFjaChvPT5hKG8pKSx0aGlzLnNlcnZpY2VzLmJhY2tlbmRDb25uZWN0b3IubG9hZChzLHRoaXMub3B0aW9ucy5ucyxvPT57IW8mJiF0aGlzLnJlc29sdmVkTGFuZ3VhZ2UmJnRoaXMubGFuZ3VhZ2UmJnRoaXMuc2V0UmVzb2x2ZWRMYW5ndWFnZSh0aGlzLmxhbmd1YWdlKSxyKG8pfSl9ZWxzZSByKG51bGwpfXJlbG9hZFJlc291cmNlcyhlLHQscil7Y29uc3QgaT1KKCk7cmV0dXJuIHR5cGVvZiBlPT0iZnVuY3Rpb24iJiYocj1lLGU9dm9pZCAwKSx0eXBlb2YgdD09ImZ1bmN0aW9uIiYmKHI9dCx0PXZvaWQgMCksZXx8KGU9dGhpcy5sYW5ndWFnZXMpLHR8fCh0PXRoaXMub3B0aW9ucy5ucykscnx8KHI9WCksdGhpcy5zZXJ2aWNlcy5iYWNrZW5kQ29ubmVjdG9yLnJlbG9hZChlLHQscz0+e2kucmVzb2x2ZSgpLHIocyl9KSxpfXVzZShlKXtpZighZSl0aHJvdyBuZXcgRXJyb3IoIllvdSBhcmUgcGFzc2luZyBhbiB1bmRlZmluZWQgbW9kdWxlISBQbGVhc2UgY2hlY2sgdGhlIG9iamVjdCB5b3UgYXJlIHBhc3NpbmcgdG8gaTE4bmV4dC51c2UoKSIpO2lmKCFlLnR5cGUpdGhyb3cgbmV3IEVycm9yKCJZb3UgYXJlIHBhc3NpbmcgYSB3cm9uZyBtb2R1bGUhIFBsZWFzZSBjaGVjayB0aGUgb2JqZWN0IHlvdSBhcmUgcGFzc2luZyB0byBpMThuZXh0LnVzZSgpIik7cmV0dXJuIGUudHlwZT09PSJiYWNrZW5kIiYmKHRoaXMubW9kdWxlcy5iYWNrZW5kPWUpLChlLnR5cGU9PT0ibG9nZ2VyInx8ZS5sb2cmJmUud2FybiYmZS5lcnJvcikmJih0aGlzLm1vZHVsZXMubG9nZ2VyPWUpLGUudHlwZT09PSJsYW5ndWFnZURldGVjdG9yIiYmKHRoaXMubW9kdWxlcy5sYW5ndWFnZURldGVjdG9yPWUpLGUudHlwZT09PSJpMThuRm9ybWF0IiYmKHRoaXMubW9kdWxlcy5pMThuRm9ybWF0PWUpLGUudHlwZT09PSJwb3N0UHJvY2Vzc29yIiYmd3QuYWRkUG9zdFByb2Nlc3NvcihlKSxlLnR5cGU9PT0iZm9ybWF0dGVyIiYmKHRoaXMubW9kdWxlcy5mb3JtYXR0ZXI9ZSksZS50eXBlPT09IjNyZFBhcnR5IiYmdGhpcy5tb2R1bGVzLmV4dGVybmFsLnB1c2goZSksdGhpc31zZXRSZXNvbHZlZExhbmd1YWdlKGUpe2lmKCEoIWV8fCF0aGlzLmxhbmd1YWdlcykmJiEoWyJjaW1vZGUiLCJkZXYiXS5pbmRleE9mKGUpPi0xKSlmb3IobGV0IHQ9MDt0PHRoaXMubGFuZ3VhZ2VzLmxlbmd0aDt0Kyspe2NvbnN0IHI9dGhpcy5sYW5ndWFnZXNbdF07aWYoIShbImNpbW9kZSIsImRldiJdLmluZGV4T2Yocik+LTEpJiZ0aGlzLnN0b3JlLmhhc0xhbmd1YWdlU29tZVRyYW5zbGF0aW9ucyhyKSl7dGhpcy5yZXNvbHZlZExhbmd1YWdlPXI7YnJlYWt9fX1jaGFuZ2VMYW5ndWFnZShlLHQpe3ZhciByPXRoaXM7dGhpcy5pc0xhbmd1YWdlQ2hhbmdpbmdUbz1lO2NvbnN0IGk9SigpO3RoaXMuZW1pdCgibGFuZ3VhZ2VDaGFuZ2luZyIsZSk7Y29uc3Qgcz1sPT57dGhpcy5sYW5ndWFnZT1sLHRoaXMubGFuZ3VhZ2VzPXRoaXMuc2VydmljZXMubGFuZ3VhZ2VVdGlscy50b1Jlc29sdmVIaWVyYXJjaHkobCksdGhpcy5yZXNvbHZlZExhbmd1YWdlPXZvaWQgMCx0aGlzLnNldFJlc29sdmVkTGFuZ3VhZ2UobCl9LGE9KGwsZik9PntmPyhzKGYpLHRoaXMudHJhbnNsYXRvci5jaGFuZ2VMYW5ndWFnZShmKSx0aGlzLmlzTGFuZ3VhZ2VDaGFuZ2luZ1RvPXZvaWQgMCx0aGlzLmVtaXQoImxhbmd1YWdlQ2hhbmdlZCIsZiksdGhpcy5sb2dnZXIubG9nKCJsYW5ndWFnZUNoYW5nZWQiLGYpKTp0aGlzLmlzTGFuZ3VhZ2VDaGFuZ2luZ1RvPXZvaWQgMCxpLnJlc29sdmUoZnVuY3Rpb24oKXtyZXR1cm4gci50KC4uLmFyZ3VtZW50cyl9KSx0JiZ0KGwsZnVuY3Rpb24oKXtyZXR1cm4gci50KC4uLmFyZ3VtZW50cyl9KX0sbz1sPT57IWUmJiFsJiZ0aGlzLnNlcnZpY2VzLmxhbmd1YWdlRGV0ZWN0b3ImJihsPVtdKTtjb25zdCBmPXR5cGVvZiBsPT0ic3RyaW5nIj9sOnRoaXMuc2VydmljZXMubGFuZ3VhZ2VVdGlscy5nZXRCZXN0TWF0Y2hGcm9tQ29kZXMobCk7ZiYmKHRoaXMubGFuZ3VhZ2V8fHMoZiksdGhpcy50cmFuc2xhdG9yLmxhbmd1YWdlfHx0aGlzLnRyYW5zbGF0b3IuY2hhbmdlTGFuZ3VhZ2UoZiksdGhpcy5zZXJ2aWNlcy5sYW5ndWFnZURldGVjdG9yJiZ0aGlzLnNlcnZpY2VzLmxhbmd1YWdlRGV0ZWN0b3IuY2FjaGVVc2VyTGFuZ3VhZ2UmJnRoaXMuc2VydmljZXMubGFuZ3VhZ2VEZXRlY3Rvci5jYWNoZVVzZXJMYW5ndWFnZShmKSksdGhpcy5sb2FkUmVzb3VyY2VzKGYsYz0+e2EoYyxmKX0pfTtyZXR1cm4hZSYmdGhpcy5zZXJ2aWNlcy5sYW5ndWFnZURldGVjdG9yJiYhdGhpcy5zZXJ2aWNlcy5sYW5ndWFnZURldGVjdG9yLmFzeW5jP28odGhpcy5zZXJ2aWNlcy5sYW5ndWFnZURldGVjdG9yLmRldGVjdCgpKTohZSYmdGhpcy5zZXJ2aWNlcy5sYW5ndWFnZURldGVjdG9yJiZ0aGlzLnNlcnZpY2VzLmxhbmd1YWdlRGV0ZWN0b3IuYXN5bmM/dGhpcy5zZXJ2aWNlcy5sYW5ndWFnZURldGVjdG9yLmRldGVjdC5sZW5ndGg9PT0wP3RoaXMuc2VydmljZXMubGFuZ3VhZ2VEZXRlY3Rvci5kZXRlY3QoKS50aGVuKG8pOnRoaXMuc2VydmljZXMubGFuZ3VhZ2VEZXRlY3Rvci5kZXRlY3Qobyk6byhlKSxpfWdldEZpeGVkVChlLHQscil7dmFyIGk9dGhpcztjb25zdCBzPWZ1bmN0aW9uKGEsbyl7bGV0IGw7aWYodHlwZW9mIG8hPSJvYmplY3QiKXtmb3IodmFyIGY9YXJndW1lbnRzLmxlbmd0aCxjPW5ldyBBcnJheShmPjI/Zi0yOjApLGc9MjtnPGY7ZysrKWNbZy0yXT1hcmd1bWVudHNbZ107bD1pLm9wdGlvbnMub3ZlcmxvYWRUcmFuc2xhdGlvbk9wdGlvbkhhbmRsZXIoW2Esb10uY29uY2F0KGMpKX1lbHNlIGw9ey4uLm99O2wubG5nPWwubG5nfHxzLmxuZyxsLmxuZ3M9bC5sbmdzfHxzLmxuZ3MsbC5ucz1sLm5zfHxzLm5zLGwua2V5UHJlZml4IT09IiImJihsLmtleVByZWZpeD1sLmtleVByZWZpeHx8cnx8cy5rZXlQcmVmaXgpO2NvbnN0IHU9aS5vcHRpb25zLmtleVNlcGFyYXRvcnx8Ii4iO2xldCBwO3JldHVybiBsLmtleVByZWZpeCYmQXJyYXkuaXNBcnJheShhKT9wPWEubWFwKGQ9PmAke2wua2V5UHJlZml4fSR7dX0ke2R9YCk6cD1sLmtleVByZWZpeD9gJHtsLmtleVByZWZpeH0ke3V9JHthfWA6YSxpLnQocCxsKX07cmV0dXJuIHR5cGVvZiBlPT0ic3RyaW5nIj9zLmxuZz1lOnMubG5ncz1lLHMubnM9dCxzLmtleVByZWZpeD1yLHN9dCgpe3JldHVybiB0aGlzLnRyYW5zbGF0b3ImJnRoaXMudHJhbnNsYXRvci50cmFuc2xhdGUoLi4uYXJndW1lbnRzKX1leGlzdHMoKXtyZXR1cm4gdGhpcy50cmFuc2xhdG9yJiZ0aGlzLnRyYW5zbGF0b3IuZXhpc3RzKC4uLmFyZ3VtZW50cyl9c2V0RGVmYXVsdE5hbWVzcGFjZShlKXt0aGlzLm9wdGlvbnMuZGVmYXVsdE5TPWV9aGFzTG9hZGVkTmFtZXNwYWNlKGUpe2xldCB0PWFyZ3VtZW50cy5sZW5ndGg+MSYmYXJndW1lbnRzWzFdIT09dm9pZCAwP2FyZ3VtZW50c1sxXTp7fTtpZighdGhpcy5pc0luaXRpYWxpemVkKXJldHVybiB0aGlzLmxvZ2dlci53YXJuKCJoYXNMb2FkZWROYW1lc3BhY2U6IGkxOG5leHQgd2FzIG5vdCBpbml0aWFsaXplZCIsdGhpcy5sYW5ndWFnZXMpLCExO2lmKCF0aGlzLmxhbmd1YWdlc3x8IXRoaXMubGFuZ3VhZ2VzLmxlbmd0aClyZXR1cm4gdGhpcy5sb2dnZXIud2FybigiaGFzTG9hZGVkTmFtZXNwYWNlOiBpMThuLmxhbmd1YWdlcyB3ZXJlIHVuZGVmaW5lZCBvciBlbXB0eSIsdGhpcy5sYW5ndWFnZXMpLCExO2NvbnN0IHI9dC5sbmd8fHRoaXMucmVzb2x2ZWRMYW5ndWFnZXx8dGhpcy5sYW5ndWFnZXNbMF0saT10aGlzLm9wdGlvbnM/dGhpcy5vcHRpb25zLmZhbGxiYWNrTG5nOiExLHM9dGhpcy5sYW5ndWFnZXNbdGhpcy5sYW5ndWFnZXMubGVuZ3RoLTFdO2lmKHIudG9Mb3dlckNhc2UoKT09PSJjaW1vZGUiKXJldHVybiEwO2NvbnN0IGE9KG8sbCk9Pntjb25zdCBmPXRoaXMuc2VydmljZXMuYmFja2VuZENvbm5lY3Rvci5zdGF0ZVtgJHtvfXwke2x9YF07cmV0dXJuIGY9PT0tMXx8Zj09PTB8fGY9PT0yfTtpZih0LnByZWNoZWNrKXtjb25zdCBvPXQucHJlY2hlY2sodGhpcyxhKTtpZihvIT09dm9pZCAwKXJldHVybiBvfXJldHVybiEhKHRoaXMuaGFzUmVzb3VyY2VCdW5kbGUocixlKXx8IXRoaXMuc2VydmljZXMuYmFja2VuZENvbm5lY3Rvci5iYWNrZW5kfHx0aGlzLm9wdGlvbnMucmVzb3VyY2VzJiYhdGhpcy5vcHRpb25zLnBhcnRpYWxCdW5kbGVkTGFuZ3VhZ2VzfHxhKHIsZSkmJighaXx8YShzLGUpKSl9bG9hZE5hbWVzcGFjZXMoZSx0KXtjb25zdCByPUooKTtyZXR1cm4gdGhpcy5vcHRpb25zLm5zPyh0eXBlb2YgZT09InN0cmluZyImJihlPVtlXSksZS5mb3JFYWNoKGk9Pnt0aGlzLm9wdGlvbnMubnMuaW5kZXhPZihpKTwwJiZ0aGlzLm9wdGlvbnMubnMucHVzaChpKX0pLHRoaXMubG9hZFJlc291cmNlcyhpPT57ci5yZXNvbHZlKCksdCYmdChpKX0pLHIpOih0JiZ0KCksUHJvbWlzZS5yZXNvbHZlKCkpfWxvYWRMYW5ndWFnZXMoZSx0KXtjb25zdCByPUooKTt0eXBlb2YgZT09InN0cmluZyImJihlPVtlXSk7Y29uc3QgaT10aGlzLm9wdGlvbnMucHJlbG9hZHx8W10scz1lLmZpbHRlcihhPT5pLmluZGV4T2YoYSk8MCYmdGhpcy5zZXJ2aWNlcy5sYW5ndWFnZVV0aWxzLmlzU3VwcG9ydGVkQ29kZShhKSk7cmV0dXJuIHMubGVuZ3RoPyh0aGlzLm9wdGlvbnMucHJlbG9hZD1pLmNvbmNhdChzKSx0aGlzLmxvYWRSZXNvdXJjZXMoYT0+e3IucmVzb2x2ZSgpLHQmJnQoYSl9KSxyKToodCYmdCgpLFByb21pc2UucmVzb2x2ZSgpKX1kaXIoZSl7aWYoZXx8KGU9dGhpcy5yZXNvbHZlZExhbmd1YWdlfHwodGhpcy5sYW5ndWFnZXMmJnRoaXMubGFuZ3VhZ2VzLmxlbmd0aD4wP3RoaXMubGFuZ3VhZ2VzWzBdOnRoaXMubGFuZ3VhZ2UpKSwhZSlyZXR1cm4icnRsIjtjb25zdCB0PVsiYXIiLCJzaHUiLCJzcXIiLCJzc2giLCJ4YWEiLCJ5aGQiLCJ5dWQiLCJhYW8iLCJhYmgiLCJhYnYiLCJhY20iLCJhY3EiLCJhY3ciLCJhY3giLCJhY3kiLCJhZGYiLCJhZHMiLCJhZWIiLCJhZWMiLCJhZmIiLCJhanAiLCJhcGMiLCJhcGQiLCJhcmIiLCJhcnEiLCJhcnMiLCJhcnkiLCJhcnoiLCJhdXoiLCJhdmwiLCJheWgiLCJheWwiLCJheW4iLCJheXAiLCJiYnoiLCJwZ2EiLCJoZSIsIml3IiwicHMiLCJwYnQiLCJwYnUiLCJwc3QiLCJwcnAiLCJwcmQiLCJ1ZyIsInVyIiwieWRkIiwieWRzIiwieWloIiwiamkiLCJ5aSIsImhibyIsIm1lbiIsInhtbiIsImZhIiwianByIiwicGVvIiwicGVzIiwicHJzIiwiZHYiLCJzYW0iLCJja2IiXSxyPXRoaXMuc2VydmljZXMmJnRoaXMuc2VydmljZXMubGFuZ3VhZ2VVdGlsc3x8bmV3IEtlKFdlKCkpO3JldHVybiB0LmluZGV4T2Yoci5nZXRMYW5ndWFnZVBhcnRGcm9tQ29kZShlKSk+LTF8fGUudG9Mb3dlckNhc2UoKS5pbmRleE9mKCItYXJhYiIpPjE/InJ0bCI6Imx0ciJ9c3RhdGljIGNyZWF0ZUluc3RhbmNlKCl7bGV0IGU9YXJndW1lbnRzLmxlbmd0aD4wJiZhcmd1bWVudHNbMF0hPT12b2lkIDA/YXJndW1lbnRzWzBdOnt9LHQ9YXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDA7cmV0dXJuIG5ldyBRKGUsdCl9Y2xvbmVJbnN0YW5jZSgpe2xldCBlPWFyZ3VtZW50cy5sZW5ndGg+MCYmYXJndW1lbnRzWzBdIT09dm9pZCAwP2FyZ3VtZW50c1swXTp7fSx0PWFyZ3VtZW50cy5sZW5ndGg+MSYmYXJndW1lbnRzWzFdIT09dm9pZCAwP2FyZ3VtZW50c1sxXTpYO2NvbnN0IHI9ZS5mb3JrUmVzb3VyY2VTdG9yZTtyJiZkZWxldGUgZS5mb3JrUmVzb3VyY2VTdG9yZTtjb25zdCBpPXsuLi50aGlzLm9wdGlvbnMsLi4uZSxpc0Nsb25lOiEwfSxzPW5ldyBRKGkpO3JldHVybihlLmRlYnVnIT09dm9pZCAwfHxlLnByZWZpeCE9PXZvaWQgMCkmJihzLmxvZ2dlcj1zLmxvZ2dlci5jbG9uZShlKSksWyJzdG9yZSIsInNlcnZpY2VzIiwibGFuZ3VhZ2UiXS5mb3JFYWNoKG89PntzW29dPXRoaXNbb119KSxzLnNlcnZpY2VzPXsuLi50aGlzLnNlcnZpY2VzfSxzLnNlcnZpY2VzLnV0aWxzPXtoYXNMb2FkZWROYW1lc3BhY2U6cy5oYXNMb2FkZWROYW1lc3BhY2UuYmluZChzKX0sciYmKHMuc3RvcmU9bmV3IEdlKHRoaXMuc3RvcmUuZGF0YSxpKSxzLnNlcnZpY2VzLnJlc291cmNlU3RvcmU9cy5zdG9yZSkscy50cmFuc2xhdG9yPW5ldyB1ZShzLnNlcnZpY2VzLGkpLHMudHJhbnNsYXRvci5vbigiKiIsZnVuY3Rpb24obyl7Zm9yKHZhciBsPWFyZ3VtZW50cy5sZW5ndGgsZj1uZXcgQXJyYXkobD4xP2wtMTowKSxjPTE7YzxsO2MrKylmW2MtMV09YXJndW1lbnRzW2NdO3MuZW1pdChvLC4uLmYpfSkscy5pbml0KGksdCkscy50cmFuc2xhdG9yLm9wdGlvbnM9aSxzLnRyYW5zbGF0b3IuYmFja2VuZENvbm5lY3Rvci5zZXJ2aWNlcy51dGlscz17aGFzTG9hZGVkTmFtZXNwYWNlOnMuaGFzTG9hZGVkTmFtZXNwYWNlLmJpbmQocyl9LHN9dG9KU09OKCl7cmV0dXJue29wdGlvbnM6dGhpcy5vcHRpb25zLHN0b3JlOnRoaXMuc3RvcmUsbGFuZ3VhZ2U6dGhpcy5sYW5ndWFnZSxsYW5ndWFnZXM6dGhpcy5sYW5ndWFnZXMscmVzb2x2ZWRMYW5ndWFnZTp0aGlzLnJlc29sdmVkTGFuZ3VhZ2V9fX1jb25zdCBFPVEuY3JlYXRlSW5zdGFuY2UoKTtFLmNyZWF0ZUluc3RhbmNlPVEuY3JlYXRlSW5zdGFuY2U7RS5jcmVhdGVJbnN0YW5jZTtFLmRpcjtFLmluaXQ7RS5sb2FkUmVzb3VyY2VzO0UucmVsb2FkUmVzb3VyY2VzO0UudXNlO0UuY2hhbmdlTGFuZ3VhZ2U7RS5nZXRGaXhlZFQ7RS50O0UuZXhpc3RzO0Uuc2V0RGVmYXVsdE5hbWVzcGFjZTtFLmhhc0xvYWRlZE5hbWVzcGFjZTtFLmxvYWROYW1lc3BhY2VzO0UubG9hZExhbmd1YWdlcztmdW5jdGlvbiBicihuKXtyZXR1cm4gbiYmbi5fX2VzTW9kdWxlJiZPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobiwiZGVmYXVsdCIpP24uZGVmYXVsdDpufXZhciBlZT17fSxiZSx6ZTtmdW5jdGlvbiB2cigpe2lmKHplKXJldHVybiBiZTt6ZT0xO3ZhciBuLGUsdD17JyInOiciJywiXFwiOiJcXCIsIi8iOiIvIixiOiJcYiIsZjoiXGYiLG46YApgLHI6IlxyIix0OiIJIn0scjtmdW5jdGlvbiBpKHApe3Rocm93e25hbWU6IlN5bnRheEVycm9yIixtZXNzYWdlOnAsYXQ6bix0ZXh0OnJ9fWZ1bmN0aW9uIHMocCl7cmV0dXJuIHAmJnAhPT1lJiZpKCJFeHBlY3RlZCAnIitwKyInIGluc3RlYWQgb2YgJyIrZSsiJyIpLGU9ci5jaGFyQXQobiksbis9MSxlfWZ1bmN0aW9uIGEoKXt2YXIgcCxkPSIiO2ZvcihlPT09Ii0iJiYoZD0iLSIscygiLSIpKTtlPj0iMCImJmU8PSI5IjspZCs9ZSxzKCk7aWYoZT09PSIuIilmb3IoZCs9Ii4iO3MoKSYmZT49IjAiJiZlPD0iOSI7KWQrPWU7aWYoZT09PSJlInx8ZT09PSJFIilmb3IoZCs9ZSxzKCksKGU9PT0iLSJ8fGU9PT0iKyIpJiYoZCs9ZSxzKCkpO2U+PSIwIiYmZTw9IjkiOylkKz1lLHMoKTtyZXR1cm4gcD1OdW1iZXIoZCksaXNGaW5pdGUocCl8fGkoIkJhZCBudW1iZXIiKSxwfWZ1bmN0aW9uIG8oKXt2YXIgcCxkLG09IiIseTtpZihlPT09JyInKWZvcig7cygpOyl7aWYoZT09PSciJylyZXR1cm4gcygpLG07aWYoZT09PSJcXCIpaWYocygpLGU9PT0idSIpe2Zvcih5PTAsZD0wO2Q8NCYmKHA9cGFyc2VJbnQocygpLDE2KSwhIWlzRmluaXRlKHApKTtkKz0xKXk9eSoxNitwO20rPVN0cmluZy5mcm9tQ2hhckNvZGUoeSl9ZWxzZSBpZih0eXBlb2YgdFtlXT09InN0cmluZyIpbSs9dFtlXTtlbHNlIGJyZWFrO2Vsc2UgbSs9ZX1pKCJCYWQgc3RyaW5nIil9ZnVuY3Rpb24gbCgpe2Zvcig7ZSYmZTw9IiAiOylzKCl9ZnVuY3Rpb24gZigpe3N3aXRjaChlKXtjYXNlInQiOnJldHVybiBzKCJ0IikscygiciIpLHMoInUiKSxzKCJlIiksITA7Y2FzZSJmIjpyZXR1cm4gcygiZiIpLHMoImEiKSxzKCJsIikscygicyIpLHMoImUiKSwhMTtjYXNlIm4iOnJldHVybiBzKCJuIikscygidSIpLHMoImwiKSxzKCJsIiksbnVsbDtkZWZhdWx0OmkoIlVuZXhwZWN0ZWQgJyIrZSsiJyIpfX1mdW5jdGlvbiBjKCl7dmFyIHA9W107aWYoZT09PSJbIil7aWYocygiWyIpLGwoKSxlPT09Il0iKXJldHVybiBzKCJdIikscDtmb3IoO2U7KXtpZihwLnB1c2godSgpKSxsKCksZT09PSJdIilyZXR1cm4gcygiXSIpLHA7cygiLCIpLGwoKX19aSgiQmFkIGFycmF5Iil9ZnVuY3Rpb24gZygpe3ZhciBwLGQ9e307aWYoZT09PSJ7Iil7aWYocygieyIpLGwoKSxlPT09In0iKXJldHVybiBzKCJ9IiksZDtmb3IoO2U7KXtpZihwPW8oKSxsKCkscygiOiIpLE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChkLHApJiZpKCdEdXBsaWNhdGUga2V5ICInK3ArJyInKSxkW3BdPXUoKSxsKCksZT09PSJ9IilyZXR1cm4gcygifSIpLGQ7cygiLCIpLGwoKX19aSgiQmFkIG9iamVjdCIpfWZ1bmN0aW9uIHUoKXtzd2l0Y2gobCgpLGUpe2Nhc2UieyI6cmV0dXJuIGcoKTtjYXNlIlsiOnJldHVybiBjKCk7Y2FzZSciJzpyZXR1cm4gbygpO2Nhc2UiLSI6cmV0dXJuIGEoKTtkZWZhdWx0OnJldHVybiBlPj0iMCImJmU8PSI5Ij9hKCk6ZigpfX1yZXR1cm4gYmU9ZnVuY3Rpb24ocCxkKXt2YXIgbTtyZXR1cm4gcj1wLG49MCxlPSIgIixtPXUoKSxsKCksZSYmaSgiU3ludGF4IGVycm9yIiksdHlwZW9mIGQ9PSJmdW5jdGlvbiI/ZnVuY3Rpb24geSh4LFMpe3ZhciBPLHYsUD14W1NdO2lmKFAmJnR5cGVvZiBQPT0ib2JqZWN0Iilmb3IoTyBpbiB1KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChQLE8pJiYodj15KFAsTyksdHlwZW9mIHY+InUiP2RlbGV0ZSBQW09dOlBbT109dik7cmV0dXJuIGQuY2FsbCh4LFMsUCl9KHsiIjptfSwiIik6bX0sYmV9dmFyIHZlLFFlO2Z1bmN0aW9uIFNyKCl7aWYoUWUpcmV0dXJuIHZlO1FlPTE7dmFyIG49L1tcXCJceDAwLVx4MWZceDdmLVx4OWZcdTAwYWRcdTA2MDAtXHUwNjA0XHUwNzBmXHUxN2I0XHUxN2I1XHUyMDBjLVx1MjAwZlx1MjAyOC1cdTIwMmZcdTIwNjAtXHUyMDZmXHVmZWZmXHVmZmYwLVx1ZmZmZl0vZyxlLHQscj17IlxiIjoiXFxiIiwiCSI6IlxcdCIsIlxuIjoiXFxuIiwiXGYiOiJcXGYiLCJcciI6IlxcciIsJyInOidcXCInLCJcXCI6IlxcXFwifSxpO2Z1bmN0aW9uIHMobyl7cmV0dXJuIG4ubGFzdEluZGV4PTAsbi50ZXN0KG8pPyciJytvLnJlcGxhY2UobixmdW5jdGlvbihsKXt2YXIgZj1yW2xdO3JldHVybiB0eXBlb2YgZj09InN0cmluZyI/ZjoiXFx1IisoIjAwMDAiK2wuY2hhckNvZGVBdCgwKS50b1N0cmluZygxNikpLnNsaWNlKC00KX0pKyciJzonIicrbysnIid9ZnVuY3Rpb24gYShvLGwpe3ZhciBmLGMsZyx1LHA9ZSxkLG09bFtvXTtzd2l0Y2gobSYmdHlwZW9mIG09PSJvYmplY3QiJiZ0eXBlb2YgbS50b0pTT049PSJmdW5jdGlvbiImJihtPW0udG9KU09OKG8pKSx0eXBlb2YgaT09ImZ1bmN0aW9uIiYmKG09aS5jYWxsKGwsbyxtKSksdHlwZW9mIG0pe2Nhc2Uic3RyaW5nIjpyZXR1cm4gcyhtKTtjYXNlIm51bWJlciI6cmV0dXJuIGlzRmluaXRlKG0pP1N0cmluZyhtKToibnVsbCI7Y2FzZSJib29sZWFuIjpjYXNlIm51bGwiOnJldHVybiBTdHJpbmcobSk7Y2FzZSJvYmplY3QiOmlmKCFtKXJldHVybiJudWxsIjtpZihlKz10LGQ9W10sT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5hcHBseShtKT09PSJbb2JqZWN0IEFycmF5XSIpe2Zvcih1PW0ubGVuZ3RoLGY9MDtmPHU7Zis9MSlkW2ZdPWEoZixtKXx8Im51bGwiO3JldHVybiBnPWQubGVuZ3RoPT09MD8iW10iOmU/YFsKYCtlK2Quam9pbihgLApgK2UpK2AKYCtwKyJdIjoiWyIrZC5qb2luKCIsIikrIl0iLGU9cCxnfWlmKGkmJnR5cGVvZiBpPT0ib2JqZWN0Iilmb3IodT1pLmxlbmd0aCxmPTA7Zjx1O2YrPTEpYz1pW2ZdLHR5cGVvZiBjPT0ic3RyaW5nIiYmKGc9YShjLG0pLGcmJmQucHVzaChzKGMpKyhlPyI6ICI6IjoiKStnKSk7ZWxzZSBmb3IoYyBpbiBtKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtLGMpJiYoZz1hKGMsbSksZyYmZC5wdXNoKHMoYykrKGU/IjogIjoiOiIpK2cpKTtyZXR1cm4gZz1kLmxlbmd0aD09PTA/Int9IjplP2B7CmArZStkLmpvaW4oYCwKYCtlKStgCmArcCsifSI6InsiK2Quam9pbigiLCIpKyJ9IixlPXAsZ319cmV0dXJuIHZlPWZ1bmN0aW9uKG8sbCxmKXt2YXIgYztpZihlPSIiLHQ9IiIsdHlwZW9mIGY9PSJudW1iZXIiKWZvcihjPTA7YzxmO2MrPTEpdCs9IiAiO2Vsc2UgdHlwZW9mIGY9PSJzdHJpbmciJiYodD1mKTtpZihpPWwsbCYmdHlwZW9mIGwhPSJmdW5jdGlvbiImJih0eXBlb2YgbCE9Im9iamVjdCJ8fHR5cGVvZiBsLmxlbmd0aCE9Im51bWJlciIpKXRocm93IG5ldyBFcnJvcigiSlNPTi5zdHJpbmdpZnkiKTtyZXR1cm4gYSgiIix7IiI6b30pfSx2ZX12YXIgcWU7ZnVuY3Rpb24gUHIoKXtyZXR1cm4gcWV8fChxZT0xLGVlLnBhcnNlPXZyKCksZWUuc3RyaW5naWZ5PVNyKCkpLGVlfXZhciB4cj17fS50b1N0cmluZyxPcj1BcnJheS5pc0FycmF5fHxmdW5jdGlvbihuKXtyZXR1cm4geHIuY2FsbChuKT09IltvYmplY3QgQXJyYXldIn0sWWU9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZyxSdD1mdW5jdGlvbihlKXt2YXIgdD1ZZS5jYWxsKGUpLHI9dD09PSJbb2JqZWN0IEFyZ3VtZW50c10iO3JldHVybiByfHwocj10IT09IltvYmplY3QgQXJyYXldIiYmZSE9PW51bGwmJnR5cGVvZiBlPT0ib2JqZWN0IiYmdHlwZW9mIGUubGVuZ3RoPT0ibnVtYmVyIiYmZS5sZW5ndGg+PTAmJlllLmNhbGwoZS5jYWxsZWUpPT09IltvYmplY3QgRnVuY3Rpb25dIikscn0sU2UsWmU7ZnVuY3Rpb24gd3IoKXtpZihaZSlyZXR1cm4gU2U7WmU9MTt2YXIgbjtpZighT2JqZWN0LmtleXMpe3ZhciBlPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksdD1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLHI9UnQsaT1PYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLHM9IWkuY2FsbCh7dG9TdHJpbmc6bnVsbH0sInRvU3RyaW5nIiksYT1pLmNhbGwoZnVuY3Rpb24oKXt9LCJwcm90b3R5cGUiKSxvPVsidG9TdHJpbmciLCJ0b0xvY2FsZVN0cmluZyIsInZhbHVlT2YiLCJoYXNPd25Qcm9wZXJ0eSIsImlzUHJvdG90eXBlT2YiLCJwcm9wZXJ0eUlzRW51bWVyYWJsZSIsImNvbnN0cnVjdG9yIl0sbD1mdW5jdGlvbih1KXt2YXIgcD11LmNvbnN0cnVjdG9yO3JldHVybiBwJiZwLnByb3RvdHlwZT09PXV9LGY9eyRhcHBsaWNhdGlvbkNhY2hlOiEwLCRjb25zb2xlOiEwLCRleHRlcm5hbDohMCwkZnJhbWU6ITAsJGZyYW1lRWxlbWVudDohMCwkZnJhbWVzOiEwLCRpbm5lckhlaWdodDohMCwkaW5uZXJXaWR0aDohMCwkb25tb3pmdWxsc2NyZWVuY2hhbmdlOiEwLCRvbm1vemZ1bGxzY3JlZW5lcnJvcjohMCwkb3V0ZXJIZWlnaHQ6ITAsJG91dGVyV2lkdGg6ITAsJHBhZ2VYT2Zmc2V0OiEwLCRwYWdlWU9mZnNldDohMCwkcGFyZW50OiEwLCRzY3JvbGxMZWZ0OiEwLCRzY3JvbGxUb3A6ITAsJHNjcm9sbFg6ITAsJHNjcm9sbFk6ITAsJHNlbGY6ITAsJHdlYmtpdEluZGV4ZWREQjohMCwkd2Via2l0U3RvcmFnZUluZm86ITAsJHdpbmRvdzohMH0sYz1mdW5jdGlvbigpe2lmKHR5cGVvZiB3aW5kb3c+InUiKXJldHVybiExO2Zvcih2YXIgdSBpbiB3aW5kb3cpdHJ5e2lmKCFmWyIkIit1XSYmZS5jYWxsKHdpbmRvdyx1KSYmd2luZG93W3VdIT09bnVsbCYmdHlwZW9mIHdpbmRvd1t1XT09Im9iamVjdCIpdHJ5e2wod2luZG93W3VdKX1jYXRjaHtyZXR1cm4hMH19Y2F0Y2h7cmV0dXJuITB9cmV0dXJuITF9KCksZz1mdW5jdGlvbih1KXtpZih0eXBlb2Ygd2luZG93PiJ1Inx8IWMpcmV0dXJuIGwodSk7dHJ5e3JldHVybiBsKHUpfWNhdGNoe3JldHVybiExfX07bj1mdW5jdGlvbihwKXt2YXIgZD1wIT09bnVsbCYmdHlwZW9mIHA9PSJvYmplY3QiLG09dC5jYWxsKHApPT09IltvYmplY3QgRnVuY3Rpb25dIix5PXIocCkseD1kJiZ0LmNhbGwocCk9PT0iW29iamVjdCBTdHJpbmddIixTPVtdO2lmKCFkJiYhbSYmIXkpdGhyb3cgbmV3IFR5cGVFcnJvcigiT2JqZWN0LmtleXMgY2FsbGVkIG9uIGEgbm9uLW9iamVjdCIpO3ZhciBPPWEmJm07aWYoeCYmcC5sZW5ndGg+MCYmIWUuY2FsbChwLDApKWZvcih2YXIgdj0wO3Y8cC5sZW5ndGg7Kyt2KVMucHVzaChTdHJpbmcodikpO2lmKHkmJnAubGVuZ3RoPjApZm9yKHZhciBQPTA7UDxwLmxlbmd0aDsrK1ApUy5wdXNoKFN0cmluZyhQKSk7ZWxzZSBmb3IodmFyIEQgaW4gcCkhKE8mJkQ9PT0icHJvdG90eXBlIikmJmUuY2FsbChwLEQpJiZTLnB1c2goU3RyaW5nKEQpKTtpZihzKWZvcih2YXIgUj1nKHApLCQ9MDskPG8ubGVuZ3RoOysrJCkhKFImJm9bJF09PT0iY29uc3RydWN0b3IiKSYmZS5jYWxsKHAsb1skXSkmJlMucHVzaChvWyRdKTtyZXR1cm4gU319cmV0dXJuIFNlPW4sU2V9dmFyIFJyPUFycmF5LnByb3RvdHlwZS5zbGljZSxBcj1SdCxYZT1PYmplY3Qua2V5cyxuZT1YZT9mdW5jdGlvbihlKXtyZXR1cm4gWGUoZSl9OndyKCksZXQ9T2JqZWN0LmtleXM7bmUuc2hpbT1mdW5jdGlvbigpe2lmKE9iamVjdC5rZXlzKXt2YXIgZT1mdW5jdGlvbigpe3ZhciB0PU9iamVjdC5rZXlzKGFyZ3VtZW50cyk7cmV0dXJuIHQmJnQubGVuZ3RoPT09YXJndW1lbnRzLmxlbmd0aH0oMSwyKTtlfHwoT2JqZWN0LmtleXM9ZnVuY3Rpb24ocil7cmV0dXJuIEFyKHIpP2V0KFJyLmNhbGwocikpOmV0KHIpfSl9ZWxzZSBPYmplY3Qua2V5cz1uZTtyZXR1cm4gT2JqZWN0LmtleXN8fG5lfTt2YXIgRXI9bmUsQXQ9e2V4cG9ydHM6e319LERyPSJGdW5jdGlvbi5wcm90b3R5cGUuYmluZCBjYWxsZWQgb24gaW5jb21wYXRpYmxlICIsTHI9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZyxGcj1NYXRoLm1heCwkcj0iW29iamVjdCBGdW5jdGlvbl0iLHR0PWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByPVtdLGk9MDtpPGUubGVuZ3RoO2krPTEpcltpXT1lW2ldO2Zvcih2YXIgcz0wO3M8dC5sZW5ndGg7cys9MSlyW3MrZS5sZW5ndGhdPXRbc107cmV0dXJuIHJ9LENyPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByPVtdLGk9dCxzPTA7aTxlLmxlbmd0aDtpKz0xLHMrPTEpcltzXT1lW2ldO3JldHVybiByfSxJcj1mdW5jdGlvbihuLGUpe2Zvcih2YXIgdD0iIixyPTA7cjxuLmxlbmd0aDtyKz0xKXQrPW5bcl0scisxPG4ubGVuZ3RoJiYodCs9ZSk7cmV0dXJuIHR9LFRyPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7aWYodHlwZW9mIHQhPSJmdW5jdGlvbiJ8fExyLmFwcGx5KHQpIT09JHIpdGhyb3cgbmV3IFR5cGVFcnJvcihEcit0KTtmb3IodmFyIHI9Q3IoYXJndW1lbnRzLDEpLGkscz1mdW5jdGlvbigpe2lmKHRoaXMgaW5zdGFuY2VvZiBpKXt2YXIgYz10LmFwcGx5KHRoaXMsdHQocixhcmd1bWVudHMpKTtyZXR1cm4gT2JqZWN0KGMpPT09Yz9jOnRoaXN9cmV0dXJuIHQuYXBwbHkoZSx0dChyLGFyZ3VtZW50cykpfSxhPUZyKDAsdC5sZW5ndGgtci5sZW5ndGgpLG89W10sbD0wO2w8YTtsKyspb1tsXT0iJCIrbDtpZihpPUZ1bmN0aW9uKCJiaW5kZXIiLCJyZXR1cm4gZnVuY3Rpb24gKCIrSXIobywiLCIpKyIpeyByZXR1cm4gYmluZGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTsgfSIpKHMpLHQucHJvdG90eXBlKXt2YXIgZj1mdW5jdGlvbigpe307Zi5wcm90b3R5cGU9dC5wcm90b3R5cGUsaS5wcm90b3R5cGU9bmV3IGYsZi5wcm90b3R5cGU9bnVsbH1yZXR1cm4gaX0sa3I9VHIsJGU9RnVuY3Rpb24ucHJvdG90eXBlLmJpbmR8fGtyLE5yPUVycm9yLE1yPUV2YWxFcnJvcixqcj1SYW5nZUVycm9yLEJyPVJlZmVyZW5jZUVycm9yLEV0PVN5bnRheEVycm9yLGRlPVR5cGVFcnJvcixVcj1VUklFcnJvcixHcj1mdW5jdGlvbigpe2lmKHR5cGVvZiBTeW1ib2whPSJmdW5jdGlvbiJ8fHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzIT0iZnVuY3Rpb24iKXJldHVybiExO2lmKHR5cGVvZiBTeW1ib2wuaXRlcmF0b3I9PSJzeW1ib2wiKXJldHVybiEwO3ZhciBlPXt9LHQ9U3ltYm9sKCJ0ZXN0Iikscj1PYmplY3QodCk7aWYodHlwZW9mIHQ9PSJzdHJpbmcifHxPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodCkhPT0iW29iamVjdCBTeW1ib2xdInx8T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHIpIT09IltvYmplY3QgU3ltYm9sXSIpcmV0dXJuITE7dmFyIGk9NDI7ZVt0XT1pO2Zvcih0IGluIGUpcmV0dXJuITE7aWYodHlwZW9mIE9iamVjdC5rZXlzPT0iZnVuY3Rpb24iJiZPYmplY3Qua2V5cyhlKS5sZW5ndGghPT0wfHx0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXM9PSJmdW5jdGlvbiImJk9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGUpLmxlbmd0aCE9PTApcmV0dXJuITE7dmFyIHM9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTtpZihzLmxlbmd0aCE9PTF8fHNbMF0hPT10fHwhT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKGUsdCkpcmV0dXJuITE7aWYodHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I9PSJmdW5jdGlvbiIpe3ZhciBhPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSx0KTtpZihhLnZhbHVlIT09aXx8YS5lbnVtZXJhYmxlIT09ITApcmV0dXJuITF9cmV0dXJuITB9LHJ0PXR5cGVvZiBTeW1ib2w8InUiJiZTeW1ib2wsSHI9R3IsS3I9ZnVuY3Rpb24oKXtyZXR1cm4gdHlwZW9mIHJ0IT0iZnVuY3Rpb24ifHx0eXBlb2YgU3ltYm9sIT0iZnVuY3Rpb24ifHx0eXBlb2YgcnQoImZvbyIpIT0ic3ltYm9sInx8dHlwZW9mIFN5bWJvbCgiYmFyIikhPSJzeW1ib2wiPyExOkhyKCl9LFBlPXtfX3Byb3RvX186bnVsbCxmb286e319LF9yPU9iamVjdCxWcj1mdW5jdGlvbigpe3JldHVybntfX3Byb3RvX186UGV9LmZvbz09PVBlLmZvbyYmIShQZSBpbnN0YW5jZW9mIF9yKX0sV3I9RnVuY3Rpb24ucHJvdG90eXBlLmNhbGwsSnI9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSx6cj0kZSxRcj16ci5jYWxsKFdyLEpyKSxiLHFyPU5yLFlyPU1yLFpyPWpyLFhyPUJyLEg9RXQsRz1kZSxlbj1VcixEdD1GdW5jdGlvbix4ZT1mdW5jdGlvbihuKXt0cnl7cmV0dXJuIER0KCcidXNlIHN0cmljdCI7IHJldHVybiAoJytuKyIpLmNvbnN0cnVjdG9yOyIpKCl9Y2F0Y2h7fX0sVD1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO2lmKFQpdHJ5e1Qoe30sIiIpfWNhdGNoe1Q9bnVsbH12YXIgT2U9ZnVuY3Rpb24oKXt0aHJvdyBuZXcgR30sdG49VD9mdW5jdGlvbigpe3RyeXtyZXR1cm4gYXJndW1lbnRzLmNhbGxlZSxPZX1jYXRjaHt0cnl7cmV0dXJuIFQoYXJndW1lbnRzLCJjYWxsZWUiKS5nZXR9Y2F0Y2h7cmV0dXJuIE9lfX19KCk6T2Usaj1LcigpLHJuPVZyKCksdz1PYmplY3QuZ2V0UHJvdG90eXBlT2Z8fChybj9mdW5jdGlvbihuKXtyZXR1cm4gbi5fX3Byb3RvX199Om51bGwpLFU9e30sbm49dHlwZW9mIFVpbnQ4QXJyYXk+InUifHwhdz9iOncoVWludDhBcnJheSksaz17X19wcm90b19fOm51bGwsIiVBZ2dyZWdhdGVFcnJvciUiOnR5cGVvZiBBZ2dyZWdhdGVFcnJvcj4idSI/YjpBZ2dyZWdhdGVFcnJvciwiJUFycmF5JSI6QXJyYXksIiVBcnJheUJ1ZmZlciUiOnR5cGVvZiBBcnJheUJ1ZmZlcj4idSI/YjpBcnJheUJ1ZmZlciwiJUFycmF5SXRlcmF0b3JQcm90b3R5cGUlIjpqJiZ3P3coW11bU3ltYm9sLml0ZXJhdG9yXSgpKTpiLCIlQXN5bmNGcm9tU3luY0l0ZXJhdG9yUHJvdG90eXBlJSI6YiwiJUFzeW5jRnVuY3Rpb24lIjpVLCIlQXN5bmNHZW5lcmF0b3IlIjpVLCIlQXN5bmNHZW5lcmF0b3JGdW5jdGlvbiUiOlUsIiVBc3luY0l0ZXJhdG9yUHJvdG90eXBlJSI6VSwiJUF0b21pY3MlIjp0eXBlb2YgQXRvbWljcz4idSI/YjpBdG9taWNzLCIlQmlnSW50JSI6dHlwZW9mIEJpZ0ludD4idSI/YjpCaWdJbnQsIiVCaWdJbnQ2NEFycmF5JSI6dHlwZW9mIEJpZ0ludDY0QXJyYXk+InUiP2I6QmlnSW50NjRBcnJheSwiJUJpZ1VpbnQ2NEFycmF5JSI6dHlwZW9mIEJpZ1VpbnQ2NEFycmF5PiJ1Ij9iOkJpZ1VpbnQ2NEFycmF5LCIlQm9vbGVhbiUiOkJvb2xlYW4sIiVEYXRhVmlldyUiOnR5cGVvZiBEYXRhVmlldz4idSI/YjpEYXRhVmlldywiJURhdGUlIjpEYXRlLCIlZGVjb2RlVVJJJSI6ZGVjb2RlVVJJLCIlZGVjb2RlVVJJQ29tcG9uZW50JSI6ZGVjb2RlVVJJQ29tcG9uZW50LCIlZW5jb2RlVVJJJSI6ZW5jb2RlVVJJLCIlZW5jb2RlVVJJQ29tcG9uZW50JSI6ZW5jb2RlVVJJQ29tcG9uZW50LCIlRXJyb3IlIjpxciwiJWV2YWwlIjpldmFsLCIlRXZhbEVycm9yJSI6WXIsIiVGbG9hdDMyQXJyYXklIjp0eXBlb2YgRmxvYXQzMkFycmF5PiJ1Ij9iOkZsb2F0MzJBcnJheSwiJUZsb2F0NjRBcnJheSUiOnR5cGVvZiBGbG9hdDY0QXJyYXk+InUiP2I6RmxvYXQ2NEFycmF5LCIlRmluYWxpemF0aW9uUmVnaXN0cnklIjp0eXBlb2YgRmluYWxpemF0aW9uUmVnaXN0cnk+InUiP2I6RmluYWxpemF0aW9uUmVnaXN0cnksIiVGdW5jdGlvbiUiOkR0LCIlR2VuZXJhdG9yRnVuY3Rpb24lIjpVLCIlSW50OEFycmF5JSI6dHlwZW9mIEludDhBcnJheT4idSI/YjpJbnQ4QXJyYXksIiVJbnQxNkFycmF5JSI6dHlwZW9mIEludDE2QXJyYXk+InUiP2I6SW50MTZBcnJheSwiJUludDMyQXJyYXklIjp0eXBlb2YgSW50MzJBcnJheT4idSI/YjpJbnQzMkFycmF5LCIlaXNGaW5pdGUlIjppc0Zpbml0ZSwiJWlzTmFOJSI6aXNOYU4sIiVJdGVyYXRvclByb3RvdHlwZSUiOmomJnc/dyh3KFtdW1N5bWJvbC5pdGVyYXRvcl0oKSkpOmIsIiVKU09OJSI6dHlwZW9mIEpTT049PSJvYmplY3QiP0pTT046YiwiJU1hcCUiOnR5cGVvZiBNYXA+InUiP2I6TWFwLCIlTWFwSXRlcmF0b3JQcm90b3R5cGUlIjp0eXBlb2YgTWFwPiJ1Inx8IWp8fCF3P2I6dyhuZXcgTWFwKClbU3ltYm9sLml0ZXJhdG9yXSgpKSwiJU1hdGglIjpNYXRoLCIlTnVtYmVyJSI6TnVtYmVyLCIlT2JqZWN0JSI6T2JqZWN0LCIlcGFyc2VGbG9hdCUiOnBhcnNlRmxvYXQsIiVwYXJzZUludCUiOnBhcnNlSW50LCIlUHJvbWlzZSUiOnR5cGVvZiBQcm9taXNlPiJ1Ij9iOlByb21pc2UsIiVQcm94eSUiOnR5cGVvZiBQcm94eT4idSI/YjpQcm94eSwiJVJhbmdlRXJyb3IlIjpaciwiJVJlZmVyZW5jZUVycm9yJSI6WHIsIiVSZWZsZWN0JSI6dHlwZW9mIFJlZmxlY3Q+InUiP2I6UmVmbGVjdCwiJVJlZ0V4cCUiOlJlZ0V4cCwiJVNldCUiOnR5cGVvZiBTZXQ+InUiP2I6U2V0LCIlU2V0SXRlcmF0b3JQcm90b3R5cGUlIjp0eXBlb2YgU2V0PiJ1Inx8IWp8fCF3P2I6dyhuZXcgU2V0KClbU3ltYm9sLml0ZXJhdG9yXSgpKSwiJVNoYXJlZEFycmF5QnVmZmVyJSI6dHlwZW9mIFNoYXJlZEFycmF5QnVmZmVyPiJ1Ij9iOlNoYXJlZEFycmF5QnVmZmVyLCIlU3RyaW5nJSI6U3RyaW5nLCIlU3RyaW5nSXRlcmF0b3JQcm90b3R5cGUlIjpqJiZ3P3coIiJbU3ltYm9sLml0ZXJhdG9yXSgpKTpiLCIlU3ltYm9sJSI6aj9TeW1ib2w6YiwiJVN5bnRheEVycm9yJSI6SCwiJVRocm93VHlwZUVycm9yJSI6dG4sIiVUeXBlZEFycmF5JSI6bm4sIiVUeXBlRXJyb3IlIjpHLCIlVWludDhBcnJheSUiOnR5cGVvZiBVaW50OEFycmF5PiJ1Ij9iOlVpbnQ4QXJyYXksIiVVaW50OENsYW1wZWRBcnJheSUiOnR5cGVvZiBVaW50OENsYW1wZWRBcnJheT4idSI/YjpVaW50OENsYW1wZWRBcnJheSwiJVVpbnQxNkFycmF5JSI6dHlwZW9mIFVpbnQxNkFycmF5PiJ1Ij9iOlVpbnQxNkFycmF5LCIlVWludDMyQXJyYXklIjp0eXBlb2YgVWludDMyQXJyYXk+InUiP2I6VWludDMyQXJyYXksIiVVUklFcnJvciUiOmVuLCIlV2Vha01hcCUiOnR5cGVvZiBXZWFrTWFwPiJ1Ij9iOldlYWtNYXAsIiVXZWFrUmVmJSI6dHlwZW9mIFdlYWtSZWY+InUiP2I6V2Vha1JlZiwiJVdlYWtTZXQlIjp0eXBlb2YgV2Vha1NldD4idSI/YjpXZWFrU2V0fTtpZih3KXRyeXtudWxsLmVycm9yfWNhdGNoKG4pe3ZhciBzbj13KHcobikpO2tbIiVFcnJvci5wcm90b3R5cGUlIl09c259dmFyIGFuPWZ1bmN0aW9uIG4oZSl7dmFyIHQ7aWYoZT09PSIlQXN5bmNGdW5jdGlvbiUiKXQ9eGUoImFzeW5jIGZ1bmN0aW9uICgpIHt9Iik7ZWxzZSBpZihlPT09IiVHZW5lcmF0b3JGdW5jdGlvbiUiKXQ9eGUoImZ1bmN0aW9uKiAoKSB7fSIpO2Vsc2UgaWYoZT09PSIlQXN5bmNHZW5lcmF0b3JGdW5jdGlvbiUiKXQ9eGUoImFzeW5jIGZ1bmN0aW9uKiAoKSB7fSIpO2Vsc2UgaWYoZT09PSIlQXN5bmNHZW5lcmF0b3IlIil7dmFyIHI9bigiJUFzeW5jR2VuZXJhdG9yRnVuY3Rpb24lIik7ciYmKHQ9ci5wcm90b3R5cGUpfWVsc2UgaWYoZT09PSIlQXN5bmNJdGVyYXRvclByb3RvdHlwZSUiKXt2YXIgaT1uKCIlQXN5bmNHZW5lcmF0b3IlIik7aSYmdyYmKHQ9dyhpLnByb3RvdHlwZSkpfXJldHVybiBrW2VdPXQsdH0sbnQ9e19fcHJvdG9fXzpudWxsLCIlQXJyYXlCdWZmZXJQcm90b3R5cGUlIjpbIkFycmF5QnVmZmVyIiwicHJvdG90eXBlIl0sIiVBcnJheVByb3RvdHlwZSUiOlsiQXJyYXkiLCJwcm90b3R5cGUiXSwiJUFycmF5UHJvdG9fZW50cmllcyUiOlsiQXJyYXkiLCJwcm90b3R5cGUiLCJlbnRyaWVzIl0sIiVBcnJheVByb3RvX2ZvckVhY2glIjpbIkFycmF5IiwicHJvdG90eXBlIiwiZm9yRWFjaCJdLCIlQXJyYXlQcm90b19rZXlzJSI6WyJBcnJheSIsInByb3RvdHlwZSIsImtleXMiXSwiJUFycmF5UHJvdG9fdmFsdWVzJSI6WyJBcnJheSIsInByb3RvdHlwZSIsInZhbHVlcyJdLCIlQXN5bmNGdW5jdGlvblByb3RvdHlwZSUiOlsiQXN5bmNGdW5jdGlvbiIsInByb3RvdHlwZSJdLCIlQXN5bmNHZW5lcmF0b3IlIjpbIkFzeW5jR2VuZXJhdG9yRnVuY3Rpb24iLCJwcm90b3R5cGUiXSwiJUFzeW5jR2VuZXJhdG9yUHJvdG90eXBlJSI6WyJBc3luY0dlbmVyYXRvckZ1bmN0aW9uIiwicHJvdG90eXBlIiwicHJvdG90eXBlIl0sIiVCb29sZWFuUHJvdG90eXBlJSI6WyJCb29sZWFuIiwicHJvdG90eXBlIl0sIiVEYXRhVmlld1Byb3RvdHlwZSUiOlsiRGF0YVZpZXciLCJwcm90b3R5cGUiXSwiJURhdGVQcm90b3R5cGUlIjpbIkRhdGUiLCJwcm90b3R5cGUiXSwiJUVycm9yUHJvdG90eXBlJSI6WyJFcnJvciIsInByb3RvdHlwZSJdLCIlRXZhbEVycm9yUHJvdG90eXBlJSI6WyJFdmFsRXJyb3IiLCJwcm90b3R5cGUiXSwiJUZsb2F0MzJBcnJheVByb3RvdHlwZSUiOlsiRmxvYXQzMkFycmF5IiwicHJvdG90eXBlIl0sIiVGbG9hdDY0QXJyYXlQcm90b3R5cGUlIjpbIkZsb2F0NjRBcnJheSIsInByb3RvdHlwZSJdLCIlRnVuY3Rpb25Qcm90b3R5cGUlIjpbIkZ1bmN0aW9uIiwicHJvdG90eXBlIl0sIiVHZW5lcmF0b3IlIjpbIkdlbmVyYXRvckZ1bmN0aW9uIiwicHJvdG90eXBlIl0sIiVHZW5lcmF0b3JQcm90b3R5cGUlIjpbIkdlbmVyYXRvckZ1bmN0aW9uIiwicHJvdG90eXBlIiwicHJvdG90eXBlIl0sIiVJbnQ4QXJyYXlQcm90b3R5cGUlIjpbIkludDhBcnJheSIsInByb3RvdHlwZSJdLCIlSW50MTZBcnJheVByb3RvdHlwZSUiOlsiSW50MTZBcnJheSIsInByb3RvdHlwZSJdLCIlSW50MzJBcnJheVByb3RvdHlwZSUiOlsiSW50MzJBcnJheSIsInByb3RvdHlwZSJdLCIlSlNPTlBhcnNlJSI6WyJKU09OIiwicGFyc2UiXSwiJUpTT05TdHJpbmdpZnklIjpbIkpTT04iLCJzdHJpbmdpZnkiXSwiJU1hcFByb3RvdHlwZSUiOlsiTWFwIiwicHJvdG90eXBlIl0sIiVOdW1iZXJQcm90b3R5cGUlIjpbIk51bWJlciIsInByb3RvdHlwZSJdLCIlT2JqZWN0UHJvdG90eXBlJSI6WyJPYmplY3QiLCJwcm90b3R5cGUiXSwiJU9ialByb3RvX3RvU3RyaW5nJSI6WyJPYmplY3QiLCJwcm90b3R5cGUiLCJ0b1N0cmluZyJdLCIlT2JqUHJvdG9fdmFsdWVPZiUiOlsiT2JqZWN0IiwicHJvdG90eXBlIiwidmFsdWVPZiJdLCIlUHJvbWlzZVByb3RvdHlwZSUiOlsiUHJvbWlzZSIsInByb3RvdHlwZSJdLCIlUHJvbWlzZVByb3RvX3RoZW4lIjpbIlByb21pc2UiLCJwcm90b3R5cGUiLCJ0aGVuIl0sIiVQcm9taXNlX2FsbCUiOlsiUHJvbWlzZSIsImFsbCJdLCIlUHJvbWlzZV9yZWplY3QlIjpbIlByb21pc2UiLCJyZWplY3QiXSwiJVByb21pc2VfcmVzb2x2ZSUiOlsiUHJvbWlzZSIsInJlc29sdmUiXSwiJVJhbmdlRXJyb3JQcm90b3R5cGUlIjpbIlJhbmdlRXJyb3IiLCJwcm90b3R5cGUiXSwiJVJlZmVyZW5jZUVycm9yUHJvdG90eXBlJSI6WyJSZWZlcmVuY2VFcnJvciIsInByb3RvdHlwZSJdLCIlUmVnRXhwUHJvdG90eXBlJSI6WyJSZWdFeHAiLCJwcm90b3R5cGUiXSwiJVNldFByb3RvdHlwZSUiOlsiU2V0IiwicHJvdG90eXBlIl0sIiVTaGFyZWRBcnJheUJ1ZmZlclByb3RvdHlwZSUiOlsiU2hhcmVkQXJyYXlCdWZmZXIiLCJwcm90b3R5cGUiXSwiJVN0cmluZ1Byb3RvdHlwZSUiOlsiU3RyaW5nIiwicHJvdG90eXBlIl0sIiVTeW1ib2xQcm90b3R5cGUlIjpbIlN5bWJvbCIsInByb3RvdHlwZSJdLCIlU3ludGF4RXJyb3JQcm90b3R5cGUlIjpbIlN5bnRheEVycm9yIiwicHJvdG90eXBlIl0sIiVUeXBlZEFycmF5UHJvdG90eXBlJSI6WyJUeXBlZEFycmF5IiwicHJvdG90eXBlIl0sIiVUeXBlRXJyb3JQcm90b3R5cGUlIjpbIlR5cGVFcnJvciIsInByb3RvdHlwZSJdLCIlVWludDhBcnJheVByb3RvdHlwZSUiOlsiVWludDhBcnJheSIsInByb3RvdHlwZSJdLCIlVWludDhDbGFtcGVkQXJyYXlQcm90b3R5cGUlIjpbIlVpbnQ4Q2xhbXBlZEFycmF5IiwicHJvdG90eXBlIl0sIiVVaW50MTZBcnJheVByb3RvdHlwZSUiOlsiVWludDE2QXJyYXkiLCJwcm90b3R5cGUiXSwiJVVpbnQzMkFycmF5UHJvdG90eXBlJSI6WyJVaW50MzJBcnJheSIsInByb3RvdHlwZSJdLCIlVVJJRXJyb3JQcm90b3R5cGUlIjpbIlVSSUVycm9yIiwicHJvdG90eXBlIl0sIiVXZWFrTWFwUHJvdG90eXBlJSI6WyJXZWFrTWFwIiwicHJvdG90eXBlIl0sIiVXZWFrU2V0UHJvdG90eXBlJSI6WyJXZWFrU2V0IiwicHJvdG90eXBlIl19LHE9JGUsZmU9UXIsb249cS5jYWxsKEZ1bmN0aW9uLmNhbGwsQXJyYXkucHJvdG90eXBlLmNvbmNhdCksbG49cS5jYWxsKEZ1bmN0aW9uLmFwcGx5LEFycmF5LnByb3RvdHlwZS5zcGxpY2UpLGl0PXEuY2FsbChGdW5jdGlvbi5jYWxsLFN0cmluZy5wcm90b3R5cGUucmVwbGFjZSksY2U9cS5jYWxsKEZ1bmN0aW9uLmNhbGwsU3RyaW5nLnByb3RvdHlwZS5zbGljZSksdW49cS5jYWxsKEZ1bmN0aW9uLmNhbGwsUmVnRXhwLnByb3RvdHlwZS5leGVjKSxmbj0vW14lLltcXV0rfFxbKD86KC0/XGQrKD86XC5cZCspPyl8KFsiJ10pKCg/Oig/IVwyKVteXFxdfFxcLikqPylcMilcXXwoPz0oPzpcLnxcW1xdKSg/OlwufFxbXF18JSQpKS9nLGNuPS9cXChcXCk/L2cscG49ZnVuY3Rpb24oZSl7dmFyIHQ9Y2UoZSwwLDEpLHI9Y2UoZSwtMSk7aWYodD09PSIlIiYmciE9PSIlIil0aHJvdyBuZXcgSCgiaW52YWxpZCBpbnRyaW5zaWMgc3ludGF4LCBleHBlY3RlZCBjbG9zaW5nIGAlYCIpO2lmKHI9PT0iJSImJnQhPT0iJSIpdGhyb3cgbmV3IEgoImludmFsaWQgaW50cmluc2ljIHN5bnRheCwgZXhwZWN0ZWQgb3BlbmluZyBgJWAiKTt2YXIgaT1bXTtyZXR1cm4gaXQoZSxmbixmdW5jdGlvbihzLGEsbyxsKXtpW2kubGVuZ3RoXT1vP2l0KGwsY24sIiQxIik6YXx8c30pLGl9LGduPWZ1bmN0aW9uKGUsdCl7dmFyIHI9ZSxpO2lmKGZlKG50LHIpJiYoaT1udFtyXSxyPSIlIitpWzBdKyIlIiksZmUoayxyKSl7dmFyIHM9a1tyXTtpZihzPT09VSYmKHM9YW4ocikpLHR5cGVvZiBzPiJ1IiYmIXQpdGhyb3cgbmV3IEcoImludHJpbnNpYyAiK2UrIiBleGlzdHMsIGJ1dCBpcyBub3QgYXZhaWxhYmxlLiBQbGVhc2UgZmlsZSBhbiBpc3N1ZSEiKTtyZXR1cm57YWxpYXM6aSxuYW1lOnIsdmFsdWU6c319dGhyb3cgbmV3IEgoImludHJpbnNpYyAiK2UrIiBkb2VzIG5vdCBleGlzdCEiKX0sWT1mdW5jdGlvbihlLHQpe2lmKHR5cGVvZiBlIT0ic3RyaW5nInx8ZS5sZW5ndGg9PT0wKXRocm93IG5ldyBHKCJpbnRyaW5zaWMgbmFtZSBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZyIpO2lmKGFyZ3VtZW50cy5sZW5ndGg+MSYmdHlwZW9mIHQhPSJib29sZWFuIil0aHJvdyBuZXcgRygnImFsbG93TWlzc2luZyIgYXJndW1lbnQgbXVzdCBiZSBhIGJvb2xlYW4nKTtpZih1bigvXiU/W14lXSolPyQvLGUpPT09bnVsbCl0aHJvdyBuZXcgSCgiYCVgIG1heSBub3QgYmUgcHJlc2VudCBhbnl3aGVyZSBidXQgYXQgdGhlIGJlZ2lubmluZyBhbmQgZW5kIG9mIHRoZSBpbnRyaW5zaWMgbmFtZSIpO3ZhciByPXBuKGUpLGk9ci5sZW5ndGg+MD9yWzBdOiIiLHM9Z24oIiUiK2krIiUiLHQpLGE9cy5uYW1lLG89cy52YWx1ZSxsPSExLGY9cy5hbGlhcztmJiYoaT1mWzBdLGxuKHIsb24oWzAsMV0sZikpKTtmb3IodmFyIGM9MSxnPSEwO2M8ci5sZW5ndGg7Yys9MSl7dmFyIHU9cltjXSxwPWNlKHUsMCwxKSxkPWNlKHUsLTEpO2lmKChwPT09JyInfHxwPT09IicifHxwPT09ImAifHxkPT09JyInfHxkPT09IicifHxkPT09ImAiKSYmcCE9PWQpdGhyb3cgbmV3IEgoInByb3BlcnR5IG5hbWVzIHdpdGggcXVvdGVzIG11c3QgaGF2ZSBtYXRjaGluZyBxdW90ZXMiKTtpZigodT09PSJjb25zdHJ1Y3RvciJ8fCFnKSYmKGw9ITApLGkrPSIuIit1LGE9IiUiK2krIiUiLGZlKGssYSkpbz1rW2FdO2Vsc2UgaWYobyE9bnVsbCl7aWYoISh1IGluIG8pKXtpZighdCl0aHJvdyBuZXcgRygiYmFzZSBpbnRyaW5zaWMgZm9yICIrZSsiIGV4aXN0cywgYnV0IHRoZSBwcm9wZXJ0eSBpcyBub3QgYXZhaWxhYmxlLiIpO3JldHVybn1pZihUJiZjKzE+PXIubGVuZ3RoKXt2YXIgbT1UKG8sdSk7Zz0hIW0sZyYmImdldCJpbiBtJiYhKCJvcmlnaW5hbFZhbHVlImluIG0uZ2V0KT9vPW0uZ2V0Om89b1t1XX1lbHNlIGc9ZmUobyx1KSxvPW9bdV07ZyYmIWwmJihrW2FdPW8pfX1yZXR1cm4gb30sd2Usc3Q7ZnVuY3Rpb24gQ2UoKXtpZihzdClyZXR1cm4gd2U7c3Q9MTt2YXIgbj1ZLGU9bigiJU9iamVjdC5kZWZpbmVQcm9wZXJ0eSUiLCEwKXx8ITE7aWYoZSl0cnl7ZSh7fSwiYSIse3ZhbHVlOjF9KX1jYXRjaHtlPSExfXJldHVybiB3ZT1lLHdlfXZhciBobj1ZLGllPWhuKCIlT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvciUiLCEwKTtpZihpZSl0cnl7aWUoW10sImxlbmd0aCIpfWNhdGNoe2llPW51bGx9dmFyIEx0PWllLGF0PUNlKCksZG49RXQsQj1kZSxvdD1MdCxtbj1mdW5jdGlvbihlLHQscil7aWYoIWV8fHR5cGVvZiBlIT0ib2JqZWN0IiYmdHlwZW9mIGUhPSJmdW5jdGlvbiIpdGhyb3cgbmV3IEIoImBvYmpgIG11c3QgYmUgYW4gb2JqZWN0IG9yIGEgZnVuY3Rpb25gIik7aWYodHlwZW9mIHQhPSJzdHJpbmciJiZ0eXBlb2YgdCE9InN5bWJvbCIpdGhyb3cgbmV3IEIoImBwcm9wZXJ0eWAgbXVzdCBiZSBhIHN0cmluZyBvciBhIHN5bWJvbGAiKTtpZihhcmd1bWVudHMubGVuZ3RoPjMmJnR5cGVvZiBhcmd1bWVudHNbM10hPSJib29sZWFuIiYmYXJndW1lbnRzWzNdIT09bnVsbCl0aHJvdyBuZXcgQigiYG5vbkVudW1lcmFibGVgLCBpZiBwcm92aWRlZCwgbXVzdCBiZSBhIGJvb2xlYW4gb3IgbnVsbCIpO2lmKGFyZ3VtZW50cy5sZW5ndGg+NCYmdHlwZW9mIGFyZ3VtZW50c1s0XSE9ImJvb2xlYW4iJiZhcmd1bWVudHNbNF0hPT1udWxsKXRocm93IG5ldyBCKCJgbm9uV3JpdGFibGVgLCBpZiBwcm92aWRlZCwgbXVzdCBiZSBhIGJvb2xlYW4gb3IgbnVsbCIpO2lmKGFyZ3VtZW50cy5sZW5ndGg+NSYmdHlwZW9mIGFyZ3VtZW50c1s1XSE9ImJvb2xlYW4iJiZhcmd1bWVudHNbNV0hPT1udWxsKXRocm93IG5ldyBCKCJgbm9uQ29uZmlndXJhYmxlYCwgaWYgcHJvdmlkZWQsIG11c3QgYmUgYSBib29sZWFuIG9yIG51bGwiKTtpZihhcmd1bWVudHMubGVuZ3RoPjYmJnR5cGVvZiBhcmd1bWVudHNbNl0hPSJib29sZWFuIil0aHJvdyBuZXcgQigiYGxvb3NlYCwgaWYgcHJvdmlkZWQsIG11c3QgYmUgYSBib29sZWFuIik7dmFyIGk9YXJndW1lbnRzLmxlbmd0aD4zP2FyZ3VtZW50c1szXTpudWxsLHM9YXJndW1lbnRzLmxlbmd0aD40P2FyZ3VtZW50c1s0XTpudWxsLGE9YXJndW1lbnRzLmxlbmd0aD41P2FyZ3VtZW50c1s1XTpudWxsLG89YXJndW1lbnRzLmxlbmd0aD42P2FyZ3VtZW50c1s2XTohMSxsPSEhb3QmJm90KGUsdCk7aWYoYXQpYXQoZSx0LHtjb25maWd1cmFibGU6YT09PW51bGwmJmw/bC5jb25maWd1cmFibGU6IWEsZW51bWVyYWJsZTppPT09bnVsbCYmbD9sLmVudW1lcmFibGU6IWksdmFsdWU6cix3cml0YWJsZTpzPT09bnVsbCYmbD9sLndyaXRhYmxlOiFzfSk7ZWxzZSBpZihvfHwhaSYmIXMmJiFhKWVbdF09cjtlbHNlIHRocm93IG5ldyBkbigiVGhpcyBlbnZpcm9ubWVudCBkb2VzIG5vdCBzdXBwb3J0IGRlZmluaW5nIGEgcHJvcGVydHkgYXMgbm9uLWNvbmZpZ3VyYWJsZSwgbm9uLXdyaXRhYmxlLCBvciBub24tZW51bWVyYWJsZS4iKX0sRmU9Q2UoKSxGdD1mdW5jdGlvbigpe3JldHVybiEhRmV9O0Z0Lmhhc0FycmF5TGVuZ3RoRGVmaW5lQnVnPWZ1bmN0aW9uKCl7aWYoIUZlKXJldHVybiBudWxsO3RyeXtyZXR1cm4gRmUoW10sImxlbmd0aCIse3ZhbHVlOjF9KS5sZW5ndGghPT0xfWNhdGNoe3JldHVybiEwfX07dmFyIHluPUZ0LGJuPVksbHQ9bW4sdm49eW4oKSx1dD1MdCxmdD1kZSxTbj1ibigiJU1hdGguZmxvb3IlIiksUG49ZnVuY3Rpb24oZSx0KXtpZih0eXBlb2YgZSE9ImZ1bmN0aW9uIil0aHJvdyBuZXcgZnQoImBmbmAgaXMgbm90IGEgZnVuY3Rpb24iKTtpZih0eXBlb2YgdCE9Im51bWJlciJ8fHQ8MHx8dD40Mjk0OTY3Mjk1fHxTbih0KSE9PXQpdGhyb3cgbmV3IGZ0KCJgbGVuZ3RoYCBtdXN0IGJlIGEgcG9zaXRpdmUgMzItYml0IGludGVnZXIiKTt2YXIgcj1hcmd1bWVudHMubGVuZ3RoPjImJiEhYXJndW1lbnRzWzJdLGk9ITAscz0hMDtpZigibGVuZ3RoImluIGUmJnV0KXt2YXIgYT11dChlLCJsZW5ndGgiKTthJiYhYS5jb25maWd1cmFibGUmJihpPSExKSxhJiYhYS53cml0YWJsZSYmKHM9ITEpfXJldHVybihpfHxzfHwhcikmJih2bj9sdChlLCJsZW5ndGgiLHQsITAsITApOmx0KGUsImxlbmd0aCIsdCkpLGV9OyhmdW5jdGlvbihuKXt2YXIgZT0kZSx0PVkscj1QbixpPWRlLHM9dCgiJUZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseSUiKSxhPXQoIiVGdW5jdGlvbi5wcm90b3R5cGUuY2FsbCUiKSxvPXQoIiVSZWZsZWN0LmFwcGx5JSIsITApfHxlLmNhbGwoYSxzKSxsPUNlKCksZj10KCIlTWF0aC5tYXglIik7bi5leHBvcnRzPWZ1bmN0aW9uKHUpe2lmKHR5cGVvZiB1IT0iZnVuY3Rpb24iKXRocm93IG5ldyBpKCJhIGZ1bmN0aW9uIGlzIHJlcXVpcmVkIik7dmFyIHA9byhlLGEsYXJndW1lbnRzKTtyZXR1cm4gcihwLDErZigwLHUubGVuZ3RoLShhcmd1bWVudHMubGVuZ3RoLTEpKSwhMCl9O3ZhciBjPWZ1bmN0aW9uKCl7cmV0dXJuIG8oZSxzLGFyZ3VtZW50cyl9O2w/bChuLmV4cG9ydHMsImFwcGx5Iix7dmFsdWU6Y30pOm4uZXhwb3J0cy5hcHBseT1jfSkoQXQpO3ZhciAkdD1BdC5leHBvcnRzLEN0PVksSXQ9JHQseG49SXQoQ3QoIlN0cmluZy5wcm90b3R5cGUuaW5kZXhPZiIpKSxPbj1mdW5jdGlvbihlLHQpe3ZhciByPUN0KGUsISF0KTtyZXR1cm4gdHlwZW9mIHI9PSJmdW5jdGlvbiImJnhuKGUsIi5wcm90b3R5cGUuIik+LTE/SXQocik6cn0sdGU9KHR5cGVvZiBKU09OPCJ1Ij9KU09OOlByKCkpLnN0cmluZ2lmeSx3bj1PcixSbj1FcixBbj0kdCxUdD1PbixjdD1UdCgiQXJyYXkucHJvdG90eXBlLmpvaW4iKSxSZT1UdCgiQXJyYXkucHJvdG90eXBlLnB1c2giKSxwdD1mdW5jdGlvbihlLHQpe2Zvcih2YXIgcj0iIixpPTA7aTxlO2krPTEpcis9dDtyZXR1cm4gcn0sRW49ZnVuY3Rpb24obixlLHQpe3JldHVybiB0fSxEbj1mdW5jdGlvbihlKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCxyPXQmJnQuc3BhY2V8fCIiO3R5cGVvZiByPT0ibnVtYmVyIiYmKHI9cHQociwiICIpKTt2YXIgaT0hIXQmJnR5cGVvZiB0LmN5Y2xlcz09ImJvb2xlYW4iJiZ0LmN5Y2xlcyxzPXQmJnQucmVwbGFjZXI/QW4odC5yZXBsYWNlcik6RW4sYT10eXBlb2YgdD09ImZ1bmN0aW9uIj90OnQmJnQuY21wLG89YSYmZnVuY3Rpb24oZil7dmFyIGM9YS5sZW5ndGg+MiYmZnVuY3Rpb24odSl7cmV0dXJuIGZbdV19O3JldHVybiBmdW5jdGlvbihnLHUpe3JldHVybiBhKHtrZXk6Zyx2YWx1ZTpmW2ddfSx7a2V5OnUsdmFsdWU6Zlt1XX0sYz97X19wcm90b19fOm51bGwsZ2V0OmN9OnZvaWQgMCl9fSxsPVtdO3JldHVybiBmdW5jdGlvbiBmKGMsZyx1LHApe3ZhciBkPXI/YApgK3B0KHAscik6IiIsbT1yPyI6ICI6IjoiO2lmKHUmJnUudG9KU09OJiZ0eXBlb2YgdS50b0pTT049PSJmdW5jdGlvbiImJih1PXUudG9KU09OKCkpLHU9cyhjLGcsdSksdSE9PXZvaWQgMCl7aWYodHlwZW9mIHUhPSJvYmplY3QifHx1PT09bnVsbClyZXR1cm4gdGUodSk7aWYod24odSkpe2Zvcih2YXIgTz1bXSx5PTA7eTx1Lmxlbmd0aDt5Kyspe3ZhciB4PWYodSx5LHVbeV0scCsxKXx8dGUobnVsbCk7UmUoTyxkK3IreCl9cmV0dXJuIlsiK2N0KE8sIiwiKStkKyJdIn1pZihsLmluZGV4T2YodSkhPT0tMSl7aWYoaSlyZXR1cm4gdGUoIl9fY3ljbGVfXyIpO3Rocm93IG5ldyBUeXBlRXJyb3IoIkNvbnZlcnRpbmcgY2lyY3VsYXIgc3RydWN0dXJlIHRvIEpTT04iKX1lbHNlIFJlKGwsdSk7Zm9yKHZhciBTPVJuKHUpLnNvcnQobyYmbyh1KSksTz1bXSx5PTA7eTxTLmxlbmd0aDt5Kyspe3ZhciBnPVNbeV0sdj1mKHUsZyx1W2ddLHArMSk7aWYodil7dmFyIFA9dGUoZykrbSt2O1JlKE8sZCtyK1ApfX1yZXR1cm4gbC5zcGxpY2UobC5pbmRleE9mKHUpLDEpLCJ7IitjdChPLCIsIikrZCsifSJ9fSh7IiI6ZX0sIiIsZSwwKX0sTG49YnIoRG4pLEE9W107Zm9yKHZhciBBZT0wO0FlPDI1NjsrK0FlKUEucHVzaCgoQWUrMjU2KS50b1N0cmluZygxNikuc2xpY2UoMSkpO2Z1bmN0aW9uIEZuKG4sZT0wKXtyZXR1cm4oQVtuW2UrMF1dK0FbbltlKzFdXStBW25bZSsyXV0rQVtuW2UrM11dKyItIitBW25bZSs0XV0rQVtuW2UrNV1dKyItIitBW25bZSs2XV0rQVtuW2UrN11dKyItIitBW25bZSs4XV0rQVtuW2UrOV1dKyItIitBW25bZSsxMF1dK0FbbltlKzExXV0rQVtuW2UrMTJdXStBW25bZSsxM11dK0FbbltlKzE0XV0rQVtuW2UrMTVdXSkudG9Mb3dlckNhc2UoKX12YXIgcmUsJG49bmV3IFVpbnQ4QXJyYXkoMTYpO2Z1bmN0aW9uIENuKCl7aWYoIXJlJiYocmU9dHlwZW9mIGNyeXB0bzwidSImJmNyeXB0by5nZXRSYW5kb21WYWx1ZXMmJmNyeXB0by5nZXRSYW5kb21WYWx1ZXMuYmluZChjcnlwdG8pLCFyZSkpdGhyb3cgbmV3IEVycm9yKCJjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKCkgbm90IHN1cHBvcnRlZC4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS91dWlkanMvdXVpZCNnZXRyYW5kb212YWx1ZXMtbm90LXN1cHBvcnRlZCIpO3JldHVybiByZSgkbil9dmFyIEluPXR5cGVvZiBjcnlwdG88InUiJiZjcnlwdG8ucmFuZG9tVVVJRCYmY3J5cHRvLnJhbmRvbVVVSUQuYmluZChjcnlwdG8pLGd0PXtyYW5kb21VVUlEOklufTtmdW5jdGlvbiBodChuLGUsdCl7aWYoZ3QucmFuZG9tVVVJRCYmIWUmJiFuKXJldHVybiBndC5yYW5kb21VVUlEKCk7bj1ufHx7fTt2YXIgcj1uLnJhbmRvbXx8KG4ucm5nfHxDbikoKTtyZXR1cm4gcls2XT1yWzZdJjE1fDY0LHJbOF09cls4XSY2M3wxMjgsRm4ocil9Y29uc3Qga3Q9e2Nsb25lKG4pe3JldHVybiBuJiZKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG4pKX0sb2JqZWN0SGFzaChuKXtyZXR1cm4gTG4obil9LHN1bUFycmF5Om49Pm4ucmVkdWNlKChlLHQpPT5lK3QsMCkscHJlY2lzaW9uUm91bmQ6KG4sZT01KT0+e2NvbnN0IHQ9TWF0aC5wb3coMTAsZSk7cmV0dXJuIE1hdGgucm91bmQobip0KS90fSxjYWxjdWxhdGVSZWxpY01haW5TdGF0VmFsdWU6KG4sZSx0KT0+TmUuTWFpblN0YXRzVmFsdWVzW25dW2VdLmJhc2UrTmUuTWFpblN0YXRzVmFsdWVzW25dW2VdLmluY3JlbWVudCp0LHdyYXBwZWRGaXhlZFQ6bj0+KHtnZXQ6bj9FLmdldEZpeGVkVDpUbn0pLGZsaXBTdHJpbmdNYXBwaW5nOm49Pk9iamVjdC5mcm9tRW50cmllcyhPYmplY3QuZW50cmllcyhuKS5tYXAoKFtlLHRdKT0+W3QsZV0pKSx1dWlkOigpPT5odCgpLHV1aWRBbHBoYU9ubHk6KCk9Pmh0KCkucmVwbGFjZSgvW15hLXpBLVowLTldL2csIiIpLHN0cmlwVHJhaWxpbmdTbGFzaGVzOm49Pm4ucmVwbGFjZSgvXC8rJC8sIiIpLHNsZWVwOm49Pm5ldyBQcm9taXNlKGU9PnNldFRpbWVvdXQoZSxuKSksY29uc29sZVdhcm5XcmFwcGVyOm49PntuIGluc3RhbmNlb2YgRXJyb3I/Y29uc29sZS53YXJuKG4ubmFtZSxuLm1lc3NhZ2UpOmNvbnNvbGUud2FybigiQW4gdW5rbm93biBlcnJvciBvY2N1cnJlZCIsbil9LHZhbGlkYXRlVXVpZDpuPT57Y29uc3QgZT1uLnRyaW0oKTtyZXR1cm4vXlxkezl9JC8udGVzdChlKT9lOm51bGx9LHNtb290aFNjcm9sbE5lYXJlc3Q6KG4sZT0zMDApPT57Y29uc3QgdD1uLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLHI9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50fHxkb2N1bWVudC5ib2R5LGk9ci5zY3JvbGxUb3Ascz10LnRvcCtpLGE9dC5ib3R0b20raSxvPXIuY2xpZW50SGVpZ2h0O2xldCBsO2lmKHQudG9wPDApbD1zO2Vsc2UgaWYodC5ib3R0b20+bylsPWEtbys1O2Vsc2UgcmV0dXJuO2NvbnN0IGY9cGVyZm9ybWFuY2Uubm93KCksYz1pLGc9bC1jO2Z1bmN0aW9uIHUocCl7Y29uc3QgZD1wLWYsbT1NYXRoLm1pbihkL2UsMSkseT1tPC41PzIqbSptOjEtTWF0aC5wb3coLTIqbSsyLDIpLzI7ci5zY3JvbGxUbygwLGMrZyp5KSxkPGUmJnJlcXVlc3RBbmltYXRpb25GcmFtZSh1KX1yZXF1ZXN0QW5pbWF0aW9uRnJhbWUodSl9fSxUbj0oKT0+KCk9PiIiLGR0PTEwMDtmdW5jdGlvbiBtdChuLGUpe3JldHVybiBrbihuLGUpfWZ1bmN0aW9uIHl0KG4sZSl7cmV0dXJuWy4uLm4uZW50cmllcygpXS5maWx0ZXIoKFt0LHJdKT0+a3QucHJlY2lzaW9uUm91bmQodCk+ZSkucmVkdWNlKCh0LFtyLGldKT0+dCtpLDApfWZ1bmN0aW9uIGtuKG4sZSl7Y29uc3QgdD1uLm1hcChnPT5NYXRoLmZsb29yKGcqZHQpKSxyPTEwLGk9c2UoWy44LC45LDFdLm1hcChnPT5nKnIpKSxzPWJ0KHQubWFwKGc9PnNlKFsuLi5pLmtleXMoKV0ubWFwKHU9PmcqdSkpKSksYT1ObihzZSh0KSxpKSxvPWJ0KEFycmF5KGUpLmZpbGwoYSkpLGw9TXQocyxvKSxmPWR0KnIsYz1uZXcgTWFwO2Zvcihjb25zdFtnLHVdb2YgbCljLnNldChnL2YsdSk7cmV0dXJuIGN9ZnVuY3Rpb24gYnQobil7cmV0dXJuIG4ucmVkdWNlKChlLHQpPT5NdChlLHQpLHNlKFswXSkpfWZ1bmN0aW9uIE50KG4sZSx0KXtjb25zdCByPW5ldyBNYXA7Zm9yKGNvbnN0W2ksc11vZiBuKWZvcihjb25zdFthLG9db2YgZSl7Y29uc3QgbD10KGksYSksZj1yLmdldChsKTtmPT09dm9pZCAwP3Iuc2V0KGwscypvKTpyLnNldChsLGYrcypvKX1yZXR1cm4gcn1mdW5jdGlvbiBNdChuLGUpe3JldHVybiBOdChuLGUsKHQscik9PnQrcil9ZnVuY3Rpb24gTm4obixlKXtyZXR1cm4gTnQobixlLCh0LHIpPT50KnIpfWZ1bmN0aW9uIHNlKG4pe2NvbnN0IGU9bmV3IE1hcCx0PTEvbi5sZW5ndGg7Zm9yKGNvbnN0IHIgb2Ygbil7Y29uc3QgaT1lLmdldChyKTtpPT09dm9pZCAwP2Uuc2V0KHIsdCk6ZS5zZXQocixpK3QpfXJldHVybiBlfWZ1bmN0aW9uIE1uKG4sZSl7Y29uc3QgdD1rdC5wcmVjaXNpb25Sb3VuZChqbihuLGUpKSxyPUhuKCkqS24obi5wYXJ0KSpHbihuLnBhcnQsbi5tYWluLnN0YXQpO2xldCBpPTA7Zm9yKGNvbnN0IGMgb2YgVW4obi5tYWluLnN0YXQsNCkpe2NvbnN0IGc9X24obi5tYWluLnN0YXQsYyksdT1jLm1hcCh5PT55PT0iQVRLInx8eT09IkRFRiJ8fHk9PSJIUCI/LjQqZVt5XTplW3ldKSxwPXl0KG10KHUsNCksdCksZD15dChtdCh1LDUpLHQpLG09LjgqcCsuMipkO2krPWcqbX1jb25zdCBhPTEvKHIqaSksbz00MC8yLjE7cmV0dXJuIGEqby8yNDB9ZnVuY3Rpb24gam4obixlKXtsZXQgdD0wO2Zvcihjb25zdCByIG9mIG4uc3Vic3RhdHMpe2NvbnN0IGk9ci5zdGF0LHM9ci5yb2xsczt0Kz0ocy5sb3cqLjgrcy5taWQqLjkrcy5oaWdoKSpCbihpKSplW2ldfXJldHVybiB0fWZ1bmN0aW9uIEJuKG4pe3JldHVybiBuPT1oLkhQfHxuPT1oLkRFRnx8bj09aC5BVEs/LjQ6MX1mdW5jdGlvbiBVbihuLGUpe3JldHVybiBCdChTdC5maWx0ZXIodD0+dCE9biksZSl9ZnVuY3Rpb24gR24obixlKXtzd2l0Y2gobil7Y2FzZSJIZWFkIjpjYXNlIkhhbmRzIjpyZXR1cm4gMTtjYXNlIkJvZHkiOnN3aXRjaChlKXtjYXNlIkhQJSI6Y2FzZSJBVEslIjpjYXNlIkRFRiUiOnJldHVybiAuMjtjYXNlIkNSSVQgUmF0ZSI6Y2FzZSJDUklUIERNRyI6Y2FzZSJFZmZlY3QgSGl0IFJhdGUiOmNhc2UiT3V0Z29pbmcgSGVhbGluZyBCb29zdCI6cmV0dXJuIC4xO2RlZmF1bHQ6cmV0dXJuIDB9Y2FzZSJGZWV0Ijpzd2l0Y2goZSl7Y2FzZSJIUCUiOmNhc2UiQVRLJSI6Y2FzZSJERUYlIjpyZXR1cm4gLjM7Y2FzZSJTUEQiOnJldHVybiAuMTtkZWZhdWx0OnJldHVybiAwfWNhc2UiUGxhbmFyU3BoZXJlIjpzd2l0Y2goZSl7Y2FzZSJIUCUiOmNhc2UiQVRLJSI6Y2FzZSJERUYlIjpyZXR1cm4gLjEyO2Nhc2UiUGh5c2ljYWwgRE1HIEJvb3N0IjpjYXNlIkZpcmUgRE1HIEJvb3N0IjpjYXNlIkljZSBETUcgQm9vc3QiOmNhc2UiTGlnaHRuaW5nIERNRyBCb29zdCI6Y2FzZSJXaW5kIERNRyBCb29zdCI6Y2FzZSJRdWFudHVtIERNRyBCb29zdCI6Y2FzZSJJbWFnaW5hcnkgRE1HIEJvb3N0IjpyZXR1cm4gLjY0Lzc7ZGVmYXVsdDpyZXR1cm4gMH1jYXNlIkxpbmtSb3BlIjpzd2l0Y2goZSl7Y2FzZSJIUCUiOmNhc2UiQVRLJSI6Y2FzZSJERUYlIjpyZXR1cm4gLjgvMztjYXNlIkJyZWFrIEVmZmVjdCI6cmV0dXJuIC4xNTtjYXNlIkVuZXJneSBSZWdlbmVyYXRpb24gUmF0ZSI6cmV0dXJuIC4wNTtkZWZhdWx0OnJldHVybiAwfWRlZmF1bHQ6cmV0dXJuIGNvbnNvbGUuZXJyb3IoInVuZGVmaW5lZCBwYXJ0IiksMH19ZnVuY3Rpb24gSG4oKXtyZXR1cm4gMS8yfWZ1bmN0aW9uIEtuKG4pe3N3aXRjaChuKXtjYXNlIkhlYWQiOmNhc2UiSGFuZHMiOmNhc2UiQm9keSI6Y2FzZSJGZWV0IjpyZXR1cm4gMS80O2Nhc2UiUGxhbmFyU3BoZXJlIjpjYXNlIkxpbmtSb3BlIjpyZXR1cm4gMS8yO2RlZmF1bHQ6cmV0dXJuIGNvbnNvbGUuZXJyb3IoInVua25vd24gcGFydCIpLDB9fWZ1bmN0aW9uIHZ0KG4pe3N3aXRjaChuKXtjYXNlIkhQJSI6Y2FzZSJBVEslIjpjYXNlIkRFRiUiOmNhc2UiSFAiOmNhc2UiQVRLIjpjYXNlIkRFRiI6cmV0dXJuIDEwO2Nhc2UiU1BEIjpyZXR1cm4gNDtjYXNlIkNSSVQgUmF0ZSI6Y2FzZSJDUklUIERNRyI6cmV0dXJuIDY7Y2FzZSJFZmZlY3QgSGl0IFJhdGUiOmNhc2UiRWZmZWN0IFJFUyI6Y2FzZSJCcmVhayBFZmZlY3QiOnJldHVybiA4O2RlZmF1bHQ6cmV0dXJuIDB9fWZ1bmN0aW9uIF9uKG4sZSl7bGV0IHQ9MDtmb3IoY29uc3QgciBvZiBqdChlLnNsaWNlKDAsTWF0aC5taW4oNCxlLmxlbmd0aCkpKSl7bGV0IGk9MTAwLXZ0KG4pLHM9MTtmb3IoY29uc3QgYSBvZiByKXtjb25zdCBvPXZ0KGEpO3MqPW8vaSxpLT1vfXQrPXN9cmV0dXJuIHR9ZnVuY3Rpb24qanQobil7aWYobi5sZW5ndGg8MilyZXR1cm4geWllbGQgbjtjb25zdFtlLC4uLnRdPW47Zm9yKGNvbnN0IHIgb2YganQodCkpZm9yKGNvbnN0IGkgb2Ygbi5rZXlzKCkpeWllbGRbLi4uci5zbGljZSgwLGkpLGUsLi4uci5zbGljZShpKV19ZnVuY3Rpb24qQnQobixlKXtpZihlPDEpcmV0dXJuIHlpZWxkW107Zm9yKGNvbnN0W3Qscl1vZiBuLmVudHJpZXMoKSlmb3IoY29uc3QgaSBvZiBCdChuLnNsaWNlKHQrMSksZS0xKSl5aWVsZFtyLC4uLmldfWZ1bmN0aW9uIFZuKG4pe2NvbnN0e3JlbGljOmUsd2VpZ2h0czp0fT1uLmRhdGEscj1NbihlLHQpO3NlbGYucG9zdE1lc3NhZ2Uoe2RheXM6cn0pfXZhciBVdD0obj0+KG5bbi5PUFRJTUlaRVI9MF09Ik9QVElNSVpFUiIsbltuLkVTVF9UQlA9MV09IkVTVF9UQlAiLG4pKShVdHx8e30pO3NlbGYub25tZXNzYWdlPWZ1bmN0aW9uKG4pe3N3aXRjaChuLmRhdGEud29ya2VyVHlwZSl7Y2FzZSBVdC5FU1RfVEJQOlZuKG4pO2JyZWFrfX07Cg==",NR=e=>Uint8Array.from(atob(e),a=>a.charCodeAt(0)),w0=typeof self<"u"&&self.Blob&&new Blob(["URL.revokeObjectURL(import.meta.url);",NR(wm)],{type:"text/javascript;charset=utf-8"});function UR(e){let a;try{if(a=w0&&(self.URL||self.webkitURL).createObjectURL(w0),!a)throw"";const t=new Worker(a,{type:"module",name:e==null?void 0:e.name});return t.addEventListener("error",()=>{(self.URL||self.webkitURL).revokeObjectURL(a)}),t}catch{return new Worker("data:text/javascript;base64,"+wm,{type:"module",name:e==null?void 0:e.name})}}async function jR(e,a){const{displayRelics:t,weights:s}=e,o=[Li(t.Head,s),Li(t.Hands,s),Li(t.Body,s),Li(t.Feet,s),Li(t.PlanarSphere,s),Li(t.LinkRope,s)],r=await Promise.all(o),l={Head:r[0].days,Hands:r[1].days,Body:r[2].days,Feet:r[3].days,PlanarSphere:r[4].days,LinkRope:r[5].days};a(l)}const Or={days:0};function Li(e,a){return e?new Promise((t,s)=>{if(e.grade!=5)return t(Or);const o=new UR;mm.calculateRelicSubstatRolls(e);const r={relic:e,weights:a,workerType:wl.EST_TBP};o.onmessage=l=>{const c=l.data;o.terminate(),t(c)},o.onerror=l=>{console.error("Worker error:",l),o.terminate(),t(Or)},o.postMessage(r)}):Promise.resolve(Or)}const vr={},k0={};let K0="";const WR=e=>{ee(["charactersTab","common"]);const[a,t]=W.useState(null),[s,o]=W.useState(!1),{simScoringResult:r,displayRelics:l,showcaseMetadata:c,scoringType:u}=e;if(W.useEffect(()=>{if(u!=Ts&&r!=null)return;const m=c.characterId,h=V.getScoringMetadata(m),g={displayRelics:l,weights:h.stats};K0=m;const C=RR(l,m),M=vr[C];if(M){M!=k0&&t(M);return}o(!0),vr[C]=k0,jR(g,x=>{const O=ER(l,x,h,m);vr[C]=O,K0==m&&(t(O),o(!1))})},[l,c,u,r]),u!=Ts&&r!=null)return i.jsx(i.Fragment,{});const d={display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gridTemplateRows:"repeat(3, auto)",gap:"10px",width:"100%",marginTop:20};return i.jsxs(D,{vertical:!0,align:"center",children:[i.jsx("pre",{style:{fontSize:28,fontWeight:"bold",margin:0,textDecoration:"underline",marginTop:15},children:i.jsx(Zt,{text:"Stat Score Analysis (WIP Experimental)",linkIcon:!0,url:"https://github.com/fribbels/hsr-optimizer/blob/main/docs/guides/en/stat-score.md"})}),s||!a?i.jsx(VR,{}):i.jsxs(D,{vertical:!0,gap:40,style:d,children:[i.jsx(Oi,{relicAnalysis:a.Head}),i.jsx(Oi,{relicAnalysis:a.Hands}),i.jsx(Oi,{relicAnalysis:a.Body}),i.jsx(Oi,{relicAnalysis:a.Feet}),i.jsx(Oi,{relicAnalysis:a.PlanarSphere}),i.jsx(Oi,{relicAnalysis:a.LinkRope})]})]})};function VR(){return i.jsx(D,{justify:"center",align:"center",style:{height:"100px"},children:i.jsx(Jr,{size:"large"})})}function Oi(e){const{relicAnalysis:a}=e,t={width:"100%",flex:1,borderRadius:5,overflow:"hidden",padding:10,background:"rgb(29 42 81 / 73%)",boxShadow:Vs,backdropFilter:"blur(5px)",border:"1px solid rgba(255, 255, 255, 0.10)",WebkitBackdropFilter:"blur(5px)",minHeight:302};return a?i.jsxs(D,{style:t,gap:10,children:[i.jsx(ua,{setSelectedRelic:()=>{},relic:a.relic,unhoverable:!0,score:a.relic.scoringResult}),i.jsx(zR,{relicAnalysis:a})]}):i.jsx("div",{style:t})}const hl={flex:1,borderRadius:6,overflow:"hidden",padding:10,background:"#243356",border:"1px solid #354b7d"},ZR={fontSize:14,color:"rgb(159, 175, 207)"};function zR(e){const{relicAnalysis:a}=e;return a?i.jsxs(D,{vertical:!0,style:{width:"100%"},gap:10,children:[i.jsxs(D,{style:{height:111},gap:10,children:[i.jsx(N0,{relicAnalysis:a,index:0}),i.jsx(N0,{relicAnalysis:a,index:1})]}),i.jsx(D,{style:{...hl,padding:"12px 14px 0px 14px",paddingLeft:15},gap:10,children:i.jsx(XR,{relicAnalysis:a})})]}):i.jsx("div",{style:hl})}function XR(e){const{relicAnalysis:a}=e,t=(a==null?void 0:a.currentPotential)??0,s=Ot(t);return i.jsxs(D,{vertical:!0,justify:"space-between",style:{width:"100%"},children:[i.jsxs(D,{vertical:!0,children:[i.jsx(lo,{index:0,relicAnalysis:a}),i.jsx(lo,{index:1,relicAnalysis:a}),i.jsx(lo,{index:2,relicAnalysis:a}),i.jsx(lo,{index:3,relicAnalysis:a})]}),i.jsxs(D,{vertical:!0,style:{height:46,paddingBottom:10},justify:"space-between",gap:4,children:[i.jsx(ba,{style:{margin:0,paddingBottom:2}}),i.jsxs(D,{justify:"space-between",children:[i.jsx("span",{style:ZR,children:"Perfection"}),i.jsxs("span",{children:[s,"%"]})]}),i.jsx("div",{style:{height:"100%",width:"100%",backgroundColor:"#304878",borderRadius:"20px",overflow:"hidden"},children:i.jsx("div",{style:{height:"100%",width:`${t}%`,background:`linear-gradient(
              to right,
              ${Nm} 0%,
              ${Km} 40%,
              ${km} 80%
            )`,backgroundSize:`${100/(t||1)*100}% 100%`,borderRadius:"4px 0 0 4px"}})})]})]})}function N0(e){const{relicAnalysis:a,index:t}=e,s=t==0?"Days":"Weighted Rolls",o=t==0?"Estimated TBP":"Reroll Potential",r=t==0?Ea(Math.ceil(a.estDays)):Ot(a.weightedRolls),l=t==0?Ea(Math.ceil(a.estTbp/40)*40):Ot(a.rerollDelta)+"%";return i.jsxs(D,{style:{...hl,padding:"6px 10px",backgroundColor:"#334f87",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.25)",border:"1px solid rgb(73 98 153)"},vertical:!0,flex:1,justify:"space-between",children:[i.jsxs(D,{vertical:!0,gap:2,children:[i.jsx("span",{style:{fontSize:"13px",color:"#9FAFCF"},children:s}),i.jsx("span",{style:{fontSize:"18px",fontWeight:"bold",color:"#E0E6F2"},children:r})]}),i.jsxs(D,{vertical:!0,gap:2,children:[i.jsx("span",{style:{fontSize:"13px",color:"#9FAFCF"},children:o}),i.jsx("span",{style:{fontSize:"18px",fontWeight:"bold",color:"#E0E6F2"},children:l})]})]})}const rc={width:"16px",height:"16px",marginRight:"5px",borderRadius:"2px",marginBottom:3},km="#0e7eff",Km="#63a9ff",Nm="#a5bcd9";function YR(){return i.jsx("div",{style:{...rc,backgroundColor:km}})}function JR(){return i.jsx("div",{style:{...rc,backgroundColor:Km}})}function QR(){return i.jsx("div",{style:{...rc,backgroundColor:Nm}})}function lo(e){const{index:a,relicAnalysis:t}=e,s=t.relic.substats[a];if(s==null)return i.jsx("div",{style:{height:22,width:"100%"}});const o=t.weights[s.stat]??0,r=si(t.weights[s.stat]*Hm(s.stat)),l=s.rolls,c=[];let u=0;for(let d=0;d<l.high;d++)c.push(i.jsx(YR,{},u++));for(let d=0;d<l.mid;d++)c.push(i.jsx(JR,{},u++));for(let d=0;d<l.low;d++)c.push(i.jsx(QR,{},u++));return i.jsxs(D,{style:{height:22,width:"100%",opacity:o?1:.05},justify:"space-between",children:[i.jsxs(D,{align:"flex-end",children:[i.jsx("img",{style:{width:qe,height:qe,marginRight:5,marginLeft:-3},src:Q.getStatIcon(s.stat)}),c]}),i.jsxs("div",{children:["⨯ ",r]})]})}const{Text:U0}=_e;function $R(e){const{t:a}=ee(["charactersTab","modals","common"]);console.log("======================================================================= RENDER ShowcaseBuildAnalysis");const{token:t,combatScoreDetails:s,showcaseMetadata:o,scoringType:r,setScoringType:l,setCombatScoreDetails:c}=e,{characterMetadata:u}=o;return i.jsxs(D,{vertical:!0,style:{minHeight:1e3},children:[i.jsxs(D,{justify:"center",gap:10,children:[i.jsxs(D,{justify:"center",style:{paddingLeft:20,paddingRight:5,borderRadius:7,height:40,marginTop:10,backgroundColor:t.colorBgContainer+"85"},align:"center",children:[i.jsx(U0,{style:{width:150},children:a("CharacterPreview.AlgorithmSlider.Title")}),i.jsx(Xa,{style:{width:354,height:30},onChange:d=>{l(d),window.store.getState().setSavedSessionKey($e.scoringType,d),Pe.delayedSave()},value:r,block:!0,options:[{label:u.scoringMetadata.simulation==null?a("CharacterPreview.AlgorithmSlider.Labels.CombatScoreTBD"):a("CharacterPreview.AlgorithmSlider.Labels.CombatScore"),value:Xi,disabled:u.scoringMetadata.simulation==null},{label:a("CharacterPreview.AlgorithmSlider.Labels.StatScore"),value:Ts,disabled:!1},{label:a("CharacterPreview.AlgorithmSlider.Labels.NoneScore"),value:hn,disabled:!1,className:"noneScoreLabel"}]})]}),i.jsxs(D,{justify:"center",style:{paddingLeft:20,paddingRight:5,borderRadius:7,height:40,marginTop:10,backgroundColor:t.colorBgContainer+"85"},align:"center",children:[i.jsx(U0,{style:{width:150},children:a("CharacterPreview.DetailsSlider.Title")}),i.jsx(Xa,{style:{width:354,height:30},onChange:d=>{c(d),window.store.getState().setSavedSessionKey($e.combatScoreDetails,d),Pe.delayedSave()},value:s,block:!0,options:[{label:a("CharacterPreview.DetailsSlider.Labels.CombatStats"),value:Ml,disabled:u.scoringMetadata.simulation==null||r==Ts},{label:a("CharacterPreview.DetailsSlider.Labels.DMGUpgrades"),value:yl,disabled:u.scoringMetadata.simulation==null||r==Ts}]})]})]}),i.jsx(qR,{simScoringResult:e.simScoringResult}),i.jsx(eB,{simScoringResult:e.simScoringResult,displayRelics:e.displayRelics,showcaseMetadata:e.showcaseMetadata,scoringType:e.scoringType})]})}function qR(e){const a=oc(e,150),t=W.useMemo(()=>a?i.jsx(pR,{simScoringResult:a.simScoringResult}):null,[a]);return a?t:null}function eB(e){const a=oc(e,50),t=W.useMemo(()=>a?i.jsx(WR,{simScoringResult:a.simScoringResult,displayRelics:e.displayRelics,showcaseMetadata:e.showcaseMetadata,scoringType:e.scoringType}):null,[a]);return a?t:null}const tB=({rarity:e=0})=>{const a=[];for(let t=0;t<e;t++)a.push(i.jsx("img",{src:Q.getStar(),style:{width:20,height:20}},t));return i.jsx(D,{gap:0,align:"center",children:a})};function aB(e){const{t:a}=ee(["charactersTab","modals","common"]),{characterLevel:t,characterEidolon:s,characterName:o,characterPath:r,characterElement:l,characterMetadata:c}=e.showcaseMetadata,u=e.scoringType===hn?12:4;return i.jsxs(D,{vertical:!0,children:[i.jsxs(D,{justify:"space-around",style:{height:26,marginBottom:u,marginTop:u},align:"center",children:[i.jsx("img",{style:{width:32},src:Q.getElement(l)}),i.jsx(tB,{rarity:c.rarity}),i.jsx("img",{style:{width:32},src:Q.getPathFromClass(r)})]}),i.jsxs(D,{vertical:!0,children:[i.jsx(kn,{style:{fontSize:24,lineHeight:"30px",fontWeight:400,textAlign:"center"},children:o}),i.jsx(kn,{style:{fontSize:16,fontWeight:400,textAlign:"center"},children:`${a("common:LevelShort",{level:t})} ${a("common:EidolonNShort",{eidolon:s})}`})]})]})}const Oo="#2473e1";function j0(e,a,t,s){const r={...a[e]??{}};let l=!1;s.color&&(r.color||s.color!=Oo)&&(r.color=s.color,l=!0),s.colorMode&&(r.colorMode||s.colorMode!=Gt.AUTO)&&(r.colorMode=s.colorMode,l=!0),l&&(a[e]=r,t(b.clone(a)),window.store.getState().setSavedSessionKey($e.showcaseStandardMode,s.colorMode===Gt.STANDARD),Pe.delayedSave())}const nB={targetDarkLuma:.26,maxDarkLuma:.45,minLightLuma:.55,targetLightLuma:.74,minNormalLuma:.3,targetNormalLuma:.5,maxNormalLuma:.7,targetMutesSaturation:.3,maxMutesSaturation:.4,targetVibrantSaturation:1,minVibrantSaturation:.35,weightSaturation:3,weightLuma:6.5,weightPopulation:.5};function iB(e){let a=0;return e.forEach(t=>{a=Math.max(a,t.getPopulation())}),a}function sB(e,a){return e.Vibrant===a||e.DarkVibrant===a||e.LightVibrant===a||e.Muted===a||e.DarkMuted===a||e.LightMuted===a}function vi(e,a,t,s,o,r,l,c,u,d){let m=null,h=0;return a.forEach(g=>{let[,C,M]=g.getHsl();if(C>=c&&C<=u&&M>=o&&M<=r&&!sB(e,g)){let x=oB(C,l,M,s,g.getPopulation(),t,d);(m===null||x>h)&&(m=g,h=x)}}),m}function oB(e,a,t,s,o,r,l){function c(...d){let m=0,h=0;for(let g=0;g<d.length;g+=2){let C=d[g],M=d[g+1];m+=C*M,h+=M}return m/h}function u(d,m){return 1-Math.abs(d-m)}return c(u(e,a),l.weightSaturation,u(t,s),l.weightLuma,o/r,l.weightPopulation)}function rB(e,a,t){let s={};return s.Vibrant=vi(s,e,a,t.targetNormalLuma,t.minNormalLuma,t.maxNormalLuma,t.targetVibrantSaturation,t.minVibrantSaturation,1,t),s.LightVibrant=vi(s,e,a,t.targetLightLuma,t.minLightLuma,1,t.targetVibrantSaturation,t.minVibrantSaturation,1,t),s.DarkVibrant=vi(s,e,a,t.targetDarkLuma,0,t.maxDarkLuma,t.targetVibrantSaturation,t.minVibrantSaturation,1,t),s.Muted=vi(s,e,a,t.targetNormalLuma,t.minNormalLuma,t.maxNormalLuma,t.targetMutesSaturation,0,t.maxMutesSaturation,t),s.LightMuted=vi(s,e,a,t.targetLightLuma,t.minLightLuma,1,t.targetMutesSaturation,0,t.maxMutesSaturation,t),s.DarkMuted=vi(s,e,a,t.targetDarkLuma,0,t.maxDarkLuma,t.targetMutesSaturation,0,t.maxMutesSaturation,t),s}function lB(e,a,t){if(e.Vibrant===null&&e.DarkVibrant===null&&e.LightVibrant===null){if(e.DarkVibrant===null&&e.DarkMuted!==null){let[s,o,r]=e.DarkMuted.getHsl();r=t.targetDarkLuma,e.DarkVibrant=new an(nn.hslToRgb(s,o,r),0)}if(e.LightVibrant===null&&e.LightMuted!==null){let[s,o,r]=e.LightMuted.getHsl();r=t.targetDarkLuma,e.DarkVibrant=new an(nn.hslToRgb(s,o,r),0)}}if(e.Vibrant===null&&e.DarkVibrant!==null){let[s,o,r]=e.DarkVibrant.getHsl();r=t.targetNormalLuma,e.Vibrant=new an(nn.hslToRgb(s,o,r),0)}else if(e.Vibrant===null&&e.LightVibrant!==null){let[s,o,r]=e.LightVibrant.getHsl();r=t.targetNormalLuma,e.Vibrant=new an(nn.hslToRgb(s,o,r),0)}if(e.DarkVibrant===null&&e.Vibrant!==null){let[s,o,r]=e.Vibrant.getHsl();r=t.targetDarkLuma,e.DarkVibrant=new an(nn.hslToRgb(s,o,r),0)}if(e.LightVibrant===null&&e.Vibrant!==null){let[s,o,r]=e.Vibrant.getHsl();r=t.targetLightLuma,e.LightVibrant=new an(nn.hslToRgb(s,o,r),0)}if(e.Muted===null&&e.Vibrant!==null){let[s,o,r]=e.Vibrant.getHsl();r=t.targetMutesSaturation,e.Muted=new an(nn.hslToRgb(s,o,r),0)}if(e.DarkMuted===null&&e.DarkVibrant!==null){let[s,o,r]=e.DarkVibrant.getHsl();r=t.targetMutesSaturation,e.DarkMuted=new an(nn.hslToRgb(s,o,r),0)}if(e.LightMuted===null&&e.LightVibrant!==null){let[s,o,r]=e.LightVibrant.getHsl();r=t.targetMutesSaturation,e.LightMuted=new an(nn.hslToRgb(s,o,r),0)}}const cB=(e,a)=>{const t={...nB,...a};let s=iB(e),o=rB(e,s,t);return lB(o,s,t),o.colors=e.sort((r,l)=>l._population-r._population),o};function W0(e,a){ku.from(e).maxColorCount(100).useGenerator(cB).addFilter((t,s,o,r)=>{const l=ea(t,s,o,"rgb"),c=l.lch()[0]/100;return l.hsl()[1]>.05&&c>.1&&c<.9&&r>.75}).getPalette().then(t=>{const s={Vibrant:t.Vibrant.hex,DarkVibrant:t.DarkVibrant.hex,Muted:t.Muted.hex,DarkMuted:t.DarkMuted.hex,LightVibrant:t.LightVibrant.hex,LightMuted:t.LightMuted.hex},o=t.colors.map(l=>ea(l._rgb).hex()).filter(l=>l!=s.Vibrant&&l!=s.DarkVibrant&&l!=s.Muted&&l!=s.DarkMuted&&l!=s.LightVibrant&&l!=s.LightMuted),r={...s,colors:o};a(r)}).catch(t=>{console.error(t)})}const Um=W.forwardRef((e,a)=>{var Ke;const{id:t,source:s,characterId:o,simScoringResult:r,scoringType:l,seedColor:c,setSeedColor:u,colorMode:d,setColorMode:m}=e,{t:h}=ee("charactersTab",{keyPrefix:"CharacterPreview.CustomizationSidebar"}),{t:g}=ee("charactersTab",{keyPrefix:"CharacterPreview.ScoringSidebar"}),[C,M]=W.useState([]),x=window.store(Se=>Se.showcasePreferences),O=window.store(Se=>Se.setShowcasePreferences),[H,_]=W.useState(!1),A=window.store(Se=>Se.savedSession.showcaseDarkMode),L=window.store(Se=>Se.savedSession.showcaseUID),v=window.store(Se=>Se.savedSession.showcasePreciseSpd),N=window.store(()=>V.getScoringMetadata(o)),U=window.store(()=>N.stats[n.SPD]),F=window.store(()=>{var Se;return((Se=N.simulation)==null?void 0:Se.deprioritizeBuffs)??!1});W.useImperativeHandle(a,()=>({onPortraitLoad:(Se,re)=>{var be;(be=V.getCharacterById(re))!=null&&be.portrait?W0(Se,De=>{const Ne=kR(HR([De.Vibrant,De.DarkVibrant,De.Muted,De.DarkMuted,De.LightVibrant,De.LightMuted]));u(Ne),vo[Se]=Ne,M(F0(De))}):setTimeout(()=>{W0(Se,De=>{M(F0(De))})},1e3)}}));function P(Se){Se!=Oo&&(j0(o,x,O,{color:Se,colorMode:Gt.CUSTOM}),console.log("Set seed color to",Se),m(Gt.CUSTOM),u(Se))}function T(Se){j0(o,x,O,{colorMode:Se}),console.log("Set color mode to",Se),m(Se)}function y(Se){console.log("Set dark mode to",Se),window.store.getState().setSavedSessionKey($e.showcaseDarkMode,Se)}const p=Se=>{console.log("Set show UID to",Se),window.store.getState().setSavedSessionKey($e.showcaseUID,Se)};function R(Se){console.log("Set precise spd to",Se),window.store.getState().setSavedSessionKey($e.showcasePreciseSpd,Se)}function I(Se){console.log("Set spd value to",Se);const re=b.clone(V.getScoringMetadata(o));re.stats[n.SPD]=Se,V.updateCharacterScoreOverrides(o,re)}function B(Se){var De;const re=(De=Se==null?void 0:Se.target)==null?void 0:De.value;if(re==null)return j(void 0);const be=parseFloat(re);if(isNaN(be))return j(void 0);j(be)}function j(Se){console.log("Set spd benchmark to",Se);const re=b.clone(window.store.getState().showcaseTemporaryOptions);re[o]||(re[o]={});const be=Se==-1?void 0:Se;re[o].spdBenchmark=be,window.store.getState().setShowcaseTemporaryOptions(re)}function Z(){window.store.getState().setStatTracesDrawerFocusCharacter(o),window.store.getState().setStatTracesDrawerOpen(!0)}function K(Se){const re=V.getScoringMetadata(o);if(re!=null&&re.simulation){console.log("Set deprioritizeBuffs to",Se);const be=b.clone(re.simulation);be.deprioritizeBuffs=Se,V.updateSimulationScoreOverrides(o,be)}}const X=[{label:h("PaletteLabel"),colors:C}],{spdPrecisionOptions:te,spdWeightOptions:ae,buffPriorityOptions:Te}=W.useMemo(()=>({spdPrecisionOptions:[{value:!1,label:g("SpdPrecision.Low")},{value:!0,label:g("SpdPrecision.High")}],spdWeightOptions:[{value:1,label:g("SpdWeight.Max")},{value:0,label:g("SpdWeight.Min")}],buffPriorityOptions:[{value:!1,label:g("BuffPriority.High")},{value:!0,label:g("BuffPriority.Low")}]}),[g]);return s!=vt.SHOWCASE_TAB&&s!=vt.CHARACTER_TAB?i.jsx(i.Fragment,{}):i.jsxs(D,{vertical:!0,gap:16,style:{position:"absolute",marginLeft:1085,width:130},children:[i.jsxs(D,{vertical:!0,gap:6,style:{backgroundColor:"rgb(29 42 71)",boxShadow:Z0,borderRadius:5,padding:Vi},children:[i.jsxs(D,{justify:"space-between",align:"center",style:{position:"relative"},children:[i.jsx("span",{}),i.jsx(le,{style:{textAlign:"center",position:"absolute",left:"50%",transform:"translateX(-50%)"},children:g("Stats.Header")}),i.jsx("a",{href:"https://github.com/fribbels/hsr-optimizer/blob/main/docs/guides/en/score-customization.md",target:"_blank",style:{display:"inline-flex",alignItems:"center"},rel:"noreferrer",children:i.jsx("img",{src:Q.getQuestion(),style:{height:16,width:16,opacity:.6,marginLeft:"auto"}})})]}),i.jsx(ba,{}),i.jsx(se,{icon:i.jsx(Ua,{}),onClick:Z,children:g("Stats.ButtonText")}),i.jsx(ba,{}),i.jsx(le,{style:{textAlign:"center",marginBottom:2},children:g("SpdPrecision.Header")}),i.jsx(Xa,{options:te,block:!0,value:v,onChange:R}),l!=hn&&i.jsxs(i.Fragment,{children:[i.jsx(ba,{}),i.jsx(le,{style:{textAlign:"center",marginBottom:2},children:g("SpdWeight.Header")}),i.jsx(Xa,{options:ae,block:!0,value:U,onChange:I})]}),l==Xi&&i.jsxs(i.Fragment,{children:[i.jsx(ba,{}),i.jsx(le,{style:{textAlign:"center",marginBottom:2},children:g("BenchmarkSpd.Header")}),i.jsx(ma,{size:"small",controls:!1,style:{width:"100%"},value:dB((Ke=window.store.getState().showcaseTemporaryOptions[o])==null?void 0:Ke.spdBenchmark),addonAfter:i.jsx(uB,{spdFilter:r==null?void 0:r.originalSpd,onShowcaseSpdBenchmarkChange:j,characterId:o,simScoringResult:r}),min:0,onBlur:B,onPressEnter:B})]}),l==Xi&&i.jsxs(i.Fragment,{children:[i.jsx(ba,{}),i.jsx(le,{style:{textAlign:"center",marginBottom:2},children:g("BuffPriority.Header")}),i.jsx(Xa,{options:Te,block:!0,value:F,onChange:K})]})]}),i.jsxs(D,{vertical:!0,gap:6,style:{backgroundColor:"rgb(29 42 71)",boxShadow:Z0,borderRadius:5,padding:Vi},children:[i.jsx(le,{style:{textAlign:"center"},children:h("Label")}),i.jsx(ba,{}),i.jsx(_f,{presets:X,defaultValue:"#1677ff",value:c,onChangeComplete:Se=>{const re=Se.toHexString();P(re)},disabledAlpha:!0,disabledFormat:!0,showText:!0}),i.jsx(ba,{}),i.jsx(Xa,{vertical:!0,options:[{value:Gt.AUTO,label:h("Modes.Auto")},{value:Gt.CUSTOM,label:h("Modes.Custom")},{value:Gt.STANDARD,label:h("Modes.Standard")}],value:d,onChange:T}),i.jsx(ba,{}),i.jsx(Xa,{options:[{value:!1,label:i.jsx(Lu,{})},{value:!0,label:i.jsx(Af,{})}],block:!0,value:A,onChange:y}),s==vt.SHOWCASE_TAB&&i.jsxs(i.Fragment,{children:[i.jsx(ba,{}),i.jsx(le,{style:{textAlign:"center",marginBottom:2},children:h("ShowUID")}),i.jsx(Xa,{options:[{value:!0,label:i.jsx(Hn,{})},{value:!1,label:i.jsx(Qa,{})}],block:!0,value:L,onChange:p})]}),i.jsx(ba,{}),i.jsxs(D,{justify:"space-between",children:[i.jsx(se,{icon:i.jsx(Ku,{style:{fontSize:30}}),loading:H,onClick:()=>V0(t,"clipboard",_,e.seedColor),type:"primary",style:{height:50,width:50,borderRadius:8}}),i.jsx(se,{icon:i.jsx(Tl,{style:{fontSize:30}}),loading:H,onClick:()=>V0(t,"download",_,e.seedColor),type:"primary",style:{height:50,width:50,borderRadius:8}})]})]})]})});Um.displayName="ShowcaseCustomizationSidebar";function uB(e){const{t:a}=ee("optimizerTab",{keyPrefix:"Presets"}),{t}=ee("charactersTab",{keyPrefix:"CharacterPreview.ScoringSidebar.BenchmarkSpd"}),s=W.useMemo(()=>{const o=Object.values(b.clone(im(a))).slice(1);return e.spdFilter!=null&&o.map(r=>{r.disabled=r.value!=null&&r.value>e.spdFilter}),[{label:i.jsx("span",{children:t("BenchmarkOptionsLabel")}),title:"benchmark",options:[{label:i.jsx("b",{children:i.jsx("span",{children:t("CurrentSpdLabel")})}),value:-1},{label:i.jsx("span",{children:t("BaseSpdLabel")}),value:0}]},{label:i.jsx("span",{children:t("CommonBreakpointsLabel")}),options:o}]},[a,t,e.spdFilter,e.characterId,e.simScoringResult]);return i.jsx(ne,{style:{width:34},labelRender:()=>i.jsx(i.Fragment,{}),dropdownStyle:{width:"fit-content"},options:s,placement:"bottomRight",listHeight:800,value:null,onChange:e.onShowcaseSpdBenchmarkChange})}function V0(e,a,t,s){t(!0),setTimeout(()=>{J.screenshotElementById(e,a).finally(()=>{t(!1)})},100)}function dB(e){return e==null||e<0?void 0:e}const Z0="rgba(0, 0, 0, 0.25) 0px 0.0625em 0.0625em, rgba(0, 0, 0, 0.25) 0px 0.125em 0.5em, rgba(255, 255, 255, 0.15) 0px 0px 0px 1px inset",jm="#799ef4";function mB(){return{color:jm,colorMode:Gt.STANDARD}}function fB(e){return{color:e,colorMode:Gt.AUTO}}const vo={};function hB(e,a,t){var o;if(e==Gt.STANDARD)return Gt.STANDARD;const s=(o=a[t.id])==null?void 0:o.colorMode;return!s||s==Gt.STANDARD?Gt.AUTO:s}function SB(e,a,t){var o;return t==Gt.STANDARD?jm:(o=V.getCharacterById(e))!=null&&o.portrait&&vo[a]?vo[a]:({1001:["#718fe5"],1002:["#7dd3ea"],1003:["#d6b5c2"],1004:["#6385d8"],1005:["#ea8abc"],1006:["#8483eb"],1008:["#817fd1"],1009:["#9e80e6"],1013:["#8969ea"],1101:["#375ee1"],1102:["#5f55eb"],1103:["#8772f4"],1104:["#0f4eef"],1105:["#82b5e9"],1106:["#4b88e0"],1107:["#a99dd1"],1108:["#7777c9"],1109:["#c8d0f0"],1110:["#53b1e1"],1111:["#5d8ce2"],1112:["#0f349b"],1201:["#87d2da"],1202:["#f4b5d4"],1203:["#8ce2f4"],1204:["#94e6f1"],1205:["#4d69be"],1206:["#81adf1"],1207:["#90a0e6"],1208:["#dd9cf2"],1209:["#6db1f4"],1210:["#88aade"],1211:["#5f9ce2"],1212:["#3e65f2"],1213:["#72c3de"],1214:["#3571e7"],1215:["#9a90e6"],1217:["#8cf4fc"],1218:["#fff4f8"],1220:["#7fd9e1"],1221:["#a2e9f5"],1222:["#ffeef5"],1223:["#575aa0"],1224:["#f7b6f7"],1225:["#fce4f7"],1301:["#7c7c99"],1302:["#f77784"],1303:["#3964d1"],1304:["#7cbcea"],1305:["#3151c7"],1306:["#5866bc"],1307:["#a37df4"],1308:["#837bd4"],1309:["#d7a4f1"],1310:["#a0efec"],1312:["#b0b7d0"],1313:["#7e95e9"],1314:["#8a74dc"],1315:["#a49ed2"],1317:["#7789e2"],8001:["#5f81f4"],8002:["#5f81f4"],8003:["#756d96"],8004:["#756d96"],8005:["#8d7abc"],8006:["#8d7abc"],1401:["#aa81fa"],1402:["#86bdf1"],8007:["#f0a1fa"],8008:["#f0a1fa"],1403:["#979af7"],1404:["#ff94b1"],1405:["#93d4c2"],1407:["#b985fd"]}[e]??["#000000"])[0]}function lc(e){var h,g,C;const[a]=q.useForm(),{t}=ee("modals",{keyPrefix:"EditCharacter"}),{t:s}=ee("common"),[o,r]=W.useState(((h=e.initialCharacter)==null?void 0:h.form.characterId)||""),[l]=W.useState(((g=e.initialCharacter)==null?void 0:g.form.characterEidolon)||0),[c,u]=W.useState(((C=e.initialCharacter)==null?void 0:C.form.lightConeSuperimposition)||1);W.useEffect(()=>{var x,O,H,_,A;if(!e.open)return;const M={characterId:(x=e.initialCharacter)==null?void 0:x.form.characterId,characterLevel:80,characterEidolon:((O=e.initialCharacter)==null?void 0:O.form.characterEidolon)||0,lightCone:(H=e.initialCharacter)==null?void 0:H.form.lightCone,lightConeLevel:80,lightConeSuperimposition:((_=e.initialCharacter)==null?void 0:_.form.lightConeSuperimposition)||1};r(((A=e.initialCharacter)==null?void 0:A.form.characterId)??""),a.setFieldsValue(M)},[e.open]);function d(){const M=a.getFieldsValue();console.log("Character modal submitted with form:",M),e.onOk(M),e.setOpen(!1)}const m=()=>{e.setOpen(!1)};return i.jsx(Vt,{open:e.open,width:400,destroyOnClose:!0,centered:!0,onOk:d,onCancel:m,footer:[i.jsx(se,{onClick:m,children:s("Cancel")},"back"),i.jsx(se,{type:"primary",onClick:d,children:s("Save")},"submit")],children:i.jsx(q,{form:a,preserve:!1,layout:"vertical",children:i.jsxs(D,{vertical:!0,gap:10,children:[i.jsxs(D,{vertical:!0,gap:5,children:[i.jsx(le,{children:t("Character")}),i.jsx(q.Item,{name:"characterId",children:i.jsx(ts,{value:"",withIcon:!0,onChange:M=>{var A,L,v;r(M);const x=V.getCharacterById(M),O=M!=null&&M.startsWith("80")?6:((A=x==null?void 0:x.form)==null?void 0:A.characterEidolon)||0,H=((L=x==null?void 0:x.form)==null?void 0:L.lightCone)||void 0,_=((v=x==null?void 0:x.form)==null?void 0:v.lightConeSuperimposition)||1;a.setFieldValue("characterEidolon",O),a.setFieldValue("lightCone",H),a.setFieldValue("lightConeSuperimposition",_)}})}),i.jsx(q.Item,{name:"characterEidolon",children:i.jsxs(nt.Group,{value:l,buttonStyle:"solid",style:{width:"100%",display:"flex"},children:[i.jsx(Ia,{text:t("EidolonButton",{eidolon:0}),value:0}),i.jsx(Ia,{text:t("EidolonButton",{eidolon:1}),value:1}),i.jsx(Ia,{text:t("EidolonButton",{eidolon:2}),value:2}),i.jsx(Ia,{text:t("EidolonButton",{eidolon:3}),value:3}),i.jsx(Ia,{text:t("EidolonButton",{eidolon:4}),value:4}),i.jsx(Ia,{text:t("EidolonButton",{eidolon:5}),value:5}),i.jsx(Ia,{text:t("EidolonButton",{eidolon:6}),value:6})]})})]}),i.jsxs(D,{vertical:!0,gap:5,children:[i.jsx(le,{children:t("Lightcone")}),i.jsx(q.Item,{name:"lightCone",children:i.jsx(Zl,{value:"",withIcon:!0,characterId:o,onChange:()=>{a.setFieldValue("lightConeSuperimposition",1)}})}),i.jsx(q.Item,{name:"lightConeSuperimposition",children:i.jsxs(nt.Group,{value:c,onChange:M=>u(M.target.value),buttonStyle:"solid",style:{width:"100%",display:"flex"},children:[i.jsx(Ia,{text:t("SuperimpositionButton",{superimposition:1}),value:1}),i.jsx(Ia,{text:t("SuperimpositionButton",{superimposition:2}),value:2}),i.jsx(Ia,{text:t("SuperimpositionButton",{superimposition:3}),value:3}),i.jsx(Ia,{text:t("SuperimpositionButton",{superimposition:4}),value:4}),i.jsx(Ia,{text:t("SuperimpositionButton",{superimposition:5}),value:5})]})})]})]})})})}function Ia(e){return i.jsx(nt.Button,{value:e.value,style:{flex:1,padding:"unset",textAlign:"center"},children:e.text})}function pB(e){const{characterId:a,token:t,simScoringResult:s,teamSelection:o,combatScoreDetails:r,displayRelics:l,setTeamSelectionByCharacter:c,setRedrawTeammates:u}=e,[d,m]=W.useState(!1),[h,g]=W.useState(),[C,M]=W.useState();return i.jsxs(D,{vertical:!0,children:[i.jsxs(D,{justify:"space-around",style:{padding:"0 5px"},children:[i.jsx(Hr,{index:0,result:s,token:t,setCharacterModalOpen:m,setSelectedTeammateIndex:g,setCharacterModalInitialCharacter:M}),i.jsx(Hr,{index:1,result:s,token:t,setCharacterModalOpen:m,setSelectedTeammateIndex:g,setCharacterModalInitialCharacter:M}),i.jsx(Hr,{index:2,result:s,token:t,setCharacterModalOpen:m,setSelectedTeammateIndex:g,setCharacterModalInitialCharacter:M})]}),i.jsx(CB,{characterId:a,teamSelection:o,selectedTeammateIndex:h,characterModalInitialCharacter:C,isCharacterModalOpen:d,setCharacterModalOpen:m,setTeamSelectionByCharacter:c,setRedrawTeammates:u})]})}function gB(e){const{combatScoreDetails:a,simScoringResult:t}=e;return i.jsxs(i.Fragment,{children:[a==yl&&i.jsx(D,{vertical:!0,gap:lt,children:i.jsx(CR,{result:t})}),a==Ml&&i.jsx(D,{vertical:!0,gap:lt,children:i.jsx(bR,{result:t})})]})}function Hr(e){const{t:a}=ee(["charactersTab","modals","common"]),{result:t,index:s,token:o,setCharacterModalOpen:r,setSelectedTeammateIndex:l,setCharacterModalInitialCharacter:c}=e,u=t.simulationMetadata.teammates[s],d=64;return i.jsx(hi.Grid,{style:{width:"33.3333%",textAlign:"center",padding:1,boxShadow:"none"},hoverable:!0,onClick:()=>{c({form:u}),r(!0),l(s)},className:"custom-grid",children:i.jsxs(D,{vertical:!0,align:"center",gap:0,children:[i.jsx("img",{src:Q.getCharacterAvatarById(u.characterId),style:{height:d,width:d,borderRadius:d,backgroundColor:"rgba(124, 124, 124, 0.1)",border:is}}),i.jsx(I0,{text:a("common:EidolonNShort",{eidolon:u.characterEidolon}),top:-12}),i.jsx("img",{src:Q.getLightConeIconById(u.lightCone),style:{height:d,marginTop:-3}}),i.jsx(I0,{text:a("common:SuperimpositionNShort",{superimposition:u.lightConeSuperimposition}),top:-18})]})})}function bB(e){const{t:a}=ee(["charactersTab"]),t=e.result,s=Object.values(e.relics).filter(d=>d==null?void 0:d.verified).length==6,o=Object.values(e.relics).filter(d=>!!d).length,r={fontSize:17,fontWeight:"600",textAlign:"center",color:"rgb(225, 165, 100)",height:23,whiteSpace:"nowrap"},l=!!t.simulationForm.lightCone,c=t.spdBenchmark==null?a("CharacterPreview.ScoreHeader.Title"):a("CharacterPreview.ScoreHeader.TitleBenchmark",{spd:DB(t.spdBenchmark)}),u=i.jsxs(D,{align:"center",vertical:!0,style:{marginBottom:6,paddingTop:3,paddingBottom:3},children:[i.jsx(kn,{style:r,children:c}),i.jsx(kn,{style:r,children:a("CharacterPreview.ScoreHeader.Score",{score:Ot(J.truncate10ths(Math.max(0,t.percent*100))),grade:LT(t.percent,s,o,l)})})]});return i.jsx(D,{vertical:!0,children:u})}function DB(e){return J.truncate10ths(e).toFixed(1)}function CB(e){const{t:a}=ee(["charactersTab","modals","common"]),t=window.store(C=>C.globalThemeConfig),{characterId:s,teamSelection:o,selectedTeammateIndex:r,characterModalInitialCharacter:l,setTeamSelectionByCharacter:c,setRedrawTeammates:u,isCharacterModalOpen:d,setCharacterModalOpen:m}=e;function h(C){if(!C.characterId||!C.lightCone)return oe.error(a("CharacterPreview.Messages.NoSelectedCharacter"));const x=J.clone(V.getScoringMetadata(s)).simulation;x.teammates[r]=C,V.updateSimulationScoreOverrides(s,x),c({[s]:wi}),u(Math.random())}const g=i.jsx(Xa,{style:{marginLeft:10,marginRight:10,marginTop:2,marginBottom:0,alignItems:"center"},onChange:C=>{C==Rc?window.modalApi.info({icon:null,width:400,okText:a("common:Ok"),maskClosable:!0,content:i.jsx("div",{style:{width:"100%"},children:i.jsxs(D,{vertical:!0,gap:10,children:[i.jsx(le,{children:a("modals:ScoreFooter.ModalTitle")}),i.jsx(se,{icon:i.jsx(Pu,{}),onClick:()=>{const x=J.clone(V.getMetadata().characters[s]).scoringMetadata.simulation;V.updateSimulationScoreOverrides(s,x),o!=Es&&c({[s]:Es}),u(Math.random()),oe.success(a("modals:ScoreFooter.ResetSuccessMsg"))},children:a("modals:ScoreFooter.ResetButtonText")}),i.jsx(se,{icon:i.jsx(Gu,{}),onClick:()=>{var O;const x=J.clone(V.getScoringMetadata(s)).simulation;for(const H of x.teammates){const _=(O=V.getCharacterById(H.characterId))==null?void 0:O.form;_!=null&&(H.characterEidolon=_.characterEidolon,_.lightCone&&(H.lightCone=_.lightCone,H.lightConeSuperimposition=_.lightConeSuperimposition||1))}V.updateSimulationScoreOverrides(s,x),o!=wi&&c({[s]:wi}),u(Math.random()),oe.success(a("modals:ScoreFooter.SyncSuccessMsg"))},children:a("modals:ScoreFooter.SyncButtonText")})]})})}):c({[s]:C})},value:o,block:!0,options:[{value:Es,label:i.jsx(D,{justify:"center",align:"center",children:a("modals:ScoreFooter.TeamOptions.Default")})},{label:i.jsx(Ua,{}),value:Rc,className:"short-segmented"},{value:wi,label:i.jsx(D,{justify:"center",align:"center",children:a("modals:ScoreFooter.TeamOptions.Custom")})}]});return i.jsxs(D,{vertical:!0,gap:2,children:[i.jsx(oi,{theme:t,children:i.jsx(lc,{onOk:h,open:d,setOpen:m,initialCharacter:l})}),g]})}const tr=({src:e,style:a,callback:t})=>{const[s,o]=W.useState({}),[r,l]=W.useState({}),[c,u]=W.useState(!1),[d,m]=W.useState(!0);return W.useEffect(()=>{if(e==s.src&&b.objectHash(a)==b.objectHash(s.style)||e==r.src&&b.objectHash(a)==b.objectHash(r.style))return;m(!0),l({src:e,style:a});const h=new Image;if(h.src=e,h.complete||h.naturalWidth>0){u(!0);return}u(!1),h.onload=()=>{u(!0)}},[s,e,a]),W.useEffect(()=>{c&&(setTimeout(()=>{m(!1)},150),o({src:r.src,style:r.style}),u(!1),t&&t(r.src))},[c]),i.jsx("img",{src:s.src,loading:"eager",style:{...s.style,filter:d?"blur(6px)":"none",transition:d?"":"filter 0.5s cubic-bezier(.41,.65,.39,.99)"}})},{Text:EB}=_e;function TB(e){const{t:a}=ee(["charactersTab","modals","common"]),{source:t,character:s,displayDimensions:o,setOriginalCharacterModalInitialCharacter:r,setOriginalCharacterModalOpen:l,setCharacterModalAdd:c,showcaseMetadata:u}=e,{tempLcParentW:d,tempLcParentH:m,tempLcInnerW:h,tempLcInnerH:g,newLcHeight:C,lcCenter:M}=o,{lightConeSrc:x,lightConeName:O,lightConeLevel:H,lightConeSuperimposition:_}=u;return i.jsxs(D,{vertical:!0,children:[O&&i.jsx(D,{vertical:!0,style:{position:"relative",height:0,top:C-35,paddingRight:5},align:"flex-end",children:i.jsx(EB,{style:{position:"absolute",height:30,backgroundColor:"rgb(0 0 0 / 70%)",padding:"3px 12px",borderRadius:8,fontSize:14,maxWidth:mn-50,width:"fit-content",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",zIndex:21,textShadow:"0px 0px 10px black",border:is,boxShadow:ns,backdropFilter:cl},children:`${a("common:SuperimpositionNShort",{superimposition:_})} - ${O}`})}),i.jsx(D,{className:"lightConeCard",style:{width:`${d}px`,height:`${m}px`,position:"relative",overflow:"hidden",zIndex:20,borderRadius:"8px",border:is,boxShadow:ns},onClick:()=>{t==vt.SHOWCASE_TAB?(r(s),l(!0)):(c(!1),r(s),l(!0))},children:i.jsx(tr,{src:x,style:{position:"absolute",width:420,top:-M+C/2,left:-8}})})]})}function RB(e){ee(["charactersTab","modals","common"]);const{source:a,character:t,displayDimensions:s,setOriginalCharacterModalInitialCharacter:o,setOriginalCharacterModalOpen:r,setCharacterModalAdd:l,showcaseMetadata:c}=e,{tempLcParentW:u,tempLcParentH:d,tempLcInnerW:m,tempLcInnerH:h}=s,{lightConeSrc:g,lightConeName:C,lightConeLevel:M,lightConeSuperimposition:x}=c;return i.jsx("div",{className:"lightConeCard",style:{width:`${u}px`,height:`${d}px`,overflow:"hidden",borderRadius:"8px",zIndex:20,border:is,boxShadow:ns},onClick:()=>{a==vt.SHOWCASE_TAB?(o(t),r(!0)):(l(!1),o(t),r(!0))},children:i.jsx(tr,{src:g,style:{width:m,transform:`translate(${(m-u)/2/m*-100}%, ${(h-d)/2/h*-100+8}%)`}})})}function BB(e){const{t:a}=ee(["charactersTab","modals","common"]),{showcaseMetadata:t}=e,{lightConeSrc:s,lightConeName:o,lightConeLevel:r,lightConeSuperimposition:l}=t;return i.jsxs(D,{vertical:!0,children:[i.jsx(zT,{style:{fontSize:18,fontWeight:400,marginLeft:10,marginRight:10,textAlign:"center"},children:`${o}`}),i.jsx(kn,{style:{fontSize:16,fontWeight:400,marginBottom:5,textAlign:"center"},children:`${a("common:LevelShort",{level:r})} ${a("common:SuperimpositionNShort",{superimposition:l})}`})]})}const IB=({customPortrait:e,parentW:a,onPortraitLoad:t})=>{const s=a/e.customImageParams.croppedAreaPixels.width;return i.jsx("div",{style:{position:"absolute"},children:i.jsx(tr,{src:e.imageUrl,style:{position:"relative",left:`-${e.customImageParams.croppedAreaPixels.x*s}px`,top:`-${e.customImageParams.croppedAreaPixels.y*s}px`,width:`${e.originalDimensions.width*s}px`,height:`${e.originalDimensions.height*s}px`,objectFit:"cover"},callback:t})})},{Text:yB}=_e,z0="https://api.imgur.com/3/image",X0="b6ed18a250f2835",Y0={width:0,height:0},J0={x:0,y:0},Q0=1,$0={croppedArea:{x:0,y:0,width:0,height:0},croppedAreaPixels:{x:0,y:0,width:0,height:0}},Fr=1,wr=5,MB=({existingConfig:e,aspectRatio:a,open:t,setOpen:s,onOk:o,title:r=Y.t("modals:EditImage.DefaultTitle"),width:l=400,defaultImageUrl:c})=>{const[u,d]=W.useState(0),[m]=q.useForm(),{t:h}=ee("modals",{keyPrefix:"EditImage"}),{t:g}=ee("common"),[C,M]=W.useState(!1),[x,O]=W.useState(""),[H,_]=W.useState(e?e.originalDimensions:Y0),[A,L]=W.useState(e?e.cropper.crop:J0),[v,N]=W.useState(e?e.cropper.zoom:Q0),[U,F]=W.useState(e?e.customImageParams:$0),[P,T]=W.useState("upload"),y=W.useCallback(()=>{m.resetFields(),d(0),M(!1),O(""),_(Y0),L(J0),N(Q0),F($0)},[m]);W.useEffect(()=>{t?e&&(m.setFieldsValue({imageUrl:e.imageUrl,artistName:e.artistName}),T("upload"),d(1),O(e.imageUrl),_(e.originalDimensions)):y()},[c,t,e,m,y]);const p=(re,be)=>{u==1&&F({croppedArea:re,croppedAreaPixels:be})},R=()=>{const re=m.getFieldValue("artistName"),be={originalDimensions:H,customImageParams:U,cropper:{zoom:v,crop:A}};switch(P){case"upload":o({type:"add",config:{...be,artistName:re,imageUrl:x}}),d(0);break;case"url":m.validateFields().then(De=>{o({type:"add",config:{...be,imageUrl:De.imageUrl,artistName:re}})}).catch(De=>{console.error("Error:",De)}).finally(()=>{d(0)});break;case"default":c||console.error("defaultImageUrl does not exist, but default image was chosen."),o({type:"delete",config:{}}),s(!1),d(0);break;default:console.warn(`Unexpected radio value: ${P}`),s(!1),d(0)}};async function I(re){if(!re.includes("http"))return!1;M(!0);const be=new Image;return be.src=re,new Promise(De=>{M(!1),be.onerror=()=>De(!1),be.onload=async()=>{const Ne=await createImageBitmap(be);_({width:Ne.width,height:Ne.height}),De(!0)}})}async function B(re){return M(!0),new Promise(be=>{const De=new FileReader;De.onerror=()=>{M(!1),be(!1)},De.onload=Ne=>{var Wt;const st=new Image;st.src=(Wt=Ne.target)==null?void 0:Wt.result,st.onload=async()=>{_({width:st.width,height:st.height}),M(!1),be(!0)},st.onerror=()=>{M(!1),be(!1)}},De.readAsDataURL(re)})}async function j(re){try{return(await fetch(re,{method:"HEAD",mode:"cors"})).ok}catch{return console.log("CORS blocked image fetch, uploading to imgur:",re),!1}}const Z=async re=>{const be=new FormData;be.append("image",re);try{M(!0);const De=await fetch(z0,{method:"POST",headers:{Authorization:`Client-ID ${X0}`},body:be});if(!De.ok){const st=await De.json();throw M(!1),new Error(`Imgur API error: ${st.data.error}`)}const Ne=await De.json();if(Ne.data.width&&Ne.data.height&&_({width:Ne.data.width,height:Ne.data.height}),Ne.success){const st=Ne.data.link;O(st),d(u+1),M(!1)}else throw M(!1),new Error("Image url upload to Imgur failed but did not return a typical error response")}catch(De){return M(!1),console.error("There was an error uploading the image to Imgur:",De),null}},K=async re=>{const be=new FormData;be.append("image",re);try{M(!0);const De=await fetch(z0,{method:"POST",headers:{Authorization:`Client-ID ${X0}`},body:be});if(!De.ok){const st=await De.json();throw M(!1),new Error(`Imgur API error: ${st.data.error}`)}const Ne=await De.json();if(Ne.data.width&&Ne.data.height&&_({width:Ne.data.width,height:Ne.data.height}),Ne.success){const st=Ne.data.link;return M(!1),st}else throw M(!1),new Error("Image file upload to Imgur failed but did not return a typical error response")}catch(De){return console.error("There was an error uploading the image to Imgur:",De),M(!1),null}},X=async re=>{if(!await B(re))return console.error("File is not a valid image file"),!1;const be=await K(re);return be?(O(be),d(u+1),!1):(oe.error("Image upload failed"),!1)},te=async re=>{if(!re){m.setFields([{name:"imageUrl",errors:["An image URL is required"]}]);return}if(M(!0),!await I(re)){m.setFields([{name:"imageUrl",errors:["URL does not lead to an image"]}]),M(!1);return}if(await j(re))O(re),d(u+1);else{const be=await Z(re);be?(O(be),d(u+1)):m.setFields([{name:"imageUrl",errors:["Failed to process image, upload image instead."]}])}M(!1)},ae=async()=>{if(u!==0){console.error(`Stage #${u} not implemented!`);return}switch(P){case"url":await te(m.getFieldValue("imageUrl"));break;case"default":o({type:"delete",config:{}}),s(!1);break;case null:default:console.warn("Radio select must be either 'upload' or 'url'");break}},Te=()=>d(u-1),Ke=re=>T(re.target.value),Se=[{title:"Provide image",content:i.jsxs(i.Fragment,{children:[i.jsx(D,{justify:"center",style:{marginBottom:16},children:i.jsxs(nt.Group,{onChange:Ke,value:P,buttonStyle:"solid",children:[i.jsx(nt.Button,{value:"upload",children:h("Upload.Radio.Upload")}),i.jsx(nt.Button,{value:"url",children:h("Upload.Radio.Url")}),c&&i.jsx(nt.Button,{value:"default",children:h("Upload.Radio.Default")})]})}),P==="upload"&&i.jsx(i.Fragment,{children:i.jsx(xf,{name:"file",multiple:!1,accept:"image/png, image/jpeg, image/jpg, image/gif",beforeUpload:X,disabled:C,showUploadList:!1,children:C?i.jsx(D,{style:{height:"300px"},justify:"center",align:"center",children:i.jsx(Jr,{size:"large"})}):i.jsxs(D,{style:{height:"300px"},justify:"center",align:"center",vertical:!0,children:[i.jsx("p",{className:"ant-upload-drag-icon",children:i.jsx(Lf,{})}),i.jsx("p",{className:"ant-upload-text",children:h("Upload.Upload.Method")}),i.jsx("p",{className:"ant-upload-hint",children:h("Upload.Upload.Limit")})]})})}),P==="url"&&i.jsx(q.Item,{name:"imageUrl",label:h("Upload.Url.Label"),style:{margin:"0 20px"},rules:[{required:!0,message:h("Upload.Url.Rule")}],children:i.jsx(qt,{autoComplete:"off"})}),P==="default"&&i.jsx(D,{justify:"center",style:{height:"400px"},children:i.jsx("img",{src:c})})]})},{title:"Crop image",content:i.jsxs(i.Fragment,{children:[i.jsx("div",{style:{height:"380px",position:"relative"},children:i.jsx(Of,{image:x,crop:A,zoom:v,aspect:a,onCropChange:L,onCropComplete:p,onMediaLoaded:()=>{e&&(L(e.cropper.crop),N(e.cropper.zoom))},onZoomChange:re=>{navigator.maxTouchPoints===0?(re<v&&N(Math.max(Fr,v*.95)),re>v&&N(Math.min(wr,v*1.05))):N(re)},zoomSpeed:navigator.maxTouchPoints===0?1e-4:1,minZoom:Fr,maxZoom:wr})}),i.jsxs(D,{style:{width:"100%",marginTop:4},gap:8,align:"center",children:[i.jsx("label",{style:{whiteSpace:"nowrap"},children:h("Edit.Zoom")}),i.jsx(No,{style:{width:"100%"},min:Fr,max:wr,step:.1,tooltip:{formatter:null},onChange:N,value:v})]}),i.jsxs(D,{style:{marginTop:0},children:[i.jsxs(D,{vertical:!0,style:{flex:1},children:[i.jsxs("div",{children:[i.jsx(vf,{style:{marginRight:8}}),h("Edit.Drag")]}),i.jsxs("div",{style:{flex:1,marginTop:8},children:[i.jsx(Hf,{style:{marginRight:8}}),h("Edit.Pinch")]})]}),i.jsxs(D,{vertical:!0,style:{flex:1},children:[i.jsx(yB,{style:{flex:1,marginLeft:3},children:h("Edit.ArtBy")}),i.jsx(q.Item,{name:"artistName",children:i.jsx(qt,{style:{flex:1,marginTop:3},placeholder:h("Edit.CreditPlaceholder"),autoComplete:"off"})})]})]})]})}];return i.jsx(q,{form:m,layout:"vertical",children:i.jsx(Vt,{open:t,width:l,destroyOnClose:!0,centered:!0,maskClosable:!1,onOk:R,onCancel:()=>s(!1),transitionName:"",footer:[i.jsx(D,{justify:"flex-end",children:i.jsxs(D,{style:{marginTop:16},justify:"center",align:"center",gap:8,children:[C&&P!=="upload"&&i.jsx(Jr,{style:{textAlign:"center"},size:"large"}),i.jsx(se,{onClick:()=>s(!1),children:g("Cancel")}),u>0&&e&&i.jsx(se,{onClick:Te,danger:!0,children:h("Footer.Change")}),u>0&&!e&&i.jsx(se,{onClick:Te,children:h("Footer.Previous")}),u<Se.length-1&&i.jsx(se,{type:"primary",onClick:ae,disabled:P==="upload",children:h("Footer.Next")}),u===Se.length-1&&i.jsx(se,{type:"primary",onClick:R,children:g("Submit")})]})},1)],title:r,children:i.jsxs("div",{style:{height:"505px",position:"relative"},children:[!e&&i.jsx(Do,{current:u,style:{marginBottom:12},children:Se.map(re=>i.jsx(Do.Step,{title:re.title=="Provide image"?h("Upload.Title"):h("Edit.Title")},re.title))}),Se.map((re,be)=>i.jsx("div",{style:{display:u===be?"block":"none"},children:re.content},re.title))]})})})};function GB(e){const{t:a}=ee(["charactersTab","modals","common"]),t=window.store(R=>R.globalThemeConfig),s=window.store(R=>R.savedSession.showcaseUID),o=window.store(R=>R.scorerId),r=e.source==vt.SHOWCASE_TAB&&s,{source:l,character:c,displayDimensions:u,customPortrait:d,editPortraitModalOpen:m,setEditPortraitModalOpen:h,onEditPortraitOk:g,simScoringResult:C,artistName:M,setOriginalCharacterModalInitialCharacter:x,setOriginalCharacterModalOpen:O,setCharacterModalAdd:H,onPortraitLoad:_}=e,{tempLcParentW:A,tempLcParentH:L,tempLcInnerW:v,tempLcInnerH:N,tempInnerW:U,tempParentH:F,newLcHeight:P,newLcMargin:T,lcCenter:y,charCenter:p}=u;return i.jsxs("div",{style:{width:`${mn}px`,height:`${F}px`,position:"relative",overflow:"hidden",borderRadius:"8px",border:is,boxShadow:ns},children:[c.portrait??d?i.jsx(IB,{customPortrait:d??c.portrait,parentW:mn,onPortraitLoad:_}):i.jsx(tr,{src:Q.getCharacterPortraitById(c.id),style:{position:"absolute",left:-p.x*p.z/2*U/1024+mn/2,top:-p.y*p.z/2*U/1024+F/2,width:U*p.z},callback:_}),i.jsx(oi,{theme:t,children:i.jsxs(D,{vertical:!0,style:{width:"max-content",marginLeft:6,marginTop:6},gap:7,children:[l!=vt.SHOWCASE_TAB&&i.jsx(se,{style:Br,className:"character-build-portrait-button",icon:i.jsx(fo,{}),onClick:()=>{H(!1),x(c),O(!0)},type:"primary",children:a("CharacterPreview.EditCharacter")}),l==vt.SHOWCASE_TAB&&i.jsx(se,{style:Br,className:"character-build-portrait-button",icon:i.jsx(fo,{}),onClick:()=>{x(c),O(!0)},type:"primary",children:a("CharacterPreview.EditCharacter")}),i.jsx(se,{style:Br,className:"character-build-portrait-button",icon:i.jsx(fo,{}),onClick:()=>h(!0),type:"primary",children:a("CharacterPreview.EditPortrait")})]})}),i.jsx(oi,{theme:t,children:i.jsx(MB,{title:a("CharacterPreview.EditPortrait"),aspectRatio:mn/Hs,existingConfig:d??c.portrait,open:m,setOpen:h,onOk:g,defaultImageUrl:Q.getCharacterPortraitById(c.id),width:500})}),i.jsxs(D,{vertical:!0,gap:3,style:{marginBottom:3,paddingLeft:3,position:"absolute",bottom:0},children:[i.jsx("span",{style:{display:r?"inline":"none",backgroundColor:"rgb(20 20 20 / 30%)",color:"rgb(255 255 255 / 80%)",padding:"4px 12px",borderRadius:8,border:B0,backdropFilter:cl,fontSize:14,width:"fit-content",maxWidth:mn-150,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",zIndex:2,textShadow:"0px 0px 10px black"},children:o}),i.jsx("span",{style:{display:M?"inline":"none",backgroundColor:"rgb(20 20 20 / 30%)",color:"rgb(255 255 255 / 80%)",padding:"4px 12px",borderRadius:8,border:B0,backdropFilter:cl,fontSize:14,width:"fit-content",maxWidth:mn-150,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",zIndex:2,textShadow:"0px 0px 10px black"},children:a("CharacterPreview.ArtBy",{artistName:M??""})})]})]})}function PB(e){const{setSelectedRelic:a,setEditModalOpen:t,setAddModalOpen:s,displayRelics:o,source:r,characterId:l,scoredRelics:c,showcaseColors:u}=e;return i.jsxs(D,{gap:lt,children:[i.jsxs(D,{vertical:!0,gap:lt,children:[i.jsx(ua,{setEditModalOpen:t,setSelectedRelic:a,setAddModalOpen:s,relic:{...o.Head,part:f.Parts.Head},source:r,characterId:l,score:c.find(d=>d.part==f.Parts.Head),scoringType:e.scoringType,showcaseTheme:u}),i.jsx(ua,{setEditModalOpen:t,setSelectedRelic:a,setAddModalOpen:s,relic:{...o.Body,part:f.Parts.Body},source:r,characterId:l,score:c.find(d=>d.part==f.Parts.Body),scoringType:e.scoringType,showcaseTheme:u}),i.jsx(ua,{setEditModalOpen:t,setSelectedRelic:a,setAddModalOpen:s,relic:{...o.PlanarSphere,part:f.Parts.PlanarSphere},source:r,characterId:l,score:c.find(d=>d.part==f.Parts.PlanarSphere),scoringType:e.scoringType,showcaseTheme:u})]}),i.jsxs(D,{vertical:!0,gap:lt,children:[i.jsx(ua,{setEditModalOpen:t,setSelectedRelic:a,setAddModalOpen:s,relic:{...o.Hands,part:f.Parts.Hands},source:r,characterId:l,score:c.find(d=>d.part==f.Parts.Hands),scoringType:e.scoringType,showcaseTheme:u}),i.jsx(ua,{setEditModalOpen:t,setSelectedRelic:a,setAddModalOpen:s,relic:{...o.Feet,part:f.Parts.Feet},source:r,characterId:l,score:c.find(d=>d.part==f.Parts.Feet),scoringType:e.scoringType,showcaseTheme:u}),i.jsx(ua,{setEditModalOpen:t,setSelectedRelic:a,setAddModalOpen:s,relic:{...o.LinkRope,part:f.Parts.LinkRope},source:r,characterId:l,score:c.find(d=>d.part==f.Parts.LinkRope),scoringType:e.scoringType,showcaseTheme:u})]})]})}function _B(e){const{t:a}=ee(["charactersTab","modals","common"]),{scoringResults:t}=e;return i.jsx(D,{vertical:!0,children:i.jsx(kn,{style:{fontSize:17,fontWeight:600,letterSpacing:-.2,textAlign:"center",color:"#e1a564"},children:a("CharacterPreview.CharacterScore",{score:t.totalScore.toFixed(0),grade:t.totalScore==0?"":t.totalRating})})})}function AB(e){const{characterId:a}=e;return!a||!Tc[a]?i.jsx(i.Fragment,{}):i.jsx(oi,{theme:{components:{Alert:{colorInfo:"#4bc65d",colorInfoBg:"#1f3464",colorInfoBorder:"#334d8a"}}},children:i.jsx(Ff,{message:Tc[a],type:"info",showIcon:!0,style:{marginTop:10}})})}const{useToken:xB}=Xt;function $n(e){return i.jsx(nt.Button,{value:e.value,style:{height:35,width:50,paddingLeft:10},children:i.jsx(Eu,{preview:!1,width:30,src:e.src})})}$n.propTypes={value:ca.string,src:ca.string};zt(ma)`
    width: 90px
`;function q0(e){var s,o;const a=(s=e.main)==null?void 0:s.stat,t=(o=e.main)==null?void 0:o.value;return a?Wm(a,t):{}}function In(e,a){const t=e.substats[a];if(!(t!=null&&t.stat))return{};const s=t.stat,o=t.value;return Wm(s,o,e)}function Wm(e,a,t){return e==n.SPD?t!=null&&t.verified?{stat:e,value:a.toFixed(1)}:{stat:e,value:a%1!==0?a.toFixed(1):Math.floor(a)}:J.isFlat(e)?{stat:e,value:Math.floor(a)}:{stat:e,value:J.precisionRound(Math.floor(a*10)/10).toFixed(1)}}function Fs(e){var L,v,N,U,F;const{t:a}=ee(["modals","common","gameData"]),{token:t}=xB(),[s]=q.useForm(),[o,r]=W.useState([]),l=window.store(P=>P.characters),c=W.useMemo(()=>Yl({currentCharacters:l,longNameLabel:!0}),[l,Y.resolvedLanguage]),u=W.useMemo(function(){const T=[];for(const y of[...Object.entries(f.SetsRelics),...Object.entries(f.SetsOrnaments)].filter(p=>!zi[p[1]]))T.push({label:i.jsxs(D,{align:"center",gap:10,children:[i.jsx("img",{style:{height:22,width:22},src:Q.getSetImage(y[1])}),Y.t(`gameData:RelicSets.${pt[y[1]]}.Name`)]}),value:y[1]});return T},[Y.resolvedLanguage]),d=q.useWatch("equippedBy",s),[m,h]=W.useState([]);W.useEffect(()=>{let P={grade:5,enhance:15,part:f.Parts.Head,mainStatType:f.Stats.HP,mainStatValue:Math.floor(f.MainStatsValues[f.Stats.HP][5].base+f.MainStatsValues[f.Stats.HP][5].increment*15)};const T=e.selectedRelic;!T||e.type!="edit"||(P={equippedBy:T.equippedBy??"None",grade:T.grade,enhance:T.enhance,set:T.set,part:T.part,mainStatType:q0(T).stat,mainStatValue:q0(T).value,substatType0:In(T,0).stat,substatValue0:In(T,0).value,substatType1:In(T,1).stat,substatValue1:In(T,1).value,substatType2:In(T,2).stat,substatValue2:In(T,2).value,substatType3:In(T,3).stat,substatValue3:In(T,3).value}),M(P),s.setFieldsValue(P)},[e.selectedRelic,e.open,s,e]),W.useEffect(()=>{var T,y,p,R;let P=[];(T=e.selectedRelic)!=null&&T.part&&(P=Object.entries(f.PartsMainStats[(y=e.selectedRelic)==null?void 0:y.part]).map(I=>({label:i.jsxs(D,{align:"center",gap:10,children:[i.jsx("img",{src:Q.getStatIcon(I[1],!0),style:{width:22,height:22}}),a(`common:Stats.${I[1]}`)]}),value:I[1]}))),r(P),s.setFieldValue("mainStatType",(R=(p=e.selectedRelic)==null?void 0:p.main)==null?void 0:R.stat)},[(L=e.selectedRelic)==null?void 0:L.part,(N=(v=e.selectedRelic)==null?void 0:v.main)==null?void 0:N.stat,s,a]),W.useEffect(()=>{var P,T,y,p;o.length>0&&(o.map(I=>I.value).includes((T=(P=e.selectedRelic)==null?void 0:P.main)==null?void 0:T.stat)?s.setFieldValue("mainStatType",(p=(y=e.selectedRelic)==null?void 0:y.main)==null?void 0:p.stat):s.setFieldValue("mainStatType",o[0].value)),x()},[s,o,(F=(U=e.selectedRelic)==null?void 0:U.main)==null?void 0:F.stat]);const g=P=>{const T=fT(P);T&&(LB(e.selectedRelic,T)&&(T.verified=!1),console.log(a("Relic.Messages.EditSuccess"),T),e.onOk(T),e.setOpen(!1))},C=()=>{oe.error(a("Relic.Messages.SubmitFail")),e.setOpen(!1)},M=P=>{var I,B;let T=[];P.part&&(T=Object.entries(f.PartsMainStats[P.part]).map(j=>({label:i.jsxs(D,{align:"center",gap:10,children:[i.jsx("img",{src:Q.getStatIcon(j[1],!0),style:{width:22,height:22}}),a(`common:Stats.${j[1]}`)]}),value:j[1]})),r(T),s.setFieldValue("mainStatType",(I=T[0])==null?void 0:I.value));const y=((B=T[0])==null?void 0:B.value)||s.getFieldValue("mainStatType"),p=s.getFieldValue("enhance"),R=s.getFieldValue("grade");if(y!=null&&p!=null&&R!=null){const j=[f.Stats.OHB,f.Stats.Physical_DMG,f.Stats.Physical_DMG,f.Stats.Fire_DMG,f.Stats.Ice_DMG,f.Stats.Lightning_DMG,f.Stats.Wind_DMG,f.Stats.Quantum_DMG,f.Stats.Imaginary_DMG],Z=[f.Stats.HP,f.Stats.ATK,f.Stats.SPD];let K=b.calculateRelicMainStatValue(y,R,p);j.includes(y)?K=J.truncate10ths(K):Z.includes(y)?K=Math.floor(K):K=K.toFixed(1),s.setFieldValue("mainStatValue",K)}};function x(){const P=hT(s.getFieldsValue());h(P)}const O=()=>{e.setOpen(!1)},H=()=>{s.submit()},_=()=>{s.setFieldValue("enhance",Math.floor(Math.min(s.getFieldValue("enhance")+3,15)/3)*3)},A=W.useMemo(()=>{const P=[];for(let T=15;T>=0;T--)P.push({value:T,label:"+"+T});return P},[]);return i.jsx(q,{form:s,layout:"vertical",preserve:!1,onFinish:g,onFinishFailed:C,onValuesChange:M,children:i.jsx(Vt,{width:560,centered:!0,destroyOnClose:!0,open:e.open,onCancel:()=>e.setOpen(!1),footer:[i.jsx(se,{onClick:O,children:a("common:Cancel")},"back"),i.jsx(se,{type:"primary",onClick:H,children:a("common:Submit")},"submit")],children:i.jsxs(D,{vertical:!0,gap:5,children:[i.jsxs(D,{gap:10,children:[i.jsxs(D,{vertical:!0,gap:5,children:[i.jsx(le,{children:a("Relic.Part")}),i.jsx(q.Item,{name:"part",children:i.jsxs(nt.Group,{buttonStyle:"solid",children:[i.jsx($n,{value:f.Parts.Head,src:Q.getPart(f.Parts.Head)}),i.jsx($n,{value:f.Parts.Hands,src:Q.getPart(f.Parts.Hands)}),i.jsx($n,{value:f.Parts.Body,src:Q.getPart(f.Parts.Body)}),i.jsx($n,{value:f.Parts.Feet,src:Q.getPart(f.Parts.Feet)}),i.jsx($n,{value:f.Parts.PlanarSphere,src:Q.getPart(f.Parts.PlanarSphere)}),i.jsx($n,{value:f.Parts.LinkRope,src:Q.getPart(f.Parts.LinkRope)})]})}),i.jsx(le,{children:a("Relic.Set")}),i.jsx(q.Item,{name:"set",children:i.jsx(ne,{showSearch:!0,allowClear:!0,style:{width:300},placeholder:a("Relic.Set"),options:u,maxTagCount:"responsive"})}),i.jsx(le,{children:a("Relic.Enhance")}),i.jsxs(D,{gap:10,children:[i.jsx(q.Item,{name:"enhance",children:i.jsx(ne,{showSearch:!0,style:{width:115},options:A})}),i.jsx(se,{style:{width:50},onClick:_,children:"+3"}),i.jsx(q.Item,{name:"grade",children:i.jsx(ne,{showSearch:!0,style:{width:115},options:[{value:2,label:"2 ★"},{value:3,label:"3 ★"},{value:4,label:"4 ★"},{value:5,label:"5 ★"}],onChange:x})})]}),i.jsx(le,{children:a("Relic.Mainstat")}),i.jsxs(D,{gap:10,children:[i.jsx(q.Item,{name:"mainStatType",children:i.jsx(ne,{showSearch:!0,style:{width:210},maxTagCount:"responsive",options:o,disabled:o.length<=1})}),i.jsx(q.Item,{name:"mainStatValue",children:i.jsx(ma,{controls:!1,disabled:!0,style:{width:80}})})]})]}),i.jsx("div",{style:{display:"block",minWidth:12}}),i.jsxs(D,{vertical:!0,gap:5,style:{},children:[i.jsx(le,{children:a("Relic.Wearer")}),i.jsx(q.Item,{name:"equippedBy",children:i.jsx(ne,{showSearch:!0,filterOption:J.titleFilterOption,style:{height:35},options:c,optionLabelProp:"title"})}),i.jsx("div",{style:{height:180,overflow:"hidden",marginTop:7,borderRadius:10,boxShadow:`0px 0px 0px 1px ${t.colorBorder} inset`},children:i.jsx("img",{style:{width:"100%"},src:Q.getCharacterPreviewById(d=="None"?"":d)})})]})]}),i.jsx(D,{gap:20,children:i.jsxs(D,{vertical:!0,gap:5,style:{width:"100%"},children:[i.jsxs(D,{justify:"space-between",children:[i.jsx(le,{children:a("Relic.Substat")}),i.jsx(D,{style:{width:180},children:i.jsx(le,{children:a("Relic.Upgrades")})})]}),i.jsx(co,{index:0,upgrades:m,relicForm:s,resetUpgradeValues:x,plusThree:_}),i.jsx(co,{index:1,upgrades:m,relicForm:s,resetUpgradeValues:x,plusThree:_}),i.jsx(co,{index:2,upgrades:m,relicForm:s,resetUpgradeValues:x,plusThree:_}),i.jsx(co,{index:3,upgrades:m,relicForm:s,resetUpgradeValues:x,plusThree:_})]})})]})})})}function co(e){const a=W.useRef(null),[t,s]=Lt.useState(!1),o=`substatType${e.index}`,r=`substatValue${e.index}`,{t:l}=ee("modals",{keyPrefix:"Relic"}),c=()=>{a.current&&a.current.select()};function u(h){console.log(e,h),e.relicForm.setFieldValue(r,e.upgrades[e.index][h]),e.resetUpgradeValues(),e.plusThree()}const d=W.useMemo(()=>{const h=[];for(const g of Object.entries(f.SubStats))h.push({label:i.jsxs(D,{align:"center",gap:10,children:[i.jsx("img",{style:{width:22,height:22},src:Q.getStatIcon(g[1],!0)}),Y.t(`common:Stats.${g[1]}`)]}),value:g[1]});return h},[Y.resolvedLanguage]);function m(h){var C,M;const g=(M=(C=e.upgrades)==null?void 0:C[e.index])==null?void 0:M[h.quality];return i.jsx(D,{style:{width:"100%"},children:i.jsx(se,{type:t?"default":"dashed",style:{width:"100%",padding:0},onClick:()=>u(h.quality),disabled:g==null,tabIndex:-1,children:g||""})})}return i.jsxs(D,{gap:10,onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),children:[i.jsxs(D,{gap:10,children:[i.jsx(q.Item,{name:o,children:i.jsx(ne,{showSearch:!0,allowClear:!0,style:{width:210},placeholder:l("SubstatPlaceholder"),maxTagCount:"responsive",options:d,listHeight:750,onChange:()=>{e.relicForm.getFieldValue(o)?e.relicForm.setFieldValue(r,0):e.relicForm.setFieldValue(r,void 0),e.resetUpgradeValues()},tabIndex:0})}),i.jsx(q.Item,{name:`substatValue${e.index}`,children:i.jsx(qt,{ref:a,onFocus:c,style:{width:80},onChange:e.resetUpgradeValues,tabIndex:0})})]}),i.jsx(wf,{style:{width:12}}),i.jsxs(D,{gap:5,style:{width:"100%"},children:[i.jsx(m,{quality:"low"}),i.jsx(m,{quality:"mid"}),i.jsx(m,{quality:"high"})]})]})}function eu(e){var a;return b.objectHash({grade:e.grade,enhance:e.enhance,part:e.part,set:e.set,mainStatType:(a=e.main)==null?void 0:a.stat,substats:e.substats.map(t=>({stat:t.stat,value:J.truncate1000ths(b.precisionRound(t.value))}))})}function LB(e,a){if(!e||!a)return!0;const t=eu(e),s=eu(a);return t!=s}const{useToken:OB}=Xt;window.Vibrant=ku;function cc(e){var Ei;const{source:a,character:t,setOriginalCharacterModalOpen:s,setOriginalCharacterModalInitialCharacter:o,setCharacterModalAdd:r}=e,{token:l}=OB(),[c,u]=W.useState(),[d,m]=W.useState(!1),[h,g]=W.useState(!1),[C,M]=W.useState(!1),[x,O]=W.useState(),[H,_]=W.useState({}),[A,L]=W.useState(Xi),[v,N]=W.useState(Ml),U=W.useRef(),F=W.useRef(Oo),P=window.store(We=>We.relicsById),[T,y]=W.useState(0),p=window.store(We=>We.showcasePreferences),R=W.useRef(null),[I,B]=W.useState(Oo),[j,Z]=W.useState(window.store.getState().savedSession[$e.showcaseStandardMode]?Gt.STANDARD:Gt.AUTO),K=window.store(We=>We.activeKey),X=window.store(We=>We.savedSession.showcaseDarkMode);window.store(We=>{var At;return(At=We.scoringMetadataOverrides[t==null?void 0:t.id])==null?void 0:At.stats[n.SPD]}),window.store(We=>{var At;return(At=We.scoringMetadataOverrides[t==null?void 0:t.id])==null?void 0:At.traces}),window.store(We=>{var At,Cn;return(Cn=(At=We.scoringMetadataOverrides[t==null?void 0:t.id])==null?void 0:At.simulation)==null?void 0:Cn.deprioritizeBuffs});const te=window.store(We=>We.showcaseTemporaryOptions);if(!t||K!=ge.CHARACTERS&&K!=ge.SHOWCASE)return i.jsx("div",{style:{height:Hs,width:1068,borderRadius:8,backgroundColor:l.colorBgLayout,border:`1px solid ${l.colorBgContainer}`}});console.log("======================================================================= RENDER CharacterPreview",a);function ae(We){_({...H,...We})}const{scoringResults:Te,displayRelics:Ke}=OT(a,t,P),Se=Te.relics||[],re=jT(t),be=UT(t,U,H),De=wT(t,Ke,A,be,re,te),Ne=((Ei=V.getCharacterById(t==null?void 0:t.id))==null?void 0:Ei.portrait)??void 0,st=(Ne==null?void 0:Ne.imageUrl)??Q.getCharacterPortraitById(t.id),Wt=SB(t.id,st,j),na=j==Gt.STANDARD?mB():p[t.id]??fB(Wt),xa=hB(j,p,t),ce=Ne?vo[st]?xa==Gt.AUTO?Wt:na.color??Wt:F.current:xa==Gt.AUTO?Wt:na.color??Wt;F.current=ce;const et={algorithm:Xt.darkAlgorithm,token:{colorBgLayout:ce,colorPrimary:ce},components:{Segmented:{trackBg:vR(),itemSelectedBg:OR(ce,X)}}},fe=kf(et),ut={cardBackgroundColor:AR(fe.colorPrimaryActive,X),cardBorderColor:xR(fe.colorPrimaryActive,X)},ia=HT(t,!!De),Ci=vT(t),jn=FT(t,Ke,re);return i.jsxs(D,{vertical:!0,style:{width:1068},children:[i.jsx(Fs,{selectedRelic:c,type:"edit",onOk:We=>kT(We,c,u),setOpen:m,open:d}),i.jsx(Fs,{selectedRelic:c,type:"edit",onOk:We=>KT(We,u),setOpen:g,open:h}),i.jsx(Um,{ref:R,source:a,id:e.id,characterId:t.id,simScoringResult:De,token:fe,showcasePreferences:na,setOverrideTheme:()=>{},scoringType:A,seedColor:ce,setSeedColor:B,colorMode:xa,setColorMode:Z}),i.jsx(oi,{theme:et,children:i.jsxs(D,{id:e.id,className:"characterPreview",style:{position:"relative",display:t?"flex":"none",height:Hs,background:LR(l.colorBgLayout,X),backgroundBlendMode:"screen",overflow:"hidden",borderRadius:7,transition:fl()},gap:lt,children:[i.jsx("div",{style:{backgroundImage:`url(${st})`,backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"150%",position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:0,filter:`blur(20px) brightness(${X?.5:.7}) saturate(${.8})`,WebkitFilter:`blur(20px) brightness(${X?.5:.7}) saturate(${.8})`}}),a!=vt.BUILDS_MODAL&&i.jsxs(D,{vertical:!0,gap:8,className:"character-build-portrait",children:[i.jsx(GB,{source:a,character:t,displayDimensions:ia,customPortrait:Ne,editPortraitModalOpen:C,setEditPortraitModalOpen:M,onEditPortraitOk:We=>NT(t,We,O,M),simScoringResult:De,artistName:Ci,setOriginalCharacterModalInitialCharacter:o,setOriginalCharacterModalOpen:s,setCharacterModalAdd:r,onPortraitLoad:We=>{var At;return(At=R.current)==null?void 0:At.onPortraitLoad(We,t.id)}}),De&&i.jsx(TB,{source:a,character:t,showcaseMetadata:re,displayDimensions:ia,setOriginalCharacterModalInitialCharacter:o,setOriginalCharacterModalOpen:s,setCharacterModalAdd:r})]}),i.jsxs(D,{vertical:!0,justify:"space-between",gap:8,style:{},children:[i.jsxs(D,{vertical:!0,style:{width:HD,height:"100%",borderRadius:8,zIndex:10,backgroundColor:ut.cardBackgroundColor,transition:fl(),flex:1,paddingRight:2,paddingLeft:2,paddingBottom:3,boxShadow:ns+Sm,border:`1px solid ${ut.cardBorderColor}`},justify:"space-between",children:[i.jsx(aB,{showcaseMetadata:re,scoringType:A}),i.jsx(ml,{characterId:t.id,finalStats:jn,elementalDmgValue:re.elementalDmgType,scoringType:A,simScore:De?De.originalSimResult.simScore:void 0}),De&&i.jsxs(i.Fragment,{children:[i.jsx(bB,{result:De,relics:Ke}),i.jsx(pB,{characterId:re.characterId,token:fe,simScoringResult:De,teamSelection:be,combatScoreDetails:v,displayRelics:Ke,setTeamSelectionByCharacter:ae,setRedrawTeammates:y}),i.jsx(gB,{combatScoreDetails:v,simScoringResult:De})]}),!De&&i.jsxs(i.Fragment,{children:[A!=hn&&i.jsx(_B,{scoringResults:Te}),i.jsx(BB,{showcaseMetadata:re})]})]}),!De&&i.jsx(i.Fragment,{children:i.jsx(RB,{source:a,character:t,showcaseMetadata:re,displayDimensions:ia,setOriginalCharacterModalInitialCharacter:o,setOriginalCharacterModalOpen:s,setCharacterModalAdd:r})})]}),i.jsx(PB,{setSelectedRelic:u,setEditModalOpen:m,setAddModalOpen:g,displayRelics:Ke,source:a,scoringType:A,characterId:re.characterId,scoredRelics:Se,showcaseColors:ut})]})}),i.jsx(AB,{characterId:re.characterId}),a!=vt.BUILDS_MODAL&&i.jsx($R,{token:l,simScoringResult:De,combatScoreDetails:v,showcaseMetadata:re,scoringType:A,displayRelics:Ke,setScoringType:L,setCombatScoreDetails:N})]})}const vB="ArrowLeft",HB="ArrowUp",FB="ArrowRight",wB="ArrowDown",uc=(e,a,t)=>{const s=e.previousCellPosition;let o,r,l;function c(u){return u>=r||u<=-1?null:(l=a.current.api.getDisplayedRowAtIndex(u),a.current.api.setNodesSelected({nodes:[l],newValue:!0}),t(l),{rowIndex:u,column:s.column,rowPinned:s.rowPinned})}switch(e.key){case HB:return o=s.rowIndex-1,c(o);case wB:return o=s.rowIndex+1,r=e.api.getDisplayedRowCount(),c(o);case vB:case FB:default:return null}},kB=({open:e,setOpen:a,selectedCharacter:t})=>{var H,_;const{t:s}=ee(["modals","gameData","common"]),[o,r]=Vt.useModal(),[l,c]=W.useState(null),u=s(`gameData:Characters.${t==null?void 0:t.id}.Name`);W.useEffect(()=>{var A;e&&((A=t==null?void 0:t.builds)!=null&&A.length)&&(c(0),h(t.builds))},[e,t]);const d=W.useMemo(()=>{var A;if(l!=null&&((A=t==null?void 0:t.builds)!=null&&A[l].build)){const L=window.store.getState().relicsById,v=Object.values(t.builds[l].build).map(F=>L[F]),N={};v.filter(F=>!!F).map(F=>N[F.part]=F);const U=JSON.parse(JSON.stringify(t));return U.equipped=N,console.log("Previewing builds character:",U),i.jsx(cc,{character:U,source:vt.BUILDS_MODAL,id:"relicScorerPreview"})}return i.jsx("div",{style:{width:656,height:856,border:"1px solid #354b7d"}})},[l,t]);if(!((H=t==null?void 0:t.builds)!=null&&H.length))return i.jsxs(Vt,{open:e,width:300,destroyOnClose:!0,onOk:()=>a(!1),onCancel:()=>a(!1),centered:!0,okText:s("common:Ok"),cancelText:s("common:Cancel"),children:[s("Builds.NoBuilds.NoneSaved"),r]});async function m(A){return o.confirm({title:s("common:Confirm"),icon:i.jsx(Nu,{}),content:A,okText:s("common:Confirm"),cancelText:s("common:Cancel"),centered:!0})}function h(A){for(const L of A){const v=window.store.getState().relicsById,N=Object.values(L.build).map(F=>v[F]),U=Dt.scoreCharacterWithRelics(t,N);L.score={score:Math.round(U.totalScore??0),rating:U.totalRating??"N/A"}}}function g(){a(!1)}const C=()=>{c(null),a(!1)},M=async()=>{await m(s("Builds.ConfirmDelete.DeleteAll"))&&(c(null),V.clearCharacterBuilds(t==null?void 0:t.id),window.forceCharacterTabUpdate(),Pe.delayedSave(),oe.success(s("Builds.ConfirmDelete.SuccessMessageAll",{characterName:u})),a(!1))},x=async A=>{await m(s("Builds.ConfirmDelete.DeleteSingle",{name:A}))&&(c(null),V.deleteCharacterBuild(t==null?void 0:t.id,A),window.forceCharacterTabUpdate(),Pe.delayedSave(),oe.success(s("Builds.ConfirmDelete.SuccessMessageSingle",{name:A})),(t==null?void 0:t.Builds.length)==0&&a(!1))},O=async A=>{await m(s("Builds.ConfirmEquip.Content"))&&(V.equipRelicIdsToCharacter(Object.values(A.build),t==null?void 0:t.id),window.forceCharacterTabUpdate(),Pe.delayedSave(),oe.success(s("Builds.ConfirmEquip.SuccessMessage",{buildName:A.name})),C())};return i.jsx(Vt,{open:e,width:1115,destroyOnClose:!0,centered:!0,onOk:g,onCancel:C,footer:[i.jsx(se,{onClick:()=>M(),children:s("Builds.DeleteAll")},"delete"),i.jsx(se,{onClick:C,children:s("common:Cancel")},"back")],children:i.jsxs(D,{gap:10,children:[t&&i.jsx(i.Fragment,{children:i.jsx(D,{vertical:!0,style:{overflowY:"auto",marginBottom:20,minWidth:400,maxWidth:400,height:840},gap:8,children:(_=t.builds)==null?void 0:_.map((A,L)=>i.jsx(hi,{style:{backgroundColor:l===L?"#001529":void 0,cursor:"pointer"},onClick:v=>{v.target.closest("button")!==null||c(L)},hoverable:!0,children:i.jsxs(D,{justify:"space-between",gap:8,align:"center",children:[i.jsx(D,{vertical:!0,align:"flex-start",children:i.jsx(le,{style:{flex:1,fontSize:16,fontWeight:600},children:A.name})}),i.jsxs(D,{gap:5,children:[i.jsx(se,{onClick:()=>{O(A)},children:s("Builds.Equip")}),i.jsx(se,{style:{width:35},type:"primary",icon:i.jsx(Dl,{}),onClick:()=>{x(A.name)}})]})]})},L))})}),r,d]})})},KB=({open:e,setOpen:a,onOk:t})=>{const[s]=q.useForm(),{t:o}=ee("modals",{keyPrefix:"SaveBuild"}),{t:r}=ee("common");function l(){const d=s.getFieldsValue();t(d.name)}const c=()=>{a(!1)};return i.jsx(Vt,{open:e,width:350,destroyOnClose:!0,centered:!0,onOk:l,onCancel:c,footer:[i.jsx(se,{onClick:c,children:r("Cancel")},"back"),i.jsx(se,{type:"primary",onClick:l,children:r("Save")},"submit")],children:i.jsx(q,{form:s,preserve:!1,layout:"vertical",children:i.jsx(q.Item,{name:"name",label:o("Label"),rules:[{required:!0,message:o("Rule")}],style:{width:300},children:i.jsx(qt,{})})})})};function NB(e){const{onOk:a,open:t,setOpen:s,currentCharacter:o}=e,[r]=q.useForm(),l=window.store(C=>C.characters),{t:c}=ee("modals",{keyPrefix:"SwitchRelics"}),{t:u}=ee("common"),d=W.useMemo(()=>Yl({currentCharacters:l,excludeCharacters:[o],withNobodyOption:!1,longNameLabel:!0,longNameTitle:!0}),[l,o,c]);W.useEffect(()=>{t&&r.setFieldsValue({characterId:null})},[r,t]);function m(){const{selectedCharacter:C}=r.getFieldsValue();console.log("Switch relics modal submitted with:",C),a(C),s(!1)}const h=()=>{s(!1)},g=278;return i.jsx(Vt,{open:t,width:g+47,destroyOnClose:!0,centered:!0,onOk:m,onCancel:h,footer:[i.jsx(se,{onClick:h,children:u("Cancel")},"back"),i.jsx(se,{type:"primary",onClick:m,children:u("Save")},"submit")],children:i.jsxs(q,{form:r,preserve:!1,layout:"vertical",children:[i.jsx(D,{justify:"space-between",align:"center",children:i.jsx(le,{children:c("Title")})}),i.jsx(D,{vertical:!0,gap:lt,children:i.jsx(D,{gap:lt,children:i.jsx(q.Item,{name:"selectedCharacter",children:i.jsx(ne,{labelInValue:!0,showSearch:!0,filterOption:J.titleFilterOption,style:{width:g},options:d})})})})]})})}const{Text:Vm}=_e;function UB(e){const{t:a}=ee(["charactersTab","common","gameData"]),[t,s]=Lt.useState(V.getCharacters());window.setCharacterRows=s;const o=W.useMemo(()=>({rowHeight:46,rowDragManaged:!0,animateRows:!0,suppressDragLeaveHidesColumns:!0,suppressScrollOnNewData:!0}),[]),r=W.useMemo(()=>[{field:"",headerName:a("GridHeaders.Icon"),cellRenderer:Zm,width:52},{field:"",headerName:a("GridHeaders.Priority"),cellRenderer:jB,width:60,rowDrag:!0},{field:"",headerName:a("GridHeaders.Character"),flex:1,cellRenderer:WB}],[a]),l=W.useMemo(()=>({sortable:!1,cellStyle:{display:"flex"}}),[]);return i.jsx(Rl,{ref:e.characterGrid,rowData:t,gridOptions:o,getRowNodeId:c=>c.id,columnDefs:r,defaultColDef:l,deltaRowDataMode:!0,headerHeight:24,onCellClicked:e.cellClickedListener,onCellDoubleClicked:e.cellDoubleClickedListener,onRowDragEnd:e.onRowDragEnd,onRowDragLeave:e.onRowDragLeave,navigateToNextCell:e.navigateToNextCell,isExternalFilterPresent:e.isExternalFilterPresent,doesExternalFilterPass:e.doesExternalFilterPass,rowSelection:"single"})}function jB(e){const a=e.data,t=V.getCharacters().find(s=>s.id==a.id);return i.jsx(Vm,{style:{height:"100%"},children:t.rank+1})}function WB(e){const a=Y.getFixedT(null,"gameData","Characters"),t=e.data,s=a(`${t.id}.LongName`),r=(s.includes(" (")?s.split(" (").map(u=>u.trim()).map((u,d)=>d===1?` (${u} `:u):s.split(/ - |•/).map(u=>u.trim())).map((u,d)=>i.jsx("span",{style:{display:"inline-block"},children:u},d)),l=t.equipped?Object.values(t.equipped).filter(u=>u!=null).length:0;let c="#81d47e";return l<6&&(c="rgb(229, 135, 66)"),l<1&&(c="#d72f2f"),i.jsxs(D,{align:"center",justify:"flex-start",style:{height:"100%",width:"100%"},children:[i.jsx(Vm,{style:{margin:"auto",padding:"0px 5px",textAlign:"center",overflow:"hidden",whiteSpace:"break-spaces",textWrap:"wrap",fontSize:14,width:"100%",lineHeight:"18px"},children:r}),i.jsx(D,{style:{display:"block",width:3,height:"100%",backgroundColor:c,zIndex:2}})]})}function Zm(e){const a=e.data,t=Q.getCharacterAvatarById(a.id);return i.jsx("img",{src:t,style:{flex:"0 0 auto",maxWidth:"100%",width:48}})}const{useToken:VB}=Xt,ZB={path:[],element:[]};function zB(){const{token:e}=VB(),[a,t]=Vt.useModal();W.useState(!1),W.useState(!1);const[s,o]=W.useState(!1),[r,l]=W.useState(!1),[c,u]=W.useState(!1),[d,m]=W.useState(!1),[h,g]=W.useState(!1),[C,M]=W.useState(),x=W.useRef(""),[O,H]=W.useState(ZB),{t:_}=ee(["charactersTab","common","gameData"]);console.log("======================================================================= RENDER CharacterTab");const A=W.useRef();window.characterGrid=A;const L=window.store(ce=>ce.characterTabFocusCharacter),v=window.store(ce=>ce.setCharacterTabFocusCharacter),N=window.store(ce=>ce.setScoringAlgorithmFocusCharacter),U=window.store.getState().charactersById[L],[,F]=Lt.useReducer(ce=>!ce);window.forceCharacterTabUpdate=()=>{var ce,et;console.log("__________ CharacterTab forceCharacterTabUpdate"),F(),(et=(ce=A==null?void 0:A.current)==null?void 0:ce.api)!=null&&et.redrawRows?A.current.api.redrawRows():console.log("@forceCharacterTabUpdate: No characterGrid.current.api")};const P=[{key:"character group",type:"group",label:_("CharacterMenu.Character.Label"),children:[{label:_("CharacterMenu.Character.Options.Add"),key:"add"},{label:_("CharacterMenu.Character.Options.Edit"),key:"edit"},{label:_("CharacterMenu.Character.Options.Switch"),key:"switchRelics"},{label:_("CharacterMenu.Character.Options.Unequip"),key:"unequip"},{label:_("CharacterMenu.Character.Options.Delete"),key:"delete"}]},{key:"builds group",type:"group",label:_("CharacterMenu.Build.Label"),children:[{label:_("CharacterMenu.Build.Options.Save"),key:"saveBuild"},{label:_("CharacterMenu.Build.Options.View"),key:"viewBuilds"}]},{key:"scoring group",type:"group",label:_("CharacterMenu.Scoring.Label"),children:[{label:_("CharacterMenu.Scoring.Options.ScoringModal"),key:"scoring"}]},{key:"priority group",type:"group",label:_("CharacterMenu.Priority.Label"),children:[{label:_("CharacterMenu.Priority.Options.SortByScore"),key:"sortByScore"},{label:_("CharacterMenu.Priority.Options.MoveToTop"),key:"moveToTop"}]}],T=W.useCallback(()=>{A.current.api.onFilterChanged()},[]),y=W.useCallback(ce=>{const et=V.getMetadata().characters[ce.data.id];return O.element.length&&!O.element.includes(et.element)||O.path.length&&!O.path.includes(et.path)?!1:_(`gameData:Characters.${ce.data.id}.LongName`).toLowerCase().includes(x.current)},[O]),p=W.useCallback(()=>O.element.length+O.path.length+x.current.length>0,[O]),R=W.useCallback(ce=>{const et=ce.data;v(et.id),console.log(`@CharacterTab::setCharacterTabFocusCharacter - [${et.id}]`,ce.data)},[v]),I=window.store(ce=>ce.setActiveKey),B=W.useCallback(ce=>{I(ge.OPTIMIZER),de.setCharacter(ce.data.id),console.log(`@CharacterTab.cellDoubleClickedListener::setOptimizerTabFocusCharacter - focus [${ce.data.id}]`,ce.data)},[]),j=W.useCallback(ce=>uc(ce,A,et=>R(et)),[]);function Z(ce,et){const fe=ce.node.data;V.insertCharacter(fe.id,et),Pe.delayedSave(),A.current.api.redrawRows()}const K=W.useCallback(ce=>{Z(ce,ce.overIndex)},[]),X=W.useCallback(ce=>{ce.overIndex==0?Z(ce,0):ce.overIndex==-1&&ce.vDirection=="down"?Z(ce,V.getCharacters().length):ce.overIndex==-1&&ce.vDirection=="up"?Z(ce,0):Z(ce,ce.overIndex)},[]);function te(){var ut,ia;const ce=A.current.api.getSelectedNodes();if(!ce||ce.length==0)return;const fe=ce[0].data.id;V.removeCharacter(fe),setCharacterRows(V.getCharacters()),v(void 0),(ia=(ut=window.relicsGrid)==null?void 0:ut.current)!=null&&ia.api&&window.relicsGrid.current.api.redrawRows(),Pe.delayedSave(),oe.success(_("Messages.RemoveSuccess"))}function ae(){console.log("unequipClicked",V.getCharacterById(L));const ce=A.current.api.getSelectedNodes();if(!ce||ce.length==0)return;const fe=ce[0].data.id;V.unequipCharacter(fe),A.current.api.redrawRows(),window.forceCharacterTabUpdate(),oe.success(_("Messages.UnequipSuccess")),window.relicsGrid.current.api.redrawRows(),Pe.delayedSave()}function Te(ce){if(!ce.characterId)return oe.error(_("Messages.NoSelectedCharacter"));const et=V.addFromForm(ce);window.characterGrid.current.api.ensureIndexVisible(et.rank)}function Ke(ce){if(!ce)return oe.error(_("Messages.NoSelectedCharacter"));V.switchRelics(U.id,ce.value),Pe.delayedSave(),A.current.api.redrawRows(),window.forceCharacterTabUpdate(),oe.success(_("Messages.SwitchSuccess",{charId:ce.value})),window.relicsGrid.current.api.redrawRows()}function Se(){L&&N(L),window.store.getState().setScoringModalOpen(!0)}function re(){V.insertCharacter(L,0),V.refreshCharacters(),Pe.delayedSave()}async function be(){if(!await Wt(i.jsx(i.Fragment,{children:i.jsx(xt,{t:_,i18nKey:"Messages.SortByScoreWarning",children:i.jsx("br",{})})})))return;const et=V.getCharacters().map(fe=>({score:Dt.scoreCharacter(fe),character:fe})).sort((fe,ut)=>ut.score.totalScore-fe.score.totalScore).map(fe=>fe.character);V.setCharacters(et),V.refreshCharacters(),Pe.delayedSave()}function De(ce){const et=Dt.scoreCharacter(U),fe=V.saveCharacterBuild(ce,U.id,{score:et.totalScore.toFixed(0),rating:et.totalRating});if(fe){oe.error(fe.error);return}oe.success(_("charactersTab:Messages.SaveSuccess",{name:ce})),Pe.delayedSave(),u(!1)}const st={items:P,onClick:async ce=>{if(!U&&ce.key!="add"&&ce.key!="scoring"&&ce.key!="sortByScore"){oe.error(_("Messages.NoSelectedCharacter"));return}switch(ce.key){case"add":g(!0),M(null),o(!0);break;case"edit":g(!1),M(U),o(!0);break;case"switchRelics":l(!0);break;case"unequip":if(!await Wt(_("Messages.UnequipWarning",{charId:U.id})))return;ae();break;case"delete":if(!await Wt(_("Messages.DeleteWarning",{charId:U.id})))return;te();break;case"saveBuild":u(!0);break;case"viewBuilds":m(!0);break;case"scoring":Se();break;case"moveToTop":re();break;case"sortByScore":be();break;default:console.error(`Unknown key ${ce.key} in handleActionsMenuClick`)}}};async function Wt(ce){return a.confirm({title:_("common:Confirm"),icon:i.jsx(Nu,{}),content:ce,okText:_("common:Confirm"),cancelText:_("common:Cancel"),centered:!0})}const na=8,xa=280*3+na*2;return i.jsxs(D,{style:{height:"100%",marginBottom:200,width:1455},gap:na,children:[i.jsxs(D,{vertical:!0,gap:na,children:[i.jsx(ws,{placement:"topLeft",menu:st,trigger:["hover"],children:i.jsxs(se,{style:{width:"100%",height:40,boxShadow:"unset",borderRadius:8},icon:i.jsx(Ou,{}),type:"default",children:[_("CharacterMenu.ButtonText"),i.jsx(Uo,{})]})}),i.jsx(D,{vertical:!0,gap:8,style:{minWidth:240},children:i.jsx("div",{id:"characterGrid",className:"ag-theme-balham-dark",style:{display:"block",width:"100%",height:xa,...tc(e)},children:i.jsx(UB,{characterGrid:A,cellClickedListener:R,cellDoubleClickedListener:B,onRowDragEnd:K,onRowDragLeave:X,navigateToNextCell:j,isExternalFilterPresent:p,doesExternalFilterPass:y})})})]}),i.jsxs(D,{vertical:!0,gap:na,children:[i.jsxs(D,{gap:8,style:{width:"100%",marginBottom:0,alignItems:"center"},justify:"space-between",children:[i.jsx(qt,{allowClear:!0,size:"large",style:{height:40,fontSize:14,width:200,borderRadius:8},placeholder:_("SearchPlaceholder"),onChange:ce=>{x.current=ce.target.value.toLowerCase(),T()}}),i.jsx(D,{style:{flex:1},children:i.jsx(es,{name:"path",tags:Vl(),flexBasis:"12.5%",currentFilters:O,setCurrentFilters:H})}),i.jsx(D,{style:{width:408},children:i.jsx(es,{name:"element",tags:Fd(),flexBasis:"14.2%",currentFilters:O,setCurrentFilters:H})})]}),i.jsx(W.Suspense,{children:i.jsx(cc,{id:"characterTabPreview",source:vt.CHARACTER_TAB,character:U,setOriginalCharacterModalOpen:o,setOriginalCharacterModalInitialCharacter:M,setCharacterModalAdd:g})})]}),i.jsx(lc,{onOk:Te,open:s,setOpen:o,initialCharacter:C}),i.jsx(NB,{onOk:Ke,open:r,setOpen:l,currentCharacter:U}),i.jsx(KB,{open:c,setOpen:u,onOk:De}),i.jsx(kB,{open:d,setOpen:m,selectedCharacter:U,imgRenderer:Zm}),t]})}const Sl=900,ar=1600;function XB(){return window.store(a=>a.activeKey)!=ge.HOME?i.jsx(i.Fragment,{}):i.jsxs(D,{vertical:!0,style:{width:"100%",position:"relative",marginBottom:200},align:"center",children:[i.jsx(QB,{}),i.jsx(eI,{}),i.jsx(JB,{})]})}const tu=[{key:"1",label:i.jsx(au,{i18nkey:"Explore"}),children:i.jsx(qB,{})},{key:"2",label:i.jsx(au,{i18nkey:"Join"}),children:i.jsx(YB,{})}];function au(e){const{t:a}=ee("hometab",{keyPrefix:"CollapseLabels"});return i.jsx("div",{style:{marginRight:38,textAlign:"center"},children:i.jsx(Ut,{style:{fontSize:24,paddingInline:30,marginBlock:0},children:a(e.i18nkey)})})}function YB(){const{t:e}=ee("hometab");return i.jsxs(D,{style:{padding:"0px 25px"},gap:50,children:[i.jsx(D,{vertical:!0,style:{flex:1,fontSize:20},gap:20,children:i.jsxs(xt,{t:e,i18nKey:"CommunityCollapse",children:[i.jsx("span",{children:"A huge thanks to all our contributors, translators, users, and everyone who provided feedback, for supporting this project and helping to build it together!"}),i.jsxs("span",{children:["Come be a part of our Star Rail community! Join the ",i.jsx(Zt,{url:"https://discord.gg/rDmB4Un7qg"})," server to hang out, or check out the ",i.jsx(Zt,{url:"https://github.com/fribbels/hsr-optimizer"})," repo if you'd like to contribute."]})]})}),i.jsx(D,{style:{flex:1},align:"flex-start",children:i.jsx("a",{href:"https://github.com/fribbels/hsr-optimizer/graphs/contributors",target:"_blank",rel:"noreferrer",style:{width:"100%"},children:i.jsx("img",{src:"https://contrib.rocks/image?repo=fribbels/hsr-optimizer&columns=10&anon=1",style:{width:"100%",maxWidth:ar/2}})})})]})}function JB(){return i.jsx(jo,{ghost:!0,style:{width:"100%",maxWidth:ar},expandIcon:({isActive:e})=>i.jsx(Kf.RightOutlined,{style:{marginLeft:10},rotate:e?90:0}),items:tu,defaultActiveKey:tu.map(e=>e.key)})}function QB(){return i.jsx("div",{style:{position:"absolute",top:0,width:"100%",maxWidth:ar,height:Sl,maxHeight:Sl,backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundImage:`
            linear-gradient(to top, rgba(24, 34, 57, 0) 99.5%, rgba(24, 34, 57, 1) 100%),
            linear-gradient(to bottom, rgba(24, 34, 57, 0) 99.5%, rgba(24, 34, 57, 1) 100%),
            linear-gradient(to left, rgba(24, 34, 57, 0) 98%, rgba(24, 34, 57, 1) 99.5%),
            linear-gradient(to right, rgba(24, 34, 57, 0) 98%, rgba(24, 34, 57, 1) 99.5%),
            url(${Q.getHomeBackground("nous")})
          `,backgroundSize:"cover"}})}const kr=20;function $B(e){return i.jsx("div",{style:{padding:"15px 15px 0px 15px"},children:i.jsx(aI,{src:Q.getHomeFeature(e.id,Y.resolvedLanguage),fallbackSrc:Q.getHomeFeature(e.id),style:{width:"100%",height:593,borderRadius:8,outline:"rgba(255, 255, 255, 0.15) solid 1px",boxShadow:"rgb(0 0 0 / 50%) 2px 2px 3px",objectFit:"cover"}})})}function uo(e){const{t:a}=ee("hometab",{keyPrefix:"FeatureCards"});return i.jsx(hi,{title:i.jsx("span",{style:{fontSize:20},children:e.title}),style:{flex:1,cursor:"default",fontSize:16,minWidth:500},hoverable:!0,cover:i.jsx($B,{id:e.id}),children:i.jsxs(D,{align:"center",gap:10,justify:"space-between",children:[i.jsx("span",{children:e.content}),i.jsx(se,{size:"large",iconPosition:"end",href:e.url,target:"_blank",icon:i.jsx(Bu,{}),children:a("LearnMore")})]})})}function qB(){const{t:e}=ee("hometab",{keyPrefix:"FeatureCards"});return i.jsx(D,{style:{maxWidth:ar,minWidth:1e3,width:"100%",padding:"0px 20px"},children:i.jsxs(D,{vertical:!0,style:{width:"100%"},gap:kr,children:[i.jsxs(D,{gap:kr,children:[i.jsx(uo,{title:e("Showcase.Title"),id:"showcase",content:e("Showcase.Content"),url:"https://github.com/fribbels/hsr-optimizer/blob/main/docs/guides/en/dps-score.md"}),i.jsx(uo,{title:e("Optimizer.Title"),id:"optimizer",content:e("Optimizer.Content"),url:"https://github.com/fribbels/hsr-optimizer/blob/main/docs/guides/en/optimizer.md"})]}),i.jsxs(D,{gap:kr,style:{width:"100%"},children:[i.jsx(uo,{title:e("Calculator.Title"),id:"calculator",content:e("Calculator.Content"),url:"https://github.com/fribbels/hsr-optimizer/blob/main/docs/guides/en/advanced-rotations.md"}),i.jsx(uo,{title:e("Organizer.Title"),id:"relics",content:e("Organizer.Content"),url:"https://github.com/fribbels/hsr-optimizer/blob/main/docs/guides/en/relics-tab.md"})]})]})})}function eI(){const{t:e}=ee("hometab");return i.jsxs(D,{vertical:!0,style:{width:"100%",zIndex:1,height:Sl,paddingBottom:40},align:"center",justify:"space-between",children:[i.jsx("h1",{style:{marginTop:50,fontSize:50,color:"white",textShadow:"#000000 2px 2px 20px",textAlign:"center",fontFamily:"Tahoma, Geneva, Verdana, sans-serif"},children:i.jsxs(xt,{t:e,i18nKey:"Welcome",children:["Welcome to the",i.jsx("br",{}),"Fribbels Star Rail Optimizer"]})}),i.jsx(tI,{})]})}function tI(){const e=window.store(o=>o.scorerId),{t:a}=ee("hometab",{keyPrefix:"SearchBar"}),t=W.useRef(null);function s(){var l,c;const o=(c=(l=t==null?void 0:t.current)==null?void 0:l.input)==null?void 0:c.value;if(!o)return;if(!b.validateUuid(o))return oe.warning(a("Message"));window.history.pushState({},"",`/hsr-optimizer#showcase?id=${o}`),window.store.getState().setActiveKey(ge.SHOWCASE)}return i.jsxs(D,{vertical:!0,className:"homeCard",style:{width:700,height:115,padding:20},align:"center",justify:"center",gap:5,children:[i.jsxs(D,{justify:"space-between",style:{width:"100%"},children:[i.jsx(D,{justify:"flex-start",style:{paddingLeft:3,paddingBottom:5,fontSize:17,textShadow:"rgb(0, 0, 0) 2px 2px 20px, rgb(0, 0, 0) 0px 0px 5px"},children:a("Label")}),i.jsx(D,{style:{fontSize:16,opacity:.8,marginRight:2},children:i.jsx(Zt,{text:a("Api"),noUnderline:!0,url:"https://enka.network/?hsr"})})]}),i.jsxs(Cl.Compact,{style:{width:"100%"},children:[i.jsx(se,{size:"large",type:"primary",icon:i.jsx(Nf,{}),style:{width:60},onClick:s}),i.jsx(qt,{ref:t,placeholder:a("Placeholder"),style:{width:"100%"},allowClear:!0,size:"large",defaultValue:e,onPressEnter:s})]})]})}function aI(e){const[a,t]=Lt.useState(!1);return i.jsx("img",{style:e.style,src:e.src,onError:s=>{a||(s.currentTarget.src=e.fallbackSrc,t(!0))}})}const ni=250,Ja=100,{Text:nI}=_e;function iI(){const[e,a]=W.useState(!1),{t}=ee(["importSaveTab"],{keyPrefix:"ClearData"}),{t:s}=ee("common");function o(){console.log("Clear data"),a(!0),setTimeout(()=>{a(!1),V.resetStore(),oe.success(t("SuccessMessage"))},Ja)}return i.jsxs(D,{vertical:!0,gap:5,children:[i.jsx(nI,{children:t("Label")}),i.jsx(Kn,{title:t("WarningTitle"),description:t("WarningDescription"),onConfirm:o,placement:"bottom",okText:s("Yes"),cancelText:s("Cancel"),children:i.jsx(se,{type:"primary",icon:i.jsx(Dl,{}),loading:e,style:{width:ni},children:t("ButtonText")})})]})}const{Text:Kr}=_e;function sI(){const[e,a]=W.useState(0),[t,s]=W.useState(void 0),[o,r]=W.useState(!1),[l,c]=W.useState(!1),{t:u}=ee("importSaveTab",{keyPrefix:"LoadData"});function d(M){return new Promise(()=>{const x=new FileReader;return x.readAsText(M),x.onload=()=>{const O=String(x.result),H=JSON.parse(O);if(H.fileType||H.source){r(!0),setTimeout(()=>{r(!1),s(void 0),a(1)},Ja);return}r(!0),setTimeout(()=>{r(!1),s(H),a(1)},Ja)},!1})}function m(){c(!0),setTimeout(()=>{V.setStore(t,!1),window.refreshRelicsScore(),setTimeout(()=>{a(2),c(!1),Pe.save()},Ja)},Ja)}function h(){return i.jsx(D,{style:{minHeight:100},children:i.jsxs(D,{vertical:!0,gap:10,children:[i.jsx(Kr,{children:u("Stage1.Label")}),i.jsx(Uu,{accept:".json",name:"file",beforeUpload:d,children:i.jsx(se,{style:{width:ni},icon:i.jsx(El,{}),loading:o,onClick:()=>a(0),children:u("Stage1.ButtonText")})})]})})}function g(){return!(t!=null&&t.relics)||!t.characters?i.jsx(D,{style:{minHeight:100},children:i.jsx(D,{vertical:!0,gap:10,style:{display:e>=1?"flex":"none"},children:u("Stage2.ErrorMsg")})}):i.jsx(D,{style:{minHeight:100},children:i.jsxs(D,{vertical:!0,gap:10,style:{display:e>=1?"flex":"none"},children:[i.jsx(Kr,{children:u("Stage2.Label",{relicCount:t.relics.length,characterCount:t.characters.length})}),i.jsx(se,{style:{width:ni},icon:i.jsx(Cs,{}),type:"primary",onClick:m,loading:l,children:u("Stage2.ButtonText")})]})})}function C(){return i.jsx(D,{style:{minHeight:100},children:i.jsx(D,{vertical:!0,gap:10,style:{display:e>=2?"flex":"none"},children:i.jsx(Kr,{children:u("Stage3.SuccessMessage")})})})}return i.jsx(D,{gap:5,children:i.jsx(Do,{direction:"vertical",current:e,items:[{title:"",description:h()},{title:"",description:g()},{title:"",description:C()}]})})}function oI(e){const a=V.getMetadata().relics.relicSets,t={metadata:{trailblazer:"Stelle",current_trailblazer_path:"Destruction"},characters:[],relics:[]};for(const s of e.data.avatar_list){const o={characterEidolon:s.rank,characterId:s.id.toString(),characterLevel:s.level,lightCone:null,lightConeLevel:80,lightConeSuperimposition:1};s.equip!=null&&(o.lightCone=s.equip.id.toString(),o.lightConeSuperimposition=s.equip.rank),t.characters.push(o);const r=[...s.relics,...s.ornaments];for(const c of r){const u=[];for(const d of c.properties){const m={stat:iu(d.property_type),value:nu(d.value)};u.push(m)}t.relics.push({enhance:c.level,equippedBy:s.id.toString(),grade:c.rarity,id:J.randomId(),part:dI(c.pos),set:mI(c.id,a),main:{stat:iu(c.main_property.property_type),value:nu(c.main_property.value)},substats:u,verified:!1})}const l=lI(s.id);l&&(t.metadata=l)}return t.relics.map(s=>fi.augment(s)),t}function nu(e){return e.endsWith("%")?J.precisionRound(parseFloat(e.slice(0,e.length-1))):J.precisionRound(parseFloat(e))}const rI={8001:{trailblazer:"Caelus",current_trailblazer_path:"Destruction"},8002:{trailblazer:"Stelle",current_trailblazer_path:"Destruction"},8003:{trailblazer:"Caelus",current_trailblazer_path:"Preservation"},8004:{trailblazer:"Stelle",current_trailblazer_path:"Preservation"},8006:{trailblazer:"Stelle",current_trailblazer_path:"Harmony"},8005:{trailblazer:"Caelus",current_trailblazer_path:"Harmony"}};function lI(e){return rI[e]}const cI={27:f.Stats.HP,32:f.Stats.HP_P,29:f.Stats.ATK,33:f.Stats.ATK_P,31:f.Stats.DEF,34:f.Stats.DEF_P,51:f.Stats.SPD,52:f.Stats.CR,53:f.Stats.CD,56:f.Stats.EHR,57:f.Stats.RES,59:f.Stats.BE,54:f.Stats.ERR,55:f.Stats.OHB,12:f.Stats.Physical_DMG,14:f.Stats.Fire_DMG,16:f.Stats.Ice_DMG,18:f.Stats.Lightning_DMG,20:f.Stats.Wind_DMG,22:f.Stats.Quantum_DMG,24:f.Stats.Imaginary_DMG};function iu(e){return cI[e]||""}const uI={1:E.Head,2:E.Hands,3:E.Body,4:E.Feet,5:E.PlanarSphere,6:E.LinkRope};function dI(e){return uI[e]||""}function mI(e,a){const t=e.toString().substring(1,4);return su[e]?a[su[e].set].name:a[t].name}const su={55001:{set:"101",part:"3",main:"436"},55002:{set:"101",part:"4",main:"441"},55003:{set:"102",part:"3",main:"434"},55004:{set:"103",part:"3",main:"433"},55005:{set:"103",part:"4",main:"443"},55006:{set:"105",part:"3",main:"434"}},{Text:fI}=_e,hI=Object.values(Nn.characters),SI=Nn.relics.reduce((e,a)=>(e[a.id]=a,e),{});class dc{constructor(a){tt(this,"config");tt(this,"badRollInfo");this.config=a,this.badRollInfo=!1}parse(a){const t=Y.getFixedT(null,"importSaveTab","Import.ParserError"),s=Y.getFixedT(null,"importSaveTab","Import.ParserWarning"),o={metadata:{trailblazer:"Stelle",current_trailblazer_path:"Destruction"},characters:[],relics:[]};if(a.source!=this.config.sourceString)throw new Error(t("BadSource",{jsonSource:a.source,configSource:this.config.sourceString}));if(a.version!==this.config.latestOutputVersion)throw new Error(t("BadVersion",{jsonVersion:a.version,configVersion:this.config.latestOutputVersion}));const r=a.build||"v0.0.0";return _u.lt(r,this.config.latestBuildVersion)&&(console.log(`Current: ${r}, Latest: ${this.config.latestBuildVersion}`),oe.warning(i.jsxs(fI,{children:[t("OutdatedVersion",{buildVersion:r})," ",i.jsx("a",{target:"_blank",style:{color:"#3f8eff"},href:this.config.releases,rel:"noreferrer",children:this.config.releases})]}),15)),o.metadata.trailblazer=a.metadata.trailblazer||"Stelle",o.metadata.current_trailblazer_path=a.metadata.current_trailblazer_path||"Stelle",a.relics&&(o.relics=a.relics.map(c=>gI(c,this)).map(c=>fi.augment(c)).filter(c=>c?!0:(console.warn("Could not parse relic"),!1))),this.badRollInfo&&(oe.warning(s("BadRollInfo"),10),this.badRollInfo=!1),a.characters&&(o.characters=a.characters.map(c=>pI(c,a.light_cones)).filter(c=>c?!0:(console.warn("Could not parse character"),!1))),o}}function pI(e,a){let t;a&&(t=a.find(r=>r.location===e.id));const s=e.id,o=t==null?void 0:t.id;return s?{characterId:s,characterLevel:e.level||80,characterEidolon:e.eidolon||0,lightCone:o||null,lightConeLevel:(t==null?void 0:t.level)||80,lightConeSuperimposition:(t==null?void 0:t.superimposition)||1}:null}function gI(e,a){var h;const s=Uf.findBestMatch(e.slot,Object.values(E)).bestMatch.target,o=e.set_id,r=SI[o].name,l=Math.min(Math.max(e.level,0),15),c=Math.min(Math.max(e.rarity,2),5),{main:u,substats:d}=DI(e,s,c,l,a);let m;if(e.location!==""){const g=(h=hI.find(C=>C.id==e.location))==null?void 0:h.id;g&&(m=g)}return{part:s,set:r,enhance:l,grade:c,main:u,substats:d,equippedBy:m,verified:a.config.speedVerified}}function bI(e,a){switch(a){case"Hands":return f.Stats.ATK;case"Head":return f.Stats.HP;default:return CI(e.mainstat)}}function DI(e,a,t,s,o){const r=bI(e,a);if(!r)throw new Error(Y.t("importSaveTab:Import.ParserError.BadMainstat",{mainstat:e.mainstat,part:a}));const l=TI(a),c=`${t}${l}`,u=Object.values(V.getMetadata().relics.relicMainAffixes[c].affixes),d=EI(r),m=u.find(C=>C.property===d),h=m.base+m.step*s,g=e.substats.map(C=>{if(!o.config.speedVerified)return{stat:Nr(C.key),value:C.value};if(C.step==null||C.count==null||C.count>Math.max(1,e.rarity*2-4)||C.count<=0||C.step>2*C.count||C.step<0)return o.badRollInfo=!0,{stat:Nr(C.key),value:C.value};const{rolls:M,errorFlag:x}=ec(C.count,C.step);return x&&(o.badRollInfo=!0),{stat:Nr(C.key),value:C.value,rolls:M,addedRolls:C.count-1}});return{main:{stat:r,value:J.truncate10000ths(h*(J.isFlat(r)?1:100))},substats:g}}function Nr(e){switch(e){case"ATK":return f.Stats.ATK;case"HP":return f.Stats.HP;case"DEF":return f.Stats.DEF;case"ATK_":return f.Stats.ATK_P;case"HP_":return f.Stats.HP_P;case"DEF_":return f.Stats.DEF_P;case"SPD":return f.Stats.SPD;case"CRIT Rate_":return f.Stats.CR;case"CRIT DMG_":return f.Stats.CD;case"Effect Hit Rate_":return f.Stats.EHR;case"Effect RES_":return f.Stats.RES;case"Break Effect_":return f.Stats.BE;default:return null}}function CI(e){switch(e){case"ATK":return f.Stats.ATK_P;case"HP":return f.Stats.HP_P;case"DEF":return f.Stats.DEF_P;case"SPD":return f.Stats.SPD;case"CRIT Rate":return f.Stats.CR;case"CRIT DMG":return f.Stats.CD;case"Effect Hit Rate":return f.Stats.EHR;case"Break Effect":return f.Stats.BE;case"Energy Regeneration Rate":return f.Stats.ERR;case"Outgoing Healing Boost":return f.Stats.OHB;case"Physical DMG Boost":return f.Stats.Physical_DMG;case"Fire DMG Boost":return f.Stats.Fire_DMG;case"Ice DMG Boost":return f.Stats.Ice_DMG;case"Lightning DMG Boost":return f.Stats.Lightning_DMG;case"Wind DMG Boost":return f.Stats.Wind_DMG;case"Quantum DMG Boost":return f.Stats.Quantum_DMG;case"Imaginary DMG Boost":return f.Stats.Imaginary_DMG;default:return null}}function EI(e){switch(e){case f.Stats.HP_P:return"HPAddedRatio";case f.Stats.ATK_P:return"AttackAddedRatio";case f.Stats.DEF_P:return"DefenceAddedRatio";case f.Stats.HP:return"HPDelta";case f.Stats.ATK:return"AttackDelta";case f.Stats.DEF:return"DefenceDelta";case f.Stats.SPD:return"SpeedDelta";case f.Stats.CD:return"CriticalDamageBase";case f.Stats.CR:return"CriticalChanceBase";case f.Stats.EHR:return"StatusProbabilityBase";case f.Stats.RES:return"StatusResistanceBase";case f.Stats.BE:return"BreakDamageAddedRatioBase";case f.Stats.ERR:return"SPRatioBase";case f.Stats.OHB:return"HealRatioBase";case f.Stats.Physical_DMG:return"PhysicalAddedRatio";case f.Stats.Fire_DMG:return"FireAddedRatio";case f.Stats.Ice_DMG:return"IceAddedRatio";case f.Stats.Lightning_DMG:return"ThunderAddedRatio";case f.Stats.Wind_DMG:return"WindAddedRatio";case f.Stats.Quantum_DMG:return"QuantumAddedRatio";case f.Stats.Imaginary_DMG:return"ImaginaryAddedRatio";default:return null}}function TI(e){switch(e){case f.Parts.Head:return 1;case f.Parts.Hands:return 2;case f.Parts.Body:return 3;case f.Parts.Feet:return 4;case f.Parts.PlanarSphere:return 5;case f.Parts.LinkRope:return 6;default:return null}}const mc={name:"HSR-Scanner",author:"Kel-z",homepage:"https://github.com/kel-z/HSR-Scanner",releases:"https://github.com/kel-z/HSR-Scanner/releases/latest",defaultFileName:"HSRScanData.json",sourceString:"HSR-Scanner",latestBuildVersion:"v1.2.0",latestOutputVersion:4,speedVerified:!1},fc={name:"Reliquary Archiver",author:"IceDynamix",homepage:"https://github.com/IceDynamix/reliquary-archiver",releases:"https://github.com/IceDynamix/reliquary-archiver/releases/latest",defaultFileName:"archiver_output.json",sourceString:"reliquary_archiver",latestBuildVersion:"v0.3.0",latestOutputVersion:4,speedVerified:!0},zm={name:"Yas Scanner",author:"wormtql, YCR160",homepage:"https://github.com/wormtql/yas",releases:"",defaultFileName:"hsr.json",sourceString:"yas-scanner",latestBuildVersion:"v0.0.0",latestOutputVersion:3,speedVerified:!1},RI=new dc(mc),BI=new dc(fc),II=new dc(zm),Xm={[mc.sourceString]:RI,[fc.sourceString]:BI,[zm.sourceString]:II},yI=Object.keys(Xm);function MI(){const{t:e}=ee("importSaveTab",{keyPrefix:"Import.Stage1.ReliquaryDesc"});return i.jsx(i.Fragment,{children:i.jsxs("li",{children:[i.jsx("b",{children:e("Title")})," (",i.jsx(Zt,{text:e("Link"),url:fc.releases,linkIcon:!0}),")",i.jsxs("ul",{children:[i.jsx("li",{children:i.jsx("b",{style:{color:"#82e192"},children:e("OnlineMsg",{version:"3.1"})})}),i.jsx("li",{children:e("l1")}),i.jsx("li",{children:e("l2")})]})]})})}const{Text:Yn}=_e;function GI(){const[e,a]=W.useState(0),[t,s]=W.useState([]),[o,r]=W.useState([]),[l,c]=W.useState(!1),[u,d]=W.useState(!1),[m,h]=W.useState(!1),{t:g}=ee(["importSaveTab","common"]);function C(L){return new Promise(()=>{const v=new FileReader;return v.readAsText(L),v.onload=()=>{const N=String(v.result);M(N)},!1})}function M(L){try{const v=JSON.parse(L);if(console.log("JSON",v),c(!0),!v)throw new Error(g("Import.ErrorMsg.InvalidJson"));if(v.data){const T=oI(v),y=T.relics;let p=T.characters;p=p.sort((R,I)=>I.characterLevel-R.characterLevel),p.map(R=>{R.characterLevel=80,R.lightConeLevel=80}),setTimeout(()=>{r(p),s(y),a(1),c(!1)},Ja);return}if(!yI.includes(v.source))throw new Error(g("Import.ErrorMsg.InvalidFile"));const U=Xm[v.source].parse(v);let F=U.characters;const P=U.relics;F=F.sort((T,y)=>y.characterLevel-T.characterLevel),F.map(T=>{T.characterLevel=80,T.lightConeLevel=80}),setTimeout(()=>{c(!1),s(P),r(F),a(1),h(!1)},Ja)}catch(v){let N=g("Import.ErrorMsg.Unknown");v instanceof Error&&(N=v.message),console.error(v),oe.error(g("Import.ErrorMsg.Fragment")+N,10),setTimeout(()=>{c(!1),s(void 0),r(void 0),a(1)},Ja)}}function x(){d(!0),setTimeout(()=>{V.mergeRelicsWithState(t),Pe.delayedSave(),setTimeout(()=>{d(!1),a(2)},100)},Ja)}function O(){d(!0),setTimeout(()=>{const L=m?o==null?void 0:o.filter(v=>V.getCharacterById(v.characterId)):o;V.mergeRelicsWithState(t,L),Pe.delayedSave(),setTimeout(()=>{d(!1),a(2)},100)},Ja)}function H(){return i.jsx(D,{style:{minHeight:100,marginBottom:30},gap:30,children:i.jsxs(D,{vertical:!0,gap:10,children:[i.jsx(Yn,{children:g("Import.Stage1.Header")}),i.jsx(Yn,{children:i.jsxs("ul",{children:[i.jsx(MI,{}),i.jsxs("li",{children:[g("Import.Stage1.KelzDesc.Title")," (",i.jsx(Zt,{text:g("Import.Stage1.KelzDesc.Link"),url:mc.releases,linkIcon:!0}),")",i.jsxs("ul",{children:[i.jsx("li",{children:g("Import.Stage1.KelzDesc.l1")}),i.jsx("li",{children:g("Import.Stage1.KelzDesc.l2")})]})]}),i.jsxs("li",{children:[g("Import.Stage1.ScorerDesc.Title")," (",i.jsx(Zt,{text:g("Import.Stage1.ScorerDesc.Link"),linkIcon:!0,onClick:()=>window.store.getState().setActiveKey(ge.SHOWCASE)}),")",i.jsxs("ul",{children:[i.jsx("li",{children:g("Import.Stage1.ScorerDesc.l1")}),i.jsx("li",{children:g("Import.Stage1.ScorerDesc.l2")})]})]}),i.jsxs("li",{children:[g("Import.Stage1.HoyolabDesc.Title")," (",i.jsx(Zt,{text:g("Import.Stage1.HoyolabDesc.Link"),url:"https://github.com/fribbels/hsr-optimizer/discussions/403",linkIcon:!0}),")",i.jsxs("ul",{children:[i.jsx("li",{children:g("Import.Stage1.HoyolabDesc.l1")}),i.jsx("li",{children:g("Import.Stage1.HoyolabDesc.l2")})]})]})]})}),i.jsx(D,{vertical:!0,align:"flex-start",children:i.jsxs(D,{gap:10,align:"center",children:[i.jsx(Uu,{accept:".json",name:"file",beforeUpload:C,children:i.jsx(se,{style:{width:ni},icon:i.jsx(El,{}),loading:l,onClick:()=>a(0),children:g("Import.Stage1.ButtonText")})}),g("Import.Stage1.Or"),i.jsx(qt,{style:{width:ni},className:"centered-placeholder",placeholder:g("Import.Stage1.Placeholder"),value:"",disabled:l,onChange:L=>{const v=L.target.value;try{const N=JSON.parse(v);M(v)}catch{}}})]})})]})})}function _(){return t?i.jsx(D,{style:{minHeight:250},children:i.jsxs(D,{vertical:!0,gap:10,style:{display:e>=1?"flex":"none"},children:[i.jsx(Yn,{children:g("Import.Stage2.FileInfo",{relicCount:t.length??0,characterCount:(o==null?void 0:o.length)??0})}),i.jsx(Yn,{children:g("Import.Stage2.RelicsImport.Label",{relicCount:t.length??0})}),i.jsx(se,{style:{width:ni},type:"primary",onClick:x,loading:u,children:g("Import.Stage2.RelicsImport.ButtonText",{relicCount:t.length??0})}),i.jsx(Ut,{children:i.jsx(Yn,{style:{fontSize:12},children:g("Import.Stage2.Or")})}),i.jsx(Yn,{children:g("Import.Stage2.CharactersImport.Label",{relicCount:t.length??0,characterCount:(o==null?void 0:o.length)??0})}),i.jsx(jf,{checked:m,disabled:u,onChange:L=>h(L.target.checked),children:g("Import.Stage2.CharactersImport.OnlyImportExisting")}),i.jsx(Kn,{title:g("Import.Stage2.CharactersImport.WarningTitle"),description:g("Import.Stage2.CharactersImport.WarningDescription"),onConfirm:O,placement:"bottom",okText:g("common:Yes"),cancelText:g("common:Cancel"),children:i.jsx(se,{style:{width:ni},type:"primary",loading:u,children:g("Import.Stage2.CharactersImport.ButtonText",{relicCount:t.length??0,characterCount:(o==null?void 0:o.length)??0})})})]})}):i.jsx(D,{style:{minHeight:100},children:i.jsx(D,{vertical:!0,gap:10,style:{display:e>=1?"flex":"none"},children:g("Import.Stage2.NoRelics")})})}function A(){return i.jsx(D,{style:{minHeight:100},children:i.jsx(D,{vertical:!0,gap:10,style:{display:e>=2?"flex":"none"},children:i.jsx(Yn,{children:g("Import.Stage3.SuccessMessage")})})})}return i.jsx(D,{gap:5,children:i.jsx(Do,{direction:"vertical",current:e,items:[{title:"",description:H()},{title:"",description:_()},{title:"",description:A()}]})})}const{Text:PI}=_e,_I=250,AI=async(e,a)=>{if("showSaveFilePicker"in window&&(()=>{try{return window.self===window.top}catch{return!1}})())try{const o=await(await window.showSaveFilePicker({suggestedName:a,types:[{description:"JSON",accept:{"text/json":[".json"]}}]})).createWritable();await o.write(e),await o.close()}catch(s){b.consoleWarnWrapper(s)}else{const s=URL.createObjectURL(e),o=document.createElement("a");o.href=s,o.download=a,o.style.display="none",document.body.append(o),o.click(),setTimeout(()=>{URL.revokeObjectURL(s),o.remove()},1e3)}};function xI(){const{t:e}=ee("importSaveTab",{keyPrefix:"SaveData"});async function a(){try{const t=Pe.save(),s=new Blob([t],{type:"text/json;charset=utf-8"});await AI(s,"fribbels-optimizer-save.json"),oe.success(e("SuccessMessage"))}catch(t){console.warn(t)}}return i.jsxs(D,{vertical:!0,gap:5,children:[i.jsx(PI,{children:e("Label")}),i.jsx(se,{type:"primary",onClick:a,icon:i.jsx(Tl,{}),style:{width:_I},children:e("ButtonText")})]})}function LI(){const e="large",{t:a}=ee("importSaveTab",{keyPrefix:"TabLabels"});return i.jsx("div",{children:i.jsx(D,{vertical:!0,gap:5,style:{marginLeft:20,width:1200},children:i.jsx(Wf,{defaultActiveKey:"1",size:e,style:{marginBottom:32},items:[{label:a("Import"),key:"Import",children:i.jsx(GI,{})},{label:a("Load"),key:"Load",children:i.jsx(sI,{})},{label:a("Save"),key:"Save",children:i.jsx(xI,{})},{label:a("Clear"),key:"Clear",children:i.jsx(iI,{})}]})})})}const wn={},ou=40;function OI(){return window.store(a=>a.activeKey)!=ge.METADATA_TEST?i.jsx(i.Fragment,{}):i.jsxs(D,{vertical:!0,style:{width:3e3,height:"fit-content"},children:[i.jsx("h1",{style:{marginLeft:20},children:"Metadata viewer"}),i.jsx(jo,{items:[{key:"1",label:"Simulation sets",children:i.jsx(wI,{})},{key:"2",label:"Conditional sets presets",children:i.jsx(FI,{})},{key:"3",label:"Substat weight dashboard",children:i.jsx(vI,{})}]})]})}function vI(){const e=Nn.relics.slice().reverse(),a=Object.values(V.getMetadata().characters);for(let t=0;t<e.length;t++)wn[e[t].name]=t;return i.jsxs(D,{vertical:!0,gap:10,children:[i.jsx(St,{grid:yn(a.filter(t=>t.path=="Destruction"))}),i.jsx(St,{grid:yn(a.filter(t=>t.path=="Hunt"))}),i.jsx(St,{grid:yn(a.filter(t=>t.path=="Erudition"))}),i.jsx(St,{grid:yn(a.filter(t=>t.path=="Nihility"))}),i.jsx(St,{grid:yn(a.filter(t=>t.path=="Remembrance"))}),i.jsx(St,{grid:yn(a.filter(t=>t.path=="Preservation"))}),i.jsx(St,{grid:yn(a.filter(t=>t.path=="Harmony"))}),i.jsx(St,{grid:yn(a.filter(t=>t.path=="Abundance"))})]})}function yn(e,a){const t=[n.ATK,n.ATK_P,n.DEF,n.DEF_P,n.HP,n.HP_P,n.SPD,n.CR,n.CD,n.EHR,n.RES,n.BE,n.ERR,n.OHB,n.Physical_DMG,n.Fire_DMG,n.Ice_DMG,n.Lightning_DMG,n.Wind_DMG,n.Quantum_DMG,n.Imaginary_DMG],s=t.map(r=>Q.getStatIcon(r));s.unshift(Q.getBlank());const o=[[]];for(let r=0;r<t.length+1;r++)o[0][r]=i.jsx(fn,{src:s[r]});for(let r=0;r<e.length;r++){const l=e[r],c=[];c.push(i.jsx(fn,{src:Q.getCharacterAvatarById(l.id)}));for(const u of Object.values(l.scoringMetadata.stats))c.push(i.jsx("div",{children:u||""}));o.push(c)}return o}const HI={fnAshblazingSet:G.TheAshblazingGrandDuke,fnPioneerSet:G.PioneerDiverOfDeadWaters,fnSacerdosSet:G.SacerdosRelivedOrdeal,PRISONER_SET:G.PrisonerInDeepConfinement,WASTELANDER_SET:G.WastelanderOfBanditryDesert,VALOROUS_SET:G.TheWindSoaringValorous,BANANA_SET:G.TheWondrousBananAmusementPark};function FI(){const e=Nn.relics.slice().reverse(),a=Object.values(V.getMetadata().characters);for(let t=0;t<e.length;t++)wn[e[t].name]=t;return i.jsxs(D,{vertical:!0,gap:10,children:[i.jsx(St,{grid:Mn(a.filter(t=>t.path=="Destruction"),e)}),i.jsx(St,{grid:Mn(a.filter(t=>t.path=="Hunt"),e)}),i.jsx(St,{grid:Mn(a.filter(t=>t.path=="Erudition"),e)}),i.jsx(St,{grid:Mn(a.filter(t=>t.path=="Nihility"),e)}),i.jsx(St,{grid:Mn(a.filter(t=>t.path=="Remembrance"),e)}),i.jsx(St,{grid:Mn(a.filter(t=>t.path=="Preservation"),e)}),i.jsx(St,{grid:Mn(a.filter(t=>t.path=="Harmony"),e)}),i.jsx(St,{grid:Mn(a.filter(t=>t.path=="Abundance"),e)})]})}function Mn(e,a){const t=a.map(o=>Q.getSetImage(o.name));t.unshift(Q.getBlank());const s=[[]];for(let o=0;o<a.length+1;o++)s[0][o]=i.jsx(fn,{src:t[o]});for(let o=0;o<e.length;o++){const r=e[o],l=[];l.push(i.jsx(fn,{src:Q.getCharacterAvatarById(r.id)}));for(const c of r.scoringMetadata.presets){const u=HI[c.name],d=wn[u];l[d+1]=i.jsx("div",{children:c.value===!0?"⚪":c.value})}s.push(l)}return s}function wI(){const e=Nn.relics.slice().reverse(),t=Object.values(V.getMetadata().characters).filter(s=>s.scoringMetadata.simulation);for(let s=0;s<e.length;s++)wn[e[s].name]=s;return i.jsxs(D,{vertical:!0,gap:50,children:[i.jsx(St,{grid:Gn(t.filter(s=>s.path=="Destruction"),e)}),i.jsx(St,{grid:Gn(t.filter(s=>s.path=="Hunt"),e)}),i.jsx(St,{grid:Gn(t.filter(s=>s.path=="Erudition"),e)}),i.jsx(St,{grid:Gn(t.filter(s=>s.path=="Nihility"),e)}),i.jsx(St,{grid:Gn(t.filter(s=>s.path=="Remembrance"),e)}),i.jsx(St,{grid:Gn(t.filter(s=>s.path=="Preservation"),e)}),i.jsx(St,{grid:Gn(t.filter(s=>s.path=="Harmony"),e)}),i.jsx(St,{grid:Gn(t.filter(s=>s.path=="Abundance"),e)})]})}function Gn(e,a){const t=a.map(o=>Q.getSetImage(o.name));t.unshift(Q.getBlank());const s=[[]];for(let o=0;o<a.length+1;o++)s[0][o]=i.jsx(fn,{src:t[o]});for(let o=0;o<e.length;o++){const r=e[o],l=[];l.push(i.jsx(fn,{src:Q.getCharacterAvatarById(r.id)}));for(const c of r.scoringMetadata.simulation.relicSets)if(c.length==2){const u=wn[c[0]];l[u+1]=i.jsx(fn,{src:Q.getSetImage(c[0])})}else for(const u of c){const d=wn[u];l[d+1]=i.jsx(fn,{src:Q.getSetImage(u)})}for(const c of r.scoringMetadata.simulation.ornamentSets){const u=wn[c];l[u+1]=i.jsx(fn,{src:Q.getSetImage(c)})}s.push(l)}return s}function fn(e){return i.jsx("img",{src:e.src,style:{width:40}})}function St(e){const[a,t]=W.useState(null);for(const s of e.grid)for(let o=0;o<Object.values(wn).length+1;o++)s[o]||(s[o]=null);return i.jsx("table",{style:{borderCollapse:"collapse",width:"fit-content",lineHeight:"0px"},children:i.jsx("tbody",{children:e.grid.map((s,o)=>i.jsx("tr",{onMouseEnter:r=>r.currentTarget.style.backgroundColor="rgba(255,255,255,0.11)",onMouseLeave:r=>r.currentTarget.style.backgroundColor="",children:s.map((r,l)=>i.jsx("td",{style:{height:ou,width:ou,border:"1px solid #464d6bc4",padding:0,textAlign:"center",backgroundColor:a===l?"rgba(255,255,255,0.11)":""},onMouseEnter:()=>t(l),onMouseLeave:()=>t(null),children:i.jsx("div",{children:r||""})},`${o}-${l}`))},o))})})}function kI(e){const{relicSetIndex:a,ornamentSetIndex:t}=e.newRowData,s=e.request,o=ss(s),r=Xd(a),l=Yd(t),c=Jl(e.newRelics,r[0],r[1],l),u=[];for(const d of fa){const m=b.clone(c);m.stats[d]=(m.stats[d]??0)+1;const h=$a(s,o,[{request:m,simType:Dn.SubstatRolls,key:d}])[0];u.push({stat:d,simRequest:m,simResult:h})}return u}function KI(e,a,t){const s=b.clone(de.calculateRelicsFromId(e.id,t)),o=b.clone(de.calculateRelicsFromId(a.id,t)),r=b.clone(t);ct.condenseSingleRelicByPartSubstatsForOptimizer(s),ct.condenseSingleRelicByPartSubstatsForOptimizer(o),r.trace=!0;const l=mi(r,s,null,new bn(!0),new Wa(!0)),c=mi(r,o,null,new bn(!0),new Wa(!0)),u=Im(c,r),d=V.getMetadata().characters[r.characterId],m=Di[d.element];return{oldRowData:e,newRowData:a,oldRelics:s,newRelics:o,request:r,oldX:l,newX:c,buffGroups:u,elementalDmgValue:m}}function NI(){var a,t,s;const e=((s=(t=(a=window.optimizerGrid)==null?void 0:a.current)==null?void 0:t.api)==null?void 0:s.getGridOption("pinnedTopRowData"))??[];return e&&e.length?e[0]:null}function ru(e,a){return(a==null?void 0:a.characterId)!=e}function UI(){return Ql[window.store.getState().optimizationId]}function jI(e){const{t:a}=ee("optimizerTab",{keyPrefix:"ExpandedDataPanel.SubstatUpgrades"}),{t}=ee("common",{keyPrefix:"ShortSpacedStats"}),s=e.analysis;if(Object.values(s.newRelics).some(u=>u.set==-1))return i.jsx(i.Fragment,{});const o=kI(s),r=["COMBO_DMG","EHP","HEAL_VALUE","SHIELD_VALUE"],l=[];for(const u of r){let d=!1;const m={key:u,upgrades:[]};for(const h of o){const g=s.newX[u].get(),M=h.simResult.tracedX[u].get()-g;if(M>1){const x=M/g;m.upgrades.push({key:h.stat,value:M,percent:x}),d=!0}}d&&l.push(m)}const c=[];for(const u of l){u.upgrades.sort((m,h)=>h.value-m.value);const d=[{title:a("ColumnHeaders.Substat"),dataIndex:"key",align:"center",width:100,render:m=>i.jsxs(D,{children:[i.jsx("img",{src:Q.getStatIcon(m),style:{width:qe,height:qe,marginLeft:3,marginRight:3}}),t(m)]})},{title:a(`ColumnHeaders.${u.key}_P`),dataIndex:"percent",align:"center",width:110,render:m=>i.jsx(i.Fragment,{children:m==0?"":`${si(J.truncate100ths(m*100))}%`})},{title:a(`ColumnHeaders.${u.key}`),dataIndex:"value",align:"center",width:110,render:m=>i.jsx(i.Fragment,{children:m==0?"":`${Ot(m)}`})}];c.push(i.jsx(pi,{className:"remove-table-bottom-border",columns:d,dataSource:u.upgrades,pagination:!1,size:"small",style:{flex:"1 1 calc(30% - 10px)",border:"1px solid #354b7d",boxShadow:Vs,borderRadius:5,overflow:"hidden"}},u.key))}return i.jsx(D,{align:"start",gap:10,justify:"space-between",wrap:!0,style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"10px"},children:c})}function WI(){const e=window.store(r=>r.optimizerSelectedRowData),a=window.store(r=>r.optimizerTabFocusCharacter);if(q.useWatch(["characterId"],window.optimizerForm),q.useWatch(["lightCone"],window.optimizerForm),window.store.getState().activeKey!=ge.OPTIMIZER)return i.jsx(i.Fragment,{});let t=UI()??de.getForm();const s=NI();if(ru(a,t)&&(t=de.getForm(),ru(a,t)))return i.jsx(i.Fragment,{});if(e==null||s==null||t==null||V.getCharacterById(t.characterId)==null)return i.jsx(i.Fragment,{});if(e.statSim)return i.jsx(i.Fragment,{});const o=KI(s,e,t);return console.log("Optimizer result",o),i.jsx(VI,{analysis:o})}function VI(e){const a=oc(e,50),t=W.useMemo(()=>a?i.jsx(ZI,{analysis:a.analysis}):null,[a]);return a?t:null}function ZI(e){const{analysis:a}=e;return i.jsx(am,{children:i.jsx(Ms,{id:ka.analysis,children:i.jsxs(D,{justify:"space-between",style:{width:"100%",paddingTop:4},gap:10,children:[i.jsxs(D,{vertical:!0,gap:10,children:[i.jsx(rR,{analysis:a}),i.jsx(tR,{analysis:a}),i.jsx(jI,{analysis:a})]}),i.jsx(ym,{buffGroups:a.buffGroups,singleColumn:!0})]})})})}function zI(){const e=window.store(L=>L.optimizerBuild),[a,t]=W.useState(),[s,o]=W.useState(!1);if(window.store.getState().activeKey!=ge.OPTIMIZER)return i.jsx(i.Fragment,{});function r(L){const v=ac.onEditOk(a,L);t(v)}const l=V.getRelicsById(),c=de.getForm().characterId,u=e!=null&&e.Head?l[e.Head]:void 0,d=e!=null&&e.Hands?l[e.Hands]:void 0,m=e!=null&&e.Body?l[e.Body]:void 0,h=e!=null&&e.Feet?l[e.Feet]:void 0,g=e!=null&&e.PlanarSphere?l[e.PlanarSphere]:void 0,C=e!=null&&e.LinkRope?l[e.LinkRope]:void 0,M=u?Dt.scoreCurrentRelic(u,c):void 0,x=d?Dt.scoreCurrentRelic(d,c):void 0,O=m?Dt.scoreCurrentRelic(m,c):void 0,H=h?Dt.scoreCurrentRelic(h,c):void 0,_=g?Dt.scoreCurrentRelic(g,c):void 0,A=C?Dt.scoreCurrentRelic(C,c):void 0;return i.jsxs("div",{children:[i.jsxs(D,{gap:5,id:"optimizerBuildPreviewContainer",justify:"space-between",style:{paddingLeft:1,paddingRight:1},children:[i.jsx(ua,{setEditModalOpen:o,setSelectedRelic:t,relic:u,score:M}),i.jsx(ua,{setEditModalOpen:o,setSelectedRelic:t,relic:d,score:x}),i.jsx(ua,{setEditModalOpen:o,setSelectedRelic:t,relic:m,score:O}),i.jsx(ua,{setEditModalOpen:o,setSelectedRelic:t,relic:h,score:H}),i.jsx(ua,{setEditModalOpen:o,setSelectedRelic:t,relic:g,score:_}),i.jsx(ua,{setEditModalOpen:o,setSelectedRelic:t,relic:C,score:A})]}),i.jsx(Fs,{selectedRelic:a,type:"edit",onOk:r,setOpen:o,open:s})]})}const{useToken:Ym}=Xt,{useBreakpoint:XI}=Vf,{Text:Ho}=_e;function YI(e){return[{label:i.jsx("div",{style:{width:"100%",fontWeight:e==Ji?"bold":""},children:Y.t("optimizerTab:Sidebar.GPUOptions.Experimental")}),key:Ji},{label:i.jsx("div",{style:{width:"100%",fontWeight:e==Yi?"bold":""},children:Y.t("optimizerTab:Sidebar.GPUOptions.Stable")}),key:Yi},{label:i.jsx("div",{style:{width:"100%",fontWeight:e==wa?"bold":""},children:Y.t("optimizerTab:Sidebar.GPUOptions.CPU")}),key:wa}]}function on(e){const a=e.total?`${Ea(e.right)} / ${Ea(e.total)} - (${Ea(Math.ceil(e.right/e.total*100))}%)`:`${Ea(e.right)}`;return i.jsxs(D,{justify:"space-between",children:[i.jsx(Ho,{style:{lineHeight:"24px"},children:e.left}),i.jsx(Ut,{style:{margin:"auto 10px",flexGrow:1,width:"unset",minWidth:"unset"},dashed:!0}),i.jsx(Ho,{style:{lineHeight:"24px"},children:a})]})}const Ps=5;function JI(){const{lg:e,xl:a,xxl:t}=XI(),s=V.getState().settings[Je.PermutationsSidebarBehavior.name]==Je.PermutationsSidebarBehavior.NoShow,o=V.getState().settings[Je.PermutationsSidebarBehavior.name]==Je.PermutationsSidebarBehavior.ShowXL,r=V.getState().settings[Je.PermutationsSidebarBehavior.name]==Je.PermutationsSidebarBehavior.ShowXXL,l=s||!(e&&o&&!a||e&&r&&!t);return i.jsx(ay,{isFullSize:l})}function lu(){const{t:e}=ee("optimizerTab",{keyPrefix:"Sidebar.GPUOptions"}),a=window.store(t=>t.savedSession[$e.computeEngine]);return i.jsx(ws,{menu:{items:YI(a),onClick:t=>{t.key==wa?(window.store.getState().setSavedSessionKey($e.computeEngine,wa),oe.success(e("EngineSwitchSuccessMsg.CPU"))):Ed(!0).then(s=>{s&&(window.store.getState().setSavedSessionKey($e.computeEngine,t.key),oe.success(t.key==Ji?e("EngineSwitchSuccessMsg.Experimental"):e("EngineSwitchSuccessMsg.Stable")))})}},className:"custom-dropdown-button",trigger:["click"],children:i.jsx(se,{style:{padding:3},children:i.jsxs(D,{justify:"space-around",align:"center",style:{width:"100%"},children:[i.jsx("div",{style:{width:1}}),i.jsx(Ho,{children:e(`Display.${a}`)}),i.jsx(Uo,{})]})})})}function QI(){const e=$l(),a=e.getGridOption("pinnedTopRowData"),t=e.getSelectedNodes();if(!t||t.length==0)oe.warning(Y.t("optimizerTab:Sidebar.Pinning.Messages.NoneSelected"));else if(t[0].data.statSim)oe.warning(Y.t("optimizerTab:Sidebar.Pinning.Messages.SimSelected"));else if(a.find(s=>String(s.id)==String(t[0].data.id)))oe.warning(Y.t("optimizerTab:Sidebar.Pinning.Messages.AlreadyPinned"));else{const s=t[0].data;s&&(a.push(s),e.updateGridOptions({pinnedTopRowData:a}))}}function $I(){const e=$l(),a=e==null?void 0:e.getGridOption("pinnedTopRowData");a!=null&&a.length&&e.updateGridOptions({pinnedTopRowData:[a[0]]})}function qI(){console.log("Filter clicked"),de.applyRowFilters()}function ey(e,a,t,s,o,r){if(!e)return Y.t("optimizerTab:Sidebar.ProgressText.Progress");let l=Date.now();a&&(l=a);const c=r==wa?s:Math.max(s,65536*512),u=l-e;if(!a&&u<5e3&&s<5e6||!s)return Y.t("optimizerTab:Sidebar.ProgressText.CalculatingETA");const d=u/s*(t-s),m=c/(u/1e3);return o?Y.t("optimizerTab:Sidebar.ProgressText.TimeRemaining",{rate:Ea(Math.floor(m)),timeRemaining:J.msToReadable(d)}):Y.t("optimizerTab:Sidebar.ProgressText.Finished",{rate:Ea(Math.floor(m))})}function ty(e){const{t:a}=ee("modals",{keyPrefix:"ManyPerms"});return i.jsx(Vt,{title:a("Title"),open:e.manyPermsModalOpen,width:900,destroyOnClose:!0,centered:!0,onOk:()=>e.setManyPermsModalOpen(!1),onCancel:()=>e.setManyPermsModalOpen(!1),footer:null,children:i.jsxs(D,{justify:"space-between",align:"center",style:{height:45,marginTop:30,marginBottom:15},gap:16,children:[i.jsx(Ho,{children:a("Text")}),i.jsx(se,{onClick:()=>e.setManyPermsModalOpen(!1),style:{width:250},type:"primary",children:a("Cancel")}),i.jsx(se,{onClick:()=>{e.setManyPermsModalOpen(!1),e.startSearch()},style:{width:250},type:"primary",children:a("Proceed")})]})})}function ay(e){const{token:a}=Ym(),t="rgba(0, 0, 0, 0.25) 0px 0.0625em 0.0625em, rgba(0, 0, 0, 0.25) 0px 0.125em 0.5em, rgba(255, 255, 255, 0.15) 0px 0px 0px 1px inset";return i.jsx(D,{vertical:!0,style:{overflow:"clip"},children:i.jsx(D,{justify:e.isFullSize?"center":"space-evenly",style:e.isFullSize?{position:"sticky",top:"25.6%",transform:"translateY(-50%)",paddingLeft:10,height:150}:{height:121,overflow:"clip",position:"fixed",width:"100%",bottom:0,left:0,backgroundColor:"rgb(29 42 71)",boxShadow:t,borderRadius:5,padding:Vi,zIndex:3},children:i.jsx(D,{style:e.isFullSize?{borderRadius:5,backgroundColor:a.colorBgContainer,padding:Vi,height:"fit-content",width:233,boxShadow:t,gap:Vi}:void 0,children:i.jsxs(D,{vertical:e.isFullSize,gap:e.isFullSize?5:20,children:[i.jsx(ny,{isFullSize:e.isFullSize}),i.jsx(sy,{isFullSize:e.isFullSize}),i.jsx(iy,{isFullSize:e.isFullSize})]})})})})}function ny(e){const a=window.store(c=>c.permutationDetails),t=window.store(c=>c.permutations),s=window.store(c=>c.permutationsSearched),o=window.store(c=>c.permutationsResults),{t:r}=ee("optimizerTab",{keyPrefix:"Sidebar"}),{t:l}=ee("common",{keyPrefix:"ReadableParts"});return i.jsxs(D,{vertical:!0,gap:e.isFullSize?10:5,style:{minWidth:211},children:[i.jsxs(D,{justify:"space-between",align:"center",children:[i.jsx(le,{children:r("Permutations")}),i.jsx(_t,{type:Rt.optimizationDetails()})]}),e.isFullSize&&i.jsxs(D,{vertical:!0,children:[i.jsx(on,{left:l("Head"),right:a.Head,total:a.HeadTotal}),i.jsx(on,{left:l("Hands"),right:a.Hands,total:a.HandsTotal}),i.jsx(on,{left:l("Body"),right:a.Body,total:a.BodyTotal}),i.jsx(on,{left:l("Feet"),right:a.Feet,total:a.FeetTotal}),i.jsx(on,{left:l("PlanarSphere"),right:a.PlanarSphere,total:a.PlanarSphereTotal}),i.jsx(on,{left:l("LinkRope"),right:a.LinkRope,total:a.LinkRopeTotal})]}),i.jsxs(D,{vertical:!0,children:[i.jsx(on,{left:r("Perms"),right:t}),i.jsx(on,{left:r("Searched"),right:s}),i.jsx(on,{left:r("Results"),right:o})]}),e.isFullSize&&i.jsx(Jm,{})]})}function Jm(){const e=window.store(c=>c.permutations),a=window.store(c=>c.permutationsSearched),t=window.store(c=>c.optimizerStartTime),s=window.store(c=>c.optimizerEndTime),o=window.store(c=>c.optimizerRunningEngine),r=window.store(c=>c.optimizationInProgress),{token:l}=Ym();return i.jsxs(D,{vertical:!0,children:[i.jsx(le,{children:ey(t,s,e,a,r,o)}),i.jsx(Zf,{strokeColor:l.colorPrimary,steps:17,size:[8,5],percent:Math.floor(a/e*100)})]})}function iy(e){const{t:a}=ee("optimizerTab",{keyPrefix:"Sidebar.ResultsGroup"});return i.jsxs(D,{vertical:!0,gap:5,children:[i.jsxs(D,{justify:"space-between",align:"center",children:[i.jsx(le,{children:a("Header")}),i.jsx(_t,{type:Rt.actions()})]}),i.jsxs(D,{gap:e.isFullSize?Ps:8,justify:"space-around",children:[i.jsx(se,{type:"primary",onClick:de.equipClicked,style:{width:"100px"},children:a("Equip")}),i.jsx(se,{onClick:qI,style:{width:"100px"},children:a("Filter")})]}),i.jsxs(D,{gap:e.isFullSize?Ps:8,justify:"space-around",children:[i.jsx(se,{style:{width:"100px"},onClick:QI,children:a("Pin")}),i.jsx(se,{style:{width:"100px"},onClick:$I,children:a("Clear")})]})]})}function sy(e){const{t:a}=ee("optimizerTab",{keyPrefix:"Sidebar"}),{t}=ee("common"),s=window.store(C=>C.permutations),o=window.store(C=>C.optimizationInProgress),r=window.store(C=>C.setOptimizationInProgress),l=window.store(C=>C.savedSession[$e.computeEngine]),[c,u]=W.useState(!1);function d(){console.log("Cancel clicked"),r(!1),yo.cancel(window.store.getState().optimizationId)}function m(){window.optimizerStartClicked()}function h(){s<1e9||l==Ji||l==Yi?m():u(!0)}function g(){console.log("Reset clicked"),de.resetFilters()}return i.jsxs(D,{vertical:e.isFullSize,gap:e.isFullSize?5:20,style:e.isFullSize?{display:"flex",flexDirection:"column"}:{display:"flex",flexDirection:"row-reverse"},children:[i.jsx(ty,{startSearch:m,manyPermsModalOpen:c,setManyPermsModalOpen:u}),i.jsxs(D,{vertical:!0,gap:5,children:[i.jsx(le,{children:a("ControlsGroup.Header")}),i.jsxs(D,{gap:Ps,style:{marginBottom:2},vertical:!0,children:[i.jsx(D,{gap:Ps,children:i.jsx(se,{icon:i.jsx(ju,{}),type:"primary",loading:o,onClick:h,style:{flex:1,minWidth:211},children:a("ControlsGroup.Start")})}),e.isFullSize&&i.jsx(lu,{}),i.jsxs(D,{gap:Ps,children:[i.jsx(se,{onClick:d,style:{flex:1},children:t("Cancel")}),i.jsx(Kn,{title:a("ControlsGroup.ResetConfirm.Title"),description:a("ControlsGroup.ResetConfirm.Description"),onConfirm:g,okText:t("Yes"),cancelText:t("No"),children:i.jsx(se,{style:{flex:1},children:t("Reset")})})]})]})]}),i.jsxs(D,{vertical:!0,gap:5,style:{flex:1,minWidth:211},children:[i.jsxs(D,{justify:"space-between",align:"center",children:[i.jsx(le,{children:a("StatViewGroup.Header")}),i.jsx(_t,{type:Rt.statDisplay()})]}),i.jsx(oy,{}),i.jsx(ry,{isFullSize:e.isFullSize})]}),!e.isFullSize&&i.jsxs(D,{vertical:!0,gap:3,style:{flex:1,minWidth:211},children:[i.jsx(le,{children:a("ComputeEngine")}),i.jsx(lu,{}),i.jsx(Jm,{})]})]})}function oy(){const{t:e}=ee("optimizerTab",{keyPrefix:"Sidebar"}),a=window.store(s=>s.statDisplay),t=window.store(s=>s.setStatDisplay);return i.jsxs(nt.Group,{onChange:s=>{const{target:{value:o}}=s;t(o)},optionType:"button",buttonStyle:"solid",value:a,style:{width:"100%",display:"flex"},children:[i.jsx(nt,{style:{display:"flex",flex:1,justifyContent:"center",paddingInline:0},value:"combat",children:e("StatViewGroup.CombatStats")}),i.jsx(nt,{style:{display:"flex",flex:1,justifyContent:"center",paddingInline:0},value:"base",defaultChecked:!0,children:e("StatViewGroup.BasicStats")})]})}function ry(e){const{t:a}=ee("optimizerTab",{keyPrefix:"Sidebar.StatViewGroup"}),t=window.store(l=>l.memoDisplay),s=window.store(l=>l.setMemoDisplay),o=window.store(l=>l.optimizerTabFocusCharacter),r=Qm(o);return i.jsxs(nt.Group,{onChange:l=>{const{target:{value:c}}=l;s(c)},optionType:"button",buttonStyle:"solid",disabled:!r,value:r?t:"summoner",style:{width:"100%",display:r||!e.isFullSize?"flex":"none"},children:[i.jsx(nt,{style:{display:"flex",flex:1,justifyContent:"center",paddingInline:0},value:"summoner",children:a("SummonerStats")}),i.jsx(nt,{style:{display:"flex",flex:1,justifyContent:"center",paddingInline:0},value:"memo",defaultChecked:!0,children:a("MemospriteStats")})]})}function Qm(e){return e?V.getMetadata().characters[e].path=="Remembrance":!1}const{useToken:ly}=Xt,cy=[k.OHB,k.HEAL,k.SHIELD,k.MEMO_SKILL,k.MEMO_TALENT],Ss={WIDTH:1227,HEIGHT:600,MIN_HEIGHT:300};function uy(){console.log("======================================================================= RENDER OptimizerGrid");const{token:e}=ly(),{t:a,i18n:t}=ee("optimizerTab"),s=W.useRef(),[o,r]=W.useState(!1),l=window.store(O=>O.optimizerTabFocusCharacter),c=W.useRef(t.resolvedLanguage);window.optimizerGrid=s;const u=W.useMemo(()=>de.getDataSource(),[]),d=window.store(O=>O.statDisplay),m=window.store(O=>O.memoDisplay),g=Qm(l)&&m==="memo",C=W.useMemo(()=>{let O=d==="combat"?g?cD(a):lD(a):g?rD(a):oD(a);if(l){const H=V.getMetadata().characters[l].scoringMetadata,_=new Set([...H.hiddenColumns??[],...cy]),A=new Set(H.addedColumns??[]),L=Array.from(_).filter(v=>!A.has(v)).map(v=>d==="combat"?g?v.memoCombatGridColumn:v.combatGridColumn:g?v.memoBasicGridColumn:v.basicGridColumn);O=O.filter(v=>!L.includes(v.field))}return O},[l,d,m,a]);Xc.datasource=u;const M=W.useCallback(O=>uc(O,s,H=>de.cellClicked(H)),[]);W.useEffect(()=>{t.resolvedLanguage!==c.current&&(r(!0),c.current=t.resolvedLanguage,setTimeout(()=>r(!1),100))},[t.resolvedLanguage]);const x=W.useCallback(O=>({to:a("Grid.To"),pageSizeSelectorLabel:a("Grid.PageSelectorLabel"),of:a("Grid.Of"),page:a("Grid.Page")})[O.key]??O.defaultValue,[a]);return i.jsxs(D,{children:[o&&i.jsx("div",{style:{width:Ss.WIDTH,height:Ss.HEIGHT}}),!o&&i.jsx("div",{id:"optimizerGridContainer",className:"ag-theme-balham-dark",style:{width:Ss.WIDTH,minHeight:Ss.MIN_HEIGHT,height:Ss.HEIGHT,resize:"vertical",overflow:"hidden",boxShadow:Vs,...tc(e)},children:i.jsx(Rl,{animateRows:!1,columnDefs:C,defaultColDef:sD,gridOptions:Xc,headerHeight:24,onCellClicked:de.cellClicked,ref:s,paginationNumberFormatter:O=>Ln(O.value),getLocaleText:x,navigateToNextCell:M,rowSelection:"single"})})]})}function dy(){const e=window.store(a=>a.settings.ExpandedInfoPanelPosition);return console.log("======================================================================= RENDER OptimizerTab"),i.jsxs(D,{children:[i.jsxs(D,{vertical:!0,gap:10,style:{marginBottom:100},children:[i.jsx(uE,{}),i.jsx(uy,{}),i.jsxs(D,{vertical:!0,gap:10,style:{flexDirection:e==Je.ExpandedInfoPanelPosition.Below?"column":"column-reverse"},children:[i.jsx(zI,{}),i.jsx(WI,{})]})]}),i.jsx(Db,{}),i.jsx(Cb,{}),i.jsx(JI,{})]})}const my=(e,a)=>{const t=()=>{document.removeEventListener(e,a)};W.useEffect(()=>(document.addEventListener(e,a),()=>t()),[e,a])},{useToken:fy}=Xt,{Text:hy}=_e,Sy=34,py=34,gy=Q.getBlank();function by(e){const a=window.store(T=>T.setRelicTabFilters),t=window.store(T=>T.setRelicsTabFocusCharacter),[s,o]=W.useState(),{t:r,i18n:l}=ee(["relicsTab","common","gameData"]),c=W.useMemo(()=>vd(),[]);function u(T,y,p){function R(I){const B={[n.Physical_DMG]:"Physical",[n.Fire_DMG]:"Fire",[n.Ice_DMG]:"Ice",[n.Lightning_DMG]:"Lightning",[n.Wind_DMG]:"Wind",[n.Quantum_DMG]:"Quantum",[n.Imaginary_DMG]:"Imaginary"},j=B[I]?30:py,Z=Q.getElement(B[I]),K=Z!=gy?Z:y(I);return p?i.jsx(Cu,{title:l.exists(`common:Stats.${I}`)?r(`common:Stats.${I}`):r(`gameData:RelicSets.${pt[I]}.Name`),mouseEnterDelay:.2,children:i.jsx("img",{style:{width:j},src:K})}):i.jsx("img",{style:{width:j},src:K})}return T.map(I=>({key:I,display:R(I)}))}function d(T){return T.map(y=>({key:y[0],display:i.jsx(D,{style:{height:Sy},justify:"space-around",align:"center",children:i.jsx(hy,{style:{fontSize:18},children:y[1]})})}))}function m(T){return T.map(y=>({key:y,display:$.renderGrade({grade:y})}))}function h(T){return T.map(y=>({key:y,display:$.renderGrade({grade:-1,verified:y=="true"})}))}function g(T){return T.map(y=>({key:y,display:$.renderEquippedBy(y)}))}const C=m([2,3,4,5]),M=h(["true","false"]),x=u(Object.values(G).filter(T=>!zi[T]),T=>Q.getSetImage(T,f.Parts.PlanarSphere),!0),O=u(Object.values(f.Parts),T=>Q.getPart(T),!1),H=u(f.MainStats,T=>Q.getStatIcon(T,!0),!0),_=u(f.SubStats,T=>Q.getStatIcon(T,!0),!0),A=d([[0,"+0"],[3,"+3"],[6,"+6"],[9,"+9"],[12,"+12"],[15,"+15"]]),L=g(["true","false"]);window.refreshRelicsScore=()=>{setTimeout(()=>{v(s)},100)},my("refreshRelicsScore",window.refreshRelicsScore),W.useEffect(()=>{V.getState().settings[Je.RelicPotentialLoadBehavior.name]==Je.RelicPotentialLoadBehavior.ScoreAtStartup&&v(s)},[]);function v(T,y){var j,Z;const p=y?[y]:Object.values(V.getRelicsById());console.log("idChange",T),t(T),o(T);const R=c.map(K=>K.id),I=window.store.getState().excludedRelicPotentialCharacters,B=new Dt;for(const K of p){const X=T?B.getFutureRelicScore(K,T):{current:0,best:0,average:0};X.potentialSelected=T?B.scoreRelicPotential(K,T):{bestPct:0,averagePct:0,rerollAvgPct:0},X.potentialAllAll={bestPct:0,averagePct:0,rerollAvgPct:0},X.potentialAllCustom={bestPct:0,averagePct:0,rerollAvgPct:0},X.rerollAllAll={bestPct:0,averagePct:0,rerollAvgPct:0},X.rerollAllCustom={bestPct:0,averagePct:0,rerollAvgPct:0},X.rerollAvgSelected=Math.max(0,X.potentialSelected.rerollAvgPct);for(const te of R){const ae=B.scoreRelicPotential(K,te);X.potentialAllAll={bestPct:Math.max(ae.bestPct,X.potentialAllAll.bestPct),averagePct:Math.max(ae.averagePct,X.potentialAllAll.averagePct),rerollAvgPct:0},X.rerollAllAll={bestPct:0,averagePct:0,rerollAvgPct:Math.max(ae.rerollAvgPct,X.rerollAllAll.rerollAvgPct)},I.includes(te)||(X.potentialAllCustom={bestPct:Math.max(ae.bestPct,X.potentialAllCustom.bestPct),averagePct:Math.max(ae.averagePct,X.potentialAllCustom.averagePct),rerollAvgPct:0},X.rerollAllCustom={bestPct:0,averagePct:0,rerollAvgPct:Math.max(ae.rerollAvgPct,X.rerollAllCustom.rerollAvgPct)})}if(X.rerollAvgSelectedDelta=X.rerollAvgSelected==0?0:X.rerollAvgSelected-X.potentialSelected.averagePct,X.rerollAvgSelectedEquippedDelta=T?X.rerollAvgSelected:0,T){const te=V.getCharacterById(T).equipped[K.part];te&&(X.rerollAvgSelectedEquippedDelta-=B.scoreRelicPotential(V.getRelicById(te),T).averagePct)}K.weights=X}y||(V.setRelics(b.clone(p)),T&&((Z=(j=window.relicsGrid)==null?void 0:j.current)!=null&&Z.api)&&(window.relicsGrid.current.api.getColumnState().filter(X=>X.sort!==null)||window.relicsGrid.current.api.applyColumnState({state:[{colId:"weights.current",sort:"desc"}],defaultState:{sort:null}})),V.refreshRelics())}function N(){a({set:[],part:[],enhance:[],mainStats:[],subStats:[],grade:[],verified:[],equippedBy:[]})}function U(){const T=window.store.getState().relicsTabFocusCharacter;T&&window.store.getState().setScoringAlgorithmFocusCharacter(T),window.store.getState().setScoringModalOpen(!0)}function F(){v(s)}function P(T){v(s,T)}return window.rescoreSingleRelic=P,i.jsxs(D,{vertical:!0,gap:2,children:[i.jsxs(D,{gap:10,children:[i.jsxs(D,{vertical:!0,flex:1,children:[i.jsx(le,{children:r("RelicFilterBar.Part")}),i.jsx(Pn,{name:"part",tags:O,flexBasis:"15%"})]}),i.jsxs(D,{vertical:!0,style:{height:"100%"},flex:1,children:[i.jsx(le,{children:r("RelicFilterBar.Enhance")}),i.jsx(Pn,{name:"enhance",tags:A,flexBasis:"15%"})]}),i.jsxs(D,{vertical:!0,flex:.5,children:[i.jsx(le,{children:r("RelicFilterBar.Grade")}),i.jsx(Pn,{name:"grade",tags:C,flexBasis:"15%"})]}),i.jsxs(D,{vertical:!0,flex:.25,children:[i.jsx(le,{children:r("RelicFilterBar.Verified")}),i.jsx(Pn,{name:"verified",tags:M,flexBasis:"15%"})]}),i.jsxs(D,{vertical:!0,flex:.25,children:[i.jsx(le,{children:r("RelicFilterBar.Equipped")}),i.jsx(Pn,{name:"equippedBy",tags:L,flexBasis:"15%"})]}),i.jsxs(D,{vertical:!0,flex:.4,children:[i.jsx(le,{children:r("RelicFilterBar.Clear")}),i.jsx(se,{icon:i.jsx(zf,{}),onClick:N,style:{flexGrow:1,height:"100%"},children:r("RelicFilterBar.ClearButton")})]})]}),i.jsxs(D,{vertical:!0,children:[i.jsx(le,{children:r("RelicFilterBar.Set")}),i.jsx(Pn,{name:"set",tags:x,flexBasis:`${100/Object.values(gi).length}%`})]}),i.jsxs(D,{vertical:!0,children:[i.jsx(le,{children:r("RelicFilterBar.Mainstat")}),i.jsx(Pn,{name:"mainStats",tags:H})]}),i.jsxs(D,{vertical:!0,children:[i.jsx(le,{children:r("RelicFilterBar.Substat")}),i.jsx(Pn,{name:"subStats",tags:_})]}),i.jsxs(D,{gap:10,children:[i.jsxs(D,{vertical:!0,flex:.5,children:[i.jsx(le,{children:r("RelicFilterBar.RecommendationHeader")}),i.jsxs(D,{gap:10,children:[i.jsx(ts,{value:s,selectStyle:{flex:1},onChange:T=>{setTimeout(()=>v(T),20)},withIcon:!0}),i.jsx(se,{onClick:F,style:{flex:1,padding:"0px"},children:r("RelicFilterBar.ReapplyButton")}),i.jsx(se,{onClick:U,style:{flex:1,padding:"0px"},children:r("RelicFilterBar.ScoringButton")})]})]}),i.jsx(D,{vertical:!0,flex:.25,gap:10,children:i.jsxs(D,{vertical:!0,children:[i.jsxs(D,{justify:"space-between",align:"center",children:[i.jsx(le,{children:r("RelicFilterBar.Rating")}),i.jsx(_t,{type:Rt.valueColumns()})]}),i.jsx(D,{gap:10,children:i.jsx(ne,{mode:"multiple",allowClear:!0,value:e.valueColumns,onChange:e.setValueColumns,options:e.valueColumnOptions,maxTagCount:"responsive",style:{flex:1},listHeight:750,dropdownStyle:{width:"fit-content"}})})]})}),i.jsxs(D,{vertical:!0,flex:.25,children:[i.jsx(le,{children:r("RelicFilterBar.CustomCharsHeader")}),i.jsx(ts,{value:window.store.getState().excludedRelicPotentialCharacters,selectStyle:{flex:1},onChange:T=>{const y=Array.from(T||new Map).filter(p=>p[1]).map(p=>p[0]);window.store.getState().setExcludedRelicPotentialCharacters(y),Pe.delayedSave(),setTimeout(()=>F(),100)},multipleSelect:!0})]})]})]})}function Pn(e){const{token:a}=fy(),t=window.store(l=>l.relicTabFilters),s=window.store(l=>l.setRelicTabFilters),o=t[e.name],r=(l,c)=>{const u=c?[...o,l]:o.filter(m=>m!=l),d=b.clone(t);d[e.name]=u,console.log("Relic tab filters",e.name,d),s(d)};return i.jsx(D,{style:{flexWrap:"wrap",flexGrow:1,backgroundColor:a.colorBgContainer,boxShadow:`0px 0px 0px 1px ${a.colorBorder} inset`,borderRadius:6,overflow:"hidden"},children:e.tags.map(l=>i.jsx(Tu,{checked:o.includes(l.key),onChange:c=>r(l.key,c),style:{flex:1,flexBasis:e.flexBasis,boxShadow:`1px 1px 1px 0px ${a.colorBorder}`,backgroundColor:o.includes(l.key)?a.colorPrimary:"transparent"},children:i.jsx(D,{align:"center",justify:"space-around",style:{height:"100%"},children:l.display})},l.key))})}const{useToken:Dy}=Xt,Cy="PLOT_ALL",Ur="PLOT_CUSTOM",jr=1460;function $m(){const{token:e}=Dy();console.log("======================================================================= RENDER RelicsTab");const a=W.useRef();window.relicsGrid=a;const[t,s]=W.useState(V.getRelics());window.setRelicRows=s;const[o,r]=W.useState(),[l,c]=W.useState([]),[u,d]=W.useState(!1),[m,h]=W.useState(!1),[g,C]=W.useState(!1),[M,x]=W.useState(Ur),[O,H]=W.useState("buckets"),[_,A]=W.useState(!1),L=window.store(ie=>ie.relicTabFilters),v=window.store(ie=>ie.inventoryWidth),N=window.store(ie=>ie.setInventoryWidth),U=window.store(ie=>ie.rowLimit),F=window.store(ie=>ie.setRowLimit),{t:P,i18n:T}=ee(["relicsTab","common","gameData"]),y=W.useRef(T.resolvedLanguage),p=[{value:"buckets",label:P("Toolbar.InsightOptions.Buckets")},{value:"top10",label:P("Toolbar.InsightOptions.Top10")}],R=[{value:Cy,label:P("Toolbar.PlotOptions.PlotAll")},{value:Ur,label:P("Toolbar.PlotOptions.PlotCustom")}];W.useEffect(()=>{T.resolvedLanguage!==y.current&&(A(!0),setTimeout(()=>A(!1),100))},[T.resolvedLanguage]),W.useEffect(()=>{var Xe,ot;if(!((ot=(Xe=window.relicsGrid)==null?void 0:Xe.current)!=null&&ot.api))return;if(console.log("RelicTabFilters",L),Object.values(L).filter(Fe=>Fe.length>0).length==0){window.relicsGrid.current.api.setFilterModel(null);return}const ie={};ie.set={conditions:L.set.map(Fe=>({filterType:"text",type:"equals",filter:Fe})),operator:"OR"},ie.part={conditions:L.part.map(Fe=>({filterType:"text",type:"equals",filter:Fe})),operator:"OR"},ie.grade={conditions:L.grade.map(Fe=>({filterType:"number",type:"equals",filter:Fe})),operator:"OR"},ie.verified={conditions:[L.verified.includes("true")&&{filterType:"text",type:"true"},L.verified.includes("false")&&{filterType:"text",type:"false"}],operator:"OR"},ie.equippedBy={conditions:[L.equippedBy.includes("true")&&{filterType:"text",type:"notBlank"},L.equippedBy.includes("false")&&{filterType:"text",type:"blank"}],operator:"OR"},ie["main.stat"]={conditions:L.mainStats.map(Fe=>({filterType:"text",type:"equals",filter:Fe})),operator:"OR"};for(const Fe of L.subStats)ie[`augmentedStats.${Fe}`]={filterType:"number",type:"greaterThan",filter:0};ie.enhance={conditions:L.enhance.flatMap(Fe=>[{filterType:"number",type:"equals",filter:Fe},{filterType:"number",type:"equals",filter:Fe+1},{filterType:"number",type:"equals",filter:Fe+2}]),operator:"OR"},console.log("FilterModel",ie),window.relicsGrid.current.api.setFilterModel(ie)},[L]);const[I,B]=W.useState(0),[j,Z]=W.useState({set:void 0,part:void 0});W.useEffect(()=>{if(!o)return;const ie=Math.max(1,U)*Math.max(1,v),Xe=V.getRelics().filter(yt=>yt.ageIndex<=o.ageIndex),ot=Xe.filter(yt=>o.part==yt.part).length-1;if(ot<ie){B(ot),Z({set:void 0,part:o.part});return}const Fe=Xe.filter(yt=>o.part==yt.part&&o.set==yt.set).length-1;B(Fe),Z({set:o.set,part:o.part})},[o,v,U]);const K=W.useMemo(()=>[{label:P("RelicGrid.ValueColumns.SelectedCharacter.Label"),options:[{column:P("RelicGrid.ValueColumns.SelectedCharacter.ScoreCol.Header"),value:"weights.current",label:P("RelicGrid.ValueColumns.SelectedCharacter.ScoreCol.Label")},{column:P("RelicGrid.ValueColumns.SelectedCharacter.AvgPotCol.Header"),value:"weights.potentialSelected.averagePct",label:P("RelicGrid.ValueColumns.SelectedCharacter.AvgPotCol.Label"),percent:!0},{column:P("RelicGrid.ValueColumns.SelectedCharacter.MaxPotCol.Header"),value:"weights.potentialSelected.bestPct",label:P("RelicGrid.ValueColumns.SelectedCharacter.MaxPotCol.Label"),percent:!0},{column:P("RelicGrid.ValueColumns.SelectedCharacter.RerollAvg.Header"),value:"weights.rerollAvgSelected",label:P("RelicGrid.ValueColumns.SelectedCharacter.RerollAvg.Label"),percent:!0},{column:P("RelicGrid.ValueColumns.SelectedCharacter.RerollAvgDelta.Header"),value:"weights.rerollAvgSelectedDelta",label:P("RelicGrid.ValueColumns.SelectedCharacter.RerollAvgDelta.Label"),percent:!0},{column:P("RelicGrid.ValueColumns.SelectedCharacter.RerollAvgEquippedDelta.Header"),value:"weights.rerollAvgSelectedEquippedDelta",label:P("RelicGrid.ValueColumns.SelectedCharacter.RerollAvgEquippedDelta.Label"),percent:!0}]},{label:P("RelicGrid.ValueColumns.CustomCharacters.Label"),options:[{column:P("RelicGrid.ValueColumns.CustomCharacters.AvgPotCol.Header"),value:"weights.potentialAllCustom.averagePct",label:P("RelicGrid.ValueColumns.CustomCharacters.AvgPotCol.Label"),percent:!0},{column:P("RelicGrid.ValueColumns.CustomCharacters.MaxPotCol.Header"),value:"weights.potentialAllCustom.bestPct",label:P("RelicGrid.ValueColumns.CustomCharacters.MaxPotCol.Label"),percent:!0},{column:P("RelicGrid.ValueColumns.CustomCharacters.RerollAvg.Header"),value:"weights.rerollAllCustom.rerollAvgPct",label:P("RelicGrid.ValueColumns.CustomCharacters.RerollAvg.Label"),percent:!0}]},{label:P("RelicGrid.ValueColumns.AllCharacters.Label"),options:[{column:P("RelicGrid.ValueColumns.AllCharacters.AvgPotCol.Header"),value:"weights.potentialAllAll.averagePct",label:P("RelicGrid.ValueColumns.AllCharacters.AvgPotCol.Label"),percent:!0},{column:P("RelicGrid.ValueColumns.AllCharacters.MaxPotCol.Header"),value:"weights.potentialAllAll.bestPct",label:P("RelicGrid.ValueColumns.AllCharacters.MaxPotCol.Label"),percent:!0},{column:P("RelicGrid.ValueColumns.AllCharacters.RerollAvg.Header"),value:"weights.rerollAllAll.rerollAvgPct",label:P("RelicGrid.ValueColumns.AllCharacters.RerollAvg.Label"),percent:!0}]},{label:P("RelicGrid.ValueColumns.ComingSoon.Label"),options:[{column:P("RelicGrid.ValueColumns.ComingSoon.SetsPotential.Header"),disabled:!0,value:"weights.potentialAllSets",label:P("RelicGrid.ValueColumns.ComingSoon.SetsPotential.Label"),percent:!0}]}],[P]),X=W.useMemo(()=>K.flatMap(ie=>ie.options),[K]),[te,ae]=W.useState(["weights.current","weights.rerollAvgSelected","weights.rerollAvgSelectedDelta","weights.potentialSelected.averagePct","weights.potentialSelected.bestPct","weights.potentialAllCustom.averagePct","weights.potentialAllCustom.bestPct"]),Te=W.useMemo(()=>[{field:"verified",hide:!0,filter:"agTextColumnFilter",filterParams:{maxNumConditions:2}},{field:"equippedBy",headerName:P("RelicGrid.Headers.EquippedBy"),width:40,cellRenderer:$.characterIcon,filter:"agTextColumnFilter"},{field:"set",cellRenderer:$.anySet,width:40,headerName:P("RelicGrid.Headers.Set"),filter:"agTextColumnFilter"},{field:"grade",width:30,cellRenderer:$.renderGradeCell,headerName:"★",headerClass:"large-grid-column-header",filter:"agNumberColumnFilter"},{field:"enhance",width:30,headerName:"+",headerClass:"large-grid-column-header",filter:"agNumberColumnFilter"},{field:"part",valueFormatter:$.readablePart,width:55,headerName:P("RelicGrid.Headers.Part"),filter:"agTextColumnFilter"},{field:"main.stat",valueFormatter:$.readableStat,headerName:P("RelicGrid.Headers.MainStat"),width:78,filter:"agTextColumnFilter"},{field:"main.value",headerName:P("RelicGrid.Headers.MainValue"),width:50,valueFormatter:$.mainValueRenderer,filter:"agNumberColumnFilter"},{field:`augmentedStats.${f.Stats.HP_P}`,headerName:P("RelicGrid.Headers.HPP"),cellStyle:Be.getRelicGradient,valueFormatter:$.hideZeroesX100Tenths,filter:"agNumberColumnFilter"},{field:`augmentedStats.${f.Stats.ATK_P}`,headerName:P("RelicGrid.Headers.ATKP"),cellStyle:Be.getRelicGradient,valueFormatter:$.hideZeroesX100Tenths,filter:"agNumberColumnFilter"},{field:`augmentedStats.${f.Stats.DEF_P}`,headerName:P("RelicGrid.Headers.DEFP"),cellStyle:Be.getRelicGradient,valueFormatter:$.hideZeroesX100Tenths,filter:"agNumberColumnFilter"},{field:`augmentedStats.${f.Stats.HP}`,headerName:P("RelicGrid.Headers.HP"),cellStyle:Be.getRelicGradient,valueFormatter:$.hideZeroesFloor,filter:"agNumberColumnFilter"},{field:`augmentedStats.${f.Stats.ATK}`,headerName:P("RelicGrid.Headers.ATK"),cellStyle:Be.getRelicGradient,valueFormatter:$.hideZeroesFloor,filter:"agNumberColumnFilter"},{field:`augmentedStats.${f.Stats.DEF}`,headerName:P("RelicGrid.Headers.DEF"),cellStyle:Be.getRelicGradient,valueFormatter:$.hideZeroesFloor,filter:"agNumberColumnFilter"},{field:`augmentedStats.${f.Stats.SPD}`,headerName:P("RelicGrid.Headers.SPD"),cellStyle:Be.getRelicGradient,valueFormatter:$.hideZeroes10thsRelicTabSpd,filter:"agNumberColumnFilter"},{field:`augmentedStats.${f.Stats.CR}`,headerName:P("RelicGrid.Headers.CR"),cellStyle:Be.getRelicGradient,valueFormatter:$.hideZeroesX100Tenths,filter:"agNumberColumnFilter"},{field:`augmentedStats.${f.Stats.CD}`,headerName:P("RelicGrid.Headers.CD"),cellStyle:Be.getRelicGradient,valueFormatter:$.hideZeroesX100Tenths,filter:"agNumberColumnFilter"},{field:`augmentedStats.${f.Stats.EHR}`,headerName:P("RelicGrid.Headers.EHR"),cellStyle:Be.getRelicGradient,valueFormatter:$.hideZeroesX100Tenths,filter:"agNumberColumnFilter"},{field:`augmentedStats.${f.Stats.RES}`,headerName:P("RelicGrid.Headers.RES"),cellStyle:Be.getRelicGradient,valueFormatter:$.hideZeroesX100Tenths,filter:"agNumberColumnFilter"},{field:`augmentedStats.${f.Stats.BE}`,headerName:P("RelicGrid.Headers.BE"),cellStyle:Be.getRelicGradient,valueFormatter:$.hideZeroesX100Tenths,filter:"agNumberColumnFilter"},{field:"cv",valueGetter:Ey,headerName:P("RelicGrid.Headers.CV"),cellStyle:Be.getRelicGradient,valueFormatter:$.hideZeroesX100Tenths,filter:"agNumberColumnFilter"}].concat(te.map(ie=>{const Xe=X.findIndex(ot=>ot.value===ie);return[Xe,X[Xe]]}).sort((ie,Xe)=>ie[0]-Xe[0]).map(([ie,Xe])=>({field:Xe.value,headerName:Xe.column,cellStyle:Be.getRelicGradient,valueFormatter:Xe.percent?$.hideNaNAndFloorPercent:$.hideNaNAndFloor,filter:"agNumberColumnFilter",width:75}))),[X,te,P]),Ke=W.useMemo(()=>({rowHeight:33,suppressDragLeaveHidesColumns:!0,suppressScrollOnNewData:!0,suppressMultiSort:!0,getRowId:ie=>String(ie.data.id)}),[]),Se=W.useMemo(()=>({sortable:!0,width:46,headerClass:"relicsTableHeader",sortingOrder:["desc","asc"],filterParams:{maxNumConditions:200},wrapHeaderText:!0,autoHeaderHeight:!0,suppressHeaderMenuButton:!0}),[]),re=W.useCallback(ie=>{console.log("selectionChanged",ie),c(ie.api.getSelectedRows())},[]),be=W.useCallback(ie=>{console.log("rowClicked",ie),ie.type||a.current.api.getRowNode(ie.id).setSelected(!0,!0),r(ie.data)},[]),De=W.useCallback(ie=>{console.log("rowDblClicked",ie),r(ie.data),d(!0)},[]),Ne=W.useCallback(ie=>uc(ie,a,Xe=>be(Xe)),[]),st=W.useCallback(ie=>ie.key=="to"?P("RelicGrid.To"):ie.key=="of"?P("RelicGrid.Of"):ie.key,[P]);function Wt(ie){V.setRelic(ie),window.forceCharacterTabUpdate(),s(V.getRelics()),Pe.delayedSave(),r(ie),oe.success(P("Messages.AddRelicSuccess")),console.log("onAddOk",ie)}function na(ie){const Xe=ac.onEditOk(o,ie);r(Xe)}function xa(){if(console.log("edit clicked"),!o)return oe.error(P("Messages.NoRelicSelected"));d(!0)}function ce(){console.log("add clicked"),h(!0)}function et(ie){if(console.log("delete clicked"),l.length===0)return C(!1),oe.error(P("Messages.NoRelicSelected"));C(ie)}function fe(){if(l.length===0)return oe.error(P("Messages.NoRelicSelected"));l.forEach(ie=>{V.deleteRelic(ie.id)}),s(V.getRelics()),r(void 0),Pe.delayedSave(),oe.success(P("Messages.DeleteRelicSuccess"))}const ut=window.store.getState().relicsTabFocusCharacter;let ia;ut&&o&&(ia=Dt.scoreCurrentRelic(o,ut));const Ci=10,[jn,Ei]=W.useState(null),[We,At]=W.useState(null),Cn=window.store(ie=>ie.excludedRelicPotentialCharacters);return W.useEffect(()=>{if(o){const ie=V.getMetadata().characters,Xe=Object.keys(ie).filter(Fe=>!(M===Ur&&Cn.includes(Fe))).map(Fe=>({cid:Fe,name:P(`gameData:Characters.${Fe}.Name`),score:Dt.scoreRelicPotential(o,Fe,!0),color:"#000",owned:!!V.getCharacterById(Fe)}));Xe.sort((Fe,yt)=>yt.score.bestPct-Fe.score.bestPct),Xe.forEach((Fe,yt)=>{Fe.color="hsl("+yt*360/(Ci+1)+",50%,50%)"}),Ei(Xe.slice(0,Ci));const ot=[[],[],[],[],[],[],[],[],[],[]];for(const Fe of Xe){let yt=Math.floor(Fe.score.bestPct/10);yt=Math.min(9,Math.max(0,yt)),ot[yt].push(Fe)}ot.forEach(Fe=>Fe.sort((yt,ir)=>yt.name.localeCompare(ir.name))),At(ot)}},[M,o,Cn,P]),i.jsxs(D,{style:{width:jr,marginBottom:100},children:[i.jsx(Fs,{selectedRelic:o,type:"add",onOk:Wt,setOpen:h,open:m}),i.jsx(Fs,{selectedRelic:o,type:"edit",onOk:na,setOpen:d,open:u}),i.jsxs(D,{vertical:!0,gap:10,children:[i.jsx(by,{setValueColumns:ae,valueColumns:te,valueColumnOptions:K}),!_&&i.jsx("div",{id:"relicGrid",className:"ag-theme-balham-dark",style:{width:jr,height:500,resize:"vertical",overflow:"hidden",...tc(e)},children:i.jsx(Rl,{ref:a,rowData:t,gridOptions:Ke,columnDefs:Te,defaultColDef:Se,animateRows:!0,headerHeight:24,pagination:!0,paginationPageSizeSelector:!1,paginationPageSize:2100,paginationNumberFormatter:ie=>ie.value.toLocaleString(T.resolvedLanguage.split("_")[0]),getLocaleText:st,onSelectionChanged:re,onRowClicked:be,onRowDoubleClicked:De,navigateToNextCell:Ne,rowSelection:"multiple"})}),_&&i.jsx("div",{style:{width:jr,height:500}}),i.jsxs(D,{gap:10,justify:"space-between",children:[i.jsx(se,{type:"primary",onClick:xa,style:{width:170},disabled:l.length===0||l.length>1,children:P("Toolbar.EditRelic")}),i.jsx(Kn,{title:P("common:Confirm"),description:P("Toolbar.DeleteRelic.Warning",{count:l.length}),open:g,onOpenChange:et,onConfirm:fe,placement:"bottom",okText:P("common:Yes"),cancelText:P("common:Cancel"),children:i.jsx(se,{type:"primary",style:{width:170},disabled:l.length===0,children:P("Toolbar.DeleteRelic.ButtonText")})}),i.jsx(se,{type:"primary",onClick:ce,style:{width:170},children:P("Toolbar.AddRelic")}),i.jsx(As,{trigger:"click",onOpenChange:ie=>{ie||Pe.delayedSave()},content:i.jsxs(D,{gap:8,style:{minWidth:260},children:[i.jsxs(D,{vertical:!0,children:[i.jsx(D,{justify:"space-between",align:"center",children:i.jsx(le,{children:P("Toolbar.RelicLocator.Width")})}),i.jsx(ma,{defaultValue:window.store.getState().inventoryWidth,style:{width:"auto"},min:1,onChange:ie=>{N(ie)}})]}),i.jsxs(D,{vertical:!0,children:[i.jsxs(D,{justify:"space-between",align:"center",gap:10,children:[i.jsx(le,{children:P("Toolbar.RelicLocator.Filter")}),i.jsx(_t,{type:Rt.locatorParams()})]}),i.jsx(ma,{defaultValue:window.store.getState().rowLimit,style:{width:"auto"},min:1,onChange:ie=>{F(ie)}})]})]}),children:i.jsxs(D,{justify:"space-between",align:"center",style:{cursor:"pointer",paddingLeft:8,paddingRight:10,width:285,marginTop:1,borderRadius:5,height:30,background:"rgba(36, 51, 86)",boxShadow:"0 4px 30px rgba(0, 0, 0, 0.2)",outline:"1px solid rgba(63, 90, 150)"},children:[o&&i.jsxs(D,{align:"center",justify:"space-between",style:{width:"100%"},children:[i.jsxs(D,{gap:5,style:{minWidth:10},justify:"flex-start",children:[j.part&&i.jsx("img",{src:Q.getPart(j.part),style:{height:25}}),j.set&&i.jsx("img",{src:Q.getSetImage(j.set,void 0,!0),style:{height:26}}),!j.part&&!j.set&&i.jsx("div",{style:{width:10}})]}),i.jsx(_e,{children:o?P("Toolbar.RelicLocator.Location",{columnIndex:I%v+1,rowIndex:Math.ceil((I+1)/v)}):""}),i.jsx(Ua,{})]}),!o&&i.jsxs(D,{style:{width:"100%",paddingBottom:2},justify:"space-between",children:[i.jsx("div",{style:{width:10}}),i.jsx("div",{children:P("Toolbar.RelicLocator.NoneSelected")}),i.jsx(Ua,{})]})]})}),i.jsx(D,{style:{display:"block"},children:i.jsx(_t,{type:Rt.relicLocation()})}),i.jsx(ne,{value:O,onChange:H,options:p,style:{width:275}}),i.jsx(D,{style:{display:"block"},children:i.jsx(_t,{type:Rt.relicInsight()})}),i.jsx(ne,{value:M,onChange:x,options:R,style:{width:275}})]}),i.jsxs(D,{gap:10,children:[i.jsx(ua,{relic:o,setSelectedRelic:r,setEditModalOpen:d,score:ia}),i.jsx(D,{style:{display:"block"},children:i.jsx(_t,{type:Rt.relics()})}),O==="top10"&&jn&&i.jsxs(D,{gap:10,children:[i.jsx(D,{style:{borderRadius:8,overflow:"hidden",border:`1px solid ${e.colorBorderSecondary}`},children:i.jsx(Dc,{onClick:ie=>{store.getState().setScoringAlgorithmFocusCharacter(ie.points[0].data.cid),window.store.getState().setScoringModalOpen(!0)},data:jn.map(ie=>({x:[ie.score.averagePct],y:[ie.name],hoverinfo:"name",mode:"markers",type:"scatter",error_x:{type:"data",symmetric:!1,array:[ie.score.bestPct-ie.score.averagePct],arrayminus:[ie.score.averagePct-ie.score.worstPct]},marker:{color:ie.color},name:ie.name,cid:ie.cid})).reverse(),layout:{plot_bgcolor:"rgba(0, 0, 0, 0)",paper_bgcolor:e.colorBgContainer,font:{color:"rgba(255, 255, 255, 0.85)"},autosize:!0,width:320,height:278,margin:{b:20,l:10,r:20,t:10},showlegend:!1,xaxis:{fixedrange:!0,range:[0,100],tick0:0,dtick:10,showgrid:!0,showline:!0,showticklabels:!0,type:"linear",zeroline:!0,gridcolor:"rgba(128, 128, 128, 0.15)"},yaxis:{fixedrange:!0,showticklabels:!1,gridcolor:"rgba(128, 128, 128, 0.15)"}},config:{displayModeBar:!1,editable:!1,scrollZoom:!1}})}),i.jsx("ol",{children:i.jsx(D,{vertical:!0,gap:5.5,children:jn.map(ie=>{const Xe=i.jsx("svg",{width:10,height:10,children:i.jsx("rect",{width:10,height:10,style:{fill:ie.color,strokeWidth:1,stroke:"rgb(0,0,0)"}})}),ot=Math.floor(ie.score.worstPct),Fe=Math.floor(ie.score.bestPct),yt=ot===Fe?`${ot}%`:`${ot}% - ${Fe}%`;return i.jsx(D,{gap:4,children:i.jsx("li",{style:ie.owned?{fontWeight:"bold"}:void 0,children:i.jsxs(D,{align:"center",gap:8,children:[Xe,i.jsxs("a",{style:{height:"19px"},children:[" ",i.jsx("img",{src:Q.getCharacterAvatarById(ie.cid),style:{height:"19px"},onClick:ir=>{store.getState().setScoringAlgorithmFocusCharacter(ir.target.attributes.src.nodeValue.split("avatar/")[1].split(".webp")[0]),window.store.getState().setScoringModalOpen(!0)}})]}),ie.name,": ",yt]})})},ie.cid)})})})]}),i.jsx(D,{style:{borderRadius:8,overflow:"hidden",border:`1px solid ${e.colorBorderSecondary}`},children:O==="buckets"&&We&&i.jsx(Dc,{onClick:ie=>{store.getState().setScoringAlgorithmFocusCharacter(ie.points[0].data.cid[ie.points[0].pointIndex]),window.store.getState().setScoringModalOpen(!0)},data:[{type:"scatter",x:[0,0,0,0,0,0,0,0,0,0],y:["0%+","10%+","20%+","30%+","40%+","50%+","60%+","70%+","80%+","90%+"],hoverinfo:"skip",mode:"markers",marker:{color:"rgba(0, 0, 0, 0)",symbol:"circle",size:16}},{type:"scatter",hoverinfo:"text",mode:"markers",x:We.flatMap((ie,Xe)=>ie.map((ot,Fe)=>Fe+.5)),y:We.flatMap((ie,Xe)=>ie.map((ot,Fe)=>Xe*10+"%+")),hovertext:We.flatMap((ie,Xe)=>ie.map((ot,Fe)=>[ot.name,ot.score.meta.bestAddedStats.length===0?"":P("RelicInsights.NewStats")+ot.score.meta.bestAddedStats.join(" / "),ot.score.meta.bestUpgradedStats==null?"":P("RelicInsights.UpgradedStats")+ot.score.meta.bestUpgradedStats.join(" / ")].filter(yt=>yt!=="").join("<br>"))),cid:We.flatMap((ie,Xe)=>ie.map((ot,Fe)=>ot.cid)),marker:{color:"rgba(0, 0, 0, 0)",symbol:"circle",size:16}}],layout:{plot_bgcolor:"rgba(0, 0, 0, 0)",paper_bgcolor:e.colorBgContainer,font:{color:"rgba(255, 255, 255, 0.85)"},autosize:!0,height:278,width:1222,margin:{b:5,l:50,r:20,t:0},hovermode:"closest",hoverdistance:20,showlegend:!1,images:We.flatMap((ie,Xe)=>ie.map((ot,Fe)=>({source:Q.getCharacterAvatarById(ot.cid),xref:"x",yref:"y",x:Fe+.6,y:Xe,sizex:1,sizey:1,xanchor:"center",yanchor:"middle"}))),xaxis:{fixedrange:!0,range:[0,Math.max(...We.map(ie=>ie.length))+1],tick0:0,showgrid:!1,showticklabels:!1,type:"linear",zeroline:!1},yaxis:{fixedrange:!0,showticklabels:!0,gridcolor:"rgba(128, 128, 128, 0.15)"}},config:{displayModeBar:!1,editable:!1,scrollZoom:!1}})})]})]})]})}$m.propTypes={active:ca.bool};function Ey(e){return e.data.augmentedStats[n.CR]*2+e.data.augmentedStats[n.CD]}const{useToken:Ty}=Xt,Ry="https://9di5b7zvtb.execute-api.us-west-2.amazonaws.com/prod";function By(){const e=t=>{var s;return((s=Object.values(V.getMetadata().characters).find(o=>o.id==t))==null?void 0:s.id)||null},a=t=>{var s;return((s=Object.values(V.getMetadata().lightCones).find(o=>o.id==t))==null?void 0:s.id)||null};return[{characterId:e(1405),lightConeId:a(23041)},{characterId:e(1407),lightConeId:a(23040)},{characterId:e(1403),lightConeId:a(23038)},{characterId:e(1404),lightConeId:a(23039)},{characterId:e(1221),lightConeId:a(23030),rerun:!0},{characterId:e(1217),lightConeId:a(23017),rerun:!0},{custom:!0}].filter(t=>t.characterId!=null||t.custom)}const{Text:Iy}=_e,Wr=10;function qm(){const[e,a]=W.useState(!1),[t,s]=W.useState([]),[o,r]=W.useState(),l=W.useRef(null),c=window.store(M=>M.scorerId),u=window.store(M=>M.setScorerId),[d]=q.useForm();window.scorerForm=d;const{t:m}=ee(["relicScorerTab","common"]),h=window.store(M=>M.activeKey);if(W.useEffect(()=>{if(h!=ge.SHOWCASE)return;const M=window.location.href.split("?")[1];if(M){const x=M.split("id=")[1].split("&")[0];g({scorerId:x})}},[h]),W.useEffect(()=>{t.length&&c&&h==ge.SHOWCASE&&window.history.replaceState({id:c},`profile: ${c}`,Da[ge.SHOWCASE]+`?id=${c}`)},[h]),h!=ge.SHOWCASE&&t.length==0)return i.jsx(i.Fragment,{});console.log("======================================================================= RENDER RelicScorerTab");function g(M){var O;if(l.current){oe.warning(m("Messages.ThrottleWarning",{seconds:Math.max(1,Math.ceil(Wr-(new Date-l.current)/1e3))})),e&&a(!1);return}else a(!0),l.current=new Date,setTimeout(()=>{l.current=null},Wr*1e3);console.log("finish",M);const x=((O=M==null?void 0:M.scorerId)==null?void 0:O.toString().trim())||"";if(!x||x.length!=9){a(!1),oe.error(m("Messages.InvalidIdWarning"));return}u(x),Pe.delayedSave(),window.history.replaceState({id:x},`profile: ${x}`,Da[ge.SHOWCASE]+`?id=${x}`),fetch(`${Ry}/profile/${x}`,{method:"GET"}).then(H=>{if(!H.ok&&!H.source)throw new Error(`HTTP error! Status: ${H.status}`);return H.json()}).then(H=>{console.log(H);let _;if(H.source=="mana")H=J.recursiveToCamel(H),_=[H.detailInfo.assistAvatars[0],H.detailInfo.assistAvatars[1],H.detailInfo.assistAvatars[2],H.detailInfo.avatarDetailList[0],H.detailInfo.avatarDetailList[1],H.detailInfo.avatarDetailList[2],H.detailInfo.avatarDetailList[3],H.detailInfo.avatarDetailList[4]].filter(L=>!!L);else if(H.source=="mihomo"){_=H.characters.filter(L=>!!L);for(const L of _){L.relicList=L.relics||[],L.equipment=L.light_cone,L.avatarId=L.id,L.equipment&&(L.equipment.tid=L.equipment.id);for(const v of L.relicList)v.tid=v.id,v.subAffixList=v.sub_affix}}else{if(!H.detailInfo)return a(!1),oe.error(m("Messages.IdLoadError")),"ERROR";_=[...H.detailInfo.assistAvatarList||[],...H.detailInfo.avatarDetailList||[]].filter(L=>!!L).sort((L,v)=>v._assist&&L._assist?(L.pos||0)-(v.pos||0):v._assist?1:L._assist?-1:0).filter((L,v,N)=>N.findIndex(U=>U.avatarId===L.avatarId)===v)}console.log("characters",_);const A=_.map(L=>ql.convert(L)).filter((L,v,N)=>N.map(U=>U.id).indexOf(L.id)==v);for(let L=0;L<A.length;L++)A[L].index=L;s(A),A.length&&r(A[0]),a(!1),oe.success(m("Messages.SuccessMsg")),d.setFieldValue("scorerId",x)}).catch(H=>{setTimeout(()=>{oe.warning(m("Messages.LookupError")),console.error("Fetch error:",H),a(!1)},Math.max(0,Wr*1e3-(new Date-l.current)))})}let C;if(c)try{const M=parseInt(c);C=isNaN(M)?void 0:M}catch(M){console.error(M)}return i.jsx("div",{children:i.jsxs(D,{vertical:!0,gap:0,align:"center",children:[i.jsx(D,{gap:10,vertical:!0,align:"center",children:i.jsx(Iy,{children:m("Header.WithVersion",{beta_version:ht})})}),i.jsx(q,{form:d,onFinish:g,initialValues:{scorerId:C},children:i.jsxs(D,{style:{margin:10,width:1100},justify:"center",align:"center",gap:10,children:[i.jsx(q.Item,{size:"default",name:"scorerId",children:i.jsx(qt,{style:{width:150},placeholder:m("SubmissionBar.Placeholder")})}),i.jsx(se,{type:"primary",htmlType:"submit",loading:e,style:{width:150},children:m("common:Submit")}),i.jsx(se,{style:{width:"fit-content"},onClick:()=>window.store.getState().setScoringModalOpen(!0),children:m("SubmissionBar.AlgorithmButton")})]})}),i.jsx(ef,{availableCharacters:t,setAvailableCharacters:s,setSelectedCharacter:r,selectedCharacter:o})]})})}qm.propTypes={active:ca.bool};function ef(e){var P,T;const a=window.store(y=>y.activeKey);Ty();const t=window.store(y=>y.setScoringAlgorithmFocusCharacter),[s,o]=W.useState(!1),[r,l]=W.useState(e.selectedCharacter),[c,u]=W.useState(!1),[d,m]=W.useState(!1),{t:h}=ee(["relicScorerTab","gameData"]),M={items:[{label:i.jsxs(D,{gap:10,children:[i.jsx(Cs,{}),h("ImportLabels.AllCharacters")]}),key:"import characters"},{label:i.jsxs(D,{gap:10,children:[i.jsx(Cs,{}),h("ImportLabels.SingleCharacter")]}),key:"import single character"}],onClick:y=>{switch(y.key){case"import characters":console.log("importing with characters"),L();break;case"import single character":console.log("importing single character"),v();break;default:oe.error(h("Messages.UnknownButtonClicked"));break}}};W.useEffect(()=>{var y;t((y=e.selectedCharacter)==null?void 0:y.id)},[(P=e.selectedCharacter)==null?void 0:P.id,t]);const x=[];for(let y=0;y<e.availableCharacters.length;y++){const p=e.availableCharacters[y];x.push({label:i.jsx(D,{align:"center",justify:"space-around",children:i.jsx("img",{style:{width:100,height:100,objectFit:"contain",borderRadius:50,border:"1px solid rgba(255, 255, 255, 0.2)",background:"rgba(255, 255, 255, 0.05)"},src:Q.getCharacterAvatarById(p.id)})}),value:p.id,key:y})}function O(y){console.log("selectionChange",y),e.setSelectedCharacter(e.availableCharacters.find(p=>p.id==y))}async function H(){console.log("Simulate",e.selectedCharacter),o(!0),l(e.selectedCharacter)}function _(y){if(!y.characterId)return oe.error(h("Messages.NoCharacterSelected"));if(e.availableCharacters.find(R=>R.id==y.characterId)&&e.selectedCharacter.id!=y.characterId)return oe.error(h("Messages.CharacterAlreadyExists"));const p=e.availableCharacters[e.selectedCharacter.index];p.form=y,p.id=y.characterId,e.selectedCharacter.form=y,e.selectedCharacter.id=y.characterId,Object.values(e.selectedCharacter.equipped).filter(R=>!!R).map(R=>R.equippedBy=y.characterId),e.setAvailableCharacters(JSON.parse(JSON.stringify(e.availableCharacters))),e.setSelectedCharacter(JSON.parse(JSON.stringify(e.selectedCharacter))),console.log("Modified character",e.selectedCharacter)}function A(){const y=e.availableCharacters.flatMap(p=>Object.values(p.equipped)).filter(p=>!!p);console.log("importClicked",e.availableCharacters,y),V.mergePartialRelicsWithState(y),Pe.delayedSave()}function L(){for(const p of e.availableCharacters)V.addFromForm(p.form,!1);const y=e.availableCharacters.flatMap(p=>Object.values(p.equipped)).filter(p=>!!p);console.log("importCharactersClicked",e.availableCharacters,y),V.mergePartialRelicsWithState(y,e.availableCharacters),Pe.delayedSave()}function v(){V.addFromForm(e.selectedCharacter.form,!1);const y=e.availableCharacters.flatMap(p=>Object.values(p.equipped)).filter(p=>!!p);console.log("importCharacterClicked",e.selectedCharacter,y),V.mergePartialRelicsWithState(y,[e.selectedCharacter]),Pe.delayedSave()}async function N(){u(!0),setTimeout(()=>{J.screenshotElementById("relicScorerPreview","clipboard").finally(()=>{u(!1)})},100)}async function U(){m(!0),setTimeout(()=>{const y=e.selectedCharacter?h(`gameData:Characters.${e.selectedCharacter.id}.Name`):null;J.screenshotElementById("relicScorerPreview","download",y).finally(()=>{m(!1)})},100)}function F(y){if(y.custom)return H();_({characterId:y.characterId,lightCone:y.lightConeId,characterLevel:80,lightConeLevel:80,characterEidolon:0,lightConeSuperimposition:y.lightConeSuperimposition||1})}return i.jsx(D,{style:{width:1375},justify:"space-around",children:i.jsxs(D,{vertical:!0,align:"center",gap:5,style:{marginBottom:100,width:1068},children:[i.jsxs(D,{vertical:!0,style:{display:e.availableCharacters.length>0?"flex":"none",width:"100%"},children:[i.jsx(My,{presetClicked:F,activeKey:a}),i.jsxs(D,{style:{display:e.availableCharacters.length>0?"flex":"none",marginBottom:5},justify:"space-between",gap:10,children:[i.jsx(se,{style:{flex:1},onClick:N,icon:i.jsx(Ku,{}),loading:c,type:"primary",children:h("CopyScreenshot")}),i.jsx(se,{style:{width:50},icon:i.jsx(Tl,{}),onClick:U,loading:d}),i.jsxs(ws.Button,{style:{flex:1},className:"dropdownButton",onClick:A,menu:M,children:[i.jsx(Cs,{}),h("ImportLabels.Relics")]}),i.jsx(se,{style:{flex:1},icon:i.jsx(Wu,{}),onClick:H,children:h("SimulateRelics")})]})]}),i.jsx(Xa,{style:{width:"100%",overflow:"hidden"},options:x,block:!0,onChange:O,value:(T=e.selectedCharacter)==null?void 0:T.id}),i.jsx("div",{id:"previewWrapper",style:{padding:"5px"},children:i.jsx(cc,{class:"relicScorerCharacterPreview",character:e.selectedCharacter,source:vt.SHOWCASE_TAB,id:"relicScorerPreview",setOriginalCharacterModalOpen:o,setOriginalCharacterModalInitialCharacter:l})}),i.jsx(lc,{onOk:_,open:s,setOpen:o,initialCharacter:r})]})})}ef.propTypes={availableCharacters:ca.array,setAvailableCharacters:ca.func,selectedCharacter:ca.object,setSelectedCharacter:ca.func};function yy(e){const{preset:a}=e;return a.rerun?i.jsx("img",{src:Q.getCharacterAvatarById(a.characterId),style:{height:_s,width:_s,borderRadius:_s,outline:"1px solid rgba(255, 255, 255, 0.2)",background:"rgba(255, 255, 255, 0.05)"}}):i.jsx("img",{src:Q.getCharacterAvatarById(a.characterId),style:{height:An,width:An,borderRadius:An,outline:"1px solid rgba(255, 255, 255, 0.2)",background:"rgba(255, 255, 255, 0.05)"}})}const _s=45,An=95;function My(e){const[a,t]=W.useState(window.store.getState().savedSession[$e.relicScorerSidebarOpen]);W.useEffect(()=>{window.store.getState().setSavedSessionKey($e.relicScorerSidebarOpen,a),Pe.delayedSave()},[a]);const s=W.useMemo(()=>{let o=0;return i.jsx(D,{vertical:!0,gap:3,justify:"center",style:{marginLeft:-8,width:110,flexDirection:"row",flexWrap:"wrap"},children:By().map(r=>{const l=r.custom?i.jsx(ri,{component:fo,style:{fontSize:85}}):i.jsx(yy,{preset:r});return i.jsx(se,{type:"text",style:{width:r.rerun?_s+2:An+8,height:r.rerun?_s+2:An+8,paddingTop:2,display:e.activeKey==ge.SHOWCASE?"flex":"none"},onClick:()=>e.presetClicked(r),children:l},o++)})})},[e]);return i.jsx(D,{vertical:!0,style:{position:"relative",left:-120,top:40,width:0,height:0},children:i.jsx(ws,{zIndexPopup:10,dropdownRender:()=>s,open:a,style:{},children:i.jsx("a",{onClick:o=>{o.preventDefault(),t(!a)},children:i.jsx(se,{type:"primary",shape:"round",style:{height:An,width:An,borderRadius:An,marginBottom:2},children:i.jsx(ri,{component:Wu,style:{fontSize:55}})})})})})}const Fo=[.006,.005964,.005928216,.005892646704,.005857290823776,.005822147078833344,.005787214196360344,.0057524909111821825,.005717975965715089,.005683668109920798,.005649566101261274,.005615668704653705,.005581974692425783,.005548482844271228,.005515191947205601,.005482100795522367,.005449208190749233,.005416512941604738,.00538401386395511,.005351709780771379,.00531959952208675,.00528768192495423,.005255955833404505,.005224420098404077,.005193073577813653,.005161915136346771,.00513094364552869,.005100157983655518,.0050695570357535856,.005039139693539064,.005008904855377829,.004978851426245562,.004948978317688089,.004919284447781959,.004889768741095268,.0048604301286486965,.004831267547876804,.004802279942589543,.004773466262934007,.004744825465356403,.004716356512564264,.004688058373488879,.004659930023247946,.004631970443108458,.004604178620449807,.004576553548727109,.004549094227434746,.0045217996620701365,.004494668864097716,.00446770085091313,.004440894645807651,.0044142492779328055,.004387763782265209,.004361437199571617,.004335268576374188,.004309256964915942,.004283401423126446,.004257701014587688,.004232154808500162,.0042067618796491615,.004181521308371266,.004156432180521039,.004131493587437912,.004106704625913285,.004082064398157804,.004057572011768857,.004033226579698244,.004009027220220055,.003984973056898735,.003961063218557342,.003937296839245998,.003913673058210522,.0038901910198612588,.04253534861116301,.07584439342357738,.0978537140675431,.105347414622264,.09880559711913513,.08201639506747972,.06052272143553331,.039633005780615294,.02288634830101852,.011532204560383551,.00499355875488925,.0018181052569377857,.0005393311577894619,.00012422731568808565,2048781559582088e-20,2053394710113599e-21,7415178164348e-20],wo=[.008,.007936,.007872512,.007809531904,.0077470556487679995,.007685079203577855,.0076235985699492324,.007562609781389638,.007502108903138521,.007442092031913413,.007382555295658106,.007323494853292841,.007264906894466498,.007206787639310767,.00714913333819628,.007091940271490709,.007035204749318783,.006978923111324233,.00692309172643364,.0068677069926221706,.006812765336681193,.006758263213987744,.006704197108275842,.006650563531409635,.006597359023158357,.00654458015097309,.006492223509765305,.006440285721687183,.006388763435913685,.006337653328426376,.006286952101798964,.006236656484984573,.006186763233104696,.006137269127239857,.006088170974221939,.006039465606428163,.005991149881576737,.005943220682524123,.005895674917063929,.005848509517727418,.005801721441585599,.005755307670052914,.00570926520869249,.00566359108702295,.005618282358326766,.005573336099460153,.005528749410664471,.005484519415379155,.005440643260056121,.005397118113975672,.005353941169063867,.005311109639711356,.005268620762593665,.005226471796492916,.0051846600221209715,.005143182741944004,.005102037280008452,.005061220981768384,.0050207312139142375,.004980565364202923,.0049407208412893,.004901195074558986,.004861985513962514,.004823089629850814,.004784504912812008,.046275731516717745,.08095642589545174,.10159812648728124,.1049611176833006,.09289642032292567,.07130085695712911,.04745438530228964,.027170589573400922,.013184241577222656,.005296345422062471,.0016994386548057395,.0004112204670939708,6766516402880222e-20,5971634998864304e-21,767367185684e-19],Hi=[.006,.011963999999999999,.017892216,.023784862704,.029642153527776,.03546430060660934,.04125151480296969,.04700400571415187,.05272198167986696,.05840564978978776,.06405521589104904,.06967088459570274,.07525285928812853,.08080134213239976,.08631653407960535,.09179863487512771,.09724784306587694,.10266435600748168,.10804836987143679,.11340007965220816,.1187196791742949,.12400736109924913,.12926331693265364,.1344877370310577,.13968081060887136,.14484272574521814,.14997366939074683,.15507382737440234,.16014338441015594,.165182524103695,.17019142895907283,.1751702803853184,.1801192587030065,.18503854315078844,.1899283118918837,.1947887420205324,.1996200095684092,.20442228951099875,.20919575577393276,.21394058123928916,.21865693775185344,.2233449961253423,.22800492614859025,.2326368965916987,.23724107521214852,.24181762876087562,.24636672298831036,.2508885226503805,.2553831915144782,.25985089236539133,.264291787011199,.2687060362891318,.273093800071397,.2774552372709686,.2817905058473428,.28609976281225874,.2903831642353852,.29464086524997285,.298873020058473,.30307978193812213,.30726130324649337,.3114177354270144,.3155492290144523,.3196559336403656,.3237379980385234,.32779557005029225,.3318287966299905,.33583782385021055,.33982279690710926,.3437838601256666,.34772115696491257,.35163483002312307,.35552502104298433,.3980603696541474,.4739047630777248,.5717584771452678,.6771058917675319,.7759114888866671,.8579278839541468,.91845060538968,.9580836111702953,.9809699594713138,.9925021640316973,.9974957227865866,.9993138280435244,.9998531592013139,.999977386517002,.9999978743325978,.999999927727308,1.0000000018790896],mo=[.008,.015936,.023808511999999997,.031618043904,.039365099552768,.04705017875634585,.05467377732629508,.06223638710768472,.06973849601082324,.07718058804273666,.08456314333839476,.0918866381916876,.0991515450861541,.10635833272546487,.11350746606366115,.12059940633515186,.12763461108447063,.13461353419579486,.1415366259222285,.14840433291485067,.15521709825153185,.16197536146551958,.1686795585737954,.17533012210520504,.1819274811283634,.1884720612793365,.1949642847891018,.20140457051078897,.20779333394670266,.21413098727512903,.220417939376928,.22665459586191256,.23284135909501724,.2389786282222571,.24506679919647903,.2511062648029072,.25709741468448394,.26304063536700806,.268936310284072,.2747848198017994,.280586541243385,.2863418489134379,.29205111412213036,.29771470520915333,.3033329875674801,.30890632366694026,.3144350730776047,.31991959249298385,.32536023575303996,.33075735386701566,.3361112950360795,.3414224046757909,.34669102543838454,.3519174972348775,.35710215725699845,.3622453399989425,.36734737727895095,.3724085982607193,.37742932947463353,.3824098948388365,.3873506156801258,.3922518107546848,.3971137962686473,.40193688589849813,.40672139081131015,.4529971223280279,.5339535482234796,.6355516747107609,.7405127923940615,.8334092127169872,.9047100696741163,.9521644549764059,.9793350445498068,.9925192861270294,.9978156315490919,.9995150702038976,.9999262906709916,.9999939558350204,.9999999274700192,1.0000000042067378],Fa=90,dn=80,Vr=1e5,Gy=.5625,Py=.78125;var Ds=(e=>(e[e.NONE=0]="NONE",e[e.F2P=1]="F2P",e[e.EXPRESS=2]="EXPRESS",e[e.BP_EXPRESS=3]="BP_EXPRESS",e))(Ds||{}),ko=(e=>(e[e.NEW=0]="NEW",e[e.RERUN=1]="RERUN",e))(ko||{});const _y=ga("NONE",0,0,0),hc=[ga("3.1",1,1,80),ga("3.1",2,1,27),ga("3.1",1,2,91),ga("3.1",2,2,40),ga("3.1",1,3,94),ga("3.1",2,3,45),ga("3.2",1,1,76),ga("3.2",2,1,33),ga("3.2",1,2,89),ga("3.2",2,2,43),ga("3.2",1,3,92),ga("3.2",2,3,49)];var cn=(e=>(e[e.E0=0]="E0",e[e.E1=1]="E1",e[e.E2=2]="E2",e[e.E3=3]="E3",e[e.E4=4]="E4",e[e.E5=5]="E5",e[e.E6=6]="E6",e[e.S1=7]="S1",e))(cn||{}),un=(e=>(e[e.NONE=-1]="NONE",e[e.E0=0]="E0",e[e.E1=1]="E1",e[e.E2=2]="E2",e[e.E3=3]="E3",e[e.E4=4]="E4",e[e.E5=5]="E5",e[e.E6=6]="E6",e))(un||{}),qn=(e=>(e[e.NONE=0]="NONE",e[e.S1=1]="S1",e[e.S2=2]="S2",e[e.S3=3]="S3",e[e.S4=4]="S4",e[e.S5=5]="S5",e))(qn||{}),Ha=(e=>(e.REFUND_NONE="REFUND_NONE",e.REFUND_LOW="REFUND_LOW",e.REFUND_AVG="REFUND_AVG",e.REFUND_HIGH="REFUND_HIGH",e))(Ha||{});const tf={REFUND_NONE:0,REFUND_LOW:.04,REFUND_AVG:.075,REFUND_HIGH:.11},pl={passes:0,jades:0,income:[],bannerRotation:0,strategy:0,starlight:"REFUND_AVG",pityCharacter:0,guaranteedCharacter:!1,pityLightCone:0,guaranteedLightCone:!1,currentEidolonLevel:-1,currentSuperimpositionLevel:0};function ga(e,a,t,s){return{passes:s,version:e,phase:a,type:t,id:Ay(e,a,t)}}function Ay(e,a,t){return`${e}_p${a}_${t}`}function xy(e){console.log("simulate Warps",e),window.store.getState().setWarpRequest(e);const a=Ly(e);window.store.getState().setWarpResult(a),Pe.delayedSave()}function Ly(e){const a=Hy(e),t=Oy(a),s=Object.fromEntries(t.map(({label:r})=>[r,{warps:0,wins:0}]));for(let r=0;r<Vr;r++){let l=0;for(const c of t){const{warpType:u,label:d,pity:m,guaranteed:h,redistributedCumulative:g,redistributedCumulativeNonPity:C,warpCap:M}=c,x=u==0?Gy:Py,O=cu(g,M,m)-m+1;if(Math.random()<x||h)l+=O;else{const H=cu(C??g,M,0)+1;l+=O+H}s[d].warps+=l,l<=a.warps&&s[d].wins++}}for(const r of t)s[r.label].warps/=Vr,s[r.label].wins/=Vr;return{milestoneResults:s,request:a}}function Oy(e){const{strategy:a,pityCharacter:t,guaranteedCharacter:s,pityLightCone:o,guaranteedLightCone:r,currentEidolonLevel:l,currentSuperimpositionLevel:c}=e,u=On(t,Fa,Fo),d=On(0,Fa,Fo),m=On(o,dn,wo),h=On(0,dn,wo);let g=[{warpType:0,label:"E0",guaranteed:s,pity:t,redistributedCumulative:u,redistributedCumulativeNonPity:d,warpCap:Fa},{warpType:0,label:"E1",guaranteed:!1,pity:0,redistributedCumulative:Hi,warpCap:Fa},{warpType:0,label:"E2",guaranteed:!1,pity:0,redistributedCumulative:Hi,warpCap:Fa},{warpType:0,label:"E3",guaranteed:!1,pity:0,redistributedCumulative:Hi,warpCap:Fa},{warpType:0,label:"E4",guaranteed:!1,pity:0,redistributedCumulative:Hi,warpCap:Fa},{warpType:0,label:"E5",guaranteed:!1,pity:0,redistributedCumulative:Hi,warpCap:Fa},{warpType:0,label:"E6",guaranteed:!1,pity:0,redistributedCumulative:Hi,warpCap:Fa},{warpType:1,label:"S2",guaranteed:!1,pity:0,redistributedCumulative:mo,warpCap:dn},{warpType:1,label:"S3",guaranteed:!1,pity:0,redistributedCumulative:mo,warpCap:dn},{warpType:1,label:"S4",guaranteed:!1,pity:0,redistributedCumulative:mo,warpCap:dn},{warpType:1,label:"S5",guaranteed:!1,pity:0,redistributedCumulative:mo,warpCap:dn}];const C={warpType:1,label:"S1",guaranteed:r,pity:o,redistributedCumulative:m,redistributedCumulativeNonPity:h,warpCap:dn};switch(a){case 0:g.splice(1,0,C);break;case 1:g.splice(2,0,C);break;case 2:g.splice(3,0,C);break;case 3:g.splice(4,0,C);break;case 4:g.splice(5,0,C);break;case 5:g.splice(6,0,C);break;case 6:g.splice(7,0,C);break;case 7:g.splice(0,0,C);break}g=l!==-1||c!==0?vy(g,e):g;let x=l,O=c;for(const H of g)H.warpType==0&&x++,H.warpType==1&&O++,H.label=x==-1?`S${O}`:`E${x}S${O}`;return g}function vy(e,a){let t=a.currentEidolonLevel,s=a.currentSuperimpositionLevel,o=[];o=e.filter(h=>{switch(h.warpType){case 0:if(t>-1)return t--,!1;break;case 1:if(s>0)return s--,!1;break}return!0});const r=On(a.pityCharacter,Fa,Fo),l=On(0,Fa,Fo),c=On(a.pityLightCone,dn,wo),u=On(0,dn,wo),d=o.findIndex(h=>h.warpType===0);d>=0&&(o[d].pity=a.pityCharacter,o[d].guaranteed=a.guaranteedCharacter,o[d].redistributedCumulative=r,o[d].redistributedCumulativeNonPity=l);const m=o.findIndex(h=>h.warpType===1);return m>=0&&(o[m].pity=a.pityLightCone,o[m].guaranteed=a.guaranteedLightCone,o[m].redistributedCumulative=c,o[m].redistributedCumulativeNonPity=u),o}function Hy(e){const a=e.income.map(m=>hc.find(h=>h.id==m)??_y);let t=0;for(const m of a)t+=m.passes;const s=e.jades,o=e.passes+t,r=Math.floor(s/160)+o,l=Math.floor((tf[e.starlight]??0)*r),c=l*20,u=r+l;for(const[m,h]of Object.entries(e))h==null&&(e[m]=pl[m]);const d={...e,warps:u,totalJade:s,totalPasses:o,totalStarlight:c};return e.bannerRotation==0&&(d.currentEidolonLevel=-1,d.currentSuperimpositionLevel=0),d}function On(e,a,t){const s=[];for(let r=0;r<e;r++)s[r]=0;for(let r=e;r<a;r++)s[r]=r==0?t[r]:s[r-1]+t[r];const o=1-s[a-1];for(let r=e;r<a;r++)s[r]+=o*s[r];return s}function cu(e,a,t){const s=Math.random()*e[a-1];return Fy(s,e,t)}function Fy(e,a,t){let s=t,o=a.length-1;for(;s<o;){const r=Math.floor((s+o)/2);e>a[r]?s=r+1:o=r}return s}const{Text:uu}=_e;function wy(){const{t:e}=ee("warpCalculatorTab");return i.jsxs(D,{vertical:!0,style:{height:1400,width:950},align:"center",children:[i.jsx(D,{justify:"space-around",style:{margin:15},children:i.jsx("pre",{style:{fontSize:28,fontWeight:"bold",margin:0},children:e("SectionTitles.Planner")})}),i.jsx(Ky,{}),i.jsx(Uy,{})]})}function ky(e){return e?((!Array.isArray(e.income)||!e.income.every(a=>hc.find(t=>t.id===a)))&&(e.income=[]),Object.assign({},pl,e)):{...pl}}function Ky(){const{t:e}=ee("warpCalculatorTab",{keyPrefix:"SectionTitles"}),a=window.store(o=>o.warpRequest),[t]=q.useForm(),s=ky(a);return i.jsx(q,{form:t,initialValues:s,style:{width:900},children:i.jsxs(hi,{style:{width:900},children:[i.jsxs(D,{style:{marginBottom:30},children:[i.jsxs(D,{vertical:!0,style:{flex:1},children:[i.jsx(Zr,{children:i.jsxs(D,{justify:"center",gap:10,children:[e("Settings"),i.jsx("a",{href:"https://github.com/fribbels/hsr-optimizer/blob/main/docs/guides/en/warp-planner.md",target:"_blank",style:{display:"inline-flex",alignItems:"center"},rel:"noreferrer",children:i.jsx("img",{src:Q.getQuestion(),style:{height:16,width:16,opacity:.6,marginLeft:"auto"}})})]})}),i.jsxs(D,{vertical:!0,gap:16,children:[i.jsxs(D,{gap:25,justify:"space-between",children:[i.jsx(D,{align:"flex-end",gap:8,flex:1,children:i.jsxs(D,{vertical:!0,children:[i.jsx(le,{children:e("Jades")}),i.jsx(q.Item,{name:"jades",children:i.jsx(ma,{placeholder:"0",min:0,style:{width:"100%"},controls:!1,addonBefore:i.jsx("img",{src:Q.getJade(),style:{height:24}})})})]})}),i.jsxs(D,{vertical:!0,flex:1,children:[i.jsx(le,{children:e("Banner")}),i.jsx(q.Item,{name:"bannerRotation",children:i.jsxs(nt.Group,{buttonStyle:"solid",block:!0,children:[i.jsx(nt.Button,{value:ko.NEW,children:e("New")}),i.jsx(nt.Button,{value:ko.RERUN,children:e("Rerun")})]})})]})]}),i.jsxs(D,{gap:25,children:[i.jsx(D,{align:"flex-end",gap:8,flex:1,children:i.jsxs(D,{vertical:!0,children:[i.jsx(le,{children:e("Passes")}),i.jsx(q.Item,{name:"passes",children:i.jsx(ma,{placeholder:"0",min:0,style:{width:"100%"},controls:!1,addonBefore:i.jsx("img",{src:Q.getPass(),style:{height:24}})})})]})}),i.jsxs(D,{vertical:!0,flex:1,children:[i.jsx(le,{children:e("Strategy")}),i.jsx(q.Item,{name:"strategy",children:i.jsx(ne,{options:Vy()})})]})]}),i.jsxs(D,{gap:25,children:[i.jsxs(D,{vertical:!0,style:{width:0,flex:1,overflow:"hidden"},children:[i.jsx(le,{children:e("Starlight")}),i.jsxs(Cl.Compact,{style:{display:"flex"},children:[i.jsx(qt,{disabled:!0,style:{width:36,backgroundColor:"rgba(255, 255, 255, 0.04)",cursor:"auto",backgroundImage:`url(${Q.getStarlight()})`,backgroundSize:"24px",backgroundPosition:"center",backgroundRepeat:"no-repeat"}}),i.jsx(q.Item,{noStyle:!0,name:"starlight",children:i.jsx(ne,{style:{flex:1},options:Zy(),popupMatchSelectWidth:!1,optionLabelProp:"labelInValue"})})]})]}),i.jsxs(D,{vertical:!0,style:{width:0,flex:1,overflow:"hidden"},children:[i.jsx(le,{children:e("AdditionalResources")}),i.jsx(q.Item,{name:"income",children:i.jsx(Cc,{multiple:!0,showCheckedStrategy:Cc.SHOW_CHILD,maxTagCount:0,listHeight:500,showSearch:!1,treeCheckable:!1,treeExpandAction:"click",placeholder:"None",treeDefaultExpandedKeys:Ny(s),allowClear:!0,treeData:jy(),popupMatchSelectWidth:500})})]})]})]})]}),i.jsx(Ga,{width:40}),i.jsxs(D,{vertical:!0,style:{flex:1},justify:"space-between",children:[i.jsxs(D,{vertical:!0,children:[i.jsx(Zr,{children:e("Character")}),i.jsx(mu,{banner:"Character"})]}),i.jsxs(D,{vertical:!0,children:[i.jsx(Zr,{children:e("LightCone")}),i.jsx(mu,{banner:"LightCone"})]})]})]}),i.jsx(D,{style:{width:"100%"},gap:20,children:i.jsx(se,{type:"primary",block:!0,style:{height:45},onClick:()=>{window.store.getState().setWarpResult(null),setTimeout(()=>xy(t.getFieldsValue()),50)},icon:i.jsx(ju,{}),children:e("Calculate")})})]})})}function Ny(e){return(e.income??[]).map(a=>parseInt(a.substring(a.length-1)))}function Zr(e){return i.jsx(_e.Title,{level:5,style:{margin:0,marginBottom:8,textAlign:"center"},children:e.children})}function Uy(){const{t:e,i18n:a}=ee("warpCalculatorTab"),t=window.store(r=>r.warpResult);if(!(t!=null&&t.request))return i.jsx(i.Fragment,{});const s=Object.entries(t.milestoneResults??{}).map(([r,l])=>({key:r,warps:l.warps,wins:l.wins}));console.log(t);const o=[{title:e("ColumnTitles.Goal"),dataIndex:"key",key:"key",align:"center",width:200,render:(r,l)=>i.jsxs(D,{style:{position:"relative",marginLeft:5,height:"100%"},align:"center",children:[i.jsx("div",{style:{display:l.wins<gl?"none":"block",width:`${l.wins*100}%`,borderRadius:4,position:"absolute",height:"100%",backgroundColor:ea.scale(["#df524bcc","#efe959cc","#89d86dcc"]).domain([0,.33,1])(l.wins).hex(),zIndex:1}}),i.jsx(D,{style:{width:"100%",zIndex:2},justify:"center",align:"center",children:i.jsx(Zi,{color:"#000000aa",style:{opacity:du(l.wins),border:0,padding:"2px 12px 2px 12px"},children:i.jsx(uu,{style:{margin:0,alignItems:"center"},children:Yy(r)})})})]})},{title:i.jsx(D,{justify:"center",align:"center",gap:5,children:i.jsxs(xt,{t:e,i18nKey:"ColumnTitles.Chance",values:{ticketCount:t.request.warps.toLocaleString(a.resolvedLanguage.split("_")[0])},children:["Success chance with [[ticketCount]]",i.jsx("img",{style:{height:18},src:Q.getPass()})]})}),dataIndex:"wins",width:250,align:"center",render:r=>`${J.truncate10ths(r*100).toLocaleString(a.resolvedLanguage.split("_")[0],{minimumFractionDigits:1,maximumFractionDigits:1})}%`},{title:i.jsx(D,{justify:"center",align:"center",gap:5,children:i.jsxs(xt,{t:e,i18nKey:"ColumnTitles.Average",children:["Average # of",i.jsx("img",{style:{height:18},src:Q.getPass()}),"required"]})}),dataIndex:"warps",align:"center",width:250,render:(r,l)=>i.jsx(D,{align:"center",justify:"center",gap:4,children:i.jsxs(i.Fragment,{children:[`${Math.ceil(r)}`,i.jsx("img",{style:{height:16,opacity:du(l.wins)},src:Q.getPass()})]})})}];return i.jsxs(D,{vertical:!0,gap:20,style:{},align:"center",children:[i.jsx(D,{justify:"space-around",style:{marginTop:15},children:i.jsx("pre",{style:{fontSize:28,fontWeight:"bold",margin:0},children:e("SectionTitles.Results")})}),i.jsx(uu,{style:{fontSize:18},children:i.jsx("pre",{style:{margin:0},children:i.jsxs(D,{align:"center",gap:5,children:[i.jsx("span",{children:e("TotalAvailable")}),`( ${Ea(t.request.totalJade??0)}`,i.jsx("img",{style:{height:24},src:Q.getJade()}),i.jsx("span",{children:") + ("}),Ea(t.request.totalPasses??0),i.jsx("img",{style:{height:24},src:Q.getPass()}),i.jsx("span",{children:") + ("}),Ea(t.request.totalStarlight??0),i.jsx("img",{style:{height:24},src:Q.getStarlight()}),i.jsx("span",{children:") "}),i.jsx("span",{children:"= "}),Ea(t.request.warps??0),i.jsx("img",{style:{height:24},src:Q.getPass()})]})})}),i.jsx(D,{vertical:!0,gap:10,style:{width:"100%"},children:i.jsx(pi,{style:{width:"100%"},columns:o,dataSource:s,pagination:!1,rowClassName:r=>`
            warp-table-row 
            ${r.wins<gl?"warp-table-row-disabled":""}
          `})})]})}const gl=.001;function du(e){return e<gl?.1:1}function mu(e){const{t:a}=ee(["warpCalculatorTab","common"]),t=q.useWatch(["bannerRotation"]);return i.jsxs(D,{gap:25,style:{width:"100%"},children:[i.jsxs(D,{vertical:!0,flex:1,children:[i.jsx(le,{children:a("PityCounter.PityCounter")}),i.jsx(q.Item,{name:`pity${e.banner}`,children:i.jsx(ma,{placeholder:"0",min:0,max:e.banner=="Character"?89:79,style:{width:"100%"},controls:!1})})]}),i.jsxs(D,{vertical:!0,flex:1,style:{display:t==ko.RERUN?"flex":"none"},children:[i.jsx(le,{children:a("PityCounter.CurrentEidolonSuperImp")}),i.jsx(q.Item,{name:e.banner==="Character"?"currentEidolonLevel":"currentSuperimpositionLevel",children:i.jsx(ne,{options:e.banner=="Character"?zy():Xy()})})]}),i.jsxs(D,{vertical:!0,flex:1,children:[i.jsx(le,{children:a("PityCounter.Guaranteed")}),i.jsx(q.Item,{name:`guaranteed${e.banner}`,children:i.jsxs(nt.Group,{block:!0,optionType:"button",buttonStyle:"solid",children:[i.jsx(nt.Button,{value:!0,children:i.jsx(Hn,{})}),i.jsx(nt.Button,{value:!1,children:i.jsx(Qa,{})})]})})]})]})}function jy(){var o;const e=Y.getFixedT(null,"warpCalculatorTab","IncomeOptions"),a=(o=Y.resolvedLanguage)==null?void 0:o.split("_")[0];return[Ds.F2P,Ds.EXPRESS,Ds.BP_EXPRESS].map(r=>({title:e(`Type.${r}`),value:r,selectable:!1,children:hc.filter(l=>l.type===r).flatMap(l=>{const c=[{value:l.id,title:l.type==Ds.NONE?e("Type.0"):i.jsxs(D,{align:"center",gap:3,children:[i.jsx(Wy,{option:l}),`+${l.passes.toLocaleString(a)}`,i.jsx("img",{style:{height:18},src:Q.getPass()})]})}];return l.phase==2&&c.push({title:i.jsx(i.Fragment,{}),value:l.id+"divider",className:"tree-select-divider",disabled:!0}),c}).slice(0,-1)}))}function Wy(e){const a=Y.getFixedT(null,"warpCalculatorTab","IncomeOptions");return i.jsx("div",{style:{marginRight:2},children:a("Label",{versionNumber:e.option.version,phaseNumber:e.option.phase,type:a(`Type.${e.option.type}`)})})}function Vy(){const e=Y.getFixedT(null,"warpCalculatorTab","StrategyLabels");return[{value:cn.S1,label:e("S1")},{value:cn.E0,label:e("E0")},{value:cn.E1,label:e("E1")},{value:cn.E2,label:e("E2")},{value:cn.E3,label:e("E3")},{value:cn.E4,label:e("E4")},{value:cn.E5,label:e("E5")},{value:cn.E6,label:e("E6")}]}function Zy(){return Y.getFixedT(null,"warpCalculatorTab","StrategyLabels"),[{value:Ha.REFUND_NONE,label:"None",labelInValue:"None"},{value:Ha.REFUND_LOW,label:`${Fi(Ha.REFUND_LOW)}% refund (Low)`,labelInValue:`${Fi(Ha.REFUND_LOW)}% refund`},{value:Ha.REFUND_AVG,label:`${Fi(Ha.REFUND_AVG,!0)}% refund (Average)`,labelInValue:`${Fi(Ha.REFUND_AVG,!0)}% refund`},{value:Ha.REFUND_HIGH,label:`${Fi(Ha.REFUND_HIGH)}% refund (High)`,labelInValue:`${Fi(Ha.REFUND_HIGH)}% refund`}]}function Fi(e,a=!1){const t=tf[e]*100;return a?Ot(t):Ln(t)}function zy(){const e=Y.getFixedT(null,"warpCalculatorTab","EidolonLevels");return[{value:un.NONE,label:e("NONE")},{value:un.E0,label:e("E0")},{value:un.E1,label:e("E1")},{value:un.E2,label:e("E2")},{value:un.E3,label:e("E3")},{value:un.E4,label:e("E4")},{value:un.E5,label:e("E5")},{value:un.E6,label:e("E6")}]}function Xy(){const e=Y.getFixedT(null,"warpCalculatorTab","SuperimpositionLevels");return[{value:qn.NONE,label:e("NONE")},{value:qn.S1,label:e("S1")},{value:qn.S2,label:e("S2")},{value:qn.S3,label:e("S3")},{value:qn.S4,label:e("S4")},{value:qn.S5,label:e("S5")}]}function Yy(e){const a=Y.getFixedT(null,["warpCalculatorTab","common"]);return e=="S1"?a("common:SuperimpositionNShort",{superimposition:1}):a("warpCalculatorTab:TargetLabel",{superimposition:e.charAt(3),eidolon:e.charAt(1)})}async function Jy(e,a,t){e.resultSort=k.COMBO.key;const s=ss(e),o=new Array(Math.pow(Object.keys(gi).length,4)).fill(1),r=new Array(Math.pow(Object.keys(bi).length,2)).fill(1),c=Bd(t,a,e,s,1,Yi,o,r,!0,!0),u=Id(c,0);await u.mapAsync(GPUMapMode.READ,0,1e4);const d=u.getMappedRange(0,1e4),m=new Float32Array(d),h=mi(e,{Head:a.Head[0],Hands:a.Hands[0],Body:a.Body[0],Feet:a.Feet[0],PlanarSphere:a.PlanarSphere[0],LinkRope:a.LinkRope[0]}),g=e5(h.a,m);return u.unmap(),u.destroy(),yd(c),g}const rn=1,kt=.01,Qy=1e-4,$y={[S.BASE_ATK]:!0,[S.BASE_DEF]:!0,[S.BASE_HP]:!0,[S.BASE_SPD]:!0,[S.PHYSICAL_DMG_BOOST]:!0,[S.FIRE_DMG_BOOST]:!0,[S.ICE_DMG_BOOST]:!0,[S.LIGHTNING_DMG_BOOST]:!0,[S.WIND_DMG_BOOST]:!0,[S.IMAGINARY_DMG_BOOST]:!0,[S.QUANTUM_DMG_BOOST]:!0},qy={[S.BASIC_DMG]:rn,[S.SKILL_DMG]:rn,[S.ULT_DMG]:rn,[S.FUA_DMG]:rn,[S.DOT_DMG]:rn,[S.BREAK_DMG]:rn,[S.MEMO_SKILL_DMG]:rn,[S.MEMO_TALENT_DMG]:rn,[S.COMBO_DMG]:rn,[S.HEAL_VALUE]:kt,[S.SHIELD_VALUE]:kt,[S.HP]:kt,[S.ATK]:kt,[S.DEF]:kt,[S.EHP]:kt,[S.UNCONVERTIBLE_HP_BUFF]:kt,[S.UNCONVERTIBLE_ATK_BUFF]:kt,[S.UNCONVERTIBLE_DEF_BUFF]:kt,[S.BASIC_ADDITIONAL_DMG]:kt,[S.SKILL_ADDITIONAL_DMG]:kt,[S.ULT_ADDITIONAL_DMG]:kt,[S.FUA_ADDITIONAL_DMG]:kt,[S.DOT_ADDITIONAL_DMG]:kt,[S.BREAK_ADDITIONAL_DMG]:kt,[S.MEMO_SKILL_ADDITIONAL_DMG]:kt,[S.MEMO_TALENT_ADDITIONAL_DMG]:kt};function e5(e,a){const t={};let s=!0;const o=Object.keys(ui);function r(l,c){const u=e[l]-a[l],d=Math.abs(u)<=c;d||(s=!1);const m=o[l];t[m]={key:m,cpu:e[l].toLocaleString("en-US",{useGrouping:!1,maximumFractionDigits:20}),gpu:a[l].toLocaleString("en-US",{useGrouping:!1,maximumFractionDigits:20}),deltaValue:u,deltaString:u.toLocaleString("en-US",{useGrouping:!1,maximumFractionDigits:20}),precision:c,pass:d}}for(let l=0;l<Object.keys(ui).length;l++){if($y[l])continue;const c=qy[l]??Qy;r(l,c)}return{allPass:s,statDeltas:t}}function t5(e,a,t,s){const o={name:e,request:a,relics:t,done:!1};return o.execute=async()=>{const r=Jy(a,t,s),l=await r;return o.done=!0,o.result=l,r},o}function a5(e){for(const[a,t]of Object.entries(e))t.map(s=>{const o=s.condensedStats;s.substats=[],o.map(([r,l])=>{s.substats.push({stat:qr[r],value:l})})});return e}function n5(){const e={Head:[{part:"Head",set:"Hunter of Glacial Forest",enhance:15,grade:5,main:{stat:n.HP,value:705.6},id:"cd85c14c-a662-4413-a149-a379e6d538d3",equippedBy:"1212",condensedStats:[[S.CR,.36016],[S.CD,.10368],[S.RES,.03456],[S.BE,.05184],[S.HP,705.6]],weightScore:0,substats:[]}],Hands:[{part:"Hands",set:"Hunter of Glacial Forest",enhance:15,grade:5,main:{stat:n.ATK,value:352.8},id:"798657c8-5c5c-4b44-9c5f-f5f094414289",equippedBy:"1212",condensedStats:[[S.HP_P,.03456],[S.SPD,4],[S.CD,.2268],[S.EHR,.03456],[S.ATK,352.8]],weightScore:0,substats:[]}],Body:[{part:"Body",set:"Hunter of Glacial Forest",enhance:15,grade:5,main:{stat:n.CD,value:64.8},id:"b3376a19-62f9-489e-80e6-8f98335af158",equippedBy:"1212",condensedStats:[[S.HP,114.31138],[S.ATK_P,.07344],[S.DEF_P,.0432],[S.CR,.081],[S.CD,.648]],weightScore:0,substats:[]}],Feet:[{part:"Feet",set:"Hunter of Glacial Forest",enhance:15,grade:5,main:{stat:n.SPD,value:25.032},id:"92c53d06-80d0-43a8-b896-2feeda419674",equippedBy:"1212",condensedStats:[[S.ATK,21.16877],[S.ATK_P,.11664],[S.DEF_P,.0486],[S.CD,.17496],[S.SPD,25.032]],weightScore:0,substats:[]}],PlanarSphere:[{part:"PlanarSphere",set:"Rutilant Arena",enhance:15,grade:5,main:{stat:n.Ice_DMG,value:38.8803},id:"80abbd56-b1a0-4587-a349-754c33627217",equippedBy:"1212",condensedStats:[[S.DEF,74.09071],[S.CR,.05508],[S.CD,.12312],[S.EHR,.0432],[S.ICE_DMG_BOOST,.388803]],weightScore:0,substats:[]}],LinkRope:[{part:"LinkRope",set:"Rutilant Arena",enhance:15,grade:5,main:{stat:n.ATK_P,value:43.2},id:"c521dc03-6c6e-45ef-9933-811367312441",equippedBy:"1212",condensedStats:[[S.HP,80.44134],[S.CR,.08424],[S.CD,.10368],[S.BE,.05832],[S.ATK_P,.43200000000000005]],weightScore:0,substats:[]}]};return a5(e)}const Ko={metadata:{}},Ye="23001",i5=[{characterId:"1001",lightConeId:Ye},{characterId:"1002",lightConeId:Ye},{characterId:"1003",lightConeId:"23000"},{characterId:"1004",lightConeId:"23004"},{characterId:"1005",lightConeId:"23006"},{characterId:"1006",lightConeId:"23007"},{characterId:"1008",lightConeId:Ye},{characterId:"1009",lightConeId:Ye},{characterId:"1013",lightConeId:Ye},{characterId:"1101",lightConeId:"23003"},{characterId:"1102",lightConeId:"23001"},{characterId:"1103",lightConeId:Ye},{characterId:"1104",lightConeId:"23005"},{characterId:"1105",lightConeId:Ye},{characterId:"1106",lightConeId:Ye},{characterId:"1107",lightConeId:"23002"},{characterId:"1108",lightConeId:Ye},{characterId:"1109",lightConeId:Ye},{characterId:"1110",lightConeId:Ye},{characterId:"1111",lightConeId:Ye},{characterId:"1112",lightConeId:"23016"},{characterId:"1201",lightConeId:Ye},{characterId:"1202",lightConeId:Ye},{characterId:"1203",lightConeId:"23008"},{characterId:"1204",lightConeId:"23010"},{characterId:"1205",lightConeId:"23009"},{characterId:"1206",lightConeId:Ye},{characterId:"1207",lightConeId:Ye},{characterId:"1208",lightConeId:"23011"},{characterId:"1209",lightConeId:"23012"},{characterId:"1210",lightConeId:Ye},{characterId:"1211",lightConeId:"23013"},{characterId:"1212",lightConeId:"23014"},{characterId:"1213",lightConeId:"23015"},{characterId:"1214",lightConeId:Ye},{characterId:"1215",lightConeId:Ye},{characterId:"1217",lightConeId:"23017"},{characterId:"1218",lightConeId:"23029"},{characterId:"1220",lightConeId:"23031"},{characterId:"1221",lightConeId:"23030"},{characterId:"1222",lightConeId:"23032"},{characterId:"1223",lightConeId:Ye},{characterId:"1224",lightConeId:Ye},{characterId:"1301",lightConeId:Ye},{characterId:"1302",lightConeId:"23018"},{characterId:"1303",lightConeId:"23019"},{characterId:"1304",lightConeId:"23023"},{characterId:"1305",lightConeId:"23020"},{characterId:"1306",lightConeId:"23021"},{characterId:"1307",lightConeId:"23022"},{characterId:"1308",lightConeId:"23024"},{characterId:"1309",lightConeId:"23026"},{characterId:"1310",lightConeId:"23025"},{characterId:"1312",lightConeId:Ye},{characterId:"1314",lightConeId:"23028"},{characterId:"1315",lightConeId:"23027"},{characterId:"1317",lightConeId:"23033"},{characterId:"1225",lightConeId:"23035"},{characterId:"1313",lightConeId:"23034"},{characterId:"1401",lightConeId:"23037"},{characterId:"1402",lightConeId:"23036"},{characterId:"1403",lightConeId:"23038"},{characterId:"1404",lightConeId:"23039"},{characterId:"1405",lightConeId:"23041"},{characterId:"1407",lightConeId:"23040"},{characterId:"8001",lightConeId:Ye},{characterId:"8002",lightConeId:Ye},{characterId:"8003",lightConeId:Ye},{characterId:"8004",lightConeId:Ye},{characterId:"8005",lightConeId:Ye},{characterId:"8006",lightConeId:Ye},{characterId:"8007",lightConeId:Ye},{characterId:"8008",lightConeId:Ye}];async function s5(){const e=await Ll();return e?(Ko.metadata=V.getMetadata(),[...r5(e),...l5(e),...o5(e),...fu(e,4),...fu(e,3)]):[]}function o5(e){return i5.reverse().map(a=>nr(a.characterId,a.lightConeId,e))}function fu(e,a){const t="1005",o=Object.values(Ko.metadata.lightCones).filter(l=>l.rarity==a),r=[];for(const l of o){const c=nr(t,l.id,e);r.push(c)}return r}function r5(e){const a="1005",t=Ye,s=[];for(const o of gn){const r=nr(a,t,e);r.name+=` — Ornament Sets  — ${o}`,r.relics.LinkRope[0].set=o,r.relics.PlanarSphere[0].set=o,s.push(r)}return s}function l5(e){const a="1005",t=Ye,s=[];for(const o of pn){const r=nr(a,t,e);r.name+=` — Relic Sets  — ${o}`,r.relics.Head[0].set=o,r.relics.Hands[0].set=o,r.relics.Body[0].set=o,r.relics.Feet[0].set=o,s.push(r)}return s}function nr(e,a,t){const s=de.displayToForm(Wi(e,a,6,5)),o=n5();return s.sortOption=k.COMBO.key,zr(s,0,"8008","21051"),zr(s,1,"1225","23035"),zr(s,2,"1309","23026"),t5(`E6S5 ${Ko.metadata.characters[e].displayName} — ${Ko.metadata.lightCones[a].displayName}`,s,o,t)}function zr(e,a,t,s){const o=Wi(t,s,6,5,!0);a==0&&(e.teammate0=o),a==1&&(e.teammate1=o),a==2&&(e.teammate2=o)}function c5(){return window.store(a=>a.activeKey)!=ge.WEBGPU_TEST?i.jsx(i.Fragment,{}):i.jsx(u5,{})}function u5(){const[e,a]=W.useState([]),[t,s]=W.useState(!1);async function o(){s(!1),window.WEBGPU_DEBUG=!0;const r=await s5(),l=r.length;let c=0,u=0;a(r),r.map(d=>d.name=`#${++c} — ${d.name}`);for(const d of r){await d.execute();const m=[...r].sort(d5);a(m),u++,u==l&&s(!0)}}return i.jsxs(D,{vertical:!0,style:{width:1200,minHeight:2e3},children:[i.jsx(se,{type:"primary",onClick:o,style:{height:50,background:t?"#248453":void 0},disabled:!t&&e.length>0,children:t?"Tests complete":"Run all WebGPU tests"}),i.jsx(jo,{items:e.map(m5),expandIconPosition:"end",size:"small"})]})}function d5(e,a){return e.done!==a.done?e.done?-1:1:e.done&&a.done?e.result.allPass===a.result.allPass?0:e.result.allPass?1:-1:0}function m5(e){return{key:e.name,label:i.jsx(S5,{test:e}),children:i.jsx(h5,{test:e})}}const f5=[{title:"",dataIndex:"pass",render:e=>i.jsx(D,{style:{color:e?"#83ec66":"#ef7979",width:"100%"},justify:"space-around",children:e?i.jsx(bo,{}):i.jsx(bl,{})}),width:20},{title:"Stat",dataIndex:"key",render:e=>i.jsx(ps,{text:e}),width:80},{title:"CPU",dataIndex:"cpu",render:e=>i.jsx(ps,{text:e}),width:120},{title:"GPU",dataIndex:"gpu",render:e=>i.jsx(ps,{text:e}),width:120},{title:"Delta",dataIndex:"deltaString",render:e=>i.jsx(ps,{text:e}),width:120},{title:"Precision",dataIndex:"precision",render:e=>i.jsx(ps,{text:e}),width:120}];function h5(e){const{test:a}=e;if(!a.result)return i.jsx(i.Fragment,{});const t=a.result.statDeltas,s=Object.values(t);return s.sort((o,r)=>Number(o.pass)-Number(r.pass)),i.jsx(pi,{columns:f5,dataSource:s,size:"small",pagination:!1})}function S5(e){const{test:a}=e;return a.done?i.jsxs(D,{gap:8,style:{color:a.result.allPass?"#83ec66":"#ef7979"},children:[a.result.allPass?i.jsx(bo,{}):i.jsx(bl,{}),a.name]}):i.jsxs(D,{gap:8,style:{color:"e6e6e6"},children:[i.jsx(Xf,{}),a.name]})}function ps(e){return i.jsx("div",{style:{margin:"0",fontFamily:"Segoe UI, Frutiger, Frutiger Linotype, Dejavu Sans, Helvetica Neue, Arial, sans-serif"},children:e.text})}const af=({error:{message:e}})=>i.jsxs(_e,{children:["Something went wrong: ",e]});let hu=!1;const p5=()=>{const e=window.store(h=>h.activeKey).split("?")[0],a=Lt.useMemo(()=>i.jsx(XB,{}),[]),t=Lt.useMemo(()=>i.jsx(dy,{}),[]),s=Lt.useMemo(()=>i.jsx(zB,{}),[]),o=Lt.useMemo(()=>i.jsx($m,{}),[]),r=Lt.useMemo(()=>i.jsx(LI,{}),[]),l=Lt.useMemo(()=>i.jsx(qm,{}),[]),c=Lt.useMemo(()=>i.jsx(wy,{}),[]),u=Lt.useMemo(()=>i.jsx(rT,{}),[]),d=Lt.useMemo(()=>i.jsx(c5,{}),[]),m=Lt.useMemo(()=>i.jsx(OI,{}),[]);return W.useEffect(()=>{var g,C;let h=Da[e]||Da[ge.OPTIMIZER];if(e==ge.SHOWCASE){const M=(C=(g=window.location.hash.split("?")[1])==null?void 0:g.split("id=")[1])==null?void 0:C.split("&")[0];M&&(h+=`?id=${M}`)}console.log("Navigating activekey to route",e,h),window.history.pushState({},window.title,h),e==ge.OPTIMIZER?hu||(hu=!0,Ya.initializeAllWorkers()):window.scrollTo(0,0)},[e]),i.jsxs(D,{justify:"space-around",style:{width:"100%"},children:[i.jsx(Za,{activeKey:e,tabKey:ge.HOME,content:a}),i.jsx(Za,{activeKey:e,tabKey:ge.OPTIMIZER,content:t}),i.jsx(Za,{activeKey:e,tabKey:ge.CHARACTERS,content:s}),i.jsx(Za,{activeKey:e,tabKey:ge.RELICS,content:o}),i.jsx(Za,{activeKey:e,tabKey:ge.IMPORT,content:r}),i.jsx(Za,{activeKey:e,tabKey:ge.SHOWCASE,content:l}),i.jsx(Za,{activeKey:e,tabKey:ge.WARP,content:c}),i.jsx(Za,{activeKey:e,tabKey:ge.CHANGELOG,content:u}),i.jsx(Za,{activeKey:e,tabKey:ge.WEBGPU_TEST,content:d}),i.jsx(Za,{activeKey:e,tabKey:ge.METADATA_TEST,content:m}),i.jsx(Bl,{fallbackRender:af,children:i.jsx(_E,{})})]})};function Za(e){return i.jsx(Bl,{fallbackRender:af,children:i.jsx("div",{style:{display:e.activeKey===e.tabKey?"contents":"none"},id:e.tabKey,children:e.content})})}const{getDesignToken:g5}=Xt,{Content:b5}=xs,D5=()=>{const[e,a]=Yf.useMessage(),[t,s]=Jf.useNotification(),[o,r]=Vt.useModal();window.messageApi=e,window.notificationApi=t,window.modalApi=o;const l=window.store(u=>u.colorTheme),c=window.store(u=>u.globalThemeConfig);return W.useEffect(()=>{Be.setToken(g5({token:l}))},[l]),W.useEffect(()=>{HE(V.getState().version)},[]),i.jsxs(oi,{theme:c,children:[a,s,r,i.jsxs(xs,{style:{minHeight:"100%"},children:[i.jsx(jE,{}),i.jsxs(xs,{hasSider:!0,children:[i.jsx(qE,{}),i.jsx(b5,{style:{padding:10,margin:0,minHeight:280,marginLeft:"auto",marginRight:"auto",overflow:"initial",display:"flex",justifyContent:"space-around",width:"100%"},children:i.jsx(p5,{})}),i.jsx(CE,{}),i.jsx(nT,{}),i.jsx(iT,{})]})]})]})};function C5(){return i.jsx(D5,{})}const E5={21:{id:"21",affixes:{1:{affix_id:"1",property:"HPDelta",base:45.1584,step:15.80544}}},22:{id:"22",affixes:{1:{affix_id:"1",property:"AttackDelta",base:22.5792,step:7.90272}}},23:{id:"23",affixes:{1:{affix_id:"1",property:"HPAddedRatio",base:.027648,step:.009677},2:{affix_id:"2",property:"AttackAddedRatio",base:.027648,step:.009677},3:{affix_id:"3",property:"DefenceAddedRatio",base:.034560002,step:.012096001},4:{affix_id:"4",property:"CriticalChanceBase",base:.020736001,step:.007258},5:{affix_id:"5",property:"CriticalDamageBase",base:.041472,step:.014515},6:{affix_id:"6",property:"HealRatioBase",base:.022118,step:.0077410005},7:{affix_id:"7",property:"StatusProbabilityBase",base:.027648,step:.009677}}},24:{id:"24",affixes:{1:{affix_id:"1",property:"HPAddedRatio",base:.027648,step:.009677},2:{affix_id:"2",property:"AttackAddedRatio",base:.027648,step:.009677},3:{affix_id:"3",property:"DefenceAddedRatio",base:.034560002,step:.012096001},4:{affix_id:"4",property:"SpeedDelta",base:1.6128,step:1}}},25:{id:"25",affixes:{1:{affix_id:"1",property:"HPAddedRatio",base:.027648,step:.009677},2:{affix_id:"2",property:"AttackAddedRatio",base:.027648,step:.009677},3:{affix_id:"3",property:"DefenceAddedRatio",base:.034560002,step:.012096001},4:{affix_id:"4",property:"PhysicalAddedRatio",base:.024883,step:.008709},5:{affix_id:"5",property:"FireAddedRatio",base:.024883,step:.008709},6:{affix_id:"6",property:"IceAddedRatio",base:.024883,step:.008709},7:{affix_id:"7",property:"ThunderAddedRatio",base:.024883,step:.008709},8:{affix_id:"8",property:"WindAddedRatio",base:.024883,step:.008709},9:{affix_id:"9",property:"QuantumAddedRatio",base:.024883,step:.008709},10:{affix_id:"10",property:"ImaginaryAddedRatio",base:.024883,step:.008709}}},26:{id:"26",affixes:{1:{affix_id:"1",property:"BreakDamageAddedRatioBase",base:.041472,step:.014515},2:{affix_id:"2",property:"SPRatioBase",base:.012442,step:.0043550003},3:{affix_id:"3",property:"HPAddedRatio",base:.027648,step:.009677},4:{affix_id:"4",property:"AttackAddedRatio",base:.027648,step:.009677},5:{affix_id:"5",property:"DefenceAddedRatio",base:.034560002,step:.012096001}}},31:{id:"31",affixes:{1:{affix_id:"1",property:"HPDelta",base:67.7376,step:23.70816}}},32:{id:"32",affixes:{1:{affix_id:"1",property:"AttackDelta",base:33.8688,step:11.85408}}},33:{id:"33",affixes:{1:{affix_id:"1",property:"HPAddedRatio",base:.041472,step:.014515},2:{affix_id:"2",property:"AttackAddedRatio",base:.041472,step:.014515},3:{affix_id:"3",property:"DefenceAddedRatio",base:.05184,step:.018144},4:{affix_id:"4",property:"CriticalChanceBase",base:.031104,step:.010886001},5:{affix_id:"5",property:"CriticalDamageBase",base:.062208,step:.021773001},6:{affix_id:"6",property:"HealRatioBase",base:.033178,step:.011612},7:{affix_id:"7",property:"StatusProbabilityBase",base:.041472,step:.014515}}},34:{id:"34",affixes:{1:{affix_id:"1",property:"HPAddedRatio",base:.041472,step:.014515},2:{affix_id:"2",property:"AttackAddedRatio",base:.041472,step:.014515},3:{affix_id:"3",property:"DefenceAddedRatio",base:.05184,step:.018144},4:{affix_id:"4",property:"SpeedDelta",base:2.4192,step:1}}},35:{id:"35",affixes:{1:{affix_id:"1",property:"HPAddedRatio",base:.041472,step:.014515},2:{affix_id:"2",property:"AttackAddedRatio",base:.041472,step:.014515},3:{affix_id:"3",property:"DefenceAddedRatio",base:.05184,step:.018144},4:{affix_id:"4",property:"PhysicalAddedRatio",base:.037325,step:.013064001},5:{affix_id:"5",property:"FireAddedRatio",base:.037325,step:.013064001},6:{affix_id:"6",property:"IceAddedRatio",base:.037325,step:.013064001},7:{affix_id:"7",property:"ThunderAddedRatio",base:.037325,step:.013064001},8:{affix_id:"8",property:"WindAddedRatio",base:.037325,step:.013064001},9:{affix_id:"9",property:"QuantumAddedRatio",base:.037325,step:.013064001},10:{affix_id:"10",property:"ImaginaryAddedRatio",base:.037325,step:.013064001}}},36:{id:"36",affixes:{1:{affix_id:"1",property:"BreakDamageAddedRatioBase",base:.062208,step:.021773001},2:{affix_id:"2",property:"SPRatioBase",base:.018662,step:.0065320004},3:{affix_id:"3",property:"HPAddedRatio",base:.041472,step:.014515},4:{affix_id:"4",property:"AttackAddedRatio",base:.041472,step:.014515},5:{affix_id:"5",property:"DefenceAddedRatio",base:.05184,step:.018144}}},41:{id:"41",affixes:{1:{affix_id:"1",property:"HPDelta",base:90.3168,step:31.61088}}},42:{id:"42",affixes:{1:{affix_id:"1",property:"AttackDelta",base:45.1584,step:15.80544}}},43:{id:"43",affixes:{1:{affix_id:"1",property:"HPAddedRatio",base:.055296,step:.019354},2:{affix_id:"2",property:"AttackAddedRatio",base:.055296,step:.019354},3:{affix_id:"3",property:"DefenceAddedRatio",base:.06912,step:.024192},4:{affix_id:"4",property:"CriticalChanceBase",base:.041472,step:.014515},5:{affix_id:"5",property:"CriticalDamageBase",base:.082944,step:.029029999},6:{affix_id:"6",property:"HealRatioBase",base:.044237,step:.015483},7:{affix_id:"7",property:"StatusProbabilityBase",base:.055296,step:.019354}}},44:{id:"44",affixes:{1:{affix_id:"1",property:"HPAddedRatio",base:.055296,step:.019354},2:{affix_id:"2",property:"AttackAddedRatio",base:.055296,step:.019354},3:{affix_id:"3",property:"DefenceAddedRatio",base:.06912,step:.024192},4:{affix_id:"4",property:"SpeedDelta",base:3.2256,step:1.1}}},45:{id:"45",affixes:{1:{affix_id:"1",property:"HPAddedRatio",base:.055296,step:.019354},2:{affix_id:"2",property:"AttackAddedRatio",base:.055296,step:.019354},3:{affix_id:"3",property:"DefenceAddedRatio",base:.06912,step:.024192},4:{affix_id:"4",property:"PhysicalAddedRatio",base:.049766,step:.017418},5:{affix_id:"5",property:"FireAddedRatio",base:.049766,step:.017418},6:{affix_id:"6",property:"IceAddedRatio",base:.049766,step:.017418},7:{affix_id:"7",property:"ThunderAddedRatio",base:.049766,step:.017418},8:{affix_id:"8",property:"WindAddedRatio",base:.049766,step:.017418},9:{affix_id:"9",property:"QuantumAddedRatio",base:.049766,step:.017418},10:{affix_id:"10",property:"ImaginaryAddedRatio",base:.049766,step:.017418}}},46:{id:"46",affixes:{1:{affix_id:"1",property:"BreakDamageAddedRatioBase",base:.082944,step:.029029999},2:{affix_id:"2",property:"SPRatioBase",base:.024883,step:.008709},3:{affix_id:"3",property:"HPAddedRatio",base:.055296,step:.019354},4:{affix_id:"4",property:"AttackAddedRatio",base:.055296,step:.019354},5:{affix_id:"5",property:"DefenceAddedRatio",base:.06912,step:.024192}}},51:{id:"51",affixes:{1:{affix_id:"1",property:"HPDelta",base:112.896,step:39.5136}}},52:{id:"52",affixes:{1:{affix_id:"1",property:"AttackDelta",base:56.448,step:19.7568}}},53:{id:"53",affixes:{1:{affix_id:"1",property:"HPAddedRatio",base:.06912,step:.024192},2:{affix_id:"2",property:"AttackAddedRatio",base:.06912,step:.024192},3:{affix_id:"3",property:"DefenceAddedRatio",base:.0864,step:.030240001},4:{affix_id:"4",property:"CriticalChanceBase",base:.05184,step:.018144},5:{affix_id:"5",property:"CriticalDamageBase",base:.10368,step:.036288},6:{affix_id:"6",property:"HealRatioBase",base:.055296,step:.019354},7:{affix_id:"7",property:"StatusProbabilityBase",base:.06912,step:.024192}}},54:{id:"54",affixes:{1:{affix_id:"1",property:"HPAddedRatio",base:.06912,step:.024192},2:{affix_id:"2",property:"AttackAddedRatio",base:.06912,step:.024192},3:{affix_id:"3",property:"DefenceAddedRatio",base:.0864,step:.030240001},4:{affix_id:"4",property:"SpeedDelta",base:4.032,step:1.4}}},55:{id:"55",affixes:{1:{affix_id:"1",property:"HPAddedRatio",base:.06912,step:.024192},2:{affix_id:"2",property:"AttackAddedRatio",base:.06912,step:.024192},3:{affix_id:"3",property:"DefenceAddedRatio",base:.0864,step:.030240001},4:{affix_id:"4",property:"PhysicalAddedRatio",base:.062208,step:.021773001},5:{affix_id:"5",property:"FireAddedRatio",base:.062208,step:.021773001},6:{affix_id:"6",property:"IceAddedRatio",base:.062208,step:.021773001},7:{affix_id:"7",property:"ThunderAddedRatio",base:.062208,step:.021773001},8:{affix_id:"8",property:"WindAddedRatio",base:.062208,step:.021773001},9:{affix_id:"9",property:"QuantumAddedRatio",base:.062208,step:.021773001},10:{affix_id:"10",property:"ImaginaryAddedRatio",base:.062208,step:.021773001}}},56:{id:"56",affixes:{1:{affix_id:"1",property:"BreakDamageAddedRatioBase",base:.10368,step:.036288},2:{affix_id:"2",property:"SPRatioBase",base:.031104,step:.010886001},3:{affix_id:"3",property:"HPAddedRatio",base:.06912,step:.024192},4:{affix_id:"4",property:"AttackAddedRatio",base:.06912,step:.024192},5:{affix_id:"5",property:"DefenceAddedRatio",base:.0864,step:.030240001}}},433:{id:"433",affixes:{1:{affix_id:"1",property:"DefenceAddedRatio",base:.06912,step:.024192}}},434:{id:"434",affixes:{1:{affix_id:"1",property:"CriticalChanceBase",base:.041472,step:.014515}}},436:{id:"436",affixes:{1:{affix_id:"1",property:"HealRatioBase",base:.044237,step:.015483}}},441:{id:"441",affixes:{1:{affix_id:"1",property:"HPAddedRatio",base:.055296,step:.019354}}},443:{id:"443",affixes:{1:{affix_id:"1",property:"DefenceAddedRatio",base:.06912,step:.024192}}}},T5={2:{id:"2",affixes:{1:{affix_id:"1",property:"HPDelta",base:13.548016,step:1.693502,step_num:2},2:{affix_id:"2",property:"AttackDelta",base:6.774008,step:.846751,step_num:2},3:{affix_id:"3",property:"DefenceDelta",base:6.774008,step:.846751,step_num:2},4:{affix_id:"4",property:"HPAddedRatio",base:.013824001,step:.0017280006,step_num:2},5:{affix_id:"5",property:"AttackAddedRatio",base:.013824001,step:.0017280006,step_num:2},6:{affix_id:"6",property:"DefenceAddedRatio",base:.017280001,step:.0021600004,step_num:2},7:{affix_id:"7",property:"SpeedDelta",base:1,step:.1,step_num:2},8:{affix_id:"8",property:"CriticalChanceBase",base:.010368001,step:.0012960008,step_num:2},9:{affix_id:"9",property:"CriticalDamageBase",base:.020736001,step:.0025920009,step_num:2},10:{affix_id:"10",property:"StatusProbabilityBase",base:.013824001,step:.0017280006,step_num:2},11:{affix_id:"11",property:"StatusResistanceBase",base:.013824001,step:.0017280006,step_num:2},12:{affix_id:"12",property:"BreakDamageAddedRatioBase",base:.020736001,step:.0025920009,step_num:2}}},3:{id:"3",affixes:{1:{affix_id:"1",property:"HPDelta",base:20.322023,step:2.540253,step_num:2},2:{affix_id:"2",property:"AttackDelta",base:10.161012,step:1.270126,step_num:2},3:{affix_id:"3",property:"DefenceDelta",base:10.161012,step:1.270126,step_num:2},4:{affix_id:"4",property:"HPAddedRatio",base:.020736001,step:.0025920009,step_num:2},5:{affix_id:"5",property:"AttackAddedRatio",base:.020736001,step:.0025920009,step_num:2},6:{affix_id:"6",property:"DefenceAddedRatio",base:.02592,step:.0032400002,step_num:2},7:{affix_id:"7",property:"SpeedDelta",base:1.2,step:.1,step_num:2},8:{affix_id:"8",property:"CriticalChanceBase",base:.015552,step:.0019440008,step_num:2},9:{affix_id:"9",property:"CriticalDamageBase",base:.031104,step:.003888001,step_num:2},10:{affix_id:"10",property:"StatusProbabilityBase",base:.020736001,step:.0025920009,step_num:2},11:{affix_id:"11",property:"StatusResistanceBase",base:.020736001,step:.0025920009,step_num:2},12:{affix_id:"12",property:"BreakDamageAddedRatioBase",base:.031104,step:.003888001,step_num:2}}},4:{id:"4",affixes:{1:{affix_id:"1",property:"HPDelta",base:27.096031,step:3.387004,step_num:2},2:{affix_id:"2",property:"AttackDelta",base:13.548016,step:1.693502,step_num:2},3:{affix_id:"3",property:"DefenceDelta",base:13.548016,step:1.693502,step_num:2},4:{affix_id:"4",property:"HPAddedRatio",base:.027648,step:.0034560005,step_num:2},5:{affix_id:"5",property:"AttackAddedRatio",base:.027648,step:.0034560005,step_num:2},6:{affix_id:"6",property:"DefenceAddedRatio",base:.034560002,step:.0043200003,step_num:2},7:{affix_id:"7",property:"SpeedDelta",base:1.6,step:.2,step_num:2},8:{affix_id:"8",property:"CriticalChanceBase",base:.020736001,step:.0025920009,step_num:2},9:{affix_id:"9",property:"CriticalDamageBase",base:.041472,step:.0051840004,step_num:2},10:{affix_id:"10",property:"StatusProbabilityBase",base:.027648,step:.0034560005,step_num:2},11:{affix_id:"11",property:"StatusResistanceBase",base:.027648,step:.0034560005,step_num:2},12:{affix_id:"12",property:"BreakDamageAddedRatioBase",base:.041472,step:.0051840004,step_num:2}}},5:{id:"5",affixes:{1:{affix_id:"1",property:"HPDelta",base:33.87004,step:4.233755,step_num:2},2:{affix_id:"2",property:"AttackDelta",base:16.935019,step:2.116877,step_num:2},3:{affix_id:"3",property:"DefenceDelta",base:16.935019,step:2.116877,step_num:2},4:{affix_id:"4",property:"HPAddedRatio",base:.034560002,step:.0043200003,step_num:2},5:{affix_id:"5",property:"AttackAddedRatio",base:.034560002,step:.0043200003,step_num:2},6:{affix_id:"6",property:"DefenceAddedRatio",base:.0432,step:.0054,step_num:2},7:{affix_id:"7",property:"SpeedDelta",base:2,step:.3,step_num:2},8:{affix_id:"8",property:"CriticalChanceBase",base:.02592,step:.0032400002,step_num:2},9:{affix_id:"9",property:"CriticalDamageBase",base:.05184,step:.0064800004,step_num:2},10:{affix_id:"10",property:"StatusProbabilityBase",base:.034560002,step:.0043200003,step_num:2},11:{affix_id:"11",property:"StatusResistanceBase",base:.034560002,step:.0043200003,step_num:2},12:{affix_id:"12",property:"BreakDamageAddedRatioBase",base:.05184,step:.0064800004,step_num:2}}}},Oe=null,rt="BASIC",ue="SKILL",Ae="ULT",ke="FUA",Jn="MEMO_SKILL",R5="MEMO_TALENT",ln=Nn.characters,Su=Nn.lightCones,Xr=[G.MessengerTraversingHackerspace,G.SacerdosRelivedOrdeal,G.ThiefOfShootingMeteor,G.WatchmakerMasterOfDreamMachinations,G.IronCavalryAgainstTheScourge],ve=[[G.PoetOfMourningCollapse,G.PoetOfMourningCollapse],[G.PioneerDiverOfDeadWaters,G.PioneerDiverOfDeadWaters],[G.EagleOfTwilightLine,G.EagleOfTwilightLine]],sa=[G.DuranDynastyOfRunningWolves,G.SigoniaTheUnclaimedDesolation,G.InertSalsotto],Ze=[G.SigoniaTheUnclaimedDesolation],pu=[G.SprightlyVonwacq,G.PenaconyLandOfTheDreams,G.LushakaTheSunkenSeas],gu=[G.SprightlyVonwacq,G.BrokenKeel,G.PenaconyLandOfTheDreams,G.FleetOfTheAgeless,G.LushakaTheSunkenSeas],nf={initialize:()=>{const e=I5(),a=y5(),t=ln;for(const d of Object.values(Su)){const m=d.id;e[m]?d.superimpositions=e[m]:d.superimpositions={};let h=200;a[m]!=null&&a[m]&&(h=a[m]),d.displayName=d.name,d.imageCenter=h}const s=M5(),o=G5(),r=Object.values(o);for(const d of r)for(const m of[E.Body,E.Feet,E.PlanarSphere,E.LinkRope])d.parts[m].length===0&&(d.parts[m]=Il[m]);for(const[d,m]of Object.entries(ln)){if(!ln[d])continue;let h={x:1024,y:1024,z:1};s[d]!=null&&(h=s[d]),ln[d].traces=m.traces,ln[d].traceTree=m.traceTree,ln[d].imageCenter=h,ln[d].displayName=B5(ln[d]),ln[d].scoringMetadata=o[d]}const l=Nn.relics.reduce((d,m)=>(d[m.id]=m,d),{}),u={characters:t,lightCones:Su,relics:{relicMainAffixes:E5,relicSubAffixes:T5,relicSets:l}};return V.setMetadata(u),u}},bu={8001:"Caelus (Destruction)",8002:"Stelle (Destruction)",8003:"Caelus (Preservation)",8004:"Stelle (Preservation)",8005:"Caelus (Harmony)",8006:"Stelle (Harmony)",8007:"Caelus (Remembrance)",8008:"Stelle (Remembrance)",1213:"Imbibitor Lunae",1224:"March 7th (Hunt)"};function B5(e){return e.id in bu?bu[e.id]:e.name}function I5(){return{2e4:{},20001:{},20002:{},20003:{1:{[n.DEF_P]:.16},2:{[n.DEF_P]:.2},3:{[n.DEF_P]:.24},4:{[n.DEF_P]:.28},5:{[n.DEF_P]:.32}},20004:{},20005:{},20006:{},20007:{},20008:{},20009:{},20010:{},20011:{},20012:{},20013:{},20014:{},20015:{},20016:{},20017:{},20018:{},20019:{},20020:{},20021:{},20022:{},21e3:{1:{[n.ERR]:.08},2:{[n.ERR]:.1},3:{[n.ERR]:.12},4:{[n.ERR]:.14},5:{[n.ERR]:.16}},21001:{},21002:{1:{[n.DEF_P]:.16},2:{[n.DEF_P]:.18},3:{[n.DEF_P]:.2},4:{[n.DEF_P]:.22},5:{[n.DEF_P]:.24}},21003:{1:{[n.ATK_P]:.16},2:{[n.ATK_P]:.2},3:{[n.ATK_P]:.24},4:{[n.ATK_P]:.28},5:{[n.ATK_P]:.32}},21004:{1:{[n.BE]:.28},2:{[n.BE]:.35},3:{[n.BE]:.42},4:{[n.BE]:.49},5:{[n.BE]:.56}},21005:{},21006:{},21007:{1:{[n.OHB]:.1},2:{[n.OHB]:.125},3:{[n.OHB]:.15},4:{[n.OHB]:.175},5:{[n.OHB]:.2}},21008:{1:{[n.EHR]:.2},2:{[n.EHR]:.25},3:{[n.EHR]:.3},4:{[n.EHR]:.35},5:{[n.EHR]:.4}},21009:{},21010:{},21011:{},21012:{},21013:{},21014:{1:{[n.RES]:.16},2:{[n.RES]:.2},3:{[n.RES]:.24},4:{[n.RES]:.28},5:{[n.RES]:.32}},21015:{},21016:{1:{[n.DEF_P]:.16},2:{[n.DEF_P]:.2},3:{[n.DEF_P]:.24},4:{[n.DEF_P]:.28},5:{[n.DEF_P]:.32}},21017:{},21018:{},21019:{1:{[n.ATK_P]:.16},2:{[n.ATK_P]:.2},3:{[n.ATK_P]:.24},4:{[n.ATK_P]:.28},5:{[n.ATK_P]:.32}},21020:{1:{[n.ATK_P]:.16},2:{[n.ATK_P]:.2},3:{[n.ATK_P]:.24},4:{[n.ATK_P]:.28},5:{[n.ATK_P]:.32}},21021:{},21022:{1:{[n.BE]:.16},2:{[n.BE]:.2},3:{[n.BE]:.24},4:{[n.BE]:.28},5:{[n.BE]:.32}},21023:{},21024:{},21025:{},21026:{1:{[n.ATK_P]:.1},2:{[n.ATK_P]:.125},3:{[n.ATK_P]:.15},4:{[n.ATK_P]:.175},5:{[n.ATK_P]:.2}},21027:{},21028:{1:{[n.HP_P]:.16},2:{[n.HP_P]:.2},3:{[n.HP_P]:.24},4:{[n.HP_P]:.28},5:{[n.HP_P]:.32}},21029:{},21030:{1:{[n.DEF_P]:.16},2:{[n.DEF_P]:.2},3:{[n.DEF_P]:.24},4:{[n.DEF_P]:.28},5:{[n.DEF_P]:.32}},21031:{1:{[n.CR]:.12},2:{[n.CR]:.15},3:{[n.CR]:.18},4:{[n.CR]:.21},5:{[n.CR]:.24}},21032:{},21033:{1:{[n.ATK_P]:.24},2:{[n.ATK_P]:.3},3:{[n.ATK_P]:.36},4:{[n.ATK_P]:.42},5:{[n.ATK_P]:.48}},21034:{},21035:{1:{[n.BE]:.24},2:{[n.BE]:.3},3:{[n.BE]:.36},4:{[n.BE]:.42},5:{[n.BE]:.48}},21036:{},21037:{1:{[n.ATK_P]:.12},2:{[n.ATK_P]:.14},3:{[n.ATK_P]:.16},4:{[n.ATK_P]:.18},5:{[n.ATK_P]:.2}},21038:{},21039:{1:{[n.RES]:.12},2:{[n.RES]:.14},3:{[n.RES]:.16},4:{[n.RES]:.18},5:{[n.RES]:.2}},21040:{1:{[n.ATK_P]:.16},2:{[n.ATK_P]:.18},3:{[n.ATK_P]:.2},4:{[n.ATK_P]:.22},5:{[n.ATK_P]:.24}},21041:{},21042:{1:{[n.BE]:.28},2:{[n.BE]:.35},3:{[n.BE]:.42},4:{[n.BE]:.49},5:{[n.BE]:.56}},21043:{1:{[n.DEF_P]:.16},2:{[n.DEF_P]:.2},3:{[n.DEF_P]:.24},4:{[n.DEF_P]:.28},5:{[n.DEF_P]:.32}},21044:{1:{[n.CR]:.08},2:{[n.CR]:.1},3:{[n.CR]:.12},4:{[n.CR]:.14},5:{[n.CR]:.16}},21045:{1:{[f.Stats.BE]:.28},2:{[f.Stats.BE]:.35},3:{[f.Stats.BE]:.42},4:{[f.Stats.BE]:.49},5:{[f.Stats.BE]:.56}},21046:{1:{[f.Stats.ATK_P]:.16},2:{[f.Stats.ATK_P]:.2},3:{[f.Stats.ATK_P]:.24},4:{[f.Stats.ATK_P]:.28},5:{[f.Stats.ATK_P]:.32}},21047:{1:{[f.Stats.BE]:.28},2:{[f.Stats.BE]:.35},3:{[f.Stats.BE]:.42},4:{[f.Stats.BE]:.49},5:{[f.Stats.BE]:.56}},21048:{1:{[f.Stats.SPD_P]:.08},2:{[f.Stats.SPD_P]:.09},3:{[f.Stats.SPD_P]:.1},4:{[f.Stats.SPD_P]:.11},5:{[f.Stats.SPD_P]:.12}},21050:{1:{[f.Stats.CD]:.12},2:{[f.Stats.CD]:.15},3:{[f.Stats.CD]:.18},4:{[f.Stats.CD]:.21},5:{[f.Stats.CD]:.24}},21051:{1:{[f.Stats.ATK_P]:.16},2:{[f.Stats.ATK_P]:.2},3:{[f.Stats.ATK_P]:.24},4:{[f.Stats.ATK_P]:.28},5:{[f.Stats.ATK_P]:.32}},21052:{1:{[n.CR]:.12},2:{[n.CR]:.14},3:{[n.CR]:.16},4:{[n.CR]:.18},5:{[n.CR]:.2}},22e3:{1:{[n.EHR]:.2},2:{[n.EHR]:.25},3:{[n.EHR]:.3},4:{[n.EHR]:.35},5:{[n.EHR]:.4}},22001:{1:{[n.HP_P]:.08},2:{[n.HP_P]:.09},3:{[n.HP_P]:.1},4:{[n.HP_P]:.11},5:{[n.HP_P]:.12}},22002:{1:{[n.ATK_P]:.16},2:{[n.ATK_P]:.2},3:{[n.ATK_P]:.24},4:{[n.ATK_P]:.28},5:{[n.ATK_P]:.32}},22003:{1:{[n.HP_P]:.12},2:{[n.HP_P]:.15},3:{[n.HP_P]:.18},4:{[n.HP_P]:.21},5:{[n.HP_P]:.24}},22004:{1:{[n.ATK_P]:.08},2:{[n.ATK_P]:.1},3:{[n.ATK_P]:.12},4:{[n.ATK_P]:.14},5:{[n.ATK_P]:.16}},23e3:{},23001:{1:{[n.CR]:.18},2:{[n.CR]:.21},3:{[n.CR]:.24},4:{[n.CR]:.27},5:{[n.CR]:.3}},23002:{1:{[n.ATK_P]:.24},2:{[n.ATK_P]:.28},3:{[n.ATK_P]:.32},4:{[n.ATK_P]:.36},5:{[n.ATK_P]:.4}},23003:{1:{[n.ERR]:.1},2:{[n.ERR]:.12},3:{[n.ERR]:.14},4:{[n.ERR]:.16},5:{[n.ERR]:.18}},23004:{},23005:{1:{[n.DEF_P]:.24,[n.EHR]:.24},2:{[n.DEF_P]:.28,[n.EHR]:.28},3:{[n.DEF_P]:.32,[n.EHR]:.32},4:{[n.DEF_P]:.36,[n.EHR]:.36},5:{[n.DEF_P]:.4,[n.EHR]:.4}},23006:{},23007:{1:{[n.EHR]:.24},2:{[n.EHR]:.28},3:{[n.EHR]:.32},4:{[n.EHR]:.36},5:{[n.EHR]:.4}},23008:{1:{[n.ATK_P]:.24},2:{[n.ATK_P]:.28},3:{[n.ATK_P]:.32},4:{[n.ATK_P]:.36},5:{[n.ATK_P]:.4}},23009:{1:{[n.CR]:.18,[n.HP_P]:.18},2:{[n.CR]:.21,[n.HP_P]:.21},3:{[n.CR]:.24,[n.HP_P]:.24},4:{[n.CR]:.27,[n.HP_P]:.27},5:{[n.CR]:.3,[n.HP_P]:.3}},23010:{1:{[n.CD]:.36},2:{[n.CD]:.42},3:{[n.CD]:.48},4:{[n.CD]:.54},5:{[n.CD]:.6}},23011:{1:{[n.HP_P]:.24,[n.ERR]:.12},2:{[n.HP_P]:.28,[n.ERR]:.14},3:{[n.HP_P]:.32,[n.ERR]:.16},4:{[n.HP_P]:.36,[n.ERR]:.18},5:{[n.HP_P]:.4,[n.ERR]:.2}},23012:{1:{[n.CD]:.3},2:{[n.CD]:.35},3:{[n.CD]:.4},4:{[n.CD]:.45},5:{[n.CD]:.5}},23013:{1:{[n.HP_P]:.18,[n.OHB]:.12},2:{[n.HP_P]:.21,[n.OHB]:.14},3:{[n.HP_P]:.24,[n.OHB]:.16},4:{[n.HP_P]:.27,[n.OHB]:.18},5:{[n.HP_P]:.3,[n.OHB]:.2}},23014:{1:{[n.CD]:.2},2:{[n.CD]:.23},3:{[n.CD]:.26},4:{[n.CD]:.29},5:{[n.CD]:.32}},23015:{1:{[n.CR]:.18},2:{[n.CR]:.21},3:{[n.CR]:.24},4:{[n.CR]:.27},5:{[n.CR]:.3}},23016:{1:{[n.CR]:.18},2:{[n.CR]:.21},3:{[n.CR]:.24},4:{[n.CR]:.27},5:{[n.CR]:.3}},23017:{1:{[n.ERR]:.12},2:{[n.ERR]:.14},3:{[n.ERR]:.16},4:{[n.ERR]:.18},5:{[n.ERR]:.2}},23018:{1:{[n.CD]:.36},2:{[n.CD]:.42},3:{[n.CD]:.48},4:{[n.CD]:.54},5:{[n.CD]:.6}},23019:{1:{[n.BE]:.6},2:{[n.BE]:.7},3:{[n.BE]:.8},4:{[n.BE]:.9},5:{[n.BE]:1}},23020:{1:{[n.CD]:.2},2:{[n.CD]:.23},3:{[n.CD]:.26},4:{[n.CD]:.29},5:{[n.CD]:.32}},23021:{1:{[n.CD]:.32},2:{[n.CD]:.39},3:{[n.CD]:.46},4:{[n.CD]:.53},5:{[n.CD]:.6}},23022:{1:{[n.EHR]:.4},2:{[n.EHR]:.45},3:{[n.EHR]:.5},4:{[n.EHR]:.55},5:{[n.EHR]:.6}},23023:{1:{[n.DEF_P]:.4},2:{[n.DEF_P]:.46},3:{[n.DEF_P]:.52},4:{[n.DEF_P]:.58},5:{[n.DEF_P]:.64}},23024:{1:{[n.CD]:.36},2:{[n.CD]:.42},3:{[n.CD]:.48},4:{[n.CD]:.54},5:{[n.CD]:.6}},23025:{1:{[f.Stats.BE]:.6},2:{[f.Stats.BE]:.7},3:{[f.Stats.BE]:.8},4:{[f.Stats.BE]:.9},5:{[f.Stats.BE]:1}},23026:{},23027:{1:{[n.BE]:.6},2:{[n.BE]:.7},3:{[n.BE]:.8},4:{[n.BE]:.9},5:{[n.BE]:1}},23028:{1:{[f.Stats.CR]:.16},2:{[f.Stats.CR]:.19},3:{[f.Stats.CR]:.22},4:{[f.Stats.CR]:.25},5:{[f.Stats.CR]:.28}},23029:{1:{[f.Stats.EHR]:.6},2:{[f.Stats.EHR]:.7},3:{[f.Stats.EHR]:.8},4:{[f.Stats.EHR]:.9},5:{[f.Stats.EHR]:1}},23030:{1:{[f.Stats.CD]:.36},2:{[f.Stats.CD]:.42},3:{[f.Stats.CD]:.48},4:{[f.Stats.CD]:.54},5:{[f.Stats.CD]:.6}},23031:{1:{[f.Stats.CR]:.15},2:{[f.Stats.CR]:.175},3:{[f.Stats.CR]:.2},4:{[f.Stats.CR]:.225},5:{[f.Stats.CR]:.25}},23032:{1:{[f.Stats.BE]:.6},2:{[f.Stats.BE]:.7},3:{[f.Stats.BE]:.8},4:{[f.Stats.BE]:.9},5:{[f.Stats.BE]:1}},23033:{1:{[f.Stats.BE]:.6},2:{[f.Stats.BE]:.7},3:{[f.Stats.BE]:.8},4:{[f.Stats.BE]:.9},5:{[f.Stats.BE]:1}},23034:{},23035:{1:{[f.Stats.BE]:.6},2:{[f.Stats.BE]:.7},3:{[f.Stats.BE]:.8},4:{[f.Stats.BE]:.9},5:{[f.Stats.BE]:1}},23036:{1:{[f.Stats.SPD]:12},2:{[f.Stats.SPD]:14},3:{[f.Stats.SPD]:16},4:{[f.Stats.SPD]:18},5:{[f.Stats.SPD]:20}},23037:{1:{[f.Stats.CR]:.12},2:{[f.Stats.CR]:.14},3:{[f.Stats.CR]:.16},4:{[f.Stats.CR]:.18},5:{[f.Stats.CR]:.2}},23038:{1:{[f.Stats.CD]:.36},2:{[f.Stats.CD]:.42},3:{[f.Stats.CD]:.48},4:{[f.Stats.CD]:.54},5:{[f.Stats.CD]:.6}},23039:{1:{[f.Stats.HP_P]:.18},2:{[f.Stats.HP_P]:.21},3:{[f.Stats.HP_P]:.24},4:{[f.Stats.HP_P]:.27},5:{[f.Stats.HP_P]:.3}},23040:{1:{[f.Stats.HP_P]:.3},2:{[f.Stats.HP_P]:.375},3:{[f.Stats.HP_P]:.45},4:{[f.Stats.HP_P]:.525},5:{[f.Stats.HP_P]:.6}},23041:{},24e3:{},24001:{1:{[n.CR]:.08},2:{[n.CR]:.1},3:{[n.CR]:.12},4:{[n.CR]:.14},5:{[n.CR]:.16}},24002:{1:{[n.RES]:.08},2:{[n.RES]:.1},3:{[n.RES]:.12},4:{[n.RES]:.14},5:{[n.RES]:.16}},24003:{1:{[n.BE]:.2},2:{[n.BE]:.25},3:{[n.BE]:.3},4:{[n.BE]:.35},5:{[n.BE]:.4}},24004:{1:{[f.Stats.ATK_P]:.08},2:{[f.Stats.ATK_P]:.09},3:{[f.Stats.ATK_P]:.1},4:{[f.Stats.ATK_P]:.11},5:{[f.Stats.ATK_P]:.12}},24005:{1:{[f.Stats.SPD_P]:.06},2:{[f.Stats.SPD_P]:.075},3:{[f.Stats.SPD_P]:.09},4:{[f.Stats.SPD_P]:.105},5:{[f.Stats.SPD_P]:.12}}}}function y5(){return{2e4:270,20001:220,20002:160,20003:310,20004:180,20005:210,20006:390,20007:180,20008:220,20009:230,20010:250,20011:390,20012:300,20013:220,20014:210,20015:270,20016:270,20017:410,20018:190,20019:230,20020:250,21e3:150,21001:290,21002:160,21003:195,21004:150,21005:250,21006:170,21007:240,21008:140,21009:140,21010:160,21011:115,21012:160,21013:200,21014:140,21015:125,21016:180,21017:140,21018:210,21019:180,21020:230,21021:180,21022:300,21023:240,21024:140,21025:125,21026:160,21027:200,21028:250,21029:160,21030:305,21031:190,21032:245,21033:140,21034:220,21035:300,21036:220,21037:210,21038:130,21039:220,21040:150,21041:160,21042:200,21043:220,21044:150,21045:160,21046:145,21047:145,21048:250,22e3:275,22001:220,22002:160,22003:185,23e3:140,23001:150,23002:160,23003:250,23004:140,23005:150,23006:200,23007:210,23008:160,23009:130,23010:180,23011:180,23012:300,23013:180,23014:120,23015:190,23016:130,23017:190,23018:170,23019:270,23020:220,23021:150,23022:190,23023:140,23024:80,23025:125,23026:180,23027:140,23028:150,23029:140,23031:145,23032:180,23033:175,23034:175,23035:175,24e3:170,24001:270,24002:170,24003:250,24004:270,23037:150,23036:180,21052:200,21051:180,21050:260,20022:305,20021:320,23038:210,23039:165,24005:300}}function M5(){return{1001:{x:985,y:1075,z:1.05},1002:{x:1024,y:1e3,z:1},1003:{x:1015,y:1215,z:1.05},1004:{x:885,y:950,z:1},1005:{x:1e3,y:950,z:1.1},1006:{x:1050,y:950,z:1},1008:{x:1240,y:1e3,z:1},1009:{x:1024,y:975,z:1},1013:{x:970,y:910,z:1.1},1101:{x:950,y:1200,z:1.1},1102:{x:820,y:1075,z:1.1},1103:{x:1060,y:1030,z:1.3},1104:{x:1150,y:1110,z:1},1105:{x:1040,y:1024,z:1},1106:{x:780,y:1100,z:1},1107:{x:880,y:900,z:1.15},1108:{x:1e3,y:950,z:1},1109:{x:975,y:1025,z:1.1},1110:{x:1180,y:1050,z:1.05},1111:{x:930,y:1e3,z:1},1112:{x:1120,y:875,z:1},1201:{x:1e3,y:1024,z:1},1202:{x:1024,y:950,z:1},1203:{x:1024,y:975,z:1.05},1204:{x:1024,y:1024,z:1.1},1205:{x:990,y:800,z:1},1206:{x:1075,y:1015,z:1.2},1207:{x:900,y:1055,z:1.1},1208:{x:920,y:950,z:1},1209:{x:1e3,y:1e3,z:1},1210:{x:1e3,y:1024,z:1},1211:{x:1050,y:950,z:1.05},1212:{x:1024,y:930,z:1},1213:{x:1050,y:1e3,z:1.05},1214:{x:1e3,y:900,z:1},1215:{x:1e3,y:1024,z:1.1},1217:{x:950,y:975,z:1.075},1218:{x:950,y:900,z:1.1},1220:{x:1024,y:1050,z:1},1221:{x:1024,y:1075,z:1.1},1222:{x:1110,y:1e3,z:1.1},1223:{x:960,y:1024,z:1.05},1224:{x:825,y:950,z:1.1},1301:{x:1200,y:975,z:1},1302:{x:680,y:1e3,z:1.15},1303:{x:1060,y:1050,z:1},1304:{x:1150,y:1e3,z:1.05},1305:{x:965,y:840,z:1.15},1306:{x:1050,y:1050,z:1},1307:{x:950,y:925,z:1.25},1308:{x:1e3,y:900,z:1},1309:{x:1024,y:925,z:1},1310:{x:930,y:1075,z:1.25},1312:{x:1050,y:1075,z:1},1314:{x:1024,y:850,z:1.15},1315:{x:1e3,y:1100,z:1},1317:{x:1125,y:1175,z:1},8001:{x:1024,y:1100,z:1},8002:{x:1024,y:1024,z:1},8003:{x:980,y:1024,z:1.05},8004:{x:1050,y:1024,z:1.05},8005:{x:1040,y:1e3,z:1.1},8006:{x:1040,y:1e3,z:1.1},8007:{x:955,y:975,z:.95},8008:{x:955,y:975,z:.95},1225:{x:875,y:1125,z:1.15},1313:{x:1e3,y:950,z:1.075},1401:{x:1e3,y:1085,z:1.275},1402:{x:1200,y:750,z:1.1},1403:{x:875,y:1e3,z:1.075},1404:{x:925,y:1050,z:1.05},1405:{x:1235,y:1025,z:.9},1407:{x:875,y:950,z:1}}}function G5(){return{1001:{stats:{[n.ATK]:0,[n.ATK_P]:0,[n.DEF]:1,[n.DEF_P]:1,[n.HP]:.5,[n.HP_P]:.5,[n.SPD]:1,[n.CR]:0,[n.CD]:0,[n.EHR]:1,[n.RES]:.75,[n.BE]:0,[n.ERR]:1,[n.OHB]:0,[n.Physical_DMG]:0,[n.Fire_DMG]:0,[n.Ice_DMG]:0,[n.Lightning_DMG]:0,[n.Wind_DMG]:0,[n.Quantum_DMG]:0,[n.Imaginary_DMG]:0},parts:{[E.Body]:[n.DEF_P,n.EHR],[E.Feet]:[n.DEF_P,n.SPD],[E.PlanarSphere]:[n.DEF_P],[E.LinkRope]:[n.DEF_P,n.ERR]},presets:[me.VALOROUS_SET],sortOption:k.SHIELD,addedColumns:[k.SHIELD],hiddenColumns:[k.SKILL,k.DOT]},1002:{stats:{[n.ATK]:.75,[n.ATK_P]:.75,[n.DEF]:0,[n.DEF_P]:0,[n.HP]:0,[n.HP_P]:0,[n.SPD]:1,[n.CR]:1,[n.CD]:1,[n.EHR]:0,[n.RES]:0,[n.BE]:0,[n.ERR]:0,[n.OHB]:0,[n.Physical_DMG]:0,[n.Fire_DMG]:0,[n.Ice_DMG]:0,[n.Lightning_DMG]:0,[n.Wind_DMG]:1,[n.Quantum_DMG]:0,[n.Imaginary_DMG]:0},parts:{[E.Body]:[n.CR,n.CD],[E.Feet]:[n.ATK_P,n.SPD],[E.PlanarSphere]:[n.ATK_P,n.Wind_DMG],[E.LinkRope]:[n.ATK_P]},presets:[me.fnPioneerSet(4)],sortOption:k.ULT,hiddenColumns:[k.FUA,k.DOT],simulation:{parts:{[E.Body]:[n.CR,n.CD],[E.Feet]:[n.ATK_P,n.SPD],[E.PlanarSphere]:[n.ATK_P,n.Wind_DMG],[E.LinkRope]:[n.ATK_P]},substats:[n.CD,n.CR,n.ATK_P,n.ATK],comboAbilities:[Oe,Ae,ue,ue,ue],comboDot:0,comboBreak:0,relicSets:[[G.ScholarLostInErudition,G.ScholarLostInErudition],[G.PioneerDiverOfDeadWaters,G.PioneerDiverOfDeadWaters],...ve],ornamentSets:[G.RutilantArena,...Ze],teammates:[{characterId:"1101",lightCone:"23003",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1303",lightCone:"23019",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1217",lightCone:"23017",characterEidolon:0,lightConeSuperimposition:1}]}},1003:{stats:{[n.ATK]:.75,[n.ATK_P]:.75,[n.DEF]:0,[n.DEF_P]:0,[n.HP]:0,[n.HP_P]:0,[n.SPD]:1,[n.CR]:1,[n.CD]:1,[n.EHR]:0,[n.RES]:0,[n.BE]:.5,[n.ERR]:0,[n.OHB]:0,[n.Physical_DMG]:0,[n.Fire_DMG]:1,[n.Ice_DMG]:0,[n.Lightning_DMG]:0,[n.Wind_DMG]:0,[n.Quantum_DMG]:0,[n.Imaginary_DMG]:0},parts:{[E.Body]:[n.CD,n.CR],[E.Feet]:[n.ATK_P,n.SPD],[E.PlanarSphere]:[n.ATK_P,n.Fire_DMG],[E.LinkRope]:[n.ATK_P]},presets:[me.fnAshblazingSet(8),me.fnPioneerSet(4),me.VALOROUS_SET],sortOption:k.FUA,hiddenColumns:[],simulation:{parts:{[E.Body]:[n.CR,n.CD],[E.Feet]:[n.ATK_P,n.SPD],[E.PlanarSphere]:[n.ATK_P,n.Fire_DMG],[E.LinkRope]:[n.ATK_P]},substats:[n.CD,n.CR,n.ATK_P,n.ATK],comboAbilities:[Oe,Ae,ke,ue,ke,ue,ke],comboDot:0,comboBreak:0,relicSets:[[G.TheAshblazingGrandDuke,G.TheAshblazingGrandDuke],...ve],ornamentSets:[G.DuranDynastyOfRunningWolves,...sa,...Ze],teammates:[{characterId:"1112",lightCone:"23016",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1303",lightCone:"23019",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1304",lightCone:"23023",characterEidolon:0,lightConeSuperimposition:1}]}},1004:{stats:{[n.ATK]:.75,[n.ATK_P]:.75,[n.DEF]:0,[n.DEF_P]:0,[n.HP]:0,[n.HP_P]:0,[n.SPD]:1,[n.CR]:1,[n.CD]:1,[n.EHR]:1,[n.RES]:0,[n.BE]:0,[n.ERR]:1,[n.OHB]:0,[n.Physical_DMG]:0,[n.Fire_DMG]:0,[n.Ice_DMG]:0,[n.Lightning_DMG]:0,[n.Wind_DMG]:0,[n.Quantum_DMG]:0,[n.Imaginary_DMG]:1},parts:{[E.Body]:[n.CD,n.CR,n.EHR],[E.Feet]:[n.ATK_P,n.SPD],[E.PlanarSphere]:[n.ATK_P,n.Imaginary_DMG],[E.LinkRope]:[n.ATK_P,n.ERR]},presets:[me.WASTELANDER_SET,me.fnPioneerSet(4)],sortOption:k.SKILL,hiddenColumns:[k.FUA,k.DOT],simulation:{parts:{[E.Body]:[n.CR,n.CD],[E.Feet]:[n.ATK_P,n.SPD],[E.PlanarSphere]:[n.ATK_P,n.Imaginary_DMG],[E.LinkRope]:[n.ATK_P]},substats:[n.CD,n.CR,n.ATK_P,n.ATK],comboAbilities:[Oe,Ae,ue,ue,ue],comboDot:0,comboBreak:0,errRopeEidolon:0,relicSets:[[G.PioneerDiverOfDeadWaters,G.PioneerDiverOfDeadWaters],[G.ScholarLostInErudition,G.ScholarLostInErudition],...ve],ornamentSets:[G.RutilantArena,G.FirmamentFrontlineGlamoth,G.IzumoGenseiAndTakamaDivineRealm,...Ze],teammates:[{characterId:"1308",lightCone:"23024",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1106",lightCone:"21015",characterEidolon:6,lightConeSuperimposition:5},{characterId:"1217",lightCone:"23017",characterEidolon:0,lightConeSuperimposition:1}]}},1005:{stats:{[n.ATK]:1,[n.ATK_P]:1,[n.DEF]:0,[n.DEF_P]:0,[n.HP]:0,[n.HP_P]:0,[n.SPD]:1,[n.CR]:0,[n.CD]:0,[n.EHR]:.5,[n.RES]:0,[n.BE]:0,[n.ERR]:0,[n.OHB]:0,[n.Physical_DMG]:0,[n.Fire_DMG]:0,[n.Ice_DMG]:0,[n.Lightning_DMG]:1,[n.Wind_DMG]:0,[n.Quantum_DMG]:0,[n.Imaginary_DMG]:0},parts:{[E.Body]:[n.ATK_P],[E.Feet]:[n.SPD,n.ATK_P],[E.PlanarSphere]:[n.ATK_P,n.Lightning_DMG],[E.LinkRope]:[n.ATK_P]},presets:[me.PRISONER_SET,me.fnAshblazingSet(6),me.VALOROUS_SET],sortOption:k.DOT,hiddenColumns:[],simulation:{parts:{[E.Body]:[n.ATK_P],[E.Feet]:[n.ATK_P,n.SPD],[E.PlanarSphere]:[n.ATK_P,n.Lightning_DMG],[E.LinkRope]:[n.ATK_P]},substats:[n.ATK_P,n.ATK,n.EHR,n.CR,n.CD],breakpoints:{[n.EHR]:.282},comboAbilities:[Oe,Ae,ue,ke,ue,ke],comboDot:16,comboBreak:0,relicSets:[[G.PrisonerInDeepConfinement,G.PrisonerInDeepConfinement],...ve],ornamentSets:[G.FirmamentFrontlineGlamoth],teammates:[{characterId:"1307",lightCone:"23022",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1303",lightCone:"23019",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1217",lightCone:"23017",characterEidolon:0,lightConeSuperimposition:1}]}},1006:{stats:{[n.ATK]:0,[n.ATK_P]:0,[n.DEF]:.5,[n.DEF_P]:.5,[n.HP]:.5,[n.HP_P]:.5,[n.SPD]:1,[n.CR]:0,[n.CD]:0,[n.EHR]:1,[n.RES]:.5,[n.BE]:0,[n.ERR]:1,[n.OHB]:0,[n.Physical_DMG]:0,[n.Fire_DMG]:0,[n.Ice_DMG]:0,[n.Lightning_DMG]:0,[n.Wind_DMG]:0,[n.Quantum_DMG]:1,[n.Imaginary_DMG]:0},parts:{[E.Body]:[n.CD,n.CR,n.EHR],[E.Feet]:[n.SPD],[E.PlanarSphere]:[n.Quantum_DMG,n.ATK_P,n.HP_P,n.DEF_P],[E.LinkRope]:[n.ERR,n.ATK_P,n.BE]},presets:[me.fnPioneerSet(4)],sortOption:k.ULT,hiddenColumns:[k.FUA,k.DOT]},1008:{stats:{[n.ATK]:.75,[n.ATK_P]:.75,[n.DEF]:0,[n.DEF_P]:0,[n.HP]:0,[n.HP_P]:0,[n.SPD]:1,[n.CR]:1,[n.CD]:1,[n.EHR]:0,[n.RES]:0,[n.BE]:0,[n.ERR]:0,[n.OHB]:0,[n.Physical_DMG]:0,[n.Fire_DMG]:0,[n.Ice_DMG]:0,[n.Lightning_DMG]:1,[n.Wind_DMG]:0,[n.Quantum_DMG]:0,[n.Imaginary_DMG]:0},parts:{[E.Body]:[n.CR,n.CD],[E.Feet]:[n.ATK_P,n.SPD],[E.PlanarSphere]:[n.ATK_P,n.Lightning_DMG],[E.LinkRope]:[n.ATK_P]},presets:[],sortOption:k.SKILL,hiddenColumns:[k.FUA,k.DOT],simulation:{parts:{[E.Body]:[n.CR,n.CD],[E.Feet]:[n.ATK_P,n.SPD],[E.PlanarSphere]:[n.ATK_P,n.Lightning_DMG],[E.LinkRope]:[n.ATK_P]},substats:[n.CD,n.CR,n.ATK_P,n.ATK],comboAbilities:[Oe,Ae,ue,ue,ue],comboDot:0,comboBreak:0,relicSets:[[G.ScholarLostInErudition,G.ScholarLostInErudition],...ve],ornamentSets:[G.RutilantArena,...Ze],teammates:[{characterId:"1101",lightCone:"23003",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1303",lightCone:"23019",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1217",lightCone:"23017",characterEidolon:0,lightConeSuperimposition:1}]}},1009:{stats:{[n.ATK]:.5,[n.ATK_P]:.5,[n.DEF]:.5,[n.DEF_P]:.5,[n.HP]:.75,[n.HP_P]:.75,[n.SPD]:1,[n.CR]:0,[n.CD]:0,[n.EHR]:0,[n.RES]:.5,[n.BE]:.5,[n.ERR]:1,[n.OHB]:0,[n.Physical_DMG]:0,[n.Fire_DMG]:1,[n.Ice_DMG]:0,[n.Lightning_DMG]:0,[n.Wind_DMG]:0,[n.Quantum_DMG]:0,[n.Imaginary_DMG]:0},parts:{[E.Body]:[],[E.Feet]:[n.SPD],[E.PlanarSphere]:[],[E.LinkRope]:[n.ATK_P,n.ERR]},presets:[],sortOption:k.SPD,hiddenColumns:[k.ULT,k.FUA]},1013:{stats:{[n.ATK]:.75,[n.ATK_P]:.75,[n.DEF]:0,[n.DEF_P]:0,[n.HP]:0,[n.HP_P]:0,[n.SPD]:1,[n.CR]:1,[n.CD]:1,[n.EHR]:0,[n.RES]:0,[n.BE]:0,[n.ERR]:0,[n.OHB]:0,[n.Physical_DMG]:0,[n.Fire_DMG]:0,[n.Ice_DMG]:1,[n.Lightning_DMG]:0,[n.Wind_DMG]:0,[n.Quantum_DMG]:0,[n.Imaginary_DMG]:0},parts:{[E.Body]:[n.CR,n.CD],[E.Feet]:[n.ATK_P,n.SPD],[E.PlanarSphere]:[n.ATK_P,n.Ice_DMG],[E.LinkRope]:[n.ATK_P]},presets:[me.fnAshblazingSet(8),me.VALOROUS_SET],sortOption:k.FUA,hiddenColumns:[k.DOT],simulation:{parts:{[E.Body]:[n.CR,n.CD],[E.Feet]:[n.ATK_P,n.SPD],[E.PlanarSphere]:[n.ATK_P,n.Ice_DMG],[E.LinkRope]:[n.ATK_P]},substats:[n.CD,n.CR,n.ATK_P,n.ATK],comboAbilities:[Oe,Ae,ke,ue,ke,ue,ke],comboDot:0,comboBreak:0,relicSets:[[G.TheAshblazingGrandDuke,G.TheAshblazingGrandDuke],[G.ScholarLostInErudition,G.ScholarLostInErudition],[G.HunterOfGlacialForest,G.HunterOfGlacialForest],...ve],ornamentSets:[G.DuranDynastyOfRunningWolves,...sa,...Ze],teammates:[{characterId:"1003",lightCone:"23000",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1303",lightCone:"23019",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1217",lightCone:"23017",characterEidolon:0,lightConeSuperimposition:1}]}},1101:{stats:{[n.ATK]:0,[n.ATK_P]:0,[n.DEF]:.5,[n.DEF_P]:.5,[n.HP]:.5,[n.HP_P]:.5,[n.SPD]:1,[n.CR]:0,[n.CD]:1,[n.EHR]:0,[n.RES]:.75,[n.BE]:0,[n.ERR]:1,[n.OHB]:0,[n.Physical_DMG]:0,[n.Fire_DMG]:0,[n.Ice_DMG]:0,[n.Lightning_DMG]:0,[n.Wind_DMG]:1,[n.Quantum_DMG]:0,[n.Imaginary_DMG]:0},parts:{[E.Body]:[n.CD],[E.Feet]:[n.SPD],[E.PlanarSphere]:[],[E.LinkRope]:[n.ERR]},presets:[],sortOption:k.CD,hiddenColumns:[k.SKILL,k.ULT,k.DOT]},1102:{stats:{[n.ATK]:.75,[n.ATK_P]:.75,[n.DEF]:0,[n.DEF_P]:0,[n.HP]:0,[n.HP_P]:0,[n.SPD]:1,[n.CR]:1,[n.CD]:1,[n.EHR]:0,[n.RES]:0,[n.BE]:0,[n.ERR]:0,[n.OHB]:0,[n.Physical_DMG]:0,[n.Fire_DMG]:0,[n.Ice_DMG]:0,[n.Lightning_DMG]:0,[n.Wind_DMG]:0,[n.Quantum_DMG]:1,[n.Imaginary_DMG]:0},parts:{[E.Body]:[n.CR,n.CD],[E.Feet]:[n.ATK_P,n.SPD],[E.PlanarSphere]:[n.ATK_P,n.Quantum_DMG],[E.LinkRope]:[n.ATK_P]},presets:[],sortOption:k.SKILL,hiddenColumns:[k.FUA,k.DOT],simulation:{parts:{[E.Body]:[n.CR,n.CD],[E.Feet]:[n.ATK_P,n.SPD],[E.PlanarSphere]:[n.ATK_P,n.Quantum_DMG],[E.LinkRope]:[n.ATK_P]},substats:[n.CD,n.CR,n.ATK_P,n.ATK],comboAbilities:[Oe,Ae,ue,ue,ue],comboDot:0,comboBreak:0,relicSets:[[G.GeniusOfBrilliantStars,G.GeniusOfBrilliantStars],[G.ScholarLostInErudition,G.ScholarLostInErudition],...ve],ornamentSets:[G.RutilantArena,G.FirmamentFrontlineGlamoth,...Ze],teammates:[{characterId:"1006",lightCone:"23007",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1306",lightCone:"23003",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1217",lightCone:"23017",characterEidolon:0,lightConeSuperimposition:1}]}},1103:{stats:{[n.ATK]:.75,[n.ATK_P]:.75,[n.DEF]:0,[n.DEF_P]:0,[n.HP]:0,[n.HP_P]:0,[n.SPD]:1,[n.CR]:1,[n.CD]:1,[n.EHR]:0,[n.RES]:0,[n.BE]:0,[n.ERR]:0,[n.OHB]:0,[n.Physical_DMG]:0,[n.Fire_DMG]:0,[n.Ice_DMG]:0,[n.Lightning_DMG]:1,[n.Wind_DMG]:0,[n.Quantum_DMG]:0,[n.Imaginary_DMG]:0},parts:{[E.Body]:[n.CD,n.CR],[E.Feet]:[n.SPD,n.ATK_P],[E.PlanarSphere]:[n.ATK_P,n.Lightning_DMG],[E.LinkRope]:[n.ATK_P,n.ERR]},presets:[me.fnPioneerSet(4)],sortOption:k.ULT,hiddenColumns:[k.FUA],simulation:{parts:{[E.Body]:[n.CR,n.CD],[E.Feet]:[n.ATK_P,n.SPD],[E.PlanarSphere]:[n.ATK_P,n.Lightning_DMG],[E.LinkRope]:[n.ATK_P]},substats:[n.CD,n.CR,n.ATK_P,n.ATK],comboAbilities:[Oe,Ae,ue,ue,ue],comboDot:0,comboBreak:0,errRopeEidolon:0,deprioritizeBuffs:!0,relicSets:[[G.PioneerDiverOfDeadWaters,G.PioneerDiverOfDeadWaters],[G.ScholarLostInErudition,G.ScholarLostInErudition],[G.BandOfSizzlingThunder,G.BandOfSizzlingThunder],[G.EagleOfTwilightLine,G.EagleOfTwilightLine],...ve],ornamentSets:[G.FirmamentFrontlineGlamoth,G.RutilantArena,G.SprightlyVonwacq,...pu,...Ze],teammates:[{characterId:"1005",lightCone:"23006",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1303",lightCone:"23019",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1217",lightCone:"23017",characterEidolon:0,lightConeSuperimposition:1}]}},1104:{stats:{[n.ATK]:0,[n.ATK_P]:0,[n.DEF]:1,[n.DEF_P]:1,[n.HP]:.5,[n.HP_P]:.5,[n.SPD]:1,[n.CR]:0,[n.CD]:0,[n.EHR]:.75,[n.RES]:.75,[n.BE]:0,[n.ERR]:1,[n.OHB]:0,[n.Physical_DMG]:0,[n.Fire_DMG]:0,[n.Ice_DMG]:0,[n.Lightning_DMG]:0,[n.Wind_DMG]:0,[n.Quantum_DMG]:0,[n.Imaginary_DMG]:0},parts:{[E.Body]:[n.DEF_P],[E.Feet]:[n.DEF_P,n.SPD],[E.PlanarSphere]:[n.DEF_P],[E.LinkRope]:[n.DEF_P,n.ERR]},presets:[],sortOption:k.SHIELD,addedColumns:[k.SHIELD],hiddenColumns:[k.ULT,k.FUA,k.DOT]},1105:{stats:{[n.ATK]:0,[n.ATK_P]:0,[n.DEF]:.75,[n.DEF_P]:.75,[n.HP]:1,[n.HP_P]:1,[n.SPD]:1,[n.CR]:0,[n.CD]:0,[n.EHR]:0,[n.RES]:.75,[n.BE]:0,[n.ERR]:1,[n.OHB]:1,[n.Physical_DMG]:0,[n.Fire_DMG]:0,[n.Ice_DMG]:0,[n.Lightning_DMG]:0,[n.Wind_DMG]:0,[n.Quantum_DMG]:0,[n.Imaginary_DMG]:0},parts:{[E.Body]:[n.HP_P,n.OHB],[E.Feet]:[n.HP_P,n.SPD],[E.PlanarSphere]:[n.HP_P],[E.LinkRope]:[n.HP_P,n.ERR]},presets:[],sortOption:k.HEAL,addedColumns:[k.OHB,k.HEAL],hiddenColumns:[k.SKILL,k.ULT,k.FUA,k.DOT]},1106:{stats:{[n.ATK]:0,[n.ATK_P]:0,[n.DEF]:.75,[n.DEF_P]:.75,[n.HP]:.75,[n.HP_P]:.75,[n.SPD]:1,[n.CR]:0,[n.CD]:0,[n.EHR]:1,[n.RES]:.5,[n.BE]:0,[n.ERR]:1,[n.OHB]:0,[n.Physical_DMG]:0,[n.Fire_DMG]:0,[n.Ice_DMG]:1,[n.Lightning_DMG]:0,[n.Wind_DMG]:0,[n.Quantum_DMG]:0,[n.Imaginary_DMG]:0},parts:{[E.Body]:[n.EHR,n.HP_P,n.DEF_P],[E.Feet]:[n.SPD],[E.PlanarSphere]:[n.HP_P,n.DEF_P,n.Ice_DMG],[E.LinkRope]:[n.ERR]},presets:[me.fnPioneerSet(4)],sortOption:k.SPD,hiddenColumns:[k.FUA,k.DOT]},1107:{stats:{[n.ATK]:.75,[n.ATK_P]:.75,[n.DEF]:0,[n.DEF_P]:0,[n.HP]:0,[n.HP_P]:0,[n.SPD]:1,[n.CR]:1,[n.CD]:1,[n.EHR]:0,[n.RES]:0,[n.BE]:0,[n.ERR]:0,[n.OHB]:0,[n.Physical_DMG]:1,[n.Fire_DMG]:0,[n.Ice_DMG]:0,[n.Lightning_DMG]:0,[n.Wind_DMG]:0,[n.Quantum_DMG]:0,[n.Imaginary_DMG]:0},parts:{[E.Body]:[n.CR,n.CD],[E.Feet]:[n.ATK_P,n.SPD],[E.PlanarSphere]:[n.ATK_P,n.Physical_DMG],[E.LinkRope]:[n.ATK_P]},presets:[me.fnAshblazingSet(2),me.fnSacerdosSet(1)],sortOption:k.FUA,hiddenColumns:[k.ULT,k.DOT],simulation:{parts:{[E.Body]:[n.CR,n.CD],[E.Feet]:[n.ATK_P,n.SPD],[E.PlanarSphere]:[n.ATK_P,n.Physical_DMG],[E.LinkRope]:[n.ATK_P]},substats:[n.CD,n.CR,n.ATK_P,n.ATK],comboAbilities:[Oe,Ae,ue,ke,ke,ke],comboDot:0,comboBreak:0,relicSets:[[G.ChampionOfStreetwiseBoxing,G.ChampionOfStreetwiseBoxing],...ve],ornamentSets:[G.DuranDynastyOfRunningWolves,...sa,...Ze],teammates:[{characterId:"1112",lightCone:"23016",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1303",lightCone:"23019",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1304",lightCone:"21016",characterEidolon:0,lightConeSuperimposition:5}]}},1108:{stats:{[n.ATK]:1,[n.ATK_P]:1,[n.DEF]:0,[n.DEF_P]:0,[n.HP]:0,[n.HP_P]:0,[n.SPD]:1,[n.CR]:0,[n.CD]:0,[n.EHR]:1,[n.RES]:0,[n.BE]:1,[n.ERR]:1,[n.OHB]:0,[n.Physical_DMG]:0,[n.Fire_DMG]:0,[n.Ice_DMG]:0,[n.Lightning_DMG]:0,[n.Wind_DMG]:1,[n.Quantum_DMG]:0,[n.Imaginary_DMG]:0},parts:{[E.Body]:[n.ATK_P,n.EHR],[E.Feet]:[n.SPD,n.ATK_P],[E.PlanarSphere]:[n.ATK_P,n.Wind_DMG],[E.LinkRope]:[n.ERR,n.ATK_P,n.BE]},presets:[me.PRISONER_SET],sortOption:k.DOT,hiddenColumns:[k.FUA],simulation:{parts:{[E.Body]:[n.ATK_P],[E.Feet]:[n.ATK_P,n.SPD],[E.PlanarSphere]:[n.ATK_P,n.Wind_DMG],[E.LinkRope]:[n.ATK_P]},substats:[n.ATK_P,n.EHR,n.ATK,n.CR,n.CD],comboAbilities:[Oe,Ae,ue,ue,ue],comboDot:60,comboBreak:0,relicSets:[[G.PrisonerInDeepConfinement,G.PrisonerInDeepConfinement],...ve],ornamentSets:[G.FirmamentFrontlineGlamoth],teammates:[{characterId:"1005",lightCone:"23006",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1303",lightCone:"23019",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1217",lightCone:"23017",characterEidolon:0,lightConeSuperimposition:1}]}},1109:{stats:{[n.ATK]:.75,[n.ATK_P]:.75,[n.DEF]:0,[n.DEF_P]:0,[n.HP]:0,[n.HP_P]:0,[n.SPD]:1,[n.CR]:1,[n.CD]:1,[n.EHR]:0,[n.RES]:0,[n.BE]:0,[n.ERR]:0,[n.OHB]:0,[n.Physical_DMG]:0,[n.Fire_DMG]:1,[n.Ice_DMG]:0,[n.Lightning_DMG]:0,[n.Wind_DMG]:0,[n.Quantum_DMG]:0,[n.Imaginary_DMG]:0},parts:{[E.Body]:[n.CR,n.CD],[E.Feet]:[n.ATK_P,n.SPD],[E.PlanarSphere]:[n.ATK_P,n.Fire_DMG],[E.LinkRope]:[n.ATK_P]},presets:[me.fnPioneerSet(4)],sortOption:k.SKILL,hiddenColumns:[k.FUA],simulation:{parts:{[E.Body]:[n.CR,n.CD],[E.Feet]:[n.ATK_P,n.SPD],[E.PlanarSphere]:[n.ATK_P,n.Fire_DMG],[E.LinkRope]:[n.ATK_P]},substats:[n.CD,n.CR,n.ATK_P,n.ATK],comboAbilities:[Oe,Ae,ue,ue,ue],comboDot:0,comboBreak:0,relicSets:[[G.PioneerDiverOfDeadWaters,G.PioneerDiverOfDeadWaters],[G.ScholarLostInErudition,G.ScholarLostInErudition],...ve],ornamentSets:[G.RutilantArena,G.FirmamentFrontlineGlamoth,...Ze],teammates:[{characterId:"1101",lightCone:"23003",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1303",lightCone:"23019",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1217",lightCone:"23017",characterEidolon:0,lightConeSuperimposition:1}]}},1110:{stats:{[n.ATK]:0,[n.ATK_P]:0,[n.DEF]:.75,[n.DEF_P]:.75,[n.HP]:1,[n.HP_P]:1,[n.SPD]:1,[n.CR]:0,[n.CD]:0,[n.EHR]:0,[n.RES]:.75,[n.BE]:0,[n.ERR]:1,[n.OHB]:1,[n.Physical_DMG]:0,[n.Fire_DMG]:0,[n.Ice_DMG]:0,[n.Lightning_DMG]:0,[n.Wind_DMG]:0,[n.Quantum_DMG]:0,[n.Imaginary_DMG]:0},parts:{[E.Body]:[n.HP_P,n.OHB],[E.Feet]:[n.HP_P,n.SPD],[E.PlanarSphere]:[n.HP_P],[E.LinkRope]:[n.HP_P,n.ERR]},presets:[],sortOption:k.HEAL,addedColumns:[k.OHB,k.HEAL],hiddenColumns:[k.SKILL,k.ULT,k.FUA,k.DOT]},1111:{stats:{[n.ATK]:1,[n.ATK_P]:1,[n.DEF]:0,[n.DEF_P]:0,[n.HP]:0,[n.HP_P]:0,[n.SPD]:1,[n.CR]:0,[n.CD]:0,[n.EHR]:1,[n.RES]:0,[n.BE]:.75,[n.ERR]:0,[n.OHB]:0,[n.Physical_DMG]:1,[n.Fire_DMG]:0,[n.Ice_DMG]:0,[n.Lightning_DMG]:0,[n.Wind_DMG]:0,[n.Quantum_DMG]:0,[n.Imaginary_DMG]:0},parts:{[E.Body]:[n.ATK_P,n.EHR],[E.Feet]:[n.SPD,n.ATK_P],[E.PlanarSphere]:[n.ATK_P,n.Physical_DMG],[E.LinkRope]:[n.ATK_P,n.BE]},presets:[me.PRISONER_SET],sortOption:k.DOT,hiddenColumns:[k.FUA],simulation:{parts:{[E.Body]:[n.ATK_P],[E.Feet]:[n.ATK_P,n.SPD],[E.PlanarSphere]:[n.ATK_P,n.Physical_DMG],[E.LinkRope]:[n.ATK_P,n.BE]},substats:[n.BE,n.ATK_P,n.ATK,n.EHR,n.CR],comboAbilities:[Oe,Ae,ue,rt,rt],comboDot:5,comboBreak:1,relicSets:[[G.PrisonerInDeepConfinement,G.PrisonerInDeepConfinement],...ve,Xr],ornamentSets:[G.TaliaKingdomOfBanditry,G.FirmamentFrontlineGlamoth],teammates:[{characterId:"1005",lightCone:"23006",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1303",lightCone:"23019",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1217",lightCone:"23017",characterEidolon:0,lightConeSuperimposition:1}]}},1112:{stats:{[n.ATK]:.75,[n.ATK_P]:.75,[n.DEF]:0,[n.DEF_P]:0,[n.HP]:0,[n.HP_P]:0,[n.SPD]:1,[n.CR]:1,[n.CD]:1,[n.EHR]:0,[n.RES]:0,[n.BE]:0,[n.ERR]:0,[n.OHB]:0,[n.Physical_DMG]:0,[n.Fire_DMG]:1,[n.Ice_DMG]:0,[n.Lightning_DMG]:0,[n.Wind_DMG]:0,[n.Quantum_DMG]:0,[n.Imaginary_DMG]:0},parts:{[E.Body]:[n.CR,n.CD],[E.Feet]:[n.ATK_P,n.SPD],[E.PlanarSphere]:[n.Fire_DMG,n.ATK_P],[E.LinkRope]:[n.ATK_P]},presets:[me.fnAshblazingSet(0),me.BANANA_SET,me.fnPioneerSet(4),me.fnSacerdosSet(1)],sortOption:k.FUA,hiddenColumns:[k.ULT,k.DOT],simulation:{parts:{[E.Body]:[n.CR,n.CD],[E.Feet]:[n.ATK_P,n.SPD],[E.PlanarSphere]:[n.ATK_P,n.Fire_DMG],[E.LinkRope]:[n.ATK_P]},substats:[n.CD,n.CR,n.ATK_P,n.ATK],errRopeEidolon:6,comboAbilities:[Oe,Ae,ue,ke,ke],comboDot:0,comboBreak:0,deprioritizeBuffs:!0,relicSets:[[G.TheAshblazingGrandDuke,G.TheAshblazingGrandDuke],...ve],ornamentSets:[G.DuranDynastyOfRunningWolves,G.TheWondrousBananAmusementPark,...sa,...Ze],teammates:[{characterId:"1305",lightCone:"23020",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1309",lightCone:"23026",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1304",lightCone:"23023",characterEidolon:0,lightConeSuperimposition:1}]}},1201:{stats:{[n.ATK]:.75,[n.ATK_P]:.75,[n.DEF]:0,[n.DEF_P]:0,[n.HP]:0,[n.HP_P]:0,[n.SPD]:1,[n.CR]:1,[n.CD]:1,[n.EHR]:0,[n.RES]:0,[n.BE]:0,[n.ERR]:0,[n.OHB]:0,[n.Physical_DMG]:0,[n.Fire_DMG]:0,[n.Ice_DMG]:0,[n.Lightning_DMG]:0,[n.Wind_DMG]:0,[n.Quantum_DMG]:1,[n.Imaginary_DMG]:0},parts:{[E.Body]:[n.CR,n.CD],[E.Feet]:[n.ATK_P,n.SPD],[E.PlanarSphere]:[n.ATK_P,n.Quantum_DMG],[E.LinkRope]:[n.ATK_P]},presets:[me.VALOROUS_SET,me.fnSacerdosSet(2)],sortOption:k.BASIC,hiddenColumns:[k.SKILL,k.DOT],simulation:{parts:{[E.Body]:[n.CR,n.CD],[E.Feet]:[n.ATK_P,n.SPD],[E.PlanarSphere]:[n.ATK_P,n.Quantum_DMG],[E.LinkRope]:[n.ATK_P]},substats:[n.CD,n.CR,n.ATK_P,n.ATK],comboAbilities:[Oe,Ae,rt,ke,rt,ke],comboDot:0,comboBreak:0,relicSets:[[G.GeniusOfBrilliantStars,G.GeniusOfBrilliantStars],[G.PoetOfMourningCollapse,G.PoetOfMourningCollapse],[G.SacerdosRelivedOrdeal,G.SacerdosRelivedOrdeal],...ve],ornamentSets:[G.RutilantArena,...sa,...Ze],teammates:[{characterId:"1006",lightCone:"23007",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1306",lightCone:"23003",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1217",lightCone:"23017",characterEidolon:0,lightConeSuperimposition:1}]}},1202:{stats:{[n.ATK]:.75,[n.ATK_P]:.75,[n.DEF]:.75,[n.DEF_P]:.75,[n.HP]:.75,[n.HP_P]:.75,[n.SPD]:1,[n.CR]:0,[n.CD]:0,[n.EHR]:0,[n.RES]:.5,[n.BE]:0,[n.ERR]:1,[n.OHB]:0,[n.Physical_DMG]:0,[n.Fire_DMG]:0,[n.Ice_DMG]:0,[n.Lightning_DMG]:0,[n.Wind_DMG]:0,[n.Quantum_DMG]:0,[n.Imaginary_DMG]:0},parts:{[E.Body]:[n.ATK_P,n.HP_P,n.DEF_P],[E.Feet]:[n.SPD],[E.PlanarSphere]:[n.HP_P,n.DEF_P,n.ATK_P],[E.LinkRope]:[n.ERR]},presets:[],sortOption:k.SPD,hiddenColumns:[k.ULT,k.FUA,k.DOT]},1203:{stats:{[n.ATK]:1,[n.ATK_P]:1,[n.DEF]:.75,[n.DEF_P]:.75,[n.HP]:.75,[n.HP_P]:.75,[n.SPD]:1,[n.CR]:0,[n.CD]:0,[n.EHR]:0,[n.RES]:.75,[n.BE]:0,[n.ERR]:1,[n.OHB]:1,[n.Physical_DMG]:0,[n.Fire_DMG]:0,[n.Ice_DMG]:0,[n.Lightning_DMG]:0,[n.Wind_DMG]:0,[n.Quantum_DMG]:0,[n.Imaginary_DMG]:0},parts:{[E.Body]:[n.OHB,n.HP_P,n.DEF_P,n.ATK_P],[E.Feet]:[n.SPD],[E.PlanarSphere]:[n.ATK_P,n.HP_P,n.DEF_P],[E.LinkRope]:[n.ERR]},presets:[me.WASTELANDER_SET],sortOption:k.SPD,addedColumns:[k.OHB,k.HEAL],hiddenColumns:[k.SKILL,k.FUA,k.DOT]},1204:{stats:{[n.ATK]:.75,[n.ATK_P]:.75,[n.DEF]:0,[n.DEF_P]:0,[n.HP]:0,[n.HP_P]:0,[n.SPD]:1,[n.CR]:1,[n.CD]:1,[n.EHR]:0,[n.RES]:0,[n.BE]:0,[n.ERR]:0,[n.OHB]:0,[n.Physical_DMG]:0,[n.Fire_DMG]:0,[n.Ice_DMG]:0,[n.Lightning_DMG]:1,[n.Wind_DMG]:0,[n.Quantum_DMG]:0,[n.Imaginary_DMG]:0},parts:{[E.Body]:[n.CR,n.CD],[E.Feet]:[n.ATK_P,n.SPD],[E.PlanarSphere]:[n.ATK_P,n.Lightning_DMG],[E.LinkRope]:[n.ATK_P]},presets:[me.fnAshblazingSet(8),me.VALOROUS_SET,me.BANANA_SET],sortOption:k.FUA,hiddenColumns:[k.DOT],simulation:{parts:{[E.Body]:[n.CR,n.CD],[E.Feet]:[n.ATK_P,n.SPD],[E.PlanarSphere]:[n.ATK_P,n.Lightning_DMG],[E.LinkRope]:[n.ATK_P]},substats:[n.CD,n.CR,n.ATK_P,n.ATK],comboAbilities:[Oe,Ae,ue,ue,ue,ke],comboDot:0,comboBreak:0,relicSets:[[G.TheAshblazingGrandDuke,G.TheAshblazingGrandDuke],...ve],ornamentSets:[G.TheWondrousBananAmusementPark,G.InertSalsotto,...sa,...Ze],teammates:[{characterId:"1306",lightCone:"23003",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1303",lightCone:"23019",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1217",lightCone:"23017",characterEidolon:0,lightConeSuperimposition:1}]}},1205:{stats:{[n.ATK]:.25,[n.ATK_P]:.25,[n.DEF]:0,[n.DEF_P]:0,[n.HP]:1,[n.HP_P]:1,[n.SPD]:1,[n.CR]:1,[n.CD]:1,[n.EHR]:0,[n.RES]:0,[n.BE]:0,[n.ERR]:0,[n.OHB]:0,[n.Physical_DMG]:0,[n.Fire_DMG]:0,[n.Ice_DMG]:0,[n.Lightning_DMG]:0,[n.Wind_DMG]:1,[n.Quantum_DMG]:0,[n.Imaginary_DMG]:0},parts:{[E.Body]:[n.CD,n.CR],[E.Feet]:[n.SPD,n.HP_P],[E.PlanarSphere]:[n.Wind_DMG,n.HP_P],[E.LinkRope]:[n.HP_P]},presets:[me.VALOROUS_SET,me.fnSacerdosSet(1)],sortOption:k.BASIC,hiddenColumns:[k.SKILL,k.DOT],simulation:{parts:{[E.Body]:[n.CR,n.CD],[E.Feet]:[n.HP_P,n.SPD],[E.PlanarSphere]:[n.HP_P,n.Wind_DMG],[E.LinkRope]:[n.HP_P]},substats:[n.CD,n.CR,n.HP_P,n.HP,n.ATK_P],comboAbilities:[Oe,Ae,rt,ke,rt],comboDot:0,comboBreak:0,relicSets:[[G.LongevousDisciple,G.LongevousDisciple],...ve],ornamentSets:[G.BoneCollectionsSereneDemesne,G.RutilantArena,G.InertSalsotto,...Ze],teammates:[{characterId:"1212",lightCone:"23014",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1101",lightCone:"23003",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1203",lightCone:"20015",characterEidolon:0,lightConeSuperimposition:5}]}},1206:{stats:{[n.ATK]:.75,[n.ATK_P]:.75,[n.DEF]:0,[n.DEF_P]:0,[n.HP]:0,[n.HP_P]:0,[n.SPD]:1,[n.CR]:1,[n.CD]:1,[n.EHR]:0,[n.RES]:0,[n.BE]:.5,[n.ERR]:0,[n.OHB]:0,[n.Physical_DMG]:1,[n.Fire_DMG]:0,[n.Ice_DMG]:0,[n.Lightning_DMG]:0,[n.Wind_DMG]:0,[n.Quantum_DMG]:0,[n.Imaginary_DMG]:0},parts:{[E.Body]:[n.CR,n.CD],[E.Feet]:[n.ATK_P,n.SPD],[E.PlanarSphere]:[n.ATK_P,n.Physical_DMG],[E.LinkRope]:[n.ATK_P,n.BE]},presets:[],sortOption:k.SKILL,hiddenColumns:[k.FUA,k.DOT],simulation:{parts:{[E.Body]:[n.CR,n.CD],[E.Feet]:[n.ATK_P,n.SPD],[E.PlanarSphere]:[n.ATK_P,n.Physical_DMG],[E.LinkRope]:[n.ATK_P,n.BE]},substats:[n.CR,n.CD,n.ATK_P,n.BE],comboAbilities:[Oe,Ae,ue,ue,ue],comboDot:0,comboBreak:1,relicSets:[[G.ScholarLostInErudition,G.ScholarLostInErudition],[G.ChampionOfStreetwiseBoxing,G.ChampionOfStreetwiseBoxing],[G.IronCavalryAgainstTheScourge,G.IronCavalryAgainstTheScourge],...ve],ornamentSets:[G.FirmamentFrontlineGlamoth,G.TaliaKingdomOfBanditry,...Ze,G.RutilantArena],teammates:[{characterId:"8006",lightCone:"21004",characterEidolon:6,lightConeSuperimposition:5},{characterId:"1303",lightCone:"23019",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1301",lightCone:"20015",characterEidolon:6,lightConeSuperimposition:5}]}},1207:{stats:{[n.ATK]:.75,[n.ATK_P]:.75,[n.DEF]:0,[n.DEF_P]:0,[n.HP]:0,[n.HP_P]:0,[n.SPD]:1,[n.CR]:1,[n.CD]:1,[n.EHR]:0,[n.RES]:0,[n.BE]:0,[n.ERR]:1,[n.OHB]:0,[n.Physical_DMG]:0,[n.Fire_DMG]:0,[n.Ice_DMG]:0,[n.Lightning_DMG]:0,[n.Wind_DMG]:0,[n.Quantum_DMG]:0,[n.Imaginary_DMG]:1},parts:{[E.Body]:[n.CR,n.CD],[E.Feet]:[n.SPD],[E.PlanarSphere]:[n.ATK_P,n.Imaginary_DMG],[E.LinkRope]:[n.ERR,n.ATK_P]},presets:[me.WASTELANDER_SET,me.fnSacerdosSet(1)],sortOption:k.ULT,hiddenColumns:[k.SKILL,k.FUA,k.DOT]},1208:{stats:{[n.ATK]:0,[n.ATK_P]:0,[n.DEF]:1,[n.DEF_P]:1,[n.HP]:1,[n.HP_P]:1,[n.SPD]:1,[n.CR]:0,[n.CD]:0,[n.EHR]:0,[n.RES]:.5,[n.BE]:0,[n.ERR]:1,[n.OHB]:0,[n.Physical_DMG]:0,[n.Fire_DMG]:0,[n.Ice_DMG]:0,[n.Lightning_DMG]:0,[n.Wind_DMG]:0,[n.Quantum_DMG]:0,[n.Imaginary_DMG]:0},parts:{[E.Body]:[n.HP_P,n.DEF_P],[E.Feet]:[n.HP_P,n.DEF_P,n.SPD],[E.PlanarSphere]:[n.HP_P,n.DEF_P],[E.LinkRope]:[n.HP_P,n.DEF_P,n.ERR]},presets:[],sortOption:k.EHP,addedColumns:[k.OHB,k.HEAL],hiddenColumns:[k.SKILL,k.FUA,k.DOT]},1209:{stats:{[n.ATK]:.75,[n.ATK_P]:.75,[n.DEF]:0,[n.DEF_P]:0,[n.HP]:0,[n.HP_P]:0,[n.SPD]:1,[n.CR]:1,[n.CD]:1,[n.EHR]:0,[n.RES]:0,[n.BE]:0,[n.ERR]:0,[n.OHB]:0,[n.Physical_DMG]:0,[n.Fire_DMG]:0,[n.Ice_DMG]:1,[n.Lightning_DMG]:0,[n.Wind_DMG]:0,[n.Quantum_DMG]:0,[n.Imaginary_DMG]:0},parts:{[E.Body]:[n.CR,n.CD],[E.Feet]:[n.ATK_P,n.SPD],[E.PlanarSphere]:[n.ATK_P,n.Ice_DMG],[E.LinkRope]:[n.ATK_P]},presets:[me.VALOROUS_SET,me.fnAshblazingSet(2)],sortOption:k.ULT,hiddenColumns:[k.DOT],simulation:{parts:{[E.Body]:[n.CD],[E.Feet]:[n.ATK_P,n.SPD],[E.PlanarSphere]:[n.ATK_P,n.Ice_DMG],[E.LinkRope]:[n.ATK_P]},substats:[n.CR,n.CD,n.ATK_P,n.ATK],comboAbilities:[Oe,Ae,ue,ke,ue,ke,ue],comboDot:0,comboBreak:0,relicSets:[[G.ScholarLostInErudition,G.ScholarLostInErudition],[G.HunterOfGlacialForest,G.HunterOfGlacialForest],...ve],ornamentSets:[G.RutilantArena,G.FirmamentFrontlineGlamoth,...Ze],teammates:[{characterId:"1303",lightCone:"23019",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1106",lightCone:"21015",characterEidolon:6,lightConeSuperimposition:5},{characterId:"1217",lightCone:"23017",characterEidolon:0,lightConeSuperimposition:1}]}},1210:{stats:{[n.ATK]:.75,[n.ATK_P]:.75,[n.DEF]:.5,[n.DEF_P]:.5,[n.HP]:.5,[n.HP_P]:.5,[n.SPD]:1,[n.CR]:0,[n.CD]:0,[n.EHR]:1,[n.RES]:.5,[n.BE]:0,[n.ERR]:1,[n.OHB]:0,[n.Physical_DMG]:0,[n.Fire_DMG]:1,[n.Ice_DMG]:0,[n.Lightning_DMG]:0,[n.Wind_DMG]:0,[n.Quantum_DMG]:0,[n.Imaginary_DMG]:0},parts:{[E.Body]:[n.ATK_P,n.EHR],[E.Feet]:[n.SPD],[E.PlanarSphere]:[n.ATK_P,n.Fire_DMG],[E.LinkRope]:[n.ERR,n.ATK_P]},presets:[me.PRISONER_SET],sortOption:k.DOT,hiddenColumns:[k.FUA]},1211:{stats:{[n.ATK]:0,[n.ATK_P]:0,[n.DEF]:.75,[n.DEF_P]:.75,[n.HP]:1,[n.HP_P]:1,[n.SPD]:1,[n.CR]:0,[n.CD]:0,[n.EHR]:0,[n.RES]:.75,[n.BE]:0,[n.ERR]:1,[n.OHB]:1,[n.Physical_DMG]:0,[n.Fire_DMG]:0,[n.Ice_DMG]:0,[n.Lightning_DMG]:0,[n.Wind_DMG]:0,[n.Quantum_DMG]:0,[n.Imaginary_DMG]:0},parts:{[E.Body]:[n.OHB],[E.Feet]:[n.SPD,n.HP_P],[E.PlanarSphere]:[n.HP_P],[E.LinkRope]:[n.HP_P,n.ERR]},presets:[],sortOption:k.HEAL,addedColumns:[k.OHB,k.HEAL],hiddenColumns:[k.SKILL,k.ULT,k.FUA,k.DOT]},1212:{stats:{[n.ATK]:.75,[n.ATK_P]:.75,[n.DEF]:0,[n.DEF_P]:0,[n.HP]:0,[n.HP_P]:0,[n.SPD]:1,[n.CR]:1,[n.CD]:1,[n.EHR]:0,[n.RES]:0,[n.BE]:0,[n.ERR]:0,[n.OHB]:0,[n.Physical_DMG]:0,[n.Fire_DMG]:0,[n.Ice_DMG]:1,[n.Lightning_DMG]:0,[n.Wind_DMG]:0,[n.Quantum_DMG]:0,[n.Imaginary_DMG]:0},parts:{[E.Body]:[n.CR,n.CD],[E.Feet]:[n.ATK_P,n.SPD],[E.PlanarSphere]:[n.ATK_P,n.Ice_DMG],[E.LinkRope]:[n.ATK_P]},presets:[],sortOption:k.SKILL,hiddenColumns:[k.FUA,k.DOT],simulation:{parts:{[E.Body]:[n.CD],[E.Feet]:[n.ATK_P,n.SPD],[E.PlanarSphere]:[n.ATK_P,n.Ice_DMG],[E.LinkRope]:[n.ATK_P]},substats:[n.CD,n.CR,n.ATK_P,n.ATK],errRopeEidolon:0,comboAbilities:[Oe,Ae,ue,ue,ue],comboDot:0,comboBreak:0,relicSets:[[G.ScholarLostInErudition,G.ScholarLostInErudition],[G.HunterOfGlacialForest,G.HunterOfGlacialForest],...ve],ornamentSets:[G.RutilantArena,...Ze],teammates:[{characterId:"1101",lightCone:"23003",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1303",lightCone:"23019",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1217",lightCone:"23017",characterEidolon:0,lightConeSuperimposition:1}]}},1213:{stats:{[n.ATK]:.75,[n.ATK_P]:.75,[n.DEF]:0,[n.DEF_P]:0,[n.HP]:0,[n.HP_P]:0,[n.SPD]:1,[n.CR]:1,[n.CD]:1,[n.EHR]:0,[n.RES]:0,[n.BE]:0,[n.ERR]:0,[n.OHB]:0,[n.Physical_DMG]:0,[n.Fire_DMG]:0,[n.Ice_DMG]:0,[n.Lightning_DMG]:0,[n.Wind_DMG]:0,[n.Quantum_DMG]:0,[n.Imaginary_DMG]:1},parts:{[E.Body]:[n.CR,n.CD],[E.Feet]:[n.ATK_P,n.SPD],[E.PlanarSphere]:[n.ATK_P,n.Imaginary_DMG],[E.LinkRope]:[n.ATK_P]},presets:[me.WASTELANDER_SET],sortOption:k.BASIC,hiddenColumns:[k.SKILL,k.FUA,k.DOT],simulation:{parts:{[E.Body]:[n.CR,n.CD],[E.Feet]:[n.ATK_P,n.SPD],[E.PlanarSphere]:[n.ATK_P,n.Imaginary_DMG],[E.LinkRope]:[n.ATK_P]},substats:[n.CD,n.CR,n.ATK_P,n.ATK],comboAbilities:[Oe,Ae,rt,rt],comboDot:0,comboBreak:0,relicSets:[[G.MusketeerOfWildWheat,G.MusketeerOfWildWheat],[G.WastelanderOfBanditryDesert,G.WastelanderOfBanditryDesert],...ve],ornamentSets:[G.RutilantArena,...Ze],teammates:[{characterId:"1306",lightCone:"23003",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1202",lightCone:"21018",characterEidolon:6,lightConeSuperimposition:5},{characterId:"1217",lightCone:"23017",characterEidolon:0,lightConeSuperimposition:1}]}},1214:{stats:{[n.ATK]:.75,[n.ATK_P]:.75,[n.DEF]:0,[n.DEF_P]:0,[n.HP]:0,[n.HP_P]:0,[n.SPD]:1,[n.CR]:1,[n.CD]:1,[n.EHR]:0,[n.RES]:0,[n.BE]:1,[n.ERR]:0,[n.OHB]:0,[n.Physical_DMG]:0,[n.Fire_DMG]:0,[n.Ice_DMG]:0,[n.Lightning_DMG]:0,[n.Wind_DMG]:0,[n.Quantum_DMG]:1,[n.Imaginary_DMG]:0},parts:{[E.Body]:[n.CR,n.CD],[E.Feet]:[n.ATK_P,n.SPD],[E.PlanarSphere]:[n.Quantum_DMG,n.ATK_P],[E.LinkRope]:[n.ATK_P,n.BE]},presets:[me.fnAshblazingSet(3),me.VALOROUS_SET],sortOption:k.SKILL,hiddenColumns:[k.DOT],simulation:{parts:{[E.Body]:[n.CR,n.CD],[E.Feet]:[n.ATK_P,n.SPD],[E.PlanarSphere]:[n.ATK_P,n.Quantum_DMG],[E.LinkRope]:[n.ATK_P,n.BE]},substats:[n.BE,n.ATK_P,n.CR,n.CD,n.ATK],comboAbilities:[Oe,Ae,ke,ue,ke,ue,ke],comboDot:0,comboBreak:1,relicSets:[[G.GeniusOfBrilliantStars,G.GeniusOfBrilliantStars],[G.PoetOfMourningCollapse,G.PoetOfMourningCollapse],...ve],ornamentSets:[G.TaliaKingdomOfBanditry,G.InertSalsotto,G.SpaceSealingStation,G.FirmamentFrontlineGlamoth,...sa,...Ze],teammates:[{characterId:"8006",lightCone:"21004",characterEidolon:6,lightConeSuperimposition:5},{characterId:"1303",lightCone:"23019",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1301",lightCone:"20015",characterEidolon:6,lightConeSuperimposition:5}]}},1215:{stats:{[n.ATK]:0,[n.ATK_P]:0,[n.DEF]:.75,[n.DEF_P]:.75,[n.HP]:.75,[n.HP_P]:.75,[n.SPD]:1,[n.CR]:0,[n.CD]:0,[n.EHR]:0,[n.RES]:.5,[n.BE]:0,[n.ERR]:1,[n.OHB]:0,[n.Physical_DMG]:0,[n.Fire_DMG]:0,[n.Ice_DMG]:0,[n.Lightning_DMG]:0,[n.Wind_DMG]:0,[n.Quantum_DMG]:0,[n.Imaginary_DMG]:0},parts:{[E.Body]:[],[E.Feet]:[n.SPD],[E.PlanarSphere]:[],[E.LinkRope]:[n.ERR]},presets:[],sortOption:k.SPD,hiddenColumns:[k.ULT,k.FUA,k.DOT]},1217:{stats:{[n.ATK]:0,[n.ATK_P]:0,[n.DEF]:.75,[n.DEF_P]:.75,[n.HP]:1,[n.HP_P]:1,[n.SPD]:1,[n.CR]:0,[n.CD]:0,[n.EHR]:0,[n.RES]:.75,[n.BE]:0,[n.ERR]:1,[n.OHB]:1,[n.Physical_DMG]:0,[n.Fire_DMG]:0,[n.Ice_DMG]:0,[n.Lightning_DMG]:0,[n.Wind_DMG]:0,[n.Quantum_DMG]:0,[n.Imaginary_DMG]:0},parts:{[E.Body]:[n.HP_P,n.OHB],[E.Feet]:[n.SPD,n.HP_P],[E.PlanarSphere]:[n.HP_P],[E.LinkRope]:[n.HP_P,n.ERR]},presets:[],sortOption:k.HEAL,addedColumns:[k.OHB,k.HEAL],hiddenColumns:[k.SKILL,k.ULT,k.FUA,k.DOT]},1218:{stats:{[f.Stats.ATK]:.5,[f.Stats.ATK_P]:.5,[f.Stats.DEF]:.5,[f.Stats.DEF_P]:.5,[f.Stats.HP]:.5,[f.Stats.HP_P]:.5,[f.Stats.SPD]:1,[f.Stats.CR]:0,[f.Stats.CD]:0,[f.Stats.EHR]:1,[f.Stats.RES]:.5,[f.Stats.BE]:0,[f.Stats.ERR]:0,[f.Stats.OHB]:0,[f.Stats.Physical_DMG]:0,[f.Stats.Fire_DMG]:1,[f.Stats.Ice_DMG]:0,[f.Stats.Lightning_DMG]:0,[f.Stats.Wind_DMG]:0,[f.Stats.Quantum_DMG]:0,[f.Stats.Imaginary_DMG]:0},parts:{[f.Parts.Body]:[f.Stats.EHR],[f.Parts.Feet]:[f.Stats.SPD],[f.Parts.PlanarSphere]:[],[f.Parts.LinkRope]:[f.Stats.ATK_P,f.Stats.ERR]},presets:[me.PRISONER_SET],sortOption:k.EHR,hiddenColumns:[k.FUA]},1220:{stats:{[f.Stats.ATK]:.75,[f.Stats.ATK_P]:.75,[f.Stats.DEF]:0,[f.Stats.DEF_P]:0,[f.Stats.HP]:0,[f.Stats.HP_P]:0,[f.Stats.SPD]:1,[f.Stats.CR]:1,[f.Stats.CD]:1,[f.Stats.EHR]:0,[f.Stats.RES]:0,[f.Stats.BE]:0,[f.Stats.ERR]:0,[f.Stats.OHB]:0,[f.Stats.Physical_DMG]:0,[f.Stats.Fire_DMG]:0,[f.Stats.Ice_DMG]:0,[f.Stats.Lightning_DMG]:0,[f.Stats.Wind_DMG]:1,[f.Stats.Quantum_DMG]:0,[f.Stats.Imaginary_DMG]:0},parts:{[f.Parts.Body]:[f.Stats.CR,f.Stats.CD],[f.Parts.Feet]:[f.Stats.ATK_P,f.Stats.SPD],[f.Parts.PlanarSphere]:[f.Stats.ATK_P,f.Stats.Wind_DMG],[f.Parts.LinkRope]:[f.Stats.ATK_P]},presets:[me.fnAshblazingSet(1),me.VALOROUS_SET],sortOption:k.ULT,hiddenColumns:[k.DOT],simulation:{parts:{[E.Body]:[n.CR,n.CD],[E.Feet]:[n.ATK_P,n.SPD],[E.PlanarSphere]:[n.ATK_P,n.Wind_DMG],[E.LinkRope]:[n.ATK_P]},substats:[n.ATK_P,n.CR,n.CD,n.ATK],comboAbilities:[Oe,Ae,ue,ke,ke,Ae,ue,ke,ke],comboDot:0,comboBreak:0,relicSets:[[G.TheWindSoaringValorous,G.TheWindSoaringValorous],[G.TheAshblazingGrandDuke,G.TheAshblazingGrandDuke],[G.EagleOfTwilightLine,G.EagleOfTwilightLine],...ve],ornamentSets:[G.DuranDynastyOfRunningWolves,...sa,...Ze],teammates:[{characterId:"1112",lightCone:"23016",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1309",lightCone:"23026",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1304",lightCone:"23023",characterEidolon:0,lightConeSuperimposition:1}]}},1221:{stats:{[f.Stats.ATK]:.75,[f.Stats.ATK_P]:.75,[f.Stats.DEF]:0,[f.Stats.DEF_P]:0,[f.Stats.HP]:0,[f.Stats.HP_P]:0,[f.Stats.SPD]:1,[f.Stats.CR]:1,[f.Stats.CD]:1,[f.Stats.EHR]:0,[f.Stats.RES]:0,[f.Stats.BE]:0,[f.Stats.ERR]:0,[f.Stats.OHB]:0,[f.Stats.Physical_DMG]:1,[f.Stats.Fire_DMG]:0,[f.Stats.Ice_DMG]:0,[f.Stats.Lightning_DMG]:0,[f.Stats.Wind_DMG]:0,[f.Stats.Quantum_DMG]:0,[f.Stats.Imaginary_DMG]:0},parts:{[f.Parts.Body]:[f.Stats.CR,f.Stats.CD],[f.Parts.Feet]:[f.Stats.ATK_P,f.Stats.SPD],[f.Parts.PlanarSphere]:[f.Stats.ATK_P,f.Stats.Physical_DMG],[f.Parts.LinkRope]:[f.Stats.ATK_P]},presets:[me.VALOROUS_SET,me.fnPioneerSet(4),me.fnAshblazingSet(8)],sortOption:k.FUA,hiddenColumns:[k.ULT,k.DOT],simulation:{parts:{[E.Body]:[n.CR,n.CD],[E.Feet]:[n.ATK_P,n.SPD],[E.PlanarSphere]:[n.ATK_P,n.Physical_DMG],[E.LinkRope]:[n.ATK_P]},substats:[n.CD,n.CR,n.ATK_P,n.ATK],errRopeEidolon:0,comboAbilities:[Oe,Ae,ue,ke],comboDot:0,comboBreak:0,relicSets:[[G.TheWindSoaringValorous,G.TheWindSoaringValorous],...ve],ornamentSets:[G.DuranDynastyOfRunningWolves,...sa,...Ze],teammates:[{characterId:"1309",lightCone:"23026",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1202",lightCone:"21018",characterEidolon:6,lightConeSuperimposition:5},{characterId:"1217",lightCone:"23017",characterEidolon:0,lightConeSuperimposition:1}]}},1222:{stats:{[f.Stats.ATK]:.75,[f.Stats.ATK_P]:.75,[f.Stats.DEF]:.5,[f.Stats.DEF_P]:.5,[f.Stats.HP]:.5,[f.Stats.HP_P]:.5,[f.Stats.SPD]:1,[f.Stats.CR]:0,[f.Stats.CD]:0,[f.Stats.EHR]:0,[f.Stats.RES]:.75,[f.Stats.BE]:1,[f.Stats.ERR]:1,[f.Stats.OHB]:0,[f.Stats.Physical_DMG]:0,[f.Stats.Fire_DMG]:1,[f.Stats.Ice_DMG]:0,[f.Stats.Lightning_DMG]:0,[f.Stats.Wind_DMG]:0,[f.Stats.Quantum_DMG]:0,[f.Stats.Imaginary_DMG]:0},parts:{[f.Parts.Body]:[f.Stats.ATK_P,f.Stats.OHB,f.Stats.DEF_P,f.Stats.HP_P],[f.Parts.Feet]:[f.Stats.SPD],[f.Parts.PlanarSphere]:[f.Stats.ATK_P,f.Stats.DEF_P,f.Stats.HP_P,f.Stats.Fire_DMG],[f.Parts.LinkRope]:[f.Stats.BE,f.Stats.ERR,f.Stats.ATK_P]},presets:[me.BANANA_SET,me.fnAshblazingSet(6),me.VALOROUS_SET],sortOption:k.BE,addedColumns:[k.OHB,k.HEAL],hiddenColumns:[k.DOT]},1223:{stats:{[f.Stats.ATK]:.75,[f.Stats.ATK_P]:.75,[f.Stats.DEF]:0,[f.Stats.DEF_P]:0,[f.Stats.HP]:0,[f.Stats.HP_P]:0,[f.Stats.SPD]:1,[f.Stats.CR]:1,[f.Stats.CD]:1,[f.Stats.EHR]:0,[f.Stats.RES]:0,[f.Stats.BE]:0,[f.Stats.ERR]:0,[f.Stats.OHB]:0,[f.Stats.Physical_DMG]:0,[f.Stats.Fire_DMG]:0,[f.Stats.Ice_DMG]:0,[f.Stats.Lightning_DMG]:1,[f.Stats.Wind_DMG]:0,[f.Stats.Quantum_DMG]:0,[f.Stats.Imaginary_DMG]:0},parts:{[f.Parts.Body]:[f.Stats.CR,f.Stats.CD],[f.Parts.Feet]:[f.Stats.ATK_P,f.Stats.SPD],[f.Parts.PlanarSphere]:[f.Stats.ATK_P,f.Stats.Lightning_DMG],[f.Parts.LinkRope]:[f.Stats.ATK_P]},presets:[me.fnPioneerSet(4),me.fnAshblazingSet(6),me.VALOROUS_SET],sortOption:k.FUA,hiddenColumns:[k.DOT],simulation:{parts:{[E.Body]:[n.CR,n.CD],[E.Feet]:[n.ATK_P,n.SPD],[E.PlanarSphere]:[n.ATK_P,n.Lightning_DMG],[E.LinkRope]:[n.ATK_P]},substats:[n.ATK_P,n.CR,n.CD,n.ATK],comboAbilities:[Oe,ue,Ae,ke,ke],comboDot:0,comboBreak:0,deprioritizeBuffs:!0,relicSets:[[G.PioneerDiverOfDeadWaters,G.PioneerDiverOfDeadWaters],[G.TheAshblazingGrandDuke,G.TheAshblazingGrandDuke],...ve],ornamentSets:[G.DuranDynastyOfRunningWolves,G.IzumoGenseiAndTakamaDivineRealm,...sa,...Ze],teammates:[{characterId:"1112",lightCone:"23016",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1309",lightCone:"23026",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1304",lightCone:"23023",characterEidolon:0,lightConeSuperimposition:1}]}},1224:{stats:{[f.Stats.ATK]:.75,[f.Stats.ATK_P]:.75,[f.Stats.DEF]:0,[f.Stats.DEF_P]:0,[f.Stats.HP]:0,[f.Stats.HP_P]:0,[f.Stats.SPD]:1,[f.Stats.CR]:1,[f.Stats.CD]:1,[f.Stats.EHR]:0,[f.Stats.RES]:0,[f.Stats.BE]:0,[f.Stats.ERR]:0,[f.Stats.OHB]:0,[f.Stats.Physical_DMG]:0,[f.Stats.Fire_DMG]:0,[f.Stats.Ice_DMG]:0,[f.Stats.Lightning_DMG]:0,[f.Stats.Wind_DMG]:0,[f.Stats.Quantum_DMG]:0,[f.Stats.Imaginary_DMG]:1},parts:{[f.Parts.Body]:[f.Stats.CR,f.Stats.CD],[f.Parts.Feet]:[f.Stats.ATK_P,f.Stats.SPD],[f.Parts.PlanarSphere]:[f.Stats.ATK_P,f.Stats.Imaginary_DMG],[f.Parts.LinkRope]:[f.Stats.ATK_P]},presets:[me.fnAshblazingSet(2),me.VALOROUS_SET],sortOption:k.BASIC,hiddenColumns:[k.SKILL,k.DOT],simulation:{parts:{[E.Body]:[n.CR,n.CD],[E.Feet]:[n.ATK_P,n.SPD],[E.PlanarSphere]:[n.ATK_P,n.Imaginary_DMG],[E.LinkRope]:[n.ATK_P]},substats:[n.ATK_P,n.CR,n.CD,n.ATK],comboAbilities:[Oe,Ae,rt,ke],comboDot:0,comboBreak:0,deprioritizeBuffs:!0,relicSets:[[G.MusketeerOfWildWheat,G.MusketeerOfWildWheat],[G.WastelanderOfBanditryDesert,G.WastelanderOfBanditryDesert],...ve],ornamentSets:[G.RutilantArena,G.IzumoGenseiAndTakamaDivineRealm,...Ze],teammates:[{characterId:"1112",lightCone:"23016",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1309",lightCone:"23026",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1304",lightCone:"23023",characterEidolon:0,lightConeSuperimposition:1}]}},1225:{stats:{[n.ATK]:0,[n.ATK_P]:0,[n.DEF]:0,[n.DEF_P]:0,[n.HP]:0,[n.HP_P]:0,[n.SPD]:1,[n.CR]:0,[n.CD]:0,[n.EHR]:1,[n.RES]:0,[n.BE]:1,[n.ERR]:1,[n.OHB]:0,[n.Physical_DMG]:0,[n.Fire_DMG]:1,[n.Ice_DMG]:0,[n.Lightning_DMG]:0,[n.Wind_DMG]:0,[n.Quantum_DMG]:0,[n.Imaginary_DMG]:0},parts:{[E.Body]:[],[E.Feet]:[n.SPD],[E.PlanarSphere]:[],[E.LinkRope]:[n.ERR,n.BE]},presets:[],sortOption:k.BASIC,hiddenColumns:[k.SKILL,k.FUA,k.DOT],simulation:{parts:{[E.Body]:[n.CR,n.ATK_P,n.EHR],[E.Feet]:[n.SPD,n.ATK_P],[E.PlanarSphere]:[n.ATK_P,n.Fire_DMG],[E.LinkRope]:[n.BE]},substats:[n.BE,n.ATK_P,n.CR,n.CD,n.EHR],errRopeEidolon:0,breakpoints:{[n.EHR]:.67},comboAbilities:[Oe,Ae,rt,rt,rt],comboDot:0,comboBreak:3,deprioritizeBuffs:!0,relicSets:[[G.ThiefOfShootingMeteor,G.ThiefOfShootingMeteor],[G.EagleOfTwilightLine,G.EagleOfTwilightLine],Xr,...ve],ornamentSets:[G.ForgeOfTheKalpagniLantern,G.TaliaKingdomOfBanditry,...pu],teammates:[{characterId:"1310",lightCone:"23025",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1303",lightCone:"23019",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1222",lightCone:"23032",characterEidolon:0,lightConeSuperimposition:1}]}},1301:{stats:{[n.ATK]:0,[n.ATK_P]:0,[n.DEF]:.75,[n.DEF_P]:.75,[n.HP]:.75,[n.HP_P]:.75,[n.SPD]:1,[n.CR]:0,[n.CD]:0,[n.EHR]:0,[n.RES]:.75,[n.BE]:1,[n.ERR]:1,[n.OHB]:1,[n.Physical_DMG]:0,[n.Fire_DMG]:0,[n.Ice_DMG]:0,[n.Lightning_DMG]:0,[n.Wind_DMG]:0,[n.Quantum_DMG]:0,[n.Imaginary_DMG]:0},parts:{[E.Body]:[n.OHB],[E.Feet]:[n.SPD],[E.PlanarSphere]:[],[E.LinkRope]:[n.ERR,n.BE]},presets:[],sortOption:k.BE,addedColumns:[k.OHB,k.HEAL],hiddenColumns:[k.SKILL,k.FUA,k.DOT]},1302:{stats:{[n.ATK]:.75,[n.ATK_P]:.75,[n.DEF]:0,[n.DEF_P]:0,[n.HP]:0,[n.HP_P]:0,[n.SPD]:1,[n.CR]:1,[n.CD]:1,[n.EHR]:0,[n.RES]:0,[n.BE]:0,[n.ERR]:0,[n.OHB]:0,[n.Physical_DMG]:1,[n.Fire_DMG]:0,[n.Ice_DMG]:0,[n.Lightning_DMG]:0,[n.Wind_DMG]:0,[n.Quantum_DMG]:0,[n.Imaginary_DMG]:0},parts:{[E.Body]:[n.CR,n.CD],[E.Feet]:[n.ATK_P,n.SPD],[E.PlanarSphere]:[n.Physical_DMG,n.ATK_P],[E.LinkRope]:[n.ATK_P]},presets:[],sortOption:k.ULT,hiddenColumns:[k.FUA,k.DOT],simulation:{parts:{[E.Body]:[n.CR,n.CD],[E.Feet]:[n.ATK_P,n.SPD],[E.PlanarSphere]:[n.ATK_P,n.Physical_DMG],[E.LinkRope]:[n.ATK_P]},substats:[n.CD,n.CR,n.ATK_P,n.ATK],comboAbilities:[Oe,Ae,ue,ue,ue],comboDot:0,comboBreak:0,errRopeEidolon:0,relicSets:[[G.ScholarLostInErudition,G.ScholarLostInErudition],[G.ChampionOfStreetwiseBoxing,G.ChampionOfStreetwiseBoxing],...ve],ornamentSets:[G.InertSalsotto,...Ze,G.FirmamentFrontlineGlamoth],teammates:[{characterId:"1303",lightCone:"23019",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1202",lightCone:"21018",characterEidolon:6,lightConeSuperimposition:5},{characterId:"1217",lightCone:"23017",characterEidolon:0,lightConeSuperimposition:1}]}},1303:{stats:{[n.ATK]:0,[n.ATK_P]:0,[n.DEF]:.5,[n.DEF_P]:.5,[n.HP]:.5,[n.HP_P]:.5,[n.SPD]:1,[n.CR]:0,[n.CD]:0,[n.EHR]:0,[n.RES]:.5,[n.BE]:1,[n.ERR]:1,[n.OHB]:0,[n.Physical_DMG]:0,[n.Fire_DMG]:0,[n.Ice_DMG]:0,[n.Lightning_DMG]:0,[n.Wind_DMG]:0,[n.Quantum_DMG]:0,[n.Imaginary_DMG]:0},parts:{[E.Body]:[],[E.Feet]:[],[E.PlanarSphere]:[],[E.LinkRope]:[n.ERR,n.BE]},presets:[],sortOption:k.BE,hiddenColumns:[k.SKILL,k.ULT,k.FUA,k.DOT]},1304:{stats:{[n.ATK]:0,[n.ATK_P]:0,[n.DEF]:1,[n.DEF_P]:1,[n.HP]:0,[n.HP_P]:0,[n.SPD]:1,[n.CR]:1,[n.CD]:1,[n.EHR]:0,[n.RES]:0,[n.BE]:0,[n.ERR]:1,[n.OHB]:0,[n.Physical_DMG]:0,[n.Fire_DMG]:0,[n.Ice_DMG]:0,[n.Lightning_DMG]:0,[n.Wind_DMG]:0,[n.Quantum_DMG]:0,[n.Imaginary_DMG]:1},parts:{[E.Body]:[n.DEF_P,n.CR,n.CD],[E.Feet]:[n.DEF_P,n.SPD],[E.PlanarSphere]:[n.Imaginary_DMG,n.DEF_P],[E.LinkRope]:[n.DEF_P,n.ERR]},presets:[me.VALOROUS_SET,me.fnPioneerSet(4)],sortOption:k.FUA,addedColumns:[k.SHIELD],hiddenColumns:[k.SKILL,k.DOT],simulation:{parts:{[E.Body]:[n.CR,n.CD,n.DEF_P],[E.Feet]:[n.DEF_P,n.SPD],[E.PlanarSphere]:[n.DEF_P,n.Imaginary_DMG],[E.LinkRope]:[n.DEF_P]},substats:[n.CD,n.CR,n.DEF_P,n.DEF],breakpoints:{[n.DEF]:4e3},comboAbilities:[Oe,Ae,rt,ke,rt,ke],comboDot:0,comboBreak:0,deprioritizeBuffs:!0,relicSets:[[G.PioneerDiverOfDeadWaters,G.PioneerDiverOfDeadWaters],[G.KnightOfPurityPalace,G.KnightOfPurityPalace],[G.TheAshblazingGrandDuke,G.KnightOfPurityPalace,G.PioneerDiverOfDeadWaters],...ve],ornamentSets:[G.DuranDynastyOfRunningWolves,G.InertSalsotto,...sa,...Ze,...gu],teammates:[{characterId:"1112",lightCone:"23016",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1309",lightCone:"23026",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1305",lightCone:"23020",characterEidolon:0,lightConeSuperimposition:1}]}},1305:{stats:{[n.ATK]:.75,[n.ATK_P]:.75,[n.DEF]:0,[n.DEF_P]:0,[n.HP]:0,[n.HP_P]:0,[n.SPD]:1,[n.CR]:1,[n.CD]:1,[n.EHR]:0,[n.RES]:0,[n.BE]:0,[n.ERR]:0,[n.OHB]:0,[n.Physical_DMG]:0,[n.Fire_DMG]:0,[n.Ice_DMG]:0,[n.Lightning_DMG]:0,[n.Wind_DMG]:0,[n.Quantum_DMG]:0,[n.Imaginary_DMG]:1},parts:{[E.Body]:[n.CR,n.CD],[E.Feet]:[n.ATK_P,n.SPD],[E.PlanarSphere]:[n.ATK_P,n.Imaginary_DMG],[E.LinkRope]:[n.ATK_P]},presets:[me.fnAshblazingSet(1),me.fnPioneerSet(4),me.VALOROUS_SET,me.WASTELANDER_SET],sortOption:k.FUA,hiddenColumns:[k.DOT],simulation:{parts:{[E.Body]:[n.CR,n.CD],[E.Feet]:[n.ATK_P,n.SPD],[E.PlanarSphere]:[n.ATK_P,n.Imaginary_DMG],[E.LinkRope]:[n.ATK_P]},substats:[n.CD,n.CR,n.ATK_P,n.ATK],comboAbilities:[Oe,Ae,ue,ke,ke,ue,ke,ke],comboDot:0,comboBreak:0,relicSets:[[G.PioneerDiverOfDeadWaters,G.PioneerDiverOfDeadWaters],...ve],ornamentSets:[G.DuranDynastyOfRunningWolves,G.IzumoGenseiAndTakamaDivineRealm,...sa,...Ze],teammates:[{characterId:"1112",lightCone:"23016",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1309",lightCone:"23026",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1304",lightCone:"23023",characterEidolon:0,lightConeSuperimposition:1}]}},1306:{stats:{[n.ATK]:0,[n.ATK_P]:0,[n.DEF]:.5,[n.DEF_P]:.5,[n.HP]:.5,[n.HP_P]:.5,[n.SPD]:1,[n.CR]:0,[n.CD]:1,[n.EHR]:0,[n.RES]:.5,[n.BE]:0,[n.ERR]:1,[n.OHB]:0,[n.Physical_DMG]:0,[n.Fire_DMG]:0,[n.Ice_DMG]:0,[n.Lightning_DMG]:0,[n.Wind_DMG]:0,[n.Quantum_DMG]:0,[n.Imaginary_DMG]:0},parts:{[E.Body]:[n.CD],[E.Feet]:[n.SPD],[E.PlanarSphere]:[],[E.LinkRope]:[n.ERR]},presets:[],sortOption:k.CD,hiddenColumns:[k.SKILL,k.ULT,k.FUA,k.DOT]},1307:{stats:{[n.ATK]:1,[n.ATK_P]:1,[n.DEF]:0,[n.DEF_P]:0,[n.HP]:0,[n.HP_P]:0,[n.SPD]:1,[n.CR]:0,[n.CD]:0,[n.EHR]:1,[n.RES]:0,[n.BE]:0,[n.ERR]:0,[n.OHB]:0,[n.Physical_DMG]:0,[n.Fire_DMG]:0,[n.Ice_DMG]:0,[n.Lightning_DMG]:0,[n.Wind_DMG]:1,[n.Quantum_DMG]:0,[n.Imaginary_DMG]:0},parts:{[E.Body]:[n.ATK_P,n.EHR],[E.Feet]:[n.SPD,n.ATK_P],[E.PlanarSphere]:[n.Wind_DMG,n.ATK_P],[E.LinkRope]:[n.ATK_P]},presets:[me.PRISONER_SET],sortOption:k.DOT,hiddenColumns:[k.FUA],simulation:{parts:{[E.Body]:[n.EHR,n.ATK_P],[E.Feet]:[n.ATK_P,n.SPD],[E.PlanarSphere]:[n.ATK_P,n.Wind_DMG],[E.LinkRope]:[n.ATK_P]},substats:[n.ATK_P,n.EHR,n.ATK,n.CR,n.CD],breakpoints:{[n.EHR]:1.2},comboAbilities:[Oe,ue,Ae,rt,rt],comboDot:16,comboBreak:0,relicSets:[[G.PrisonerInDeepConfinement,G.PrisonerInDeepConfinement],...ve],ornamentSets:[G.FirmamentFrontlineGlamoth,G.PanCosmicCommercialEnterprise],teammates:[{characterId:"1005",lightCone:"23006",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1303",lightCone:"23019",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1217",lightCone:"23017",characterEidolon:0,lightConeSuperimposition:1}]}},1308:{stats:{[n.ATK]:.75,[n.ATK_P]:.75,[n.DEF]:0,[n.DEF_P]:0,[n.HP]:0,[n.HP_P]:0,[n.SPD]:1,[n.CR]:1,[n.CD]:1,[n.EHR]:0,[n.RES]:0,[n.BE]:0,[n.ERR]:0,[n.OHB]:0,[n.Physical_DMG]:0,[n.Fire_DMG]:0,[n.Ice_DMG]:0,[n.Lightning_DMG]:1,[n.Wind_DMG]:0,[n.Quantum_DMG]:0,[n.Imaginary_DMG]:0},parts:{[E.Body]:[n.CR,n.CD,n.ATK_P],[E.Feet]:[n.ATK_P,n.SPD],[E.PlanarSphere]:[n.Lightning_DMG,n.ATK_P],[E.LinkRope]:[n.ATK_P]},presets:[me.fnPioneerSet(4)],sortOption:k.ULT,hiddenColumns:[k.FUA,k.DOT],simulation:{parts:{[E.Body]:[n.ATK_P,n.CR,n.CD],[E.Feet]:[n.ATK_P,n.SPD],[E.PlanarSphere]:[n.ATK_P,n.Lightning_DMG],[E.LinkRope]:[n.ATK_P]},substats:[n.CD,n.CR,n.ATK_P,n.ATK],comboAbilities:[Oe,Ae,ue,ue],comboDot:0,comboBreak:0,relicSets:[[G.PioneerDiverOfDeadWaters,G.PioneerDiverOfDeadWaters],...ve],ornamentSets:[G.IzumoGenseiAndTakamaDivineRealm,...Ze],teammates:[{characterId:"1106",lightCone:"21015",characterEidolon:6,lightConeSuperimposition:5},{characterId:"1006",lightCone:"23007",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1304",lightCone:"21016",characterEidolon:0,lightConeSuperimposition:5}]}},1309:{stats:{[n.ATK]:1,[n.ATK_P]:1,[n.DEF]:.5,[n.DEF_P]:.5,[n.HP]:.5,[n.HP_P]:.5,[n.SPD]:1,[n.CR]:0,[n.CD]:0,[n.EHR]:0,[n.RES]:.5,[n.BE]:0,[n.ERR]:1,[n.OHB]:0,[n.Physical_DMG]:1,[n.Fire_DMG]:0,[n.Ice_DMG]:0,[n.Lightning_DMG]:0,[n.Wind_DMG]:0,[n.Quantum_DMG]:0,[n.Imaginary_DMG]:0},parts:{[E.Body]:[n.ATK_P],[E.Feet]:[n.ATK_P,n.SPD],[E.PlanarSphere]:[n.ATK_P,n.Physical_DMG],[f.Parts.LinkRope]:[n.ERR]},presets:[],sortOption:k.ATK,hiddenColumns:[k.SKILL,k.FUA,k.DOT]},1310:{stats:{[f.Stats.ATK]:.5,[f.Stats.ATK_P]:.5,[f.Stats.DEF]:0,[f.Stats.DEF_P]:0,[f.Stats.HP]:0,[f.Stats.HP_P]:0,[f.Stats.SPD]:1,[f.Stats.CR]:0,[f.Stats.CD]:0,[f.Stats.EHR]:0,[f.Stats.RES]:0,[f.Stats.BE]:1,[f.Stats.ERR]:0,[f.Stats.OHB]:0,[f.Stats.Physical_DMG]:0,[f.Stats.Fire_DMG]:0,[f.Stats.Ice_DMG]:0,[f.Stats.Lightning_DMG]:0,[f.Stats.Wind_DMG]:0,[f.Stats.Quantum_DMG]:0,[f.Stats.Imaginary_DMG]:0},parts:{[f.Parts.Body]:[f.Stats.ATK_P],[f.Parts.Feet]:[f.Stats.ATK_P,f.Stats.SPD],[f.Parts.PlanarSphere]:[f.Stats.ATK_P],[f.Parts.LinkRope]:[f.Stats.BE]},presets:[],sortOption:k.SKILL,hiddenColumns:[k.ULT,k.FUA,k.DOT],simulation:{parts:{[E.Body]:[n.ATK_P],[E.Feet]:[n.ATK_P,n.SPD],[E.PlanarSphere]:[n.ATK_P],[E.LinkRope]:[n.BE]},substats:[n.BE,n.ATK_P,n.ATK,n.CR,n.CD],comboAbilities:[Oe,Ae,ue,ue,ue],comboDot:0,comboBreak:1,relicSets:[[G.IronCavalryAgainstTheScourge,G.IronCavalryAgainstTheScourge],...ve],ornamentSets:[G.ForgeOfTheKalpagniLantern],teammates:[{characterId:"8006",lightCone:"21004",characterEidolon:6,lightConeSuperimposition:5},{characterId:"1303",lightCone:"23019",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1301",lightCone:"20015",characterEidolon:6,lightConeSuperimposition:5}]}},1312:{stats:{[n.ATK]:.75,[n.ATK_P]:.75,[n.DEF]:0,[n.DEF_P]:0,[n.HP]:0,[n.HP_P]:0,[n.SPD]:1,[n.CR]:1,[n.CD]:1,[n.EHR]:0,[n.RES]:0,[n.BE]:0,[n.ERR]:0,[n.OHB]:0,[n.Physical_DMG]:0,[n.Fire_DMG]:0,[n.Ice_DMG]:1,[n.Lightning_DMG]:0,[n.Wind_DMG]:0,[n.Quantum_DMG]:0,[n.Imaginary_DMG]:0},parts:{[E.Body]:[n.CR,n.CD],[E.Feet]:[n.ATK_P,n.SPD],[E.PlanarSphere]:[n.ATK_P,n.Ice_DMG],[E.LinkRope]:[n.ATK_P]},presets:[me.fnPioneerSet(4)],sortOption:k.ULT,hiddenColumns:[k.FUA,k.DOT],simulation:{parts:{[E.Body]:[n.CR,n.CD],[E.Feet]:[n.ATK_P,n.SPD],[E.PlanarSphere]:[n.ATK_P,n.Ice_DMG],[E.LinkRope]:[n.ATK_P]},substats:[n.CD,n.CR,n.ATK_P,n.ATK],comboAbilities:[Oe,Ae,ue,ue,ue],comboDot:0,comboBreak:0,relicSets:[[G.ScholarLostInErudition,G.ScholarLostInErudition],[G.PioneerDiverOfDeadWaters,G.PioneerDiverOfDeadWaters],...ve],ornamentSets:[G.RutilantArena,G.FirmamentFrontlineGlamoth,G.InertSalsotto,...Ze],teammates:[{characterId:"1303",lightCone:"23019",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1106",lightCone:"21015",characterEidolon:6,lightConeSuperimposition:5},{characterId:"1217",lightCone:"23017",characterEidolon:0,lightConeSuperimposition:1}]}},1313:{stats:{[n.ATK]:0,[n.ATK_P]:0,[n.DEF]:.5,[n.DEF_P]:.5,[n.HP]:.5,[n.HP_P]:.5,[n.SPD]:1,[n.CR]:0,[n.CD]:1,[n.EHR]:0,[n.RES]:.75,[n.BE]:0,[n.ERR]:1,[n.OHB]:0,[n.Physical_DMG]:0,[n.Fire_DMG]:0,[n.Ice_DMG]:0,[n.Lightning_DMG]:0,[n.Wind_DMG]:0,[n.Quantum_DMG]:0,[n.Imaginary_DMG]:1},parts:{[E.Body]:[n.CD],[E.Feet]:[],[E.PlanarSphere]:[],[E.LinkRope]:[n.ERR]},presets:[],sortOption:k.CD,hiddenColumns:[k.SKILL,k.ULT,k.FUA,k.DOT]},1314:{stats:{[f.Stats.ATK]:.75,[f.Stats.ATK_P]:.75,[f.Stats.DEF]:0,[f.Stats.DEF_P]:0,[f.Stats.HP]:0,[f.Stats.HP_P]:0,[f.Stats.SPD]:1,[f.Stats.CR]:1,[f.Stats.CD]:1,[f.Stats.EHR]:0,[f.Stats.RES]:0,[f.Stats.BE]:0,[f.Stats.ERR]:0,[f.Stats.OHB]:0,[f.Stats.Physical_DMG]:0,[f.Stats.Fire_DMG]:0,[f.Stats.Ice_DMG]:0,[f.Stats.Lightning_DMG]:0,[f.Stats.Wind_DMG]:0,[f.Stats.Quantum_DMG]:1,[f.Stats.Imaginary_DMG]:0},parts:{[f.Parts.Body]:[f.Stats.CR,f.Stats.CD],[f.Parts.Feet]:[f.Stats.ATK_P,f.Stats.SPD],[f.Parts.PlanarSphere]:[f.Stats.ATK_P,f.Stats.Quantum_DMG],[f.Parts.LinkRope]:[f.Stats.ATK_P]},presets:[me.VALOROUS_SET,me.fnAshblazingSet(8)],sortOption:k.FUA,hiddenColumns:[k.SKILL,k.DOT],simulation:{parts:{[E.Body]:[n.CR,n.CD],[E.Feet]:[n.ATK_P,n.SPD],[E.PlanarSphere]:[n.ATK_P,n.Quantum_DMG],[E.LinkRope]:[n.ATK_P]},substats:[n.CD,n.CR,n.ATK_P,n.ATK],comboAbilities:[Oe,Ae,ke,rt,ke,rt],comboDot:0,comboBreak:0,relicSets:[[G.GeniusOfBrilliantStars,G.GeniusOfBrilliantStars],[G.TheAshblazingGrandDuke,G.TheAshblazingGrandDuke],[G.PoetOfMourningCollapse,G.PoetOfMourningCollapse],...ve],ornamentSets:[G.DuranDynastyOfRunningWolves,G.IzumoGenseiAndTakamaDivineRealm,...sa,...Ze],teammates:[{characterId:"1112",lightCone:"23016",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1309",lightCone:"23026",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1304",lightCone:"23023",characterEidolon:0,lightConeSuperimposition:1}]}},1315:{stats:{[n.ATK]:.25,[n.ATK_P]:.25,[n.DEF]:0,[n.DEF_P]:0,[n.HP]:0,[n.HP_P]:0,[n.SPD]:1,[n.CR]:.25,[n.CD]:.25,[n.EHR]:0,[n.RES]:0,[n.BE]:1,[n.ERR]:0,[n.OHB]:0,[n.Physical_DMG]:1,[n.Fire_DMG]:0,[n.Ice_DMG]:0,[n.Lightning_DMG]:0,[n.Wind_DMG]:0,[n.Quantum_DMG]:0,[n.Imaginary_DMG]:0},parts:{[E.Body]:[],[E.Feet]:[n.SPD],[E.PlanarSphere]:[],[E.LinkRope]:[n.BE]},presets:[],sortOption:k.BASIC,hiddenColumns:[k.SKILL,k.FUA,k.DOT],simulation:{parts:{[E.Body]:[n.CR,n.CD],[E.Feet]:[n.SPD],[E.PlanarSphere]:[n.Physical_DMG,n.ATK_P],[E.LinkRope]:[n.BE]},substats:[n.BE,n.CD,n.CR,n.ATK_P,n.ATK],comboAbilities:[Oe,Ae,rt,rt,rt],comboDot:0,comboBreak:1,relicSets:[[G.ThiefOfShootingMeteor,G.WatchmakerMasterOfDreamMachinations],[G.IronCavalryAgainstTheScourge,G.IronCavalryAgainstTheScourge],Xr,...ve],ornamentSets:[G.TaliaKingdomOfBanditry],teammates:[{characterId:"8006",lightCone:"21004",characterEidolon:6,lightConeSuperimposition:5},{characterId:"1303",lightCone:"23019",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1301",lightCone:"20015",characterEidolon:6,lightConeSuperimposition:5}]}},1317:{stats:{[n.ATK]:.5,[n.ATK_P]:.5,[n.DEF]:0,[n.DEF_P]:0,[n.HP]:0,[n.HP_P]:0,[n.SPD]:1,[n.CR]:0,[n.CD]:0,[n.EHR]:0,[n.RES]:0,[n.BE]:1,[n.ERR]:0,[n.OHB]:0,[n.Physical_DMG]:0,[n.Fire_DMG]:0,[n.Ice_DMG]:0,[n.Lightning_DMG]:0,[n.Wind_DMG]:0,[n.Quantum_DMG]:0,[n.Imaginary_DMG]:1},parts:{[E.Body]:[],[E.Feet]:[n.SPD],[E.PlanarSphere]:[],[E.LinkRope]:[n.BE]},presets:[me.WASTELANDER_SET],sortOption:k.BASIC,hiddenColumns:[k.ULT,k.FUA,k.DOT],simulation:{parts:{[E.Body]:[n.ATK_P],[E.Feet]:[n.SPD],[E.PlanarSphere]:[n.Imaginary_DMG,n.ATK_P],[E.LinkRope]:[n.BE]},substats:[n.BE,n.ATK_P,n.ATK,n.CD,n.CR],breakpoints:{[n.ATK]:3200},comboAbilities:[Oe,Ae,rt,rt,rt,ue],comboDot:0,comboBreak:1,relicSets:[[G.IronCavalryAgainstTheScourge,G.IronCavalryAgainstTheScourge],[G.EagleOfTwilightLine,G.EagleOfTwilightLine],...ve],ornamentSets:[G.TaliaKingdomOfBanditry],teammates:[{characterId:"8006",lightCone:"21004",characterEidolon:6,lightConeSuperimposition:5},{characterId:"1303",lightCone:"23019",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1222",lightCone:"23032",characterEidolon:0,lightConeSuperimposition:1}]}},8001:{stats:{[n.ATK]:.75,[n.ATK_P]:.75,[n.DEF]:0,[n.DEF_P]:0,[n.HP]:0,[n.HP_P]:0,[n.SPD]:1,[n.CR]:1,[n.CD]:1,[n.EHR]:0,[n.RES]:0,[n.BE]:.5,[n.ERR]:0,[n.OHB]:0,[n.Physical_DMG]:1,[n.Fire_DMG]:0,[n.Ice_DMG]:0,[n.Lightning_DMG]:0,[n.Wind_DMG]:0,[n.Quantum_DMG]:0,[n.Imaginary_DMG]:0},parts:{[E.Body]:[n.CR,n.CD],[E.Feet]:[n.ATK_P,n.SPD],[E.PlanarSphere]:[n.ATK_P,n.Physical_DMG],[E.LinkRope]:[n.ATK_P,n.BE]},presets:[],sortOption:k.SKILL,hiddenColumns:[k.FUA,k.DOT],simulation:{parts:{[E.Body]:[n.CR,n.CD],[E.Feet]:[n.ATK_P,n.SPD],[E.PlanarSphere]:[n.ATK_P,n.Physical_DMG],[E.LinkRope]:[n.ATK_P,n.BE]},substats:[n.CD,n.CR,n.ATK_P,n.ATK],comboAbilities:[Oe,Ae,ue,ue,ue],comboDot:0,comboBreak:1,relicSets:[[G.ScholarLostInErudition,G.ScholarLostInErudition],...ve],ornamentSets:[G.RutilantArena,G.FirmamentFrontlineGlamoth,...Ze],teammates:[{characterId:"1101",lightCone:"23003",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1303",lightCone:"23019",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1217",lightCone:"23017",characterEidolon:0,lightConeSuperimposition:1}]}},8002:{stats:{[n.ATK]:.75,[n.ATK_P]:.75,[n.DEF]:0,[n.DEF_P]:0,[n.HP]:0,[n.HP_P]:0,[n.SPD]:1,[n.CR]:1,[n.CD]:1,[n.EHR]:0,[n.RES]:0,[n.BE]:.5,[n.ERR]:0,[n.OHB]:0,[n.Physical_DMG]:1,[n.Fire_DMG]:0,[n.Ice_DMG]:0,[n.Lightning_DMG]:0,[n.Wind_DMG]:0,[n.Quantum_DMG]:0,[n.Imaginary_DMG]:0},parts:{[E.Body]:[n.CR,n.CD],[E.Feet]:[n.ATK_P,n.SPD],[E.PlanarSphere]:[n.ATK_P,n.Physical_DMG],[E.LinkRope]:[n.ATK_P,n.BE]},presets:[],sortOption:k.SKILL,hiddenColumns:[k.FUA,k.DOT],simulation:{parts:{[E.Body]:[n.CR,n.CD],[E.Feet]:[n.ATK_P,n.SPD],[E.PlanarSphere]:[n.ATK_P,n.Physical_DMG],[E.LinkRope]:[n.ATK_P,n.BE]},substats:[n.CD,n.CR,n.ATK_P,n.ATK],comboAbilities:[Oe,Ae,ue,ue,ue],comboDot:0,comboBreak:1,relicSets:[[G.ScholarLostInErudition,G.ScholarLostInErudition],...ve],ornamentSets:[G.RutilantArena,G.FirmamentFrontlineGlamoth,...Ze],teammates:[{characterId:"1101",lightCone:"23003",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1303",lightCone:"23019",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1217",lightCone:"23017",characterEidolon:0,lightConeSuperimposition:1}]}},8003:{stats:{[n.ATK]:0,[n.ATK_P]:0,[n.DEF]:1,[n.DEF_P]:1,[n.HP]:.5,[n.HP_P]:.5,[n.SPD]:1,[n.CR]:0,[n.CD]:0,[n.EHR]:.75,[n.RES]:.75,[n.BE]:0,[n.ERR]:1,[n.OHB]:0,[n.Physical_DMG]:0,[n.Fire_DMG]:0,[n.Ice_DMG]:0,[n.Lightning_DMG]:0,[n.Wind_DMG]:0,[n.Quantum_DMG]:0,[n.Imaginary_DMG]:0},parts:{[E.Body]:[n.DEF_P],[E.Feet]:[n.DEF_P,n.SPD],[E.PlanarSphere]:[n.DEF_P],[E.LinkRope]:[n.DEF_P,n.ERR]},presets:[],sortOption:k.SHIELD,addedColumns:[k.SHIELD],hiddenColumns:[k.SKILL,k.FUA,k.DOT]},8004:{stats:{[n.ATK]:0,[n.ATK_P]:0,[n.DEF]:1,[n.DEF_P]:1,[n.HP]:.5,[n.HP_P]:.5,[n.SPD]:1,[n.CR]:0,[n.CD]:0,[n.EHR]:.75,[n.RES]:.75,[n.BE]:0,[n.ERR]:1,[n.OHB]:0,[n.Physical_DMG]:0,[n.Fire_DMG]:0,[n.Ice_DMG]:0,[n.Lightning_DMG]:0,[n.Wind_DMG]:0,[n.Quantum_DMG]:0,[n.Imaginary_DMG]:0},parts:{[E.Body]:[n.DEF_P],[E.Feet]:[n.DEF_P,n.SPD],[E.PlanarSphere]:[n.DEF_P],[E.LinkRope]:[n.DEF_P,n.ERR]},presets:[],sortOption:k.SHIELD,addedColumns:[k.SHIELD],hiddenColumns:[k.SKILL,k.FUA,k.DOT]},8005:{stats:{[n.ATK]:0,[n.ATK_P]:0,[n.DEF]:.5,[n.DEF_P]:.5,[n.HP]:.5,[n.HP_P]:.5,[n.SPD]:1,[n.CR]:0,[n.CD]:0,[n.EHR]:0,[n.RES]:.5,[n.BE]:1,[n.ERR]:1,[n.OHB]:0,[n.Physical_DMG]:0,[n.Fire_DMG]:0,[n.Ice_DMG]:0,[n.Lightning_DMG]:0,[n.Wind_DMG]:0,[n.Quantum_DMG]:0,[n.Imaginary_DMG]:0},parts:{[E.Body]:[],[E.Feet]:[n.SPD],[E.PlanarSphere]:[],[E.LinkRope]:[n.BE,n.ERR]},presets:[],sortOption:k.BE,hiddenColumns:[k.ULT,k.FUA,k.DOT]},8006:{stats:{[n.ATK]:0,[n.ATK_P]:0,[n.DEF]:.5,[n.DEF_P]:.5,[n.HP]:.5,[n.HP_P]:.5,[n.SPD]:1,[n.CR]:0,[n.CD]:0,[n.EHR]:0,[n.RES]:.5,[n.BE]:1,[n.ERR]:1,[n.OHB]:0,[n.Physical_DMG]:0,[n.Fire_DMG]:0,[n.Ice_DMG]:0,[n.Lightning_DMG]:0,[n.Wind_DMG]:0,[n.Quantum_DMG]:0,[n.Imaginary_DMG]:0},parts:{[E.Body]:[],[E.Feet]:[n.SPD],[E.PlanarSphere]:[],[E.LinkRope]:[n.BE,n.ERR]},presets:[],sortOption:k.BE,hiddenColumns:[k.ULT,k.FUA,k.DOT]},8007:{stats:{[n.ATK]:.25,[n.ATK_P]:.25,[n.DEF]:0,[n.DEF_P]:0,[n.HP]:0,[n.HP_P]:0,[n.SPD]:1,[n.CR]:.25,[n.CD]:1,[n.EHR]:0,[n.RES]:0,[n.BE]:0,[n.ERR]:1,[n.OHB]:0,[n.Physical_DMG]:0,[n.Fire_DMG]:0,[n.Ice_DMG]:1,[n.Lightning_DMG]:0,[n.Wind_DMG]:0,[n.Quantum_DMG]:0,[n.Imaginary_DMG]:0},parts:{[E.Body]:[n.CD],[E.Feet]:[n.ATK_P,n.SPD],[E.PlanarSphere]:[],[E.LinkRope]:[n.ATK_P,n.ERR]},presets:[me.BANANA_SET],sortOption:k.CD,hiddenColumns:[k.SKILL,k.FUA,k.DOT],addedColumns:[k.MEMO_SKILL]},8008:{stats:{[n.ATK]:.25,[n.ATK_P]:.25,[n.DEF]:0,[n.DEF_P]:0,[n.HP]:0,[n.HP_P]:0,[n.SPD]:1,[n.CR]:.25,[n.CD]:1,[n.EHR]:0,[n.RES]:0,[n.BE]:0,[n.ERR]:1,[n.OHB]:0,[n.Physical_DMG]:0,[n.Fire_DMG]:0,[n.Ice_DMG]:1,[n.Lightning_DMG]:0,[n.Wind_DMG]:0,[n.Quantum_DMG]:0,[n.Imaginary_DMG]:0},parts:{[E.Body]:[n.CD],[E.Feet]:[n.ATK_P,n.SPD],[E.PlanarSphere]:[],[E.LinkRope]:[n.ATK_P,n.ERR]},presets:[me.BANANA_SET],sortOption:k.CD,hiddenColumns:[k.SKILL,k.FUA,k.DOT],addedColumns:[k.MEMO_SKILL]},1401:{stats:{[n.ATK]:.75,[n.ATK_P]:.75,[n.DEF]:0,[n.DEF_P]:0,[n.HP]:0,[n.HP_P]:0,[n.SPD]:1,[n.CR]:1,[n.CD]:1,[n.EHR]:0,[n.RES]:0,[n.BE]:0,[n.ERR]:0,[n.OHB]:0,[n.Physical_DMG]:0,[n.Fire_DMG]:0,[n.Ice_DMG]:1,[n.Lightning_DMG]:0,[n.Wind_DMG]:0,[n.Quantum_DMG]:0,[n.Imaginary_DMG]:0},parts:{[E.Body]:[n.CR,n.CD],[E.Feet]:[n.ATK_P,n.SPD],[E.PlanarSphere]:[n.ATK_P,n.Ice_DMG],[E.LinkRope]:[n.ATK_P,n.ERR]},presets:[],sortOption:k.SKILL,hiddenColumns:[k.FUA,k.DOT],simulation:{parts:{[E.Body]:[n.CR,n.CD],[E.Feet]:[n.ATK_P,n.SPD],[E.PlanarSphere]:[n.ATK_P,n.Ice_DMG],[E.LinkRope]:[n.ATK_P]},substats:[n.CD,n.CR,n.ATK_P,n.ATK],comboAbilities:[Oe,Ae,ue],comboDot:0,comboBreak:0,errRopeEidolon:0,relicSets:[[G.ScholarLostInErudition,G.ScholarLostInErudition],...ve],ornamentSets:[G.IzumoGenseiAndTakamaDivineRealm,G.RutilantArena,...Ze],teammates:[{characterId:"1314",lightCone:"23028",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1309",lightCone:"23026",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1222",lightCone:"23032",characterEidolon:0,lightConeSuperimposition:1}]}},1402:{stats:{[n.ATK]:.75,[n.ATK_P]:.75,[n.DEF]:0,[n.DEF_P]:0,[n.HP]:0,[n.HP_P]:0,[n.SPD]:1,[n.CR]:1,[n.CD]:1,[n.EHR]:0,[n.RES]:0,[n.BE]:0,[n.ERR]:1,[n.OHB]:0,[n.Physical_DMG]:0,[n.Fire_DMG]:0,[n.Ice_DMG]:0,[n.Lightning_DMG]:1,[n.Wind_DMG]:0,[n.Quantum_DMG]:0,[n.Imaginary_DMG]:0},parts:{[E.Body]:[n.CR,n.CD],[E.Feet]:[n.ATK_P,n.SPD],[E.PlanarSphere]:[n.ATK_P,n.Lightning_DMG],[E.LinkRope]:[n.ERR,n.ATK_P,n.ERR]},presets:[me.BANANA_SET],sortOption:k.BASIC,hiddenColumns:[k.SKILL,k.ULT,k.FUA,k.DOT],addedColumns:[k.MEMO_SKILL,k.MEMO_TALENT],simulation:{parts:{[E.Body]:[n.CR,n.CD],[E.Feet]:[n.ATK_P,n.SPD],[E.PlanarSphere]:[n.ATK_P,n.Lightning_DMG],[E.LinkRope]:[n.ATK_P]},substats:[n.CD,n.CR,n.ATK_P,n.ATK],comboAbilities:[Oe,Ae,rt,Jn,Jn,rt,Jn],comboDot:0,comboBreak:0,errRopeEidolon:0,relicSets:[[G.HeroOfTriumphantSong,G.HeroOfTriumphantSong],...ve],ornamentSets:[G.TheWondrousBananAmusementPark,G.RutilantArena,...Ze],teammates:[{characterId:"1313",lightCone:"23034",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1309",lightCone:"23026",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1217",lightCone:"23017",characterEidolon:0,lightConeSuperimposition:1}]}},1403:{stats:{[n.ATK]:0,[n.ATK_P]:0,[n.DEF]:0,[n.DEF_P]:0,[n.HP]:.75,[n.HP_P]:.75,[n.SPD]:1,[n.CR]:1,[n.CD]:1,[n.EHR]:0,[n.RES]:0,[n.BE]:0,[n.ERR]:0,[n.OHB]:0,[n.Physical_DMG]:0,[n.Fire_DMG]:0,[n.Ice_DMG]:0,[n.Lightning_DMG]:0,[n.Wind_DMG]:0,[n.Quantum_DMG]:1,[n.Imaginary_DMG]:0},parts:{[E.Body]:[n.CD,n.CR,n.HP_P],[E.Feet]:[n.SPD,n.HP_P],[E.PlanarSphere]:[n.Quantum_DMG,n.HP_P],[E.LinkRope]:[n.HP_P,n.ERR]},presets:[me.VALOROUS_SET],sortOption:k.FUA,hiddenColumns:[],simulation:{parts:{[E.Body]:[n.CR,n.CD,n.HP_P],[E.Feet]:[n.HP_P,n.SPD],[E.PlanarSphere]:[n.HP_P,n.Quantum_DMG],[E.LinkRope]:[n.HP_P]},substats:[n.CD,n.CR,n.HP_P,n.HP,n.ATK_P],comboAbilities:[Oe,Ae,ke,rt,ke,ke],comboDot:0,comboBreak:0,errRopeEidolon:0,deprioritizeBuffs:!0,relicSets:[[G.GeniusOfBrilliantStars,G.GeniusOfBrilliantStars],[G.LongevousDisciple,G.LongevousDisciple],[G.PoetOfMourningCollapse,G.PoetOfMourningCollapse],...ve],ornamentSets:[G.BoneCollectionsSereneDemesne,...sa,...Ze,...gu],teammates:[{characterId:"1401",lightCone:"23037",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1103",lightCone:"20013",characterEidolon:6,lightConeSuperimposition:5},{characterId:"1222",lightCone:"23032",characterEidolon:0,lightConeSuperimposition:1}]}},1404:{stats:{[n.ATK]:0,[n.ATK_P]:0,[n.DEF]:0,[n.DEF_P]:0,[n.HP]:1,[n.HP_P]:1,[n.SPD]:1,[n.CR]:1,[n.CD]:1,[n.EHR]:0,[n.RES]:0,[n.BE]:0,[n.ERR]:0,[n.OHB]:0,[n.Physical_DMG]:0,[n.Fire_DMG]:0,[n.Ice_DMG]:0,[n.Lightning_DMG]:0,[n.Wind_DMG]:0,[n.Quantum_DMG]:0,[n.Imaginary_DMG]:1},parts:{[E.Body]:[n.CD,n.CR,n.HP_P],[E.Feet]:[n.SPD,n.HP_P],[E.PlanarSphere]:[n.Imaginary_DMG,n.HP_P],[E.LinkRope]:[n.HP_P]},presets:[me.WASTELANDER_SET],sortOption:k.SKILL,hiddenColumns:[],simulation:{parts:{[E.Body]:[n.CD,n.HP_P],[E.Feet]:[n.HP_P,n.SPD],[E.PlanarSphere]:[n.HP_P,n.Imaginary_DMG],[E.LinkRope]:[n.HP_P]},substats:[n.CD,n.CR,n.HP_P,n.HP],comboAbilities:[Oe,ue,Ae,ue],comboDot:0,comboBreak:0,relicSets:[[G.ScholarLostInErudition,G.ScholarLostInErudition],...ve],ornamentSets:[G.BoneCollectionsSereneDemesne,G.RutilantArena,...Ze],teammates:[{characterId:"1313",lightCone:"23034",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1403",lightCone:"23038",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1203",lightCone:"23008",characterEidolon:0,lightConeSuperimposition:1}]}},1405:{stats:{[n.ATK]:.75,[n.ATK_P]:.75,[n.DEF]:0,[n.DEF_P]:0,[n.HP]:0,[n.HP_P]:0,[n.SPD]:1,[n.CR]:1,[n.CD]:1,[n.EHR]:0,[n.RES]:0,[n.BE]:0,[n.ERR]:0,[n.OHB]:0,[n.Physical_DMG]:0,[n.Fire_DMG]:0,[n.Ice_DMG]:0,[n.Lightning_DMG]:0,[n.Wind_DMG]:1,[n.Quantum_DMG]:0,[n.Imaginary_DMG]:0},parts:{[E.Body]:[n.CR,n.CD,n.ATK_P],[E.Feet]:[n.ATK_P,n.SPD],[E.PlanarSphere]:[n.ATK_P,n.Wind_DMG],[E.LinkRope]:[n.ATK_P]},presets:[me.fnPioneerSet(4),me.GENIUS_SET],sortOption:k.SKILL,hiddenColumns:[k.FUA,k.DOT],simulation:{parts:{[E.Body]:[n.CR,n.CD,n.ATK_P],[E.Feet]:[n.ATK_P,n.SPD],[E.PlanarSphere]:[n.ATK_P,n.Wind_DMG],[E.LinkRope]:[n.ATK_P]},substats:[n.CD,n.CR,n.ATK_P,n.ATK],comboAbilities:[Oe,Ae,ue,ue,ue,ue],comboDot:0,comboBreak:0,errRopeEidolon:0,deprioritizeBuffs:!1,relicSets:[[G.GeniusOfBrilliantStars,G.GeniusOfBrilliantStars],[G.PioneerDiverOfDeadWaters,G.PioneerDiverOfDeadWaters],[G.ScholarLostInErudition,G.ScholarLostInErudition],...ve],ornamentSets:[G.RutilantArena,G.FirmamentFrontlineGlamoth,G.IzumoGenseiAndTakamaDivineRealm,G.SpaceSealingStation,G.FirmamentFrontlineGlamoth,...Ze],teammates:[{characterId:"1313",lightCone:"23034",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1309",lightCone:"23026",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1217",lightCone:"23017",characterEidolon:0,lightConeSuperimposition:1}]}},1407:{stats:{[n.ATK]:0,[n.ATK_P]:0,[n.DEF]:0,[n.DEF_P]:0,[n.HP]:1,[n.HP_P]:1,[n.SPD]:0,[n.CR]:1,[n.CD]:1,[n.EHR]:0,[n.RES]:0,[n.BE]:0,[n.ERR]:0,[n.OHB]:0,[n.Physical_DMG]:0,[n.Fire_DMG]:0,[n.Ice_DMG]:0,[n.Lightning_DMG]:0,[n.Wind_DMG]:0,[n.Quantum_DMG]:1,[n.Imaginary_DMG]:0},parts:{[E.Body]:[n.CR,n.CD,n.HP_P],[E.Feet]:[n.HP_P],[E.PlanarSphere]:[n.HP_P,n.Quantum_DMG],[E.LinkRope]:[n.HP_P]},presets:[me.BANANA_SET],sortOption:k.MEMO_SKILL,addedColumns:[k.MEMO_SKILL,k.MEMO_TALENT],hiddenColumns:[k.FUA,k.DOT,k.ULT],simulation:{parts:{[E.Body]:[n.CR,n.CD,n.HP_P],[E.Feet]:[n.HP_P,n.SPD],[E.PlanarSphere]:[n.HP_P,n.Quantum_DMG],[E.LinkRope]:[n.HP_P]},substats:[n.CD,n.CR,n.HP_P,n.HP],comboAbilities:[Oe,ue,ue,Ae,Jn,Jn,Jn,Jn,R5],comboDot:0,comboBreak:0,relicSets:[[G.PoetOfMourningCollapse,G.PoetOfMourningCollapse],...ve],ornamentSets:[G.BoneCollectionsSereneDemesne,...Ze],teammates:[{characterId:"1403",lightCone:"23038",characterEidolon:0,lightConeSuperimposition:1},{characterId:"8008",lightCone:"21050",characterEidolon:6,lightConeSuperimposition:5},{characterId:"1222",lightCone:"23032",characterEidolon:0,lightConeSuperimposition:1}]}}}}window.WorkerPool=Ya;window.Constants=f;window.DataParser=nf;window.DB=V;window.Assets=Q;window.RelicAugmenter=fi;window.StatCalculator=Ht;window.Gradient=Be;window.SaveState=Pe;window.RelicFilters=ct;window.Renderer=$;window.Message=oe;window.Hint=Rt;window.CharacterConverter=ql;window.RelicScorer=Dt;window.BufferPacker=vs;window.RelicRollFixer=as;window.colorTheme=ol.BLUE;nf.initialize();Pe.load(!1);Ed(!1);const P5=({error:e})=>i.jsxs(_e,{children:["Something went wrong: ",e.message]});document.addEventListener("DOMContentLoaded",function(){const e=Qf.createRoot(document.getElementById("root"));$f(document.body,{}),e.render(i.jsx(Bl,{fallbackRender:P5,children:i.jsx(C5,{})}))});
