const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/March7th-nWXhfuWI.js","assets/conditionalFinalizers-ChaoxVFF.js","assets/vendor-PqicMVLa.js","assets/DanHeng-zw_1Lu9a.js","assets/Himeko-B-JJV5f0.js","assets/Welt-BVSWa3Ns.js","assets/Kafka-VISeBAFt.js","assets/SilverWolf-CkPIxHv8.js","assets/Arlan-CfDgc7Gw.js","assets/Asta-weSErHRY.js","assets/Herta-BiYLKD_E.js","assets/Bronya-e0jj4kZn.js","assets/Seele-BCMmcyN0.js","assets/Serval-BBMCRbkJ.js","assets/Gepard-cvI8fJh_.js","assets/Natasha-CQbbwff-.js","assets/Pela-BMYxw6YQ.js","assets/Clara-C9U_j1JM.js","assets/Sampo-DgWcP3Qx.js","assets/Hook-BZHXktuE.js","assets/Lynx-B3zJJ-vx.js","assets/Luka-BiTHa9z9.js","assets/Topaz-CXj10nu4.js","assets/Qingque-BVM7OIAv.js","assets/Tingyun-Dh5-Z-Sa.js","assets/Luocha-BNo-IpT5.js","assets/JingYuan-COsl4aCC.js","assets/Blade-DP4awdfS.js","assets/Sushang-hlEJDW1q.js","assets/Yukong-yH698ONT.js","assets/FuXuan-DwksJ3qp.js","assets/Yanqing-B-r_xCSF.js","assets/Guinaifen-DXekRRR_.js","assets/Bailu-IIdaqhec.js","assets/Jingliu-dX1aN2Gt.js","assets/ImbibitorLunae-Wb2Hh7_b.js","assets/Xueyi-BjOIMYZR.js","assets/Hanya-B0zZjc_p.js","assets/Huohuo-BGrNBu3H.js","assets/Jiaoqiu-DpgUn3CX.js","assets/Feixiao-D2g4Pcky.js","assets/Yunli-Nz8BJ0Cv.js","assets/Lingsha-DzSw9UgK.js","assets/Moze-BlohlQVS.js","assets/March7thImaginary-CKYg6XaB.js","assets/Fugue-eTB0nzVV.js","assets/Gallagher-JmZG3mTC.js","assets/Argenti-Cw8AwZCi.js","assets/RuanMei-CXSVCiP4.js","assets/Aventurine-DWvLVluv.js","assets/DrRatio-BE5D4wG5.js","assets/Sparkle-Bwpfo0wv.js","assets/BlackSwan-DasxtVsD.js","assets/Acheron-DeHA_T2F.js","assets/Robin-BpxYET6U.js","assets/Firefly-4T60me_M.js","assets/Misha-DBOTnAfl.js","assets/Sunday-CY0iVfXj.js","assets/Jade--bUa3fA9.js","assets/Boothill-TcZeMsbK.js","assets/Rappa-XxFs_kdy.js","assets/TheHerta-CCMgAFdK.js","assets/Aglaea-CW8aqIaC.js","assets/Tribbie-CSbjXjpa.js","assets/Mydei-Bte-Zf8_.js","assets/Anaxa-BQGfciS-.js","assets/Castorice-CR334v4Q.js","assets/TrailblazerDestruction-BQn91M9q.js","assets/TrailblazerPreservation-lMsbUyB7.js","assets/TrailblazerHarmony-BVgbATIO.js","assets/TrailblazerRemembrance-D21tY1TS.js"])))=>i.map(i=>d[i]);
var xm=Object.defineProperty;var vm=(e,t,n)=>t in e?xm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ue=(e,t,n)=>vm(e,typeof t!="symbol"?t+"":t,n);import{s as X0,i as w,v as Br,t as zl,P as _m,d as Lt,j as i,F as g,D as Mt,u as V,M as _t,B as Y,T as Ce,a as Rt,R as Et,b as hs,S as gn,c as Sn,e as Fa,f as N,r as I,g as z,h as $t,k as Ro,l as Qs,m as Y0,n as $s,o as Yr,I as J0,p as Ga,q as Q0,w as Ft,x as Kt,C as Yn,y as Jn,z as Bi,A as $0,E as q0,G as Am,H as ed,J as td,K as Ye,L as Cn,N as Yt,O as jn,Q as ad,U as Qn,V as Ul,W as Eo,X as Lm,Y as Fm,Z as nd,_ as Jr,$ as id,a0 as Co,a1 as Xl,a2 as Es,a3 as Hm,a4 as sd,a5 as Qr,a6 as od,a7 as rd,a8 as wm,a9 as Om,aa as km,ab as Km,ac as fs,ad as Wn,ae as jm,af as Wm,ag as ld,ah as Zm,ai as cd,aj as Nm,ak as $r,al as Vm,am as zm,an as Um,ao as Xm,ap as Ym,aq as ts,ar as Jm,as as Qm,at as Yl,au as dd,av as ud,aw as md,ax as $m,ay as qm,az as hd,aA as eh,aB as Wi,aC as ca,aD as Wt,aE as Gr,aF as _a,aG as fd,aH as Oa,aI as ka,aJ as th,aK as ah,aL as pd,aM as qr,aN as nh,aO as ih,aP as sh,aQ as oh,aR as rh,aS as qs,aT as Us,aU as lh,aV as ch,aW as dh,aX as gd,aY as el,aZ as uh,a_ as mh,a$ as Sd,b0 as hh,b1 as fh,b2 as ph,b3 as gh,b4 as Sh,b5 as bd,b6 as bh,b7 as Jl,b8 as Dd,b9 as Ql,ba as Dh,bb as tl,bc as Rh,bd as Eh,be as Ch,bf as Th}from"./vendor-PqicMVLa.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();const yh={1001:{id:"1001",name:"March 7th",rarity:4,path:"Preservation",element:"Ice",traces:{"Ice DMG Boost":.224,"DEF%":.225,"Effect RES":.1},traceTree:[{id:"1001201",stat:"Ice DMG Boost",value:.032,pre:null,children:[]},{id:"1001202",stat:"DEF%",value:.05,pre:null,children:[{id:"1001203",stat:"Ice DMG Boost",value:.032,pre:"1001202",children:[]}]},{id:"1001204",stat:"Effect RES",value:.04,pre:null,children:[]},{id:"1001205",stat:"Ice DMG Boost",value:.048,pre:null,children:[{id:"1001206",stat:"Effect RES",value:.06,pre:"1001205",children:[]}]},{id:"1001207",stat:"DEF%",value:.075,pre:null,children:[]},{id:"1001208",stat:"Ice DMG Boost",value:.048,pre:null,children:[{id:"1001209",stat:"Ice DMG Boost",value:.064,pre:"1001208",children:[]},{id:"1001210",stat:"DEF%",value:.1,pre:"1001208",children:[]}]}],max_sp:120,stats:{HP:1058.4,ATK:511.56,DEF:573.3,SPD:101,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1002:{id:"1002",name:"Dan Heng",rarity:4,path:"Hunt",element:"Wind",traces:{"DEF%":.125,"Wind DMG Boost":.224,"ATK%":.18},traceTree:[{id:"1002201",stat:"Wind DMG Boost",value:.032,pre:null,children:[]},{id:"1002202",stat:"ATK%",value:.04,pre:null,children:[{id:"1002203",stat:"Wind DMG Boost",value:.032,pre:"1002202",children:[]}]},{id:"1002204",stat:"DEF%",value:.05,pre:null,children:[]},{id:"1002205",stat:"Wind DMG Boost",value:.048,pre:null,children:[{id:"1002206",stat:"ATK%",value:.06,pre:"1002205",children:[]}]},{id:"1002207",stat:"Wind DMG Boost",value:.048,pre:null,children:[]},{id:"1002208",stat:"DEF%",value:.075,pre:null,children:[{id:"1002209",stat:"ATK%",value:.08,pre:"1002208",children:[]},{id:"1002210",stat:"Wind DMG Boost",value:.064,pre:"1002208",children:[]}]}],max_sp:100,stats:{HP:882,ATK:546.84,DEF:396.9,SPD:110,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1003:{id:"1003",name:"Himeko",rarity:5,path:"Erudition",element:"Fire",traces:{"Fire DMG Boost":.224,"ATK%":.18,"Effect RES":.1},traceTree:[{id:"1003201",stat:"Fire DMG Boost",value:.032,pre:null,children:[]},{id:"1003202",stat:"ATK%",value:.04,pre:null,children:[{id:"1003203",stat:"Fire DMG Boost",value:.032,pre:"1003202",children:[]},{id:"1003204",stat:"Effect RES",value:.04,pre:"1003202",children:[]}]},{id:"1003205",stat:"Fire DMG Boost",value:.048,pre:null,children:[{id:"1003206",stat:"ATK%",value:.06,pre:"1003205",children:[]},{id:"1003207",stat:"Fire DMG Boost",value:.048,pre:"1003205",children:[]}]},{id:"1003208",stat:"Effect RES",value:.06,pre:null,children:[]},{id:"1003209",stat:"ATK%",value:.08,pre:null,children:[]},{id:"1003210",stat:"Fire DMG Boost",value:.064,pre:null,children:[]}],max_sp:120,stats:{HP:1047.816,ATK:756.756,DEF:436.59,SPD:96,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1004:{id:"1004",name:"Welt",rarity:5,path:"Nihility",element:"Imaginary",traces:{"Imaginary DMG Boost":.144,"Effect RES":.1,"ATK%":.28},traceTree:[{id:"1004201",stat:"ATK%",value:.04,pre:null,children:[{id:"1004210",stat:"ATK%",value:.08,pre:"1004201",children:[]}]},{id:"1004202",stat:"Imaginary DMG Boost",value:.032,pre:null,children:[{id:"1004203",stat:"ATK%",value:.04,pre:"1004202",children:[{id:"1004204",stat:"Effect RES",value:.04,pre:"1004203",children:[]}]}]},{id:"1004205",stat:"ATK%",value:.06,pre:null,children:[{id:"1004206",stat:"Imaginary DMG Boost",value:.048,pre:"1004205",children:[{id:"1004207",stat:"ATK%",value:.06,pre:"1004206",children:[]}]}]},{id:"1004208",stat:"Effect RES",value:.06,pre:null,children:[]},{id:"1004209",stat:"Imaginary DMG Boost",value:.064,pre:null,children:[]}],max_sp:120,stats:{HP:1125.432,ATK:620.928,DEF:509.355,SPD:102,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1005:{id:"1005",name:"Kafka",rarity:5,path:"Nihility",element:"Lightning",traces:{"Effect Hit Rate":.18,"HP%":.1,"ATK%":.28},traceTree:[{id:"1005201",stat:"ATK%",value:.04,pre:null,children:[{id:"1005210",stat:"ATK%",value:.08,pre:"1005201",children:[]}]},{id:"1005202",stat:"Effect Hit Rate",value:.04,pre:null,children:[{id:"1005203",stat:"ATK%",value:.04,pre:"1005202",children:[{id:"1005204",stat:"HP%",value:.04,pre:"1005203",children:[]}]}]},{id:"1005205",stat:"ATK%",value:.06,pre:null,children:[{id:"1005206",stat:"Effect Hit Rate",value:.06,pre:"1005205",children:[{id:"1005207",stat:"ATK%",value:.06,pre:"1005206",children:[]}]}]},{id:"1005208",stat:"HP%",value:.06,pre:null,children:[]},{id:"1005209",stat:"Effect Hit Rate",value:.08,pre:null,children:[]}],max_sp:120,stats:{HP:1086.624,ATK:679.14,DEF:485.1,SPD:100,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1006:{id:"1006",name:"Silver Wolf",rarity:5,path:"Nihility",element:"Quantum",traces:{"Effect Hit Rate":.18,"Quantum DMG Boost":.08,"ATK%":.28},traceTree:[{id:"1006201",stat:"ATK%",value:.04,pre:null,children:[{id:"1006210",stat:"ATK%",value:.08,pre:"1006201",children:[]}]},{id:"1006202",stat:"Effect Hit Rate",value:.04,pre:null,children:[{id:"1006203",stat:"ATK%",value:.04,pre:"1006202",children:[{id:"1006204",stat:"Quantum DMG Boost",value:.032,pre:"1006203",children:[]}]}]},{id:"1006205",stat:"ATK%",value:.06,pre:null,children:[{id:"1006206",stat:"Effect Hit Rate",value:.06,pre:"1006205",children:[{id:"1006207",stat:"ATK%",value:.06,pre:"1006206",children:[]}]}]},{id:"1006208",stat:"Quantum DMG Boost",value:.048,pre:null,children:[]},{id:"1006209",stat:"Effect Hit Rate",value:.08,pre:null,children:[]}],max_sp:110,stats:{HP:1047.816,ATK:640.332,DEF:460.845,SPD:107,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1008:{id:"1008",name:"Arlan",rarity:4,path:"Destruction",element:"Lightning",traces:{"HP%":.1,"ATK%":.28,"Effect RES":.18},traceTree:[{id:"1008201",stat:"ATK%",value:.04,pre:null,children:[]},{id:"1008202",stat:"Effect RES",value:.04,pre:null,children:[{id:"1008203",stat:"ATK%",value:.04,pre:"1008202",children:[{id:"1008204",stat:"HP%",value:.04,pre:"1008203",children:[]}]}]},{id:"1008205",stat:"ATK%",value:.06,pre:null,children:[{id:"1008206",stat:"Effect RES",value:.06,pre:"1008205",children:[{id:"1008207",stat:"ATK%",value:.06,pre:"1008206",children:[]}]}]},{id:"1008208",stat:"HP%",value:.06,pre:null,children:[{id:"1008209",stat:"Effect RES",value:.08,pre:"1008208",children:[]},{id:"1008210",stat:"ATK%",value:.08,pre:"1008208",children:[]}]}],max_sp:110,stats:{HP:1199.52,ATK:599.76,DEF:330.75,SPD:102,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1009:{id:"1009",name:"Asta",rarity:4,path:"Harmony",element:"Fire",traces:{"CRIT Rate":.067,"Fire DMG Boost":.224,"DEF%":.225},traceTree:[{id:"1009201",stat:"Fire DMG Boost",value:.032,pre:null,children:[{id:"1009204",stat:"CRIT Rate",value:.027,pre:"1009201",children:[]},{id:"1009207",stat:"Fire DMG Boost",value:.048,pre:"1009201",children:[]}]},{id:"1009202",stat:"DEF%",value:.05,pre:null,children:[{id:"1009203",stat:"Fire DMG Boost",value:.032,pre:"1009202",children:[]}]},{id:"1009205",stat:"Fire DMG Boost",value:.048,pre:null,children:[{id:"1009206",stat:"DEF%",value:.075,pre:"1009205",children:[]}]},{id:"1009208",stat:"CRIT Rate",value:.04,pre:null,children:[{id:"1009209",stat:"DEF%",value:.1,pre:"1009208",children:[]},{id:"1009210",stat:"Fire DMG Boost",value:.064,pre:"1009208",children:[]}]}],max_sp:120,stats:{HP:1023.12,ATK:511.56,DEF:463.05,SPD:106,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1013:{id:"1013",name:"Herta",rarity:4,path:"Erudition",element:"Ice",traces:{"Ice DMG Boost":.224,"DEF%":.225,"CRIT Rate":.067},traceTree:[{id:"1013201",stat:"Ice DMG Boost",value:.032,pre:null,children:[]},{id:"1013202",stat:"DEF%",value:.05,pre:null,children:[{id:"1013203",stat:"Ice DMG Boost",value:.032,pre:"1013202",children:[]},{id:"1013204",stat:"CRIT Rate",value:.027,pre:"1013202",children:[]}]},{id:"1013205",stat:"Ice DMG Boost",value:.048,pre:null,children:[{id:"1013206",stat:"DEF%",value:.075,pre:"1013205",children:[]},{id:"1013207",stat:"Ice DMG Boost",value:.048,pre:"1013205",children:[]}]},{id:"1013208",stat:"CRIT Rate",value:.04,pre:null,children:[]},{id:"1013209",stat:"DEF%",value:.1,pre:null,children:[]},{id:"1013210",stat:"Ice DMG Boost",value:.064,pre:null,children:[]}],max_sp:110,stats:{HP:952.56,ATK:582.12,DEF:396.9,SPD:100,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1101:{id:"1101",name:"Bronya",rarity:5,path:"Harmony",element:"Wind",traces:{"Effect RES":.1,"Wind DMG Boost":.224,"CRIT DMG":.24},traceTree:[{id:"1101201",stat:"Wind DMG Boost",value:.032,pre:null,children:[{id:"1101204",stat:"Effect RES",value:.04,pre:"1101201",children:[]},{id:"1101207",stat:"Wind DMG Boost",value:.048,pre:"1101201",children:[]}]},{id:"1101202",stat:"CRIT DMG",value:.053,pre:null,children:[{id:"1101203",stat:"Wind DMG Boost",value:.032,pre:"1101202",children:[]}]},{id:"1101205",stat:"Wind DMG Boost",value:.048,pre:null,children:[{id:"1101206",stat:"CRIT DMG",value:.08,pre:"1101205",children:[]}]},{id:"1101208",stat:"Effect RES",value:.06,pre:null,children:[{id:"1101209",stat:"CRIT DMG",value:.107,pre:"1101208",children:[]},{id:"1101210",stat:"Wind DMG Boost",value:.064,pre:"1101208",children:[]}]}],max_sp:120,stats:{HP:1241.856,ATK:582.12,DEF:533.61,SPD:99,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1102:{id:"1102",name:"Seele",rarity:5,path:"Hunt",element:"Quantum",traces:{"DEF%":.125,"ATK%":.28,"CRIT DMG":.24},traceTree:[{id:"1102201",stat:"ATK%",value:.04,pre:null,children:[]},{id:"1102202",stat:"CRIT DMG",value:.053,pre:null,children:[{id:"1102203",stat:"ATK%",value:.04,pre:"1102202",children:[]}]},{id:"1102204",stat:"DEF%",value:.05,pre:null,children:[]},{id:"1102205",stat:"ATK%",value:.06,pre:null,children:[{id:"1102206",stat:"CRIT DMG",value:.08,pre:"1102205",children:[]}]},{id:"1102207",stat:"ATK%",value:.06,pre:null,children:[]},{id:"1102208",stat:"DEF%",value:.075,pre:null,children:[{id:"1102209",stat:"CRIT DMG",value:.107,pre:"1102208",children:[]},{id:"1102210",stat:"ATK%",value:.08,pre:"1102208",children:[]}]}],max_sp:120,stats:{HP:931.392,ATK:640.332,DEF:363.825,SPD:115,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1103:{id:"1103",name:"Serval",rarity:4,path:"Erudition",element:"Lightning",traces:{"CRIT Rate":.187,"Effect Hit Rate":.18,"Effect RES":.1},traceTree:[{id:"1103201",stat:"CRIT Rate",value:.027,pre:null,children:[]},{id:"1103202",stat:"Effect Hit Rate",value:.04,pre:null,children:[{id:"1103203",stat:"CRIT Rate",value:.027,pre:"1103202",children:[]},{id:"1103204",stat:"Effect RES",value:.04,pre:"1103202",children:[]}]},{id:"1103205",stat:"CRIT Rate",value:.04,pre:null,children:[{id:"1103206",stat:"Effect Hit Rate",value:.06,pre:"1103205",children:[]},{id:"1103207",stat:"CRIT Rate",value:.04,pre:"1103205",children:[]}]},{id:"1103208",stat:"Effect RES",value:.06,pre:null,children:[]},{id:"1103209",stat:"Effect Hit Rate",value:.08,pre:null,children:[]},{id:"1103210",stat:"CRIT Rate",value:.053,pre:null,children:[]}],max_sp:100,stats:{HP:917.28,ATK:652.68,DEF:374.85,SPD:104,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1104:{id:"1104",name:"Gepard",rarity:5,path:"Preservation",element:"Ice",traces:{"DEF%":.125,"Ice DMG Boost":.224,"Effect RES":.18},traceTree:[{id:"1104201",stat:"Ice DMG Boost",value:.032,pre:null,children:[]},{id:"1104202",stat:"Effect RES",value:.04,pre:null,children:[{id:"1104203",stat:"Ice DMG Boost",value:.032,pre:"1104202",children:[]}]},{id:"1104204",stat:"DEF%",value:.05,pre:null,children:[]},{id:"1104205",stat:"Ice DMG Boost",value:.048,pre:null,children:[{id:"1104206",stat:"Effect RES",value:.06,pre:"1104205",children:[]}]},{id:"1104207",stat:"Ice DMG Boost",value:.048,pre:null,children:[]},{id:"1104208",stat:"DEF%",value:.075,pre:null,children:[{id:"1104209",stat:"Effect RES",value:.08,pre:"1104208",children:[]},{id:"1104210",stat:"Ice DMG Boost",value:.064,pre:"1104208",children:[]}]}],max_sp:100,stats:{HP:1397.088,ATK:543.312,DEF:654.885,SPD:92,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1105:{id:"1105",name:"Natasha",rarity:4,path:"Abundance",element:"Physical",traces:{"HP%":.28,"Effect RES":.18,"DEF%":.125},traceTree:[{id:"1105201",stat:"HP%",value:.04,pre:null,children:[]},{id:"1105202",stat:"Effect RES",value:.04,pre:null,children:[{id:"1105203",stat:"HP%",value:.04,pre:"1105202",children:[{id:"1105204",stat:"DEF%",value:.05,pre:"1105203",children:[]}]}]},{id:"1105205",stat:"HP%",value:.06,pre:null,children:[{id:"1105206",stat:"Effect RES",value:.06,pre:"1105205",children:[{id:"1105207",stat:"HP%",value:.06,pre:"1105206",children:[]}]}]},{id:"1105208",stat:"DEF%",value:.075,pre:null,children:[]},{id:"1105209",stat:"Effect RES",value:.08,pre:null,children:[]},{id:"1105210",stat:"HP%",value:.08,pre:null,children:[]}],max_sp:90,stats:{HP:1164.24,ATK:476.28,DEF:507.15,SPD:98,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1106:{id:"1106",name:"Pela",rarity:4,path:"Nihility",element:"Ice",traces:{"ATK%":.18,"Effect Hit Rate":.1,"Ice DMG Boost":.224},traceTree:[{id:"1106201",stat:"Ice DMG Boost",value:.032,pre:null,children:[{id:"1106210",stat:"Ice DMG Boost",value:.064,pre:"1106201",children:[]}]},{id:"1106202",stat:"ATK%",value:.04,pre:null,children:[{id:"1106203",stat:"Ice DMG Boost",value:.032,pre:"1106202",children:[{id:"1106204",stat:"Effect Hit Rate",value:.04,pre:"1106203",children:[]}]}]},{id:"1106205",stat:"Ice DMG Boost",value:.048,pre:null,children:[{id:"1106206",stat:"ATK%",value:.06,pre:"1106205",children:[{id:"1106207",stat:"Ice DMG Boost",value:.048,pre:"1106206",children:[]}]}]},{id:"1106208",stat:"Effect Hit Rate",value:.06,pre:null,children:[]},{id:"1106209",stat:"ATK%",value:.08,pre:null,children:[]}],max_sp:110,stats:{HP:987.84,ATK:546.84,DEF:463.05,SPD:105,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1107:{id:"1107",name:"Clara",rarity:5,path:"Destruction",element:"Physical",traces:{"HP%":.1,"ATK%":.28,"Physical DMG Boost":.144},traceTree:[{id:"1107201",stat:"ATK%",value:.04,pre:null,children:[]},{id:"1107202",stat:"Physical DMG Boost",value:.032,pre:null,children:[{id:"1107203",stat:"ATK%",value:.04,pre:"1107202",children:[{id:"1107204",stat:"HP%",value:.04,pre:"1107203",children:[]}]}]},{id:"1107205",stat:"ATK%",value:.06,pre:null,children:[{id:"1107206",stat:"Physical DMG Boost",value:.048,pre:"1107205",children:[{id:"1107207",stat:"ATK%",value:.06,pre:"1107206",children:[]}]}]},{id:"1107208",stat:"HP%",value:.06,pre:null,children:[{id:"1107209",stat:"Physical DMG Boost",value:.064,pre:"1107208",children:[]},{id:"1107210",stat:"ATK%",value:.08,pre:"1107208",children:[]}]}],max_sp:110,stats:{HP:1241.856,ATK:737.352,DEF:485.1,SPD:90,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1108:{id:"1108",name:"Sampo",rarity:4,path:"Nihility",element:"Wind",traces:{"Effect Hit Rate":.18,"Effect RES":.1,"ATK%":.28},traceTree:[{id:"1108201",stat:"ATK%",value:.04,pre:null,children:[{id:"1108210",stat:"ATK%",value:.08,pre:"1108201",children:[]}]},{id:"1108202",stat:"Effect Hit Rate",value:.04,pre:null,children:[{id:"1108203",stat:"ATK%",value:.04,pre:"1108202",children:[{id:"1108204",stat:"Effect RES",value:.04,pre:"1108203",children:[]}]}]},{id:"1108205",stat:"ATK%",value:.06,pre:null,children:[{id:"1108206",stat:"Effect Hit Rate",value:.06,pre:"1108205",children:[{id:"1108207",stat:"ATK%",value:.06,pre:"1108206",children:[]}]}]},{id:"1108208",stat:"Effect RES",value:.06,pre:null,children:[]},{id:"1108209",stat:"Effect Hit Rate",value:.08,pre:null,children:[]}],max_sp:120,stats:{HP:1023.12,ATK:617.4,DEF:396.9,SPD:102,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1109:{id:"1109",name:"Hook",rarity:4,path:"Destruction",element:"Fire",traces:{"CRIT DMG":.133,"ATK%":.28,"HP%":.18},traceTree:[{id:"1109201",stat:"ATK%",value:.04,pre:null,children:[]},{id:"1109202",stat:"HP%",value:.04,pre:null,children:[{id:"1109203",stat:"ATK%",value:.04,pre:"1109202",children:[{id:"1109204",stat:"CRIT DMG",value:.053,pre:"1109203",children:[]}]}]},{id:"1109205",stat:"ATK%",value:.06,pre:null,children:[{id:"1109206",stat:"HP%",value:.06,pre:"1109205",children:[{id:"1109207",stat:"ATK%",value:.06,pre:"1109206",children:[]}]}]},{id:"1109208",stat:"CRIT DMG",value:.08,pre:null,children:[{id:"1109209",stat:"HP%",value:.08,pre:"1109208",children:[]},{id:"1109210",stat:"ATK%",value:.08,pre:"1109208",children:[]}]}],max_sp:120,stats:{HP:1340.64,ATK:617.4,DEF:352.8,SPD:94,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1110:{id:"1110",name:"Lynx",rarity:4,path:"Abundance",element:"Quantum",traces:{"HP%":.28,"DEF%":.225,"Effect RES":.1},traceTree:[{id:"1110201",stat:"HP%",value:.04,pre:null,children:[]},{id:"1110202",stat:"DEF%",value:.05,pre:null,children:[{id:"1110203",stat:"HP%",value:.04,pre:"1110202",children:[{id:"1110204",stat:"Effect RES",value:.04,pre:"1110203",children:[]}]}]},{id:"1110205",stat:"HP%",value:.06,pre:null,children:[{id:"1110206",stat:"DEF%",value:.075,pre:"1110205",children:[{id:"1110207",stat:"HP%",value:.06,pre:"1110206",children:[]}]}]},{id:"1110208",stat:"Effect RES",value:.06,pre:null,children:[]},{id:"1110209",stat:"DEF%",value:.1,pre:null,children:[]},{id:"1110210",stat:"HP%",value:.08,pre:null,children:[]}],max_sp:100,stats:{HP:1058.4,ATK:493.92,DEF:551.25,SPD:100,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1111:{id:"1111",name:"Luka",rarity:4,path:"Nihility",element:"Physical",traces:{"Effect Hit Rate":.18,"DEF%":.125,"ATK%":.28},traceTree:[{id:"1111201",stat:"ATK%",value:.04,pre:null,children:[{id:"1111210",stat:"ATK%",value:.08,pre:"1111201",children:[]}]},{id:"1111202",stat:"Effect Hit Rate",value:.04,pre:null,children:[{id:"1111203",stat:"ATK%",value:.04,pre:"1111202",children:[{id:"1111204",stat:"DEF%",value:.05,pre:"1111203",children:[]}]}]},{id:"1111205",stat:"ATK%",value:.06,pre:null,children:[{id:"1111206",stat:"Effect Hit Rate",value:.06,pre:"1111205",children:[{id:"1111207",stat:"ATK%",value:.06,pre:"1111206",children:[]}]}]},{id:"1111208",stat:"DEF%",value:.075,pre:null,children:[]},{id:"1111209",stat:"Effect Hit Rate",value:.08,pre:null,children:[]}],max_sp:130,stats:{HP:917.28,ATK:582.12,DEF:485.1,SPD:103,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1112:{id:"1112",name:"Topaz & Numby",rarity:5,path:"Hunt",element:"Fire",traces:{"HP%":.1,"Fire DMG Boost":.224,"CRIT Rate":.12},traceTree:[{id:"1112201",stat:"Fire DMG Boost",value:.032,pre:null,children:[]},{id:"1112202",stat:"CRIT Rate",value:.027,pre:null,children:[{id:"1112203",stat:"Fire DMG Boost",value:.032,pre:"1112202",children:[]}]},{id:"1112204",stat:"HP%",value:.04,pre:null,children:[]},{id:"1112205",stat:"Fire DMG Boost",value:.048,pre:null,children:[{id:"1112206",stat:"CRIT Rate",value:.04,pre:"1112205",children:[]}]},{id:"1112207",stat:"Fire DMG Boost",value:.048,pre:null,children:[]},{id:"1112208",stat:"HP%",value:.06,pre:null,children:[{id:"1112209",stat:"CRIT Rate",value:.053,pre:"1112208",children:[]},{id:"1112210",stat:"Fire DMG Boost",value:.064,pre:"1112208",children:[]}]}],max_sp:130,stats:{HP:931.392,ATK:620.928,DEF:412.335,SPD:110,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1201:{id:"1201",name:"Qingque",rarity:4,path:"Erudition",element:"Quantum",traces:{"ATK%":.28,"Quantum DMG Boost":.144,"DEF%":.125},traceTree:[{id:"1201201",stat:"ATK%",value:.04,pre:null,children:[]},{id:"1201202",stat:"Quantum DMG Boost",value:.032,pre:null,children:[{id:"1201203",stat:"ATK%",value:.04,pre:"1201202",children:[]},{id:"1201204",stat:"DEF%",value:.05,pre:"1201202",children:[]}]},{id:"1201205",stat:"ATK%",value:.06,pre:null,children:[{id:"1201206",stat:"Quantum DMG Boost",value:.048,pre:"1201205",children:[]},{id:"1201207",stat:"ATK%",value:.06,pre:"1201205",children:[]}]},{id:"1201208",stat:"DEF%",value:.075,pre:null,children:[]},{id:"1201209",stat:"Quantum DMG Boost",value:.064,pre:null,children:[]},{id:"1201210",stat:"ATK%",value:.08,pre:null,children:[]}],max_sp:140,stats:{HP:1023.12,ATK:652.68,DEF:441,SPD:98,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1202:{id:"1202",name:"Tingyun",rarity:4,path:"Harmony",element:"Lightning",traces:{"Lightning DMG Boost":.08,"ATK%":.28,"DEF%":.225},traceTree:[{id:"1202201",stat:"ATK%",value:.04,pre:null,children:[{id:"1202204",stat:"Lightning DMG Boost",value:.032,pre:"1202201",children:[]},{id:"1202207",stat:"ATK%",value:.06,pre:"1202201",children:[]}]},{id:"1202202",stat:"DEF%",value:.05,pre:null,children:[{id:"1202203",stat:"ATK%",value:.04,pre:"1202202",children:[]}]},{id:"1202205",stat:"ATK%",value:.06,pre:null,children:[{id:"1202206",stat:"DEF%",value:.075,pre:"1202205",children:[]}]},{id:"1202208",stat:"Lightning DMG Boost",value:.048,pre:null,children:[{id:"1202209",stat:"DEF%",value:.1,pre:"1202208",children:[]},{id:"1202210",stat:"ATK%",value:.08,pre:"1202208",children:[]}]}],max_sp:130,stats:{HP:846.72,ATK:529.2,DEF:396.9,SPD:112,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1203:{id:"1203",name:"Luocha",rarity:5,path:"Abundance",element:"Imaginary",traces:{"ATK%":.28,"HP%":.18,"DEF%":.125},traceTree:[{id:"1203201",stat:"ATK%",value:.04,pre:null,children:[]},{id:"1203202",stat:"HP%",value:.04,pre:null,children:[{id:"1203203",stat:"ATK%",value:.04,pre:"1203202",children:[{id:"1203204",stat:"DEF%",value:.05,pre:"1203203",children:[]}]}]},{id:"1203205",stat:"ATK%",value:.06,pre:null,children:[{id:"1203206",stat:"HP%",value:.06,pre:"1203205",children:[{id:"1203207",stat:"ATK%",value:.06,pre:"1203206",children:[]}]}]},{id:"1203208",stat:"DEF%",value:.075,pre:null,children:[]},{id:"1203209",stat:"HP%",value:.08,pre:null,children:[]},{id:"1203210",stat:"ATK%",value:.08,pre:null,children:[]}],max_sp:100,stats:{HP:1280.664,ATK:756.756,DEF:363.825,SPD:101,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1204:{id:"1204",name:"Jing Yuan",rarity:5,path:"Erudition",element:"Lightning",traces:{"ATK%":.28,"CRIT Rate":.12,"DEF%":.125},traceTree:[{id:"1204201",stat:"ATK%",value:.04,pre:null,children:[]},{id:"1204202",stat:"CRIT Rate",value:.027,pre:null,children:[{id:"1204203",stat:"ATK%",value:.04,pre:"1204202",children:[]},{id:"1204204",stat:"DEF%",value:.05,pre:"1204202",children:[]}]},{id:"1204205",stat:"ATK%",value:.06,pre:null,children:[{id:"1204206",stat:"CRIT Rate",value:.04,pre:"1204205",children:[]},{id:"1204207",stat:"ATK%",value:.06,pre:"1204205",children:[]}]},{id:"1204208",stat:"DEF%",value:.075,pre:null,children:[]},{id:"1204209",stat:"CRIT Rate",value:.053,pre:null,children:[]},{id:"1204210",stat:"ATK%",value:.08,pre:null,children:[]}],max_sp:130,stats:{HP:1164.24,ATK:698.544,DEF:485.1,SPD:99,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1205:{id:"1205",name:"Blade",rarity:5,path:"Destruction",element:"Wind",traces:{"Effect RES":.1,"HP%":.28,"CRIT Rate":.12},traceTree:[{id:"1205201",stat:"HP%",value:.04,pre:null,children:[]},{id:"1205202",stat:"CRIT Rate",value:.027,pre:null,children:[{id:"1205203",stat:"HP%",value:.04,pre:"1205202",children:[{id:"1205204",stat:"Effect RES",value:.04,pre:"1205203",children:[]}]}]},{id:"1205205",stat:"HP%",value:.06,pre:null,children:[{id:"1205206",stat:"CRIT Rate",value:.04,pre:"1205205",children:[{id:"1205207",stat:"HP%",value:.06,pre:"1205206",children:[]}]}]},{id:"1205208",stat:"Effect RES",value:.06,pre:null,children:[{id:"1205209",stat:"CRIT Rate",value:.053,pre:"1205208",children:[]},{id:"1205210",stat:"HP%",value:.08,pre:"1205208",children:[]}]}],max_sp:130,stats:{HP:1358.28,ATK:543.312,DEF:485.1,SPD:97,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1206:{id:"1206",name:"Sushang",rarity:4,path:"Hunt",element:"Physical",traces:{"DEF%":.125,"ATK%":.28,"HP%":.18},traceTree:[{id:"1206201",stat:"ATK%",value:.04,pre:null,children:[]},{id:"1206202",stat:"HP%",value:.04,pre:null,children:[{id:"1206203",stat:"ATK%",value:.04,pre:"1206202",children:[]}]},{id:"1206204",stat:"DEF%",value:.05,pre:null,children:[]},{id:"1206205",stat:"ATK%",value:.06,pre:null,children:[{id:"1206206",stat:"HP%",value:.06,pre:"1206205",children:[]}]},{id:"1206207",stat:"ATK%",value:.06,pre:null,children:[]},{id:"1206208",stat:"DEF%",value:.075,pre:null,children:[{id:"1206209",stat:"HP%",value:.08,pre:"1206208",children:[]},{id:"1206210",stat:"ATK%",value:.08,pre:"1206208",children:[]}]}],max_sp:120,stats:{HP:917.28,ATK:564.48,DEF:418.95,SPD:107,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1207:{id:"1207",name:"Yukong",rarity:4,path:"Harmony",element:"Imaginary",traces:{"ATK%":.1,"Imaginary DMG Boost":.224,"HP%":.18},traceTree:[{id:"1207201",stat:"Imaginary DMG Boost",value:.032,pre:null,children:[{id:"1207204",stat:"ATK%",value:.04,pre:"1207201",children:[]},{id:"1207207",stat:"Imaginary DMG Boost",value:.048,pre:"1207201",children:[]}]},{id:"1207202",stat:"HP%",value:.04,pre:null,children:[{id:"1207203",stat:"Imaginary DMG Boost",value:.032,pre:"1207202",children:[]}]},{id:"1207205",stat:"Imaginary DMG Boost",value:.048,pre:null,children:[{id:"1207206",stat:"HP%",value:.06,pre:"1207205",children:[]}]},{id:"1207208",stat:"ATK%",value:.06,pre:null,children:[{id:"1207209",stat:"HP%",value:.08,pre:"1207208",children:[]},{id:"1207210",stat:"Imaginary DMG Boost",value:.064,pre:"1207208",children:[]}]}],max_sp:130,stats:{HP:917.28,ATK:599.76,DEF:374.85,SPD:107,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1208:{id:"1208",name:"Fu Xuan",rarity:5,path:"Preservation",element:"Quantum",traces:{"Effect RES":.1,"CRIT Rate":.187,"HP%":.18},traceTree:[{id:"1208201",stat:"CRIT Rate",value:.027,pre:null,children:[]},{id:"1208202",stat:"HP%",value:.04,pre:null,children:[{id:"1208203",stat:"CRIT Rate",value:.027,pre:"1208202",children:[]}]},{id:"1208204",stat:"Effect RES",value:.04,pre:null,children:[]},{id:"1208205",stat:"CRIT Rate",value:.04,pre:null,children:[{id:"1208206",stat:"HP%",value:.06,pre:"1208205",children:[]}]},{id:"1208207",stat:"CRIT Rate",value:.04,pre:null,children:[]},{id:"1208208",stat:"Effect RES",value:.06,pre:null,children:[{id:"1208209",stat:"HP%",value:.08,pre:"1208208",children:[]},{id:"1208210",stat:"CRIT Rate",value:.053,pre:"1208208",children:[]}]}],max_sp:135,stats:{HP:1474.704,ATK:465.696,DEF:606.375,SPD:100,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1209:{id:"1209",name:"Yanqing",rarity:5,path:"Hunt",element:"Ice",traces:{"HP%":.1,"ATK%":.28,"Ice DMG Boost":.144},traceTree:[{id:"1209201",stat:"ATK%",value:.04,pre:null,children:[]},{id:"1209202",stat:"Ice DMG Boost",value:.032,pre:null,children:[{id:"1209203",stat:"ATK%",value:.04,pre:"1209202",children:[]}]},{id:"1209204",stat:"HP%",value:.04,pre:null,children:[]},{id:"1209205",stat:"ATK%",value:.06,pre:null,children:[{id:"1209206",stat:"Ice DMG Boost",value:.048,pre:"1209205",children:[]}]},{id:"1209207",stat:"ATK%",value:.06,pre:null,children:[]},{id:"1209208",stat:"HP%",value:.06,pre:null,children:[{id:"1209209",stat:"Ice DMG Boost",value:.064,pre:"1209208",children:[]},{id:"1209210",stat:"ATK%",value:.08,pre:"1209208",children:[]}]}],max_sp:140,stats:{HP:892.584,ATK:679.14,DEF:412.335,SPD:109,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1210:{id:"1210",name:"Guinaifen",rarity:4,path:"Nihility",element:"Fire",traces:{"Break Effect":.24,"Effect Hit Rate":.1,"Fire DMG Boost":.224},traceTree:[{id:"1210201",stat:"Fire DMG Boost",value:.032,pre:null,children:[{id:"1210210",stat:"Fire DMG Boost",value:.064,pre:"1210201",children:[]}]},{id:"1210202",stat:"Break Effect",value:.053,pre:null,children:[{id:"1210203",stat:"Fire DMG Boost",value:.032,pre:"1210202",children:[{id:"1210204",stat:"Effect Hit Rate",value:.04,pre:"1210203",children:[]}]}]},{id:"1210205",stat:"Fire DMG Boost",value:.048,pre:null,children:[{id:"1210206",stat:"Break Effect",value:.08,pre:"1210205",children:[{id:"1210207",stat:"Fire DMG Boost",value:.048,pre:"1210206",children:[]}]}]},{id:"1210208",stat:"Effect Hit Rate",value:.06,pre:null,children:[]},{id:"1210209",stat:"Break Effect",value:.107,pre:null,children:[]}],max_sp:120,stats:{HP:882,ATK:582.12,DEF:441,SPD:106,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1211:{id:"1211",name:"Bailu",rarity:5,path:"Abundance",element:"Lightning",traces:{"HP%":.28,"DEF%":.225,"Effect RES":.1},traceTree:[{id:"1211201",stat:"HP%",value:.04,pre:null,children:[]},{id:"1211202",stat:"DEF%",value:.05,pre:null,children:[{id:"1211203",stat:"HP%",value:.04,pre:"1211202",children:[{id:"1211204",stat:"Effect RES",value:.04,pre:"1211203",children:[]}]}]},{id:"1211205",stat:"HP%",value:.06,pre:null,children:[{id:"1211206",stat:"DEF%",value:.075,pre:"1211205",children:[{id:"1211207",stat:"HP%",value:.06,pre:"1211206",children:[]}]}]},{id:"1211208",stat:"Effect RES",value:.06,pre:null,children:[]},{id:"1211209",stat:"DEF%",value:.1,pre:null,children:[]},{id:"1211210",stat:"HP%",value:.08,pre:null,children:[]}],max_sp:100,stats:{HP:1319.472,ATK:562.716,DEF:485.1,SPD:98,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1212:{id:"1212",name:"Jingliu",rarity:5,path:"Destruction",element:"Ice",traces:{"HP%":.1,"CRIT DMG":.373,SPD:9},traceTree:[{id:"1212201",stat:"CRIT DMG",value:.053,pre:null,children:[]},{id:"1212202",stat:"SPD",value:2,pre:null,children:[{id:"1212203",stat:"CRIT DMG",value:.053,pre:"1212202",children:[{id:"1212204",stat:"HP%",value:.04,pre:"1212203",children:[]}]}]},{id:"1212205",stat:"CRIT DMG",value:.08,pre:null,children:[{id:"1212206",stat:"SPD",value:3,pre:"1212205",children:[{id:"1212207",stat:"CRIT DMG",value:.08,pre:"1212206",children:[]}]}]},{id:"1212208",stat:"HP%",value:.06,pre:null,children:[{id:"1212209",stat:"SPD",value:4,pre:"1212208",children:[]},{id:"1212210",stat:"CRIT DMG",value:.107,pre:"1212208",children:[]}]}],max_sp:140,stats:{HP:1435.896,ATK:679.14,DEF:485.1,SPD:96,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1213:{id:"1213",name:"Dan Heng • Imbibitor Lunae",rarity:5,path:"Destruction",element:"Imaginary",traces:{"HP%":.1,"Imaginary DMG Boost":.224,"CRIT Rate":.12},traceTree:[{id:"1213201",stat:"Imaginary DMG Boost",value:.032,pre:null,children:[]},{id:"1213202",stat:"CRIT Rate",value:.027,pre:null,children:[{id:"1213203",stat:"Imaginary DMG Boost",value:.032,pre:"1213202",children:[{id:"1213204",stat:"HP%",value:.04,pre:"1213203",children:[]}]}]},{id:"1213205",stat:"Imaginary DMG Boost",value:.048,pre:null,children:[{id:"1213206",stat:"CRIT Rate",value:.04,pre:"1213205",children:[{id:"1213207",stat:"Imaginary DMG Boost",value:.048,pre:"1213206",children:[]}]}]},{id:"1213208",stat:"HP%",value:.06,pre:null,children:[{id:"1213209",stat:"CRIT Rate",value:.053,pre:"1213208",children:[]},{id:"1213210",stat:"Imaginary DMG Boost",value:.064,pre:"1213208",children:[]}]}],max_sp:140,stats:{HP:1241.856,ATK:698.544,DEF:363.825,SPD:102,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1214:{id:"1214",name:"Xueyi",rarity:4,path:"Destruction",element:"Quantum",traces:{"Quantum DMG Boost":.08,"Break Effect":.373,"HP%":.18},traceTree:[{id:"1214201",stat:"Break Effect",value:.053,pre:null,children:[]},{id:"1214202",stat:"HP%",value:.04,pre:null,children:[{id:"1214203",stat:"Break Effect",value:.053,pre:"1214202",children:[{id:"1214204",stat:"Quantum DMG Boost",value:.032,pre:"1214203",children:[]}]}]},{id:"1214205",stat:"Break Effect",value:.08,pre:null,children:[{id:"1214206",stat:"HP%",value:.06,pre:"1214205",children:[{id:"1214207",stat:"Break Effect",value:.08,pre:"1214206",children:[]}]}]},{id:"1214208",stat:"Quantum DMG Boost",value:.048,pre:null,children:[{id:"1214209",stat:"HP%",value:.08,pre:"1214208",children:[]},{id:"1214210",stat:"Break Effect",value:.107,pre:"1214208",children:[]}]}],max_sp:120,stats:{HP:1058.4,ATK:599.76,DEF:396.9,SPD:103,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1215:{id:"1215",name:"Hanya",rarity:4,path:"Harmony",element:"Physical",traces:{"HP%":.1,"ATK%":.28,SPD:9},traceTree:[{id:"1215201",stat:"ATK%",value:.04,pre:null,children:[{id:"1215204",stat:"HP%",value:.04,pre:"1215201",children:[]},{id:"1215207",stat:"ATK%",value:.06,pre:"1215201",children:[]}]},{id:"1215202",stat:"SPD",value:2,pre:null,children:[{id:"1215203",stat:"ATK%",value:.04,pre:"1215202",children:[]}]},{id:"1215205",stat:"ATK%",value:.06,pre:null,children:[{id:"1215206",stat:"SPD",value:3,pre:"1215205",children:[]}]},{id:"1215208",stat:"HP%",value:.06,pre:null,children:[{id:"1215209",stat:"SPD",value:4,pre:"1215208",children:[]},{id:"1215210",stat:"ATK%",value:.08,pre:"1215208",children:[]}]}],max_sp:140,stats:{HP:917.28,ATK:564.48,DEF:352.8,SPD:110,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1217:{id:"1217",name:"Huohuo",rarity:5,path:"Abundance",element:"Wind",traces:{"HP%":.28,"Effect RES":.18,SPD:5},traceTree:[{id:"1217201",stat:"HP%",value:.04,pre:null,children:[]},{id:"1217202",stat:"Effect RES",value:.04,pre:null,children:[{id:"1217203",stat:"HP%",value:.04,pre:"1217202",children:[{id:"1217204",stat:"SPD",value:2,pre:"1217203",children:[]}]}]},{id:"1217205",stat:"HP%",value:.06,pre:null,children:[{id:"1217206",stat:"Effect RES",value:.06,pre:"1217205",children:[{id:"1217207",stat:"HP%",value:.06,pre:"1217206",children:[]}]}]},{id:"1217208",stat:"SPD",value:3,pre:null,children:[]},{id:"1217209",stat:"Effect RES",value:.08,pre:null,children:[]},{id:"1217210",stat:"HP%",value:.08,pre:null,children:[]}],max_sp:140,stats:{HP:1358.28,ATK:601.524,DEF:509.355,SPD:98,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1218:{id:"1218",name:"Jiaoqiu",rarity:5,path:"Nihility",element:"Fire",traces:{"Fire DMG Boost":.144,SPD:5,"Effect Hit Rate":.28},traceTree:[{id:"1218201",stat:"Effect Hit Rate",value:.04,pre:null,children:[{id:"1218210",stat:"Effect Hit Rate",value:.08,pre:"1218201",children:[]}]},{id:"1218202",stat:"Fire DMG Boost",value:.032,pre:null,children:[{id:"1218203",stat:"Effect Hit Rate",value:.04,pre:"1218202",children:[{id:"1218204",stat:"SPD",value:2,pre:"1218203",children:[]}]}]},{id:"1218205",stat:"Effect Hit Rate",value:.06,pre:null,children:[{id:"1218206",stat:"Fire DMG Boost",value:.048,pre:"1218205",children:[{id:"1218207",stat:"Effect Hit Rate",value:.06,pre:"1218206",children:[]}]}]},{id:"1218208",stat:"SPD",value:3,pre:null,children:[]},{id:"1218209",stat:"Fire DMG Boost",value:.064,pre:null,children:[]}],max_sp:100,stats:{HP:1358.28,ATK:601.524,DEF:509.355,SPD:98,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1220:{id:"1220",name:"Feixiao",rarity:5,path:"Hunt",element:"Wind",traces:{"DEF%":.125,"ATK%":.28,"CRIT Rate":.12},traceTree:[{id:"1220201",stat:"ATK%",value:.04,pre:null,children:[]},{id:"1220202",stat:"CRIT Rate",value:.027,pre:null,children:[{id:"1220203",stat:"ATK%",value:.04,pre:"1220202",children:[]}]},{id:"1220204",stat:"DEF%",value:.05,pre:null,children:[]},{id:"1220205",stat:"ATK%",value:.06,pre:null,children:[{id:"1220206",stat:"CRIT Rate",value:.04,pre:"1220205",children:[]}]},{id:"1220207",stat:"ATK%",value:.06,pre:null,children:[]},{id:"1220208",stat:"DEF%",value:.075,pre:null,children:[{id:"1220209",stat:"CRIT Rate",value:.053,pre:"1220208",children:[]},{id:"1220210",stat:"ATK%",value:.08,pre:"1220208",children:[]}]}],max_sp:12,stats:{HP:1047.816,ATK:601.524,DEF:388.08,SPD:112,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1221:{id:"1221",name:"Yunli",rarity:5,path:"Destruction",element:"Physical",traces:{"CRIT Rate":.067,"ATK%":.28,"HP%":.18},traceTree:[{id:"1221201",stat:"ATK%",value:.04,pre:null,children:[]},{id:"1221202",stat:"HP%",value:.04,pre:null,children:[{id:"1221203",stat:"ATK%",value:.04,pre:"1221202",children:[{id:"1221204",stat:"CRIT Rate",value:.027,pre:"1221203",children:[]}]}]},{id:"1221205",stat:"ATK%",value:.06,pre:null,children:[{id:"1221206",stat:"HP%",value:.06,pre:"1221205",children:[{id:"1221207",stat:"ATK%",value:.06,pre:"1221206",children:[]}]}]},{id:"1221208",stat:"CRIT Rate",value:.04,pre:null,children:[{id:"1221209",stat:"HP%",value:.08,pre:"1221208",children:[]},{id:"1221210",stat:"ATK%",value:.08,pre:"1221208",children:[]}]}],max_sp:240,stats:{HP:1358.28,ATK:679.14,DEF:460.845,SPD:94,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1222:{id:"1222",name:"Lingsha",rarity:5,path:"Abundance",element:"Fire",traces:{"Break Effect":.373,"HP%":.18,"ATK%":.1},traceTree:[{id:"1222201",stat:"Break Effect",value:.053,pre:null,children:[]},{id:"1222202",stat:"HP%",value:.04,pre:null,children:[{id:"1222203",stat:"Break Effect",value:.053,pre:"1222202",children:[{id:"1222204",stat:"ATK%",value:.04,pre:"1222203",children:[]}]}]},{id:"1222205",stat:"Break Effect",value:.08,pre:null,children:[{id:"1222206",stat:"HP%",value:.06,pre:"1222205",children:[{id:"1222207",stat:"Break Effect",value:.08,pre:"1222206",children:[]}]}]},{id:"1222208",stat:"ATK%",value:.06,pre:null,children:[]},{id:"1222209",stat:"HP%",value:.08,pre:null,children:[]},{id:"1222210",stat:"Break Effect",value:.107,pre:null,children:[]}],max_sp:110,stats:{HP:1358.28,ATK:679.14,DEF:436.59,SPD:98,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1223:{id:"1223",name:"Moze",rarity:4,path:"Hunt",element:"Lightning",traces:{"HP%":.1,"CRIT DMG":.373,"ATK%":.18},traceTree:[{id:"1223201",stat:"CRIT DMG",value:.053,pre:null,children:[]},{id:"1223202",stat:"ATK%",value:.04,pre:null,children:[{id:"1223203",stat:"CRIT DMG",value:.053,pre:"1223202",children:[]}]},{id:"1223204",stat:"HP%",value:.04,pre:null,children:[]},{id:"1223205",stat:"CRIT DMG",value:.08,pre:null,children:[{id:"1223206",stat:"ATK%",value:.06,pre:"1223205",children:[]}]},{id:"1223207",stat:"CRIT DMG",value:.08,pre:null,children:[]},{id:"1223208",stat:"HP%",value:.06,pre:null,children:[{id:"1223209",stat:"ATK%",value:.08,pre:"1223208",children:[]},{id:"1223210",stat:"CRIT DMG",value:.107,pre:"1223208",children:[]}]}],max_sp:120,stats:{HP:811.44,ATK:599.76,DEF:352.8,SPD:111,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1224:{id:"1224",name:"March 7th",rarity:4,path:"Hunt",element:"Imaginary",traces:{"DEF%":.125,"ATK%":.28,"CRIT DMG":.24},traceTree:[{id:"1224201",stat:"ATK%",value:.04,pre:null,children:[]},{id:"1224202",stat:"CRIT DMG",value:.053,pre:null,children:[{id:"1224203",stat:"ATK%",value:.04,pre:"1224202",children:[]}]},{id:"1224204",stat:"DEF%",value:.05,pre:null,children:[]},{id:"1224205",stat:"ATK%",value:.06,pre:null,children:[{id:"1224206",stat:"CRIT DMG",value:.08,pre:"1224205",children:[]}]},{id:"1224207",stat:"ATK%",value:.06,pre:null,children:[]},{id:"1224208",stat:"DEF%",value:.075,pre:null,children:[{id:"1224209",stat:"CRIT DMG",value:.107,pre:"1224208",children:[]},{id:"1224210",stat:"ATK%",value:.08,pre:"1224208",children:[]}]}],max_sp:110,stats:{HP:1058.4,ATK:564.48,DEF:441,SPD:102,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1225:{id:"1225",name:"Fugue",rarity:5,path:"Nihility",element:"Fire",traces:{"Break Effect":.24,"HP%":.1,SPD:14},traceTree:[{id:"1225201",stat:"SPD",value:2,pre:null,children:[{id:"1225210",stat:"SPD",value:4,pre:"1225201",children:[]}]},{id:"1225202",stat:"Break Effect",value:.053,pre:null,children:[{id:"1225203",stat:"SPD",value:2,pre:"1225202",children:[{id:"1225204",stat:"HP%",value:.04,pre:"1225203",children:[]}]}]},{id:"1225205",stat:"SPD",value:3,pre:null,children:[{id:"1225206",stat:"Break Effect",value:.08,pre:"1225205",children:[{id:"1225207",stat:"SPD",value:3,pre:"1225206",children:[]}]}]},{id:"1225208",stat:"HP%",value:.06,pre:null,children:[]},{id:"1225209",stat:"Break Effect",value:.107,pre:null,children:[]}],max_sp:130,stats:{HP:1125.432,ATK:582.12,DEF:557.865,SPD:102,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1301:{id:"1301",name:"Gallagher",rarity:4,path:"Abundance",element:"Fire",traces:{"HP%":.18,"Effect RES":.28,"Break Effect":.133},traceTree:[{id:"1301201",stat:"Effect RES",value:.04,pre:null,children:[]},{id:"1301202",stat:"Break Effect",value:.053,pre:null,children:[{id:"1301203",stat:"Effect RES",value:.04,pre:"1301202",children:[{id:"1301204",stat:"HP%",value:.04,pre:"1301203",children:[]}]}]},{id:"1301205",stat:"Effect RES",value:.06,pre:null,children:[{id:"1301206",stat:"Break Effect",value:.08,pre:"1301205",children:[{id:"1301207",stat:"Effect RES",value:.06,pre:"1301206",children:[]}]}]},{id:"1301208",stat:"HP%",value:.06,pre:null,children:[]},{id:"1301209",stat:"Effect RES",value:.08,pre:null,children:[]},{id:"1301210",stat:"HP%",value:.08,pre:null,children:[]}],max_sp:110,stats:{HP:1305.36,ATK:529.2,DEF:441,SPD:98,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1302:{id:"1302",name:"Argenti",rarity:5,path:"Erudition",element:"Physical",traces:{"ATK%":.28,"Physical DMG Boost":.144,"HP%":.1},traceTree:[{id:"1302201",stat:"ATK%",value:.04,pre:null,children:[]},{id:"1302202",stat:"Physical DMG Boost",value:.032,pre:null,children:[{id:"1302203",stat:"ATK%",value:.04,pre:"1302202",children:[]},{id:"1302204",stat:"HP%",value:.04,pre:"1302202",children:[]}]},{id:"1302205",stat:"ATK%",value:.06,pre:null,children:[{id:"1302206",stat:"Physical DMG Boost",value:.048,pre:"1302205",children:[]},{id:"1302207",stat:"ATK%",value:.06,pre:"1302205",children:[]}]},{id:"1302208",stat:"HP%",value:.06,pre:null,children:[]},{id:"1302209",stat:"Physical DMG Boost",value:.064,pre:null,children:[]},{id:"1302210",stat:"ATK%",value:.08,pre:null,children:[]}],max_sp:180,stats:{HP:1047.816,ATK:737.352,DEF:363.825,SPD:103,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1303:{id:"1303",name:"Ruan Mei",rarity:5,path:"Harmony",element:"Ice",traces:{SPD:5,"Break Effect":.373,"DEF%":.225},traceTree:[{id:"1303201",stat:"Break Effect",value:.053,pre:null,children:[{id:"1303204",stat:"SPD",value:2,pre:"1303201",children:[]},{id:"1303207",stat:"Break Effect",value:.08,pre:"1303201",children:[]}]},{id:"1303202",stat:"DEF%",value:.05,pre:null,children:[{id:"1303203",stat:"Break Effect",value:.053,pre:"1303202",children:[]}]},{id:"1303205",stat:"Break Effect",value:.08,pre:null,children:[{id:"1303206",stat:"DEF%",value:.075,pre:"1303205",children:[]}]},{id:"1303208",stat:"SPD",value:3,pre:null,children:[{id:"1303209",stat:"DEF%",value:.1,pre:"1303208",children:[]},{id:"1303210",stat:"Break Effect",value:.107,pre:"1303208",children:[]}]}],max_sp:130,stats:{HP:1086.624,ATK:659.736,DEF:485.1,SPD:104,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1304:{id:"1304",name:"Aventurine",rarity:5,path:"Preservation",element:"Imaginary",traces:{"Effect RES":.1,"DEF%":.35,"Imaginary DMG Boost":.144},traceTree:[{id:"1304201",stat:"DEF%",value:.05,pre:null,children:[]},{id:"1304202",stat:"Imaginary DMG Boost",value:.032,pre:null,children:[{id:"1304203",stat:"DEF%",value:.05,pre:"1304202",children:[]}]},{id:"1304204",stat:"Effect RES",value:.04,pre:null,children:[]},{id:"1304205",stat:"DEF%",value:.075,pre:null,children:[{id:"1304206",stat:"Imaginary DMG Boost",value:.048,pre:"1304205",children:[]}]},{id:"1304207",stat:"DEF%",value:.075,pre:null,children:[]},{id:"1304208",stat:"Effect RES",value:.06,pre:null,children:[{id:"1304209",stat:"Imaginary DMG Boost",value:.064,pre:"1304208",children:[]},{id:"1304210",stat:"DEF%",value:.1,pre:"1304208",children:[]}]}],max_sp:110,stats:{HP:1203.048,ATK:446.292,DEF:654.885,SPD:106,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1305:{id:"1305",name:"Dr. Ratio",rarity:5,path:"Hunt",element:"Imaginary",traces:{"DEF%":.125,"ATK%":.28,"CRIT Rate":.12},traceTree:[{id:"1305201",stat:"ATK%",value:.04,pre:null,children:[]},{id:"1305202",stat:"CRIT Rate",value:.027,pre:null,children:[{id:"1305203",stat:"ATK%",value:.04,pre:"1305202",children:[]}]},{id:"1305204",stat:"DEF%",value:.05,pre:null,children:[]},{id:"1305205",stat:"ATK%",value:.06,pre:null,children:[{id:"1305206",stat:"CRIT Rate",value:.04,pre:"1305205",children:[]}]},{id:"1305207",stat:"ATK%",value:.06,pre:null,children:[]},{id:"1305208",stat:"DEF%",value:.075,pre:null,children:[{id:"1305209",stat:"CRIT Rate",value:.053,pre:"1305208",children:[]},{id:"1305210",stat:"ATK%",value:.08,pre:"1305208",children:[]}]}],max_sp:140,stats:{HP:1047.816,ATK:776.16,DEF:460.845,SPD:103,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1306:{id:"1306",name:"Sparkle",rarity:5,path:"Harmony",element:"Quantum",traces:{"Effect RES":.1,"HP%":.28,"CRIT DMG":.24},traceTree:[{id:"1306201",stat:"HP%",value:.04,pre:null,children:[{id:"1306204",stat:"Effect RES",value:.04,pre:"1306201",children:[]},{id:"1306207",stat:"HP%",value:.06,pre:"1306201",children:[]}]},{id:"1306202",stat:"CRIT DMG",value:.053,pre:null,children:[{id:"1306203",stat:"HP%",value:.04,pre:"1306202",children:[]}]},{id:"1306205",stat:"HP%",value:.06,pre:null,children:[{id:"1306206",stat:"CRIT DMG",value:.08,pre:"1306205",children:[]}]},{id:"1306208",stat:"Effect RES",value:.06,pre:null,children:[{id:"1306209",stat:"CRIT DMG",value:.107,pre:"1306208",children:[]},{id:"1306210",stat:"HP%",value:.08,pre:"1306208",children:[]}]}],max_sp:110,stats:{HP:1397.088,ATK:523.908,DEF:485.1,SPD:101,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1307:{id:"1307",name:"Black Swan",rarity:5,path:"Nihility",element:"Wind",traces:{"Wind DMG Boost":.144,"Effect Hit Rate":.1,"ATK%":.28},traceTree:[{id:"1307201",stat:"ATK%",value:.04,pre:null,children:[{id:"1307210",stat:"ATK%",value:.08,pre:"1307201",children:[]}]},{id:"1307202",stat:"Wind DMG Boost",value:.032,pre:null,children:[{id:"1307203",stat:"ATK%",value:.04,pre:"1307202",children:[{id:"1307204",stat:"Effect Hit Rate",value:.04,pre:"1307203",children:[]}]}]},{id:"1307205",stat:"ATK%",value:.06,pre:null,children:[{id:"1307206",stat:"Wind DMG Boost",value:.048,pre:"1307205",children:[{id:"1307207",stat:"ATK%",value:.06,pre:"1307206",children:[]}]}]},{id:"1307208",stat:"Effect Hit Rate",value:.06,pre:null,children:[]},{id:"1307209",stat:"Wind DMG Boost",value:.064,pre:null,children:[]}],max_sp:120,stats:{HP:1086.624,ATK:659.736,DEF:485.1,SPD:102,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1308:{id:"1308",name:"Acheron",rarity:5,path:"Nihility",element:"Lightning",traces:{"CRIT DMG":.24,"Lightning DMG Boost":.08,"ATK%":.28},traceTree:[{id:"1308201",stat:"ATK%",value:.04,pre:null,children:[{id:"1308210",stat:"ATK%",value:.08,pre:"1308201",children:[]}]},{id:"1308202",stat:"CRIT DMG",value:.053,pre:null,children:[{id:"1308203",stat:"ATK%",value:.04,pre:"1308202",children:[{id:"1308204",stat:"Lightning DMG Boost",value:.032,pre:"1308203",children:[]}]}]},{id:"1308205",stat:"ATK%",value:.06,pre:null,children:[{id:"1308206",stat:"CRIT DMG",value:.08,pre:"1308205",children:[{id:"1308207",stat:"ATK%",value:.06,pre:"1308206",children:[]}]}]},{id:"1308208",stat:"Lightning DMG Boost",value:.048,pre:null,children:[]},{id:"1308209",stat:"CRIT DMG",value:.107,pre:null,children:[]}],max_sp:9,stats:{HP:1125.432,ATK:698.544,DEF:436.59,SPD:101,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1309:{id:"1309",name:"Robin",rarity:5,path:"Harmony",element:"Physical",traces:{SPD:5,"ATK%":.28,"HP%":.18},traceTree:[{id:"1309201",stat:"ATK%",value:.04,pre:null,children:[{id:"1309204",stat:"SPD",value:2,pre:"1309201",children:[]},{id:"1309207",stat:"ATK%",value:.06,pre:"1309201",children:[]}]},{id:"1309202",stat:"HP%",value:.04,pre:null,children:[{id:"1309203",stat:"ATK%",value:.04,pre:"1309202",children:[]}]},{id:"1309205",stat:"ATK%",value:.06,pre:null,children:[{id:"1309206",stat:"HP%",value:.06,pre:"1309205",children:[]}]},{id:"1309208",stat:"SPD",value:3,pre:null,children:[{id:"1309209",stat:"HP%",value:.08,pre:"1309208",children:[]},{id:"1309210",stat:"ATK%",value:.08,pre:"1309208",children:[]}]}],max_sp:160,stats:{HP:1280.664,ATK:640.332,DEF:485.1,SPD:102,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1310:{id:"1310",name:"Firefly",rarity:5,path:"Destruction",element:"Fire",traces:{SPD:5,"Break Effect":.373,"Effect RES":.18},traceTree:[{id:"1310201",stat:"Break Effect",value:.053,pre:null,children:[]},{id:"1310202",stat:"Effect RES",value:.04,pre:null,children:[{id:"1310203",stat:"Break Effect",value:.053,pre:"1310202",children:[{id:"1310204",stat:"SPD",value:2,pre:"1310203",children:[]}]}]},{id:"1310205",stat:"Break Effect",value:.08,pre:null,children:[{id:"1310206",stat:"Effect RES",value:.06,pre:"1310205",children:[{id:"1310207",stat:"Break Effect",value:.08,pre:"1310206",children:[]}]}]},{id:"1310208",stat:"SPD",value:3,pre:null,children:[{id:"1310209",stat:"Effect RES",value:.08,pre:"1310208",children:[]},{id:"1310210",stat:"Break Effect",value:.107,pre:"1310208",children:[]}]}],max_sp:240,stats:{HP:814.968,ATK:523.908,DEF:776.16,SPD:104,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1312:{id:"1312",name:"Misha",rarity:4,path:"Destruction",element:"Ice",traces:{"CRIT Rate":.067,"Ice DMG Boost":.224,"DEF%":.225},traceTree:[{id:"1312201",stat:"Ice DMG Boost",value:.032,pre:null,children:[]},{id:"1312202",stat:"DEF%",value:.05,pre:null,children:[{id:"1312203",stat:"Ice DMG Boost",value:.032,pre:"1312202",children:[{id:"1312204",stat:"CRIT Rate",value:.027,pre:"1312203",children:[]}]}]},{id:"1312205",stat:"Ice DMG Boost",value:.048,pre:null,children:[{id:"1312206",stat:"DEF%",value:.075,pre:"1312205",children:[{id:"1312207",stat:"Ice DMG Boost",value:.048,pre:"1312206",children:[]}]}]},{id:"1312208",stat:"CRIT Rate",value:.04,pre:null,children:[{id:"1312209",stat:"DEF%",value:.1,pre:"1312208",children:[]},{id:"1312210",stat:"Ice DMG Boost",value:.064,pre:"1312208",children:[]}]}],max_sp:100,stats:{HP:1270.08,ATK:599.76,DEF:396.9,SPD:96,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1313:{id:"1313",name:"Sunday",rarity:5,path:"Harmony",element:"Imaginary",traces:{"DEF%":.125,"CRIT DMG":.373,"Effect RES":.18},traceTree:[{id:"1313201",stat:"CRIT DMG",value:.053,pre:null,children:[{id:"1313204",stat:"DEF%",value:.05,pre:"1313201",children:[]},{id:"1313207",stat:"CRIT DMG",value:.08,pre:"1313201",children:[]}]},{id:"1313202",stat:"Effect RES",value:.04,pre:null,children:[{id:"1313203",stat:"CRIT DMG",value:.053,pre:"1313202",children:[]}]},{id:"1313205",stat:"CRIT DMG",value:.08,pre:null,children:[{id:"1313206",stat:"Effect RES",value:.06,pre:"1313205",children:[]}]},{id:"1313208",stat:"DEF%",value:.075,pre:null,children:[{id:"1313209",stat:"Effect RES",value:.08,pre:"1313208",children:[]},{id:"1313210",stat:"CRIT DMG",value:.107,pre:"1313208",children:[]}]}],max_sp:130,stats:{HP:1241.856,ATK:640.332,DEF:533.61,SPD:96,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1314:{id:"1314",name:"Jade",rarity:5,path:"Erudition",element:"Quantum",traces:{"Quantum DMG Boost":.224,"ATK%":.18,"Effect RES":.1},traceTree:[{id:"1314201",stat:"Quantum DMG Boost",value:.032,pre:null,children:[]},{id:"1314202",stat:"ATK%",value:.04,pre:null,children:[{id:"1314203",stat:"Quantum DMG Boost",value:.032,pre:"1314202",children:[]},{id:"1314204",stat:"Effect RES",value:.04,pre:"1314202",children:[]}]},{id:"1314205",stat:"Quantum DMG Boost",value:.048,pre:null,children:[{id:"1314206",stat:"ATK%",value:.06,pre:"1314205",children:[]},{id:"1314207",stat:"Quantum DMG Boost",value:.048,pre:"1314205",children:[]}]},{id:"1314208",stat:"Effect RES",value:.06,pre:null,children:[]},{id:"1314209",stat:"ATK%",value:.08,pre:null,children:[]},{id:"1314210",stat:"Quantum DMG Boost",value:.064,pre:null,children:[]}],max_sp:140,stats:{HP:1086.624,ATK:659.736,DEF:509.355,SPD:103,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1315:{id:"1315",name:"Boothill",rarity:5,path:"Hunt",element:"Physical",traces:{"HP%":.1,"Break Effect":.373,"ATK%":.18},traceTree:[{id:"1315201",stat:"Break Effect",value:.053,pre:null,children:[]},{id:"1315202",stat:"ATK%",value:.04,pre:null,children:[{id:"1315203",stat:"Break Effect",value:.053,pre:"1315202",children:[]}]},{id:"1315204",stat:"HP%",value:.04,pre:null,children:[]},{id:"1315205",stat:"Break Effect",value:.08,pre:null,children:[{id:"1315206",stat:"ATK%",value:.06,pre:"1315205",children:[]}]},{id:"1315207",stat:"Break Effect",value:.08,pre:null,children:[]},{id:"1315208",stat:"HP%",value:.06,pre:null,children:[{id:"1315209",stat:"ATK%",value:.08,pre:"1315208",children:[]},{id:"1315210",stat:"Break Effect",value:.107,pre:"1315208",children:[]}]}],max_sp:115,stats:{HP:1203.048,ATK:620.928,DEF:436.59,SPD:107,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1317:{id:"1317",name:"Rappa",rarity:5,path:"Erudition",element:"Imaginary",traces:{"ATK%":.28,SPD:9,"Break Effect":.133},traceTree:[{id:"1317201",stat:"ATK%",value:.04,pre:null,children:[]},{id:"1317202",stat:"SPD",value:2,pre:null,children:[{id:"1317203",stat:"ATK%",value:.04,pre:"1317202",children:[]},{id:"1317204",stat:"Break Effect",value:.053,pre:"1317202",children:[]}]},{id:"1317205",stat:"ATK%",value:.06,pre:null,children:[{id:"1317206",stat:"SPD",value:3,pre:"1317205",children:[]},{id:"1317207",stat:"ATK%",value:.06,pre:"1317205",children:[]}]},{id:"1317208",stat:"Break Effect",value:.08,pre:null,children:[]},{id:"1317209",stat:"SPD",value:4,pre:null,children:[]},{id:"1317210",stat:"ATK%",value:.08,pre:null,children:[]}],max_sp:140,stats:{HP:1086.624,ATK:717.948,DEF:460.845,SPD:96,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1401:{id:"1401",name:"The Herta",rarity:5,path:"Erudition",element:"Ice",traces:{"Ice DMG Boost":.224,"ATK%":.18,SPD:5},traceTree:[{id:"1401201",stat:"Ice DMG Boost",value:.032,pre:null,children:[]},{id:"1401202",stat:"ATK%",value:.04,pre:null,children:[{id:"1401203",stat:"Ice DMG Boost",value:.032,pre:"1401202",children:[]},{id:"1401204",stat:"SPD",value:2,pre:"1401202",children:[]}]},{id:"1401205",stat:"Ice DMG Boost",value:.048,pre:null,children:[{id:"1401206",stat:"ATK%",value:.06,pre:"1401205",children:[]},{id:"1401207",stat:"Ice DMG Boost",value:.048,pre:"1401205",children:[]}]},{id:"1401208",stat:"SPD",value:3,pre:null,children:[]},{id:"1401209",stat:"ATK%",value:.08,pre:null,children:[]},{id:"1401210",stat:"Ice DMG Boost",value:.064,pre:null,children:[]}],max_sp:220,stats:{HP:1164.24,ATK:679.14,DEF:485.1,SPD:99,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1402:{id:"1402",name:"Aglaea",rarity:5,path:"Remembrance",element:"Lightning",traces:{"DEF%":.125,"CRIT Rate":.12,"Lightning DMG Boost":.224},traceTree:[{id:"1402201",stat:"Lightning DMG Boost",value:.032,pre:null,children:[{id:"1402202",stat:"CRIT Rate",value:.027,pre:"1402201",children:[]},{id:"1402203",stat:"Lightning DMG Boost",value:.032,pre:"1402201",children:[]}]},{id:"1402204",stat:"DEF%",value:.05,pre:null,children:[]},{id:"1402205",stat:"Lightning DMG Boost",value:.048,pre:null,children:[]},{id:"1402206",stat:"CRIT Rate",value:.04,pre:null,children:[]},{id:"1402207",stat:"Lightning DMG Boost",value:.048,pre:null,children:[]},{id:"1402208",stat:"DEF%",value:.075,pre:null,children:[{id:"1402209",stat:"CRIT Rate",value:.053,pre:"1402208",children:[{id:"1402210",stat:"Lightning DMG Boost",value:.064,pre:"1402209",children:[]}]}]}],max_sp:350,stats:{HP:1241.856,ATK:698.544,DEF:485.1,SPD:102,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1403:{id:"1403",name:"Tribbie",rarity:5,path:"Harmony",element:"Quantum",traces:{"HP%":.1,"CRIT DMG":.373,"CRIT Rate":.12},traceTree:[{id:"1403201",stat:"CRIT DMG",value:.053,pre:null,children:[{id:"1403204",stat:"HP%",value:.04,pre:"1403201",children:[]},{id:"1403207",stat:"CRIT DMG",value:.08,pre:"1403201",children:[]}]},{id:"1403202",stat:"CRIT Rate",value:.027,pre:null,children:[{id:"1403203",stat:"CRIT DMG",value:.053,pre:"1403202",children:[]}]},{id:"1403205",stat:"CRIT DMG",value:.08,pre:null,children:[{id:"1403206",stat:"CRIT Rate",value:.04,pre:"1403205",children:[]}]},{id:"1403208",stat:"HP%",value:.06,pre:null,children:[{id:"1403209",stat:"CRIT Rate",value:.053,pre:"1403208",children:[]},{id:"1403210",stat:"CRIT DMG",value:.107,pre:"1403208",children:[]}]}],max_sp:120,stats:{HP:1047.816,ATK:523.908,DEF:727.65,SPD:96,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1404:{id:"1404",name:"Mydei",rarity:5,path:"Destruction",element:"Imaginary",traces:{SPD:5,"CRIT DMG":.373,"HP%":.18},traceTree:[{id:"1404201",stat:"CRIT DMG",value:.053,pre:null,children:[]},{id:"1404202",stat:"HP%",value:.04,pre:null,children:[{id:"1404203",stat:"CRIT DMG",value:.053,pre:"1404202",children:[{id:"1404204",stat:"SPD",value:2,pre:"1404203",children:[]}]}]},{id:"1404205",stat:"CRIT DMG",value:.08,pre:null,children:[{id:"1404206",stat:"HP%",value:.06,pre:"1404205",children:[{id:"1404207",stat:"CRIT DMG",value:.08,pre:"1404206",children:[]}]}]},{id:"1404208",stat:"SPD",value:3,pre:null,children:[{id:"1404209",stat:"HP%",value:.08,pre:"1404208",children:[]},{id:"1404210",stat:"CRIT DMG",value:.107,pre:"1404208",children:[]}]}],max_sp:160,stats:{HP:1552.32,ATK:426.888,DEF:194.04,SPD:95,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},1405:{id:"1405",name:"Anaxa",rarity:5,path:"Erudition",element:"Wind",traces:{"Wind DMG Boost":.224,"CRIT Rate":.12,"HP%":.1},traceTree:[{id:"1405201_3.2v4",stat:"Wind DMG Boost",value:.032,pre:null,children:[]},{id:"1405202_3.2v4",stat:"CRIT Rate",value:.027,pre:null,children:[{id:"1405203_3.2v4",stat:"Wind DMG Boost",value:.032,pre:"1405202_3.2v4",children:[]},{id:"1405204_3.2v4",stat:"HP%",value:.04,pre:"1405202_3.2v4",children:[]}]},{id:"1405205_3.2v4",stat:"Wind DMG Boost",value:.048,pre:null,children:[{id:"1405206_3.2v4",stat:"CRIT Rate",value:.04,pre:"1405205_3.2v4",children:[]},{id:"1405207_3.2v4",stat:"Wind DMG Boost",value:.048,pre:"1405205_3.2v4",children:[]}]},{id:"1405208_3.2v4",stat:"HP%",value:.06,pre:null,children:[]},{id:"1405209_3.2v4",stat:"CRIT Rate",value:.053,pre:null,children:[]},{id:"1405210_3.2v4",stat:"Wind DMG Boost",value:.064,pre:null,children:[]}],max_sp:140,stats:{HP:970.2,ATK:756.756,DEF:557.865,SPD:97,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!0},1407:{id:"1407",name:"Castorice",rarity:5,path:"Remembrance",element:"Quantum",traces:{"CRIT DMG":.133,"Quantum DMG Boost":.144,"CRIT Rate":.187},traceTree:[{id:"1407201_3.2v4",stat:"CRIT Rate",value:.027,pre:null,children:[{id:"1407202_3.2v4",stat:"Quantum DMG Boost",value:.032,pre:"1407201_3.2v4",children:[]},{id:"1407203_3.2v4",stat:"CRIT Rate",value:.027,pre:"1407201_3.2v4",children:[]}]},{id:"1407204_3.2v4",stat:"CRIT DMG",value:.053,pre:null,children:[]},{id:"1407205_3.2v4",stat:"CRIT Rate",value:.04,pre:null,children:[]},{id:"1407206_3.2v4",stat:"Quantum DMG Boost",value:.048,pre:null,children:[]},{id:"1407207_3.2v4",stat:"CRIT Rate",value:.04,pre:null,children:[]},{id:"1407208_3.2v4",stat:"CRIT DMG",value:.08,pre:null,children:[{id:"1407209_3.2v4",stat:"Quantum DMG Boost",value:.064,pre:"1407208_3.2v4",children:[{id:"1407210_3.2v4",stat:"CRIT Rate",value:.053,pre:"1407209_3.2v4",children:[]}]}]}],max_sp:0,stats:{HP:1629.936,ATK:523.908,DEF:485.1,SPD:95,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!0},8001:{id:"8001",name:"Trailblazer",rarity:5,path:"Destruction",element:"Physical",traces:{"DEF%":.125,"ATK%":.28,"HP%":.18},traceTree:[{id:"8001201",stat:"ATK%",value:.04,pre:null,children:[]},{id:"8001202",stat:"HP%",value:.04,pre:null,children:[{id:"8001203",stat:"ATK%",value:.04,pre:"8001202",children:[{id:"8001204",stat:"DEF%",value:.05,pre:"8001203",children:[]}]}]},{id:"8001205",stat:"ATK%",value:.06,pre:null,children:[{id:"8001206",stat:"HP%",value:.06,pre:"8001205",children:[{id:"8001207",stat:"ATK%",value:.06,pre:"8001206",children:[]}]}]},{id:"8001208",stat:"DEF%",value:.075,pre:null,children:[{id:"8001209",stat:"HP%",value:.08,pre:"8001208",children:[]},{id:"8001210",stat:"ATK%",value:.08,pre:"8001208",children:[]}]}],max_sp:120,stats:{HP:1203.048,ATK:620.928,DEF:460.845,SPD:100,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},8002:{id:"8002",name:"Trailblazer",rarity:5,path:"Destruction",element:"Physical",traces:{"DEF%":.125,"ATK%":.28,"HP%":.18},traceTree:[{id:"8002201",stat:"ATK%",value:.04,pre:null,children:[]},{id:"8002202",stat:"HP%",value:.04,pre:null,children:[{id:"8002203",stat:"ATK%",value:.04,pre:"8002202",children:[{id:"8002204",stat:"DEF%",value:.05,pre:"8002203",children:[]}]}]},{id:"8002205",stat:"ATK%",value:.06,pre:null,children:[{id:"8002206",stat:"HP%",value:.06,pre:"8002205",children:[{id:"8002207",stat:"ATK%",value:.06,pre:"8002206",children:[]}]}]},{id:"8002208",stat:"DEF%",value:.075,pre:null,children:[{id:"8002209",stat:"HP%",value:.08,pre:"8002208",children:[]},{id:"8002210",stat:"ATK%",value:.08,pre:"8002208",children:[]}]}],max_sp:120,stats:{HP:1203.048,ATK:620.928,DEF:460.845,SPD:100,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},8003:{id:"8003",name:"Trailblazer",rarity:5,path:"Preservation",element:"Fire",traces:{"HP%":.1,"DEF%":.35,"ATK%":.18},traceTree:[{id:"8003201",stat:"DEF%",value:.05,pre:null,children:[]},{id:"8003202",stat:"ATK%",value:.04,pre:null,children:[{id:"8003203",stat:"DEF%",value:.05,pre:"8003202",children:[]}]},{id:"8003204",stat:"HP%",value:.04,pre:null,children:[]},{id:"8003205",stat:"DEF%",value:.075,pre:null,children:[{id:"8003206",stat:"ATK%",value:.06,pre:"8003205",children:[]}]},{id:"8003207",stat:"DEF%",value:.075,pre:null,children:[]},{id:"8003208",stat:"HP%",value:.06,pre:null,children:[{id:"8003209",stat:"ATK%",value:.08,pre:"8003208",children:[]},{id:"8003210",stat:"DEF%",value:.1,pre:"8003208",children:[]}]}],max_sp:120,stats:{HP:1241.856,ATK:601.524,DEF:606.375,SPD:95,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},8004:{id:"8004",name:"Trailblazer",rarity:5,path:"Preservation",element:"Fire",traces:{"HP%":.1,"DEF%":.35,"ATK%":.18},traceTree:[{id:"8004201",stat:"DEF%",value:.05,pre:null,children:[]},{id:"8004202",stat:"ATK%",value:.04,pre:null,children:[{id:"8004203",stat:"DEF%",value:.05,pre:"8004202",children:[]}]},{id:"8004204",stat:"HP%",value:.04,pre:null,children:[]},{id:"8004205",stat:"DEF%",value:.075,pre:null,children:[{id:"8004206",stat:"ATK%",value:.06,pre:"8004205",children:[]}]},{id:"8004207",stat:"DEF%",value:.075,pre:null,children:[]},{id:"8004208",stat:"HP%",value:.06,pre:null,children:[{id:"8004209",stat:"ATK%",value:.08,pre:"8004208",children:[]},{id:"8004210",stat:"DEF%",value:.1,pre:"8004208",children:[]}]}],max_sp:120,stats:{HP:1241.856,ATK:601.524,DEF:606.375,SPD:95,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},8005:{id:"8005",name:"Trailblazer",rarity:5,path:"Harmony",element:"Imaginary",traces:{"Effect RES":.1,"Break Effect":.373,"Imaginary DMG Boost":.144},traceTree:[{id:"8005201",stat:"Break Effect",value:.053,pre:null,children:[{id:"8005204",stat:"Effect RES",value:.04,pre:"8005201",children:[]},{id:"8005207",stat:"Break Effect",value:.08,pre:"8005201",children:[]}]},{id:"8005202",stat:"Imaginary DMG Boost",value:.032,pre:null,children:[{id:"8005203",stat:"Break Effect",value:.053,pre:"8005202",children:[]}]},{id:"8005205",stat:"Break Effect",value:.08,pre:null,children:[{id:"8005206",stat:"Imaginary DMG Boost",value:.048,pre:"8005205",children:[]}]},{id:"8005208",stat:"Effect RES",value:.06,pre:null,children:[{id:"8005209",stat:"Imaginary DMG Boost",value:.064,pre:"8005208",children:[]},{id:"8005210",stat:"Break Effect",value:.107,pre:"8005208",children:[]}]}],max_sp:140,stats:{HP:1086.624,ATK:446.292,DEF:679.14,SPD:105,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},8006:{id:"8006",name:"Trailblazer",rarity:5,path:"Harmony",element:"Imaginary",traces:{"Effect RES":.1,"Break Effect":.373,"Imaginary DMG Boost":.144},traceTree:[{id:"8006201",stat:"Break Effect",value:.053,pre:null,children:[{id:"8006204",stat:"Effect RES",value:.04,pre:"8006201",children:[]},{id:"8006207",stat:"Break Effect",value:.08,pre:"8006201",children:[]}]},{id:"8006202",stat:"Imaginary DMG Boost",value:.032,pre:null,children:[{id:"8006203",stat:"Break Effect",value:.053,pre:"8006202",children:[]}]},{id:"8006205",stat:"Break Effect",value:.08,pre:null,children:[{id:"8006206",stat:"Imaginary DMG Boost",value:.048,pre:"8006205",children:[]}]},{id:"8006208",stat:"Effect RES",value:.06,pre:null,children:[{id:"8006209",stat:"Imaginary DMG Boost",value:.064,pre:"8006208",children:[]},{id:"8006210",stat:"Break Effect",value:.107,pre:"8006208",children:[]}]}],max_sp:140,stats:{HP:1086.624,ATK:446.292,DEF:679.14,SPD:105,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},8007:{id:"8007",name:"Trailblazer",rarity:5,path:"Remembrance",element:"Ice",traces:{"ATK%":.14,"HP%":.14,"CRIT DMG":.373},traceTree:[{id:"8007201",stat:"CRIT DMG",value:.053,pre:null,children:[{id:"8007202",stat:"ATK%",value:.04,pre:"8007201",children:[]},{id:"8007203",stat:"CRIT DMG",value:.053,pre:"8007201",children:[]}]},{id:"8007204",stat:"ATK%",value:.04,pre:null,children:[]},{id:"8007205",stat:"CRIT DMG",value:.08,pre:null,children:[]},{id:"8007206",stat:"HP%",value:.06,pre:null,children:[]},{id:"8007207",stat:"CRIT DMG",value:.08,pre:null,children:[]},{id:"8007208",stat:"ATK%",value:.06,pre:null,children:[{id:"8007209",stat:"HP%",value:.08,pre:"8007208",children:[{id:"8007210",stat:"CRIT DMG",value:.107,pre:"8007209",children:[]}]}]}],max_sp:160,stats:{HP:1047.816,ATK:543.312,DEF:630.63,SPD:103,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1},8008:{id:"8008",name:"Trailblazer",rarity:5,path:"Remembrance",element:"Ice",traces:{"ATK%":.14,"HP%":.14,"CRIT DMG":.373},traceTree:[{id:"8008201",stat:"CRIT DMG",value:.053,pre:null,children:[{id:"8008202",stat:"ATK%",value:.04,pre:"8008201",children:[]},{id:"8008203",stat:"CRIT DMG",value:.053,pre:"8008201",children:[]}]},{id:"8008204",stat:"ATK%",value:.04,pre:null,children:[]},{id:"8008205",stat:"CRIT DMG",value:.08,pre:null,children:[]},{id:"8008206",stat:"HP%",value:.06,pre:null,children:[]},{id:"8008207",stat:"CRIT DMG",value:.08,pre:null,children:[]},{id:"8008208",stat:"ATK%",value:.06,pre:null,children:[{id:"8008209",stat:"HP%",value:.08,pre:"8008208",children:[{id:"8008210",stat:"CRIT DMG",value:.107,pre:"8008209",children:[]}]}]}],max_sp:160,stats:{HP:1047.816,ATK:543.312,DEF:630.63,SPD:103,"CRIT Rate":.05,"CRIT DMG":.5},unreleased:!1}},Ph={2e4:{id:"20000",name:"Arrows",rarity:3,path:"Hunt",stats:{HP:846.72,ATK:317.52,DEF:264.6},unreleased:!1},20001:{id:"20001",name:"Cornucopia",rarity:3,path:"Abundance",stats:{HP:952.56,ATK:264.6,DEF:264.6},unreleased:!1},20002:{id:"20002",name:"Collapsing Sky",rarity:3,path:"Destruction",stats:{HP:846.72,ATK:370.44,DEF:198.45},unreleased:!1},20003:{id:"20003",name:"Amber",rarity:3,path:"Preservation",stats:{HP:846.72,ATK:264.6,DEF:330.75},unreleased:!1},20004:{id:"20004",name:"Void",rarity:3,path:"Nihility",stats:{HP:846.72,ATK:317.52,DEF:264.6},unreleased:!1},20005:{id:"20005",name:"Chorus",rarity:3,path:"Harmony",stats:{HP:846.72,ATK:317.52,DEF:264.6},unreleased:!1},20006:{id:"20006",name:"Data Bank",rarity:3,path:"Erudition",stats:{HP:740.88,ATK:370.44,DEF:264.6},unreleased:!1},20007:{id:"20007",name:"Darting Arrow",rarity:3,path:"Hunt",stats:{HP:740.88,ATK:370.44,DEF:264.6},unreleased:!1},20008:{id:"20008",name:"Fine Fruit",rarity:3,path:"Abundance",stats:{HP:952.56,ATK:317.52,DEF:198.45},unreleased:!1},20009:{id:"20009",name:"Shattered Home",rarity:3,path:"Destruction",stats:{HP:846.72,ATK:370.44,DEF:198.45},unreleased:!1},20010:{id:"20010",name:"Defense",rarity:3,path:"Preservation",stats:{HP:952.56,ATK:264.6,DEF:264.6},unreleased:!1},20011:{id:"20011",name:"Loop",rarity:3,path:"Nihility",stats:{HP:846.72,ATK:317.52,DEF:264.6},unreleased:!1},20012:{id:"20012",name:"Meshing Cogs",rarity:3,path:"Harmony",stats:{HP:846.72,ATK:317.52,DEF:264.6},unreleased:!1},20013:{id:"20013",name:"Passkey",rarity:3,path:"Erudition",stats:{HP:740.88,ATK:370.44,DEF:264.6},unreleased:!1},20014:{id:"20014",name:"Adversarial",rarity:3,path:"Hunt",stats:{HP:740.88,ATK:370.44,DEF:264.6},unreleased:!1},20015:{id:"20015",name:"Multiplication",rarity:3,path:"Abundance",stats:{HP:952.56,ATK:317.52,DEF:198.45},unreleased:!1},20016:{id:"20016",name:"Mutual Demise",rarity:3,path:"Destruction",stats:{HP:846.72,ATK:370.44,DEF:198.45},unreleased:!1},20017:{id:"20017",name:"Pioneering",rarity:3,path:"Preservation",stats:{HP:952.56,ATK:264.6,DEF:264.6},unreleased:!1},20018:{id:"20018",name:"Hidden Shadow",rarity:3,path:"Nihility",stats:{HP:846.72,ATK:317.52,DEF:264.6},unreleased:!1},20019:{id:"20019",name:"Mediation",rarity:3,path:"Harmony",stats:{HP:846.72,ATK:317.52,DEF:264.6},unreleased:!1},20020:{id:"20020",name:"Sagacity",rarity:3,path:"Erudition",stats:{HP:740.88,ATK:370.44,DEF:264.6},unreleased:!1},20021:{id:"20021",name:"Shadowburn",rarity:3,path:"Remembrance",stats:{HP:846.72,ATK:317.52,DEF:264.6},unreleased:!1},20022:{id:"20022",name:"Reminiscence",rarity:3,path:"Remembrance",stats:{HP:635.04,ATK:423.36,DEF:264.6},unreleased:!1},21e3:{id:"21000",name:"Post-Op Conversation",rarity:4,path:"Abundance",stats:{HP:1058.4,ATK:423.36,DEF:330.75},unreleased:!1},21001:{id:"21001",name:"Good Night and Sleep Well",rarity:4,path:"Nihility",stats:{HP:952.56,ATK:476.28,DEF:330.75},unreleased:!1},21002:{id:"21002",name:"Day One of My New Life",rarity:4,path:"Preservation",stats:{HP:952.56,ATK:370.44,DEF:463.05},unreleased:!1},21003:{id:"21003",name:"Only Silence Remains",rarity:4,path:"Hunt",stats:{HP:952.56,ATK:476.28,DEF:330.75},unreleased:!1},21004:{id:"21004",name:"Memories of the Past",rarity:4,path:"Harmony",stats:{HP:952.56,ATK:423.36,DEF:396.9},unreleased:!1},21005:{id:"21005",name:"The Moles Welcome You",rarity:4,path:"Destruction",stats:{HP:1058.4,ATK:476.28,DEF:264.6},unreleased:!1},21006:{id:"21006",name:"The Birth of the Self",rarity:4,path:"Erudition",stats:{HP:952.56,ATK:476.28,DEF:330.75},unreleased:!1},21007:{id:"21007",name:"Shared Feeling",rarity:4,path:"Abundance",stats:{HP:952.56,ATK:423.36,DEF:396.9},unreleased:!1},21008:{id:"21008",name:"Eyes of the Prey",rarity:4,path:"Nihility",stats:{HP:952.56,ATK:476.28,DEF:330.75},unreleased:!1},21009:{id:"21009",name:"Landau's Choice",rarity:4,path:"Preservation",stats:{HP:952.56,ATK:423.36,DEF:396.9},unreleased:!1},21010:{id:"21010",name:"Swordplay",rarity:4,path:"Hunt",stats:{HP:952.56,ATK:476.28,DEF:330.75},unreleased:!1},21011:{id:"21011",name:"Planetary Rendezvous",rarity:4,path:"Harmony",stats:{HP:1058.4,ATK:423.36,DEF:330.75},unreleased:!1},21012:{id:"21012",name:"A Secret Vow",rarity:4,path:"Destruction",stats:{HP:1058.4,ATK:476.28,DEF:264.6},unreleased:!1},21013:{id:"21013",name:"Make the World Clamor",rarity:4,path:"Erudition",stats:{HP:846.72,ATK:476.28,DEF:396.9},unreleased:!1},21014:{id:"21014",name:"Perfect Timing",rarity:4,path:"Abundance",stats:{HP:952.56,ATK:423.36,DEF:396.9},unreleased:!1},21015:{id:"21015",name:"Resolution Shines As Pearls of Sweat",rarity:4,path:"Nihility",stats:{HP:952.56,ATK:476.28,DEF:330.75},unreleased:!1},21016:{id:"21016",name:"Trend of the Universal Market",rarity:4,path:"Preservation",stats:{HP:1058.4,ATK:370.44,DEF:396.9},unreleased:!1},21017:{id:"21017",name:"Subscribe for More!",rarity:4,path:"Hunt",stats:{HP:952.56,ATK:476.28,DEF:330.75},unreleased:!1},21018:{id:"21018",name:"Dance! Dance! Dance!",rarity:4,path:"Harmony",stats:{HP:952.56,ATK:423.36,DEF:396.9},unreleased:!1},21019:{id:"21019",name:"Under the Blue Sky",rarity:4,path:"Destruction",stats:{HP:952.56,ATK:476.28,DEF:330.75},unreleased:!1},21020:{id:"21020",name:"Geniuses' Repose",rarity:4,path:"Erudition",stats:{HP:846.72,ATK:476.28,DEF:396.9},unreleased:!1},21021:{id:"21021",name:"Quid Pro Quo",rarity:4,path:"Abundance",stats:{HP:952.56,ATK:423.36,DEF:396.9},unreleased:!1},21022:{id:"21022",name:"Fermata",rarity:4,path:"Nihility",stats:{HP:952.56,ATK:476.28,DEF:330.75},unreleased:!1},21023:{id:"21023",name:"We Are Wildfire",rarity:4,path:"Preservation",stats:{HP:740.88,ATK:476.28,DEF:463.05},unreleased:!1},21024:{id:"21024",name:"River Flows in Spring",rarity:4,path:"Hunt",stats:{HP:846.72,ATK:476.28,DEF:396.9},unreleased:!1},21025:{id:"21025",name:"Past and Future",rarity:4,path:"Harmony",stats:{HP:952.56,ATK:423.36,DEF:396.9},unreleased:!1},21026:{id:"21026",name:"Woof! Walk Time!",rarity:4,path:"Destruction",stats:{HP:952.56,ATK:476.28,DEF:330.75},unreleased:!1},21027:{id:"21027",name:"The Seriousness of Breakfast",rarity:4,path:"Erudition",stats:{HP:846.72,ATK:476.28,DEF:396.9},unreleased:!1},21028:{id:"21028",name:"Warmth Shortens Cold Nights",rarity:4,path:"Abundance",stats:{HP:1058.4,ATK:370.44,DEF:396.9},unreleased:!1},21029:{id:"21029",name:"We Will Meet Again",rarity:4,path:"Nihility",stats:{HP:846.72,ATK:529.2,DEF:330.75},unreleased:!1},21030:{id:"21030",name:"This Is Me!",rarity:4,path:"Preservation",stats:{HP:846.72,ATK:370.44,DEF:529.2},unreleased:!1},21031:{id:"21031",name:"Return to Darkness",rarity:4,path:"Hunt",stats:{HP:846.72,ATK:529.2,DEF:330.75},unreleased:!1},21032:{id:"21032",name:"Carve the Moon, Weave the Clouds",rarity:4,path:"Harmony",stats:{HP:952.56,ATK:476.28,DEF:330.75},unreleased:!1},21033:{id:"21033",name:"Nowhere to Run",rarity:4,path:"Destruction",stats:{HP:952.56,ATK:529.2,DEF:264.6},unreleased:!1},21034:{id:"21034",name:"Today Is Another Peaceful Day",rarity:4,path:"Erudition",stats:{HP:846.72,ATK:529.2,DEF:330.75},unreleased:!1},21035:{id:"21035",name:"What Is Real?",rarity:4,path:"Abundance",stats:{HP:1058.4,ATK:423.36,DEF:330.75},unreleased:!1},21036:{id:"21036",name:"Dreamville Adventure",rarity:4,path:"Harmony",stats:{HP:952.56,ATK:423.36,DEF:396.9},unreleased:!1},21037:{id:"21037",name:"Final Victor",rarity:4,path:"Hunt",stats:{HP:952.56,ATK:476.28,DEF:330.75},unreleased:!1},21038:{id:"21038",name:"Flames Afar",rarity:4,path:"Destruction",stats:{HP:1058.4,ATK:476.28,DEF:264.6},unreleased:!1},21039:{id:"21039",name:"Destiny's Threads Forewoven",rarity:4,path:"Preservation",stats:{HP:952.56,ATK:370.44,DEF:463.05},unreleased:!1},21040:{id:"21040",name:"The Day The Cosmos Fell",rarity:4,path:"Erudition",stats:{HP:952.56,ATK:476.28,DEF:330.75},unreleased:!1},21041:{id:"21041",name:"It's Showtime",rarity:4,path:"Nihility",stats:{HP:1058.4,ATK:476.28,DEF:264.6},unreleased:!1},21042:{id:"21042",name:"Indelible Promise",rarity:4,path:"Destruction",stats:{HP:952.56,ATK:476.28,DEF:330.75},unreleased:!1},21043:{id:"21043",name:"Concert for Two",rarity:4,path:"Preservation",stats:{HP:952.56,ATK:370.44,DEF:463.05},unreleased:!1},21044:{id:"21044",name:"Boundless Choreo",rarity:4,path:"Nihility",stats:{HP:952.56,ATK:476.28,DEF:330.75},unreleased:!1},21045:{id:"21045",name:"After the Charmony Fall",rarity:4,path:"Erudition",stats:{HP:846.72,ATK:476.28,DEF:396.9},unreleased:!1},21046:{id:"21046",name:"Poised to Bloom",rarity:4,path:"Harmony",stats:{HP:952.56,ATK:423.36,DEF:396.9},unreleased:!1},21047:{id:"21047",name:"Shadowed by Night",rarity:4,path:"Hunt",stats:{HP:846.72,ATK:476.28,DEF:396.9},unreleased:!1},21048:{id:"21048",name:"Dream's Montage",rarity:4,path:"Abundance",stats:{HP:952.56,ATK:423.36,DEF:396.9},unreleased:!1},21050:{id:"21050",name:"Victory In a Blink",rarity:4,path:"Remembrance",stats:{HP:846.72,ATK:476.28,DEF:396.9},unreleased:!1},21051:{id:"21051",name:"Geniuses' Greetings",rarity:4,path:"Remembrance",stats:{HP:952.56,ATK:476.28,DEF:330.75},unreleased:!1},21052:{id:"21052",name:"Sweat Now, Cry Less",rarity:4,path:"Remembrance",stats:{HP:1058.4,ATK:529.2,DEF:198.45},unreleased:!1},22e3:{id:"22000",name:"Before the Tutorial Mission Starts",rarity:4,path:"Nihility",stats:{HP:952.56,ATK:476.28,DEF:330.75},unreleased:!1},22001:{id:"22001",name:"Hey, Over Here",rarity:4,path:"Abundance",stats:{HP:952.56,ATK:423.36,DEF:396.9},unreleased:!1},22002:{id:"22002",name:"For Tomorrow's Journey",rarity:4,path:"Harmony",stats:{HP:952.56,ATK:476.28,DEF:330.75},unreleased:!1},22003:{id:"22003",name:"Ninja Record: Sound Hunt",rarity:4,path:"Destruction",stats:{HP:1058.4,ATK:476.28,DEF:264.6},unreleased:!1},22004:{id:"22004",name:"The Great Cosmic Enterprise",rarity:4,path:"Erudition",stats:{HP:952.56,ATK:476.28,DEF:330.75},unreleased:!0},23e3:{id:"23000",name:"Night on the Milky Way",rarity:5,path:"Erudition",stats:{HP:1164.24,ATK:582.12,DEF:396.9},unreleased:!1},23001:{id:"23001",name:"In the Night",rarity:5,path:"Hunt",stats:{HP:1058.4,ATK:582.12,DEF:463.05},unreleased:!1},23002:{id:"23002",name:"Something Irreplaceable",rarity:5,path:"Destruction",stats:{HP:1164.24,ATK:582.12,DEF:396.9},unreleased:!1},23003:{id:"23003",name:"But the Battle Isn't Over",rarity:5,path:"Harmony",stats:{HP:1164.24,ATK:529.2,DEF:463.05},unreleased:!1},23004:{id:"23004",name:"In the Name of the World",rarity:5,path:"Nihility",stats:{HP:1058.4,ATK:582.12,DEF:463.05},unreleased:!1},23005:{id:"23005",name:"Moment of Victory",rarity:5,path:"Preservation",stats:{HP:1058.4,ATK:476.28,DEF:595.35},unreleased:!1},23006:{id:"23006",name:"Patience Is All You Need",rarity:5,path:"Nihility",stats:{HP:1058.4,ATK:582.12,DEF:463.05},unreleased:!1},23007:{id:"23007",name:"Incessant Rain",rarity:5,path:"Nihility",stats:{HP:1058.4,ATK:582.12,DEF:463.05},unreleased:!1},23008:{id:"23008",name:"Echoes of the Coffin",rarity:5,path:"Abundance",stats:{HP:1164.24,ATK:582.12,DEF:396.9},unreleased:!1},23009:{id:"23009",name:"The Unreachable Side",rarity:5,path:"Destruction",stats:{HP:1270.08,ATK:582.12,DEF:330.75},unreleased:!1},23010:{id:"23010",name:"Before Dawn",rarity:5,path:"Erudition",stats:{HP:1058.4,ATK:582.12,DEF:463.05},unreleased:!1},23011:{id:"23011",name:"She Already Shut Her Eyes",rarity:5,path:"Preservation",stats:{HP:1270.08,ATK:423.36,DEF:529.2},unreleased:!1},23012:{id:"23012",name:"Sleep Like the Dead",rarity:5,path:"Hunt",stats:{HP:1058.4,ATK:582.12,DEF:463.05},unreleased:!1},23013:{id:"23013",name:"Time Waits for No One",rarity:5,path:"Abundance",stats:{HP:1270.08,ATK:476.28,DEF:463.05},unreleased:!1},23014:{id:"23014",name:"I Shall Be My Own Sword",rarity:5,path:"Destruction",stats:{HP:1164.24,ATK:582.12,DEF:396.9},unreleased:!1},23015:{id:"23015",name:"Brighter Than the Sun",rarity:5,path:"Destruction",stats:{HP:1058.4,ATK:635.04,DEF:396.9},unreleased:!1},23016:{id:"23016",name:"Worrisome, Blissful",rarity:5,path:"Hunt",stats:{HP:1058.4,ATK:582.12,DEF:463.05},unreleased:!1},23017:{id:"23017",name:"Night of Fright",rarity:5,path:"Abundance",stats:{HP:1164.24,ATK:476.28,DEF:529.2},unreleased:!1},23018:{id:"23018",name:"An Instant Before A Gaze",rarity:5,path:"Erudition",stats:{HP:1058.4,ATK:582.12,DEF:463.05},unreleased:!1},23019:{id:"23019",name:"Past Self in Mirror",rarity:5,path:"Harmony",stats:{HP:1058.4,ATK:529.2,DEF:529.2},unreleased:!1},23020:{id:"23020",name:"Baptism of Pure Thought",rarity:5,path:"Hunt",stats:{HP:952.56,ATK:582.12,DEF:529.2},unreleased:!1},23021:{id:"23021",name:"Earthly Escapade",rarity:5,path:"Harmony",stats:{HP:1164.24,ATK:529.2,DEF:463.05},unreleased:!1},23022:{id:"23022",name:"Reforged Remembrance",rarity:5,path:"Nihility",stats:{HP:1058.4,ATK:582.12,DEF:463.05},unreleased:!1},23023:{id:"23023",name:"Inherently Unjust Destiny",rarity:5,path:"Preservation",stats:{HP:1058.4,ATK:423.36,DEF:661.5},unreleased:!1},23024:{id:"23024",name:"Along the Passing Shore",rarity:5,path:"Nihility",stats:{HP:1058.4,ATK:635.04,DEF:396.9},unreleased:!1},23025:{id:"23025",name:"Whereabouts Should Dreams Rest",rarity:5,path:"Destruction",stats:{HP:1164.24,ATK:476.28,DEF:529.2},unreleased:!1},23026:{id:"23026",name:"Flowing Nightglow",rarity:5,path:"Harmony",stats:{HP:952.56,ATK:635.04,DEF:463.05},unreleased:!1},23027:{id:"23027",name:"Sailing Towards a Second Life",rarity:5,path:"Hunt",stats:{HP:1058.4,ATK:582.12,DEF:463.05},unreleased:!1},23028:{id:"23028",name:"Yet Hope Is Priceless",rarity:5,path:"Erudition",stats:{HP:952.56,ATK:582.12,DEF:529.2},unreleased:!1},23029:{id:"23029",name:"Those Many Springs",rarity:5,path:"Nihility",stats:{HP:952.56,ATK:582.12,DEF:529.2},unreleased:!1},23030:{id:"23030",name:"Dance at Sunset",rarity:5,path:"Destruction",stats:{HP:1058.4,ATK:582.12,DEF:463.05},unreleased:!1},23031:{id:"23031",name:"I Venture Forth to Hunt",rarity:5,path:"Hunt",stats:{HP:952.56,ATK:635.04,DEF:463.05},unreleased:!1},23032:{id:"23032",name:"Scent Alone Stays True",rarity:5,path:"Abundance",stats:{HP:1058.4,ATK:529.2,DEF:529.2},unreleased:!1},23033:{id:"23033",name:"Ninjutsu Inscription: Dazzling Evilbreaker",rarity:5,path:"Erudition",stats:{HP:952.56,ATK:582.12,DEF:529.2},unreleased:!1},23034:{id:"23034",name:"A Grounded Ascent",rarity:5,path:"Harmony",stats:{HP:1164.24,ATK:476.28,DEF:529.2},unreleased:!1},23035:{id:"23035",name:"Long Road Leads Home",rarity:5,path:"Nihility",stats:{HP:952.56,ATK:476.28,DEF:661.5},unreleased:!1},23036:{id:"23036",name:"Time Woven Into Gold",rarity:5,path:"Remembrance",stats:{HP:1058.4,ATK:635.04,DEF:396.9},unreleased:!1},23037:{id:"23037",name:"Into the Unreachable Veil",rarity:5,path:"Erudition",stats:{HP:952.56,ATK:635.04,DEF:463.05},unreleased:!1},23038:{id:"23038",name:"If Time Were a Flower",rarity:5,path:"Harmony",stats:{HP:1270.08,ATK:529.2,DEF:396.9},unreleased:!1},23039:{id:"23039",name:"Flame of Blood, Blaze My Path",rarity:5,path:"Destruction",stats:{HP:1375.92,ATK:476.28,DEF:396.9},unreleased:!1},23040:{id:"23040",name:"Make Farewells More Beautiful",rarity:5,path:"Remembrance",stats:{HP:1270.08,ATK:529.2,DEF:396.9},unreleased:!0},23041:{id:"23041",name:"Life Should Be Cast to Flames",rarity:5,path:"Erudition",stats:{HP:952.56,ATK:582.12,DEF:529.2},unreleased:!0},24e3:{id:"24000",name:"On the Fall of an Aeon",rarity:5,path:"Destruction",stats:{HP:1058.4,ATK:529.2,DEF:396.9},unreleased:!1},24001:{id:"24001",name:"Cruising in the Stellar Sea",rarity:5,path:"Hunt",stats:{HP:952.56,ATK:529.2,DEF:463.05},unreleased:!1},24002:{id:"24002",name:"Texture of Memories",rarity:5,path:"Preservation",stats:{HP:1058.4,ATK:423.36,DEF:529.2},unreleased:!1},24003:{id:"24003",name:"Solitary Healing",rarity:5,path:"Nihility",stats:{HP:1058.4,ATK:529.2,DEF:396.9},unreleased:!1},24004:{id:"24004",name:"Eternal Calculus",rarity:5,path:"Erudition",stats:{HP:1058.4,ATK:529.2,DEF:396.9},unreleased:!1},24005:{id:"24005",name:"Memory's Curtain Never Falls",rarity:5,path:"Remembrance",stats:{HP:1058.4,ATK:529.2,DEF:396.9},unreleased:!1}},Ih=[{id:"320",name:"Giant Tree of Rapt Brooding",skills:"Increases the wearer's SPD by <b>6%</b>. When the wearer's SPD is <b>135</b>/<b>180</b> or higher, the wearer and their memosprite's Outgoing Healing increases by <b>12%</b>/<b>20%</b>."},{id:"319",name:"Bone Collection's Serene Demesne",skills:"Increases the wearer's Max HP by <b>12%</b>. When the wearer's Max HP is <b>5000</b> or higher, increases the wearer's and their memosprite's CRIT DMG by <b>28%</b>."},{id:"318",name:"The Wondrous BananAmusement Park",skills:"Increases the wearer's CRIT DMG by <b>16%</b>. When a target summoned by the wearer is on the field, CRIT DMG additionally increases by <b>32%</b>."},{id:"317",name:"Lushaka, the Sunken Seas",skills:"Increases the wearer's Energy Regeneration Rate by <b>5%</b>. If the wearer is not the first character in the team lineup, then increases the ATK of the first character in the team lineup by <b>12%</b>."},{id:"316",name:"Forge of the Kalpagni Lantern",skills:"Increases the wearer's SPD by <b>6%</b>. When the wearer hits an enemy target that has Fire Weakness, the wearer's Break Effect increases by <b>40%</b>, lasting for <b>1</b> turn(s)."},{id:"315",name:"Duran, Dynasty of Running Wolves",skills:"When an ally uses a Follow-up ATK, the wearer gains 1 stack of Merit, stacking up to <b>5</b> time(s). Each stack of Merit increases the DMG dealt by the wearer's Follow-up ATKs by <b>5%</b>. When there are <b>5</b> stacks, additionally increases the wearer's CRIT DMG by <b>25%</b>."},{id:"314",name:"Izumo Gensei and Takama Divine Realm",skills:"Increases the wearer's ATK by <b>12%</b>. When entering battle, if at least one teammate follows the same Path as the wearer, then the wearer's CRIT Rate increases by <b>12%</b>."},{id:"313",name:"Sigonia, the Unclaimed Desolation",skills:"Increases the wearer's CRIT Rate by <b>4%</b>. When an enemy target gets defeated, the wearer's CRIT DMG increases by <b>4%</b>, stacking up to <b>10</b> time(s)."},{id:"312",name:"Penacony, Land of the Dreams",skills:"Increases wearer's Energy Regeneration Rate by <b>5%</b>. Increases DMG by <b>10%</b> for all other allies that are of the same Type as the wearer."},{id:"311",name:"Firmament Frontline: Glamoth",skills:"Increases the wearer's ATK by <b>12%</b>. When the wearer's SPD is equal to or higher than <b>135</b>/<b>160</b>, the wearer deals <b>12%</b>/<b>18%</b> more DMG."},{id:"310",name:"Broken Keel",skills:"Increases the wearer's Effect RES by <b>10%</b>. When the wearer's Effect RES is at <b>30%</b> or higher, all allies' CRIT DMG increases by <b>10%</b>."},{id:"309",name:"Rutilant Arena",skills:"Increases the wearer's CRIT Rate by <b>8%</b>. When the wearer's current CRIT Rate reaches <b>70%</b> or higher, DMG dealt by Basic ATK and Skill increases by <b>20%</b>."},{id:"308",name:"Sprightly Vonwacq",skills:"Increases the wearer's Energy Regeneration Rate by <b>5%</b>. When the wearer's SPD reaches <b>120</b> or higher, the wearer's action is Advanced Forward by <b>40%</b> immediately upon entering battle."},{id:"307",name:"Talia: Kingdom of Banditry",skills:"Increases the wearer's Break Effect by <b>16%</b>. When the wearer's SPD reaches <b>145</b> or higher, the wearer's Break Effect increases by an extra <b>20%</b>."},{id:"306",name:"Inert Salsotto",skills:"Increases the wearer's CRIT Rate by <b>8%</b>. When the wearer's current CRIT Rate reaches <b>50%</b> or higher, the DMG dealt by the wearer's Ultimate and Follow-up ATK increases by <b>15%</b>."},{id:"305",name:"Celestial Differentiator",skills:"Increases the wearer's CRIT DMG by <b>16%</b>. When the wearer's current CRIT DMG reaches <b>120%</b> or higher, after entering battle, the wearer's CRIT Rate increases by <b>60%</b> until the end of their first attack."},{id:"304",name:"Belobog of the Architects",skills:"Increases the wearer's DEF by <b>15%</b>. When the wearer's Effect Hit Rate is <b>50%</b> or higher, the wearer gains an extra <b>15%</b> DEF."},{id:"303",name:"Pan-Cosmic Commercial Enterprise",skills:"Increases the wearer's Effect Hit Rate by <b>10%</b>. Meanwhile, the wearer's ATK increases by an amount that is equal to <b>25%</b> of the current Effect Hit Rate, up to a maximum of <b>25%</b>."},{id:"302",name:"Fleet of the Ageless",skills:"Increases the wearer's Max HP by <b>12%</b>. When the wearer's SPD reaches <b>120</b> or higher, all allies' ATK increases by <b>8%</b>."},{id:"301",name:"Space Sealing Station",skills:"Increases the wearer's ATK by <b>12%</b>. When the wearer's SPD reaches <b>120</b> or higher, the wearer's ATK increases by an extra <b>12%</b>."},{id:"124",name:"Poet of Mourning Collapse",skills:"Increases Quantum DMG by <b>10%</b>. Decreases the wearer's SPD by <b>8%</b>. Before entering battle, if the wearer's SPD is lower than <b>110</b>/<b>95</b>, increases the wearer's CRIT Rate by <b>20%</b>/<b>32%</b>. This effect applies to the wearer's memosprite at the same time."},{id:"123",name:"Hero of Triumphant Song",skills:"Increases ATK by <b>12%</b>. While the wearer's memosprite is on the field, increases the wearer's SPD by <b>6%</b>. When the wearer's memosprite attacks, increases the wearer's and memosprite's CRIT DMG by <b>30%</b>, lasting for <b>2</b> turn(s)."},{id:"122",name:"Scholar Lost in Erudition",skills:"Increases CRIT Rate by <b>8%</b>. Increases DMG dealt by Skill and Ultimate by <b>20%</b>. After using Ultimate, additionally increases the DMG dealt by the next Skill by <b>25%</b>."},{id:"121",name:"Sacerdos' Relived Ordeal",skills:"Increases SPD by <b>6%</b>. When using Skill or Ultimate on one ally target, increases the ability target's CRIT DMG by <b>18%</b>, lasting for <b>2</b> turn(s). This effect can stack up to <b>2</b> time(s)."},{id:"120",name:"The Wind-Soaring Valorous",skills:"Increases ATK by <b>12%</b>. Increases the wearer's CRIT Rate by <b>6%</b>. After the wearer uses a Follow-up ATK, increases DMG dealt by Ultimate by <b>36%</b>, lasting for <b>1</b> turn(s)."},{id:"119",name:"Iron Cavalry Against the Scourge",skills:"Increases Break Effect by <b>16%</b>. If the wearer's Break Effect is <b>150%</b> or higher, the Break DMG dealt to the enemy target ignores <b>10%</b> of their DEF. If the wearer's Break Effect is <b>250%</b> or higher, the Super Break DMG dealt to the enemy target additionally ignores <b>15%</b> of their DEF."},{id:"118",name:"Watchmaker, Master of Dream Machinations",skills:"Increases Break Effect by <b>16%</b>. When the wearer uses their Ultimate on an ally, all allies' Break Effect increases by <b>30%</b> for <b>2</b> turn(s). This effect cannot be stacked."},{id:"117",name:"Pioneer Diver of Dead Waters",skills:"Increases DMG dealt to enemies with debuffs by <b>12%</b>. Increases CRIT Rate by <b>4%</b>. The wearer deals <b>8%</b>/<b>12%</b> increased CRIT DMG to enemies with at least <b>2</b>/<b>3</b> debuffs. After the wearer inflicts a debuff on enemy targets, the aforementioned effects increase by <b>100%</b>, lasting for <b>1</b> turn(s)."},{id:"116",name:"Prisoner in Deep Confinement",skills:"Increases ATK by <b>12%</b>. For every DoT the enemy target is afflicted with, the wearer will ignore <b>6%</b> of its DEF when dealing DMG to it. This effect is valid for a max of <b>3</b> DoTs."},{id:"115",name:"The Ashblazing Grand Duke",skills:"Increases the DMG dealt by Follow-up ATK by <b>20%</b>. When the wearer uses a Follow-up ATK, increases the wearer's ATK by <b>6%</b> for every time the Follow-up ATK deals DMG. This effect can stack up to <b>8</b> time(s) and lasts for <b>3</b> turn(s). This effect is removed the next time the wearer uses a Follow-up ATK."},{id:"114",name:"Messenger Traversing Hackerspace",skills:"Increases SPD by <b>6%</b>. When the wearer uses their Ultimate on an ally, SPD for all allies increases by <b>12%</b> for <b>1</b> turn(s). This effect cannot be stacked."},{id:"113",name:"Longevous Disciple",skills:"Increases Max HP by <b>12%</b>. When the wearer is hit or has their HP consumed by an ally or themselves, their CRIT Rate increases by <b>8%</b> for <b>2</b> turn(s) and up to <b>2</b> stacks."},{id:"112",name:"Wastelander of Banditry Desert",skills:"Increases Imaginary DMG by <b>10%</b>. When dealing DMG to debuffed enemy targets, the wearer has their CRIT Rate increased by <b>10%</b>. And when they deal DMG to Imprisoned enemy targets, their CRIT DMG increases by <b>20%</b>."},{id:"111",name:"Thief of Shooting Meteor",skills:"Increases Break Effect by <b>16%</b>. Increases the wearer's Break Effect by <b>16%</b>. After the wearer inflicts Weakness Break on an enemy, regenerates <b>3</b> Energy."},{id:"110",name:"Eagle of Twilight Line",skills:"Increases Wind DMG by <b>10%</b>. After the wearer uses their Ultimate, their action is Advanced Forward by <b>25%</b>."},{id:"109",name:"Band of Sizzling Thunder",skills:"Increases Lightning DMG by <b>10%</b>. When the wearer uses their Skill, increases the wearer's ATK by <b>20%</b> for <b>1</b> turn(s)."},{id:"108",name:"Genius of Brilliant Stars",skills:"Increases Quantum DMG by <b>10%</b>. When the wearer deals DMG to the target enemy, ignores <b>10%</b> DEF. If the target enemy has Quantum Weakness, the wearer additionally ignores <b>10%</b> DEF."},{id:"107",name:"Firesmith of Lava-Forging",skills:"Increases Fire DMG by <b>10%</b>. Increases DMG by the wearer's Skill by <b>12%</b>. After unleashing Ultimate, increases the wearer's Fire DMG by <b>12%</b> for the next attack."},{id:"106",name:"Guard of Wuthering Snow",skills:"Reduces DMG taken by <b>8%</b>. At the beginning of the turn, if the wearer's HP percentage is equal to or less than <b>50%</b>, restores HP equal to <b>8%</b> of their Max HP and regenerates <b>5</b> Energy."},{id:"105",name:"Champion of Streetwise Boxing",skills:"Increases Physical DMG by <b>10%</b>. After the wearer attacks or is hit, their ATK increases by <b>5%</b> for the rest of the battle. This effect can stack up to <b>5</b> time(s)."},{id:"104",name:"Hunter of Glacial Forest",skills:"Increases Ice DMG by <b>10%</b>. After the wearer uses their Ultimate, their CRIT DMG increases by <b>25%</b> for <b>2</b> turn(s)."},{id:"103",name:"Knight of Purity Palace",skills:"Increases DEF by <b>15%</b>. Increases the max DMG that can be absorbed by the Shield created by the wearer by <b>20%</b>."},{id:"102",name:"Musketeer of Wild Wheat",skills:"Increases ATK by <b>12%</b>. The wearer's SPD increases by <b>6%</b> and DMG dealt by Basic ATK increases by <b>10%</b>."},{id:"101",name:"Passerby of Wandering Cloud",skills:"Increases Outgoing Healing by <b>10%</b>. At the start of the battle, immediately regenerates 1 Skill Point."}],Tn={characters:yh,lightCones:Ph,relics:Ih},eo="v3.2.3",Zn="3.2v5",$l=e=>`Current version: (${Zn}) ${e?" - "+e:""}`,ql={1407:$l(""),1405:$l("Added ATK % body to benchmark mains, removed light cone Crit Rate. Now defaults to Main DPS with Sunday/Robin/Huohuo.")},a={ATK_P:"ATK%",ATK:"ATK",BE:"Break Effect",CD:"CRIT DMG",CR:"CRIT Rate",DEF_P:"DEF%",DEF:"DEF",EHR:"Effect Hit Rate",ERR:"Energy Regeneration Rate",Fire_DMG:"Fire DMG Boost",HP_P:"HP%",HP:"HP",Ice_DMG:"Ice DMG Boost",Imaginary_DMG:"Imaginary DMG Boost",Lightning_DMG:"Lightning DMG Boost",OHB:"Outgoing Healing Boost",Physical_DMG:"Physical DMG Boost",Quantum_DMG:"Quantum DMG Boost",RES:"Effect RES",SPD_P:"SPD%",SPD:"SPD",Wind_DMG:"Wind DMG Boost"},Bh=[a.HP_P,a.ATK_P,a.DEF_P,a.HP,a.ATK,a.SPD,a.CR,a.CD,a.EHR,a.BE,a.OHB,a.ERR,a.Physical_DMG,a.Fire_DMG,a.Ice_DMG,a.Lightning_DMG,a.Wind_DMG,a.Quantum_DMG,a.Imaginary_DMG],Mr={[a.HP_P]:{5:{base:6.912,increment:2.4192},4:{base:5.5296,increment:1.9354},3:{base:4.1472,increment:1.4515},2:{base:2.7648,increment:.9677}},[a.ATK_P]:{5:{base:6.912,increment:2.4192},4:{base:5.5296,increment:1.9354},3:{base:4.1472,increment:1.4515},2:{base:2.7648,increment:.9677}},[a.DEF_P]:{5:{base:8.64,increment:3.024},4:{base:6.912,increment:2.4192},3:{base:5.184,increment:1.8144},2:{base:3.456,increment:1.2096}},[a.HP]:{5:{base:112.896,increment:39.5136},4:{base:90.3168,increment:31.61088},3:{base:67.7376,increment:23.70816},2:{base:45.1584,increment:15.80544}},[a.ATK]:{5:{base:56.448,increment:19.7568},4:{base:45.1584,increment:15.80544},3:{base:33.8688,increment:11.85408},2:{base:22.5792,increment:7.90272}},[a.SPD]:{5:{base:4.032,increment:1.4},4:{base:3.226,increment:1.1},3:{base:2.419,increment:1},2:{base:1.613,increment:1}},[a.CR]:{5:{base:5.184,increment:1.8144},4:{base:4.1472,increment:1.4515},3:{base:3.1104,increment:1.0886},2:{base:2.0736,increment:.7258}},[a.CD]:{5:{base:10.368,increment:3.6288},4:{base:8.2944,increment:2.903},3:{base:6.2208,increment:2.1773},2:{base:4.1472,increment:1.4515}},[a.EHR]:{5:{base:6.912,increment:2.4192},4:{base:5.5296,increment:1.9354},3:{base:4.1472,increment:1.4515},2:{base:2.7648,increment:.9677}},[a.BE]:{5:{base:10.368,increment:3.6288},4:{base:8.2944,increment:2.903},3:{base:6.2208,increment:2.1773},2:{base:4.1472,increment:1.4515}},[a.ERR]:{5:{base:3.1104,increment:1.0886},4:{base:2.4883,increment:.8709},3:{base:1.8662,increment:.6532},2:{base:1.2442,increment:.4355}},[a.OHB]:{5:{base:5.5296,increment:1.9354},4:{base:4.4237,increment:1.5483},3:{base:3.3178,increment:1.1612},2:{base:2.2118,increment:.7741}},[a.Physical_DMG]:{5:{base:6.2208,increment:2.1773},4:{base:4.9766,increment:1.7418},3:{base:3.7325,increment:1.3064},2:{base:2.4883,increment:.8709}},[a.Fire_DMG]:{5:{base:6.2208,increment:2.1773},4:{base:4.9766,increment:1.7418},3:{base:3.7325,increment:1.3064},2:{base:2.4883,increment:.8709}},[a.Ice_DMG]:{5:{base:6.2208,increment:2.1773},4:{base:4.9766,increment:1.7418},3:{base:3.7325,increment:1.3064},2:{base:2.4883,increment:.8709}},[a.Lightning_DMG]:{5:{base:6.2208,increment:2.1773},4:{base:4.9766,increment:1.7418},3:{base:3.7325,increment:1.3064},2:{base:2.4883,increment:.8709}},[a.Wind_DMG]:{5:{base:6.2208,increment:2.1773},4:{base:4.9766,increment:1.7418},3:{base:3.7325,increment:1.3064},2:{base:2.4883,increment:.8709}},[a.Quantum_DMG]:{5:{base:6.2208,increment:2.1773},4:{base:4.9766,increment:1.7418},3:{base:3.7325,increment:1.3064},2:{base:2.4883,increment:.8709}},[a.Imaginary_DMG]:{5:{base:6.2208,increment:2.1773},4:{base:4.9766,increment:1.7418},3:{base:3.7325,increment:1.3064},2:{base:2.4883,increment:.8709}}},qt=[a.HP_P,a.ATK_P,a.DEF_P,a.HP,a.ATK,a.DEF,a.SPD,a.CR,a.CD,a.EHR,a.RES,a.BE],Re={[a.SPD]:{5:{high:2.6,mid:2.3,low:2},4:{high:2,mid:1.8,low:1.6},3:{high:1.4,mid:1.3,low:1.2},2:{high:1.2,mid:1.1,low:1}},[a.HP]:{5:{high:42.33751,mid:38.103755,low:33.87},4:{high:33.87,mid:30.483,low:27.096},3:{high:25.402506,mid:22.862253,low:20.322},2:{high:16.935,mid:15.2415,low:13.548}},[a.ATK]:{5:{high:21.168754,mid:19.051877,low:16.935},4:{high:16.935,mid:15.2415,low:13.548},3:{high:10.161,mid:11.431126,low:12.701252},2:{high:8.4675,mid:7.62075,low:6.774}},[a.DEF]:{5:{high:21.168754,mid:19.051877,low:16.935},4:{high:16.935,mid:15.2415,low:13.548},3:{high:10.161,mid:11.431126,low:12.701252},2:{high:8.4675,mid:7.62075,low:6.774}},[a.HP_P]:{5:{high:4.32,mid:3.888,low:3.456},4:{high:3.456,mid:3.1104,low:2.7648},3:{high:2.592,mid:2.3328,low:2.0736},2:{high:1.728,mid:1.5552,low:1.3824}},[a.ATK_P]:{5:{high:4.32,mid:3.888,low:3.456},4:{high:3.456,mid:3.1104,low:2.7648},3:{high:2.592,mid:2.3328,low:2.0736},2:{high:1.728,mid:1.5552,low:1.3824}},[a.DEF_P]:{5:{high:5.4,mid:4.86,low:4.32},4:{high:4.32,mid:3.888,low:3.456},3:{high:2.592,mid:2.916,low:3.24},2:{high:2.16,mid:1.944,low:1.728}},[a.BE]:{5:{high:6.48,mid:5.832,low:5.184},4:{high:5.184,mid:4.6656,low:4.1472},3:{high:3.888,mid:3.4992,low:3.1104},2:{high:2.592,mid:2.3328,low:2.0736}},[a.EHR]:{5:{high:4.32,mid:3.888,low:3.456},4:{high:3.456,mid:3.1104,low:2.7648},3:{high:2.592,mid:2.3328,low:2.0736},2:{high:1.728,mid:1.5552,low:1.3824}},[a.RES]:{5:{high:4.32,mid:3.888,low:3.456},4:{high:3.456,mid:3.1104,low:2.7648},3:{high:2.592,mid:2.3328,low:2.0736},2:{high:1.728,mid:1.5552,low:1.3824}},[a.CR]:{5:{high:3.24,mid:2.916,low:2.592},4:{high:2.592,mid:2.3328,low:2.0736},3:{high:1.5552,mid:1.7496,low:1.944},2:{high:1.296,mid:1.1664,low:1.0368}},[a.CD]:{5:{high:6.48,mid:5.832,low:5.184},4:{high:5.184,mid:4.6656,low:4.1472},3:{high:3.888,mid:3.4992,low:3.1104},2:{high:2.592,mid:2.3328,low:2.0736}}},Gh={[a.HP_P]:"HP %",[a.ATK_P]:"ATK %",[a.DEF_P]:"DEF %",[a.SPD_P]:"SPD %",[a.HP]:"HP",[a.ATK]:"ATK",[a.DEF]:"DEF",[a.SPD]:"SPD",[a.CR]:"CRIT Rate",[a.CD]:"CRIT DMG",[a.EHR]:"Effect HIT",[a.RES]:"Effect RES",[a.BE]:"Break Effect",[a.ERR]:"Energy Regen",[a.OHB]:"Healing Boost",[a.Physical_DMG]:"Physical DMG",[a.Fire_DMG]:"Fire DMG",[a.Ice_DMG]:"Ice DMG",[a.Lightning_DMG]:"Lightning DMG",[a.Wind_DMG]:"Wind DMG",[a.Quantum_DMG]:"Quantum DMG",[a.Imaginary_DMG]:"Imaginary DMG"};a.HP_P+"",a.ATK_P+"",a.DEF_P+"",a.SPD_P+"",a.HP+"",a.ATK+"",a.DEF+"",a.SPD+"",a.CR+"",a.CD+"",a.EHR+"",a.RES+"",a.BE+"",a.ERR+"",a.OHB+"",a.Physical_DMG+"",a.Fire_DMG+"",a.Ice_DMG+"",a.Lightning_DMG+"",a.Wind_DMG+"",a.Quantum_DMG+"",a.Imaginary_DMG+"";a.HP_P+"",a.ATK_P+"",a.DEF_P+"",a.SPD_P+"",a.HP+"",a.ATK+"",a.DEF+"",a.SPD+"",a.CR+"",a.CD+"",a.EHR+"",a.RES+"",a.BE+"",a.ERR+"",a.OHB+"",a.Physical_DMG+"",a.Fire_DMG+"",a.Ice_DMG+"",a.Lightning_DMG+"",a.Wind_DMG+"",a.Quantum_DMG+"",a.Imaginary_DMG+"";a.HP_P+"",a.ATK_P+"",a.DEF_P+"",a.SPD_P+"",a.HP+"",a.ATK+"",a.DEF+"",a.SPD+"",a.CR+"",a.CD+"",a.EHR+"",a.RES+"",a.BE+"",a.ERR+"",a.OHB+"",a.Physical_DMG+"",a.Fire_DMG+"",a.Ice_DMG+"",a.Lightning_DMG+"",a.Wind_DMG+"",a.Quantum_DMG+"",a.Imaginary_DMG+"";const b={Head:"Head",Hands:"Hands",Body:"Body",Feet:"Feet",PlanarSphere:"PlanarSphere",LinkRope:"LinkRope"},Mh={[b.Head]:"Head",[b.Hands]:"Hands",[b.Body]:"Body",[b.Feet]:"Feet",[b.PlanarSphere]:"Sphere",[b.LinkRope]:"Rope"},al={[b.Head]:[a.HP],[b.Hands]:[a.ATK],[b.Body]:[a.HP_P,a.ATK_P,a.DEF_P,a.CR,a.CD,a.OHB,a.EHR],[b.Feet]:[a.HP_P,a.ATK_P,a.DEF_P,a.SPD],[b.PlanarSphere]:[a.HP_P,a.ATK_P,a.DEF_P,a.Physical_DMG,a.Fire_DMG,a.Ice_DMG,a.Lightning_DMG,a.Wind_DMG,a.Quantum_DMG,a.Imaginary_DMG],[b.LinkRope]:[a.HP_P,a.ATK_P,a.DEF_P,a.BE,a.ERR]},$n={PasserbyOfWanderingCloud:"Passerby of Wandering Cloud",MusketeerOfWildWheat:"Musketeer of Wild Wheat",KnightOfPurityPalace:"Knight of Purity Palace",HunterOfGlacialForest:"Hunter of Glacial Forest",ChampionOfStreetwiseBoxing:"Champion of Streetwise Boxing",GuardOfWutheringSnow:"Guard of Wuthering Snow",FiresmithOfLavaForging:"Firesmith of Lava-Forging",GeniusOfBrilliantStars:"Genius of Brilliant Stars",BandOfSizzlingThunder:"Band of Sizzling Thunder",EagleOfTwilightLine:"Eagle of Twilight Line",ThiefOfShootingMeteor:"Thief of Shooting Meteor",WastelanderOfBanditryDesert:"Wastelander of Banditry Desert",LongevousDisciple:"Longevous Disciple",MessengerTraversingHackerspace:"Messenger Traversing Hackerspace",TheAshblazingGrandDuke:"The Ashblazing Grand Duke",PrisonerInDeepConfinement:"Prisoner in Deep Confinement",PioneerDiverOfDeadWaters:"Pioneer Diver of Dead Waters",WatchmakerMasterOfDreamMachinations:"Watchmaker, Master of Dream Machinations",IronCavalryAgainstTheScourge:"Iron Cavalry Against the Scourge",TheWindSoaringValorous:"The Wind-Soaring Valorous",SacerdosRelivedOrdeal:"Sacerdos' Relived Ordeal",ScholarLostInErudition:"Scholar Lost in Erudition",HeroOfTriumphantSong:"Hero of Triumphant Song",PoetOfMourningCollapse:"Poet of Mourning Collapse"},qn={SpaceSealingStation:"Space Sealing Station",FleetOfTheAgeless:"Fleet of the Ageless",PanCosmicCommercialEnterprise:"Pan-Cosmic Commercial Enterprise",BelobogOfTheArchitects:"Belobog of the Architects",CelestialDifferentiator:"Celestial Differentiator",InertSalsotto:"Inert Salsotto",TaliaKingdomOfBanditry:"Talia: Kingdom of Banditry",SprightlyVonwacq:"Sprightly Vonwacq",RutilantArena:"Rutilant Arena",BrokenKeel:"Broken Keel",FirmamentFrontlineGlamoth:"Firmament Frontline: Glamoth",PenaconyLandOfTheDreams:"Penacony, Land of the Dreams",SigoniaTheUnclaimedDesolation:"Sigonia, the Unclaimed Desolation",IzumoGenseiAndTakamaDivineRealm:"Izumo Gensei and Takama Divine Realm",DuranDynastyOfRunningWolves:"Duran, Dynasty of Running Wolves",ForgeOfTheKalpagniLantern:"Forge of the Kalpagni Lantern",LushakaTheSunkenSeas:"Lushaka, the Sunken Seas",TheWondrousBananAmusementPark:"The Wondrous BananAmusement Park",BoneCollectionsSereneDemesne:"Bone Collection's Serene Demesne",GiantTreeOfRaptBrooding:"Giant Tree of Rapt Brooding"},Gi={},R={...$n,...qn},Ja=Object.values($n),Qa=Object.values(qn),Nn={};for(let e=0;e<Qa.length;e++)Nn[Qa[e]]=e;const Ba={};for(let e=0;e<Ja.length;e++)Ba[Ja[e]]=e;const ni=Object.values($n).length,xh=Object.values(qn).length,Oi={Abundance:"Abundance",Destruction:"Destruction",Erudition:"Erudition",Harmony:"Harmony",Hunt:"Hunt",Nihility:"Nihility",Preservation:"Preservation",Remembrance:"Remembrance"},ec={Physical:"Physical",Quantum:"Quantum",Imaginary:"Imaginary",Ice:"Ice",Wind:"Wind",Fire:"Fire",Lightning:"Lightning"},ei={Physical:a.Physical_DMG,Fire:a.Fire_DMG,Ice:a.Ice_DMG,Lightning:a.Lightning_DMG,Wind:a.Wind_DMG,Quantum:a.Quantum_DMG,Imaginary:a.Imaginary_DMG},un={Physical:"PHYSICAL_RES_PEN",Fire:"FIRE_RES_PEN",Ice:"ICE_RES_PEN",Lightning:"LIGHTNING_RES_PEN",Wind:"WIND_RES_PEN",Quantum:"QUANTUM_RES_PEN",Imaginary:"IMAGINARY_RES_PEN"},m={Sets:R,Parts:b,Stats:a,MainStats:Bh,MainStatsValues:Mr,SubStats:qt,SetsOrnaments:qn,SetsRelics:$n,SetsRelicsNames:Ja,SetsOrnamentsNames:Qa,StatsToReadable:Gh,PartsToReadable:Mh,PartsMainStats:al,RelicSetToIndex:Ba,OrnamentSetToIndex:Nn,MAX_INT:2147483647,THREAD_BUFFER_LENGTH:15e4},pa={relic4Piece:"4 Piece",relic2Plus2Piece:"2 + 2 Piece",relic2PlusAny:"2 + Any"},Cs="combat",To="summoner",yo={ATK:{title:"ATK",key:"ATK",percent:!1},ATK_P:{title:"ATK %",key:"ATK_P",percent:!0},HP:{title:"HP",key:"HP",percent:!1},HP_P:{title:"HP %",key:"HP_P",percent:!0},DEF:{title:"DEF",key:"DEF",percent:!1},DEF_P:{title:"DEF %",key:"DEF_P",percent:!0},CR:{title:"Crit Rate %",key:"CR",percent:!0},CD:{title:"Crit Dmg %",key:"CD",percent:!0},SPD:{title:"SPD",key:"SPD",percent:!1},SPD_P:{title:"SPD %",key:"SPD_P",percent:!0},BE:{title:"BE %",key:"BE",percent:!0},DMG_BOOST:{title:"Dmg Boost %",key:"DMG_BOOST",percent:!0},DEF_PEN:{title:"Def Pen %",key:"DEF_PEN",percent:!0},RES_PEN:{title:"Dmg RES PEN %",key:"RES_PEN",percent:!0},EFFECT_RES_PEN:{title:"Effect RES PEN %",key:"EFFECT_RES_PEN",percent:!0},VULNERABILITY:{title:"Vulnerability %",key:"VULNERABILITY",percent:!0},BREAK_EFFICIENCY:{title:"Break Efficiency %",key:"BREAK_EFFICIENCY",percent:!0}},rt={[R.PasserbyOfWanderingCloud]:"101",[R.MusketeerOfWildWheat]:"102",[R.KnightOfPurityPalace]:"103",[R.HunterOfGlacialForest]:"104",[R.ChampionOfStreetwiseBoxing]:"105",[R.GuardOfWutheringSnow]:"106",[R.FiresmithOfLavaForging]:"107",[R.GeniusOfBrilliantStars]:"108",[R.BandOfSizzlingThunder]:"109",[R.EagleOfTwilightLine]:"110",[R.ThiefOfShootingMeteor]:"111",[R.WastelanderOfBanditryDesert]:"112",[R.LongevousDisciple]:"113",[R.MessengerTraversingHackerspace]:"114",[R.TheAshblazingGrandDuke]:"115",[R.PrisonerInDeepConfinement]:"116",[R.PioneerDiverOfDeadWaters]:"117",[R.WatchmakerMasterOfDreamMachinations]:"118",[R.IronCavalryAgainstTheScourge]:"119",[R.TheWindSoaringValorous]:"120",[R.SacerdosRelivedOrdeal]:"121",[R.ScholarLostInErudition]:"122",[R.HeroOfTriumphantSong]:"123",[R.PoetOfMourningCollapse]:"124",[R.SpaceSealingStation]:"301",[R.FleetOfTheAgeless]:"302",[R.PanCosmicCommercialEnterprise]:"303",[R.BelobogOfTheArchitects]:"304",[R.CelestialDifferentiator]:"305",[R.InertSalsotto]:"306",[R.TaliaKingdomOfBanditry]:"307",[R.SprightlyVonwacq]:"308",[R.RutilantArena]:"309",[R.BrokenKeel]:"310",[R.FirmamentFrontlineGlamoth]:"311",[R.PenaconyLandOfTheDreams]:"312",[R.SigoniaTheUnclaimedDesolation]:"313",[R.IzumoGenseiAndTakamaDivineRealm]:"314",[R.DuranDynastyOfRunningWolves]:"315",[R.ForgeOfTheKalpagniLantern]:"316",[R.LushakaTheSunkenSeas]:"317",[R.TheWondrousBananAmusementPark]:"318",[R.BoneCollectionsSereneDemesne]:"319",[R.GiantTreeOfRaptBrooding]:"320"},as="Default",Di="Custom",tc="Settings",Mi="Combat Simulation Score",ns="Character Score",Ya="None",nl="Damage Upgrades",il="Combat Stats",Pa="CPU",xi="GPU Stable",vi="GPU Experimental",ps="Sacerdos' Relived Ordeal 1x",gs="Sacerdos' Relived Ordeal 2x",Sa={SET:0,ABILITY:1},ea={SINGLE:0,CONTINUOUS:1};var ce=(e=>(e.BOOLEAN="boolean",e.NUMBER="number",e.SELECT="select",e))(ce||{}),St=(e=>(e.AUTO="AUTO",e.CUSTOM="CUSTOM",e.STANDARD="STANDARD",e))(St||{});const vh="modulepreload",_h=function(e){return"/dreary-quibbles/"+e},ac={},le=function(t,n,o){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));s=Promise.allSettled(n.map(d=>{if(d=_h(d),d in ac)return;ac[d]=!0;const u=d.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${h}`))return;const p=document.createElement("link");if(p.rel=u?"stylesheet":vh,u||(p.as="script"),p.crossOrigin="",p.href=d,c&&p.setAttribute("nonce",c),document.head.appendChild(p),u)return new Promise((S,D)=>{p.addEventListener("load",S),p.addEventListener("error",()=>D(new Error(`Unable to preload CSS for ${d}`)))})}))}function r(l){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=l,window.dispatchEvent(c),!c.defaultPrevented)throw l}return s.then(l=>{for(const c of l||[])c.status==="rejected"&&r(c.reason);return t().catch(r)})},Ah={1001:()=>le(()=>import("./March7th-nWXhfuWI.js"),__vite__mapDeps([0,1,2])),1002:()=>le(()=>import("./DanHeng-zw_1Lu9a.js"),__vite__mapDeps([3,2])),1003:()=>le(()=>import("./Himeko-B-JJV5f0.js"),__vite__mapDeps([4,1,2])),1004:()=>le(()=>import("./Welt-BVSWa3Ns.js"),__vite__mapDeps([5,1,2])),1005:()=>le(()=>import("./Kafka-VISeBAFt.js"),__vite__mapDeps([6,1,2])),1006:()=>le(()=>import("./SilverWolf-CkPIxHv8.js"),__vite__mapDeps([7,1,2])),1008:()=>le(()=>import("./Arlan-CfDgc7Gw.js"),__vite__mapDeps([8,2])),1009:()=>le(()=>import("./Asta-weSErHRY.js"),__vite__mapDeps([9,2])),1013:()=>le(()=>import("./Herta-BiYLKD_E.js"),__vite__mapDeps([10,1,2])),1101:()=>le(()=>import("./Bronya-e0jj4kZn.js"),__vite__mapDeps([11,1,2])),1102:()=>le(()=>import("./Seele-BCMmcyN0.js"),__vite__mapDeps([12,1,2])),1103:()=>le(()=>import("./Serval-BBMCRbkJ.js"),__vite__mapDeps([13,1,2])),1104:()=>le(()=>import("./Gepard-cvI8fJh_.js"),__vite__mapDeps([14,1,2])),1105:()=>le(()=>import("./Natasha-CQbbwff-.js"),__vite__mapDeps([15,1,2])),1106:()=>le(()=>import("./Pela-BMYxw6YQ.js"),__vite__mapDeps([16,1,2])),1107:()=>le(()=>import("./Clara-C9U_j1JM.js"),__vite__mapDeps([17,1,2])),1108:()=>le(()=>import("./Sampo-DgWcP3Qx.js"),__vite__mapDeps([18,2])),1109:()=>le(()=>import("./Hook-BZHXktuE.js"),__vite__mapDeps([19,1,2])),1110:()=>le(()=>import("./Lynx-B3zJJ-vx.js"),__vite__mapDeps([20,1,2])),1111:()=>le(()=>import("./Luka-BiTHa9z9.js"),__vite__mapDeps([21,2])),1112:()=>le(()=>import("./Topaz-CXj10nu4.js"),__vite__mapDeps([22,2])),1201:()=>le(()=>import("./Qingque-BVM7OIAv.js"),__vite__mapDeps([23,1,2])),1202:()=>le(()=>import("./Tingyun-Dh5-Z-Sa.js"),__vite__mapDeps([24,1,2])),1203:()=>le(()=>import("./Luocha-BNo-IpT5.js"),__vite__mapDeps([25,1,2])),1204:()=>le(()=>import("./JingYuan-COsl4aCC.js"),__vite__mapDeps([26,1,2])),1205:()=>le(()=>import("./Blade-DP4awdfS.js"),__vite__mapDeps([27,1,2])),1206:()=>le(()=>import("./Sushang-hlEJDW1q.js"),__vite__mapDeps([28,1,2])),1207:()=>le(()=>import("./Yukong-yH698ONT.js"),__vite__mapDeps([29,2])),1208:()=>le(()=>import("./FuXuan-DwksJ3qp.js"),__vite__mapDeps([30,1,2])),1209:()=>le(()=>import("./Yanqing-B-r_xCSF.js"),__vite__mapDeps([31,1,2])),1210:()=>le(()=>import("./Guinaifen-DXekRRR_.js"),__vite__mapDeps([32,2])),1211:()=>le(()=>import("./Bailu-IIdaqhec.js"),__vite__mapDeps([33,1,2])),1212:()=>le(()=>import("./Jingliu-dX1aN2Gt.js"),__vite__mapDeps([34,2])),1213:()=>le(()=>import("./ImbibitorLunae-Wb2Hh7_b.js"),__vite__mapDeps([35,2])),1214:()=>le(()=>import("./Xueyi-BjOIMYZR.js"),__vite__mapDeps([36,1,2])),1215:()=>le(()=>import("./Hanya-B0zZjc_p.js"),__vite__mapDeps([37,2])),1217:()=>le(()=>import("./Huohuo-BGrNBu3H.js"),__vite__mapDeps([38,1,2])),1218:()=>le(()=>import("./Jiaoqiu-DpgUn3CX.js"),__vite__mapDeps([39,2])),1220:()=>le(()=>import("./Feixiao-D2g4Pcky.js"),__vite__mapDeps([40,2])),1221:()=>le(()=>import("./Yunli-Nz8BJ0Cv.js"),__vite__mapDeps([41,1,2])),1222:()=>le(()=>import("./Lingsha-DzSw9UgK.js"),__vite__mapDeps([42,1,2])),1223:()=>le(()=>import("./Moze-BlohlQVS.js"),__vite__mapDeps([43,1,2])),1224:()=>le(()=>import("./March7thImaginary-CKYg6XaB.js"),__vite__mapDeps([44,1,2])),1225:()=>le(()=>import("./Fugue-eTB0nzVV.js"),__vite__mapDeps([45,2])),1301:()=>le(()=>import("./Gallagher-JmZG3mTC.js"),__vite__mapDeps([46,1,2])),1302:()=>le(()=>import("./Argenti-Cw8AwZCi.js"),__vite__mapDeps([47,2])),1303:()=>le(()=>import("./RuanMei-CXSVCiP4.js"),__vite__mapDeps([48,2])),1304:()=>le(()=>import("./Aventurine-DWvLVluv.js"),__vite__mapDeps([49,1,2])),1305:()=>le(()=>import("./DrRatio-BE5D4wG5.js"),__vite__mapDeps([50,1,2])),1306:()=>le(()=>import("./Sparkle-Bwpfo0wv.js"),__vite__mapDeps([51,2])),1307:()=>le(()=>import("./BlackSwan-DasxtVsD.js"),__vite__mapDeps([52,2])),1308:()=>le(()=>import("./Acheron-DeHA_T2F.js"),__vite__mapDeps([53,2])),1309:()=>le(()=>import("./Robin-BpxYET6U.js"),__vite__mapDeps([54,1,2])),1310:()=>le(()=>import("./Firefly-4T60me_M.js"),__vite__mapDeps([55,2])),1312:()=>le(()=>import("./Misha-DBOTnAfl.js"),__vite__mapDeps([56,2])),1313:()=>le(()=>import("./Sunday-CY0iVfXj.js"),__vite__mapDeps([57,2])),1314:()=>le(()=>import("./Jade--bUa3fA9.js"),__vite__mapDeps([58,1,2])),1315:()=>le(()=>import("./Boothill-TcZeMsbK.js"),__vite__mapDeps([59,2])),1317:()=>le(()=>import("./Rappa-XxFs_kdy.js"),__vite__mapDeps([60,2])),1401:()=>le(()=>import("./TheHerta-CCMgAFdK.js"),__vite__mapDeps([61,2])),1402:()=>le(()=>import("./Aglaea-CW8aqIaC.js"),__vite__mapDeps([62,1,2])),1403:()=>le(()=>import("./Tribbie-CSbjXjpa.js"),__vite__mapDeps([63,1,2])),1404:()=>le(()=>import("./Mydei-Bte-Zf8_.js"),__vite__mapDeps([64,2])),1405:()=>le(()=>import("./Anaxa-BQGfciS-.js"),__vite__mapDeps([65,2])),1407:()=>le(()=>import("./Castorice-CR334v4Q.js"),__vite__mapDeps([66,2])),8001:()=>le(()=>import("./TrailblazerDestruction-BQn91M9q.js"),__vite__mapDeps([67,2])),8002:()=>le(()=>import("./TrailblazerDestruction-BQn91M9q.js"),__vite__mapDeps([67,2])),8003:()=>le(()=>import("./TrailblazerPreservation-lMsbUyB7.js"),__vite__mapDeps([68,1,2])),8004:()=>le(()=>import("./TrailblazerPreservation-lMsbUyB7.js"),__vite__mapDeps([68,1,2])),8005:()=>le(()=>import("./TrailblazerHarmony-BVgbATIO.js"),__vite__mapDeps([69,2])),8006:()=>le(()=>import("./TrailblazerHarmony-BVgbATIO.js"),__vite__mapDeps([69,2])),8007:()=>le(()=>import("./TrailblazerRemembrance-D21tY1TS.js"),__vite__mapDeps([70,2])),8008:()=>le(()=>import("./TrailblazerRemembrance-D21tY1TS.js"),__vite__mapDeps([70,2]))},Ri=new Map;async function Lh(e){const t=e.map(async n=>{if(!Ri.has(n)){const o=Ah[n];if(!o)throw new Error(`No character found for ID: ${n}`);const s=await o();return Ri.set(n,s.default),s.default}return Promise.resolve(Ri.get(n))});return await Promise.all(t),e.map(n=>Ri.get(n))}const ta={get(e,t=!1){const{characterId:n,characterEidolon:o}=e;if(!Ri.has(n))throw new Error(`Character ${n} not preloaded.`);return Ri.get(n)(o,t)}};var Ne=(e=>(e.optimizerCharacterId="optimizerCharacterId",e.relicScorerSidebarOpen="relicScorerSidebarOpen",e.scoringType="scoringType",e.combatScoreDetails="combatScoreDetails",e.computeEngine="computeEngine",e.showcaseStandardMode="showcaseStandardMode",e.showcaseDarkMode="showcaseDarkMode",e.showcaseUID="showcaseUID",e.showcasePreciseSpd="showcasePreciseSpd",e))(Ne||{});const C={clone(e){return e&&JSON.parse(JSON.stringify(e))},objectHash(e){return X0(e)},sumArray:e=>e.reduce((t,n)=>t+n,0),precisionRound:(e,t=5)=>{const n=Math.pow(10,t);return Math.round(e*n)/n},calculateRelicMainStatValue:(e,t,n)=>m.MainStatsValues[e][t].base+m.MainStatsValues[e][t].increment*n,wrappedFixedT:e=>({get:e?w.getFixedT:Fh}),flipStringMapping:e=>Object.fromEntries(Object.entries(e).map(([t,n])=>[n,t])),uuid:()=>Br(),uuidAlphaOnly:()=>Br().replace(/[^a-zA-Z0-9]/g,""),stripTrailingSlashes:e=>e.replace(/\/+$/,""),sleep:e=>new Promise(t=>setTimeout(t,e)),consoleWarnWrapper:e=>{e instanceof Error?console.warn(e.name,e.message):console.warn("An unknown error occurred",e)},validateUuid:e=>{const t=e.trim();return/^\d{9}$/.test(t)?t:null},smoothScrollNearest:(e,t=300)=>{const n=e.getBoundingClientRect(),o=document.documentElement||document.body,s=o.scrollTop,r=n.top+s,l=n.bottom+s,c=o.clientHeight;let d;if(n.top<0)d=r;else if(n.bottom>c)d=l-c+5;else return;const u=performance.now(),h=s,p=d-h;function S(D){const E=D-u,y=Math.min(E/t,1),P=y<.5?2*y*y:1-Math.pow(-2*y+2,2)/2;o.scrollTo(0,h+p*P),E<t&&requestAnimationFrame(S)}requestAnimationFrame(S)}},Fh=()=>()=>"",J={success:(e,t=3)=>{const n=C.uuid();console.log("Success message:",e),window.messageApi.open({key:n,type:"success",content:e||"",duration:t,onClick:()=>window.messageApi.destroy(n)})},error:(e,t=3)=>{const n=C.uuid();console.warn("Error message:",e),window.messageApi.open({key:n,type:"error",content:e||"",duration:t,onClick:()=>window.messageApi.destroy(n)})},warning:(e,t=3)=>{const n=C.uuid();console.warn("Warning message:",e),window.messageApi.open({key:n,type:"warning",content:e||"",duration:t,onClick:()=>window.messageApi.destroy(n)})}};var Qt=(e=>(e.PRIMARY="PRIMARY",e.CHARACTER="CHARACTER",e.LIGHTCONE="LIGHTCONE",e.SETS="SETS",e.BASIC_STATS="BASIC_STATS",e.COMBAT_STATS="COMBAT_STATS",e.NONE="NONE",e))(Qt||{});const Hh=Object.fromEntries(Object.entries(R).map(([e,t])=>[e,{id:e,label:t,buffType:"SETS",ability:"SETS"}])),v={character(e){function t(n){return{id:e,label:`${e}_${n}`,ability:n,buffType:"CHARACTER"}}return{SOURCE_BASIC:t("Basic"),SOURCE_SKILL:t("Skill"),SOURCE_ULT:t("Ult"),SOURCE_TALENT:t("Talent"),SOURCE_TECHNIQUE:t("Technique"),SOURCE_TRACE:t("Trace"),SOURCE_MEMO:t("Memo"),SOURCE_E1:t("E1"),SOURCE_E2:t("E2"),SOURCE_E4:t("E4"),SOURCE_E6:t("E6")}},lightCone(e){return{SOURCE_LC:{id:e,label:`${e}_LC`,ability:"LC",buffType:"LIGHTCONE"}}},NONE:{id:"NONE",label:"NONE",buffType:"NONE",ability:"NONE"},...Hh},wh=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.Adversarial"),{SOURCE_LC:o}=v.lightCone("20014"),s=[.1,.12,.14,.16,.18],r={defeatedEnemySpdBuff:!0},l={defeatedEnemySpdBuff:{lc:!0,id:"defeatedEnemySpdBuff",formItem:"switch",text:n("Content.defeatedEnemySpdBuff.text"),content:n("Content.defeatedEnemySpdBuff.content",{SpdBuff:C.precisionRound(100*s[e])})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,d,u)=>{const h=d.lightConeConditionals;c.SPD_P.buff(h.defeatedEnemySpdBuff?s[e]:0,o)},finalizeCalculations:()=>{}}},Oh=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.Amber"),{SOURCE_LC:o}=v.lightCone("20003"),s=[.16,.2,.24,.28,.32],r={hp50DefBuff:!0},l={hp50DefBuff:{lc:!0,id:"hp50DefBuff",formItem:"switch",text:n("Content.hp50DefBuff.text"),content:n("Content.hp50DefBuff.content",{DefBuff:C.precisionRound(100*s[e])})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,d,u)=>{const h=d.lightConeConditionals;c.DEF_P.buff(h.hp50DefBuff?s[e]:0,o)},finalizeCalculations:()=>{}}},kh=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.Arrows"),{SOURCE_LC:o}=v.lightCone("20000"),s=[.12,.15,.18,.21,.24],r={critBuff:!0},l={critBuff:{lc:!0,id:"critBuff",formItem:"switch",text:n("Content.critBuff.text"),content:n("Content.critBuff.content",{CritBuff:C.precisionRound(100*s[e])})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,d,u)=>{const h=d.lightConeConditionals;c.CR.buff(h.critBuff?s[e]:0,o)},finalizeCalculations:()=>{}}},Kh=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.Chorus"),{SOURCE_LC:o}=v.lightCone("20005"),s=[.08,.09,.1,.11,.12],r={inBattleAtkBuff:!0},l={inBattleAtkBuff:{lc:!0,id:"inBattleAtkBuff",formItem:"switch",text:n("Content.inBattleAtkBuff.text"),content:n("Content.inBattleAtkBuff.content",{AtkBuff:C.precisionRound(100*s[e])})}},c={inBattleAtkBuff:l.inBattleAtkBuff};return{content:()=>Object.values(l),teammateContent:()=>Object.values(c),defaults:()=>r,teammateDefaults:()=>({inBattleAtkBuff:!0}),precomputeEffects:()=>{},precomputeMutualEffects:(d,u,h)=>{const p=u.lightConeConditionals;d.ATK_P.buffTeam(p.inBattleAtkBuff?s[e]:0,o)},finalizeCalculations:()=>{}}},j5=.06,W5=0;var kt=(e=>(e[e.BASIC=1]="BASIC",e[e.SKILL=2]="SKILL",e[e.ULT=4]="ULT",e[e.FUA=8]="FUA",e[e.DOT=16]="DOT",e[e.BREAK=32]="BREAK",e[e.MEMO_SKILL=64]="MEMO_SKILL",e[e.MEMO_TALENT=128]="MEMO_TALENT",e))(kt||{});const Rn=1,jt=2,xt=4,ga=8,Po=16,Ss=32,Rd=64,nc=128,jh=256,Wh=1,Zh=2,Nh=4,Vh=8,zh=64,Uh=128,Z5=0,N5=1;function st(e,t){const n=" ".repeat(t*2);return e.split(`
`).map(o=>n+o).join(`
`)}function ki(e){return e?"true":"false"}function V5(e){return e?"false":"true"}function Xh(e,t){return e.teammateIndex===0?t.teammate0:e.teammateIndex===1?t.teammate1:t.teammate2}function Ut(e,t,n,o){let s;if(e.teammateIndex!=null){const r=Xh(e,n);s={...n,teammateCharacterConditionals:r.characterConditionals,teammateLightConeConditionals:r.lightConeConditionals}}else s=n;e.activation==ea.SINGLE?!n.conditionalState[e.id]&&e.condition(t,s,o)&&(n.conditionalState[e.id]=1,e.effect(t,s,o)):e.activation==ea.CONTINUOUS&&e.condition(t,s,o)&&e.effect(t,s,o)}function ba(e,t){return`
fn evaluate${e.id}(p_x: ptr<function, ComputedStats>, p_m: ptr<function, ComputedStats>, p_sets: ptr<function, Sets>, p_state: ptr<function, ConditionalState>) {
  let x = *p_x;
${st(t.trim(),1)}
}
  `}const Ed={HP_P:0,ATK_P:0,DEF_P:0,SPD_P:0,HP:1e-8,ATK:1e-8,DEF:1e-8,SPD:1e-8,CR:1e-8,CD:1e-8,EHR:1e-8,RES:1e-8,BE:1e-8,ERR:1e-8,OHB:1e-8,PHYSICAL_DMG_BOOST:1e-8,FIRE_DMG_BOOST:1e-8,ICE_DMG_BOOST:1e-8,LIGHTNING_DMG_BOOST:1e-8,WIND_DMG_BOOST:1e-8,QUANTUM_DMG_BOOST:1e-8,IMAGINARY_DMG_BOOST:1e-8,ELEMENTAL_DMG:1e-8};function Cd(){return Float32Array.from(Object.values(Ed))}const Yh=Cd();class $a{constructor(t=!1,n=!1){Ue(this,"a",Cd());Ue(this,"m");Ue(this,"buffs");Ue(this,"buffsMemo");Ue(this,"trace");Ue(this,"relicSetIndex");Ue(this,"ornamentSetIndex");Ue(this,"sets");Ue(this,"setsArray");Ue(this,"id");Ue(this,"weight");this.m=n?null:new $a(t,!0,()=>this),this.buffs=[],this.buffsMemo=[],this.trace=t,this.relicSetIndex=0,this.ornamentSetIndex=0,this.sets={},this.setsArray=[],this.id=-1,this.weight=0,Object.keys(Ed).forEach((o,s)=>{const r=(l,c)=>this.trace&&this.buffs.push({stat:o,key:s,value:l,source:c});Object.defineProperty(this,o,{value:{buff:(l,c)=>{l!=0&&(this.a[s]+=l,r(l,c))},set:(l,c)=>{this.a[s]=l,r(l,c)},get:()=>this.a[s]},writable:!1,enumerable:!0,configurable:!0}),Object.defineProperty(this,`$${o}`,{get:()=>this.a[s],enumerable:!0,configurable:!0})}),Object.defineProperty(this,"#show",{get:()=>this.toBasicStatsObject(),enumerable:!0,configurable:!0})}init(t,n,o,s,r){this.relicSetIndex=t,this.ornamentSetIndex=n,this.sets=o,this.setsArray=s,this.id=r,this.a.set(Yh),this.trace&&(this.buffs=[],this.buffsMemo=[])}initMemo(){this.m.a.set(this.a),this.trace&&(this.m.buffs=[],this.m.buffsMemo=[])}setWeight(t){this.weight=t}set(t,n,o){this.a[t]=n}get(t){return this.a[t]}toBasicStatsObject(){return Td(this.a,this.weight,this.relicSetIndex,this.ornamentSetIndex)}}function Td(e,t=0,n=0,o=0){return{"HP%":e[f.HP_P],"ATK%":e[f.ATK_P],"DEF%":e[f.DEF_P],"SPD%":e[f.SPD_P],HP:e[f.HP],ATK:e[f.ATK],DEF:e[f.DEF],SPD:e[f.SPD],"CRIT Rate":e[f.CR],"CRIT DMG":e[f.CD],"Effect Hit Rate":e[f.EHR],"Effect RES":e[f.RES],"Break Effect":e[f.BE],"Energy Regeneration Rate":e[f.ERR],"Outgoing Healing Boost":e[f.OHB],"Physical DMG Boost":e[f.PHYSICAL_DMG_BOOST],"Fire DMG Boost":e[f.FIRE_DMG_BOOST],"Ice DMG Boost":e[f.ICE_DMG_BOOST],"Lightning DMG Boost":e[f.LIGHTNING_DMG_BOOST],"Wind DMG Boost":e[f.WIND_DMG_BOOST],"Quantum DMG Boost":e[f.QUANTUM_DMG_BOOST],"Imaginary DMG Boost":e[f.IMAGINARY_DMG_BOOST],ELEMENTAL_DMG:e[f.ELEMENTAL_DMG],WEIGHT:t,relicSetIndex:n,ornamentSetIndex:o}}const Jh={HP_P:{label:"HP %"},ATK_P:{label:"ATK %"},DEF_P:{label:"DEF %"},SPD_P:{label:"SPD %"},HP:{flat:!0,label:"HP"},ATK:{flat:!0,label:"ATK"},DEF:{flat:!0,label:"DEF"},SPD:{flat:!0,default:1e-4,label:"SPD"},CR:{label:"Crit Rate"},CD:{label:"Crit DMG"},EHR:{label:"Effect Hit Rate"},RES:{label:"Effect RES"},BE:{label:"Break Effect"},ERR:{label:"Energy Regeneration Rate"},OHB:{label:"Outgoing Healing Boost"},PHYSICAL_DMG_BOOST:{label:"Physical DMG Boost"},FIRE_DMG_BOOST:{label:"Fire DMG Boost"},ICE_DMG_BOOST:{label:"Ice DMG Boost"},LIGHTNING_DMG_BOOST:{label:"Thunder DMG Boost"},WIND_DMG_BOOST:{label:"Wind DMG Boost"},QUANTUM_DMG_BOOST:{label:"Quantum DMG Boost"},IMAGINARY_DMG_BOOST:{label:"Imaginary DMG Boost"},ELEMENTAL_DMG:{label:"Elemental DMG"},BASE_HP:{flat:!0,label:"Base HP"},BASE_ATK:{flat:!0,label:"Base ATK"},BASE_DEF:{flat:!0,label:"Base DEF"},BASE_SPD:{flat:!0,label:"Base SPD"},MEMO_BASE_HP_SCALING:{label:"Memosprite base HP scaling"},MEMO_BASE_DEF_SCALING:{label:"Memosprite base DEF scaling"},MEMO_BASE_ATK_SCALING:{label:"Memosprite base ATK scaling"},MEMO_BASE_SPD_SCALING:{label:"Memosprite base SPD scaling"},MEMO_BASE_HP_FLAT:{flat:!0,label:"Memosprite base HP flat"},MEMO_BASE_DEF_FLAT:{flat:!0,label:"Memosprite base DEF flat"},MEMO_BASE_ATK_FLAT:{flat:!0,label:"Memosprite base ATK flat"},MEMO_BASE_SPD_FLAT:{flat:!0,label:"Memosprite base SPD flat"},UNCONVERTIBLE_HP_BUFF:{flat:!0,label:"Unconvertible HP"},UNCONVERTIBLE_ATK_BUFF:{flat:!0,label:"Unconvertible ATK"},UNCONVERTIBLE_DEF_BUFF:{flat:!0,label:"Unconvertible DEF"},UNCONVERTIBLE_SPD_BUFF:{flat:!0,label:"Unconvertible SPD"},UNCONVERTIBLE_CR_BUFF:{label:"Unconvertible Crit Rate"},UNCONVERTIBLE_CD_BUFF:{label:"Unconvertible Crit DMG"},UNCONVERTIBLE_EHR_BUFF:{label:"Unconvertible Effect Hit Rate"},UNCONVERTIBLE_BE_BUFF:{label:"Unconvertible Break Effect"},UNCONVERTIBLE_OHB_BUFF:{label:"Unconvertible Outgoing Healing Boost"},UNCONVERTIBLE_RES_BUFF:{label:"Unconvertible Effect RES"},UNCONVERTIBLE_ERR_BUFF:{label:"Unconvertible Energy Regeneration Rate"},DMG_RED_MULTI:{default:1,label:"DMG reduction"},EHP:{flat:!0,label:"Effective HP"},SUMMONS:{flat:!0,label:"Summons"},MEMOSPRITE:{bool:!0,label:"Memosprite"},ENEMY_WEAKNESS_BROKEN:{bool:!0,label:"Enemy weakness broken"},MEMO_BUFF_PRIORITY:{bool:!0,label:"Prioritize memosprite buffs"},DEPRIORITIZE_BUFFS:{bool:!0,label:"Deprioritize buffs"},COMBO_DMG:{flat:!0,label:"Combo DMG"},DOT_CHANCE:{label:"Dot base chance"},EFFECT_RES_PEN:{label:"Effect RES PEN"},DOT_SPLIT:{label:"Dot DMG split"},DOT_STACKS:{flat:!0,label:"Dot stacks"},HEAL_TYPE:{flat:!0,label:"Heal ability type"},HEAL_FLAT:{flat:!0,label:"Heal flat"},HEAL_SCALING:{label:"Heal scaling"},HEAL_VALUE:{flat:!0,label:"Heal value"},SHIELD_FLAT:{flat:!0,label:"Shield flat"},SHIELD_SCALING:{label:"Shield scaling"},SHIELD_VALUE:{flat:!0,label:"Shield value"},SHIELD_BOOST:{label:"Shield boost"},SKILL_OHB:{label:"Skill Outgoing Healing Boost"},ULT_OHB:{label:"Ult Outgoing Healing Boost"},PHYSICAL_RES_PEN:{label:"Physical RES PEN"},FIRE_RES_PEN:{label:"Fire RES PEN"},ICE_RES_PEN:{label:"Ice RES PEN"},LIGHTNING_RES_PEN:{label:"Lightning RES PEN"},WIND_RES_PEN:{label:"Wind RES PEN"},QUANTUM_RES_PEN:{label:"Quantum RES PEN"},IMAGINARY_RES_PEN:{label:"Imaginary RES PEN"},SUPER_BREAK_DEF_PEN:{label:"Super Break DEF PEN"},SUPER_BREAK_DMG_BOOST:{label:"Super Break DMG Boost"},SUPER_BREAK_VULNERABILITY:{label:"Super Break Vulnerability"},ADDITIONAL_DMG_BOOST:{label:"Additional DMG boost"},ULT_ADDITIONAL_DMG_CR_OVERRIDE:{label:"Ult Additional DMG CR override"},ULT_ADDITIONAL_DMG_CD_OVERRIDE:{label:"Ult Additional DMG CD override"},BASIC_DMG_TYPE:{flat:!0,default:Rn,label:"Basic DMG type"},SKILL_DMG_TYPE:{flat:!0,default:jt,label:"Skill DMG type"},ULT_DMG_TYPE:{flat:!0,default:xt,label:"Ult DMG type"},FUA_DMG_TYPE:{flat:!0,default:ga,label:"Fua DMG type"},DOT_DMG_TYPE:{flat:!0,default:Po,label:"Dot DMG type"},BREAK_DMG_TYPE:{flat:!0,default:Ss,label:"Break DMG type"},MEMO_SKILL_DMG_TYPE:{flat:!0,default:nc,label:"Memo Skill DMG type"},MEMO_TALENT_DMG_TYPE:{flat:!0,default:nc,label:"Memo Talent DMG type"},ADDITIONAL_DMG_TYPE:{flat:!0,default:jh,label:"Additional DMG type"},SUPER_BREAK_DMG_TYPE:{flat:!0,default:Ss|Rd,label:"Super Break DMG type"}},ic={ATK_SCALING:{separated:!0,label:"ATK scaling"},DEF_SCALING:{separated:!0,label:"DEF scaling"},HP_SCALING:{separated:!0,label:"HP scaling"},SPECIAL_SCALING:{separated:!0,label:"Special scaling"},ATK_P_BOOST:{label:"ATK % boost"},CR_BOOST:{label:"Crit Rate boost"},CD_BOOST:{label:"Crit DMG boost"},DMG_BOOST:{separated:!0,label:"DMG boost"},VULNERABILITY:{label:"Vulnerability"},RES_PEN:{label:"RES PEN"},DEF_PEN:{label:"DEF PEN"},BREAK_DEF_PEN:{label:"Break DEF PEN"},TOUGHNESS_DMG:{flat:!0,separated:!0,label:"Toughness DMG"},SUPER_BREAK_MODIFIER:{label:"Super Break multiplier"},BREAK_EFFICIENCY_BOOST:{label:"Break Efficiency boost"},TRUE_DMG_MODIFIER:{label:"True DMG multiplier"},FINAL_DMG_BOOST:{label:"Final DMG multiplier"},BREAK_DMG_MODIFIER:{separated:!0,label:"Break DMG multiplier"},ADDITIONAL_DMG_SCALING:{separated:!0,label:"Additional DMG scaling"},ADDITIONAL_DMG:{flat:!0,separated:!0,label:"Additional DMG"},DMG:{flat:!0,label:"DMG"}},Qh={BASIC:"Basic",SKILL:"Skill",ULT:"Ult",FUA:"Fua",DOT:"Dot",BREAK:"Break",MEMO_SKILL:"Memo Skill",MEMO_TALENT:"Memo Talent"},$h={...Jh,...Object.values(kt).filter(e=>typeof e=="number").reduce((e,t)=>{const n=kt[t];return Object.entries(ic).forEach(([o,s])=>{e[`${n}_${o}`]={...s,label:`${Qh[n]} ${s.label}`}}),e},{}),...Object.entries(ic).reduce((e,[t,n])=>(n.separated||(e[t]=n),e),{})},is=Object.fromEntries(Object.entries($h).map(([e,t],n)=>{const o=t;return[e,{name:e,index:n,default:o.default??0,flat:o.flat??!1,whole:o.whole??!1,bool:o.bool??!1,category:o.category??1,label:o.label}]})),Vn=Object.fromEntries(Object.entries(is).map(([e,t])=>[e,t.default])),Io=Object.values(is).sort((e,t)=>e.index-t.index);function qh(){function e(t){return{name:t,abilityDmg:0,additionalDmg:0,breakDmg:0,superBreakDmg:0,jointDmg:0,trueDmg:0,dotDmg:0,memoDmg:0}}return{BASIC_DMG:e("BASIC_DMG"),SKILL_DMG:e("SKILL_DMG"),ULT_DMG:e("ULT_DMG"),FUA_DMG:e("FUA_DMG"),DOT_DMG:e("DOT_DMG"),BREAK_DMG:e("BREAK_DMG"),MEMO_SKILL_DMG:e("MEMO_SKILL_DMG"),MEMO_TALENT_DMG:e("MEMO_TALENT_DMG")}}const f=Object.keys(Vn).reduce((e,t,n)=>(e[t]=n,e),{});class Ma{constructor(t=!1,n=!1,o){Ue(this,"a",xr());Ue(this,"c");Ue(this,"m");Ue(this,"summoner");Ue(this,"buffs");Ue(this,"buffsMemo");Ue(this,"trace");Ue(this,"dmgSplits");this.c=new $a(t,!0,()=>this),this.m=n?null:new Ma(t,!0,()=>this),this.summoner=n?o:null,this.buffs=[],this.buffsMemo=[],this.trace=t,this.dmgSplits=this.trace?qh():null,Object.keys(Vn).forEach((s,r)=>{const l=(h,p)=>this.trace&&this.buffs.push({stat:s,key:r,value:h,source:p}),c=(h,p)=>this.trace&&this.buffsMemo.push({stat:s,key:r,value:h,source:p}),d=(h,p)=>this.trace&&(this.buffs=this.buffs.filter(S=>S.key!==r).concat({stat:s,key:r,value:h,source:p})),u=(h,p)=>this.trace&&(this.buffsMemo=this.buffsMemo.filter(S=>S.key!==r).concat({stat:s,key:r,value:h,source:p}));Object.defineProperty(this,s,{value:{buff:(h,p)=>{h!=0&&(this.a[r]+=h,l(h,p))},buffSingle:(h,p)=>{h!=0&&(this.a[f.DEPRIORITIZE_BUFFS]||(this.a[f.MEMO_BUFF_PRIORITY]?(this.m.a[r]+=h,c(h,p)):(this.a[r]+=h,l(h,p))))},buffMemo:(h,p)=>{h!=0&&(this.a[f.DEPRIORITIZE_BUFFS]||this.m&&(this.m.a[r]+=h,c(h,p)))},buffTeam:(h,p)=>{h!=0&&(this.a[r]+=h,l(h,p),this.m&&(this.m.a[r]+=h,c(h,p)))},buffDual:(h,p)=>{h!=0&&(this.a[f.DEPRIORITIZE_BUFFS]||(this.a[r]+=h,l(h,p),this.m&&(this.m.a[r]+=h,c(h,p))))},buffBaseDual:(h,p)=>{h!=0&&(this.a[r]+=h,l(h,p),this.m&&(this.m.a[r]+=h,c(h,p)))},buffBaseDualDynamic:(h,p,S,D)=>{if(!(h<.001)){this.a[r]+=h,l(h,p),this.m&&(this.m.a[r]+=h,c(h,p));for(const E of S.conditionalRegistry[vr[s]]??[])Ut(E,this,S,D)}},multiply:(h,p)=>{this.a[r]*=h,l(h,p)},multiplyTeam:(h,p)=>{this.a[r]*=h,l(h,p),this.m&&(this.m.a[r]*=h,c(h,p))},buffDynamic:(h,p,S,D)=>{if(!(h<.001)){this.a[r]+=h,l(h,p);for(const E of S.conditionalRegistry[vr[s]]||[])Ut(E,this,S,D)}},set:(h,p)=>{this.a[r]=h,d(h,p)},config:(h,p)=>{this.a[r]=h,d(h,p),this.m&&(this.m.a[r]=h,u(h,p))},get:()=>this.a[r]},writable:!1,enumerable:!0,configurable:!0}),Object.defineProperty(this,`$${s}`,{get:()=>this.a[r],enumerable:!0,configurable:!0})}),Object.defineProperty(this,"#show",{get:()=>this.toComputedStatsObject(),enumerable:!0,configurable:!0})}setPrecompute(t){this.a.set(t),this.buffs=[],this.buffsMemo=[]}tracePrecompute(t){this.buffs=t.buffs,this.buffsMemo=t.buffsMemo}setBasic(t){this.c=t}get(t){return this.a[t]}toComputedStatsObject(){return yd(this.a)}}function yd(e){const t={};for(const n in f){const o=n,s=Pd[o]??o,r=f[o];t[s]=e[r]}return t}function xr(){return Float32Array.from(Object.values(Vn))}const Pd={ATK_P:a.ATK_P,ATK:a.ATK,BE:a.BE,CD:a.CD,CR:a.CR,DEF_P:a.DEF_P,DEF:a.DEF,EHR:a.EHR,ERR:a.ERR,FIRE_DMG_BOOST:a.Fire_DMG,HP_P:a.HP_P,HP:a.HP,ICE_DMG_BOOST:a.Ice_DMG,IMAGINARY_DMG_BOOST:a.Imaginary_DMG,LIGHTNING_DMG_BOOST:a.Lightning_DMG,OHB:a.OHB,PHYSICAL_DMG_BOOST:a.Physical_DMG,QUANTUM_DMG_BOOST:a.Quantum_DMG,RES:a.RES,SPD_P:a.SPD_P,SPD:a.SPD,WIND_DMG_BOOST:a.Wind_DMG},vr={ATK_P:a.ATK_P,ATK:a.ATK,BE:a.BE,CD:a.CD,CR:a.CR,DEF_P:a.DEF_P,DEF:a.DEF,EHR:a.EHR,ERR:a.ERR,FIRE_DMG_BOOST:a.Fire_DMG,HP_P:a.HP_P,HP:a.HP,ICE_DMG_BOOST:a.Ice_DMG,IMAGINARY_DMG_BOOST:a.Imaginary_DMG,LIGHTNING_DMG_BOOST:a.Lightning_DMG,OHB:a.OHB,PHYSICAL_DMG_BOOST:a.Physical_DMG,QUANTUM_DMG_BOOST:a.Quantum_DMG,RES:a.RES,SPD_P:a.SPD_P,SPD:a.SPD,WIND_DMG_BOOST:a.Wind_DMG},e1={[un.Physical]:f.PHYSICAL_RES_PEN,[un.Fire]:f.FIRE_RES_PEN,[un.Ice]:f.ICE_RES_PEN,[un.Lightning]:f.LIGHTNING_RES_PEN,[un.Wind]:f.WIND_RES_PEN,[un.Quantum]:f.QUANTUM_RES_PEN,[un.Imaginary]:f.IMAGINARY_RES_PEN};function t1(e,t){return e.a[e1[t]]}const Id={[a.Physical_DMG]:f.PHYSICAL_DMG_BOOST,[a.Fire_DMG]:f.FIRE_DMG_BOOST,[a.Ice_DMG]:f.ICE_DMG_BOOST,[a.Lightning_DMG]:f.LIGHTNING_DMG_BOOST,[a.Wind_DMG]:f.WIND_DMG_BOOST,[a.Quantum_DMG]:f.QUANTUM_DMG_BOOST,[a.Imaginary_DMG]:f.IMAGINARY_DMG_BOOST};function a1(e,t){return e.a[Id[t]]}function sc(e,t,n){const o=Id[t];e.a[o]+=n}const Gt={[a.ATK_P]:f.ATK_P,[a.ATK]:f.ATK,[a.BE]:f.BE,[a.CD]:f.CD,[a.CR]:f.CR,[a.DEF_P]:f.DEF_P,[a.DEF]:f.DEF,[a.EHR]:f.EHR,[a.ERR]:f.ERR,[a.Fire_DMG]:f.FIRE_DMG_BOOST,[a.HP_P]:f.HP_P,[a.HP]:f.HP,[a.Ice_DMG]:f.ICE_DMG_BOOST,[a.Imaginary_DMG]:f.IMAGINARY_DMG_BOOST,[a.Lightning_DMG]:f.LIGHTNING_DMG_BOOST,[a.OHB]:f.OHB,[a.Physical_DMG]:f.PHYSICAL_DMG_BOOST,[a.Quantum_DMG]:f.QUANTUM_DMG_BOOST,[a.RES]:f.RES,[a.SPD_P]:f.SPD_P,[a.SPD]:f.SPD,[a.Wind_DMG]:f.WIND_DMG_BOOST};var ss=(e=>(e[e.MAIN=0]="MAIN",e[e.MEMO=1]="MEMO",e[e.DUAL=2]="DUAL",e[e.TEAM=3]="TEAM",e[e.SINGLE=4]="SINGLE",e))(ss||{});function Se(e,t,n,o){switch(e){case 0:t.buff(n,o);break;case 1:t.buffMemo(n,o);break;case 2:t.buffDual(n,o);break;case 3:t.buffTeam(n,o);break;case 4:t.buffSingle(n,o);break}}function z5(e){return~e}function U5(e,t,n,o,s=0){n!=0&&(t&e.a[f.BASIC_DMG_TYPE]&&Se(s,e.BASIC_TRUE_DMG_MODIFIER,n,o),t&e.a[f.SKILL_DMG_TYPE]&&Se(s,e.SKILL_TRUE_DMG_MODIFIER,n,o),t&e.a[f.ULT_DMG_TYPE]&&Se(s,e.ULT_TRUE_DMG_MODIFIER,n,o),t&e.a[f.FUA_DMG_TYPE]&&Se(s,e.FUA_TRUE_DMG_MODIFIER,n,o),t&e.a[f.DOT_DMG_TYPE]&&Se(s,e.DOT_TRUE_DMG_MODIFIER,n,o),t&e.a[f.BREAK_DMG_TYPE]&&Se(s,e.BREAK_TRUE_DMG_MODIFIER,n,o),t&e.a[f.MEMO_SKILL_DMG_TYPE]&&Se(s,e.MEMO_SKILL_TRUE_DMG_MODIFIER,n,o),t&e.a[f.MEMO_TALENT_DMG_TYPE]&&Se(s,e.MEMO_TALENT_TRUE_DMG_MODIFIER,n,o))}function We(e,t,n,o,s=0){n!=0&&(t&e.a[f.BASIC_DMG_TYPE]&&Se(s,e.BASIC_DMG_BOOST,n,o),t&e.a[f.SKILL_DMG_TYPE]&&Se(s,e.SKILL_DMG_BOOST,n,o),t&e.a[f.ULT_DMG_TYPE]&&Se(s,e.ULT_DMG_BOOST,n,o),t&e.a[f.FUA_DMG_TYPE]&&Se(s,e.FUA_DMG_BOOST,n,o),t&e.a[f.DOT_DMG_TYPE]&&Se(s,e.DOT_DMG_BOOST,n,o),t&e.a[f.BREAK_DMG_TYPE]&&Se(s,e.BREAK_DMG_BOOST,n,o),t&e.a[f.MEMO_SKILL_DMG_TYPE]&&Se(s,e.MEMO_SKILL_DMG_BOOST,n,o),t&e.a[f.MEMO_TALENT_DMG_TYPE]&&Se(s,e.MEMO_TALENT_DMG_BOOST,n,o),t&e.a[f.ADDITIONAL_DMG_TYPE]&&Se(s,e.ADDITIONAL_DMG_BOOST,n,o),t&e.a[f.SUPER_BREAK_DMG_TYPE]&&Se(s,e.SUPER_BREAK_DMG_BOOST,n,o))}function n1(e,t,n,o,s=0){n!=0&&(t&e.a[f.BASIC_DMG_TYPE]&&Se(s,e.BASIC_VULNERABILITY,n,o),t&e.a[f.SKILL_DMG_TYPE]&&Se(s,e.SKILL_VULNERABILITY,n,o),t&e.a[f.ULT_DMG_TYPE]&&Se(s,e.ULT_VULNERABILITY,n,o),t&e.a[f.FUA_DMG_TYPE]&&Se(s,e.FUA_VULNERABILITY,n,o),t&e.a[f.DOT_DMG_TYPE]&&Se(s,e.DOT_VULNERABILITY,n,o),t&e.a[f.BREAK_DMG_TYPE]&&Se(s,e.BREAK_VULNERABILITY,n,o),t&e.a[f.MEMO_SKILL_DMG_TYPE]&&Se(s,e.MEMO_SKILL_VULNERABILITY,n,o),t&e.a[f.MEMO_TALENT_DMG_TYPE]&&Se(s,e.MEMO_TALENT_VULNERABILITY,n,o),t&e.a[f.SUPER_BREAK_DMG_TYPE]&&Se(s,e.SUPER_BREAK_VULNERABILITY,n,o))}function X5(e,t,n,o,s=0){n!=0&&(t&e.a[f.BASIC_DMG_TYPE]&&Se(s,e.BASIC_RES_PEN,n,o),t&e.a[f.SKILL_DMG_TYPE]&&Se(s,e.SKILL_RES_PEN,n,o),t&e.a[f.ULT_DMG_TYPE]&&Se(s,e.ULT_RES_PEN,n,o),t&e.a[f.FUA_DMG_TYPE]&&Se(s,e.FUA_RES_PEN,n,o),t&e.a[f.DOT_DMG_TYPE]&&Se(s,e.DOT_RES_PEN,n,o),t&e.a[f.BREAK_DMG_TYPE]&&Se(s,e.BREAK_RES_PEN,n,o),t&e.a[f.MEMO_SKILL_DMG_TYPE]&&Se(s,e.MEMO_SKILL_RES_PEN,n,o),t&e.a[f.MEMO_TALENT_DMG_TYPE]&&Se(s,e.MEMO_TALENT_RES_PEN,n,o))}function zn(e,t,n,o,s=0){n!=0&&(t&e.a[f.BASIC_DMG_TYPE]&&Se(s,e.BASIC_DEF_PEN,n,o),t&e.a[f.SKILL_DMG_TYPE]&&Se(s,e.SKILL_DEF_PEN,n,o),t&e.a[f.ULT_DMG_TYPE]&&Se(s,e.ULT_DEF_PEN,n,o),t&e.a[f.FUA_DMG_TYPE]&&Se(s,e.FUA_DEF_PEN,n,o),t&e.a[f.DOT_DMG_TYPE]&&Se(s,e.DOT_DEF_PEN,n,o),t&e.a[f.BREAK_DMG_TYPE]&&Se(s,e.BREAK_DEF_PEN,n,o),t&e.a[f.MEMO_SKILL_DMG_TYPE]&&Se(s,e.MEMO_SKILL_DEF_PEN,n,o),t&e.a[f.MEMO_TALENT_DMG_TYPE]&&Se(s,e.MEMO_TALENT_DEF_PEN,n,o),t&e.a[f.SUPER_BREAK_DMG_TYPE]&&Se(s,e.SUPER_BREAK_DEF_PEN,n,o))}function Y5(e,t,n,o,s=0){n!=0&&(t&e.a[f.BASIC_DMG_TYPE]&&Se(s,e.BASIC_CR_BOOST,n,o),t&e.a[f.SKILL_DMG_TYPE]&&Se(s,e.SKILL_CR_BOOST,n,o),t&e.a[f.ULT_DMG_TYPE]&&Se(s,e.ULT_CR_BOOST,n,o),t&e.a[f.FUA_DMG_TYPE]&&Se(s,e.FUA_CR_BOOST,n,o),t&e.a[f.MEMO_SKILL_DMG_TYPE]&&Se(s,e.MEMO_SKILL_CR_BOOST,n,o),t&e.a[f.MEMO_TALENT_DMG_TYPE]&&Se(s,e.MEMO_TALENT_CR_BOOST,n,o))}function i1(e,t,n,o,s=0){n!=0&&(t&e.a[f.BASIC_DMG_TYPE]&&Se(s,e.BASIC_CD_BOOST,n,o),t&e.a[f.SKILL_DMG_TYPE]&&Se(s,e.SKILL_CD_BOOST,n,o),t&e.a[f.ULT_DMG_TYPE]&&Se(s,e.ULT_CD_BOOST,n,o),t&e.a[f.FUA_DMG_TYPE]&&Se(s,e.FUA_CD_BOOST,n,o),t&e.a[f.MEMO_SKILL_DMG_TYPE]&&Se(s,e.MEMO_SKILL_CD_BOOST,n,o),t&e.a[f.MEMO_TALENT_DMG_TYPE]&&Se(s,e.MEMO_TALENT_CD_BOOST,n,o))}const s1=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.CollapsingSky"),{SOURCE_LC:o}=v.lightCone("20002"),s=[.2,.25,.3,.35,.4],r={basicSkillDmgBuff:!0},l={basicSkillDmgBuff:{lc:!0,formItem:"switch",id:"basicSkillDmgBuff",text:n("Content.basicSkillDmgBuff.text"),content:n("Content.basicSkillDmgBuff.content",{DmgBuff:C.precisionRound(100*s[e])})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,d,u)=>{const h=d.lightConeConditionals;We(c,Rn|jt,h.basicSkillDmgBuff?s[e]:0,o)},finalizeCalculations:()=>{}}},o1=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.Cornucopia"),{SOURCE_LC:o}=v.lightCone("20001"),s=[.12,.15,.18,.21,.24],r={healingBuff:!0},l={healingBuff:{lc:!0,id:"healingBuff",formItem:"switch",text:n("Content.healingBuff.text"),content:n("Content.healingBuff.content",{HealingBuff:C.precisionRound(100*s[e])})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,d,u)=>{const h=d.lightConeConditionals;c.SKILL_OHB.buff(h.healingBuff?s[e]:0,o),c.ULT_OHB.buff(h.healingBuff?s[e]:0,o)},finalizeCalculations:()=>{}}},r1=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.DartingArrow"),{SOURCE_LC:o}=v.lightCone("20007"),s=[.24,.3,.36,.42,.48],r={defeatedEnemyAtkBuff:!0},l={defeatedEnemyAtkBuff:{lc:!0,id:"defeatedEnemyAtkBuff",formItem:"switch",text:n("Content.defeatedEnemyAtkBuff.text"),content:n("Content.defeatedEnemyAtkBuff.content",{AtkBuff:C.precisionRound(100*s[e])})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,d,u)=>{const h=d.lightConeConditionals;c.ATK_P.buff(h.defeatedEnemyAtkBuff?s[e]:0,o)},finalizeCalculations:()=>{}}},l1=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.DataBank"),{SOURCE_LC:o}=v.lightCone("20006"),s=[.28,.35,.42,.49,.56],r={ultDmgBuff:!0},l={ultDmgBuff:{lc:!0,id:"ultDmgBuff",formItem:"switch",text:n("Content.ultDmgBuff.text"),content:n("Content.ultDmgBuff.content",{DmgBuff:C.precisionRound(100*s[e])})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,d,u)=>{const h=d.lightConeConditionals;We(c,xt,h.ultDmgBuff?s[e]:0,o)},finalizeCalculations:()=>{}}},c1=()=>({content:()=>[],defaults:()=>({}),precomputeEffects:()=>{},finalizeCalculations:()=>{}}),d1=()=>({content:()=>[],defaults:()=>({}),precomputeEffects:()=>{},finalizeCalculations:()=>{}}),u1=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.HiddenShadow");v.lightCone("20018");const o=[.6,.75,.9,1.05,1.2],s={basicAtkBuff:!0},r={basicAtkBuff:{lc:!0,id:"basicAtkBuff",formItem:"switch",text:n("Content.basicAtkBuff.text"),content:n("Content.basicAtkBuff.content",{MultiplierBonus:C.precisionRound(100*o[e])})}};return{content:()=>Object.values(r),defaults:()=>s,precomputeEffects:(l,c,d)=>{c.lightConeConditionals},finalizeCalculations:(l,c,d)=>{const u=c.lightConeConditionals;l.BASIC_ADDITIONAL_DMG.buff((u.basicAtkBuff?o[e]:0)*l.a[f.ATK],v.NONE)},gpuFinalizeCalculations:(l,c)=>{const d=l.lightConeConditionals;return`
if (${ki(d.basicAtkBuff)}) {
  x.BASIC_ADDITIONAL_DMG += ${o[e]} * x.ATK;
}
      `}}},m1=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.Loop"),{SOURCE_LC:o}=v.lightCone("20011"),s=[.24,.3,.36,.42,.48],r={enemySlowedDmgBuff:!0},l={enemySlowedDmgBuff:{lc:!0,id:"enemySlowedDmgBuff",formItem:"switch",text:n("Content.enemySlowedDmgBuff.text"),content:n("Content.enemySlowedDmgBuff.content",{DmgBuff:C.precisionRound(100*s[e])})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,d,u)=>{const h=d.lightConeConditionals;c.ELEMENTAL_DMG.buff(h.enemySlowedDmgBuff?s[e]:0,o)},finalizeCalculations:()=>{}}},h1=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.Mediation"),{SOURCE_LC:o}=v.lightCone("20019"),s=[12,14,16,18,20],r={initialSpdBuff:!1},l={initialSpdBuff:!1},c={initialSpdBuff:{lc:!0,id:"initialSpdBuff",formItem:"switch",text:n("Content.initialSpdBuff.text"),content:n("Content.initialSpdBuff.content",{SpdBuff:s[e]})}},d={initialSpdBuff:c.initialSpdBuff};return{content:()=>Object.values(c),teammateContent:()=>Object.values(d),defaults:()=>r,teammateDefaults:()=>l,precomputeEffects:()=>{},precomputeMutualEffects:(u,h,p)=>{const S=h.lightConeConditionals;u.SPD.buffTeam(S.initialSpdBuff?s[e]:0,o)},finalizeCalculations:()=>{}}},f1=()=>({content:()=>[],defaults:()=>({}),precomputeEffects:()=>{},finalizeCalculations:()=>{}}),p1=()=>({content:()=>[],defaults:()=>({}),precomputeEffects:()=>{},finalizeCalculations:()=>{}}),g1=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.MutualDemise"),{SOURCE_LC:o}=v.lightCone("20016"),s=[.12,.15,.18,.21,.24],r={selfHp80CrBuff:!0},l={selfHp80CrBuff:{lc:!0,id:"selfHp80CrBuff",formItem:"switch",text:n("Content.selfHp80CrBuff.text"),content:n("Content.selfHp80CrBuff.content",{CritBuff:C.precisionRound(100*s[e])})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,d,u)=>{const h=d.lightConeConditionals;c.CR.buff(h.selfHp80CrBuff?s[e]:0,o)},finalizeCalculations:()=>{}}},S1=()=>({content:()=>[],defaults:()=>({}),precomputeEffects:()=>{},finalizeCalculations:()=>{}}),b1=()=>({content:()=>[],defaults:()=>({}),precomputeEffects:()=>{},finalizeCalculations:()=>{}}),D1=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.Reminiscence"),{SOURCE_LC:o}=v.lightCone("20022"),s=[.08,.09,.1,.11,.12],r={dmgStacks:4},l={dmgStacks:{lc:!0,id:"dmgStacks",formItem:"slider",text:n("Content.dmgStacks.text"),content:n("Content.dmgStacks.content",{DmgBuff:C.precisionRound(s[e]*100)}),min:0,max:4}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,d,u)=>{const h=d.lightConeConditionals;c.ELEMENTAL_DMG.buffDual(h.dmgStacks*s[e],o)},finalizeCalculations:()=>{}}},R1=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.Sagacity"),{SOURCE_LC:o}=v.lightCone("20020"),s=[.24,.3,.36,.42,.48],r={postUltAtkBuff:!0},l={postUltAtkBuff:{lc:!0,id:"postUltAtkBuff",formItem:"switch",text:n("Content.postUltAtkBuff.text"),content:n("Content.postUltAtkBuff.content",{AtkBuff:C.precisionRound(100*s[e])})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,d,u)=>{const h=d.lightConeConditionals;c.ATK_P.buff(h.postUltAtkBuff?s[e]:0,o)},finalizeCalculations:()=>{}}},E1=()=>({content:()=>[],defaults:()=>({}),precomputeEffects:()=>{},finalizeCalculations:()=>{}}),C1=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.ShatteredHome"),{SOURCE_LC:o}=v.lightCone("20009"),s=[.2,.25,.3,.35,.4],r={enemyHp50Buff:!0},l={enemyHp50Buff:{lc:!0,id:"enemyHp50Buff",formItem:"switch",text:n("Content.enemyHp50Buff.text"),content:n("Content.enemyHp50Buff.content",{DmgBuff:C.precisionRound(100*s[e])})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,d,u)=>{const h=d.lightConeConditionals;c.ELEMENTAL_DMG.buff(h.enemyHp50Buff?s[e]:0,o)},finalizeCalculations:()=>{}}},T1=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.Void"),{SOURCE_LC:o}=v.lightCone("20004"),s=[.2,.25,0,30,.35,.4],r={initialEhrBuff:!0},l={initialEhrBuff:{lc:!0,id:"initialEhrBuff",formItem:"switch",text:n("Content.initialEhrBuff.text"),content:n("Content.initialEhrBuff.content",{EhrBuff:C.precisionRound(100*s[e])})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,d,u)=>{const h=d.lightConeConditionals;c.EHR.buff(h.initialEhrBuff?s[e]:0,o)},finalizeCalculations:()=>{}}},y1=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.AfterTheCharmonyFall"),{SOURCE_LC:o}=v.lightCone("21045"),s=[.08,.1,.12,.14,.16],r={spdBuff:!0},l={spdBuff:{lc:!0,id:"spdBuff",formItem:"switch",text:n("Content.spdBuff.text"),content:n("Content.spdBuff.content",{SpdBuff:C.precisionRound(100*s[e])})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,d,u)=>{const h=d.lightConeConditionals;c.SPD_P.buff(h.spdBuff?s[e]:0,o)},finalizeCalculations:()=>{}}},P1=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.ASecretVow"),{SOURCE_LC:o}=v.lightCone("21012"),s=[.2,.25,.3,.35,.4],r={enemyHpHigherDmgBoost:!0},l={enemyHpHigherDmgBoost:{lc:!0,id:"enemyHpHigherDmgBoost",formItem:"switch",text:n("Content.enemyHpHigherDmgBoost.text"),content:n("Content.enemyHpHigherDmgBoost.content",{DmgBuff:C.precisionRound(100*s[e])})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,d,u)=>{const h=d.lightConeConditionals;c.ELEMENTAL_DMG.buff(s[e],o),c.ELEMENTAL_DMG.buff(h.enemyHpHigherDmgBoost?s[e]:0,o)},finalizeCalculations:()=>{}}},I1=()=>({content:()=>[],defaults:()=>({}),precomputeEffects:()=>{},finalizeCalculations:()=>{}}),B1=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.BoundlessChoreo"),{SOURCE_LC:o}=v.lightCone("21044"),s=[.24,.3,.36,.42,.48],r={enemyDefReducedSlowed:!0},l={enemyDefReducedSlowed:{lc:!0,id:"enemyDefReducedSlowed",formItem:"switch",text:n("Content.enemyDefReducedSlowed.text"),content:n("Content.enemyDefReducedSlowed.content",{CritBuff:C.precisionRound(100*s[e])})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,d,u)=>{const h=d.lightConeConditionals;c.CD.buff(h.enemyDefReducedSlowed?s[e]:0,o)},finalizeCalculations:()=>{}}},G1=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.CarveTheMoonWeaveTheClouds"),{SOURCE_LC:o}=v.lightCone("21032"),s=[.1,.125,.15,.175,.2],r=[.12,.15,.18,.21,.24],l=[.06,.075,.09,.105,.12],c={atkBuffActive:!0,cdBuffActive:!1,errBuffActive:!1},d={atkBuffActive:!0,cdBuffActive:!1,errBuffActive:!1},u={atkBuffActive:{lc:!0,id:"atkBuffActive",formItem:"switch",text:n("Content.atkBuffActive.text"),content:n("Content.atkBuffActive.content",{AtkBuff:C.precisionRound(100*s[e]),CritBuff:C.precisionRound(100*r[e]),RegenBuff:C.precisionRound(100*l[e])})},cdBuffActive:{lc:!0,id:"cdBuffActive",formItem:"switch",text:n("Content.cdBuffActive.text"),content:n("Content.cdBuffActive.content",{AtkBuff:C.precisionRound(100*s[e]),CritBuff:C.precisionRound(100*r[e]),RegenBuff:C.precisionRound(100*l[e])})},errBuffActive:{lc:!0,id:"errBuffActive",formItem:"switch",text:n("Content.errBuffActive.text"),content:n("Content.errBuffActive.content",{AtkBuff:C.precisionRound(100*s[e]),CritBuff:C.precisionRound(100*r[e]),RegenBuff:C.precisionRound(100*l[e])})}},h={atkBuffActive:u.atkBuffActive,cdBuffActive:u.cdBuffActive,errBuffActive:u.errBuffActive};return{content:()=>Object.values(u),teammateContent:()=>Object.values(h),defaults:()=>c,teammateDefaults:()=>d,precomputeEffects:()=>{},precomputeMutualEffects:(p,S,D)=>{const E=S.lightConeConditionals;p.ATK_P.buffTeam(E.atkBuffActive?s[e]:0,o),p.CD.buffTeam(E.cdBuffActive?r[e]:0,o),p.ERR.buffTeam(E.errBuffActive?l[e]:0,o)},finalizeCalculations:()=>{}}},M1=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.ConcertForTwo"),{SOURCE_LC:o}=v.lightCone("21043"),s=[.04,.05,.06,.07,.08],r={teammateShieldStacks:4},l={teammateShieldStacks:{lc:!0,id:"teammateShieldStacks",formItem:"slider",text:n("Content.teammateShieldStacks.text"),content:n("Content.teammateShieldStacks.content",{DmgBuff:C.precisionRound(100*s[e])}),min:0,max:4}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,d,u)=>{const h=d.lightConeConditionals;c.ELEMENTAL_DMG.buff(h.teammateShieldStacks*s[e],o)},finalizeCalculations:()=>{}}},x1=()=>({content:()=>[],defaults:()=>({}),precomputeEffects:()=>{},finalizeCalculations:()=>{}}),v1=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.DayOneOfMyNewLife"),{SOURCE_LC:o}=v.lightCone("21002"),s=[.08,.09,.1,.11,.12],r={dmgResBuff:!0},l={dmgResBuff:!0},c={dmgResBuff:{lc:!0,id:"dmgResBuff",formItem:"switch",text:n("Content.dmgResBuff.text"),content:n("Content.dmgResBuff.content",{ResBuff:C.precisionRound(100*s[e])})}},d={dmgResBuff:c.dmgResBuff};return{content:()=>Object.values(c),teammateContent:()=>Object.values(d),defaults:()=>r,teammateDefaults:()=>l,precomputeEffects:()=>{},precomputeMutualEffects:(u,h,p)=>{const S=h.lightConeConditionals;u.DMG_RED_MULTI.multiplyTeam(S.dmgResBuff?1-s[e]:1,o)},finalizeCalculations:()=>{}}},_1=(e,t)=>{const{SOURCE_LC:n}=v.lightCone("21039"),o=[.008,.009,.01,.011,.012],s=[.32,.36,.4,.44,.48];return{content:()=>[],defaults:()=>({}),precomputeEffects:()=>{},finalizeCalculations:(r,l,c)=>{r.ELEMENTAL_DMG.buff(Math.min(s[e],Math.floor(r.a[f.DEF]/100)*o[e]),n)},gpuFinalizeCalculations:()=>`
x.ELEMENTAL_DMG += min(${s[e]}, floor(x.DEF / 100) * ${o[e]});
      `}},A1=()=>({content:()=>[],defaults:()=>({}),precomputeEffects:()=>{},finalizeCalculations:()=>{}}),L1=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.DreamvilleAdventure"),{SOURCE_LC:o}=v.lightCone("21036"),s=[.12,.14,.16,.18,.2],r={ultDmgBuff:!1,skillDmgBuff:!1,basicDmgBuff:!1},l={ultDmgBuff:!1,skillDmgBuff:!1,basicDmgBuff:!1},c={ultDmgBuff:{lc:!0,id:"ultDmgBuff",formItem:"switch",text:n("Content.ultDmgBuff.text"),content:n("Content.ultDmgBuff.content",{DmgBuff:C.precisionRound(100*s[e])})},skillDmgBuff:{lc:!0,id:"skillDmgBuff",formItem:"switch",text:n("Content.skillDmgBuff.text"),content:n("Content.skillDmgBuff.content",{DmgBuff:C.precisionRound(100*s[e])})},basicDmgBuff:{lc:!0,id:"basicDmgBuff",formItem:"switch",text:n("Content.basicDmgBuff.text"),content:n("Content.basicDmgBuff.content",{DmgBuff:C.precisionRound(100*s[e])})}},d={ultDmgBuff:c.ultDmgBuff,skillDmgBuff:c.skillDmgBuff,basicDmgBuff:c.basicDmgBuff};return{content:()=>Object.values(c),teammateContent:()=>Object.values(d),defaults:()=>r,teammateDefaults:()=>l,precomputeEffects:()=>{},precomputeMutualEffects:(u,h,p)=>{const S=h.lightConeConditionals;We(u,Rn,S.basicDmgBuff?s[e]:0,o,ss.TEAM),We(u,jt,S.skillDmgBuff?s[e]:0,o,ss.TEAM),We(u,xt,S.ultDmgBuff?s[e]:0,o,ss.TEAM)},finalizeCalculations:()=>{}}},F1=(e,t)=>{const{SOURCE_LC:n}=v.lightCone("21008"),o=[.24,.3,.36,.42,.48];return{content:()=>[],defaults:()=>({}),precomputeEffects:s=>{We(s,Po,o[e],n)},finalizeCalculations:()=>{}}},H1=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.Fermata"),{SOURCE_LC:o}=v.lightCone("21022"),s=[.16,.2,.24,.28,.32],r={enemyShockWindShear:!0},l={enemyShockWindShear:{lc:!0,id:"enemyShockWindShear",formItem:"switch",text:n("Content.enemyShockWindShear.text"),content:n("Content.enemyShockWindShear.content",{DmgBuff:C.precisionRound(100*s[e])})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,d,u)=>{const h=d.lightConeConditionals;c.ELEMENTAL_DMG.buff(h.enemyShockWindShear?s[e]:0,o)},finalizeCalculations:()=>{}}},w1=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.FinalVictor"),{SOURCE_LC:o}=v.lightCone("21037"),s=[.08,.09,.1,.11,.12],r={goodFortuneStacks:4},l={goodFortuneStacks:{lc:!0,id:"goodFortuneStacks",formItem:"slider",text:n("Content.goodFortuneStacks.text"),content:n("Content.goodFortuneStacks.content",{CritBuff:C.precisionRound(100*s[e])}),min:0,max:4}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,d,u)=>{const h=d.lightConeConditionals;c.CD.buff(h.goodFortuneStacks*s[e],o)},finalizeCalculations:()=>{}}},O1=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.FlamesAfar"),{SOURCE_LC:o}=v.lightCone("21038"),s=[.25,.3125,.375,.4375,.5],r={dmgBuff:!0},l={dmgBuff:{lc:!0,id:"dmgBuff",formItem:"switch",text:n("Content.dmgBuff.text"),content:n("Content.dmgBuff.content",{DmgBuff:C.precisionRound(100*s[e])})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,d,u)=>{const h=d.lightConeConditionals;c.ELEMENTAL_DMG.buff(h.dmgBuff?s[e]:0,o)},finalizeCalculations:()=>{}}},k1=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.ForTomorrowsJourney"),{SOURCE_LC:o}=v.lightCone("22002"),s=[.18,.21,.24,.27,.3],r={ultDmgBuff:!0},l={ultDmgBuff:{lc:!0,id:"ultDmgBuff",formItem:"switch",text:n("Content.ultDmgBuff.text"),content:n("Content.ultDmgBuff.content",{DmgBuff:C.precisionRound(100*s[e])})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,d,u)=>{const h=d.lightConeConditionals;c.ELEMENTAL_DMG.buff(h.ultDmgBuff?s[e]:0,o)},finalizeCalculations:()=>{}}},K1=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.GeniusesGreetings"),{SOURCE_LC:o}=v.lightCone("21051"),s=[.2,.25,.3,.35,.4],r={basicDmgBoost:!0},l={basicDmgBoost:{lc:!0,id:"basicDmgBoost",formItem:"switch",text:n("Content.basicDmgBoost.text"),content:n("Content.basicDmgBoost.content",{DmgBuff:C.precisionRound(s[e]*100)})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,d,u)=>{const h=d.lightConeConditionals;c.BASIC_DMG_BOOST.buffDual(h.basicDmgBoost?s[e]:0,o)},finalizeCalculations:()=>{}}},j1=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.GeniusesRepose"),{SOURCE_LC:o}=v.lightCone("21020"),s=[.24,.3,.36,.42,.48],r={defeatedEnemyCdBuff:!0},l={defeatedEnemyCdBuff:{lc:!0,id:"defeatedEnemyCdBuff",formItem:"switch",text:n("Content.defeatedEnemyCdBuff.text"),content:n("Content.defeatedEnemyCdBuff.content",{DmgBuff:C.precisionRound(100*s[e])})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,d,u)=>{const h=d.lightConeConditionals;c.CD.buff(h.defeatedEnemyCdBuff?s[e]:0,o)},finalizeCalculations:()=>{}}},W1=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.GoodNightAndSleepWell"),{SOURCE_LC:o}=v.lightCone("21001"),s=[.12,.15,.18,.21,.24],r={debuffStacksDmgIncrease:3},l={debuffStacksDmgIncrease:{lc:!0,id:"debuffStacksDmgIncrease",formItem:"slider",text:n("Content.debuffStacksDmgIncrease.text"),content:n("Content.debuffStacksDmgIncrease.content",{DmgBuff:C.precisionRound(100*s[e])}),min:0,max:3}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,d,u)=>{const h=d.lightConeConditionals;c.ELEMENTAL_DMG.buff(h.debuffStacksDmgIncrease*s[e],o)},finalizeCalculations:()=>{}}},Z1=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.HeyOverHere"),{SOURCE_LC:o}=v.lightCone("22001"),s=[.16,.19,.22,.25,.28],r={postSkillHealBuff:!0},l={postSkillHealBuff:{lc:!0,id:"postSkillHealBuff",formItem:"switch",text:n("Content.postSkillHealBuff.text"),content:n("Content.postSkillHealBuff.content",{HealingBoost:C.precisionRound(100*s[e])})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,d,u)=>{const h=d.lightConeConditionals;c.OHB.buff(h.postSkillHealBuff?s[e]:0,o)},finalizeCalculations:()=>{}}},N1=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.IndeliblePromise"),{SOURCE_LC:o}=v.lightCone("21042"),s=[.15,.1875,.225,.2625,.3],r={crBuff:!0},l={crBuff:{lc:!0,id:"crBuff",formItem:"switch",text:n("Content.crBuff.text"),content:n("Content.crBuff.content",{CritBuff:C.precisionRound(100*s[e])})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,d,u)=>{const h=d.lightConeConditionals;c.CR.buff(h.crBuff?s[e]:0,o)},finalizeCalculations:()=>{}}},V1=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.ItsShowtime"),{SOURCE_LC:o}=v.lightCone("21041"),s=[.06,.07,.08,.09,.1],r=[.2,.24,.28,.32,.36],l={trickStacks:3},c={trickStacks:{lc:!0,id:"trickStacks",formItem:"slider",text:n("Content.trickStacks.text"),content:n("Content.trickStacks.content",{DmgBuff:C.precisionRound(100*s[e]),AtkBuff:C.precisionRound(100*r[e])}),min:0,max:3}};return{content:()=>Object.values(c),defaults:()=>l,precomputeEffects:(d,u,h)=>{const p=u.lightConeConditionals;d.ELEMENTAL_DMG.buff(p.trickStacks*s[e],o)},finalizeCalculations:()=>{},dynamicConditionals:[{id:"ItsShowtimeConversionConditional",type:Sa.ABILITY,activation:ea.SINGLE,dependsOn:[a.EHR],chainsTo:[a.ATK],condition:function(d,u,h){return d.a[f.EHR]>=.8},effect:function(d,u,h){d.ATK.buffDynamic(r[e]*h.baseATK,o,u,h)},gpu:function(d,u){return ba(this,`
if (
  (*p_state).ItsShowtimeConversionConditional == 0.0 &&
  x.EHR >= 0.80
) {
  (*p_state).ItsShowtimeConversionConditional = 1.0;
  (*p_x).ATK += ${r[e]} * baseATK;
}
    `)}}]}},z1=(e,t)=>{const{SOURCE_LC:n}=v.lightCone("21009"),o=[.16,.18,.2,.22,.24];return{content:()=>[],defaults:()=>({}),precomputeEffects:s=>{s.DMG_RED_MULTI.multiply(1-o[e],n)},finalizeCalculations:()=>{}}},U1=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.MakeTheWorldClamor"),{SOURCE_LC:o}=v.lightCone("21013"),s=[.32,.4,.48,.56,.64],r=[20,23,26,29,32],l={ultDmgBuff:!0},c={ultDmgBuff:{lc:!0,id:"ultDmgBuff",formItem:"switch",text:n("Content.ultDmgBuff.text"),content:n("Content.ultDmgBuff.content",{Energy:r[e],DmgBuff:C.precisionRound(100*s[e])})}};return{content:()=>Object.values(c),defaults:()=>l,precomputeEffects:(d,u,h)=>{const p=u.lightConeConditionals;We(d,xt,p.ultDmgBuff?s[e]:0,o)},finalizeCalculations:()=>{}}},X1=()=>({content:()=>[],defaults:()=>({}),precomputeEffects:()=>{},finalizeCalculations:()=>{}}),Y1=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.NinjaRecordSoundHunt"),{SOURCE_LC:o}=v.lightCone("22003"),s=[.18,.225,.27,.315,.36],r={cdBuff:!0},l={cdBuff:{lc:!0,id:"cdBuff",formItem:"switch",text:n("Content.cdBuff.text"),content:n("Content.cdBuff.content",{sValuesCd:C.precisionRound(100*s[e])})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,d,u)=>{const h=d.lightConeConditionals;c.CD.buff(h.cdBuff?s[e]:0,o)},finalizeCalculations:()=>{}}},J1=()=>({content:()=>[],defaults:()=>({}),precomputeEffects:()=>{},finalizeCalculations:()=>{}}),Q1=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.OnlySilenceRemains"),{SOURCE_LC:o}=v.lightCone("21003"),s=[.12,.15,.18,.21,.24],r={enemies2CrBuff:!0},l={enemies2CrBuff:{lc:!0,id:"enemies2CrBuff",formItem:"switch",text:n("Content.enemies2CrBuff.text"),content:n("Content.enemies2CrBuff.content",{CritBuff:C.precisionRound(100*s[e])})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,d,u)=>{const h=d.lightConeConditionals;c.CR.buff(h.enemies2CrBuff&&u.enemyCount<=2?s[e]:0,o)},finalizeCalculations:()=>{}}},$1=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.PastAndFuture"),{SOURCE_LC:o}=v.lightCone("21025"),s=[.16,.2,.24,.28,.32],r={postSkillDmgBuff:!0},l={postSkillDmgBuff:{lc:!0,id:"postSkillDmgBuff",formItem:"switch",text:n("Content.postSkillDmgBuff.text"),content:n("Content.postSkillDmgBuff.content",{DmgBuff:C.precisionRound(100*s[e])})}};return{content:()=>[],teammateContent:()=>Object.values(l),defaults:()=>({}),teammateDefaults:()=>r,precomputeEffects:()=>{},precomputeTeammateEffects:(c,d,u)=>{const h=d.lightConeConditionals;c.ELEMENTAL_DMG.buffSingle(h.postSkillDmgBuff?s[e]:0,o)},finalizeCalculations:()=>{}}};a.ATK_P+"",a.ATK+"",a.BE+"",a.CD+"",a.CR+"",a.DEF_P+"",a.DEF+"",a.EHR+"",a.ERR+"",a.HP_P+"",a.HP+"",a.OHB+"",a.RES+"",a.SPD_P+"",a.SPD+"";a.HP+"",a.ATK+"",a.DEF+"",a.SPD+"",a.CR+"",a.CD+"",a.EHR+"",a.BE+"",a.OHB+"",a.RES+"",a.ERR+"";const to={[a.HP]:{stat:a.HP,key:f.HP,property:"HP",unconvertibleProperty:"UNCONVERTIBLE_HP_BUFF",unconvertibleKey:f.UNCONVERTIBLE_HP_BUFF,percentStat:a.HP_P,percentKey:f.HP_P,baseProperty:"baseHP"},[a.ATK]:{stat:a.ATK,key:f.ATK,property:"ATK",unconvertibleProperty:"UNCONVERTIBLE_ATK_BUFF",unconvertibleKey:f.UNCONVERTIBLE_ATK_BUFF,percentStat:a.ATK_P,percentKey:f.ATK_P,baseProperty:"baseATK"},[a.DEF]:{stat:a.DEF,key:f.DEF,property:"DEF",unconvertibleProperty:"UNCONVERTIBLE_DEF_BUFF",unconvertibleKey:f.UNCONVERTIBLE_DEF_BUFF,percentStat:a.DEF_P,percentKey:f.DEF_P,baseProperty:"baseDEF"},[a.SPD]:{stat:a.SPD,key:f.SPD,property:"SPD",unconvertibleProperty:"UNCONVERTIBLE_SPD_BUFF",unconvertibleKey:f.UNCONVERTIBLE_SPD_BUFF,percentStat:a.SPD_P,percentKey:f.SPD_P,baseProperty:"baseSPD"},[a.CR]:{stat:a.CR,key:f.CR,property:"CR",unconvertibleKey:f.UNCONVERTIBLE_CR_BUFF,unconvertibleProperty:"UNCONVERTIBLE_CR_BUFF"},[a.CD]:{stat:a.CD,key:f.CD,property:"CD",unconvertibleKey:f.UNCONVERTIBLE_CD_BUFF,unconvertibleProperty:"UNCONVERTIBLE_CD_BUFF"},[a.EHR]:{stat:a.EHR,key:f.EHR,property:"EHR",unconvertibleKey:f.UNCONVERTIBLE_EHR_BUFF,unconvertibleProperty:"UNCONVERTIBLE_EHR_BUFF"},[a.BE]:{stat:a.BE,key:f.BE,property:"BE",unconvertibleKey:f.UNCONVERTIBLE_BE_BUFF,unconvertibleProperty:"UNCONVERTIBLE_BE_BUFF"},[a.OHB]:{stat:a.OHB,key:f.OHB,property:"OHB",unconvertibleKey:f.UNCONVERTIBLE_OHB_BUFF,unconvertibleProperty:"UNCONVERTIBLE_OHB_BUFF"},[a.RES]:{stat:a.RES,key:f.RES,property:"RES",unconvertibleKey:f.UNCONVERTIBLE_RES_BUFF,unconvertibleProperty:"UNCONVERTIBLE_RES_BUFF"},[a.ERR]:{stat:a.ERR,key:f.ERR,property:"ERR",unconvertibleKey:f.UNCONVERTIBLE_ERR_BUFF,unconvertibleProperty:"UNCONVERTIBLE_ERR_BUFF"}};a.HP,a.ATK,a.DEF,a.SPD,a.CR,a.CD,a.EHR,a.BE,a.OHB,a.RES,a.ERR;function q1(e,t,n,o,s,r,l,c){var P;const d=to[e],u=to[t],h=o.a[d.key],p=o.a[d.unconvertibleKey]??0,S=s.conditionalState[n.id]??0,D=h-p;if(D<=0)return;const E=Math.max(0,c(D)),y=E-S;s.conditionalState[n.id]=E,(P=o[u.unconvertibleProperty])==null||P.buff(y,l),o[u.property].buffDynamic(y,l,s,r)}function ef(e,t,n,o,s,r,l,c="true"){const d=to[e],u=to[t];return ba(n,`
if (!(${l})) {
  return;
}

let stateValue: f32 = (*p_state).${n.id};
let convertibleValue: f32 = x.${d.property} - x.${d.unconvertibleProperty};

if (!(${c}) || convertibleValue <= 0) {
  return;
}

let buffFull = max(0, ${r});
let buffDelta = buffFull - stateValue;

(*p_state).${n.id} += buffDelta;

(*p_x).${u.unconvertibleProperty} += buffDelta;
(*p_x).${u.property} += buffDelta;
`)}const tf=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.PerfectTiming"),{SOURCE_LC:o}=v.lightCone("21014"),s=[.33,.36,.39,.42,.45],r=[.15,.18,.21,.24,.27],l={resToHealingBoost:!0},c={resToHealingBoost:{lc:!0,id:"resToHealingBoost",formItem:"switch",text:n("Content.resToHealingBoost.text"),content:n("Content.resToHealingBoost.content",{Scaling:C.precisionRound(100*s[e]),Limit:C.precisionRound(100*r[e])})}};return{content:()=>Object.values(c),defaults:()=>l,precomputeEffects:()=>{},finalizeCalculations:(d,u)=>{},dynamicConditionals:[{id:"PerfectTimingConditional",type:Sa.ABILITY,activation:ea.CONTINUOUS,dependsOn:[a.RES],chainsTo:[a.OHB],condition:function(d,u,h){return u.lightConeConditionals.resToHealingBoost},effect:function(d,u,h){q1(a.RES,a.OHB,this,d,u,h,o,p=>Math.min(r[e],s[e]*p))},gpu:function(d,u){const h=d.lightConeConditionals;return ef(a.RES,a.OHB,this,d,u,`min(${r[e]}, ${s[e]} * convertibleValue)`,`${ki(h.resToHealingBoost)}`)}}]}},af=(e,t,n)=>{const o=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.PlanetaryRendezvous"),{SOURCE_LC:s}=v.lightCone("21011"),r=[.12,.15,.18,.21,.24],l={alliesSameElement:!0},c={alliesSameElement:!0},d={alliesSameElement:{lc:!0,id:"alliesSameElement",formItem:"switch",text:o("Content.alliesSameElement.text"),content:o("Content.alliesSameElement.content",{DmgBuff:C.precisionRound(100*r[e])})}},u={alliesSameElement:d.alliesSameElement};return{content:()=>Object.values(d),teammateContent:()=>Object.values(u),defaults:()=>l,teammateDefaults:()=>c,precomputeEffects:(h,p,S)=>{},precomputeMutualEffects:(h,p,S)=>{const D=p.lightConeConditionals;n.element==S.element&&h.ELEMENTAL_DMG.buffTeam(D.alliesSameElement?r[e]:0,s)},finalizeCalculations:()=>{}}},J5=(e,t,n,o)=>{if(e.c.sets.TheAshblazingGrandDuke>>2){const r=.06*t.setConditionals.valueTheAshblazingGrandDuke;return o-r}else return 0},_e=e=>function(t,n,o){return t>=e?o:n},Q5={SKILL_TALENT_3_ULT_BASIC_5:{basic:_e(5),skill:_e(3),ult:_e(5),talent:_e(3)},SKILL_BASIC_3_ULT_TALENT_5:{basic:_e(3),skill:_e(3),ult:_e(5),talent:_e(5)},ULT_TALENT_3_SKILL_BASIC_5:{basic:_e(5),skill:_e(5),ult:_e(3),talent:_e(3)},ULT_BASIC_3_SKILL_TALENT_5:{basic:_e(3),skill:_e(5),ult:_e(3),talent:_e(5)},SKILL_ULT_3_BASIC_TALENT_5:{basic:_e(5),skill:_e(3),ult:_e(3),talent:_e(5)},SKILL_BASIC_MEMO_TALENT_3_ULT_TALENT_MEMO_SKILL_5:{basic:_e(3),skill:_e(3),ult:_e(5),talent:_e(5),memoTalent:_e(3),memoSkill:_e(5)},SKILL_TALENT_MEMO_TALENT_3_ULT_BASIC_MEMO_SKILL_5:{basic:_e(5),skill:_e(3),ult:_e(5),talent:_e(3),memoTalent:_e(3),memoSkill:_e(5)},ULT_BASIC_MEMO_TALENT_3_SKILL_TALENT_MEMO_SKILL_5:{basic:_e(3),skill:_e(5),ult:_e(3),talent:_e(5),memoTalent:_e(3),memoSkill:_e(5)}};function Bd(e,t){var n,o,s;return(e.path==t?1:0)+(((n=e.teammate0Metadata)==null?void 0:n.path)==t?1:0)+(((o=e.teammate1Metadata)==null?void 0:o.path)==t?1:0)+(((s=e.teammate2Metadata)==null?void 0:s.path)==t?1:0)}function $5(e,t){var n,o,s;return(e.element==t?1:0)+(((n=e.teammate0Metadata)==null?void 0:n.element)==t?1:0)+(((o=e.teammate1Metadata)==null?void 0:o.element)==t?1:0)+(((s=e.teammate2Metadata)==null?void 0:s.element)==t?1:0)}function q5(e,t){return e.path==t}const nf=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.PoisedToBloom"),{SOURCE_LC:o}=v.lightCone("21046"),s=[.16,.2,.24,.28,.32],r={cdBuff:!0},l={cdBuff:!0},c={cdBuff:{lc:!0,id:"cdBuff",formItem:"switch",text:n("Content.cdBuff.text"),content:n("Content.cdBuff.content",{CritBuff:C.precisionRound(100*s[e])})}},d={cdBuff:c.cdBuff};return{content:()=>Object.values(c),teammateContent:()=>Object.values(d),defaults:()=>r,teammateDefaults:()=>l,precomputeEffects:()=>{},precomputeMutualEffects:(u,h,p)=>{const S=h.lightConeConditionals;u.CD.buff(S.cdBuff&&Bd(p,p.path)>=2?s[e]:0,o)},finalizeCalculations:()=>{}}},sf=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.PostOpConversation"),{SOURCE_LC:o}=v.lightCone("21000"),s=[.12,.15,.18,.21,.24],r={postUltHealingBoost:!0},l={postUltHealingBoost:{lc:!0,id:"postUltHealingBoost",formItem:"switch",text:n("Content.postUltHealingBoost.text"),content:n("Content.postUltHealingBoost.content",{HealingBoost:C.precisionRound(100*s[e])})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,d,u)=>{const h=d.lightConeConditionals;c.ULT_OHB.buff(h.postUltHealingBoost?s[e]:0,o)},finalizeCalculations:()=>{}}},of=()=>({content:()=>[],defaults:()=>({}),precomputeEffects:()=>{},finalizeCalculations:()=>{}}),rf=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.ResolutionShinesAsPearlsOfSweat"),{SOURCE_LC:o}=v.lightCone("21015"),s=[.12,.13,.14,.15,.16],r={targetEnsnared:!0},l={targetEnsnared:!0},c={targetEnsnared:{lc:!0,id:"targetEnsnared",formItem:"switch",text:n("Content.targetEnsnared.text"),content:n("Content.targetEnsnared.content",{BaseChance:C.precisionRound(60+10*e),DefShred:C.precisionRound(100*s[e])})}},d={targetEnsnared:c.targetEnsnared};return{content:()=>Object.values(c),teammateContent:()=>Object.values(d),defaults:()=>r,teammateDefaults:()=>l,precomputeEffects:()=>{},precomputeMutualEffects:(u,h,p)=>{const S=h.lightConeConditionals;u.DEF_PEN.buffTeam(S.targetEnsnared?s[e]:0,o)},finalizeCalculations:()=>{}}},lf=()=>({content:()=>[],defaults:()=>({}),precomputeEffects:()=>{},finalizeCalculations:()=>{}}),cf=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.RiverFlowsInSpring"),{SOURCE_LC:o}=v.lightCone("21024"),s=[.08,.09,.1,.11,.12],r=[.12,.15,.18,.21,.24],l={spdDmgBuff:!0},c={spdDmgBuff:{lc:!0,id:"spdDmgBuff",formItem:"switch",text:n("Content.spdDmgBuff.text"),content:n("Content.spdDmgBuff.content",{SpdBuff:C.precisionRound(100*s[e]),DmgBuff:C.precisionRound(100*r[e])})}};return{content:()=>Object.values(c),defaults:()=>l,precomputeEffects:(d,u,h)=>{const p=u.lightConeConditionals;d.SPD_P.buff(p.spdDmgBuff?s[e]:0,o),d.ELEMENTAL_DMG.buff(p.spdDmgBuff?r[e]:0,o)},finalizeCalculations:()=>{}}},df=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.ShadowedByNight"),{SOURCE_LC:o}=v.lightCone("21047"),s=[.08,.09,.1,.11,.12],r={spdBuff:!0},l={spdBuff:{lc:!0,id:"spdBuff",formItem:"switch",text:n("Content.spdBuff.text"),content:n("Content.spdBuff.content",{SpdBuff:C.precisionRound(100*s[e])})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,d,u)=>{const h=d.lightConeConditionals;c.SPD_P.buff(h.spdBuff?s[e]:0,o)},finalizeCalculations:()=>{}}},uf=()=>({content:()=>[],defaults:()=>({}),precomputeEffects:()=>{},finalizeCalculations:()=>{}}),mf=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.SubscribeForMore"),{SOURCE_LC:o}=v.lightCone("21017"),s=[.24,.3,.36,.42,.48],r={maxEnergyDmgBoost:!0},l={maxEnergyDmgBoost:{lc:!0,id:"maxEnergyDmgBoost",formItem:"switch",text:n("Content.maxEnergyDmgBoost.text"),content:n("Content.maxEnergyDmgBoost.content",{DmgBuff:C.precisionRound(100*s[e])})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,d,u)=>{const h=d.lightConeConditionals;We(c,Rn|jt,s[e],o),We(c,Rn|jt,h.maxEnergyDmgBoost?s[e]:0,o)},finalizeCalculations:()=>{}}},hf=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.SweatNowCryLess"),{SOURCE_LC:o}=v.lightCone("21052"),s=[.24,.27,.3,.33,.36],r={dmgBoost:!0},l={dmgBoost:{lc:!0,id:"dmgBoost",formItem:"switch",text:n("Content.dmgBoost.text"),content:n("Content.dmgBoost.content",{DmgBuff:C.precisionRound(s[e]*100)})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,d,u)=>{const h=d.lightConeConditionals;c.ELEMENTAL_DMG.buffDual(h.dmgBoost?s[e]:0,o)},finalizeCalculations:()=>{}}},ff=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.Swordplay"),{SOURCE_LC:o}=v.lightCone("21010"),s=[.08,.1,.12,.14,.16],r={sameTargetHitStacks:5},l={sameTargetHitStacks:{lc:!0,id:"sameTargetHitStacks",formItem:"slider",text:n("Content.sameTargetHitStacks.text"),content:n("Content.sameTargetHitStacks.content",{DmgBuff:C.precisionRound(100*s[e])}),min:0,max:5}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,d,u)=>{const h=d.lightConeConditionals;c.ELEMENTAL_DMG.buff(h.sameTargetHitStacks*s[e],o)},finalizeCalculations:()=>{}}},pf=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.TheBirthOfTheSelf"),{SOURCE_LC:o}=v.lightCone("21006"),s=[.24,.3,.36,.42,.48],r={enemyHp50FuaBuff:!0},l={enemyHp50FuaBuff:{lc:!0,id:"enemyHp50FuaBuff",formItem:"switch",text:n("Content.enemyHp50FuaBuff.text"),content:n("Content.enemyHp50FuaBuff.content",{DmgBuff:C.precisionRound(100*s[e])})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,d,u)=>{const h=d.lightConeConditionals;We(c,ga,s[e],o),We(c,ga,h.enemyHp50FuaBuff?s[e]:0,o)},finalizeCalculations:()=>{}}},gf=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.TheDayTheCosmosFell"),{SOURCE_LC:o}=v.lightCone("21040"),s=[.2,.25,.3,.35,.4],r={cdBuffActive:!0},l={cdBuffActive:{lc:!0,id:"cdBuffActive",formItem:"switch",text:n("Content.cdBuffActive.text"),content:n("Content.cdBuffActive.content",{CritBuff:C.precisionRound(100*s[e])})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,d,u)=>{const h=d.lightConeConditionals;c.CD.buff(h.cdBuffActive?s[e]:0,o)},finalizeCalculations:()=>{}}},Sf=(e,t)=>{const{SOURCE_LC:n}=v.lightCone("22004"),o=[.04,.05,.06,.07,.08],s={weaknessTypes:7},r={weaknessTypes:{lc:!0,id:"weaknessTypes",formItem:"slider",text:"Weakness types",content:w.t("BetaMessage",{ns:"conditionals",Version:Zn}),min:0,max:7}};return{content:()=>Object.values(r),defaults:()=>s,precomputeEffects:(l,c,d)=>{const u=c.lightConeConditionals;l.ELEMENTAL_DMG.buff(u.weaknessTypes*o[e],n)},finalizeCalculations:()=>{}}},bf=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.TheMolesWelcomeYou"),{SOURCE_LC:o}=v.lightCone("21005"),s=[.12,.15,.18,.21,.24],r={atkBuffStacks:3},l={atkBuffStacks:{lc:!0,id:"atkBuffStacks",formItem:"slider",text:n("Content.atkBuffStacks.text"),content:n("Content.atkBuffStacks.content",{AtkBuff:C.precisionRound(100*s[e])}),min:0,max:3}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,d,u)=>{const h=d.lightConeConditionals;c.ATK_P.buff(h.atkBuffStacks*s[e],o)},finalizeCalculations:()=>{}}},Df=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.TheSeriousnessOfBreakfast"),{SOURCE_LC:o}=v.lightCone("21027"),s=[.12,.15,.18,.21,.24],r=[.04,.05,.06,.07,.08],l={dmgBoost:!0,defeatedEnemyAtkStacks:3},c={dmgBoost:{lc:!0,id:"dmgBoost",formItem:"switch",text:n("Content.dmgBoost.text"),content:n("Content.dmgBoost.content",{DmgBuff:C.precisionRound(100*s[e])})},defeatedEnemyAtkStacks:{lc:!0,id:"defeatedEnemyAtkStacks",formItem:"slider",text:n("Content.defeatedEnemyAtkStacks.text"),content:n("Content.defeatedEnemyAtkStacks.content",{AtkBuff:C.precisionRound(100*r[e])}),min:0,max:3}};return{content:()=>Object.values(c),defaults:()=>l,precomputeEffects:(d,u,h)=>{const p=u.lightConeConditionals;d.ATK_P.buff(p.defeatedEnemyAtkStacks*r[e],o),d.ELEMENTAL_DMG.buff(p.dmgBoost?s[e]:0,o)},finalizeCalculations:()=>{}}},Rf=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.ThisIsMe");v.lightCone("21030");const o=[.6,.75,.9,1.05,1.2],s={defScalingUltDmg:!1},r={defScalingUltDmg:{lc:!0,id:"defScalingUltDmg",formItem:"switch",text:n("Content.defScalingUltDmg.text"),content:n("Content.defScalingUltDmg.content",{Multiplier:C.precisionRound(100*o[e])})}};return{content:()=>Object.values(r),defaults:()=>s,precomputeEffects:()=>{},finalizeCalculations:()=>{}}},Ef=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.TodayIsAnotherPeacefulDay"),{SOURCE_LC:o}=v.lightCone("21034"),s=[.002,.0025,.003,.0035,.004],r={maxEnergyDmgBoost:!0},l={maxEnergyDmgBoost:{lc:!0,id:"maxEnergyDmgBoost",formItem:"switch",text:n("Content.maxEnergyDmgBoost.text"),content:n("Content.maxEnergyDmgBoost.content",{DmgStep:C.precisionRound(100*s[e])})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,d,u)=>{d.lightConeConditionals.maxEnergyDmgBoost&&c.ELEMENTAL_DMG.buff(Math.min(160,u.baseEnergy)*s[e],o)},finalizeCalculations:()=>{}}},Cf=()=>({content:()=>[],defaults:()=>({}),precomputeEffects:()=>{},finalizeCalculations:()=>{}}),Tf=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.UnderTheBlueSky"),{SOURCE_LC:o}=v.lightCone("21019"),s=[.12,.15,.18,.21,.24],r={defeatedEnemyCrBuff:!0},l={defeatedEnemyCrBuff:{lc:!0,id:"defeatedEnemyCrBuff",formItem:"switch",text:n("Content.defeatedEnemyCrBuff.text"),content:n("Content.defeatedEnemyCrBuff.content",{CritBuff:C.precisionRound(100*s[e])})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,d,u)=>{const h=d.lightConeConditionals;c.CR.buff(h.defeatedEnemyCrBuff?s[e]:0,o)},finalizeCalculations:()=>{}}},yf=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.VictoryInABlink"),{SOURCE_LC:o}=v.lightCone("21050"),s=[.08,.1,.12,.14,.16],r={teamDmgBuff:!0},l={teamDmgBuff:!0},c={teamDmgBuff:{lc:!0,id:"teamDmgBuff",formItem:"switch",text:n("Content.teamDmgBuff.text"),content:n("Content.teamDmgBuff.content",{DmgBuff:C.precisionRound(s[e]*100)})}},d={teamDmgBuff:c.teamDmgBuff};return{content:()=>Object.values(c),teammateContent:()=>Object.values(d),defaults:()=>r,teammateDefaults:()=>l,precomputeEffects:(u,h,p)=>{},precomputeMutualEffects:(u,h,p)=>{const S=h.lightConeConditionals;u.ELEMENTAL_DMG.buffTeam(S.teamDmgBuff?s[e]:0,o)},finalizeCalculations:()=>{}}},Pf=()=>({content:()=>[],defaults:()=>({}),precomputeEffects:()=>{},finalizeCalculations:()=>{}}),If=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.WeAreWildfire"),{SOURCE_LC:o}=v.lightCone("21023"),s=[.08,.1,.12,.14,.16],r=[.3,.35,.4,.45,.5],l={initialDmgReductionBuff:!1},c={initialDmgReductionBuff:!1},d={initialDmgReductionBuff:{lc:!0,id:"initialDmgReductionBuff",formItem:"switch",text:n("Content.initialDmgReductionBuff.text"),content:n("Content.initialDmgReductionBuff.content",{Healing:C.precisionRound(100*r[e]),DmgReduction:s[e]})}},u={initialDmgReductionBuff:d.initialDmgReductionBuff};return{content:()=>Object.values(d),teammateContent:()=>Object.values(u),defaults:()=>l,teammateDefaults:()=>c,precomputeEffects:()=>{},precomputeMutualEffects:(h,p,S)=>{const D=p.lightConeConditionals;h.DMG_RED_MULTI.multiplyTeam(D.initialDmgReductionBuff?1-s[e]:1,o)},finalizeCalculations:()=>{}}},Bf=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.WeWillMeetAgain");v.lightCone("21029");const o=[.48,.6,.72,.84,.96],s={extraDmgProc:!0},r={extraDmgProc:{lc:!0,id:"extraDmgProc",formItem:"switch",text:n("Content.extraDmgProc.text"),content:n("Content.extraDmgProc.content",{Multiplier:C.precisionRound(100*o[e])})}};return{content:()=>Object.values(r),defaults:()=>s,precomputeEffects:(l,c,d)=>{c.lightConeConditionals},finalizeCalculations:(l,c,d)=>{const u=c.lightConeConditionals;l.BASIC_ADDITIONAL_DMG.buff((u.extraDmgProc?o[e]:0)*l.a[f.ATK],v.NONE),l.SKILL_ADDITIONAL_DMG.buff((u.extraDmgProc?o[e]:0)*l.a[f.ATK],v.NONE)},gpuFinalizeCalculations:(l,c)=>{const d=l.lightConeConditionals;return`
if (${ki(d.extraDmgProc)}) {
  x.BASIC_ADDITIONAL_DMG += ${o[e]} * x.ATK;
  x.SKILL_ADDITIONAL_DMG += ${o[e]} * x.ATK;
}
      `}}},Gf=()=>({content:()=>[],defaults:()=>({}),precomputeEffects:()=>{},finalizeCalculations:()=>{}}),Mf=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.WoofWalkTime"),{SOURCE_LC:o}=v.lightCone("21026"),s=[.16,.2,.24,.28,.32],r={enemyBurnedBleeding:!0},l={enemyBurnedBleeding:{lc:!0,id:"enemyBurnedBleeding",formItem:"switch",text:n("Content.enemyBurnedBleeding.text"),content:n("Content.enemyBurnedBleeding.content",{DmgBuff:C.precisionRound(100*s[e])})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,d,u)=>{const h=d.lightConeConditionals;c.ELEMENTAL_DMG.buff(h.enemyBurnedBleeding?s[e]:0,o)},finalizeCalculations:()=>{}}},xf=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.AGroundedAscent"),{SOURCE_LC:o}=v.lightCone("23034"),s=[.15,.1725,.195,.2175,.24],r={dmgBuffStacks:3},l={dmgBuffStacks:3},c={dmgBuffStacks:{lc:!0,id:"dmgBuffStacks",formItem:"slider",text:n("Content.dmgBuffStacks.text"),content:n("Content.dmgBuffStacks.content",{DmgBuff:C.precisionRound(100*s[e])}),min:0,max:3}},d={dmgBuffStacks:c.dmgBuffStacks};return{content:()=>Object.values(c),teammateContent:()=>Object.values(d),defaults:()=>r,teammateDefaults:()=>l,precomputeEffects:()=>{},precomputeMutualEffects:(u,h,p)=>{const S=h.lightConeConditionals;h.actorId=="1313"?u.ELEMENTAL_DMG.buffDual(S.dmgBuffStacks*s[e],o):u.ELEMENTAL_DMG.buffSingle(S.dmgBuffStacks*s[e],o)},finalizeCalculations:()=>{}}},vf=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.AlongThePassingShore"),{SOURCE_LC:o}=v.lightCone("23024"),s=[.24,.28,.32,.36,.4],r=[.24,.28,.32,.36,.4],l={emptyBubblesDebuff:!0},c={emptyBubblesDebuff:{lc:!0,id:"emptyBubblesDebuff",formItem:"switch",text:n("Content.emptyBubblesDebuff.text"),content:n("Content.emptyBubblesDebuff.content",{UltDmgBoost:C.precisionRound(100*r[e]),DmgBoost:C.precisionRound(100*s[e])})}};return{content:()=>Object.values(c),defaults:()=>l,precomputeEffects:(d,u,h)=>{const p=u.lightConeConditionals;d.ELEMENTAL_DMG.buff(p.emptyBubblesDebuff?s[e]:0,o),We(d,xt,p.emptyBubblesDebuff?r[e]:0,o)},finalizeCalculations:()=>{}}},_f=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.AnInstantBeforeAGaze"),{SOURCE_LC:o}=v.lightCone("23018"),s=[.0036,.0042,.0048,.0054,.006],r={maxEnergyUltDmgStacks:180},l={maxEnergyUltDmgStacks:{lc:!0,id:"maxEnergyUltDmgStacks",formItem:"slider",text:n("Content.maxEnergyUltDmgStacks.text"),content:n("Content.maxEnergyUltDmgStacks.content",{DmgStep:C.precisionRound(100*s[e])}),min:0,max:180}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,d,u)=>{const h=d.lightConeConditionals;We(c,xt,h.maxEnergyUltDmgStacks*s[e],o)},finalizeCalculations:()=>{}}},Af=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.BaptismOfPureThought"),{SOURCE_LC:o}=v.lightCone("23020"),s=[.08,.09,.1,.11,.12],r=[.36,.42,.48,.54,.6],l=[.24,.28,.32,.36,.4],c={debuffCdStacks:3,postUltBuff:!0},d={debuffCdStacks:{lc:!0,id:"debuffCdStacks",formItem:"slider",text:n("Content.debuffCdStacks.text"),content:n("Content.debuffCdStacks.content",{DmgStep:C.precisionRound(100*s[e])}),min:0,max:3},postUltBuff:{lc:!0,id:"postUltBuff",formItem:"switch",text:n("Content.postUltBuff.text"),content:n("Content.postUltBuff.content",{DmgStep:C.precisionRound(100*r[e]),DefIgnore:C.precisionRound(100*l[e])})}};return{content:()=>Object.values(d),defaults:()=>c,precomputeEffects:(u,h,p)=>{const S=h.lightConeConditionals;u.CD.buff(S.debuffCdStacks*s[e],o),u.ELEMENTAL_DMG.buff(S.postUltBuff?r[e]:0,o),zn(u,ga,S.postUltBuff?l[e]:0,o)},finalizeCalculations:()=>{}}},Lf=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.BeforeDawn"),{SOURCE_LC:o}=v.lightCone("23010"),s=[.18,.21,.24,.27,.3],r=[.48,.56,.64,.72,.8],l={fuaDmgBoost:!0},c={fuaDmgBoost:{lc:!0,id:"fuaDmgBoost",formItem:"switch",text:n("Content.fuaDmgBoost.text"),content:n("Content.fuaDmgBoost.content",{DmgBuff:C.precisionRound(100*r[e])})}};return{content:()=>Object.values(c),defaults:()=>l,precomputeEffects:(d,u,h)=>{const p=u.lightConeConditionals;We(d,jt|xt,s[e],o),We(d,ga,p.fuaDmgBoost?r[e]:0,o)},finalizeCalculations:()=>{}}},Ff=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.BrighterThanTheSun"),{SOURCE_LC:o}=v.lightCone("23015"),s=[.18,.21,.24,.27,.3],r=[.06,.07,.08,.09,.1],l={dragonsCallStacks:2},c={dragonsCallStacks:{lc:!0,id:"dragonsCallStacks",formItem:"slider",text:n("Content.dragonsCallStacks.text"),content:n("Content.dragonsCallStacks.content",{AtkBuff:C.precisionRound(100*s[e]),RegenBuff:C.precisionRound(100*r[e])}),min:0,max:2}};return{content:()=>Object.values(c),defaults:()=>l,precomputeEffects:(d,u,h)=>{const p=u.lightConeConditionals;d.ATK_P.buff(p.dragonsCallStacks*s[e],o),d.ERR.buff(p.dragonsCallStacks*r[e],o)},finalizeCalculations:()=>{}}},Hf=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.ButTheBattleIsntOver"),{SOURCE_LC:o}=v.lightCone("23003"),s=[.3,.35,.4,.45,.5],r={postSkillDmgBuff:!0},l={postSkillDmgBuff:{lc:!0,formItem:"switch",id:"postSkillDmgBuff",text:n("Content.postSkillDmgBuff.text"),content:n("Content.postSkillDmgBuff.content",{DmgBuff:C.precisionRound(100*s[e])})}};return{content:()=>[],teammateContent:()=>Object.values(l),defaults:()=>({}),teammateDefaults:()=>r,precomputeEffects:()=>{},precomputeTeammateEffects:(c,d,u)=>{const h=d.lightConeConditionals;c.ELEMENTAL_DMG.buffSingle(h.postSkillDmgBuff?s[e]:0,o)},finalizeCalculations:()=>{}}},wf=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.CruisingInTheStellarSea"),{SOURCE_LC:o}=v.lightCone("24001"),s=[.08,.1,.12,.14,.16],r=[.2,.25,.3,.35,.4],l={enemyHp50CrBoost:!1,enemyDefeatedAtkBuff:!0},c={enemyHp50CrBoost:{lc:!0,id:"enemyHp50CrBoost",formItem:"switch",text:n("Content.enemyHp50CrBoost.text"),content:n("Content.enemyHp50CrBoost.content",{CritBuff:C.precisionRound(100*s[e])})},enemyDefeatedAtkBuff:{lc:!0,id:"enemyDefeatedAtkBuff",formItem:"switch",text:n("Content.enemyDefeatedAtkBuff.text"),content:n("Content.enemyDefeatedAtkBuff.content",{AtkBuff:C.precisionRound(100*r[e])})}};return{content:()=>Object.values(c),defaults:()=>l,precomputeEffects:(d,u,h)=>{const p=u.lightConeConditionals;d.CR.buff(p.enemyHp50CrBoost?s[e]:0,o),d.ATK_P.buff(p.enemyDefeatedAtkBuff?r[e]:0,o)},finalizeCalculations:()=>{}}},Of=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.DanceAtSunset"),{SOURCE_LC:o}=v.lightCone("23030"),s=[.36,.42,.48,.54,.6],r={fuaDmgStacks:2},l={fuaDmgStacks:{lc:!0,formItem:"slider",id:"fuaDmgStacks",text:n("Content.fuaDmgStacks.text"),content:n("Content.fuaDmgStacks.content",{DmgBoost:C.precisionRound(100*s[e])}),min:0,max:2}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,d,u)=>{const h=d.lightConeConditionals;We(c,ga,h.fuaDmgStacks*s[e],o)},finalizeCalculations:()=>{}}},kf=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.EarthlyEscapade"),{SOURCE_LC:o}=v.lightCone("23021"),s=[.1,.11,.12,.13,.14],r=[.28,.35,.42,.49,.56],l={maskActive:!1},c={maskActive:!0},d={maskActive:{lc:!0,id:"maskActive",formItem:"switch",text:n("Content.maskActive.text"),content:n("Content.maskActive.content",{CritRateBuff:C.precisionRound(100*s[e]),CritDmgBuff:C.precisionRound(100*r[e])})}},u={maskActive:d.maskActive};return{content:()=>Object.values(d),teammateContent:()=>Object.values(u),defaults:()=>l,teammateDefaults:()=>c,precomputeEffects:()=>{},precomputeTeammateEffects:(h,p,S)=>{const D=p.lightConeConditionals;h.CR.buffTeam(D.maskActive?s[e]:0,o),h.CD.buffTeam(D.maskActive?r[e]:0,o)},finalizeCalculations:()=>{}}},Kf=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.EchoesOfTheCoffin"),{SOURCE_LC:o}=v.lightCone("23008"),s=[12,14,16,18,20],r=[3,3.5,4,4.5,5],l={postUltSpdBuff:!1},c={postUltSpdBuff:!1},d={postUltSpdBuff:{lc:!0,id:"postUltSpdBuff",formItem:"switch",text:n("Content.postUltSpdBuff.text"),content:n("Content.postUltSpdBuff.content",{EnergyRecovered:C.precisionRound(r[e]),SpdBuff:C.precisionRound(s[e])})}},u={postUltSpdBuff:d.postUltSpdBuff};return{content:()=>Object.values(d),teammateContent:()=>Object.values(u),defaults:()=>l,teammateDefaults:()=>c,precomputeEffects:()=>{},precomputeMutualEffects:(h,p,S)=>{const D=p.lightConeConditionals;h.SPD.buffTeam(D.postUltSpdBuff?s[e]:0,o)},finalizeCalculations:()=>{}}},jf=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.EternalCalculus"),{SOURCE_LC:o}=v.lightCone("24004"),s=[.04,.05,.06,.07,.08],r=[.08,.1,.12,.14,.16],l={atkBuffStacks:5,spdBuff:!1},c={atkBuffStacks:{lc:!0,id:"atkBuffStacks",formItem:"slider",text:n("Content.atkBuffStacks.text"),content:n("Content.atkBuffStacks.content",{AtkBuff:C.precisionRound(100*s[e])}),min:0,max:5},spdBuff:{lc:!0,id:"spdBuff",formItem:"switch",text:n("Content.spdBuff.text"),content:n("Content.spdBuff.content",{SpdBuff:C.precisionRound(100*r[e])})}};return{content:()=>Object.values(c),defaults:()=>l,precomputeEffects:(d,u,h)=>{const p=u.lightConeConditionals;d.ATK_P.buff(p.atkBuffStacks*s[e],o),d.SPD_P.buff(p.spdBuff?r[e]:0,o)},finalizeCalculations:()=>{}}},Wf=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.FlameOfBloodBlazeMyPath.Content"),{SOURCE_LC:o}=v.lightCone("23039"),s=[.3,.35,.4,.45,.5],r={skillUltDmgBoost:!0,bonusBoost:!0},l={skillUltDmgBoost:{lc:!0,id:"skillUltDmgBoost",formItem:"switch",text:n("skillUltDmgBoost.text"),content:n("skillUltDmgBoost.content",{DmgBoost:C.precisionRound(s[e]*100)})},bonusBoost:{lc:!0,id:"bonusBoost",formItem:"switch",text:n("bonusBoost.text"),content:n("bonusBoost.content",{HpConsumption:C.precisionRound((.06+.005*e)*100),BonusDmgBoost:C.precisionRound(s[e]*100)})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,d,u)=>{const h=d.lightConeConditionals;We(c,jt|xt,h.skillUltDmgBoost?s[e]:0,o),We(c,jt|xt,h.skillUltDmgBoost&&h.bonusBoost?s[e]:0,o)},finalizeCalculations:()=>{}}},Zf=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.FlowingNightglow"),{SOURCE_LC:o}=v.lightCone("23026"),s=[.03,.035,.04,.045,.05],r=[.48,.6,.72,.84,.96],l=[.24,.28,.32,.36,.4],c={cantillationStacks:5,cadenzaActive:!0},d={cadenzaActive:!0},u={cadenzaActive:{lc:!0,id:"cadenzaActive",formItem:"switch",text:n("Content.cadenzaActive.text"),content:n("Content.cadenzaActive.content",{RegenBuff:C.precisionRound(100*s[e]),AtkBuff:C.precisionRound(100*r[e]),DmgBuff:C.precisionRound(100*l[e])})},cantillationStacks:{lc:!0,id:"cantillationStacks",formItem:"slider",text:n("Content.cantillationStacks.text"),content:n("Content.cantillationStacks.content",{RegenBuff:C.precisionRound(100*s[e]),AtkBuff:C.precisionRound(100*r[e]),DmgBuff:C.precisionRound(100*l[e])}),min:0,max:5}},h={cadenzaActive:u.cadenzaActive};return{content:()=>Object.values(u),teammateContent:()=>Object.values(h),defaults:()=>c,teammateDefaults:()=>d,precomputeTeammateEffects:(p,S,D)=>{const E=S.lightConeConditionals;p.ELEMENTAL_DMG.buffTeam(E.cadenzaActive?l[e]:0,o)},precomputeEffects:(p,S,D)=>{const E=S.lightConeConditionals;p.ERR.buff(E.cantillationStacks*s[e],o),p.ATK_P.buff(E.cadenzaActive?r[e]:0,o)},finalizeCalculations:()=>{}}},Nf=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.IfTimeWereAFlower.Content"),{SOURCE_LC:o}=v.lightCone("23038"),s=[.48,.6,.72,.84,.96],r={presage:!0},l={presage:!0},c={presage:{lc:!0,id:"presage",formItem:"switch",text:n("presage.text"),content:n("presage.content",{CdBuff:C.precisionRound(s[e]*100)})}},d={presage:c.presage};return{content:()=>Object.values(c),teammateContent:()=>Object.values(d),defaults:()=>r,teammateDefaults:()=>l,precomputeEffects:(u,h,p)=>{},precomputeMutualEffects:(u,h,p)=>{const S=h.lightConeConditionals;u.CD.buffTeam(S.presage?s[e]:0,o)},finalizeCalculations:()=>{}}},Vf=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.IncessantRain"),{SOURCE_LC:o}=v.lightCone("23007"),s=[.12,.14,.16,.18,.2],r=[.12,.14,.16,.18,.2],l={enemy3DebuffsCrBoost:!0,targetCodeDebuff:!0},c={targetCodeDebuff:!0},d={enemy3DebuffsCrBoost:{lc:!0,id:"enemy3DebuffsCrBoost",formItem:"switch",text:n("Content.enemy3DebuffsCrBoost.text"),content:n("Content.enemy3DebuffsCrBoost.content",{CritBuff:C.precisionRound(100*s[e])})},targetCodeDebuff:{lc:!0,id:"targetCodeDebuff",formItem:"switch",text:n("Content.targetCodeDebuff.text"),content:n("Content.targetCodeDebuff.content",{DmgIncrease:C.precisionRound(100*r[e])})}},u={targetCodeDebuff:d.targetCodeDebuff};return{content:()=>Object.values(d),teammateContent:()=>Object.values(u),defaults:()=>l,teammateDefaults:()=>c,precomputeEffects:(h,p,S)=>{const D=p.lightConeConditionals;h.CR.buff(D.enemy3DebuffsCrBoost?s[e]:0,o)},precomputeMutualEffects:(h,p,S)=>{const D=p.lightConeConditionals;h.VULNERABILITY.buffTeam(D.targetCodeDebuff?r[e]:0,o)},finalizeCalculations:()=>{}}},zf=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.InherentlyUnjustDestiny"),{SOURCE_LC:o}=v.lightCone("23023"),s=[.4,.46,.52,.58,.64],r=[.1,.115,.13,.145,.16],l={shieldCdBuff:!0,targetVulnerability:!0},c={targetVulnerability:!0},d={shieldCdBuff:{lc:!0,id:"shieldCdBuff",formItem:"switch",text:n("Content.shieldCdBuff.text"),content:n("Content.shieldCdBuff.content",{CritBuff:C.precisionRound(100*s[e])})},targetVulnerability:{lc:!0,id:"targetVulnerability",formItem:"switch",text:n("Content.targetVulnerability.text"),content:n("Content.targetVulnerability.content",{baseChance:C.precisionRound(100+15*e),Vulnerability:C.precisionRound(100*r[e])})}},u={targetVulnerability:d.targetVulnerability};return{content:()=>Object.values(d),teammateContent:()=>Object.values(u),defaults:()=>l,teammateDefaults:()=>c,precomputeEffects:(h,p,S)=>{const D=p.lightConeConditionals;h.CD.buff(D.shieldCdBuff?s[e]:0,o)},precomputeMutualEffects:(h,p,S)=>{const D=p.lightConeConditionals;h.VULNERABILITY.buffTeam(D.targetVulnerability?r[e]:0,o)},finalizeCalculations:()=>{}}},Uf=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.InTheNameOfTheWorld"),{SOURCE_LC:o}=v.lightCone("23004"),s=[.24,.28,.32,.36,.4],r=[.24,.28,.32,.36,.4],l=[.18,.21,.24,.27,.3],c={enemyDebuffedDmgBoost:!0,skillAtkBoost:!1},d={enemyDebuffedDmgBoost:{lc:!0,id:"enemyDebuffedDmgBoost",formItem:"switch",text:n("Content.enemyDebuffedDmgBoost.text"),content:n("Content.enemyDebuffedDmgBoost.content",{DmgBuff:C.precisionRound(100*s[e])})},skillAtkBoost:{lc:!0,id:"skillAtkBoost",formItem:"switch",text:n("Content.skillAtkBoost.text"),content:n("Content.skillAtkBoost.content",{EhrBuff:C.precisionRound(100*l[e]),AtkBuff:C.precisionRound(100*r[e])})}};return{content:()=>Object.values(d),defaults:()=>c,precomputeEffects:(u,h,p)=>{const S=h.lightConeConditionals;u.ELEMENTAL_DMG.buff(S.enemyDebuffedDmgBoost?s[e]:0,o)},finalizeCalculations:()=>{}}},Xf=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.InTheNight"),{SOURCE_LC:o}=v.lightCone("23001"),s=[.06,.07,.08,.09,.1],r=[.12,.14,.16,.18,.2],l={spdScalingBuffs:!0},c={spdScalingBuffs:{lc:!0,id:"spdScalingBuffs",formItem:"switch",text:n("Content.spdScalingBuffs.text"),content:n("Content.spdScalingBuffs.content",{DmgBuff:C.precisionRound(100*s[e]),CritBuff:C.precisionRound(100*r[e])})}};return{content:()=>Object.values(c),defaults:()=>l,precomputeEffects:()=>{},finalizeCalculations:(d,u,h)=>{const p=u.lightConeConditionals,S=Math.max(0,Math.min(6,Math.floor((d.a[f.SPD]-100)/10)));We(d,Rn|jt,p.spdScalingBuffs?S*s[e]:0,o),i1(d,xt,p.spdScalingBuffs?S*r[e]:0,o)},gpuFinalizeCalculations:(d,u)=>{const h=d.lightConeConditionals;return`
if (${ki(h.spdScalingBuffs)}) {
  let stacks = max(0, min(6, floor((x.SPD - 100) / 10)));

  buffAbilityDmg(p_x, BASIC_DMG_TYPE | SKILL_DMG_TYPE, stacks * ${s[e]}, 1);
  buffAbilityCd(p_x, ULT_DMG_TYPE, stacks * ${r[e]}, 1);
}
    `}}},Yf=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.IntoTheUnreachableVeil"),{SOURCE_LC:o}=v.lightCone("23037"),s=[.6,.7,.8,.9,1],r={skillUltDmgBoost:!0},l={skillUltDmgBoost:{lc:!0,id:"skillUltDmgBoost",formItem:"switch",text:n("Content.skillUltDmgBoost.text"),content:n("Content.skillUltDmgBoost.content",{DmgBuff:C.precisionRound(s[e]*100)})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,d,u)=>{const h=d.lightConeConditionals;We(c,jt|xt,h.skillUltDmgBoost?s[e]:0,o)},finalizeCalculations:()=>{}}},Jf=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.IShallBeMyOwnSword"),{SOURCE_LC:o}=v.lightCone("23014"),s=[.14,.165,.19,.215,.24],r=[.12,.14,.16,.18,.2],l={eclipseStacks:3,maxStackDefPen:!0},c={eclipseStacks:{lc:!0,id:"eclipseStacks",formItem:"slider",text:n("Content.eclipseStacks.text"),content:n("Content.eclipseStacks.content",{DmgBuff:C.precisionRound(100*s[e])}),min:0,max:3},maxStackDefPen:{lc:!0,id:"maxStackDefPen",formItem:"switch",text:n("Content.maxStackDefPen.text"),content:n("Content.maxStackDefPen.content",{DefIgnore:C.precisionRound(100*r[e])})}};return{content:()=>Object.values(c),defaults:()=>l,precomputeEffects:(d,u,h)=>{const p=u.lightConeConditionals;d.ELEMENTAL_DMG.buff(p.eclipseStacks*s[e],o),d.DEF_PEN.buff(p.maxStackDefPen&&p.eclipseStacks==3?r[e]:0,o)},finalizeCalculations:()=>{}}},Qf=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.IVentureForthToHunt"),{SOURCE_LC:o}=v.lightCone("23031"),s=[.27,.3,.33,.36,.39],r={luminfluxUltStacks:2},l={luminfluxUltStacks:{lc:!0,id:"luminfluxUltStacks",formItem:"slider",text:n("Content.luminfluxUltStacks.text"),content:n("Content.luminfluxUltStacks.content",{DefIgnore:C.precisionRound(100*s[e])}),min:0,max:2}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,d,u)=>{const h=d.lightConeConditionals;zn(c,xt,h.luminfluxUltStacks*s[e],o)},finalizeCalculations:()=>{}}},$f=(e,t)=>{const{SOURCE_LC:n}=v.lightCone("23041"),o=[.6,.7,.8,.9,1],s=[.12,.15,.18,.21,.24],r={defPen:!0,dmgBoost:!0},l={defPen:!0},c={dmgBoost:{lc:!0,id:"dmgBoost",formItem:"switch",text:"DMG boost",content:w.t("BetaMessage",{ns:"conditionals",Version:Zn})},defPen:{lc:!0,id:"defPen",formItem:"switch",text:"DEF PEN",content:w.t("BetaMessage",{ns:"conditionals",Version:Zn})}},d={defPen:c.defPen};return{content:()=>Object.values(c),teammateContent:()=>Object.values(d),defaults:()=>r,teammateDefaults:()=>l,precomputeEffects:(u,h,p)=>{const S=h.lightConeConditionals;u.ELEMENTAL_DMG.buff(S.dmgBoost?o[e]:0,n)},precomputeMutualEffects:(u,h,p)=>{const S=h.lightConeConditionals;u.DEF_PEN.buffTeam(S.defPen?s[e]:0,n)},finalizeCalculations:()=>{}}},qf=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.LongRoadLeadsHome"),{SOURCE_LC:o}=v.lightCone("23035"),s=[.18,.21,.24,.27,.3],r={breakVulnerabilityStacks:2},l={breakVulnerabilityStacks:2},c={breakVulnerabilityStacks:{lc:!0,id:"breakVulnerabilityStacks",formItem:"slider",text:n("Content.breakVulnerabilityStacks.text"),content:n("Content.breakVulnerabilityStacks.content",{breakVulnerability:C.precisionRound(100*s[e])}),min:0,max:2}},d={breakVulnerabilityStacks:c.breakVulnerabilityStacks};return{content:()=>Object.values(c),teammateContent:()=>Object.values(d),defaults:()=>r,teammateDefaults:()=>l,precomputeEffects:()=>{},precomputeMutualEffects:(u,h,p)=>{const S=h.lightConeConditionals;n1(u,Ss,S.breakVulnerabilityStacks*s[e],o,ss.TEAM)},finalizeCalculations:()=>{}}},ep=(e,t)=>{const{SOURCE_LC:n}=v.lightCone("23040"),o=[.3,.35,.4,.45,.5],s={deathFlower:!0},r={deathFlower:{lc:!0,id:"deathFlower",formItem:"switch",text:"Death Flower DEF PEN",content:w.t("BetaMessage",{ns:"conditionals",Version:Zn})}};return{content:()=>Object.values(r),defaults:()=>s,precomputeEffects:(l,c,d)=>{const u=c.lightConeConditionals;l.DEF_PEN.buffDual(u.deathFlower?o[e]:0,n)},finalizeCalculations:()=>{}}},tp=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.MemorysCurtainNeverFalls.Content"),{SOURCE_LC:o}=v.lightCone("24005"),s=[.08,.1,.12,.14,.16],r={teamDmgBoost:!0},l={teamDmgBoost:!0},c={teamDmgBoost:{lc:!0,id:"teamDmgBoost",formItem:"switch",text:n("teamDmgBoost.text"),content:n("teamDmgBoost.content",{DmgBoost:C.precisionRound(s[e]*100)})}},d={teamDmgBoost:c.teamDmgBoost};return{content:()=>Object.values(c),teammateContent:()=>Object.values(d),defaults:()=>r,teammateDefaults:()=>l,precomputeEffects:(u,h,p)=>{h.lightConeConditionals},precomputeMutualEffects:(u,h,p)=>{const S=h.lightConeConditionals;u.ELEMENTAL_DMG.buffTeam(S.teamDmgBoost?s[e]:0,o)},finalizeCalculations:()=>{}}},ap=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.MomentOfVictory"),{SOURCE_LC:o}=v.lightCone("23005"),s=[.24,.28,.32,.36,.4],r={selfAttackedDefBuff:!0},l={selfAttackedDefBuff:{lc:!0,id:"selfAttackedDefBuff",formItem:"switch",text:n("Content.selfAttackedDefBuff.text"),content:n("Content.selfAttackedDefBuff.content",{DefBuff:C.precisionRound(100*s[e])})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,d,u)=>{const h=d.lightConeConditionals;c.DEF_P.buff(h.selfAttackedDefBuff?s[e]:0,o)},finalizeCalculations:()=>{}}},np=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.NightOfFright"),{SOURCE_LC:o}=v.lightCone("23017"),s=[.024,.028,.032,.036,.04],r={atkBuffStacks:5},l={atkBuffStacks:5},c={atkBuffStacks:{lc:!0,id:"atkBuffStacks",formItem:"slider",text:n("Content.atkBuffStacks.text"),content:n("Content.atkBuffStacks.content",{AtkBuff:C.precisionRound(100*s[e])}),min:0,max:5}},d={atkBuffStacks:c.atkBuffStacks};return{content:()=>Object.values(c),teammateContent:()=>Object.values(d),defaults:()=>r,teammateDefaults:()=>l,precomputeEffects:()=>{},precomputeMutualEffects:(u,h,p)=>{const S=h.lightConeConditionals;u.ATK_P.buffTeam(S.atkBuffStacks*s[e],o)},finalizeCalculations:()=>{}}},ip=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.NightOnTheMilkyWay"),{SOURCE_LC:o}=v.lightCone("23000"),s=[.09,.105,.12,.135,.15],r=[.3,.35,.4,.45,.5],l={enemyCountAtkBuff:!0,enemyWeaknessBreakDmgBuff:!0},c={enemyCountAtkBuff:{lc:!0,id:"enemyCountAtkBuff",formItem:"switch",text:n("Content.enemyCountAtkBuff.text"),content:n("Content.enemyCountAtkBuff.content",{AtkBuff:C.precisionRound(100*s[e])})},enemyWeaknessBreakDmgBuff:{lc:!0,id:"enemyWeaknessBreakDmgBuff",formItem:"switch",text:n("Content.enemyWeaknessBreakDmgBuff.text"),content:n("Content.enemyWeaknessBreakDmgBuff.content",{DmgBuff:C.precisionRound(100*r[e])})}};return{content:()=>Object.values(c),defaults:()=>l,precomputeEffects:(d,u,h)=>{const p=u.lightConeConditionals;d.ATK_P.buff(p.enemyCountAtkBuff?h.enemyCount*s[e]:0,o),d.ELEMENTAL_DMG.buff(p.enemyWeaknessBreakDmgBuff?r[e]:0,o)},finalizeCalculations:()=>{}}},sp=()=>({content:()=>[],defaults:()=>({}),precomputeEffects:()=>{},finalizeCalculations:()=>{}}),op=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.OnTheFallOfAnAeon"),{SOURCE_LC:o}=v.lightCone("24000"),s=[.08,.1,.12,.14,.16],r=[.12,.15,.18,.21,.24],l={atkBoostStacks:4,weaknessBreakDmgBuff:!0},c={atkBoostStacks:{lc:!0,id:"atkBoostStacks",formItem:"slider",text:n("Content.atkBoostStacks.text"),content:n("Content.atkBoostStacks.content",{AtkBuff:C.precisionRound(100*s[e])}),min:0,max:4},weaknessBreakDmgBuff:{lc:!0,id:"weaknessBreakDmgBuff",formItem:"switch",text:n("Content.weaknessBreakDmgBuff.text"),content:n("Content.weaknessBreakDmgBuff.content",{DmgBuff:C.precisionRound(100*r[e])})}};return{content:()=>Object.values(c),defaults:()=>l,precomputeEffects:(d,u,h)=>{const p=u.lightConeConditionals;d.ATK_P.buff(p.atkBoostStacks*s[e],o),d.ELEMENTAL_DMG.buff(p.weaknessBreakDmgBuff?r[e]:0,o)},finalizeCalculations:()=>{}}},rp=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.PastSelfInTheMirror"),{SOURCE_LC:o}=v.lightCone("23019"),s=[.24,.28,.32,.36,.4],r={postUltDmgBuff:!0},l={postUltDmgBuff:!0},c={postUltDmgBuff:{lc:!0,id:"postUltDmgBuff",formItem:"switch",text:n("Content.postUltDmgBuff.text"),content:n("Content.postUltDmgBuff.content",{DmgBuff:C.precisionRound(100*s[e])})}},d={postUltDmgBuff:c.postUltDmgBuff};return{content:()=>Object.values(c),teammateContent:()=>Object.values(d),defaults:()=>r,teammateDefaults:()=>l,precomputeEffects:()=>{},precomputeMutualEffects:(u,h,p)=>{const S=h.lightConeConditionals;u.ELEMENTAL_DMG.buffTeam(S.postUltDmgBuff?s[e]:0,o)},finalizeCalculations:()=>{}}},lp=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.PatienceIsAllYouNeed"),{SOURCE_LC:o}=v.lightCone("23006"),s=[.24,.28,.32,.36,.4],r=[.048,.056,.064,.072,.08],l=[.6,.7,.8,.9,1],c={spdStacks:3,dotEffect:!1},d={spdStacks:{lc:!0,id:"spdStacks",formItem:"slider",text:n("Content.spdStacks.text"),content:n("Content.spdStacks.content",{SpdBuff:C.precisionRound(100*r[e])}),min:0,max:3},dotEffect:{lc:!0,id:"dotEffect",formItem:"switch",text:n("Content.dotEffect.text"),content:n("Content.dotEffect.content",{Multiplier:C.precisionRound(100*l[e])})}};return{content:()=>Object.values(d),defaults:()=>c,precomputeEffects:(u,h,p)=>{const S=h.lightConeConditionals;u.SPD_P.buff(S.spdStacks*r[e],o),u.ELEMENTAL_DMG.buff(s[e],o)},finalizeCalculations:()=>{}}},cp=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.ReforgedRemembrance"),{SOURCE_LC:o}=v.lightCone("23022"),s=[.05,.06,.07,.08,.09],r=[.072,.079,.086,.093,.1],l={prophetStacks:4},c={prophetStacks:{lc:!0,id:"prophetStacks",formItem:"slider",text:n("Content.prophetStacks.text"),content:n("Content.prophetStacks.content",{AtkBuff:C.precisionRound(100*s[e]),DefIgnore:C.precisionRound(100*r[e])}),min:0,max:4}};return{content:()=>Object.values(c),defaults:()=>l,precomputeEffects:(d,u,h)=>{const p=u.lightConeConditionals;d.ATK_P.buff(p.prophetStacks*s[e],o),zn(d,Po,p.prophetStacks*r[e],o)},finalizeCalculations:()=>{}}},dp=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.SailingTowardsASecondLife"),{SOURCE_LC:o}=v.lightCone("23027"),s=[.12,.14,.16,.18,.2],r=[.2,.23,.26,.29,.32],l={breakDmgDefShred:!0,spdBuffConditional:!0},c={breakDmgDefShred:{lc:!0,id:"breakDmgDefShred",formItem:"switch",text:n("Content.breakDmgDefShred.text"),content:n("Content.breakDmgDefShred.content",{DefIgnore:C.precisionRound(100*r[e])})},spdBuffConditional:{lc:!0,id:"spdBuffConditional",formItem:"switch",text:n("Content.spdBuffConditional.text"),content:n("Content.spdBuffConditional.content",{SpdBuff:C.precisionRound(100*s[e])})}};return{content:()=>Object.values(c),defaults:()=>l,precomputeEffects:(d,u,h)=>{const p=u.lightConeConditionals;zn(d,Ss,p.breakDmgDefShred?r[e]:0,o)},finalizeCalculations:(d,u,h)=>{},dynamicConditionals:[{id:"SailingTowardsASecondLifeConditional",type:Sa.ABILITY,activation:ea.SINGLE,dependsOn:[a.BE],chainsTo:[a.SPD],condition:function(d,u,h){return u.lightConeConditionals.spdBuffConditional&&d.a[f.BE]>=1.5},effect:(d,u,h)=>{d.SPD.buffDynamic(s[e]*h.baseSPD,o,u,h)},gpu:function(d,u){return ba(this,`
if (
  (*p_state).SailingTowardsASecondLifeConditional == 0.0 &&
  x.BE >= 1.50
) {
  (*p_state).SailingTowardsASecondLifeConditional = 1.0;
  (*p_x).SPD += ${s[e]} * baseSPD;
}
    `)}}]}},up=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.ScentAloneStaysTrue"),{SOURCE_LC:o}=v.lightCone("23032"),s=[.1,.12,.14,.16,.18],r=[.08,.1,.12,.14,.16],l={woefreeState:!0},c={woefreeState:!0,additionalVulnerability:!0},d={woefreeState:{lc:!0,id:"woefreeState",formItem:"switch",text:n("Content.woefreeState.text"),content:n("Content.woefreeState.content",{Vulnerability:C.precisionRound(100*s[e]),AdditionalVulnerability:C.precisionRound(100*r[e])})}},u={woefreeState:d.woefreeState,additionalVulnerability:{lc:!0,id:"additionalVulnerability",formItem:"switch",text:n("TeammateContent.additionalVulnerability.text"),content:n("TeammateContent.additionalVulnerability.content",{Vulnerability:C.precisionRound(100*s[e]),AdditionalVulnerability:C.precisionRound(100*r[e])})}};return{content:()=>Object.values(d),teammateContent:()=>Object.values(u),defaults:()=>l,teammateDefaults:()=>c,precomputeEffects:(h,p,S)=>{},precomputeMutualEffects:(h,p,S)=>{const D=p.lightConeConditionals;h.VULNERABILITY.buffTeam(D.woefreeState?s[e]:0,o)},precomputeTeammateEffects:(h,p,S)=>{const D=p.lightConeConditionals;h.VULNERABILITY.buffTeam(D.woefreeState&&D.additionalVulnerability?r[e]:0,o)},finalizeCalculations:(h,p,S)=>{const D=p.lightConeConditionals;h.VULNERABILITY.buff(D.woefreeState&&h.a[f.BE]>=1.5?r[e]:0,o)},gpuFinalizeCalculations:(h,p)=>{const S=h.lightConeConditionals;return`
if (${ki(S.woefreeState)} && x.BE >= 1.50) {
  x.VULNERABILITY += ${r[e]};
}
      `}}},mp=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.SheAlreadyShutHerEyes"),{SOURCE_LC:o}=v.lightCone("23011"),s=[.09,.105,.12,.135,.15],r={hpLostDmgBuff:!0},l={hpLostDmgBuff:!0},c={hpLostDmgBuff:{lc:!0,id:"hpLostDmgBuff",formItem:"switch",text:n("Content.hpLostDmgBuff.text"),content:n("Content.hpLostDmgBuff.content",{DmgBuff:C.precisionRound(100*s[e])})}},d={hpLostDmgBuff:c.hpLostDmgBuff};return{content:()=>Object.values(c),teammateContent:()=>Object.values(d),defaults:()=>r,teammateDefaults:()=>l,precomputeEffects:()=>{},precomputeMutualEffects:(u,h,p)=>{const S=h.lightConeConditionals;u.ELEMENTAL_DMG.buffTeam(S.hpLostDmgBuff?s[e]:0,o)},finalizeCalculations:()=>{}}},hp=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.SleepLikeTheDead"),{SOURCE_LC:o}=v.lightCone("23012"),s=[.36,.42,.48,.54,.6],r={missedCritCrBuff:!1},l={missedCritCrBuff:{lc:!0,id:"missedCritCrBuff",formItem:"switch",text:n("Content.missedCritCrBuff.text"),content:n("Content.missedCritCrBuff.content",{CritBuff:C.precisionRound(100*s[e])})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,d,u)=>{const h=d.lightConeConditionals;c.CR.buff(h.missedCritCrBuff?s[e]:0,o)},finalizeCalculations:()=>{}}},fp=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.SolitaryHealing"),{SOURCE_LC:o}=v.lightCone("24003"),s=[.24,.3,.36,.42,.48],r={postUltDotDmgBuff:!0},l={postUltDotDmgBuff:{lc:!0,formItem:"switch",id:"postUltDotDmgBuff",text:n("Content.postUltDotDmgBuff.text"),content:n("Content.postUltDotDmgBuff.content",{DmgBuff:C.precisionRound(100*s[e])})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,d,u)=>{const h=d.lightConeConditionals;We(c,Po,h.postUltDotDmgBuff?s[e]:0,o)},finalizeCalculations:()=>{}}},pp=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.SomethingIrreplaceable"),{SOURCE_LC:o}=v.lightCone("23002"),s=[.24,.28,.32,.36,.4],r=[.08,.09,.1,.11,.12],l={dmgBuff:!0},c={dmgBuff:{lc:!0,id:"dmgBuff",formItem:"switch",text:n("Content.dmgBuff.text"),content:n("Content.dmgBuff.content",{Multiplier:C.precisionRound(100*r[e]),DmgBuff:C.precisionRound(100*s[e])})}};return{content:()=>Object.values(c),defaults:()=>l,precomputeEffects:(d,u,h)=>{const p=u.lightConeConditionals;d.ELEMENTAL_DMG.buff(p.dmgBuff?s[e]:0,o)},finalizeCalculations:()=>{}}},gp=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.TextureOfMemories"),{SOURCE_LC:o}=v.lightCone("24002"),s=[.12,.15,.18,.21,.24],r=[.16,.2,.24,.28,.32],l={activeShieldDmgDecrease:!0},c={activeShieldDmgDecrease:{lc:!0,id:"activeShieldDmgDecrease",formItem:"switch",text:n("Content.activeShieldDmgDecrease.text"),content:n("Content.activeShieldDmgDecrease.content",{ShieldHp:C.precisionRound(100*r[e]),DmgReduction:C.precisionRound(100*s[e])})}};return{content:()=>Object.values(c),defaults:()=>l,precomputeEffects:(d,u,h)=>{const p=u.lightConeConditionals;d.DMG_RED_MULTI.multiply(p.activeShieldDmgDecrease?1-s[e]:1,o)},finalizeCalculations:()=>{}}},Sp=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.TheUnreachableSide"),{SOURCE_LC:o}=v.lightCone("23009"),s=[.24,.28,.32,.36,.4],r={dmgBuff:!0},l={dmgBuff:{lc:!0,id:"dmgBuff",formItem:"switch",text:n("Content.dmgBuff.text"),content:n("Content.dmgBuff.content",{DmgBuff:C.precisionRound(s[e]*100)})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,d,u)=>{const h=d.lightConeConditionals;c.ELEMENTAL_DMG.buff(h.dmgBuff?s[e]:0,o)},finalizeCalculations:()=>{}}},bp=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.ThoseManySprings"),{SOURCE_LC:o}=v.lightCone("23029"),s=[.1,.12,.14,.16,.18],r=[.14,.16,.18,.2,.22],l={unarmoredVulnerability:!0,corneredVulnerability:!0},c={unarmoredVulnerability:!0,corneredVulnerability:!0},d={unarmoredVulnerability:{lc:!0,id:"unarmoredVulnerability",formItem:"switch",text:n("Content.unarmoredVulnerability.text"),content:n("Content.unarmoredVulnerability.content",{UnarmoredVulnerability:C.precisionRound(s[e]*100),CorneredVulnerability:C.precisionRound(r[e]*100)})},corneredVulnerability:{lc:!0,id:"corneredVulnerability",formItem:"switch",text:n("Content.corneredVulnerability.text"),content:n("Content.corneredVulnerability.content",{UnarmoredVulnerability:C.precisionRound(s[e]*100),CorneredVulnerability:C.precisionRound(r[e]*100)})}},u={unarmoredVulnerability:d.unarmoredVulnerability,corneredVulnerability:d.corneredVulnerability};return{content:()=>Object.values(d),teammateContent:()=>Object.values(u),defaults:()=>l,teammateDefaults:()=>c,precomputeEffects:()=>{},precomputeMutualEffects:(h,p,S)=>{const D=p.lightConeConditionals;h.VULNERABILITY.buffTeam(D.unarmoredVulnerability||D.corneredVulnerability?s[e]:0,o),h.VULNERABILITY.buffTeam(D.corneredVulnerability?r[e]:0,o)},finalizeCalculations:()=>{}}},Dp=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.TimeWaitsForNoOne");v.lightCone("23013");const o=[.36,.42,.48,.54,.6],s={healingBasedDmgProc:!1},r={healingBasedDmgProc:{lc:!0,id:"healingBasedDmgProc",formItem:"switch",text:n("Content.healingBasedDmgProc.text"),content:n("Content.healingBasedDmgProc.content",{Multiplier:C.precisionRound(o[e]*100)})}};return{content:()=>Object.values(r),defaults:()=>s,precomputeEffects:()=>{},finalizeCalculations:()=>{}}},Rp=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.TimeWovenIntoGold"),{SOURCE_LC:o}=v.lightCone("23036"),s=[.09,.105,.12,.135,.15],r=[.09,.105,.12,.135,.15],l={brocadeStacks:6,maxStacksBasicDmgBoost:!0},c={brocadeStacks:{lc:!0,id:"brocadeStacks",formItem:"slider",text:n("Content.brocadeStacks.text"),content:n("Content.brocadeStacks.content",{CdBuff:C.precisionRound(s[e]*100),DmgBuff:C.precisionRound(r[e]*100)}),min:0,max:6},maxStacksBasicDmgBoost:{lc:!0,id:"maxStacksBasicDmgBoost",formItem:"switch",text:n("Content.maxStacksBasicDmgBoost.text"),content:n("Content.maxStacksBasicDmgBoost.content",{CdBuff:C.precisionRound(s[e]*100),DmgBuff:C.precisionRound(r[e]*100)})}};return{content:()=>Object.values(c),defaults:()=>l,precomputeEffects:(d,u,h)=>{const p=u.lightConeConditionals;d.CD.buffDual(p.brocadeStacks*s[e],o),d.BASIC_DMG_BOOST.buffDual(p.brocadeStacks>=6&&p.maxStacksBasicDmgBoost?p.brocadeStacks*r[e]:0,o)},finalizeCalculations:()=>{}}},Ep=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.WhereaboutsShouldDreamsRest"),{SOURCE_LC:o}=v.lightCone("23025"),s=[.24,.28,.32,.36,.4],r={routedVulnerability:!0},l={routedVulnerability:{lc:!0,id:"routedVulnerability",formItem:"switch",text:n("Content.routedVulnerability.text"),content:n("Content.routedVulnerability.content",{Vulnerability:s[e]*100})}};return{content:()=>Object.values(l),defaults:()=>r,precomputeEffects:(c,d,u)=>{const h=d.lightConeConditionals;c.VULNERABILITY.buff(h.routedVulnerability?s[e]:0,o)},finalizeCalculations:()=>{}}},Cp=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.WorrisomeBlissful"),{SOURCE_LC:o}=v.lightCone("23016"),s=[.3,.35,.4,.45,.5],r=[.12,.14,.16,.18,.2],l={targetTameStacks:2},c={targetTameStacks:2},d={targetTameStacks:{lc:!0,id:"targetTameStacks",formItem:"slider",text:n("Content.targetTameStacks.text"),content:n("Content.targetTameStacks.content",{CritBuff:C.precisionRound(100*r[e])}),min:0,max:2}},u={targetTameStacks:d.targetTameStacks};return{content:()=>Object.values(d),teammateContent:()=>Object.values(u),defaults:()=>l,teammateDefaults:()=>c,precomputeEffects:(h,p,S)=>{We(h,ga,s[e],o)},precomputeMutualEffects:(h,p,S)=>{const D=p.lightConeConditionals;h.CD.buffTeam(D.targetTameStacks*r[e],o)},finalizeCalculations:()=>{}}},Tp=(e,t)=>{const n=C.wrappedFixedT(t).get(null,"conditionals","Lightcones.YetHopeIsPriceless"),{SOURCE_LC:o}=v.lightCone("23028"),s=[.12,.14,.16,.18,.2],r=[.2,.24,.28,.32,.36],l={fuaDmgBoost:!0,ultFuaDefShred:!0},c={fuaDmgBoost:{lc:!0,id:"fuaDmgBoost",formItem:"switch",text:n("Content.fuaDmgBoost.text"),content:n("Content.fuaDmgBoost.content",{DmgBuff:C.precisionRound(s[e]*100)})},ultFuaDefShred:{lc:!0,id:"ultFuaDefShred",formItem:"switch",text:n("Content.ultFuaDefShred.text"),content:n("Content.ultFuaDefShred.content",{DefShred:C.precisionRound(s[e]*100)})}};return{content:()=>Object.values(c),defaults:()=>l,precomputeEffects:(d,u,h)=>{const p=u.lightConeConditionals;zn(d,xt|ga,p.ultFuaDefShred?r[e]:0,o)},finalizeCalculations:(d,u,h)=>{const p=u.lightConeConditionals;We(d,ga,p.fuaDmgBoost?s[e]*Math.min(4,Math.floor(d.a[f.CD]-1.2)/.2):0,o)},gpuFinalizeCalculations:(d,u)=>{const h=d.lightConeConditionals;return`
if (${ki(h.fuaDmgBoost)}) {
  buffAbilityDmg(p_x, FUA_DMG_TYPE, ${s[e]} * min(4, floor(x.CD - 1.20) / 0.20), 1);
}
    `}}},yp={23e3:ip,23001:Xf,23002:pp,23003:Hf,23004:Uf,23005:ap,23006:lp,23007:Vf,23008:Kf,23009:Sp,23010:Lf,23011:mp,23012:hp,23013:Dp,23014:Jf,23015:Ff,23016:Cp,23017:np,23018:_f,23019:rp,23020:Af,23021:kf,23022:cp,23023:zf,23024:vf,23025:Ep,23026:Zf,23027:dp,23028:Tp,23029:bp,23030:Of,23031:Qf,23032:up,23033:sp,23034:xf,23035:qf,24e3:op,24001:wf,24002:gp,24003:fp,24004:jf,23036:Rp,23037:Yf,23038:Nf,23039:Wf,23040:ep,23041:$f,24005:tp},Pp={21e3:sf,21001:W1,21002:v1,21003:Q1,21004:X1,21005:bf,21006:pf,21007:uf,21008:F1,21009:z1,21010:ff,21011:af,21012:P1,21013:U1,21014:tf,21015:rf,21016:Cf,21017:mf,21018:x1,21019:Tf,21020:j1,21021:of,21022:H1,21023:If,21024:cf,21025:$1,21026:Mf,21027:Df,21028:Pf,21029:Bf,21030:Rf,21031:lf,21032:G1,21033:J1,21034:Ef,21035:Gf,21036:L1,21037:w1,21038:O1,21039:_1,21040:gf,21041:V1,21042:N1,21043:M1,21044:B1,21045:y1,21046:nf,21047:df,21048:A1,21050:yf,21051:K1,21052:hf,22e3:I1,22001:Z1,22002:k1,22003:Y1,22004:Sf},Ip={2e4:kh,20001:o1,20002:s1,20003:Oh,20004:T1,20005:Kh,20006:l1,20007:r1,20008:d1,20009:C1,20010:c1,20011:m1,20012:f1,20013:S1,20014:wh,20015:p1,20016:g1,20017:b1,20018:u1,20019:h1,20020:R1,20021:E1,20022:D1},Bp={...yp,...Pp,...Ip},aa={get:(e,t=!1)=>{const n=Bp[e.lightCone];return!n||e.lightConePath!==e.path&&!(window!=null&&window.WEBGPU_DEBUG)?{content:()=>[],defaults:()=>({}),precomputeEffects:()=>{},finalizeCalculations:()=>{}}:n(e.lightConeSuperimposition-1,t,{element:e.element})}};function Gd(e){var r;const t=B.getScoringMetadata(e.id),n=((r=t==null?void 0:t.traces)==null?void 0:r.deactivated)??[],o={...e.traces},s=[...e.traceTree];for(;s.length;){const l=s.pop();s.push(...l.children),n.includes(l.id)&&o[l.stat]&&(o[l.stat]=Math.max(0,o[l.stat]-l.value))}return o}function ii(){const e={mainStat:a.HP,mainValue:0};for(const t of Object.values(a))e[t]=0;return{set:-1,augmentedStats:e,substats:[]}}function Gp(){return{[a.HP]:0,[a.ATK]:0,[a.DEF]:0}}const sl={SpaceSealingStation:{key:"SpaceSealingStation",index:0,p2c:(e,t)=>{e.ATK_P.buff(.12,v.SpaceSealingStation)}},FleetOfTheAgeless:{key:"FleetOfTheAgeless",index:1,p2c:(e,t)=>{e.HP_P.buff(.12,v.FleetOfTheAgeless)}},PanCosmicCommercialEnterprise:{key:"PanCosmicCommercialEnterprise",index:2,p2c:(e,t)=>{e.EHR.buff(.1,v.PanCosmicCommercialEnterprise)}},BelobogOfTheArchitects:{key:"BelobogOfTheArchitects",index:3,p2c:(e,t)=>{e.DEF_P.buff(.15,v.BelobogOfTheArchitects)}},CelestialDifferentiator:{key:"CelestialDifferentiator",index:4,p2c:(e,t)=>{e.CD.buff(.16,v.CelestialDifferentiator)},p2x:(e,t,n)=>{n.enabledCelestialDifferentiator&&e.c.a[f.CD]>=1.2&&e.CR.buff(.6,v.CelestialDifferentiator)}},InertSalsotto:{key:"InertSalsotto",index:5,p2c:(e,t)=>{e.CR.buff(.08,v.InertSalsotto)}},TaliaKingdomOfBanditry:{key:"TaliaKingdomOfBanditry",index:6,p2c:(e,t)=>{e.BE.buff(.16,v.TaliaKingdomOfBanditry)}},SprightlyVonwacq:{key:"SprightlyVonwacq",index:7,p2c:(e,t)=>{e.ERR.buff(.05,v.SprightlyVonwacq)}},RutilantArena:{key:"RutilantArena",index:8,p2c:(e,t)=>{e.CR.buff(.08,v.RutilantArena)}},BrokenKeel:{key:"BrokenKeel",index:9,p2c:(e,t)=>{e.RES.buff(.1,v.BrokenKeel)}},FirmamentFrontlineGlamoth:{key:"FirmamentFrontlineGlamoth",index:10,p2c:(e,t)=>{e.ATK_P.buff(.12,v.FirmamentFrontlineGlamoth)}},PenaconyLandOfTheDreams:{key:"PenaconyLandOfTheDreams",index:11,p2c:(e,t)=>{e.ERR.buff(.05,v.PenaconyLandOfTheDreams)},p2x:(e,t,n)=>{n.enabledPenaconyLandOfTheDreams&&e.ELEMENTAL_DMG.buffMemo(.1,v.PenaconyLandOfTheDreams)}},SigoniaTheUnclaimedDesolation:{key:"SigoniaTheUnclaimedDesolation",index:12,p2c:(e,t)=>{e.CR.buff(.04,v.SigoniaTheUnclaimedDesolation)},p2x:(e,t,n)=>{e.CD.buff(.04*n.valueSigoniaTheUnclaimedDesolation,v.SigoniaTheUnclaimedDesolation)}},IzumoGenseiAndTakamaDivineRealm:{key:"IzumoGenseiAndTakamaDivineRealm",index:13,p2c:(e,t)=>{e.ATK_P.buff(.12,v.IzumoGenseiAndTakamaDivineRealm)},p2x:(e,t,n)=>{n.enabledIzumoGenseiAndTakamaDivineRealm&&e.CR.buff(.12,v.IzumoGenseiAndTakamaDivineRealm)}},DuranDynastyOfRunningWolves:{key:"DuranDynastyOfRunningWolves",index:14,p2c:(e,t)=>{},p2x:(e,t,n)=>{We(e,ga,.05*n.valueDuranDynastyOfRunningWolves,v.DuranDynastyOfRunningWolves),n.valueDuranDynastyOfRunningWolves>=5&&e.CD.buff(.25,v.DuranDynastyOfRunningWolves)}},ForgeOfTheKalpagniLantern:{key:"ForgeOfTheKalpagniLantern",index:15,p2c:(e,t)=>{e.SPD_P.buff(.06,v.ForgeOfTheKalpagniLantern)},p2x:(e,t,n)=>{n.enabledForgeOfTheKalpagniLantern&&e.BE.buff(.4,v.ForgeOfTheKalpagniLantern)}},LushakaTheSunkenSeas:{key:"LushakaTheSunkenSeas",index:16,p2c:(e,t)=>{e.ERR.buff(.05,v.LushakaTheSunkenSeas)}},TheWondrousBananAmusementPark:{key:"TheWondrousBananAmusementPark",index:17,p2c:(e,t)=>{e.CD.buff(.16,v.TheWondrousBananAmusementPark)},p2x:(e,t,n)=>{n.enabledTheWondrousBananAmusementPark&&e.CD.buff(.32,v.TheWondrousBananAmusementPark)}},BoneCollectionsSereneDemesne:{key:"BoneCollectionsSereneDemesne",index:18,p2c:(e,t)=>{e.HP_P.buff(.12,v.BoneCollectionsSereneDemesne)}},GiantTreeOfRaptBrooding:{key:"GiantTreeOfRaptBrooding",index:19,p2c:(e,t)=>{e.SPD_P.buff(.06,v.GiantTreeOfRaptBrooding)}}},ol={PasserbyOfWanderingCloud:{key:"PasserbyOfWanderingCloud",index:0,p2c:(e,t)=>{e.OHB.buff(.1,v.PasserbyOfWanderingCloud)}},MusketeerOfWildWheat:{key:"MusketeerOfWildWheat",index:1,p2c:(e,t)=>{e.ATK_P.buff(.12,v.MusketeerOfWildWheat)},p4c:(e,t)=>{e.SPD_P.buff(.06,v.MusketeerOfWildWheat)},p4x:(e,t,n)=>{We(e,Rn,.1,v.MusketeerOfWildWheat)}},KnightOfPurityPalace:{key:"KnightOfPurityPalace",index:2,p2c:(e,t)=>{e.DEF_P.buff(.15,v.KnightOfPurityPalace)},p4x:(e,t,n)=>{e.SHIELD_BOOST.buff(.2,v.KnightOfPurityPalace)}},HunterOfGlacialForest:{key:"HunterOfGlacialForest",index:3,p2c:(e,t)=>{t.elementalDamageType==a.Ice_DMG&&e.ICE_DMG_BOOST.buff(.1,v.HunterOfGlacialForest)},p4x:(e,t,n)=>{n.enabledHunterOfGlacialForest&&e.CD.buff(.25,v.HunterOfGlacialForest)}},ChampionOfStreetwiseBoxing:{key:"ChampionOfStreetwiseBoxing",index:4,p2c:(e,t)=>{t.elementalDamageType==a.Physical_DMG&&e.PHYSICAL_DMG_BOOST.buff(.1,v.ChampionOfStreetwiseBoxing)},p4x:(e,t,n)=>{e.ATK_P.buff(.05*n.valueChampionOfStreetwiseBoxing,v.ChampionOfStreetwiseBoxing)}},GuardOfWutheringSnow:{key:"GuardOfWutheringSnow",index:5,p2c:(e,t)=>{},p2x:(e,t,n)=>{e.DMG_RED_MULTI.multiply(1-.08,v.GuardOfWutheringSnow)}},FiresmithOfLavaForging:{key:"FiresmithOfLavaForging",index:6,p2c:(e,t)=>{t.elementalDamageType==a.Fire_DMG&&e.FIRE_DMG_BOOST.buff(.1,v.FiresmithOfLavaForging)},p4x:(e,t,n)=>{We(e,jt,.12,v.FiresmithOfLavaForging),n.enabledFiresmithOfLavaForging&&e.FIRE_DMG_BOOST.buff(.12,v.FiresmithOfLavaForging)}},GeniusOfBrilliantStars:{key:"GeniusOfBrilliantStars",index:7,p2c:(e,t)=>{t.elementalDamageType==a.Quantum_DMG&&e.QUANTUM_DMG_BOOST.buff(.1,v.GeniusOfBrilliantStars)},p4x:(e,t,n)=>{e.DEF_PEN.buff(n.enabledGeniusOfBrilliantStars?.2:.1,v.GeniusOfBrilliantStars)}},BandOfSizzlingThunder:{key:"BandOfSizzlingThunder",index:8,p2c:(e,t)=>{t.elementalDamageType==a.Lightning_DMG&&e.LIGHTNING_DMG_BOOST.buff(.1,v.BandOfSizzlingThunder)},p4x:(e,t,n)=>{n.enabledBandOfSizzlingThunder&&e.ATK_P.buff(.2,v.BandOfSizzlingThunder)}},EagleOfTwilightLine:{key:"EagleOfTwilightLine",index:9,p2c:(e,t)=>{t.elementalDamageType==a.Wind_DMG&&e.WIND_DMG_BOOST.buff(.1,v.EagleOfTwilightLine)}},ThiefOfShootingMeteor:{key:"ThiefOfShootingMeteor",index:10,p2c:(e,t)=>{e.BE.buff(.16,v.ThiefOfShootingMeteor)},p4c:(e,t)=>{e.BE.buff(.16,v.ThiefOfShootingMeteor)}},WastelanderOfBanditryDesert:{key:"WastelanderOfBanditryDesert",index:11,p2c:(e,t)=>{t.elementalDamageType==a.Imaginary_DMG&&e.IMAGINARY_DMG_BOOST.buff(.1,v.WastelanderOfBanditryDesert)},p4x:(e,t,n)=>{e.CD_BOOST.buff(.1*(n.valueWastelanderOfBanditryDesert==2?1:0),v.WastelanderOfBanditryDesert),n.valueWastelanderOfBanditryDesert>0&&e.CR_BOOST.buff(.1,v.WastelanderOfBanditryDesert)}},LongevousDisciple:{key:"LongevousDisciple",index:12,p2c:(e,t)=>{e.HP_P.buff(.12,v.LongevousDisciple)},p4x:(e,t,n)=>{e.CR.buff(.08*n.valueLongevousDisciple,v.LongevousDisciple)}},MessengerTraversingHackerspace:{key:"MessengerTraversingHackerspace",index:13,p2c:(e,t)=>{e.SPD_P.buff(.06,v.MessengerTraversingHackerspace)},p4x:(e,t,n)=>{n.enabledMessengerTraversingHackerspace&&e.SPD_P.buffTeam(.12,v.MessengerTraversingHackerspace)}},TheAshblazingGrandDuke:{key:"TheAshblazingGrandDuke",index:14,p2c:(e,t)=>{},p2x:(e,t,n)=>{We(e,ga,.2,v.TheAshblazingGrandDuke)},p4x:(e,t,n)=>{e.ATK_P.buff(.06*n.valueTheAshblazingGrandDuke,v.TheAshblazingGrandDuke)}},PrisonerInDeepConfinement:{key:"PrisonerInDeepConfinement",index:15,p2c:(e,t)=>{e.ATK_P.buff(.12,v.PrisonerInDeepConfinement)},p4x:(e,t,n)=>{e.DEF_PEN.buff(.06*n.valuePrisonerInDeepConfinement,v.PrisonerInDeepConfinement)}},PioneerDiverOfDeadWaters:{key:"PioneerDiverOfDeadWaters",index:16,p2x:(e,t,n)=>{n.valuePioneerDiverOfDeadWaters>=0&&e.ELEMENTAL_DMG.buff(.12,v.PioneerDiverOfDeadWaters)},p4c:(e,t)=>{e.CR.buff(.04,v.PioneerDiverOfDeadWaters)},p4x:(e,t,n)=>{e.CD_BOOST.buff(xp[n.valuePioneerDiverOfDeadWaters],v.PioneerDiverOfDeadWaters),n.valuePioneerDiverOfDeadWaters>2&&e.CR.buff(.04,v.PioneerDiverOfDeadWaters)}},WatchmakerMasterOfDreamMachinations:{key:"WatchmakerMasterOfDreamMachinations",index:17,p2c:(e,t)=>{e.BE.buff(.16,v.WatchmakerMasterOfDreamMachinations)},p4x:(e,t,n)=>{n.enabledWatchmakerMasterOfDreamMachinations&&e.BE.buffTeam(.3,v.WatchmakerMasterOfDreamMachinations)}},IronCavalryAgainstTheScourge:{key:"IronCavalryAgainstTheScourge",index:18,p2c:(e,t)=>{e.BE.buff(.16,v.IronCavalryAgainstTheScourge)}},TheWindSoaringValorous:{key:"TheWindSoaringValorous",index:19,p2c:(e,t)=>{e.ATK_P.buff(.12,v.TheWindSoaringValorous)},p4c:(e,t)=>{e.CR.buff(.06,v.TheWindSoaringValorous)},p4x:(e,t,n)=>{n.enabledTheWindSoaringValorous&&We(e,xt,.36,v.TheWindSoaringValorous)}},SacerdosRelivedOrdeal:{key:"SacerdosRelivedOrdeal",index:20,p2c:(e,t)=>{e.SPD_P.buff(.06,v.SacerdosRelivedOrdeal)},p4x:(e,t,n)=>{e.CD.buff(.18*n.valueSacerdosRelivedOrdeal,v.SacerdosRelivedOrdeal)}},ScholarLostInErudition:{key:"ScholarLostInErudition",index:21,p2c:(e,t)=>{e.CR.buff(.08,v.ScholarLostInErudition)},p4x:(e,t,n)=>{We(e,xt|jt,.2,v.ScholarLostInErudition),n.enabledScholarLostInErudition&&We(e,jt,.25,v.ScholarLostInErudition)}},HeroOfTriumphantSong:{key:"HeroOfTriumphantSong",index:22,p2c:(e,t)=>{e.ATK_P.buff(.12,v.HeroOfTriumphantSong)},p4x:(e,t,n)=>{n.enabledHeroOfTriumphantSong&&(e.SPD_P.buff(.06,v.HeroOfTriumphantSong),e.CD.buffDual(.3,v.HeroOfTriumphantSong))}},PoetOfMourningCollapse:{key:"PoetOfMourningCollapse",index:23,p2c:(e,t)=>{t.elementalDamageType==a.Quantum_DMG&&e.QUANTUM_DMG_BOOST.buff(.1,v.PoetOfMourningCollapse)},p4c:(e,t)=>{e.SPD_P.buff(-.08,v.PoetOfMourningCollapse)},p4x:(e,t,n)=>{e.CR.buffBaseDual((e.c.a[f.SPD]<110?.2:0)+(e.c.a[f.SPD]<95?.12:0),v.PoetOfMourningCollapse)}}},Mp={...ol,...sl},ct=Object.fromEntries(Object.keys(Mp).map(e=>[e,e])),xp={[-1]:0,0:0,1:.08,2:.12,3:.16,4:.24},Md=Object.entries(sl).sort((e,t)=>e[1].index-t[1].index).map(e=>e[1]),vp=Object.entries(sl).sort((e,t)=>e[1].index-t[1].index).map(e=>e[0]),$i=Object.entries(ol).sort((e,t)=>e[1].index-t[1].index).map(e=>e[1]),xd=Object.entries(ol).sort((e,t)=>e[1].index-t[1].index).map(e=>e[0]);function _p(e){const t=Object.create(null);for(let n=0;n<4;n++){const o=xd[e[n]];t[o]=(t[o]??0)+1}return e[4]==e[5]&&(t[vp[e[4]]]=2),t}function Ap(e,t,n,o){const s={};for(let r=0;r<4;r++){const l=o[r];if(s[l])continue;s[l]=!0;const c=xd[l],d=n[c]??0;if(d>=2){const u=$i[l];d>=2&&u.p2c&&u.p2c(e,t),d>=4&&u.p4c&&u.p4c(e,t)}}if(o[4]==o[5]){const r=Md[o[4]];r.p2c&&r.p2c(e,t)}}function Lp(e,t){const n=e.a,o=t.characterStatsBreakdown.base,s=t.characterStatsBreakdown.lightCone,r=t.characterStatsBreakdown.traces;switch(n[f.ELEMENTAL_DMG]=0,t.elementalDamageType){case a.Physical_DMG:n[f.ELEMENTAL_DMG]=Xt(a.Physical_DMG,o,s,r,e,0);break;case a.Fire_DMG:n[f.ELEMENTAL_DMG]=Xt(a.Fire_DMG,o,s,r,e,0);break;case a.Ice_DMG:n[f.ELEMENTAL_DMG]=Xt(a.Ice_DMG,o,s,r,e,0);break;case a.Lightning_DMG:n[f.ELEMENTAL_DMG]=Xt(a.Lightning_DMG,o,s,r,e,0);break;case a.Wind_DMG:n[f.ELEMENTAL_DMG]=Xt(a.Wind_DMG,o,s,r,e,0);break;case a.Quantum_DMG:n[f.ELEMENTAL_DMG]=Xt(a.Quantum_DMG,o,s,r,e,0);break;case a.Imaginary_DMG:n[f.ELEMENTAL_DMG]=Xt(a.Imaginary_DMG,o,s,r,e,0);break}}function Fp(e,t){const n=t.characterStatsBreakdown.base,o=t.characterStatsBreakdown.lightCone,s=t.characterStatsBreakdown.traces,r=e.a;r[f.SPD]=Gs(a.SPD,a.SPD_P,t.baseSPD,o,s,e,0),r[f.HP]=Gs(a.HP,a.HP_P,t.baseHP,o,s,e,0),r[f.ATK]=Gs(a.ATK,a.ATK_P,t.baseATK,o,s,e,0),r[f.DEF]=Gs(a.DEF,a.DEF_P,t.baseDEF,o,s,e,0),r[f.CR]=Xt(a.CR,n,o,s,e,0),r[f.CD]=Xt(a.CD,n,o,s,e,0),r[f.EHR]=Xt(a.EHR,n,o,s,e,0),r[f.RES]=Xt(a.RES,n,o,s,e,0),r[f.BE]=Xt(a.BE,n,o,s,e,0),r[f.ERR]=Xt(a.ERR,n,o,s,e,0),r[f.OHB]=Xt(a.OHB,n,o,s,e,0)}function Hp(e,t,n){const o=n.lightConeConditionalController,s=n.characterConditionalController;o.calculateBasicEffects&&o.calculateBasicEffects(e,t,n),s.calculateBasicEffects&&s.calculateBasicEffects(e,t,n)}function wp(e,t,n){const o=t.setConditionals,s=e.a,r=e.c,l=r.sets,c=r.setsArray,d=n.combatBuffs;if(s[f.ATK]+=r.a[f.ATK]+d.ATK+d.ATK_P*n.baseATK,s[f.DEF]+=r.a[f.DEF]+d.DEF+d.DEF_P*n.baseDEF,s[f.HP]+=r.a[f.HP]+d.HP+d.HP_P*n.baseHP,s[f.SPD]+=r.a[f.SPD]+d.SPD+d.SPD_P*n.baseSPD,s[f.CD]+=r.a[f.CD]+d.CD,s[f.CR]+=r.a[f.CR]+d.CR,s[f.BE]+=r.a[f.BE]+d.BE,s[f.EHR]+=r.a[f.EHR],s[f.RES]+=r.a[f.RES],s[f.ERR]+=r.a[f.ERR],s[f.OHB]+=r.a[f.OHB],s[f.BASE_ATK]=n.baseATK,s[f.BASE_DEF]=n.baseDEF,s[f.BASE_HP]=n.baseHP,s[f.BASE_SPD]=n.baseSPD,e.a[f.MEMOSPRITE]){const u=e.m.c,h=e.m.c.a,p=e.m.a;h[f.ATK]=e.a[f.MEMO_BASE_ATK_SCALING]*r.a[f.ATK]+e.a[f.MEMO_BASE_ATK_FLAT],h[f.DEF]=e.a[f.MEMO_BASE_DEF_SCALING]*r.a[f.DEF]+e.a[f.MEMO_BASE_DEF_FLAT],h[f.HP]=e.a[f.MEMO_BASE_HP_SCALING]*r.a[f.HP]+e.a[f.MEMO_BASE_HP_FLAT],h[f.SPD]=e.a[f.MEMO_BASE_SPD_SCALING]*r.a[f.SPD]+e.a[f.MEMO_BASE_SPD_FLAT],p[f.BASE_ATK]=u.a[f.ATK],p[f.BASE_DEF]=u.a[f.DEF],p[f.BASE_HP]=u.a[f.HP],p[f.BASE_SPD]=u.a[f.SPD],p[f.ATK]+=u.a[f.ATK],p[f.DEF]+=u.a[f.DEF],p[f.HP]+=u.a[f.HP],p[f.SPD]+=u.a[f.SPD],p[f.CD]+=r.a[f.CD],p[f.CR]+=r.a[f.CR],p[f.BE]+=r.a[f.BE],p[f.EHR]+=r.a[f.EHR],p[f.RES]+=r.a[f.RES],p[f.ERR]+=r.a[f.ERR],p[f.OHB]+=r.a[f.OHB]}if(s[f.ELEMENTAL_DMG]+=d.DMG_BOOST,s[f.EFFECT_RES_PEN]+=d.EFFECT_RES_PEN,s[f.VULNERABILITY]+=d.VULNERABILITY,s[f.BREAK_EFFICIENCY_BOOST]+=d.BREAK_EFFICIENCY,sc(e,n.elementalDamageType,r.a[f.ELEMENTAL_DMG]),e.a[f.MEMOSPRITE]&&sc(e.m,n.elementalDamageType,r.a[f.ELEMENTAL_DMG]),Op(e,n,o,l,c),s[f.SPD]+=s[f.SPD_P]*n.baseSPD,s[f.ATK]+=s[f.ATK_P]*n.baseATK,s[f.DEF]+=s[f.DEF_P]*n.baseDEF,s[f.HP]+=s[f.HP_P]*n.baseHP,e.a[f.MEMOSPRITE]){const u=e.m.a;u[f.SPD]+=u[f.SPD_P]*u[f.BASE_SPD],u[f.ATK]+=u[f.ATK_P]*u[f.BASE_ATK],u[f.DEF]+=u[f.DEF_P]*u[f.BASE_DEF],u[f.HP]+=u[f.HP_P]*u[f.BASE_HP]}c[4]==c[5]&&(ht(ct.SpaceSealingStation,l)&&Ut(vd,e,t,n),ht(ct.FleetOfTheAgeless,l)&&Ut(_d,e,t,n),ht(ct.BelobogOfTheArchitects,l)&&Ut(Ad,e,t,n),ht(ct.PanCosmicCommercialEnterprise,l)&&Ut(Ld,e,t,n),ht(ct.BrokenKeel,l)&&Ut(Fd,e,t,n),ht(ct.TaliaKingdomOfBanditry,l)&&Ut(Hd,e,t,n),ht(ct.BoneCollectionsSereneDemesne,l)&&Ut(kd,e,t,n),ht(ct.GiantTreeOfRaptBrooding,l)&&Ut(wd,e,t,n),ht(ct.GiantTreeOfRaptBrooding,l)&&Ut(Od,e,t,n));for(const u of n.characterConditionalController.dynamicConditionals??[])Ut(u,e,t,n);for(const u of n.lightConeConditionalController.dynamicConditionals??[])Ut(u,e,t,n);for(const u of t.teammateDynamicConditionals??[])Ut(u,e,t,n);return c[4]==c[5]&&(ht(ct.FirmamentFrontlineGlamoth,l)&&e.a[f.SPD]>=135&&e.ELEMENTAL_DMG.buff(e.a[f.SPD]>=160?.18:.12,v.FirmamentFrontlineGlamoth),ht(ct.RutilantArena,l)&&e.a[f.CR]>=.7&&We(e,Rn|jt,.2,v.RutilantArena),ht(ct.InertSalsotto,l)&&e.a[f.CR]>=.5&&We(e,xt|ga,.15,v.InertSalsotto)),kp(ct.IronCavalryAgainstTheScourge,l)&&e.a[f.BE]>=1.5&&(zn(e,Ss,.1,v.IronCavalryAgainstTheScourge),zn(e,Rd,e.a[f.BE]>=2.5?.15:0,v.IronCavalryAgainstTheScourge)),e}function Op(e,t,n,o,s){const[r,l,c,d,u,h]=s;if(u==h){const p=Md[u];p.p2x&&p.p2x(e,t,n)}if(r===l&&l===c&&c===d){const p=$i[r];p.p2x&&p.p2x(e,t,n),p.p4x&&p.p4x(e,t,n);return}if(r===l||r===c||r===d){const p=$i[r];p.p2x&&p.p2x(e,t,n)}if((l===c||l===d)&&l!==r){const p=$i[l];p.p2x&&p.p2x(e,t,n)}if(c===d&&c!==r&&c!==l){const p=$i[c];p.p2x&&p.p2x(e,t,n)}}function ht(e,t){return t[e]>>1}function kp(e,t){return t[e]>>2}function Kp(e,t,n,o,s,r,l,c){const d=e.a;if(t!=null&&t.condensedStats)for(const u of t.condensedStats)d[u[0]]+=u[1];if(n!=null&&n.condensedStats)for(const u of n.condensedStats)d[u[0]]+=u[1];if(o!=null&&o.condensedStats)for(const u of o.condensedStats)d[u[0]]+=u[1];if(s!=null&&s.condensedStats)for(const u of s.condensedStats)d[u[0]]+=u[1];if(r!=null&&r.condensedStats)for(const u of r.condensedStats)d[u[0]]+=u[1];if(l!=null&&l.condensedStats)for(const u of l.condensedStats)d[u[0]]+=u[1];c&&e.setWeight(t.weightScore+n.weightScore+o.weightScore+s.weightScore+r.weightScore+l.weightScore)}function Xt(e,t,n,o,s,r){return t[e]+n[e]+s.a[Gt[e]]+o[e]+r}function Gs(e,t,n,o,s,r,l){return n*(1+l+r.a[Gt[t]]+s[t]+o[t])+r.a[Gt[e]]+s[e]}const vd={id:"SpaceSealingStationConditional",type:Sa.SET,activation:ea.SINGLE,dependsOn:[a.SPD],chainsTo:[a.ATK],condition:function(e,t,n){return ht(ct.SpaceSealingStation,e.c.sets)&&e.a[f.SPD]>=120},effect:(e,t,n)=>{e.ATK.buffDynamic(.12*n.baseATK,v.SpaceSealingStation,t,n)},gpu:function(){return ba(this,`
if (
  p2((*p_sets).SpaceSealingStation) >= 1 &&
  (*p_state).SpaceSealingStationConditional == 0.0 &&
  x.SPD >= 120
) {
  (*p_state).SpaceSealingStationConditional = 1.0;
  (*p_x).ATK += 0.12 * baseATK;
}
    `)}},_d={id:"FleetOfTheAgelessConditional",type:Sa.SET,activation:ea.SINGLE,dependsOn:[a.SPD],chainsTo:[a.ATK],condition:function(e,t,n){return ht(ct.FleetOfTheAgeless,e.c.sets)&&e.a[f.SPD]>=120},effect:(e,t,n)=>{e.ATK.buffDynamic(.08*e.a[f.BASE_ATK],v.FleetOfTheAgeless,t,n),e.a[f.MEMOSPRITE]&&e.m.ATK.buffDynamic(.08*e.a[f.BASE_ATK],v.FleetOfTheAgeless,t,n)},gpu:function(){return ba(this,`
if (
  p2((*p_sets).FleetOfTheAgeless) >= 1 &&
  (*p_state).FleetOfTheAgelessConditional == 0.0 &&
  x.SPD >= 120
) {
  (*p_state).FleetOfTheAgelessConditional = 1.0;
  (*p_x).ATK += 0.08 * baseATK;
  (*p_m).ATK += 0.08 * baseATK;
}
    `)}},Ad={id:"BelobogOfTheArchitectsConditional",type:Sa.SET,activation:ea.SINGLE,dependsOn:[a.EHR],chainsTo:[a.DEF],condition:function(e,t,n){return ht(ct.BelobogOfTheArchitects,e.c.sets)&&e.a[f.EHR]>=.5},effect:(e,t,n)=>{e.DEF.buffDynamic(.15*n.baseDEF,v.BelobogOfTheArchitects,t,n)},gpu:function(){return ba(this,`
if (
  p2((*p_sets).BelobogOfTheArchitects) >= 1 &&
  (*p_state).BelobogOfTheArchitectsConditional == 0.0 &&
  x.EHR >= 0.50
) {
  (*p_state).BelobogOfTheArchitectsConditional = 1.0;
  (*p_x).DEF += 0.15 * baseDEF;
}
    `)}},Ld={id:"PanCosmicCommercialEnterpriseConditional",type:Sa.SET,activation:ea.CONTINUOUS,dependsOn:[a.EHR],chainsTo:[a.ATK],condition:function(e,t,n){return ht(ct.PanCosmicCommercialEnterprise,e.c.sets)},effect:function(e,t,n){const o=t.conditionalState[this.id]||0,s=Math.min(.25,.25*e.a[f.EHR])*n.baseATK;return t.conditionalState[this.id]=s,e.ATK.buffDynamic(s-o,v.PanCosmicCommercialEnterprise,t,n),s},gpu:function(){return ba(this,`
if (
  p2((*p_sets).PanCosmicCommercialEnterprise) >= 1
) {
  let stateValue: f32 = (*p_state).PanCosmicCommercialEnterpriseConditional;
  let buffValue: f32 = min(0.25, 0.25 * x.EHR) * baseATK;

  (*p_state).PanCosmicCommercialEnterpriseConditional = buffValue;
  (*p_x).ATK += buffValue - stateValue;
}
    `)}},Fd={id:"BrokenKeelConditional",type:Sa.SET,activation:ea.SINGLE,dependsOn:[a.RES],chainsTo:[a.CD],condition:function(e,t,n){return ht(ct.BrokenKeel,e.c.sets)&&e.a[f.RES]>=.3},effect:function(e,t,n){e.CD.buffDynamic(.1,v.BrokenKeel,t,n),e.a[f.MEMOSPRITE]&&e.m.CD.buffDynamic(.1,v.BrokenKeel,t,n)},gpu:function(){return ba(this,`
if (
  p2((*p_sets).BrokenKeel) >= 1 &&
  (*p_state).BrokenKeelConditional == 0.0 &&
  x.RES >= 0.30
) {
  (*p_state).BrokenKeelConditional = 1.0;
  (*p_x).CD += 0.10;
  (*p_m).CD += 0.10;
}
    `)}},Hd={id:"TaliaKingdomOfBanditryConditional",type:Sa.SET,activation:ea.SINGLE,dependsOn:[a.SPD],chainsTo:[a.BE],condition:function(e,t,n){return ht(ct.TaliaKingdomOfBanditry,e.c.sets)&&e.a[f.SPD]>=145},effect:function(e,t,n){e.BE.buffDynamic(.2,v.TaliaKingdomOfBanditry,t,n)},gpu:function(){return ba(this,`
if (
  p2((*p_sets).TaliaKingdomOfBanditry) >= 1 &&
  (*p_state).TaliaKingdomOfBanditryConditional == 0.0 &&
  x.SPD >= 145
) {
  (*p_state).TaliaKingdomOfBanditryConditional = 1.0;
  (*p_x).BE += 0.20;
}
    `)}},wd={id:"GiantTreeOfRaptBrooding135Conditional",type:Sa.SET,activation:ea.SINGLE,dependsOn:[a.SPD],chainsTo:[a.OHB],condition:function(e,t,n){return ht(ct.GiantTreeOfRaptBrooding,e.c.sets)&&e.a[f.SPD]>=135},effect:(e,t,n)=>{e.OHB.buffDynamic(.12,v.GiantTreeOfRaptBrooding,t,n),e.m.OHB.buffDynamic(.12,v.GiantTreeOfRaptBrooding,t,n)},gpu:function(){return ba(this,`
if (
  p2((*p_sets).GiantTreeOfRaptBrooding) >= 1 &&
  (*p_state).GiantTreeOfRaptBrooding135Conditional == 0.0 &&
  x.SPD >= 135
) {
  (*p_state).GiantTreeOfRaptBrooding135Conditional = 1.0;
  (*p_x).OHB += 0.12;
  (*p_m).OHB += 0.12;
}
    `)}},Od={id:"GiantTreeOfRaptBrooding180Conditional",type:Sa.SET,activation:ea.SINGLE,dependsOn:[a.SPD],chainsTo:[a.OHB],condition:function(e,t,n){return ht(ct.GiantTreeOfRaptBrooding,e.c.sets)&&e.a[f.SPD]>=180},effect:(e,t,n)=>{e.OHB.buffDynamic(.08,v.GiantTreeOfRaptBrooding,t,n),e.m.OHB.buffDynamic(.08,v.GiantTreeOfRaptBrooding,t,n)},gpu:function(){return ba(this,`
if (
  p2((*p_sets).GiantTreeOfRaptBrooding) >= 1 &&
  (*p_state).GiantTreeOfRaptBrooding180Conditional == 0.0 &&
  x.SPD >= 180
) {
  (*p_state).GiantTreeOfRaptBrooding180Conditional = 1.0;
  (*p_x).OHB += 0.08;
  (*p_m).OHB += 0.08;
}
    `)}},kd={id:"BoneCollectionsSereneDemesneConditional",type:Sa.SET,activation:ea.SINGLE,dependsOn:[a.HP],chainsTo:[a.CD],condition:function(e,t,n){return ht(ct.BoneCollectionsSereneDemesne,e.c.sets)&&e.a[f.HP]>=5e3},effect:(e,t,n)=>{e.CD.buffBaseDualDynamic(.28,v.BoneCollectionsSereneDemesne,t,n)},gpu:function(){return ba(this,`
if (
  p2((*p_sets).BoneCollectionsSereneDemesne) >= 1 &&
  (*p_state).BoneCollectionsSereneDemesneConditional == 0.0 &&
  x.HP >= 5000
) {
  (*p_state).BoneCollectionsSereneDemesneConditional = 1.0;
  (*p_x).CD += 0.28;
  (*p_m).CD += 0.28;
}
    `)}},jp=[vd,_d,Ad,Ld,Fd,Hd,wd,Od,kd];function Wp(e,t){const n=ta.get(t),o=aa.get(t),s=Np();Xs(s,o.dynamicConditionals??[]),Xs(s,n.dynamicConditionals??[]),Xs(s,jp||[]),wo(s,t.teammate0Metadata,e,0),wo(s,t.teammate1Metadata,e,1),wo(s,t.teammate2Metadata,e,2),e.conditionalRegistry=s,e.conditionalState={}}function wo(e,t,n,o){if(t){const r=(ta.get(t).teammateDynamicConditionals??[]).map(l=>{const c=Zp(l,o);return n.teammateDynamicConditionals.push(c),c});Xs(e,r)}}function Zp(e,t){const n={...e,teammateIndex:t};return n.id+=`_Teammate${t}`,n}function Np(){return{[a.HP]:[],[a.ATK]:[],[a.DEF]:[],[a.SPD]:[],[a.CR]:[],[a.CD]:[],[a.EHR]:[],[a.RES]:[],[a.BE]:[],[a.OHB]:[],[a.ERR]:[]}}function Xs(e,t){for(const n of t)for(const o of n.dependsOn)e[o].push(n)}function Vp(e,t){const n=[zp(e)],o=[Up(e)].filter(s=>s.id==t.characterId);for(let s=1;s<e.comboAbilities.length;s++){const r=e.comboAbilities[s];for(const l of n)l.processAbility(r,s);for(const l of o)l.processAbility(r,s)}}function zp(e,t){return{id:R.ScholarLostInErudition,state:{scholarActivated:!1},processAbility:function(n,o){n=="ULT"&&(this.state.scholarActivated=!0),n=="SKILL"&&this.state.scholarActivated?(this.state.scholarActivated=!1,oc(e,R.ScholarLostInErudition,o,!0)):oc(e,R.ScholarLostInErudition,o,!1)}}}function Up(e,t){return{id:"1407",state:{memoSkillEnhances:3,memoDmgStacks:0,e2Activated:!1},processAbility:function(n,o){let s=this.state.memoDmgStacks;if(n=="MEMO_SKILL"){const r=s+1;si(e,"memoDmgStacks",o,r),si(e,"memoSkillEnhances",o,Math.min(3,r)),s=Math.min(6,s+1)}else n=="MEMO_TALENT"?(si(e,"memoDmgStacks",o,s),si(e,"memoSkillEnhances",o,1)):(s=0,si(e,"memoDmgStacks",o,s),si(e,"memoSkillEnhances",o,1));this.state.memoDmgStacks=s,n=="ULT"&&(this.state.e2Activated=!0),n=="MEMO_SKILL"&&this.state.e2Activated?(this.state.e2Activated=!1,rc(e,"e2MemoSkillDmgBoost",o,!0)):rc(e,"e2MemoSkillDmgBoost",o,!1)}}}function oc(e,t,n,o){const s=e.comboCharacter.setConditionals[t];s.activations[n]=o}function rc(e,t,n,o){const s=e.comboCharacter.characterConditionals[t];s&&(s.activations[n]=o)}function si(e,t,n,o){const s=e.comboCharacter.characterConditionals[t];if(s){const r=s.partitions.find(l=>l.value==o);if(r)s.partitions.forEach(l=>l.activations[n]=!1),r.activations[n]=!0;else{s.partitions.forEach(c=>c.activations[n]=!1);const l={value:o,activations:new Array(e.comboAbilities.length).fill(!1)};l.activations[n]=!0,s.partitions.push(l)}s.partitions=s.partitions.sort((l,c)=>l.value-c.value)}}function Xp(e){const t={};for(const n of Object.values(m.Sets))t[n]=_i[n].selectionOptions?_i[n].selectionOptions(e):[];return t}const _i={[R.PasserbyOfWanderingCloud]:{type:ce.BOOLEAN},[R.MusketeerOfWildWheat]:{type:ce.BOOLEAN},[R.KnightOfPurityPalace]:{type:ce.BOOLEAN},[R.HunterOfGlacialForest]:{type:ce.BOOLEAN,modifiable:!0},[R.ChampionOfStreetwiseBoxing]:{type:ce.SELECT,modifiable:!0,selectionOptions:Jp},[R.GuardOfWutheringSnow]:{type:ce.BOOLEAN},[R.FiresmithOfLavaForging]:{type:ce.BOOLEAN,modifiable:!0},[R.GeniusOfBrilliantStars]:{type:ce.BOOLEAN,modifiable:!0},[R.BandOfSizzlingThunder]:{type:ce.BOOLEAN,modifiable:!0},[R.EagleOfTwilightLine]:{type:ce.BOOLEAN},[R.ThiefOfShootingMeteor]:{type:ce.BOOLEAN},[R.WastelanderOfBanditryDesert]:{type:ce.SELECT,selectionOptions:Qp,modifiable:!0},[R.LongevousDisciple]:{type:ce.SELECT,selectionOptions:$p,modifiable:!0},[R.MessengerTraversingHackerspace]:{type:ce.BOOLEAN,modifiable:!0},[R.TheAshblazingGrandDuke]:{type:ce.SELECT,selectionOptions:qp,modifiable:!0},[R.PrisonerInDeepConfinement]:{type:ce.SELECT,selectionOptions:eg,modifiable:!0},[R.PioneerDiverOfDeadWaters]:{type:ce.SELECT,selectionOptions:tg,modifiable:!0},[R.WatchmakerMasterOfDreamMachinations]:{type:ce.BOOLEAN,modifiable:!0},[R.IronCavalryAgainstTheScourge]:{type:ce.BOOLEAN},[R.TheWindSoaringValorous]:{type:ce.BOOLEAN,modifiable:!0},[R.SacerdosRelivedOrdeal]:{type:ce.SELECT,modifiable:!0,selectionOptions:Yp},[R.ScholarLostInErudition]:{type:ce.BOOLEAN,modifiable:!0},[R.HeroOfTriumphantSong]:{type:ce.BOOLEAN,modifiable:!0},[R.PoetOfMourningCollapse]:{type:ce.BOOLEAN,modifiable:!1},[R.SpaceSealingStation]:{type:ce.BOOLEAN},[R.FleetOfTheAgeless]:{type:ce.BOOLEAN},[R.PanCosmicCommercialEnterprise]:{type:ce.BOOLEAN},[R.BelobogOfTheArchitects]:{type:ce.BOOLEAN},[R.CelestialDifferentiator]:{type:ce.BOOLEAN,modifiable:!0},[R.InertSalsotto]:{type:ce.BOOLEAN},[R.TaliaKingdomOfBanditry]:{type:ce.BOOLEAN},[R.SprightlyVonwacq]:{type:ce.BOOLEAN},[R.RutilantArena]:{type:ce.BOOLEAN},[R.BrokenKeel]:{type:ce.BOOLEAN},[R.FirmamentFrontlineGlamoth]:{type:ce.BOOLEAN},[R.PenaconyLandOfTheDreams]:{type:ce.BOOLEAN},[R.SigoniaTheUnclaimedDesolation]:{type:ce.SELECT,modifiable:!0,selectionOptions:ag},[R.IzumoGenseiAndTakamaDivineRealm]:{type:ce.BOOLEAN,modifiable:!0},[R.DuranDynastyOfRunningWolves]:{type:ce.SELECT,modifiable:!0,selectionOptions:ng},[R.ForgeOfTheKalpagniLantern]:{type:ce.BOOLEAN,modifiable:!0},[R.LushakaTheSunkenSeas]:{type:ce.BOOLEAN},[R.TheWondrousBananAmusementPark]:{type:ce.BOOLEAN,modifiable:!0},[R.BoneCollectionsSereneDemesne]:{type:ce.BOOLEAN},[R.GiantTreeOfRaptBrooding]:{type:ce.BOOLEAN}};function Yp(e){const t=[];for(let n=0;n<=2;n++)t.push({display:e("Sacerdos.Display",{stackCount:n}),value:n,label:e("Sacerdos.Label",{stackCount:n,buffValue:C.precisionRound(18*n)})});return t}function Jp(e){const t=[];for(let n=0;n<=5;n++)t.push({display:e("Streetwise.Display",{stackCount:n}),value:n,label:e("Streetwise.Label",{stackCount:n,buffValue:C.precisionRound(5*n)})});return t}function Qp(e){return[{display:e("Wastelander.Off.Display"),value:0,label:e("Wastelander.Off.Label")},{display:e("Wastelander.Debuffed.Display"),value:1,label:e("Wastelander.Debuffed.Label")},{display:e("Wastelander.Imprisoned.Display"),value:2,label:e("Wastelander.Imprisoned.Label")}]}function $p(e){const t=[];for(let n=0;n<=2;n++)t.push({display:e("Longevous.Display",{stackCount:n}),value:n,label:e("Longevous.Label",{stackCount:n,buffValue:C.precisionRound(8*n)})});return t}function qp(e){const t=[];for(let n=0;n<=8;n++)t.push({display:e("Ashblazing.Display",{stackCount:n}),value:n,label:e("Ashblazing.Label",{stackCount:n,buffValue:C.precisionRound(6*n)})});return t}function eg(e){const t=[];for(let n=0;n<=3;n++)t.push({display:e("Prisoner.Display",{stackCount:n}),value:n,label:e("Prisoner.Label",{stackCount:n,buffValue:C.precisionRound(6*n)})});return t}function tg(e){return[{display:e("Diver.Off.Display"),value:-1,label:e("Diver.Off.Label")},{display:e("Diver.1Debuff.Display"),value:0,label:e("Diver.1Debuff.Label")},{display:e("Diver.2Debuff.Display"),value:1,label:e("Diver.2Debuff.Label")},{display:e("Diver.2+Debuff.Display"),value:2,label:e("Diver.2+Debuff.Label")},{display:e("Diver.3Debuff.Display"),value:3,label:e("Diver.3Debuff.Label")},{display:e("Diver.3+Debuff.Display"),value:4,label:e("Diver.3+Debuff.Label")}]}function ag(e){const t=[];for(let n=0;n<=10;n++)t.push({display:e("Sigonia.Display",{stackCount:n}),value:n,label:e("Sigonia.Label",{stackCount:n,buffValue:C.precisionRound(4*n)})});return t}function ng(e){const t=[];for(let n=0;n<=5;n++)t.push({display:e("Duran.Display",{stackCount:n}),value:n,label:e("Duran.Label",{stackCount:n,buffValue:C.precisionRound(5*n)})});return t[5].label=e("Duran.Label5"),t}let Ms;const Ee={save:()=>{const e=window.store.getState(),t={relics:B.getRelics(),characters:B.getCharacters(),scorerId:e.scorerId,scoringMetadataOverrides:e.scoringMetadataOverrides,showcasePreferences:e.showcasePreferences,optimizerMenuState:e.optimizerMenuState,excludedRelicPotentialCharacters:e.excludedRelicPotentialCharacters,savedSession:e.savedSession,settings:e.settings,version:eo,warpRequest:e.warpRequest,relicLocator:{inventoryWidth:e.inventoryWidth,rowLimit:e.rowLimit}};console.log("Saved state");const n=JSON.stringify(t);return localStorage.state=n,Ms=null,n},delayedSave:(e=5e3)=>{Ms&&clearTimeout(Ms),Ms=setTimeout(()=>{Ee.save()},e)},load:(e=!0)=>{try{const t=localStorage.state;if(t){const n=JSON.parse(t);return console.log("Loaded SaveState"),B.setStore(n,e),!0}return console.log("No SaveState found"),!1}catch(t){return console.error("Error loading state",t),!1}}};function hn(e,t){return e.includes(t)}function ig(e,t){return e.reduce((n,o)=>(n[o[t]]=o,n),{})}function sg(e){return e.reduce((t,n)=>(t[n]=!0,t),{})}function og(e){return e.filter((t,n,o)=>o.indexOf(t)===n)}function rg(e){return e.filter(t=>t!=null)}function ao(e,t){var p,S;const n=B.getMetadata();n.lightCones,n.characters;const o={};if(!e.characterId)return o;const s=9;if(o.comboAbilities=[null],e.comboAbilities)for(let D=1;D<=9;D++){const E=e.comboAbilities[D];if(E==null)break;o.comboAbilities.push(E)}const r=yn(e,n),l=ta.get(r),c=aa.get(r),d=e.characterConditionals,u=e.lightConeConditionals,h=e.setConditionals;if(o.comboCharacter={metadata:r,characterConditionals:no(d,l.content(),l.defaults(),s),lightConeConditionals:no(u,c.content(),c.defaults(),s),setConditionals:dg(h,s),displayedRelicSets:[],displayedOrnamentSets:[]},o.comboTeammate0=Ko(e.teammate0,s,n),o.comboTeammate1=Ko(e.teammate1,s,n),o.comboTeammate2=Ko(e.teammate2,s,n),e.comboStateJson&&t){const D=JSON.parse(e.comboStateJson);o.comboCharacter.displayedOrnamentSets=((p=D==null?void 0:D.comboCharacter)==null?void 0:p.displayedOrnamentSets)??[],o.comboCharacter.displayedRelicSets=((S=D==null?void 0:D.comboCharacter)==null?void 0:S.displayedRelicSets)??[],cg(o,D)}return Vp(o,e),Oo(o.comboCharacter.characterConditionals),Oo(o.comboCharacter.lightConeConditionals),Oo(o.comboCharacter.setConditionals),lg(e,o),o}function Oo(e){if(e){for(const[t,n]of Object.entries(e))if(n.type==ce.NUMBER){const o=n;for(let s=0;s<o.partitions.length;s++){const r=o.partitions[s];if(r.activations[0]){o.partitions.splice(s,1),o.partitions.unshift(r);break}}}}}function yn(e,t){var n,o,s;return{characterId:e.characterId,characterEidolon:e.characterEidolon,path:(n=t.characters[e.characterId])==null?void 0:n.path,lightCone:e.lightCone,lightConeSuperimposition:e.lightConeSuperimposition,lightConePath:(o=t.lightCones[e.lightCone])==null?void 0:o.path,element:(s=t.characters[e.characterId])==null?void 0:s.element}}function lg(e,t){const n=ji({id:e.characterId}),o=B.getMetadata().characters[e.characterId].scoringMetadata.presets||[];for(const c of o)c.apply(n);const s=[];for(const[c,d]of Object.entries(n.setConditionals)){const u=d[1],h=t.comboCharacter.setConditionals[c];if(!h)s.push(c);else if(h.type==ce.BOOLEAN)for(let p=0;p<t.comboAbilities.length;p++){const S=h.activations[p];if(S==null)break;if(S!=u){s.push(c);break}}else if(h.type==ce.SELECT){for(const p of h.partitions)if(p.value!=u){s.push(c);break}}}const r=s.filter(c=>hn(Ja,c)),l=s.filter(c=>hn(Qa,c));t.comboCharacter.displayedRelicSets=Array.from(new Set([...r,...t.comboCharacter.displayedRelicSets])),t.comboCharacter.displayedOrnamentSets=Array.from(new Set([...l,...t.comboCharacter.displayedOrnamentSets]))}function cg(e,t){var n,o,s,r,l;console.log("mergeComboStates"),e.comboCharacter.metadata.characterId==((o=(n=t==null?void 0:t.comboCharacter)==null?void 0:n.metadata)==null?void 0:o.characterId)&&(wn(e.comboCharacter.characterConditionals,(s=t==null?void 0:t.comboCharacter)==null?void 0:s.characterConditionals),wn(e.comboCharacter.lightConeConditionals,(r=t==null?void 0:t.comboCharacter)==null?void 0:r.lightConeConditionals),wn(e.comboCharacter.setConditionals,(l=t==null?void 0:t.comboCharacter)==null?void 0:l.setConditionals),ko(e.comboTeammate0,t==null?void 0:t.comboTeammate0),ko(e.comboTeammate1,t==null?void 0:t.comboTeammate1),ko(e.comboTeammate2,t==null?void 0:t.comboTeammate2))}function ko(e,t){!e||!t||(wn(e.characterConditionals,t.characterConditionals),wn(e.lightConeConditionals,t.lightConeConditionals),wn(e.relicSetConditionals,t.relicSetConditionals),wn(e.ornamentSetConditionals,t.ornamentSetConditionals))}function wn(e,t){if(t)for(const[n,o]of Object.entries(e)){const s=t[n];if(s&&o.type==s.type)if(o.type==ce.BOOLEAN){const r=o,l=s;l.activations[0]=r.activations[0],e[n]=s}else{const r=o,l=s,c=[],d={};for(let u=0;u<l.partitions.length;u++){const h=l.partitions[u];if(d[h.value])for(let p=0;p<d[h.value].activations.length;p++)d[h.value].activations[p]=d[h.value].activations[p]||l.partitions[u].activations[p];else d[h.value]=h,c.push(h)}for(let u=0;u<r.partitions.length;u++){const h=r.partitions[u];d[h.value]?d[h.value].activations[0]=r.partitions[u].activations[0]:(d[h.value]=h,c.push(h))}l.partitions=c,e[n]=s}}}function no(e,t,n,o){const s={};for(const r of t)if(!r.disabled){if(r.formItem=="switch"){const l=e[r.id]??n[r.id],c=Array(o).fill(l);s[r.id]={type:ce.BOOLEAN,activations:c}}else if(r.formItem=="slider"){const l=e[r.id]??n[r.id],c=Array(o).fill(!0),d={value:l,activations:c};s[r.id]={type:ce.NUMBER,partitions:[d]}}else if(r.formItem=="select"){const l=e[r.id]??n[r.id],c=Array(o).fill(!0),d={value:l,activations:c};s[r.id]={type:ce.SELECT,partitions:[d]}}}return s}function dg(e,t){const n={};for(const[o,s]of Object.entries(e)){const r=s[1];if(_i[o].type==ce.SELECT){const l=r,c=Array(t).fill(!0),d={value:l,activations:c};n[o]={type:ce.SELECT,partitions:[d]}}else{const l=Array(t).fill(r);n[o]={type:ce.BOOLEAN,activations:l}}}return n}function Ko(e,t,n){var p,S,D,E;if(!(e!=null&&e.characterId))return null;const o=e.characterConditionals||{},s=e.lightConeConditionals||{},r=yn(e,n),l=ta.get(r),c=aa.get(r),d={},u={};return e.teamRelicSet&&(d[e.teamRelicSet]={type:ce.BOOLEAN,activations:Array(t).fill(!0)}),e.teamOrnamentSet&&(u[e.teamOrnamentSet]={type:ce.BOOLEAN,activations:Array(t).fill(!0)}),{metadata:r,characterConditionals:no(o,((p=l.teammateContent)==null?void 0:p.call(l))??[],((S=l.teammateDefaults)==null?void 0:S.call(l))??{},t),lightConeConditionals:no(s,((D=c.teammateContent)==null?void 0:D.call(c))??[],((E=c.teammateDefaults)==null?void 0:E.call(c))??{},t),relicSetConditionals:d,ornamentSetConditionals:u}}function rl(e,t,n){let o;if(e.includes("comboCharacter")){const s=n.comboCharacter;e.includes("RelicSets")?o=s.setConditionals:e.includes("LightCone")?o=s.lightConeConditionals:o=s.characterConditionals}else if(e.includes("comboTeammate")){const s=e.substring(0,14),r=n[s];e.includes("RelicSet")?o=r.relicSetConditionals:e.includes("OrnamentSet")?o=r.ornamentSetConditionals:e.includes("LightCone")?o=r.lightConeConditionals:o=r.characterConditionals}else return null;return o[t]}function Kd(e,t){if(!e.id)return null;const n=rl(e.source,e.id,t);if(!n)return null;if(n.type==ce.BOOLEAN){const o=n,s=o.activations;return{comboConditional:o,activations:s,index:e.index,value:s[e.index]}}else if(n.type==ce.NUMBER){const o=n,s=o.partitions[e.partitionIndex].activations;return{comboConditional:o,activations:s,index:e.index,value:s[e.index]}}else if(n.type==ce.SELECT){const o=n,s=o.partitions[e.partitionIndex].activations;return{comboConditional:o,activations:s,index:e.index,value:s[e.index]}}return null}function ll(e,t){const n=JSON.parse(e);return Kd(n,t)}function lc(e,t,n){const o=JSON.parse(e);if(!o.id||o.index==0)return;const s=ll(e,n);s&&(s.comboConditional.type==ce.NUMBER||s.comboConditional.type==ce.SELECT||(s.activations[s.index]=t))}function cc(e,t){console.log("updatePartitionActivation");const n=JSON.parse(e);if(!n.id||n.index==0)return;const o=ll(e,t);if(o&&(o.comboConditional.type==ce.NUMBER||o.comboConditional.type==ce.SELECT)){const s=o.comboConditional,r=n.partitionIndex,l=n.index;for(let c=0;c<s.partitions.length;c++){const d=s.partitions[c];d.activations[l]=c==r}window.store.getState().setComboState({...t})}}function jd(e,t,n){console.log("updateAddPartition");const o=window.store.getState().comboState,s=rl(e,t,o);if(!s)return null;const r=s.partitions[n];s.partitions.push({value:r.value,activations:Array(r.activations.length).fill(!1)}),window.store.getState().setComboState({...o})}function Wd(e,t,n){if(console.log("updateDeletePartition"),n==0)return;const o=window.store.getState().comboState,s=rl(e,t,o);if(!s)return null;s.partitions.splice(n,1);for(let r=0;r<s.partitions[0].activations.length;r++){let l=!1;for(let c=0;c<s.partitions.length;c++)if(s.partitions[c].activations[r]){l=!0;break}l||(s.partitions[0].activations[r]=!0)}window.store.getState().setComboState({...o})}function dc(e,t){console.log("updateSelectedSets");const n=window.store.getState().comboState,o=n.comboCharacter.setConditionals;if(t){n.comboCharacter.displayedOrnamentSets=e;for(const s of Object.values(qn))e.includes(s)?o[s].display=!0:o[s].display=!1}else{n.comboCharacter.displayedRelicSets=e;for(const s of Object.values($n))e.includes(s)?o[s].display=!0:o[s].display=!1}cl(n),window.store.getState().setComboState({...n})}function Zd(e,t,n,o){console.log("updateNumberDefaultSelection");const s=window.store.getState().comboState,l=Kd({id:t,source:e,index:0,partitionIndex:n},s);if(l&&(l.comboConditional.type==ce.NUMBER||l.comboConditional.type==ce.SELECT)){const c=l.comboConditional;c.partitions[n].value=o,window.store.getState().setComboState({...s})}}function ug(e,t){e.splice(t,1),e.push(e[0])}function Nd(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(n==="activations"&&Array.isArray(e[n])&&ug(e[n],t),typeof e[n]=="object"&&e[n]!==null&&Nd(e[n],t))}function Vd(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(n==="activations"&&Array.isArray(e[n])&&(e[n][t]=e[n][0]),typeof e[n]=="object"&&e[n]!==null&&Vd(e[n],t))}function uc(e,t){console.log("updateAbilityRotation");const n=window.store.getState().comboState,o=n.comboAbilities;if(!(e>o.length)){if(t==null){if(o.length<=2)return;o.splice(e,1),Nd(n,e)}else o[e]=t,Vd(n,e);window.store.getState().setComboState({...n})}}function cl(e){console.log("updateFormState"),window.optimizerForm.setFieldValue("comboStateJson",JSON.stringify(e)),window.optimizerForm.setFieldValue("comboAbilities",e.comboAbilities);const t=se.getForm();B.replaceCharacterForm(t),Ee.delayedSave(1e3)}function Ka(e,t,n=!1){for(const[o,s]of Object.entries(e)){const r=t[o];if(r&&r.type==ce.BOOLEAN)for(let l=0;l<=8;l++)n?r.activations[l]=s[1]:r.activations[l]=s}}function mg(e){var n,o,s,r,l,c,d,u,h,p,S,D;console.log("updateConditionalChange",e);const t=window.store.getState().comboState;e.characterConditionals&&Ka(e.characterConditionals,t.comboCharacter.characterConditionals),e.lightConeConditionals&&Ka(e.lightConeConditionals,t.comboCharacter.lightConeConditionals),e.setConditionals&&Ka(e.setConditionals,t.comboCharacter.setConditionals,!0),(n=e.teammate0)!=null&&n.characterConditionals&&Ka(e.teammate0.characterConditionals,((o=t.comboTeammate0)==null?void 0:o.characterConditionals)??{}),(s=e.teammate0)!=null&&s.lightConeConditionals&&Ka(e.teammate0.lightConeConditionals,((r=t.comboTeammate0)==null?void 0:r.lightConeConditionals)??{}),(l=e.teammate1)!=null&&l.characterConditionals&&Ka(e.teammate1.characterConditionals,((c=t.comboTeammate1)==null?void 0:c.characterConditionals)??{}),(d=e.teammate1)!=null&&d.lightConeConditionals&&Ka(e.teammate1.lightConeConditionals,((u=t.comboTeammate1)==null?void 0:u.lightConeConditionals)??{}),(h=e.teammate2)!=null&&h.characterConditionals&&Ka(e.teammate2.characterConditionals,((p=t.comboTeammate2)==null?void 0:p.characterConditionals)??{}),(S=e.teammate2)!=null&&S.lightConeConditionals&&Ka(e.teammate2.lightConeConditionals,((D=t.comboTeammate2)==null?void 0:D.lightConeConditionals)??{}),window.store.getState().setComboState({...t}),cl(t)}const mc="1313";function zd(e,t){if((!e.comboStateJson||e.comboStateJson=="{}")&&(e.comboType="simple"),e.comboType=="advanced"){const n=ao(e,!0);hc(n,e,t)}else{const n=ao(e,!1);hc(n,e,t)}}function hc(e,t,n){const o=Sg(t.comboAbilities),s=[];for(let r=0;r<o.length;r++)s.push(hg(r,e,o,t,n));n.actions=s,n.comboDot=t.comboDot||0,n.comboBreak=t.comboBreak||0,n.activeAbilities=n.characterConditionalController.activeAbilities??[],n.activeAbilityFlags=n.activeAbilities.reduce((r,l)=>r|l,0)}function hg(e,t,n,o,s){const r={characterConditionals:{},lightConeConditionals:{},setConditionals:{},teammate0:{characterConditionals:{},lightConeConditionals:{}},teammate1:{characterConditionals:{},lightConeConditionals:{}},teammate2:{characterConditionals:{},lightConeConditionals:{}},teammateDynamicConditionals:[]};return r.actorId=s.characterId,r.actionIndex=e,r.actionType=n[e],r.characterConditionals=ha(e,t.comboCharacter.characterConditionals),r.lightConeConditionals=ha(e,t.comboCharacter.lightConeConditionals),r.setConditionals=gg(e,t.comboCharacter.setConditionals),r.setConditionals=bg(r.setConditionals,s),r.precomputedX=new Ma(o.trace),r.precomputedX.setPrecompute(xr()),r.precomputedM=r.precomputedX.m,r.precomputedM.setPrecompute(xr()),t.comboTeammate0&&(r.teammate0.actorId=t.comboTeammate0.metadata.characterId,r.teammate0.characterConditionals=ha(e,t.comboTeammate0.characterConditionals),r.teammate0.lightConeConditionals=ha(e,t.comboTeammate0.lightConeConditionals)),t.comboTeammate1&&(r.teammate1.actorId=t.comboTeammate1.metadata.characterId,r.teammate1.characterConditionals=ha(e,t.comboTeammate1.characterConditionals),r.teammate1.lightConeConditionals=ha(e,t.comboTeammate1.lightConeConditionals)),t.comboTeammate2&&(r.teammate2.actorId=t.comboTeammate2.metadata.characterId,r.teammate2.characterConditionals=ha(e,t.comboTeammate2.characterConditionals),r.teammate2.lightConeConditionals=ha(e,t.comboTeammate2.lightConeConditionals)),fg(r,t,s),Wp(r,s),r}function fg(e,t,n){var c,d,u,h,p,S,D,E;const o=ta.get(t.comboCharacter.metadata),s=aa.get(t.comboCharacter.metadata),r=e.precomputedX;n.deprioritizeBuffs&&r.DEPRIORITIZE_BUFFS.set(1,v.NONE),(c=s.initializeConfigurations)==null||c.call(s,r,e,n),(d=o.initializeConfigurations)==null||d.call(o,r,e,n);const l=[t.comboTeammate0,t.comboTeammate1,t.comboTeammate2].filter(y=>{var P;return!!((P=y==null?void 0:y.metadata)!=null&&P.characterId)});for(let y=0;y<l.length;y++){const P=l[y],_={actorId:P.metadata.characterId,characterConditionals:ha(e.actionIndex,P.characterConditionals),lightConeConditionals:ha(e.actionIndex,P.lightConeConditionals)},x=ta.get(P.metadata),G=aa.get(P.metadata);(u=x.initializeTeammateConfigurations)==null||u.call(x,r,_,n),(h=G.initializeTeammateConfigurations)==null||h.call(G,r,_,n)}(p=s.precomputeEffects)==null||p.call(s,r,e,n),(S=o.precomputeEffects)==null||S.call(o,r,e,n),(D=s.precomputeMutualEffects)==null||D.call(s,r,e,n),(E=o.precomputeMutualEffects)==null||E.call(o,r,e,n),pg(e,t,n),r.ENEMY_WEAKNESS_BROKEN.config(r.a[f.ENEMY_WEAKNESS_BROKEN]||n.enemyWeaknessBroken?1:0,v.NONE)}function pg(e,t,n){const o=e.precomputedX,s={},r=[t.comboTeammate0,t.comboTeammate1,t.comboTeammate2].filter(l=>{var c;return!!((c=l==null?void 0:l.metadata)!=null&&c.characterId)});for(let l=0;l<r.length;l++){const c=r[l],d=Object.assign({},r[l]),u={actorId:c.metadata.characterId,characterConditionals:ha(e.actionIndex,c.characterConditionals),lightConeConditionals:ha(e.actionIndex,c.lightConeConditionals)},h=ta.get(c.metadata),p=aa.get(c.metadata);h.precomputeMutualEffects&&h.precomputeMutualEffects(o,u,n),h.precomputeTeammateEffects&&h.precomputeTeammateEffects(o,u,n),p.precomputeMutualEffects&&p.precomputeMutualEffects(o,u,n),p.precomputeTeammateEffects&&p.precomputeTeammateEffects(o,u,n);for(const[S,D]of[...Object.entries(d.relicSetConditionals),...Object.entries(d.ornamentSetConditionals)]){if(D.type==ce.BOOLEAN){if(!D.activations[e.actionIndex])continue}else continue;switch(S){case R.BrokenKeel:o.CD.buffTeam(.1,v.BrokenKeel);break;case R.FleetOfTheAgeless:o.ATK_P.buffTeam(.08,v.FleetOfTheAgeless);break;case R.PenaconyLandOfTheDreams:if(t.comboCharacter.metadata.element!=d.metadata.element)break;o.ELEMENTAL_DMG.buffDual(.1,v.PenaconyLandOfTheDreams);break;case R.LushakaTheSunkenSeas:o.ATK_P.buff(.12,v.LushakaTheSunkenSeas);break;case R.MessengerTraversingHackerspace:if(s[R.MessengerTraversingHackerspace])break;o.SPD_P.buffTeam(.12,v.MessengerTraversingHackerspace);break;case R.WatchmakerMasterOfDreamMachinations:if(s[R.WatchmakerMasterOfDreamMachinations])break;o.BE.buffTeam(.3,v.WatchmakerMasterOfDreamMachinations);break;case ps:u.actorId==mc?o.CD.buffDual(.18,v.SacerdosRelivedOrdeal):o.CD.buffSingle(.18,v.SacerdosRelivedOrdeal);break;case gs:u.actorId==mc?o.CD.buffDual(.36,v.SacerdosRelivedOrdeal):o.CD.buffSingle(.36,v.SacerdosRelivedOrdeal);break}s[S]=!0}}}function ha(e,t){const n={};for(const[o,s]of Object.entries(t))n[o]=nt(s,e);return n}function nt(e,t){if(e.type==ce.BOOLEAN)return e.activations[t];{const n=e;for(let o=0;o<n.partitions.length;o++){const s=n.partitions[o];if(s.activations[t])return s.value}}return 0}function gg(e,t){return{enabledHunterOfGlacialForest:nt(t[R.HunterOfGlacialForest],e),enabledFiresmithOfLavaForging:nt(t[R.FiresmithOfLavaForging],e),enabledGeniusOfBrilliantStars:nt(t[R.GeniusOfBrilliantStars],e),enabledBandOfSizzlingThunder:nt(t[R.BandOfSizzlingThunder],e),enabledMessengerTraversingHackerspace:nt(t[R.MessengerTraversingHackerspace],e),enabledCelestialDifferentiator:nt(t[R.CelestialDifferentiator],e),enabledWatchmakerMasterOfDreamMachinations:nt(t[R.WatchmakerMasterOfDreamMachinations],e),enabledPenaconyLandOfTheDreams:nt(t[R.PenaconyLandOfTheDreams],e),enabledIzumoGenseiAndTakamaDivineRealm:nt(t[R.IzumoGenseiAndTakamaDivineRealm],e),enabledForgeOfTheKalpagniLantern:nt(t[R.ForgeOfTheKalpagniLantern],e),enabledTheWindSoaringValorous:nt(t[R.TheWindSoaringValorous],e),enabledTheWondrousBananAmusementPark:nt(t[R.TheWondrousBananAmusementPark],e),enabledScholarLostInErudition:nt(t[R.ScholarLostInErudition],e),enabledHeroOfTriumphantSong:nt(t[R.HeroOfTriumphantSong],e),valueChampionOfStreetwiseBoxing:nt(t[R.ChampionOfStreetwiseBoxing],e),valueWastelanderOfBanditryDesert:nt(t[R.WastelanderOfBanditryDesert],e),valueLongevousDisciple:nt(t[R.LongevousDisciple],e),valueTheAshblazingGrandDuke:nt(t[R.TheAshblazingGrandDuke],e),valuePrisonerInDeepConfinement:nt(t[R.PrisonerInDeepConfinement],e),valuePioneerDiverOfDeadWaters:nt(t[R.PioneerDiverOfDeadWaters],e),valueSigoniaTheUnclaimedDesolation:nt(t[R.SigoniaTheUnclaimedDesolation],e),valueDuranDynastyOfRunningWolves:nt(t[R.DuranDynastyOfRunningWolves],e),valueSacerdosRelivedOrdeal:nt(t[R.SacerdosRelivedOrdeal],e)}}function Sg(e){const t=["DEFAULT"];for(let n=1;n<=8&&e[n]!=null;n++)t.push(e[n]);return t}function bg(e,t){return{...e,enabledIzumoGenseiAndTakamaDivineRealm:e.enabledIzumoGenseiAndTakamaDivineRealm&&Bd(t,t.path)>=2}}console.debug=(...e)=>{let t="%c%s ";e.forEach(n=>{switch(typeof n){case"bigint":case"number":case"boolean":t+="%d ";break;case"string":t+="%s ";break;case"object":case"undefined":default:t+="%o "}}),console.log(t,"color: orange","[DEBUG]",...e)};const F={objectHash:e=>X0(e),arrayOfZeroes:e=>new Array(e).fill(0),arrayOfValue:(e,t)=>new Array(e).fill(t),nullUndefinedToZero:e=>e??0,mergeDefinedValues:(e,t)=>{if(!t)return e;for(const n of Object.keys(e))t[n]!=null&&(e[n]=t[n]);return e},mergeUndefinedValues:(e,t)=>{for(const n of Object.keys(t))e[n]==null&&(e[n]=t[n]);return e},sleep:e=>new Promise(t=>setTimeout(t,e)),relicsToSetArrays:e=>{const t=F.arrayOfValue(Object.values(m.SetsRelics).length,0),n=F.arrayOfValue(Object.values(m.SetsOrnaments).length,0);for(const o of e)if(o)if(o.part==m.Parts.PlanarSphere||o.part==m.Parts.LinkRope){const s=m.OrnamentSetToIndex[o.set];n[s]++}else{const s=m.RelicSetToIndex[o.set];t[s]++}return{relicSets:t,ornamentSets:n}},isFlat:e=>e==m.Stats.HP||e==m.Stats.ATK||e==m.Stats.DEF||e==m.Stats.SPD,randomElement:e=>e[Math.floor(Math.random()*e.length)],isMobile:()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),isMobileOrSafari:()=>{const e=navigator.userAgent,t=/Android|iPhone|iPad|iPod|Opera Mini|IEMobile|WPDesktop|BlackBerry/i.test(e),n=/^((?!chrome|android).)*safari/i.test(e);return t||n},screenshotElementById:async(e,t,n)=>{const o=F.isMobileOrSafari(),s=async()=>{const c=o?9:3,d=1.5,u=1068*d,h=856*d,p={pixelRatio:1,height:h,canvasHeight:h,width:u,canvasWidth:u,skipAutoScale:!0,style:{zoom:d}};let S=0,D;for(;S<c&&(S++,D=await zl(document.getElementById(e),p),!(D.size>12e5)););return o&&(D=await zl(document.getElementById(e),p)),D};function r(l){const c=n||"Hsr-optimizer",d=new Date().toLocaleDateString(fc()).replace(/[^apm\d]+/gi,"-"),u=new Date().toLocaleTimeString(fc()).replace(/[^apm\d]+/gi,"-"),h=`${c}_${d}_${u}.png`;if(t=="clipboard")if(o){const p=new File([l],h,{type:"image/png"});navigator.canShare&&navigator.canShare({files:[p]})?navigator.share({files:[p],title:"",text:""}):Message.error("Unable to save screenshot to clipboard, try the download button to the right")}else try{const p=[new window.ClipboardItem({[l.type]:l})];navigator.clipboard.write(p).then(()=>{Message.success(w.t("charactersTab:ScreenshotMessages.ScreenshotSuccess"))})}catch(p){console.error(p),Message.error(w.t("charactersTab:ScreenshotMessages.ScreenshotFailed"))}if(t=="download"){const p=window.URL.createObjectURL(l),S=document.createElement("a");S.href=p,S.download=h,S.style.display="none",document.body.appendChild(S),S.click(),S.remove(),window.URL.revokeObjectURL(p),Message.success(w.t("charactersTab:ScreenshotMessages.DownloadSuccess"))}}return new Promise(l=>{s().then(c=>{r(c),l()})})},collectById:e=>{const t={};for(const n of e)t[n.id]=n;return t},truncate10ths:e=>Math.floor(e*10)/10,truncate100ths:e=>Math.floor(e*100)/100,truncate1000ths:e=>Math.floor(e*1e3)/1e3,truncate10000ths:e=>Math.floor(e*1e4)/1e4,precisionRound(e,t=5){const n=Math.pow(10,t);return Math.round(e*n)/n},flipMapping:e=>Object.fromEntries(Object.entries(e).map(t=>t.reverse())),clone:e=>e?JSON.parse(JSON.stringify(e)):null,labelFilterOption:(e,t)=>((t==null?void 0:t.label)??"").toLowerCase().includes(e.toLowerCase()),nameFilterOption:(e,t)=>((t==null?void 0:t.name)??"").toLowerCase().includes(e.toLowerCase()),titleFilterOption:(e,t)=>((t==null?void 0:t.title)??"").toLowerCase().includes(e.toLowerCase()),hasMainStat:e=>e==m.Parts.Body||e==m.Parts.Feet||e==m.Parts.LinkRope||e==m.Parts.PlanarSphere,recursiveToCamel:e=>Array.isArray(e)?e.map(t=>F.recursiveToCamel(t)):typeof e=="function"||e!==Object(e)?e:Object.fromEntries(Object.entries(e).map(([t,n])=>[t.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,"")),F.recursiveToCamel(n)])),randomId:()=>Br(),stripTrailingSlashes:e=>e.replace(/\/+$/,""),sortRarityDesc:(e,t)=>t.rarity-e.rarity,sumArray:e=>e.reduce((t,n)=>t+n,0),msToReadable:e=>{const t=Math.floor(e/1e3%60),n=Math.floor(e/(1e3*60)%60),o=Math.floor(e/(1e3*60*60)),s=o>0?`${o}:`:"",r=n<10?`0${n}`:`${n}`,l=t<10?`0${t}`:`${t}`;return`${s}${r}:${l}`},filterUnique:e=>e.filter((t,n,o)=>o.indexOf(t)===n)};function fc(){w.resolvedLanguage.replace("_","-")}const Dg={[m.Stats.SPD]:[7.613,11.419,16.426,25.032],[m.Stats.HP]:[139.991,281.111,469.647,705.6],[m.Stats.ATK]:[69.996,140.556,234.824,352.8],[m.Stats.HP_P]:[8.571,17.211,28.754,43.2],[m.Stats.ATK_P]:[8.571,17.211,28.754,43.2],[m.Stats.DEF_P]:[10.714,21.514,35.942,54],[m.Stats.CR]:[6.428,12.908,21.565,32.4],[m.Stats.CD]:[12.856,25.817,43.13,64.8],[m.Stats.OHB]:[6.856,13.769,23.003,34.561],[m.Stats.EHR]:[8.571,17.211,28.754,43.2],[m.Stats.BE]:[12.856,25.817,43.13,64.8],[m.Stats.ERR]:[3.857,7.745,12.939,19.439],[m.Stats.Physical_DMG]:[7.714,15.49,25.878,38.88],[m.Stats.Fire_DMG]:[7.714,15.49,25.878,38.88],[m.Stats.Ice_DMG]:[7.714,15.49,25.878,38.88],[m.Stats.Lightning_DMG]:[7.714,15.49,25.878,38.88],[m.Stats.Wind_DMG]:[7.714,15.49,25.878,38.88],[m.Stats.Quantum_DMG]:[7.714,15.49,25.878,38.88],[m.Stats.Imaginary_DMG]:[7.714,15.49,25.878,38.88]},yt={getMaxedSubstatValue:(e,t=1)=>t==.8?F.precisionRound(Re[e][5].low):t==.9?F.precisionRound(Re[e][5].mid):F.precisionRound(Re[e][5].high),getMaxedStatValue:e=>{if(e==="NONE")return 0;const t=F.isFlat(e)?1:100;return F.precisionRound(Dg[e][3]/t)},calculateCv:e=>{let t=0;for(const n of e)if(n!=null&&n.condensedStats)for(const o of n.condensedStats)o[0]==m.Stats.CD&&(t+=o[1]),o[0]==m.Stats.CR&&(t+=o[1]*2);return F.precisionRound(t*100)},getZeroes:()=>({[a.ATK]:0,[a.DEF]:0,[a.HP]:0,[a.ATK_P]:0,[a.DEF_P]:0,[a.HP_P]:0,[a.SPD]:0,[a.SPD_P]:0,[a.CR]:0,[a.CD]:0,[a.EHR]:0,[a.RES]:0,[a.BE]:0,[a.ERR]:0,[a.OHB]:0,[a.Physical_DMG]:0,[a.Fire_DMG]:0,[a.Ice_DMG]:0,[a.Lightning_DMG]:0,[a.Wind_DMG]:0,[a.Quantum_DMG]:0,[a.Imaginary_DMG]:0})};function Ki(e){const t={};return Pg(e,t),Ig(e,t),yg(e,t),Rg(e,t),Eg(e,t),Cg(e,t),t}function Rg(e,t){t.combatBuffs={ATK:e.combatBuffs.ATK,ATK_P:e.combatBuffs.ATK_P,HP:e.combatBuffs.HP,HP_P:e.combatBuffs.HP_P,DEF:e.combatBuffs.DEF,DEF_P:e.combatBuffs.DEF_P,CR:e.combatBuffs.CR,CD:e.combatBuffs.CD,SPD:e.combatBuffs.SPD,SPD_P:e.combatBuffs.SPD_P,BE:e.combatBuffs.BE,DMG_BOOST:e.combatBuffs.DMG_BOOST,DEF_PEN:e.combatBuffs.DEF_PEN,RES_PEN:e.combatBuffs.RES_PEN,EFFECT_RES_PEN:e.combatBuffs.EFFECT_RES_PEN,VULNERABILITY:e.combatBuffs.VULNERABILITY,BREAK_EFFICIENCY:e.combatBuffs.BREAK_EFFICIENCY}}function Eg(e,t){t.resultSort=e.resultSort}function Cg(e,t){t.characterConditionalController=ta.get(t),t.lightConeConditionalController=aa.get(t),zd(e,t)}const Tg={Physical:2,Fire:2,Ice:1,Lightning:1,Wind:1.5,Quantum:.5,Imaginary:.5};function yg(e,t){var l;const n=B.getMetadata(),o=n.characters[e.characterId],s=o.path,r=o.element;t.characterId=e.characterId,t.characterEidolon=e.characterEidolon,t.lightCone=e.lightCone,t.lightConeSuperimposition=e.lightConeSuperimposition,t.lightConePath=(l=n.lightCones[e.lightCone])==null?void 0:l.path,t.path=s,t.element=r,t.elementalDamageType=ei[r],t.elementalResPenType=un[r],t.elementalBreakScaling=Tg[r],t.teammate0Metadata=jo(n,e.teammate0),t.teammate1Metadata=jo(n,e.teammate1),t.teammate2Metadata=jo(n,e.teammate2),t.deprioritizeBuffs=e.deprioritizeBuffs}function jo(e,t){return t&&t.characterId?yn(t,e):null}function Pg(e,t){t.enemyLevel=e.enemyLevel,t.enemyCount=e.enemyCount,t.enemyMaxToughness=e.enemyMaxToughness,t.enemyDamageResistance=e.enemyElementalWeak?0:e.enemyResistance,t.enemyEffectResistance=e.enemyEffectResistance,t.enemyElementalWeak=e.enemyElementalWeak,t.enemyWeaknessBroken=e.enemyWeaknessBroken,t.weaknessBrokenMultiplier=e.enemyWeaknessBroken?1:.9}function Ig(e,t){const n=B.getMetadata().characters[e.characterId],o=n.stats,s=B.getMetadata().lightCones[e.lightCone],r=(s==null?void 0:s.stats)||Gp(),l=n.path==(s==null?void 0:s.path)?(s==null?void 0:s.superimpositions[e.lightConeSuperimposition])||{}:{},c={base:{...yt.getZeroes(),...o},traces:{...yt.getZeroes(),...Gd(n)},lightCone:{...yt.getZeroes(),...r,...l}};t.characterStatsBreakdown=c,t.baseHP=xs(a.HP,c.base,c.lightCone),t.baseATK=xs(a.ATK,c.base,c.lightCone),t.baseDEF=xs(a.DEF,c.base,c.lightCone),t.baseSPD=xs(a.SPD,c.base,c.lightCone),t.baseEnergy=n.max_sp}function xs(e,t,n){return t[e]+n[e]}async function dl(e){var n;const t=await((n=navigator==null?void 0:navigator.gpu)==null?void 0:n.requestAdapter());return t==null?(console.log("Webgpu not supported"),e&&zD(),null):await t.requestDevice({requiredLimits:{}})}async function Ud(e){try{const t=await dl(e);return t||window.store.getState().setSavedSessionKey(Ne.computeEngine,Pa),t}catch(t){return console.log(t),null}}function Bg(e,t){const n=new Float32Array(t);console.log(n),xg(n),Mg(n)}function Gg(e){const t=new Ma(!1),n=new Ma(!1),o=Object.keys(Vn).length;return t.setPrecompute(e.slice(0,o)),n.setPrecompute(e.slice(o,o*2)),console.log(t),console.log(n),{ED:t.$ELEMENTAL_DMG,BASIC:t.$BASIC_DMG,SKILL:t.$SKILL_DMG,ULT:t.$ULT_DMG,FUA:t.$FUA_DMG,MEMO_SKILL:t.$MEMO_SKILL_DMG,MEMO_TALENT:t.$MEMO_TALENT_DMG,DOT:t.$DOT_DMG,BREAK:t.$BREAK_DMG,COMBO:t.$COMBO_DMG,EHP:t.$EHP,HEAL:t.$HEAL_VALUE,SHIELD:t.$SHIELD_VALUE,xHP:t.$HP,xATK:t.$ATK,xDEF:t.$DEF,xSPD:t.$SPD,xCR:t.$CR,xCD:t.$CD,xEHR:t.$EHR,xRES:t.$RES,xBE:t.$BE,xERR:t.$ERR,xOHB:t.$OHB,xELEMENTAL_DMG:t.$ELEMENTAL_DMG,mxHP:n.$HP,mxATK:n.$ATK,mxDEF:n.$DEF,mxSPD:n.$SPD,mxCR:n.$CR,mxCD:n.$CD,mxEHR:n.$EHR,mxRES:n.$RES,mxBE:n.$BE,mxERR:n.$ERR,mxOHB:n.$OHB,mxELEMENTAL_DMG:n.$ELEMENTAL_DMG,mxEHP:n.$EHP}}function Mg(e){const t=window.optimizerGrid.current.api.getGridOption("pinnedTopRowData")??[];t[1]=Gg(e),window.optimizerGrid.current.api.updateGridOptions({pinnedTopRowData:t})}function pc(e){const t={};for(const n in f){const o=Pd[n]??n,s=f[n];t[o]=e[s]}return t}function xg(e){const t=pc(e);for(const[n,o]of Object.entries(t))t[n]=vg(o);console.log(pc(e))}function vg(e){return C.precisionRound(e,5)}function _g(e,t){let n=`struct ComputedStats {
`;for(const o of Io)n+=`${o.name}: f32,
`;return n+=`}
`,e+n}const Ag=3;function Lg(e){const t=[],n=[];Object.values(e).forEach(y=>{for(const P of y)P.chainsTo.length==0?n.push(P):t.push(P)});const o=Fg(),s={},r=new Set,l=new Set,c=[],d={},u=[];for(const y of t){d[y.id]=y;for(const P of y.dependsOn)o[P].push(y)}const h=new Set(t.map(y=>y.id));let S=[gc.reduce((y,P)=>{const _=qi(P,h,o),x=qi(y,h,o);return _>x?P:y})],D=0;const E=100;for(;h.size>0||S.length>0||l.size>0;){if(D++,D>E){console.error("Loop exceeded 100 iterations");break}S.sort((P,_)=>{const x=qi(P,h,o);return qi(_,h,o)-x});let y=S.shift();if(!y&&l.size>0&&(y=[...l][0],l.delete(y)),!y)break;!l.has(y)&&!S.includes(y)&&c.push(y);for(const P of o[y])if(r.has(P.id)||h.has(P.id)){if(s[P.id]>=Ag)continue;s[P.id]==null&&(s[P.id]=0),s[P.id]++,r.add(P.id),h.delete(P.id),u.push(P);for(const _ of P.chainsTo)!S.includes(_)&&!l.has(_)&&S.push(_)}for(const P of gc)c.includes(P)||S.push(P);S=Array.from(new Set(S))}return{conditionalSequence:u,terminalConditionals:n}}const gc=[a.SPD,a.BE,a.EHR,a.CR,a.CD,a.RES,a.DEF,a.ATK,a.OHB,a.ERR,a.HP];function Fg(){return{[a.HP]:[],[a.ATK]:[],[a.DEF]:[],[a.SPD]:[],[a.CR]:[],[a.CD]:[],[a.EHR]:[],[a.RES]:[],[a.BE]:[],[a.OHB]:[],[a.ERR]:[]}}function qi(e,t,n,o=new Set){if(o.has(e))return 0;o.add(e);let s=0;for(const r of n[e])if(t.has(r.id)){s++;for(const l of r.chainsTo)s+=qi(l,t,n,o)}return s}function Hg(e){let t="";for(const n of e.activeAbilities)n==kt.BASIC&&(t+=`

  /* START BASIC CALC */
  if (abilityType == 1 || actionIndex == 0) {
    let initialDmg = calculateInitial(
      p_x,
      x.BASIC_DMG,
      x.BASIC_HP_SCALING,
      x.BASIC_DEF_SCALING,
      x.BASIC_ATK_SCALING,
      x.BASIC_ATK_P_BOOST
    );
    (*p_x).BASIC_DMG = calculateAbilityDmg(
      p_x,
      baseUniversalMulti,
      baseDmgBoost,
      baseDefPen,
      baseResistance,
      baseSuperBreakInstanceDmg,
      baseBreakEfficiencyBoost,
      initialDmg,
      x.BASIC_DMG_BOOST,
      x.BASIC_VULNERABILITY,
      x.BASIC_DEF_PEN,
      x.BASIC_RES_PEN,
      x.BASIC_CR_BOOST,
      x.BASIC_CD_BOOST,
      x.BASIC_FINAL_DMG_BOOST,
      x.BASIC_BREAK_EFFICIENCY_BOOST,
      x.BASIC_SUPER_BREAK_MODIFIER,
      x.BASIC_BREAK_DMG_MODIFIER,
      x.BASIC_TOUGHNESS_DMG,
      x.BASIC_ADDITIONAL_DMG,
      0, // x.BASIC_ADDITIONAL_DMG_CR_OVERRIDE,
      0, // x.BASIC_ADDITIONAL_DMG_CD_OVERRIDE,
      x.BASIC_TRUE_DMG_MODIFIER,
      m.BASIC_DMG,
    );
  }
  /* END BASIC CALC */
      `),n==kt.SKILL&&(t+=`
  /* START SKILL CALC */
  if (abilityType == 2 || actionIndex == 0) {
    let initialDmg = calculateInitial(
      p_x,
      x.SKILL_DMG,
      x.SKILL_HP_SCALING,
      x.SKILL_DEF_SCALING,
      x.SKILL_ATK_SCALING,
      x.SKILL_ATK_P_BOOST
    );
    (*p_x).SKILL_DMG = calculateAbilityDmg(
      p_x,
      baseUniversalMulti,
      baseDmgBoost,
      baseDefPen,
      baseResistance,
      baseSuperBreakInstanceDmg,
      baseBreakEfficiencyBoost,
      initialDmg,
      x.SKILL_DMG_BOOST,
      x.SKILL_VULNERABILITY,
      x.SKILL_DEF_PEN,
      x.SKILL_RES_PEN,
      x.SKILL_CR_BOOST,
      x.SKILL_CD_BOOST,
      x.SKILL_FINAL_DMG_BOOST,
      0, // x.SKILL_BREAK_EFFICIENCY_BOOST,
      0, // x.SKILL_SUPER_BREAK_MODIFIER,
      0, // x.SKILL_BREAK_DMG_MODIFIER,
      x.SKILL_TOUGHNESS_DMG,
      x.SKILL_ADDITIONAL_DMG,
      0, // x.SKILL_ADDITIONAL_DMG_CR_OVERRIDE,
      0, // x.SKILL_ADDITIONAL_DMG_CD_OVERRIDE,
      x.SKILL_TRUE_DMG_MODIFIER,
      m.SKILL_DMG,
    );
  }
  /* END SKILL CALC */
      `),n==kt.ULT&&(t+=`
  /* START ULT CALC */
  if (abilityType == 4 || actionIndex == 0) {
    let initialDmg = calculateInitial(
      p_x,
      x.ULT_DMG,
      x.ULT_HP_SCALING,
      x.ULT_DEF_SCALING,
      x.ULT_ATK_SCALING,
      x.ULT_ATK_P_BOOST
    );
    (*p_x).ULT_DMG = calculateAbilityDmg(
      p_x,
      baseUniversalMulti,
      baseDmgBoost,
      baseDefPen,
      baseResistance,
      baseSuperBreakInstanceDmg,
      baseBreakEfficiencyBoost,
      initialDmg,
      x.ULT_DMG_BOOST,
      x.ULT_VULNERABILITY,
      x.ULT_DEF_PEN,
      x.ULT_RES_PEN,
      x.ULT_CR_BOOST,
      x.ULT_CD_BOOST,
      x.ULT_FINAL_DMG_BOOST,
      x.ULT_BREAK_EFFICIENCY_BOOST,
      0, // x.ULT_SUPER_BREAK_MODIFIER,
      0, // x.ULT_BREAK_DMG_MODIFIER,
      x.ULT_TOUGHNESS_DMG,
      x.ULT_ADDITIONAL_DMG,
      x.ULT_ADDITIONAL_DMG_CR_OVERRIDE,
      x.ULT_ADDITIONAL_DMG_CD_OVERRIDE,
      x.ULT_TRUE_DMG_MODIFIER,
      m.ULT_DMG,
    );
  }
  /* END ULT CALC */
      `),n==kt.FUA&&(t+=`
  /* START FUA CALC */
  if (abilityType == 8 || actionIndex == 0) {
    let initialDmg = calculateInitial(
      p_x,
      x.FUA_DMG,
      x.FUA_HP_SCALING,
      x.FUA_DEF_SCALING,
      x.FUA_ATK_SCALING,
      x.FUA_ATK_P_BOOST
    );
    (*p_x).FUA_DMG = calculateAbilityDmg(
      p_x,
      baseUniversalMulti,
      baseDmgBoost,
      baseDefPen,
      baseResistance,
      baseSuperBreakInstanceDmg,
      baseBreakEfficiencyBoost,
      initialDmg,
      x.FUA_DMG_BOOST,
      x.FUA_VULNERABILITY,
      x.FUA_DEF_PEN,
      x.FUA_RES_PEN,
      x.FUA_CR_BOOST,
      x.FUA_CD_BOOST,
      0, // x.FUA_FINAL_DMG_BOOST,
      0, // x.FUA_BREAK_EFFICIENCY_BOOST,
      0, // x.FUA_SUPER_BREAK_MODIFIER,
      0, // x.FUA_BREAK_DMG_MODIFIER,
      x.FUA_TOUGHNESS_DMG,
      x.FUA_ADDITIONAL_DMG,
      0, // x.FUA_ADDITIONAL_DMG_CR_OVERRIDE,
      0, // x.FUA_ADDITIONAL_DMG_CD_OVERRIDE,
      x.FUA_TRUE_DMG_MODIFIER,
      0, // m.FUA_DMG,
    );
  }
  /* END FUA CALC */
      `),n==kt.MEMO_SKILL&&(t+=`
  /* START MEMO_SKILL CALC */
  if (abilityType == MEMO_SKILL_ABILITY_TYPE || actionIndex == 0) {
    let initialDmg = calculateInitial(
      p_x,
      x.MEMO_SKILL_DMG,
      x.MEMO_SKILL_HP_SCALING,
      x.MEMO_SKILL_DEF_SCALING,
      x.MEMO_SKILL_ATK_SCALING,
      x.MEMO_SKILL_ATK_P_BOOST
    );
    (*p_x).MEMO_SKILL_DMG = calculateAbilityDmg(
      p_x,
      baseUniversalMulti,
      baseDmgBoost,
      baseDefPen,
      baseResistance,
      baseSuperBreakInstanceDmg,
      baseBreakEfficiencyBoost,
      initialDmg,
      x.MEMO_SKILL_DMG_BOOST,
      0, // x.MEMO_SKILL_VULNERABILITY,
      0, // x.MEMO_SKILL_DEF_PEN,
      0, // x.MEMO_SKILL_RES_PEN,
      0, // x.MEMO_SKILL_CR_BOOST,
      0, // x.MEMO_SKILL_CD_BOOST,
      0, // x.MEMO_SKILL_FINAL_DMG_BOOST,
      0, // x.MEMO_SKILL_BREAK_EFFICIENCY_BOOST,
      0, // x.MEMO_SKILL_SUPER_BREAK_MODIFIER,
      0, // x.MEMO_SKILL_BREAK_DMG_MODIFIER,
      x.MEMO_SKILL_TOUGHNESS_DMG,
      0, // x.MEMO_SKILL_ADDITIONAL_DMG,
      0, // x.MEMO_SKILL_ADDITIONAL_DMG_CR_OVERRIDE,
      0, // x.MEMO_SKILL_ADDITIONAL_DMG_CD_OVERRIDE,
      x.MEMO_SKILL_TRUE_DMG_MODIFIER,
      0, // m.MEMO_DMG,
    );

    (*p_x).MEMO_SKILL_DMG += (*p_m).MEMO_SKILL_DMG;
  }
  /* END MEMO_SKILL CALC */
      `),n==kt.MEMO_TALENT&&(t+=`
  /* START MEMO_TALENT CALC */
  if (abilityType == MEMO_TALENT_ABILITY_TYPE || actionIndex == 0) {
    let initialDmg = calculateInitial(
      p_x,
      x.MEMO_TALENT_DMG,
      x.MEMO_TALENT_HP_SCALING,
      x.MEMO_TALENT_DEF_SCALING,
      x.MEMO_TALENT_ATK_SCALING,
      x.MEMO_TALENT_ATK_P_BOOST
    );
    (*p_x).MEMO_TALENT_DMG = calculateAbilityDmg(
      p_x,
      baseUniversalMulti,
      baseDmgBoost,
      baseDefPen,
      baseResistance,
      baseSuperBreakInstanceDmg,
      baseBreakEfficiencyBoost,
      initialDmg,
      x.MEMO_TALENT_DMG_BOOST,
      0, // x.MEMO_TALENT_VULNERABILITY,
      0, // x.MEMO_TALENT_DEF_PEN,
      0, // x.MEMO_TALENT_RES_PEN,
      0, // x.MEMO_TALENT_CR_BOOST,
      0, // x.MEMO_TALENT_CD_BOOST,
      0, // x.MEMO_TALENT_FINAL_DMG_BOOST,
      0, // x.MEMO_TALENT_BREAK_EFFICIENCY_BOOST,
      0, // x.MEMO_TALENT_SUPER_BREAK_MODIFIER,
      0, // x.MEMO_TALENT_BREAK_DMG_MODIFIER,
      x.MEMO_TALENT_TOUGHNESS_DMG,
      0, // x.MEMO_TALENT_ADDITIONAL_DMG,
      0, // x.MEMO_TALENT_ADDITIONAL_DMG_CR_OVERRIDE,
      0, // x.MEMO_TALENT_ADDITIONAL_DMG_CD_OVERRIDE,
      x.MEMO_TALENT_TRUE_DMG_MODIFIER,
      0, // m.MEMO_DMG,
    );

    (*p_x).MEMO_TALENT_DMG += (*p_m).MEMO_TALENT_DMG;
  }
  /* END MEMO_TALENT CALC */
      `);return t}function Sc(e,t){const n=e.a;return n[f.EHP]=0,Object.keys(Vn).map(s=>{const r=n[f[s]],l=t.DEBUG?` // Stats.${s}`:"";return`${r},${l}`}).join(`
`)}const T={ATK:{key:"ATK",gpuProperty:"ATK",basicProperty:"ATK",combatProperty:"ATK",basicGridColumn:"ATK",combatGridColumn:"xATK",memoBasicGridColumn:"mATK",memoCombatGridColumn:"mxATK",optimizerKey:f.ATK},DEF:{key:"DEF",gpuProperty:"DEF",basicProperty:"DEF",combatProperty:"DEF",basicGridColumn:"DEF",combatGridColumn:"xDEF",memoBasicGridColumn:"mATK",memoCombatGridColumn:"mxATK",optimizerKey:f.DEF},HP:{key:"HP",gpuProperty:"HP",basicProperty:"HP",combatProperty:"HP",basicGridColumn:"HP",combatGridColumn:"xHP",memoBasicGridColumn:"mATK",memoCombatGridColumn:"mxATK",optimizerKey:f.HP},SPD:{key:"SPD",gpuProperty:"SPD",basicProperty:"SPD",combatProperty:"SPD",basicGridColumn:"SPD",combatGridColumn:"xSPD",memoBasicGridColumn:"mSPD",memoCombatGridColumn:"mxSPD",optimizerKey:f.SPD},CR:{key:"CR",gpuProperty:"CR",basicProperty:"CRIT Rate",combatProperty:"CRIT Rate",basicGridColumn:"CRIT Rate",combatGridColumn:"xCR",memoBasicGridColumn:"mCR",memoCombatGridColumn:"mxCR",optimizerKey:f.CR},CD:{key:"CD",gpuProperty:"CD",basicProperty:"CRIT DMG",combatProperty:"CRIT DMG",basicGridColumn:"CRIT DMG",combatGridColumn:"xCD",memoBasicGridColumn:"mCD",memoCombatGridColumn:"mxCD",optimizerKey:f.CD},EHR:{key:"EHR",gpuProperty:"EHR",basicProperty:"Effect Hit Rate",combatProperty:"Effect Hit Rate",basicGridColumn:"Effect Hit Rate",combatGridColumn:"xEHR",memoBasicGridColumn:"mEHR",memoCombatGridColumn:"mxEHR",optimizerKey:f.EHR},RES:{key:"RES",gpuProperty:"RES",basicProperty:"Effect RES",combatProperty:"Effect RES",basicGridColumn:"Effect RES",combatGridColumn:"xRES",memoBasicGridColumn:"mRES",memoCombatGridColumn:"mxRES",optimizerKey:f.RES},BE:{key:"BE",gpuProperty:"BE",basicProperty:"Break Effect",combatProperty:"Break Effect",basicGridColumn:"Break Effect",combatGridColumn:"xBE",memoBasicGridColumn:"mBE",memoCombatGridColumn:"mxBE",optimizerKey:f.BE},OHB:{key:"OHB",gpuProperty:"OHB",basicProperty:"Outgoing Healing Boost",combatProperty:"Outgoing Healing Boost",basicGridColumn:"Outgoing Healing Boost",combatGridColumn:"xOHB",memoBasicGridColumn:"mOHB",memoCombatGridColumn:"mxOHB",optimizerKey:f.OHB},ERR:{key:"ERR",gpuProperty:"ERR",basicProperty:"Energy Regeneration Rate",combatProperty:"Energy Regeneration Rate",basicGridColumn:"Energy Regeneration Rate",combatGridColumn:"xERR",memoBasicGridColumn:"mERR",memoCombatGridColumn:"mxERR",optimizerKey:f.ERR},ELEMENTAL_DMG:{key:"ELEMENTAL_DMG",gpuProperty:"ELEMENTAL_DMG",basicProperty:"ELEMENTAL_DMG",combatProperty:"ELEMENTAL_DMG",basicGridColumn:"ED",combatGridColumn:"xELEMENTAL_DMG",memoBasicGridColumn:"mELEMENTAL_DMG",memoCombatGridColumn:"mxELEMENTAL_DMG",optimizerKey:f.ELEMENTAL_DMG,isComputedRating:!0},EHP:{key:"EHP",gpuProperty:"EHP",basicProperty:"EHP",combatProperty:"EHP",basicGridColumn:"EHP",combatGridColumn:"EHP",memoBasicGridColumn:"mxEHP",memoCombatGridColumn:"mxEHP",optimizerKey:f.EHP,isComputedRating:!0},BASIC:{key:"BASIC",gpuProperty:"BASIC_DMG",basicProperty:"BASIC_DMG",combatProperty:"BASIC_DMG",basicGridColumn:"BASIC",combatGridColumn:"BASIC",memoBasicGridColumn:"BASIC",memoCombatGridColumn:"BASIC",optimizerKey:f.BASIC_DMG,isComputedRating:!0},SKILL:{key:"SKILL",gpuProperty:"SKILL_DMG",basicProperty:"SKILL_DMG",combatProperty:"SKILL_DMG",basicGridColumn:"SKILL",combatGridColumn:"SKILL",memoBasicGridColumn:"SKILL",memoCombatGridColumn:"SKILL",optimizerKey:f.SKILL_DMG,isComputedRating:!0},ULT:{key:"ULT",gpuProperty:"ULT_DMG",basicProperty:"ULT_DMG",combatProperty:"ULT_DMG",basicGridColumn:"ULT",combatGridColumn:"ULT",memoBasicGridColumn:"ULT",memoCombatGridColumn:"ULT",optimizerKey:f.ULT_DMG,isComputedRating:!0},FUA:{key:"FUA",gpuProperty:"FUA_DMG",basicProperty:"FUA_DMG",combatProperty:"FUA_DMG",basicGridColumn:"FUA",combatGridColumn:"FUA",memoBasicGridColumn:"FUA",memoCombatGridColumn:"FUA",optimizerKey:f.FUA_DMG,isComputedRating:!0},MEMO_SKILL:{key:"MEMO_SKILL",gpuProperty:"MEMO_SKILL_DMG",basicProperty:"MEMO_SKILL_DMG",combatProperty:"MEMO_SKILL_DMG",basicGridColumn:"MEMO_SKILL",combatGridColumn:"MEMO_SKILL",memoBasicGridColumn:"MEMO_SKILL",memoCombatGridColumn:"MEMO_SKILL",optimizerKey:f.MEMO_SKILL_DMG,isComputedRating:!0},MEMO_TALENT:{key:"MEMO_TALENT",gpuProperty:"MEMO_TALENT_DMG",basicProperty:"MEMO_TALENT_DMG",combatProperty:"MEMO_TALENT_DMG",basicGridColumn:"MEMO_TALENT",combatGridColumn:"MEMO_TALENT",memoBasicGridColumn:"MEMO_TALENT",memoCombatGridColumn:"MEMO_TALENT",optimizerKey:f.MEMO_TALENT_DMG,isComputedRating:!0},DOT:{key:"DOT",gpuProperty:"DOT_DMG",basicProperty:"DOT_DMG",combatProperty:"DOT_DMG",basicGridColumn:"DOT",combatGridColumn:"DOT",memoBasicGridColumn:"DOT",memoCombatGridColumn:"DOT",optimizerKey:f.DOT_DMG,isComputedRating:!0},BREAK:{key:"BREAK",gpuProperty:"BREAK_DMG",basicProperty:"BREAK_DMG",combatProperty:"BREAK_DMG",basicGridColumn:"BREAK",combatGridColumn:"BREAK",memoBasicGridColumn:"BREAK",memoCombatGridColumn:"BREAK",optimizerKey:f.BREAK_DMG,isComputedRating:!0},COMBO:{key:"COMBO",gpuProperty:"COMBO_DMG",basicProperty:"COMBO_DMG",combatProperty:"COMBO_DMG",basicGridColumn:"COMBO",combatGridColumn:"COMBO",memoBasicGridColumn:"COMBO",memoCombatGridColumn:"COMBO",optimizerKey:f.COMBO_DMG,isComputedRating:!0},HEAL:{key:"HEAL",gpuProperty:"HEAL_VALUE",basicProperty:"HEAL_VALUE",combatProperty:"HEAL_VALUE",basicGridColumn:"HEAL",combatGridColumn:"HEAL",memoBasicGridColumn:"HEAL",memoCombatGridColumn:"HEAL",optimizerKey:f.HEAL_VALUE,isComputedRating:!0},SHIELD:{key:"SHIELD",gpuProperty:"SHIELD_VALUE",basicProperty:"SHIELD_VALUE",combatProperty:"SHIELD_VALUE",basicGridColumn:"SHIELD",combatGridColumn:"SHIELD",memoBasicGridColumn:"SHIELD",memoCombatGridColumn:"SHIELD",optimizerKey:f.SHIELD_VALUE,isComputedRating:!0}};function wg(e,t,n,o){const s=ta.get(n),r=aa.get(n),l=n.resultSort==T.COMBO.key?n.actions.length:1;let c=`
switch (actionIndex) {
`;for(let D=0;D<l;D++){const E=n.actions[D];let y=`  // Character conditionals
`,P=`  // Light cone conditionals
`;s.gpuFinalizeCalculations&&(y+=st(s.gpuFinalizeCalculations(E,n),1)),r.gpuFinalizeCalculations&&(P+=st(r.gpuFinalizeCalculations(E,n),1)),c+=st(`
case ${D}: {

${y}
${P}
}
`,1)}c+=`
  default: {
  
  }
}
`,e=e.replace("/* INJECT ACTION CONDITIONALS */",st(c,3));let d="";s.gpuCalculateBasicEffects&&(d+=st(s.gpuCalculateBasicEffects(n.actions[0],n),1)),r.gpuCalculateBasicEffects&&(d+=st(r.gpuCalculateBasicEffects(n.actions[0],n),1)),e=e.replace("/* INJECT BASIC CONDITIONALS */",st(d,2));const{conditionalSequence:u,terminalConditionals:h}=Lg(n.actions[0].conditionalRegistry);let p=`
`;p+=u.map(bc).map(D=>st(D,3)).join(`
`)+`
`,p+=`
`,p+=h.map(bc).map(D=>st(D,3)).join(`
`)+`
`,e=e.replace("/* INJECT COMBAT CONDITIONALS */",p),e+=kg(t,n);let S=`
const comboDot: f32 = ${n.comboDot};
const comboBreak: f32 = ${n.comboBreak};
`;for(let D=0;D<l;D++){const E=n.actions[D];S+=`
const action${D} = Action( // ${E.actionIndex}
  ${jg(E.actionType)},
  SetConditionals(
    ${E.setConditionals.enabledHunterOfGlacialForest},${o.DEBUG?" // enabledHunterOfGlacialForest":""}
    ${E.setConditionals.enabledFiresmithOfLavaForging},${o.DEBUG?" // enabledFiresmithOfLavaForging":""}
    ${E.setConditionals.enabledGeniusOfBrilliantStars},${o.DEBUG?" // enabledGeniusOfBrilliantStars":""}
    ${E.setConditionals.enabledBandOfSizzlingThunder},${o.DEBUG?" // enabledBandOfSizzlingThunder":""}
    ${E.setConditionals.enabledMessengerTraversingHackerspace},${o.DEBUG?" // enabledMessengerTraversingHackerspace":""}
    ${E.setConditionals.enabledCelestialDifferentiator},${o.DEBUG?" // enabledCelestialDifferentiator":""}
    ${E.setConditionals.enabledWatchmakerMasterOfDreamMachinations},${o.DEBUG?" // enabledWatchmakerMasterOfDreamMachinations":""}
    ${E.setConditionals.enabledPenaconyLandOfTheDreams},${o.DEBUG?" // enabledPenaconyLandOfTheDreams":""}
    ${E.setConditionals.enabledIzumoGenseiAndTakamaDivineRealm},${o.DEBUG?" // enabledIzumoGenseiAndTakamaDivineRealm":""}
    ${E.setConditionals.enabledForgeOfTheKalpagniLantern},${o.DEBUG?" // enabledForgeOfTheKalpagniLantern":""}
    ${E.setConditionals.enabledTheWindSoaringValorous},${o.DEBUG?" // enabledTheWindSoaringValorous":""}
    ${E.setConditionals.enabledTheWondrousBananAmusementPark},${o.DEBUG?" // enabledTheWondrousBananAmusementPark":""}
    ${E.setConditionals.enabledScholarLostInErudition},${o.DEBUG?" // enabledScholarLostInErudition":""}
    ${E.setConditionals.enabledHeroOfTriumphantSong},${o.DEBUG?" // enabledHeroOfTriumphantSong":""}
    ${E.setConditionals.valueChampionOfStreetwiseBoxing},${o.DEBUG?" // valueChampionOfStreetwiseBoxing":""}
    ${E.setConditionals.valueWastelanderOfBanditryDesert},${o.DEBUG?" // valueWastelanderOfBanditryDesert":""}
    ${E.setConditionals.valueLongevousDisciple},${o.DEBUG?" // valueLongevousDisciple":""}
    ${E.setConditionals.valueTheAshblazingGrandDuke},${o.DEBUG?" // valueTheAshblazingGrandDuke":""}
    ${E.setConditionals.valuePrisonerInDeepConfinement},${o.DEBUG?" // valuePrisonerInDeepConfinement":""}
    ${E.setConditionals.valuePioneerDiverOfDeadWaters},${o.DEBUG?" // valuePioneerDiverOfDeadWaters":""}
    ${E.setConditionals.valueSigoniaTheUnclaimedDesolation},${o.DEBUG?" // valueSigoniaTheUnclaimedDesolation":""}
    ${E.setConditionals.valueDuranDynastyOfRunningWolves},${o.DEBUG?" // valueDuranDynastyOfRunningWolves":""}
    ${E.setConditionals.valueSacerdosRelivedOrdeal},${o.DEBUG?" // valueSacerdosRelivedOrdeal":""}
  ),
);`}for(let D=0;D<l;D++){const E=n.actions[D];S+=`
const computedStatsX${D} = ComputedStats(
${Sc(E.precomputedX,o)}
);`}if(n.path==Oi.Remembrance)for(let D=0;D<l;D++){const E=n.actions[D];S+=`
const computedStatsM${D} = ComputedStats(
${Sc(E.precomputedM,o)}
);`}return e=e.replace("/* INJECT ACTIONS DEFINITION */",S),e+=`
const actionCount = ${l};
`,e=e.replace("/* INJECT ACTION DAMAGE */",st(Hg(n),0)),e}function bc(e){return`evaluate${e.id}(p_x, p_m, p_sets, p_state);`}function Og(e,t){let n;return t.teammateIndex==0?n=e.teammate0:t.teammateIndex==1?n=e.teammate1:n=e.teammate2,n.teammateCharacterConditionals=n.characterConditionals,n.teammateLightConeConditionals=n.lightConeConditionals,n}function Ra(e,t,n,o,s){const r="";let l="",c="";return l+=e[t].map(d=>{if(d.teammateIndex==null)return d.gpu(o,s);{const u=Og(o,d);return d.gpu(u,s)}}).join(`
`),c+=e[t].flatMap(d=>[d.id,...d.supplementalState??[]].map(u=>u+`: f32,
`)).join(""),{conditionalEvaluators:r,conditionalDefinitionsWgsl:l,conditionalStateDefinition:c}}function kg(e,t){let n="",o=`
`,s=`
`,r=`
`;function l(d){o+=d.conditionalEvaluators,s+=d.conditionalDefinitionsWgsl,r+=d.conditionalStateDefinition}const c=t.actions[0].conditionalRegistry;return l(Ra(c,a.HP,"HP",e,t)),l(Ra(c,a.ATK,"ATK",e,t)),l(Ra(c,a.DEF,"DEF",e,t)),l(Ra(c,a.SPD,"SPD",e,t)),l(Ra(c,a.CR,"CR",e,t)),l(Ra(c,a.CD,"CD",e,t)),l(Ra(c,a.EHR,"EHR",e,t)),l(Ra(c,a.RES,"RES",e,t)),l(Ra(c,a.BE,"BE",e,t)),l(Ra(c,a.OHB,"OHB",e,t)),l(Ra(c,a.ERR,"ERR",e,t)),n+=s,n+=o,n+=`
struct ConditionalState {
${st("actionIndex: i32,",1)}
${st(r,1)}
}
  `,n}const Kg={BASIC:Wh,SKILL:Zh,ULT:Nh,FUA:Vh,MEMO_SKILL:zh,MEMO_TALENT:Uh};function jg(e){return Kg[e]??0}function Wg(e,t,n,o){const s={};for(const r of Object.values(Xd))s[r]=(t.characterStatsBreakdown.base[r]??0)+(t.characterStatsBreakdown.lightCone[r]??0);return e+=Dc(s,"base"),e+=Dc(t.characterStatsBreakdown.traces,"trace"),e+=zg(t),e+=Vg(n),e+=Ng(t),e+=Zg(t,o),e+=`
`,e}function Zg(e,t){return`
const relicSetCount = ${Object.keys(m.SetsRelics).length};
const ornamentSetCount = ${Object.keys(m.SetsOrnaments).length};
const lSize = ${t.LinkRope.length};
const pSize = ${t.PlanarSphere.length};
const fSize = ${t.Feet.length};
const bSize = ${t.Body.length};
const gSize = ${t.Hands.length};
const hSize = ${t.Head.length};
`}function Ng(e){const t=e.resultSort==T.COMBO.key?e.actions.length:1;let n="";for(let s=0;s<t;s++)e.path==Oi.Remembrance?n+=st(`
case ${s}: { 
  (*outAction) = action${s}; 
  (*outX) = computedStatsX${s}; 
  (*outM) = computedStatsM${s}; 
}
    `,0):n+=st(`
case ${s}: { 
  (*outAction) = action${s}; 
  (*outX) = computedStatsX${s}; 
}
    `,0);return`
fn getAction(actionIndex: i32, outAction: ptr<function, Action>, outX: ptr<function, ComputedStats>, outM: ptr<function, ComputedStats>) {
  switch (actionIndex) {
    ${n}
    default: { 
      (*outAction) = action0; 
    }
  }
}
  `}function Vg(e){let t=`
`;t+=`const statDisplay: i32 = ${e.statDisplay=="combat"?0:1};
`,t+=`
`,t+=`const enemyCount: i32 = ${e.enemyCount};
`,t+=`const enemyElementalWeak: i32 = ${e.enemyElementalWeak?1:0};
`,t+=`const enemyLevel: i32 = ${e.enemyLevel};
`,t+=`const enemyMaxToughness: f32 = ${e.enemyMaxToughness};
`,t+=`const enemyResistance: f32 = ${e.enemyResistance};
`,t+=`const enemyEffectResistance: f32 = ${e.enemyEffectResistance};
`,t+=`const enemyWeaknessBroken: i32 = ${e.enemyWeaknessBroken?1:0};
`,t+=`
`,t+=`const resistance: f32 = ${(e.enemyElementalWeak?0:e.enemyResistance)-e.combatBuffs.RES_PEN};
`,t+=`
`;for(const[n,o]of Object.entries(e))!n.includes("Weight")&&(n.startsWith("min")||n.startsWith("max"))&&(t+=`const ${n}: f32 = ${o};
`);t+=`
`;for(const[n,o]of Object.entries(e.combatBuffs))t+=`const combatBuffs${n}: f32 = ${o};
`;return t+=`
`,t+=`const e: i32 = ${e.characterEidolon};
`,t+=`
`,t}function zg(e){let t=`
`;return t+=`const ELEMENT_INDEX: i32 = ${Ug[e.elementalDamageType]};
`,t+=`const ELEMENTAL_BREAK_SCALING: f32 = ${e.elementalBreakScaling};
`,t}function Dc(e,t){let n=`
`;for(const[o,s]of Object.entries(Xd))n+=`const ${t}${o}: f32 = ${e[s]};
`;return n}const Xd={HP_P:a.HP_P,ATK_P:a.ATK_P,DEF_P:a.DEF_P,SPD_P:a.SPD_P,HP:a.HP,ATK:a.ATK,DEF:a.DEF,SPD:a.SPD,CR:a.CR,CD:a.CD,EHR:a.EHR,RES:a.RES,BE:a.BE,ERR:a.ERR,OHB:a.OHB,Physical_DMG:a.Physical_DMG,Fire_DMG:a.Fire_DMG,Ice_DMG:a.Ice_DMG,Lightning_DMG:a.Lightning_DMG,Wind_DMG:a.Wind_DMG,Quantum_DMG:a.Quantum_DMG,Imaginary_DMG:a.Imaginary_DMG},Ug={[a.Physical_DMG]:0,[a.Fire_DMG]:1,[a.Ice_DMG]:2,[a.Lightning_DMG]:3,[a.Wind_DMG]:4,[a.Quantum_DMG]:5,[a.Imaginary_DMG]:6},Xg=`// START GPU PARAMS
// ═════════════════════════════════════════════════════════════════════════════════════════════════════════════════╗
/* INJECT GPU PARAMS */
// ═════════════════════════════════════════════════════════════════════════════════════════════════════════════════╝
// END GPU PARAMS

// START ACTIONS DEFINITION
// ═════════════════════════════════════════════════════════════════════════════════════════════════════════════════╗
/* INJECT ACTIONS DEFINITION */
// ═════════════════════════════════════════════════════════════════════════════════════════════════════════════════╝
// END ACTIONS DEFINITION

const BASIC_DMG_TYPE = 1;
const SKILL_DMG_TYPE = 2;
const ULT_DMG_TYPE = 4;
const FUA_DMG_TYPE = 8;
const DOT_DMG_TYPE = 16;
const BREAK_DMG_TYPE = 32;
const SUPER_BREAK_DMG_TYPE = 64;
const MEMO_DMG_TYPE = 128;
const ADDITIONAL_DMG_TYPE = 256;

const BASIC_ABILITY_TYPE = 1;
const SKILL_ABILITY_TYPE = 2;
const ULT_ABILITY_TYPE = 4;
const FUA_ABILITY_TYPE = 8;
const DOT_ABILITY_TYPE = 16;
const BREAK_ABILITY_TYPE = 32;
const MEMO_SKILL_ABILITY_TYPE = 64;
const MEMO_TALENT_ABILITY_TYPE = 128;

const epsilon = 0.00000001f;

@group(0) @binding(0) var<uniform> params : Params;

@group(1) @binding(0) var<storage> relics : array<Relic>;
@group(1) @binding(1) var<storage> ornamentSetSolutionsMatrix : array<i32>;
@group(1) @binding(2) var<storage> relicSetSolutionsMatrix : array<i32>;

// START RESULTS BUFFER
// ═════════════════════════════════════════════════════════════════════════════════════════════════════════════════╗
/* INJECT RESULTS BUFFER */
// ═════════════════════════════════════════════════════════════════════════════════════════════════════════════════╝
// END RESULTS BUFFER

@compute @workgroup_size(WORKGROUP_SIZE)
fn main(
  @builtin(workgroup_id) workgroup_id : vec3<u32>,
  @builtin(local_invocation_id) local_invocation_id : vec3<u32>,
  @builtin(global_invocation_id) global_invocation_id : vec3<u32>,
  @builtin(local_invocation_index) local_invocation_index: u32,
  @builtin(num_workgroups) num_workgroups: vec3<u32>
) {
  let workgroup_index =
    workgroup_id.x +
    workgroup_id.y * num_workgroups.x +
    workgroup_id.z * num_workgroups.x * num_workgroups.y;
  let indexGlobal = i32(workgroup_index * WORKGROUP_SIZE + local_invocation_index);

  // Load params
  let xl = i32(params.xl);
  let xp = i32(params.xp);
  let xf = i32(params.xf);
  let xb = i32(params.xb);
  let xg = i32(params.xg);
  let xh = i32(params.xh);
  let threshold = params.threshold;
  let cycleIndex = indexGlobal * CYCLES_PER_INVOCATION;

  var failures: f32 = 1;

  var emptyComputedStats = ComputedStats();

  for (var i = 0; i < CYCLES_PER_INVOCATION; i++) {

    // Calculate global_invocation_index

    let index = cycleIndex + i;

    // Calculate relic index per slot

    let l = (index % lSize);
    let p = (((index - l) / lSize) % pSize);
    let f = (((index - p * lSize - l) / (lSize * pSize)) % fSize);
    let b = (((index - f * pSize * lSize - p * lSize - l) / (lSize * pSize * fSize)) % bSize);
    let g = (((index - b * fSize * pSize * lSize - f * pSize * lSize - p * lSize - l) / (lSize * pSize * fSize * bSize)) % gSize);
    let h = (((index - g * bSize * fSize * pSize * lSize - b * fSize * pSize * lSize - f * pSize * lSize - p * lSize - l) / (lSize * pSize * fSize * bSize * gSize)) % hSize);

    let finalL = (l + xl) % lSize;
    let carryL = (l + xl) / lSize;
    let finalP = (p + xp + carryL) % pSize;
    let carryP = (p + xp + carryL) / pSize;
    let finalF = (f + xf + carryP) % fSize;
    let carryF = (f + xf + carryP) / fSize;
    let finalB = (b + xb + carryF) % bSize;
    let carryB = (b + xb + carryF) / bSize;
    let finalG = (g + xg + carryB) % gSize;
    let carryG = (g + xg + carryB) / gSize;
    let finalH = (h + xh + carryG) % hSize;

    // Calculate Relic structs

    let head         : Relic = (relics[finalH]);
    let hands        : Relic = (relics[finalG + hSize]);
    let body         : Relic = (relics[finalB + hSize + gSize]);
    let feet         : Relic = (relics[finalF + hSize + gSize + bSize]);
    let planarSphere : Relic = (relics[finalP + hSize + gSize + bSize + fSize]);
    let linkRope     : Relic = (relics[finalL + hSize + gSize + bSize + fSize + pSize]);

    // Convert set ID

    let setH: u32 = u32(head.relicSet);
    let setG: u32 = u32(hands.relicSet);
    let setB: u32 = u32(body.relicSet);
    let setF: u32 = u32(feet.relicSet);
    let setP: u32 = u32(planarSphere.relicSet);
    let setL: u32 = u32(linkRope.relicSet);

    // Get the index for set permutation lookup

    let relicSetIndex: u32 = setH + setB * relicSetCount + setG * relicSetCount * relicSetCount + setF * relicSetCount * relicSetCount * relicSetCount;
    let ornamentSetIndex: u32 = setP + setL * ornamentSetCount;

    // START SET FILTERS
    // ═════════════════════════════════════════════════════════════════════════════════════════════════════════════════╗
    /* INJECT SET FILTERS */
    // ═════════════════════════════════════════════════════════════════════════════════════════════════════════════════╝
    // END SET FILTERS

    // Calculate relic set counts

    var sets = Sets();

    sets.PasserbyOfWanderingCloud            = i32((1 >> (setH ^ 0)) + (1 >> (setG ^ 0)) + (1 >> (setB ^ 0)) + (1 >> (setF ^ 0)));
    sets.MusketeerOfWildWheat                = i32((1 >> (setH ^ 1)) + (1 >> (setG ^ 1)) + (1 >> (setB ^ 1)) + (1 >> (setF ^ 1)));
    sets.KnightOfPurityPalace                = i32((1 >> (setH ^ 2)) + (1 >> (setG ^ 2)) + (1 >> (setB ^ 2)) + (1 >> (setF ^ 2)));
    sets.HunterOfGlacialForest               = i32((1 >> (setH ^ 3)) + (1 >> (setG ^ 3)) + (1 >> (setB ^ 3)) + (1 >> (setF ^ 3)));
    sets.ChampionOfStreetwiseBoxing          = i32((1 >> (setH ^ 4)) + (1 >> (setG ^ 4)) + (1 >> (setB ^ 4)) + (1 >> (setF ^ 4)));
    sets.GuardOfWutheringSnow                = i32((1 >> (setH ^ 5)) + (1 >> (setG ^ 5)) + (1 >> (setB ^ 5)) + (1 >> (setF ^ 5)));
    sets.FiresmithOfLavaForging              = i32((1 >> (setH ^ 6)) + (1 >> (setG ^ 6)) + (1 >> (setB ^ 6)) + (1 >> (setF ^ 6)));
    sets.GeniusOfBrilliantStars              = i32((1 >> (setH ^ 7)) + (1 >> (setG ^ 7)) + (1 >> (setB ^ 7)) + (1 >> (setF ^ 7)));
    sets.BandOfSizzlingThunder               = i32((1 >> (setH ^ 8)) + (1 >> (setG ^ 8)) + (1 >> (setB ^ 8)) + (1 >> (setF ^ 8)));
    sets.EagleOfTwilightLine                 = i32((1 >> (setH ^ 9)) + (1 >> (setG ^ 9)) + (1 >> (setB ^ 9)) + (1 >> (setF ^ 9)));
    sets.ThiefOfShootingMeteor               = i32((1 >> (setH ^ 10)) + (1 >> (setG ^ 10)) + (1 >> (setB ^ 10)) + (1 >> (setF ^ 10)));
    sets.WastelanderOfBanditryDesert         = i32((1 >> (setH ^ 11)) + (1 >> (setG ^ 11)) + (1 >> (setB ^ 11)) + (1 >> (setF ^ 11)));
    sets.LongevousDisciple                   = i32((1 >> (setH ^ 12)) + (1 >> (setG ^ 12)) + (1 >> (setB ^ 12)) + (1 >> (setF ^ 12)));
    sets.MessengerTraversingHackerspace      = i32((1 >> (setH ^ 13)) + (1 >> (setG ^ 13)) + (1 >> (setB ^ 13)) + (1 >> (setF ^ 13)));
    sets.TheAshblazingGrandDuke              = i32((1 >> (setH ^ 14)) + (1 >> (setG ^ 14)) + (1 >> (setB ^ 14)) + (1 >> (setF ^ 14)));
    sets.PrisonerInDeepConfinement           = i32((1 >> (setH ^ 15)) + (1 >> (setG ^ 15)) + (1 >> (setB ^ 15)) + (1 >> (setF ^ 15)));
    sets.PioneerDiverOfDeadWaters            = i32((1 >> (setH ^ 16)) + (1 >> (setG ^ 16)) + (1 >> (setB ^ 16)) + (1 >> (setF ^ 16)));
    sets.WatchmakerMasterOfDreamMachinations = i32((1 >> (setH ^ 17)) + (1 >> (setG ^ 17)) + (1 >> (setB ^ 17)) + (1 >> (setF ^ 17)));
    sets.IronCavalryAgainstTheScourge        = i32((1 >> (setH ^ 18)) + (1 >> (setG ^ 18)) + (1 >> (setB ^ 18)) + (1 >> (setF ^ 18)));
    sets.TheWindSoaringValorous              = i32((1 >> (setH ^ 19)) + (1 >> (setG ^ 19)) + (1 >> (setB ^ 19)) + (1 >> (setF ^ 19)));
    sets.SacerdosRelivedOrdeal               = i32((1 >> (setH ^ 20)) + (1 >> (setG ^ 20)) + (1 >> (setB ^ 20)) + (1 >> (setF ^ 20)));
    sets.ScholarLostInErudition              = i32((1 >> (setH ^ 21)) + (1 >> (setG ^ 21)) + (1 >> (setB ^ 21)) + (1 >> (setF ^ 21)));
    sets.HeroOfTriumphantSong                = i32((1 >> (setH ^ 22)) + (1 >> (setG ^ 22)) + (1 >> (setB ^ 22)) + (1 >> (setF ^ 22)));
    sets.PoetOfMourningCollapse              = i32((1 >> (setH ^ 23)) + (1 >> (setG ^ 23)) + (1 >> (setB ^ 23)) + (1 >> (setF ^ 23)));

    // Calculate ornament set counts

    if (setP == setL) {
      sets.SpaceSealingStation             = i32((1 >> (setP ^ 0)) + (1 >> (setL ^ 0)));
      sets.FleetOfTheAgeless               = i32((1 >> (setP ^ 1)) + (1 >> (setL ^ 1)));
      sets.PanCosmicCommercialEnterprise   = i32((1 >> (setP ^ 2)) + (1 >> (setL ^ 2)));
      sets.BelobogOfTheArchitects          = i32((1 >> (setP ^ 3)) + (1 >> (setL ^ 3)));
      sets.CelestialDifferentiator         = i32((1 >> (setP ^ 4)) + (1 >> (setL ^ 4)));
      sets.InertSalsotto                   = i32((1 >> (setP ^ 5)) + (1 >> (setL ^ 5)));
      sets.TaliaKingdomOfBanditry          = i32((1 >> (setP ^ 6)) + (1 >> (setL ^ 6)));
      sets.SprightlyVonwacq                = i32((1 >> (setP ^ 7)) + (1 >> (setL ^ 7)));
      sets.RutilantArena                   = i32((1 >> (setP ^ 8)) + (1 >> (setL ^ 8)));
      sets.BrokenKeel                      = i32((1 >> (setP ^ 9)) + (1 >> (setL ^ 9)));
      sets.FirmamentFrontlineGlamoth       = i32((1 >> (setP ^ 10)) + (1 >> (setL ^ 10)));
      sets.PenaconyLandOfTheDreams         = i32((1 >> (setP ^ 11)) + (1 >> (setL ^ 11)));
      sets.SigoniaTheUnclaimedDesolation   = i32((1 >> (setP ^ 12)) + (1 >> (setL ^ 12)));
      sets.IzumoGenseiAndTakamaDivineRealm = i32((1 >> (setP ^ 13)) + (1 >> (setL ^ 13)));
      sets.DuranDynastyOfRunningWolves     = i32((1 >> (setP ^ 14)) + (1 >> (setL ^ 14)));
      sets.ForgeOfTheKalpagniLantern       = i32((1 >> (setP ^ 15)) + (1 >> (setL ^ 15)));
      sets.LushakaTheSunkenSeas            = i32((1 >> (setP ^ 16)) + (1 >> (setL ^ 16)));
      sets.TheWondrousBananAmusementPark   = i32((1 >> (setP ^ 17)) + (1 >> (setL ^ 17)));
      sets.BoneCollectionsSereneDemesne    = i32((1 >> (setP ^ 18)) + (1 >> (setL ^ 18)));
      sets.GiantTreeOfRaptBrooding         = i32((1 >> (setP ^ 19)) + (1 >> (setL ^ 19)));
    }

    var c: BasicStats = BasicStats();

    // Calculate relic stat sums
    // NOTE: Performance is worse if we don't add elemental dmg from head/hands/body/feet/rope

    c.HP_P  = head.HP_P + hands.HP_P + body.HP_P + feet.HP_P + planarSphere.HP_P + linkRope.HP_P;
    c.ATK_P = head.ATK_P + hands.ATK_P + body.ATK_P + feet.ATK_P + planarSphere.ATK_P + linkRope.ATK_P;
    c.DEF_P = head.DEF_P + hands.DEF_P + body.DEF_P + feet.DEF_P + planarSphere.DEF_P + linkRope.DEF_P;
    c.SPD_P = head.SPD_P + hands.SPD_P + body.SPD_P + feet.SPD_P + planarSphere.SPD_P + linkRope.SPD_P;
    c.HP  = epsilon + head.HP + hands.HP + body.HP + feet.HP + planarSphere.HP + linkRope.HP;
    c.ATK = epsilon + head.ATK + hands.ATK + body.ATK + feet.ATK + planarSphere.ATK + linkRope.ATK;
    c.DEF = epsilon + head.DEF + hands.DEF + body.DEF + feet.DEF + planarSphere.DEF + linkRope.DEF;
    c.SPD = epsilon + head.SPD + hands.SPD + body.SPD + feet.SPD + planarSphere.SPD + linkRope.SPD;
    c.CR  = epsilon + head.CR + hands.CR + body.CR + feet.CR + planarSphere.CR + linkRope.CR;
    c.CD  = epsilon + head.CD + hands.CD + body.CD + feet.CD + planarSphere.CD + linkRope.CD;
    c.EHR = epsilon + head.EHR + hands.EHR + body.EHR + feet.EHR + planarSphere.EHR + linkRope.EHR;
    c.RES = epsilon + head.RES + hands.RES + body.RES + feet.RES + planarSphere.RES + linkRope.RES;
    c.BE  = epsilon + head.BE + hands.BE + body.BE + feet.BE + planarSphere.BE + linkRope.BE;
    c.ERR = epsilon + head.ERR + hands.ERR + body.ERR + feet.ERR + planarSphere.ERR + linkRope.ERR;
    c.OHB = epsilon + head.OHB + hands.OHB + body.OHB + feet.OHB + planarSphere.OHB + linkRope.OHB;
    c.PHYSICAL_DMG_BOOST  = epsilon + head.PHYSICAL_DMG_BOOST + hands.PHYSICAL_DMG_BOOST + body.PHYSICAL_DMG_BOOST + feet.PHYSICAL_DMG_BOOST + planarSphere.PHYSICAL_DMG_BOOST + linkRope.PHYSICAL_DMG_BOOST;
    c.FIRE_DMG_BOOST      = epsilon + head.FIRE_DMG_BOOST + hands.FIRE_DMG_BOOST + body.FIRE_DMG_BOOST + feet.FIRE_DMG_BOOST + planarSphere.FIRE_DMG_BOOST + linkRope.FIRE_DMG_BOOST;
    c.ICE_DMG_BOOST       = epsilon + head.ICE_DMG_BOOST + hands.ICE_DMG_BOOST + body.ICE_DMG_BOOST + feet.ICE_DMG_BOOST + planarSphere.ICE_DMG_BOOST + linkRope.ICE_DMG_BOOST;
    c.LIGHTNING_DMG_BOOST = epsilon + head.LIGHTNING_DMG_BOOST + hands.LIGHTNING_DMG_BOOST + body.LIGHTNING_DMG_BOOST + feet.LIGHTNING_DMG_BOOST + planarSphere.LIGHTNING_DMG_BOOST + linkRope.LIGHTNING_DMG_BOOST;
    c.WIND_DMG_BOOST      = epsilon + head.WIND_DMG_BOOST + hands.WIND_DMG_BOOST + body.WIND_DMG_BOOST + feet.WIND_DMG_BOOST + planarSphere.WIND_DMG_BOOST + linkRope.WIND_DMG_BOOST;
    c.QUANTUM_DMG_BOOST   = epsilon + head.QUANTUM_DMG_BOOST + hands.QUANTUM_DMG_BOOST + body.QUANTUM_DMG_BOOST + feet.QUANTUM_DMG_BOOST + planarSphere.QUANTUM_DMG_BOOST + linkRope.QUANTUM_DMG_BOOST;
    c.IMAGINARY_DMG_BOOST = epsilon + head.IMAGINARY_DMG_BOOST + hands.IMAGINARY_DMG_BOOST + body.IMAGINARY_DMG_BOOST + feet.IMAGINARY_DMG_BOOST + planarSphere.IMAGINARY_DMG_BOOST + linkRope.IMAGINARY_DMG_BOOST;

    // Calculate basic stats

    c.HP  += (baseHP) * (1 + c.HP_P + traceHP_P + baseHP_P) + traceHP;
    c.ATK += (baseATK) * (1 + c.ATK_P + traceATK_P + baseATK_P) + traceATK;
    c.DEF += (baseDEF) * (1 + c.DEF_P + traceDEF_P + baseDEF_P) + traceDEF;
    c.SPD += (baseSPD) * (1 + c.SPD_P + traceSPD_P + baseSPD_P) + traceSPD;
    c.CR  += baseCR + traceCR;
    c.CD  += baseCD + traceCD;
    c.EHR += baseEHR + traceEHR;
    c.RES += baseRES + traceRES;
    c.BE  += baseBE + traceBE;
    c.ERR += baseERR + traceERR;
    c.OHB += baseOHB + traceOHB;
    c.PHYSICAL_DMG_BOOST  += tracePhysical_DMG + 0.10 * p2(sets.ChampionOfStreetwiseBoxing);
    c.FIRE_DMG_BOOST      += traceFire_DMG + 0.10 * p2(sets.FiresmithOfLavaForging);
    c.ICE_DMG_BOOST       += traceIce_DMG + 0.10 * p2(sets.HunterOfGlacialForest);
    c.LIGHTNING_DMG_BOOST += traceLightning_DMG + 0.10 * p2(sets.BandOfSizzlingThunder);
    c.WIND_DMG_BOOST      += traceWind_DMG + 0.10 * p2(sets.EagleOfTwilightLine);
    c.QUANTUM_DMG_BOOST   += traceQuantum_DMG + 0.10 * p2(sets.GeniusOfBrilliantStars) + 0.10 * p2(sets.PoetOfMourningCollapse);
    c.IMAGINARY_DMG_BOOST += traceImaginary_DMG + 0.10 * p2(sets.WastelanderOfBanditryDesert);

    // Calculate set effects

    c.SPD += (baseSPD) * (
      0.06 * p2(sets.MessengerTraversingHackerspace) +
      0.06 * p2(sets.ForgeOfTheKalpagniLantern) +
      0.06 * p4(sets.MusketeerOfWildWheat) +
      0.06 * p2(sets.SacerdosRelivedOrdeal) -
      0.08 * p4(sets.PoetOfMourningCollapse) +
      0.06 * p2(sets.GiantTreeOfRaptBrooding)
    );

    c.HP += (baseHP) * (
      0.12 * p2(sets.FleetOfTheAgeless) +
      0.12 * p2(sets.LongevousDisciple) +
      0.12 * p2(sets.BoneCollectionsSereneDemesne)
    );

    c.ATK += (baseATK) * (
      0.12 * p2(sets.SpaceSealingStation) +
      0.12 * p2(sets.FirmamentFrontlineGlamoth) +
      0.12 * p2(sets.MusketeerOfWildWheat) +
      0.12 * p2(sets.PrisonerInDeepConfinement) +
      0.12 * p2(sets.IzumoGenseiAndTakamaDivineRealm) +
      0.12 * p2(sets.TheWindSoaringValorous) +
      0.12 * p2(sets.HeroOfTriumphantSong)
    );

    c.DEF += (baseDEF) * (
      0.15 * p2(sets.BelobogOfTheArchitects) +
      0.15 * p2(sets.KnightOfPurityPalace)
    );

    c.CR += (
      0.08 * p2(sets.InertSalsotto) +
      0.08 * p2(sets.RutilantArena) +
      0.04 * p4(sets.PioneerDiverOfDeadWaters) +
      0.04 * p2(sets.SigoniaTheUnclaimedDesolation) +
      0.06 * p4(sets.TheWindSoaringValorous) +
      0.08 * p2(sets.ScholarLostInErudition)
    );

    c.CD += (
      0.16 * p2(sets.CelestialDifferentiator) +
      0.16 * p2(sets.TheWondrousBananAmusementPark)
    );

    c.EHR += (
      0.10 * p2(sets.PanCosmicCommercialEnterprise)
    );

    c.RES += (
      0.10 * p2(sets.BrokenKeel)
    );

    c.BE += (
      0.16 * p2(sets.TaliaKingdomOfBanditry) +
      0.16 * p2(sets.ThiefOfShootingMeteor) +
      0.16 * p4(sets.ThiefOfShootingMeteor) +
      0.16 * p2(sets.WatchmakerMasterOfDreamMachinations) +
      0.16 * p2(sets.IronCavalryAgainstTheScourge)
    );

    c.ERR += (
      0.05 * p2(sets.SprightlyVonwacq) +
      0.05 * p2(sets.PenaconyLandOfTheDreams) +
      0.05 * p2(sets.LushakaTheSunkenSeas)
    );

    c.OHB += (
      0.10 * p2(sets.PasserbyOfWanderingCloud)
    );

    let diffATK = c.ATK + combatBuffsATK + combatBuffsATK_P * baseATK;
    let diffDEF = c.DEF + combatBuffsDEF + combatBuffsDEF_P * baseDEF;
    let diffHP = c.HP   + combatBuffsHP  + combatBuffsHP_P  * baseHP;
    let diffSPD = c.SPD + combatBuffsSPD + combatBuffsSPD_P * baseSPD;
    let diffCD = c.CD   + combatBuffsCD;
    let diffCR = c.CR   + combatBuffsCR;
    let diffEHR = c.EHR;
    let diffRES = c.RES;
    let diffBE = c.BE   + combatBuffsBE;
    let diffERR = c.ERR;
    let diffOHB = c.OHB;

    var combo = 0.0;

    /* START MC ASSIGNMENT */
    var mc = c;
    /* END MC ASSIGNMENT */

    for (var actionIndex = actionCount - 1; actionIndex >= 0; actionIndex--) {
      var action: Action;
      var x: ComputedStats;
      var m: ComputedStats;
      getAction(actionIndex, &action, &x, &m);

      let setConditionals = action.setConditionals;
      var state = ConditionalState();
      state.actionIndex = actionIndex;

      let p_x = &x;
      let p_m = &m;
      let p_sets = &sets;
      let p_state = &state;

      // BASIC

      if (p2(sets.CelestialDifferentiator) >= 1 && setConditionals.enabledCelestialDifferentiator == true && c.CD >= 1.20) {
        x.CR += 0.60;
      }

      // SPD

      if (p4(sets.MessengerTraversingHackerspace) >= 1 && setConditionals.enabledMessengerTraversingHackerspace == true) {
        x.SPD_P += 0.12;
        m.SPD_P += 0.12;
      }
      if (p4(sets.HeroOfTriumphantSong) >= 1 && setConditionals.enabledHeroOfTriumphantSong == true) {
        x.SPD_P += 0.06;
        x.CD += 0.30;
        m.CD += 0.30;
      }

      // ATK

      if (p4(sets.ChampionOfStreetwiseBoxing) >= 1) {
        x.ATK_P += 0.05 * f32(setConditionals.valueChampionOfStreetwiseBoxing);
      }
      if (p4(sets.BandOfSizzlingThunder) >= 1 && setConditionals.enabledBandOfSizzlingThunder == true) {
        x.ATK_P += 0.20;
      }
      if (p4(sets.TheAshblazingGrandDuke) >= 1) {
        x.ATK_P += 0.06 * f32(setConditionals.valueTheAshblazingGrandDuke);
      }

      // DEF

      // HP

      // CD

      if (p4(sets.HunterOfGlacialForest) >= 1 && setConditionals.enabledHunterOfGlacialForest == true) {
        x.CD += 0.25;
      }
      if (p4(sets.WastelanderOfBanditryDesert) >= 1 && setConditionals.valueWastelanderOfBanditryDesert == 2) {
        x.CD += 0.10;
      }
      if (p4(sets.PioneerDiverOfDeadWaters) >= 1) {
        x.CD += getPioneerSetCd(setConditionals.valuePioneerDiverOfDeadWaters);
      }
      if (p2(sets.SigoniaTheUnclaimedDesolation) >= 1) {
        x.CD += 0.04 * f32(setConditionals.valueSigoniaTheUnclaimedDesolation);
      }
      if (p2(sets.DuranDynastyOfRunningWolves) >= 1 && setConditionals.valueDuranDynastyOfRunningWolves >= 5) {
        x.CD += 0.25;
      }
      if (p2(sets.TheWondrousBananAmusementPark) >= 1 && setConditionals.enabledTheWondrousBananAmusementPark == true) {
        x.CD += 0.32;
      }
      if (p4(sets.SacerdosRelivedOrdeal) >= 1) {
        x.CD += 0.18 * f32(setConditionals.valueSacerdosRelivedOrdeal);
      }

      // CR

      if (p4(sets.WastelanderOfBanditryDesert) >= 1 && setConditionals.valueWastelanderOfBanditryDesert > 0) {
        x.CR += 0.10;
      }
      if (p4(sets.LongevousDisciple) >= 1) {
        x.CR += 0.08 * f32(setConditionals.valueLongevousDisciple);
      }
      if (p4(sets.PioneerDiverOfDeadWaters) >= 1 && setConditionals.valuePioneerDiverOfDeadWaters > 2) {
        x.CR += 0.04;
      }
      if (p2(sets.IzumoGenseiAndTakamaDivineRealm) >= 1 && setConditionals.enabledIzumoGenseiAndTakamaDivineRealm == true) {
        x.CR += 0.12;
      }
      if (p4(sets.PoetOfMourningCollapse) >= 1) {
        let crValue = select(0, 0.20, c.SPD < 110) + select(0, 0.12, c.SPD < 95);
        x.CR += crValue;
        m.CR += crValue;
      }

      // BE

      if (p4(sets.WatchmakerMasterOfDreamMachinations) >= 1 && setConditionals.enabledWatchmakerMasterOfDreamMachinations == true) {
        x.BE += 0.30;
        m.BE += 0.30;
      }
      if (p2(sets.ForgeOfTheKalpagniLantern) >= 1 && setConditionals.enabledForgeOfTheKalpagniLantern == true) {
        x.BE += 0.40;
      }

      // Buffs

      // Basic boost
      if (p4(sets.MusketeerOfWildWheat) >= 1) {
        buffAbilityDmg(&x, BASIC_DMG_TYPE, 0.10, 1);
      }

      // Skill boost
      if (p4(sets.FiresmithOfLavaForging) >= 1) {
        buffAbilityDmg(&x, SKILL_DMG_TYPE, 0.12, 1);
      }

      // Fua boost
      if (p2(sets.TheAshblazingGrandDuke) >= 1) {
        buffAbilityDmg(&x, FUA_DMG_TYPE, 0.20, 1);
      }
      if (p2(sets.DuranDynastyOfRunningWolves) >= 1) {
        buffAbilityDmg(&x, FUA_DMG_TYPE, 0.05 * f32(setConditionals.valueDuranDynastyOfRunningWolves), 1);
      }

      // Ult boost
      if (p4(sets.TheWindSoaringValorous) >= 1) {
        buffAbilityDmg(&x, ULT_DMG_TYPE, 0.36 * f32(setConditionals.enabledTheWindSoaringValorous), 1);
      }

      if (p4(sets.ScholarLostInErudition) >= 1) {
        buffAbilityDmg(&x, SKILL_DMG_TYPE | ULT_DMG_TYPE, 0.20, 1);

        if (setConditionals.enabledScholarLostInErudition == true) {
          buffAbilityDmg(&x, SKILL_DMG_TYPE, 0.25, 1);
        }
      }

      // Other boosts

      if (p4(sets.GeniusOfBrilliantStars) >= 1) {
        if (setConditionals.enabledGeniusOfBrilliantStars == true) {
          x.DEF_PEN += 0.20;
        } else {
          x.DEF_PEN += 0.10;
        }
      }

      if (p4(sets.PrisonerInDeepConfinement) >= 1) {
        x.DEF_PEN += 0.06 * f32(setConditionals.valuePrisonerInDeepConfinement);
      }

      if (p2(sets.PioneerDiverOfDeadWaters) >= 1 && setConditionals.valuePioneerDiverOfDeadWaters >= 0) {
        x.ELEMENTAL_DMG += 0.12;
      }

      if (p2(sets.FiresmithOfLavaForging) >= 1 && setConditionals.enabledFiresmithOfLavaForging == true) {
        x.FIRE_DMG_BOOST += 0.12;
      }

      if (p2(sets.GuardOfWutheringSnow) >= 1) {
        x.DMG_RED_MULTI *= (1 - 0.08);
      }

      if (p4(sets.KnightOfPurityPalace) >= 1) {
        x.SHIELD_BOOST += 0.20;
      }

      if (p2(sets.PenaconyLandOfTheDreams) >= 1 && setConditionals.enabledPenaconyLandOfTheDreams == true) {
        m.ELEMENTAL_DMG += 0.10;
      }

      x.ATK += diffATK;
      x.DEF += diffDEF;
      x.HP  += diffHP;
      x.SPD += diffSPD;
      x.CD  += diffCD;
      x.CR  += diffCR;
      x.EHR += diffEHR;
      x.RES += diffRES;
      x.BE  += diffBE;
      x.ERR += diffERR;
      x.OHB += diffOHB;

      addElementalDmg(&c, &x);

      x.ELEMENTAL_DMG += combatBuffsDMG_BOOST;
      x.EFFECT_RES_PEN += combatBuffsEFFECT_RES_PEN;
      x.VULNERABILITY += combatBuffsVULNERABILITY;
      x.BREAK_EFFICIENCY_BOOST += combatBuffsBREAK_EFFICIENCY;

      x.ATK += x.ATK_P * baseATK;
      x.DEF += x.DEF_P * baseDEF;
      x.HP += x.HP_P * baseHP;
      x.SPD += x.SPD_P * baseSPD;

      /* START COPY MEMOSPRITE BASIC STATS */
      m.CD  += mc.CD;
      m.CR  += mc.CR;
      m.EHR += mc.EHR;
      m.RES += mc.RES;
      m.BE  += mc.BE;
      m.ERR += mc.ERR;
      m.OHB += mc.OHB;

      addElementalDmg(&mc, &m);

      m.BASE_ATK = mc.ATK * x.MEMO_BASE_ATK_SCALING + x.MEMO_BASE_ATK_FLAT;
      m.BASE_DEF = mc.DEF * x.MEMO_BASE_DEF_SCALING + x.MEMO_BASE_DEF_FLAT;
      m.BASE_HP = mc.HP * x.MEMO_BASE_HP_SCALING + x.MEMO_BASE_HP_FLAT;
      m.BASE_SPD = mc.SPD * x.MEMO_BASE_SPD_SCALING + x.MEMO_BASE_SPD_FLAT;

      m.ATK += m.BASE_ATK + m.BASE_ATK * m.ATK_P;
      m.DEF += m.BASE_DEF + m.BASE_DEF * m.DEF_P;
      m.HP += m.BASE_HP + m.BASE_HP * m.HP_P;
      m.SPD += m.BASE_SPD + m.BASE_SPD * m.SPD_P;
      /* END COPY MEMOSPRITE BASIC STATS */

      // START BASIC CONDITIONALS
      // ═════════════════════════════════════════════════════════════════════════════════════════════════════════════════╗
      /* INJECT BASIC CONDITIONALS */
      // ═════════════════════════════════════════════════════════════════════════════════════════════════════════════════╝
      // END BASIC CONDITIONALS

      // START COMBAT CONDITIONALS
      // ═════════════════════════════════════════════════════════════════════════════════════════════════════════════════╗
      /* INJECT COMBAT CONDITIONALS */
      // ═════════════════════════════════════════════════════════════════════════════════════════════════════════════════╝
      // END COMBAT CONDITIONALS

      if (p2(sets.FirmamentFrontlineGlamoth) >= 1 && x.SPD >= 135) {
        x.ELEMENTAL_DMG += select(0.12, 0.18, x.SPD >= 160);
      }

      if (p2(sets.RutilantArena) >= 1 && x.CR >= 0.70) {
        buffAbilityDmg(p_x, BASIC_DMG_TYPE | SKILL_DMG_TYPE, 0.20, 1);
      }

      if (p2(sets.InertSalsotto) >= 1 && x.CR >= 0.50) {
        buffAbilityDmg(p_x, ULT_DMG_TYPE | FUA_DMG_TYPE, 0.15, 1);
      }

      if (p4(sets.IronCavalryAgainstTheScourge) >= 1 && x.BE >= 1.50) {
        buffAbilityDefShred(p_x, BREAK_DMG_TYPE, 0.10, 1);
        buffAbilityDefShred(p_x, SUPER_BREAK_DMG_TYPE, select(0, 0.15, x.BE >= 2.50), 1);
      }

      // START ACTION CONDITIONALS
      // ═════════════════════════════════════════════════════════════════════════════════════════════════════════════════╗
      /* INJECT ACTION CONDITIONALS */
      // ═════════════════════════════════════════════════════════════════════════════════════════════════════════════════╝
      // END ACTION CONDITIONALS

      // Calculate damage

      addComputedElementalDmg(&x);

      /* START MEMOSPRITE DAMAGE CALCS */
      calculateDamage(&m, &emptyComputedStats, actionIndex, action.abilityType);
      /* END MEMOSPRITE DAMAGE CALCS */

      calculateDamage(&x, &m, actionIndex, action.abilityType);

      if (actionIndex > 0) {
        if (action.abilityType == BASIC_ABILITY_TYPE) {
          combo += x.BASIC_DMG;
        } else if (action.abilityType == SKILL_ABILITY_TYPE) {
          combo += x.SKILL_DMG;
        } else if (action.abilityType == ULT_ABILITY_TYPE) {
          combo += x.ULT_DMG;
        } else if (action.abilityType == FUA_ABILITY_TYPE) {
          combo += x.FUA_DMG;
        } else if (action.abilityType == MEMO_SKILL_ABILITY_TYPE) {
          combo += x.MEMO_SKILL_DMG;
        } else if (action.abilityType == MEMO_TALENT_ABILITY_TYPE) {
          combo += x.MEMO_TALENT_DMG;
        }
      } else {
        x.COMBO_DMG = combo + comboDot * x.DOT_DMG + comboBreak * x.BREAK_DMG;

        // START COMBAT STAT FILTERS
        // ═════════════════════════════════════════════════════════════════════════════════════════════════════════════════╗
        /* INJECT COMBAT STAT FILTERS */
        // ═════════════════════════════════════════════════════════════════════════════════════════════════════════════════╝
        // END COMBAT STAT FILTERS


        // START BASIC STAT FILTERS
        // ═════════════════════════════════════════════════════════════════════════════════════════════════════════════════╗
        /* INJECT BASIC STAT FILTERS */
        // ═════════════════════════════════════════════════════════════════════════════════════════════════════════════════╝
        // END BASIC STAT FILTERS


        // START RATING STAT FILTERS
        // ═════════════════════════════════════════════════════════════════════════════════════════════════════════════════╗
        /* INJECT RATING STAT FILTERS */
        // ═════════════════════════════════════════════════════════════════════════════════════════════════════════════════╝
        // END RATING STAT FILTERS


        // START RETURN VALUE
        // ═════════════════════════════════════════════════════════════════════════════════════════════════════════════════╗
        /* INJECT RETURN VALUE */
        // ═════════════════════════════════════════════════════════════════════════════════════════════════════════════════╝
        // END RETURN VALUE
      }
    }
  }
}

fn calculateDamage(
  p_x: ptr<function, ComputedStats>,
  p_m: ptr<function, ComputedStats>,
  actionIndex: i32,
  abilityType: f32,
) {
  let x = *p_x;
  let m = *p_m;
  let eLevel: f32 = f32(enemyLevel);

  (*p_x).CR += x.CR_BOOST;
  (*p_x).CD += x.CD_BOOST;
  (*p_x).ATK += x.ATK_P_BOOST * baseATK;

  let baseDmgBoost = 1 + x.ELEMENTAL_DMG;
  let baseDefPen = x.DEF_PEN + combatBuffsDEF_PEN;
  let baseUniversalMulti = 0.9 + x.ENEMY_WEAKNESS_BROKEN * 0.1;
  let baseResistance = resistance - x.RES_PEN - combatBuffsRES_PEN - getElementalResPen(p_x);
  let baseBreakEfficiencyBoost = 1 + x.BREAK_EFFICIENCY_BOOST;

  // === Super / Break ===

  (*p_x).BREAK_DMG
    = baseUniversalMulti
    * 3767.5533
    * ELEMENTAL_BREAK_SCALING
    * calculateDefMulti(baseDefPen + x.BREAK_DEF_PEN)
    * (0.5 + enemyMaxToughness / 120)
    * (1 + x.VULNERABILITY + x.BREAK_VULNERABILITY)
    * (1 - baseResistance)
    * (1 + x.BE)
    * (1 + x.BREAK_DMG_BOOST);

  let baseSuperBreakInstanceDmg
    = baseUniversalMulti
    * 3767.5533
    * calculateDefMulti(baseDefPen + x.SUPER_BREAK_DEF_PEN)
    * (1 + x.VULNERABILITY + x.SUPER_BREAK_VULNERABILITY)
    * (1 - baseResistance)
    * (1 + x.BE)
    * (1 + x.SUPER_BREAK_DMG_BOOST)
    * (0.10f);

  if (actionIndex == 0) {
    /* START DOT CALC */
    let dotDmgBoostMulti = baseDmgBoost + x.DOT_DMG_BOOST;
    let dotDefMulti = calculateDefMulti(baseDefPen + x.DOT_DEF_PEN);
    let dotVulnerabilityMulti = 1 + x.VULNERABILITY + x.DOT_VULNERABILITY;
    let dotResMulti = 1 - (baseResistance - x.DOT_RES_PEN);
    let dotEhrMulti = calculateEhrMulti(p_x);
    let dotTrueDmgMulti = 1 + x.TRUE_DMG_MODIFIER + x.DOT_TRUE_DMG_MODIFIER;
    let initialDmg = calculateInitial(
      p_x,
      x.DOT_DMG,
      x.DOT_HP_SCALING,
      x.DOT_DEF_SCALING,
      x.DOT_ATK_SCALING,
      x.DOT_ATK_P_BOOST
    );

    if (initialDmg > 0) {
      (*p_x).DOT_DMG = initialDmg
        * (baseUniversalMulti)
        * (dotDmgBoostMulti)
        * (dotDefMulti)
        * (dotVulnerabilityMulti)
        * (dotResMulti)
        * (dotEhrMulti)
        * (dotTrueDmgMulti);
    }
    /* END DOT CALC */

    if (x.HEAL_VALUE > 0) {
      (*p_x).HEAL_VALUE = x.HEAL_VALUE * (
        1
        + x.OHB
        + select(0, x.SKILL_OHB, x.HEAL_TYPE == SKILL_DMG_TYPE)
        + select(0, x.ULT_OHB, x.HEAL_TYPE == ULT_DMG_TYPE)
      );
    }

    if (x.SHIELD_VALUE > 0) {
      (*p_x).SHIELD_VALUE = x.SHIELD_VALUE * (1 + x.SHIELD_BOOST);
    }

    /* START EHP CALC */
    (*p_x).EHP = x.HP / (1 - x.DEF / (x.DEF + 200 + 10 * eLevel)) * (1 / x.DMG_RED_MULTI);
    /* END EHP CALC */
  }

  // START ACTION DAMAGE
  // ═════════════════════════════════════════════════════════════════════════════════════════════════════════════════╗
  /* INJECT ACTION DAMAGE */
  // ═════════════════════════════════════════════════════════════════════════════════════════════════════════════════╝
  // END ACTION DAMAGE

  (*p_x).BREAK_DMG *= 1 + x.TRUE_DMG_MODIFIER + x.BREAK_TRUE_DMG_MODIFIER;
}

fn calculateInitial(
  p_x: ptr<function, ComputedStats>,
  abilityDmg: f32,
  hpScaling: f32,
  defScaling: f32,
  atkScaling: f32,
  atkBoostP: f32
) -> f32 {
  let x = *p_x;
  return abilityDmg
    + hpScaling * x.HP
    + defScaling * x.DEF
    + atkScaling * (x.ATK + atkBoostP * baseATK);
}

fn calculateDefMulti(defPen: f32) -> f32 {
  return (100.0f) / ((f32(enemyLevel) + 20.0f) * max(0.0f, 1.0f - defPen) + 100.0f);
}

fn calculateEhrMulti(
  p_x: ptr<function, ComputedStats>
) -> f32 {
  let x = *p_x;
  let effectiveDotChance = min(1, x.DOT_CHANCE * (1 + x.EHR) * (1 - enemyEffectResistance + x.EFFECT_RES_PEN));
  let dotEhrMulti = select(
    (effectiveDotChance),
    (1 + x.DOT_SPLIT * effectiveDotChance * (x.DOT_STACKS - 1)) / (1 + x.DOT_SPLIT * (x.DOT_STACKS - 1)),
    x.DOT_SPLIT > 0
  );

  return dotEhrMulti;
}

fn calculateAbilityDmg(
  p_x: ptr<function, ComputedStats>,
  baseUniversalMulti: f32,
  baseDmgBoost: f32,
  baseDefPen: f32,
  baseResistance: f32,
  baseSuperBreakInstanceDmg: f32,
  baseBreakEfficiencyBoost: f32,
  abilityDmg: f32,
  abilityDmgBoost: f32,
  abilityVulnerability: f32,
  abilityDefPen: f32,
  abilityResPen: f32,
  abilityCrBoost: f32,
  abilityCdBoost: f32,
  abilityOriginalDmgBoost: f32,
  abilityBreakEfficiencyBoost: f32,
  abilitySuperBreakModifier: f32,
  abilityBreakDmgModifier: f32,
  abilityToughnessDmg: f32,
  abilityAdditionalDmg: f32,
  abilityAdditionalCrOverride: f32,
  abilityAdditionalCdOverride: f32,
  abilityTrueDmgModifier: f32,
  abilityMemoJointDamage: f32,
) -> f32 {
  let x = *p_x;

  var abilityCritDmgOutput: f32 = 0;
  if (abilityDmg > 0) {
    let abilityCr = min(1, x.CR + abilityCrBoost);
    let abilityCd = x.CD + x.CD_BOOST + abilityCdBoost;
    let abilityCritMulti = abilityCr * (1 + abilityCd) + (1 - abilityCr);
    let abilityVulnerabilityMulti = 1 + x.VULNERABILITY + abilityVulnerability;
    let abilityDefMulti = calculateDefMulti(baseDefPen + abilityDefPen);
    let abilityResMulti = 1 - (baseResistance - abilityResPen);
    let abilityOriginalDmgMulti = 1 + abilityOriginalDmgBoost + x.FINAL_DMG_BOOST;

    abilityCritDmgOutput = abilityDmg
      * (baseUniversalMulti)
      * (baseDmgBoost + abilityDmgBoost)
      * (abilityDefMulti)
      * (abilityVulnerabilityMulti)
      * (abilityCritMulti)
      * (abilityResMulti)
      * (abilityOriginalDmgMulti);
  }

  // === Break DMG ===

  var abilityBreakDmgOutput: f32 = 0;
  if (abilityBreakDmgModifier > 0) {
    abilityBreakDmgOutput = abilityBreakDmgModifier * x.BREAK_DMG;
  }

  // === Super Break DMG ===

  var abilitySuperBreakDmgOutput: f32 = 0;
  let superBreakModifier = x.SUPER_BREAK_MODIFIER + abilitySuperBreakModifier;
  if (superBreakModifier > 0) {
    abilitySuperBreakDmgOutput = baseSuperBreakInstanceDmg
      * (superBreakModifier)
      * (baseBreakEfficiencyBoost + abilityBreakEfficiencyBoost)
      * (abilityToughnessDmg);
  }

  // === Additional DMG ===

  var abilityAdditionalDmgOutput: f32 = 0;
  if (abilityAdditionalDmg > 0) {
    let additionalDmgCr = select(min(1, x.CR), abilityAdditionalCrOverride, abilityAdditionalCrOverride > 0);
    let additionalDmgCd = select(x.CD, abilityAdditionalCdOverride, abilityAdditionalCdOverride > 0);
    let abilityAdditionalCritMulti = additionalDmgCr * (1 + additionalDmgCd) + (1 - additionalDmgCr);
    abilityAdditionalDmgOutput = abilityAdditionalDmg
      * (baseUniversalMulti)
      * (baseDmgBoost + x.ADDITIONAL_DMG_BOOST)
      * calculateDefMulti(baseDefPen)
      * (1 + x.VULNERABILITY)
      * (abilityAdditionalCritMulti)
      * (1 - baseResistance);
  }

  // === Primary DMG ===

  let primaryDmgOutput = abilityCritDmgOutput
    + abilityBreakDmgOutput
    + abilitySuperBreakDmgOutput
    + abilityAdditionalDmgOutput;

  // === True DMG ===

  let trueDmgOutput = (x.TRUE_DMG_MODIFIER + abilityTrueDmgModifier) * primaryDmgOutput;

  // === Memo Joint DMG ===

  var memoJointDmgOutput: f32 = 0;
  if (abilityMemoJointDamage > 0) {
    memoJointDmgOutput = abilityMemoJointDamage;
  }

  return primaryDmgOutput + trueDmgOutput + memoJointDmgOutput;
}

fn p2(n: i32) -> f32 {
  return f32(min(1, n >> 1));
}

fn p4(n: i32) -> f32 {
  return f32(n >> 2);
}

fn buffAbilityTrueDmg(
  p_x: ptr<function, ComputedStats>,
  abilityTypeFlags: i32,
  value: f32,
  condition: i32
) {
  if (condition == 0) {
    return;
  }
  if ((abilityTypeFlags & i32((*p_x).BASIC_DMG_TYPE)) != 0) {
    (*p_x).BASIC_TRUE_DMG_MODIFIER += value;
  }
  if ((abilityTypeFlags & i32((*p_x).SKILL_DMG_TYPE)) != 0) {
    (*p_x).SKILL_TRUE_DMG_MODIFIER += value;
  }
  if ((abilityTypeFlags & i32((*p_x).ULT_DMG_TYPE)) != 0) {
    (*p_x).ULT_TRUE_DMG_MODIFIER += value;
  }
  if ((abilityTypeFlags & i32((*p_x).FUA_DMG_TYPE)) != 0) {
    (*p_x).FUA_TRUE_DMG_MODIFIER += value;
  }
  if ((abilityTypeFlags & i32((*p_x).DOT_DMG_TYPE)) != 0) {
    (*p_x).DOT_TRUE_DMG_MODIFIER += value;
  }
  if ((abilityTypeFlags & i32((*p_x).BREAK_DMG_TYPE)) != 0) {
    (*p_x).BREAK_TRUE_DMG_MODIFIER += value;
  }
  if ((abilityTypeFlags & i32((*p_x).MEMO_SKILL_DMG_TYPE)) != 0) {
    (*p_x).MEMO_SKILL_TRUE_DMG_MODIFIER += value;
  }
  if ((abilityTypeFlags & i32((*p_x).MEMO_TALENT_DMG_TYPE)) != 0) {
    (*p_x).MEMO_TALENT_TRUE_DMG_MODIFIER += value;
  }
//  if ((abilityTypeFlags & i32((*p_x).ADDITIONAL_DMG_TYPE)) != 0) {
//    (*p_x).ADDITIONAL_TRUE_DMG_MODIFIER += value;
//  }
//  if ((abilityTypeFlags & i32((*p_x).SUPER_BREAK_DMG_TYPE)) != 0) {
//    (*p_x).SUPER_BREAK_TRUE_DMG_MODIFIER += value;
//  }
}

fn buffAbilityDmg(
  p_x: ptr<function, ComputedStats>,
  abilityTypeFlags: i32,
  value: f32,
  condition: i32
) {
  if (condition == 0) {
    return;
  }
  if ((abilityTypeFlags & i32((*p_x).BASIC_DMG_TYPE)) != 0) {
    (*p_x).BASIC_DMG_BOOST += value;
  }
  if ((abilityTypeFlags & i32((*p_x).SKILL_DMG_TYPE)) != 0) {
    (*p_x).SKILL_DMG_BOOST += value;
  }
  if ((abilityTypeFlags & i32((*p_x).ULT_DMG_TYPE)) != 0) {
    (*p_x).ULT_DMG_BOOST += value;
  }
  if ((abilityTypeFlags & i32((*p_x).FUA_DMG_TYPE)) != 0) {
    (*p_x).FUA_DMG_BOOST += value;
  }
  if ((abilityTypeFlags & i32((*p_x).DOT_DMG_TYPE)) != 0) {
    (*p_x).DOT_DMG_BOOST += value;
  }
  if ((abilityTypeFlags & i32((*p_x).BREAK_DMG_TYPE)) != 0) {
    (*p_x).BREAK_DMG_BOOST += value;
  }
  if ((abilityTypeFlags & i32((*p_x).MEMO_SKILL_DMG_TYPE)) != 0) {
    (*p_x).MEMO_SKILL_DMG_BOOST += value;
  }
  if ((abilityTypeFlags & i32((*p_x).MEMO_TALENT_DMG_TYPE)) != 0) {
    (*p_x).MEMO_TALENT_DMG_BOOST += value;
  }
  if ((abilityTypeFlags & i32((*p_x).ADDITIONAL_DMG_TYPE)) != 0) {
    (*p_x).ADDITIONAL_DMG_BOOST += value;
  }
  if ((abilityTypeFlags & i32((*p_x).SUPER_BREAK_DMG_TYPE)) != 0) {
    (*p_x).SUPER_BREAK_DMG_BOOST += value;
  }
}

fn buffAbilityCr(
  p_x: ptr<function, ComputedStats>,
  abilityTypeFlags: i32,
  value: f32,
  condition: i32
) {
  if (condition == 0) {
    return;
  }
  if ((abilityTypeFlags & i32((*p_x).BASIC_DMG_TYPE)) != 0) {
    (*p_x).BASIC_CR_BOOST += value;
  }
  if ((abilityTypeFlags & i32((*p_x).SKILL_DMG_TYPE)) != 0) {
    (*p_x).SKILL_CR_BOOST += value;
  }
  if ((abilityTypeFlags & i32((*p_x).ULT_DMG_TYPE)) != 0) {
    (*p_x).ULT_CR_BOOST += value;
  }
  if ((abilityTypeFlags & i32((*p_x).FUA_DMG_TYPE)) != 0) {
    (*p_x).FUA_CR_BOOST += value;
  }
//  if ((abilityTypeFlags & i32((*p_x).DOT_DMG_TYPE)) != 0) {
//    (*p_x).DOT_CR_BOOST += value;
//  }
//  if ((abilityTypeFlags & i32((*p_x).BREAK_DMG_TYPE)) != 0) {
//    (*p_x).BREAK_CR_BOOST += value;
//  }
  if ((abilityTypeFlags & i32((*p_x).MEMO_SKILL_DMG_TYPE)) != 0) {
    (*p_x).MEMO_SKILL_CR_BOOST += value;
  }
  if ((abilityTypeFlags & i32((*p_x).MEMO_TALENT_DMG_TYPE)) != 0) {
    (*p_x).MEMO_TALENT_CR_BOOST += value;
  }
//  if ((abilityTypeFlags & i32((*p_x).ADDITIONAL_DMG_TYPE)) != 0) {
//    (*p_x).ADDITIONAL_CR_BOOST += value;
//  }
//  if ((abilityTypeFlags & i32((*p_x).SUPER_BREAK_DMG_TYPE)) != 0) {
//    (*p_x).SUPER_BREAK_CR_BOOST += value;
//  }
}

fn buffAbilityCd(
  p_x: ptr<function, ComputedStats>,
  abilityTypeFlags: i32,
  value: f32,
  condition: i32
) {
  if (condition == 0) {
    return;
  }
  if ((abilityTypeFlags & i32((*p_x).BASIC_DMG_TYPE)) != 0) {
    (*p_x).BASIC_CD_BOOST += value;
  }
  if ((abilityTypeFlags & i32((*p_x).SKILL_DMG_TYPE)) != 0) {
    (*p_x).SKILL_CD_BOOST += value;
  }
  if ((abilityTypeFlags & i32((*p_x).ULT_DMG_TYPE)) != 0) {
    (*p_x).ULT_CD_BOOST += value;
  }
  if ((abilityTypeFlags & i32((*p_x).FUA_DMG_TYPE)) != 0) {
    (*p_x).FUA_CD_BOOST += value;
  }
//  if ((abilityTypeFlags & i32((*p_x).DOT_DMG_TYPE)) != 0) {
//    (*p_x).DOT_CD_BOOST += value;
//  }
//  if ((abilityTypeFlags & i32((*p_x).BREAK_DMG_TYPE)) != 0) {
//    (*p_x).BREAK_CD_BOOST += value;
//  }
  if ((abilityTypeFlags & i32((*p_x).MEMO_SKILL_DMG_TYPE)) != 0) {
    (*p_x).MEMO_SKILL_CD_BOOST += value;
  }
  if ((abilityTypeFlags & i32((*p_x).MEMO_TALENT_DMG_TYPE)) != 0) {
    (*p_x).MEMO_TALENT_CD_BOOST += value;
  }
//  if ((abilityTypeFlags & i32((*p_x).ADDITIONAL_DMG_TYPE)) != 0) {
//    (*p_x).ADDITIONAL_CD_BOOST += value;
//  }
//  if ((abilityTypeFlags & i32((*p_x).SUPER_BREAK_DMG_TYPE)) != 0) {
//    (*p_x).SUPER_BREAK_CD_BOOST += value;
//  }
}

fn buffAbilityDefShred(
  p_x: ptr<function, ComputedStats>,
  abilityTypeFlags: i32,
  value: f32,
  condition: i32
) {
  if (condition == 0) {
    return;
  }
  if ((abilityTypeFlags & i32((*p_x).BASIC_DMG_TYPE)) != 0) {
    (*p_x).BASIC_DEF_PEN += value;
  }
  if ((abilityTypeFlags & i32((*p_x).SKILL_DMG_TYPE)) != 0) {
    (*p_x).SKILL_DEF_PEN += value;
  }
  if ((abilityTypeFlags & i32((*p_x).ULT_DMG_TYPE)) != 0) {
    (*p_x).ULT_DEF_PEN += value;
  }
  if ((abilityTypeFlags & i32((*p_x).FUA_DMG_TYPE)) != 0) {
    (*p_x).FUA_DEF_PEN += value;
  }
  if ((abilityTypeFlags & i32((*p_x).DOT_DMG_TYPE)) != 0) {
    (*p_x).DOT_DEF_PEN += value;
  }
  if ((abilityTypeFlags & i32((*p_x).BREAK_DMG_TYPE)) != 0) {
    (*p_x).BREAK_DEF_PEN += value;
  }
  if ((abilityTypeFlags & i32((*p_x).MEMO_SKILL_DMG_TYPE)) != 0) {
    (*p_x).MEMO_SKILL_DEF_PEN += value;
  }
  if ((abilityTypeFlags & i32((*p_x).MEMO_TALENT_DMG_TYPE)) != 0) {
    (*p_x).MEMO_TALENT_DEF_PEN += value;
  }
//  if ((abilityTypeFlags & i32((*p_x).ADDITIONAL_DMG_TYPE)) != 0) {
//    (*p_x).ADDITIONAL_DEF_PEN += value;
//  }
  if ((abilityTypeFlags & i32((*p_x).SUPER_BREAK_DMG_TYPE)) != 0) {
    (*p_x).SUPER_BREAK_DEF_PEN += value;
  }
}

fn buffAbilityVulnerability(
  p_x: ptr<function, ComputedStats>,
  abilityTypeFlags: i32,
  value: f32,
  condition: i32
) {
  if (condition == 0) {
    return;
  }
  if ((abilityTypeFlags & i32((*p_x).BASIC_DMG_TYPE)) != 0) {
    (*p_x).BASIC_VULNERABILITY += value;
  }
  if ((abilityTypeFlags & i32((*p_x).SKILL_DMG_TYPE)) != 0) {
    (*p_x).SKILL_VULNERABILITY += value;
  }
  if ((abilityTypeFlags & i32((*p_x).ULT_DMG_TYPE)) != 0) {
    (*p_x).ULT_VULNERABILITY += value;
  }
  if ((abilityTypeFlags & i32((*p_x).FUA_DMG_TYPE)) != 0) {
    (*p_x).FUA_VULNERABILITY += value;
  }
  if ((abilityTypeFlags & i32((*p_x).DOT_DMG_TYPE)) != 0) {
    (*p_x).DOT_VULNERABILITY += value;
  }
  if ((abilityTypeFlags & i32((*p_x).BREAK_DMG_TYPE)) != 0) {
    (*p_x).BREAK_VULNERABILITY += value;
  }
  if ((abilityTypeFlags & i32((*p_x).MEMO_SKILL_DMG_TYPE)) != 0) {
    (*p_x).MEMO_SKILL_VULNERABILITY += value;
  }
  if ((abilityTypeFlags & i32((*p_x).MEMO_TALENT_DMG_TYPE)) != 0) {
    (*p_x).MEMO_TALENT_VULNERABILITY += value;
  }
//  if ((abilityTypeFlags & i32((*p_x).ADDITIONAL_DMG_TYPE)) != 0) {
//    (*p_x).ADDITIONAL_VULNERABILITY += value;
//  }
  if ((abilityTypeFlags & i32((*p_x).SUPER_BREAK_DMG_TYPE)) != 0) {
    (*p_x).SUPER_BREAK_VULNERABILITY += value;
  }
}

fn addElementalDmg(
  c_x: ptr<function, BasicStats>,
  p_x: ptr<function, ComputedStats>,
) {
  switch (ELEMENT_INDEX) {
    case 0: {
      (*p_x).ELEMENTAL_DMG += (*c_x).PHYSICAL_DMG_BOOST;
    }
    case 1: {
      (*p_x).ELEMENTAL_DMG += (*c_x).FIRE_DMG_BOOST;
    }
    case 2: {
      (*p_x).ELEMENTAL_DMG += (*c_x).ICE_DMG_BOOST;
    }
    case 3: {
      (*p_x).ELEMENTAL_DMG += (*c_x).LIGHTNING_DMG_BOOST;
    }
    case 4: {
      (*p_x).ELEMENTAL_DMG += (*c_x).WIND_DMG_BOOST;
    }
    case 5: {
      (*p_x).ELEMENTAL_DMG += (*c_x).QUANTUM_DMG_BOOST;
    }
    case 6: {
      (*p_x).ELEMENTAL_DMG += (*c_x).IMAGINARY_DMG_BOOST;
    }
    default: {

    }
  }
}

fn addComputedElementalDmg(
  p_x: ptr<function, ComputedStats>,
) {
  switch (ELEMENT_INDEX) {
    case 0: {
      (*p_x).ELEMENTAL_DMG += (*p_x).PHYSICAL_DMG_BOOST;
    }
    case 1: {
      (*p_x).ELEMENTAL_DMG += (*p_x).FIRE_DMG_BOOST;
    }
    case 2: {
      (*p_x).ELEMENTAL_DMG += (*p_x).ICE_DMG_BOOST;
    }
    case 3: {
      (*p_x).ELEMENTAL_DMG += (*p_x).LIGHTNING_DMG_BOOST;
    }
    case 4: {
      (*p_x).ELEMENTAL_DMG += (*p_x).WIND_DMG_BOOST;
    }
    case 5: {
      (*p_x).ELEMENTAL_DMG += (*p_x).QUANTUM_DMG_BOOST;
    }
    case 6: {
      (*p_x).ELEMENTAL_DMG += (*p_x).IMAGINARY_DMG_BOOST;
    }
    default: {

    }
  }
}

fn getElementalResPen(
  p_x: ptr<function, ComputedStats>,
) -> f32 {
  switch (ELEMENT_INDEX) {
    case 0: {
      return (*p_x).PHYSICAL_RES_PEN;
    }
    case 1: {
      return (*p_x).FIRE_RES_PEN;
    }
    case 2: {
      return (*p_x).ICE_RES_PEN;
    }
    case 3: {
      return (*p_x).LIGHTNING_RES_PEN;
    }
    case 4: {
      return (*p_x).WIND_RES_PEN;
    }
    case 5: {
      return (*p_x).QUANTUM_RES_PEN;
    }
    case 6: {
      return (*p_x).IMAGINARY_RES_PEN;
    }
    default: {
      return 0;
    }
  }
}

fn getPioneerSetCd(
  index: i32,
) -> f32 {
  switch (index) {
    case 4: {
      return 0.24;
    }
    case 3: {
      return 0.16;
    }
    case 2: {
      return 0.12;
    }
    case 1: {
      return 0.08;
    }
    default: {
      return 0.0;
    }
  }
}

fn calculateAshblazingSetP(
  setCount: i32,
  valueTheAshblazingGrandDuke: i32,
  hitMulti: f32,
) -> f32 {
  if (p4(setCount) >= 1) {
    let ashblazingAtk = 0.06 * f32(valueTheAshblazingGrandDuke);
    let ashblazingMulti = hitMulti;

    return ashblazingMulti - ashblazingAtk;
  }

  return 0;
}
`,Yg=`struct Relic {
  HP_P: f32,
  ATK_P: f32,
  DEF_P: f32,
  SPD_P: f32,
  HP: f32,
  ATK: f32,
  DEF: f32,
  SPD: f32,
  CR: f32,
  CD: f32,
  EHR: f32,
  RES: f32,
  BE: f32,
  ERR: f32,
  OHB: f32,
  PHYSICAL_DMG_BOOST: f32,
  FIRE_DMG_BOOST: f32,
  ICE_DMG_BOOST: f32,
  LIGHTNING_DMG_BOOST: f32,
  WIND_DMG_BOOST: f32,
  QUANTUM_DMG_BOOST: f32,
  IMAGINARY_DMG_BOOST: f32,
  relicSet: f32, // 22
}

struct BasicStats {
  HP_P: f32,
  ATK_P: f32,
  DEF_P: f32,
  SPD_P: f32,
  HP: f32,
  ATK: f32,
  DEF: f32,
  SPD: f32,
  CR: f32,
  CD: f32,
  EHR: f32,
  RES: f32,
  BE: f32,
  ERR: f32,
  OHB: f32,
  PHYSICAL_DMG_BOOST: f32,
  FIRE_DMG_BOOST: f32,
  ICE_DMG_BOOST: f32,
  LIGHTNING_DMG_BOOST: f32,
  WIND_DMG_BOOST: f32,
  QUANTUM_DMG_BOOST: f32,
  IMAGINARY_DMG_BOOST: f32,
}

struct Sets {
  PasserbyOfWanderingCloud: i32,
  MusketeerOfWildWheat: i32,
  KnightOfPurityPalace: i32,
  HunterOfGlacialForest: i32,
  ChampionOfStreetwiseBoxing: i32,
  GuardOfWutheringSnow: i32,
  FiresmithOfLavaForging: i32,
  GeniusOfBrilliantStars: i32,
  BandOfSizzlingThunder: i32,
  EagleOfTwilightLine: i32,
  ThiefOfShootingMeteor: i32,
  WastelanderOfBanditryDesert: i32,
  LongevousDisciple: i32,
  MessengerTraversingHackerspace: i32,
  TheAshblazingGrandDuke: i32,
  PrisonerInDeepConfinement: i32,
  PioneerDiverOfDeadWaters: i32,
  WatchmakerMasterOfDreamMachinations: i32,
  IronCavalryAgainstTheScourge: i32,
  TheWindSoaringValorous: i32,
  SacerdosRelivedOrdeal: i32,
  ScholarLostInErudition: i32,
  HeroOfTriumphantSong: i32,
  PoetOfMourningCollapse: i32,
  SpaceSealingStation: i32,
  FleetOfTheAgeless: i32,
  PanCosmicCommercialEnterprise: i32,
  BelobogOfTheArchitects: i32,
  CelestialDifferentiator: i32,
  InertSalsotto: i32,
  TaliaKingdomOfBanditry: i32,
  SprightlyVonwacq: i32,
  RutilantArena: i32,
  BrokenKeel: i32,
  FirmamentFrontlineGlamoth: i32,
  PenaconyLandOfTheDreams: i32,
  SigoniaTheUnclaimedDesolation: i32,
  IzumoGenseiAndTakamaDivineRealm: i32,
  DuranDynastyOfRunningWolves: i32,
  ForgeOfTheKalpagniLantern: i32,
  LushakaTheSunkenSeas: i32,
  TheWondrousBananAmusementPark: i32,
  BoneCollectionsSereneDemesne: i32,
  GiantTreeOfRaptBrooding: i32,
}

struct SetConditionals {
  enabledHunterOfGlacialForest: bool,
  enabledFiresmithOfLavaForging: bool,
  enabledGeniusOfBrilliantStars: bool,
  enabledBandOfSizzlingThunder: bool,
  enabledMessengerTraversingHackerspace: bool,
  enabledCelestialDifferentiator: bool,
  enabledWatchmakerMasterOfDreamMachinations: bool,
  enabledPenaconyLandOfTheDreams: bool,
  enabledIzumoGenseiAndTakamaDivineRealm: bool,
  enabledForgeOfTheKalpagniLantern: bool,
  enabledTheWindSoaringValorous: bool,
  enabledTheWondrousBananAmusementPark: bool,
  enabledScholarLostInErudition: bool,
  enabledHeroOfTriumphantSong: bool,
  valueChampionOfStreetwiseBoxing: i32,
  valueWastelanderOfBanditryDesert: i32,
  valueLongevousDisciple: i32,
  valueTheAshblazingGrandDuke: i32,
  valuePrisonerInDeepConfinement: i32,
  valuePioneerDiverOfDeadWaters: i32,
  valueSigoniaTheUnclaimedDesolation: i32,
  valueDuranDynastyOfRunningWolves: i32,
  valueSacerdosRelivedOrdeal: i32
}

struct Action {
  abilityType: f32,
  setConditionals: SetConditionals,
}

struct Params {
  xl: f32,
  xp: f32,
  xf: f32,
  xb: f32,
  xg: f32,
  xh: f32,
  threshold: f32,
}
`;function Jg(e,t,n,o){let s="";return s=Wg(s,e,t,n),s=$g(s),s=wg(s,t,e,o),s=n2(s,t,e,o),s=e2(s,t,o),s=t2(s,t,o),s=a2(s,t,o),s=qg(s,o),s=_g(s),s=Qg(s,t,e,o),s}function Qg(e,t,n,o){return n.path!=Oi.Remembrance&&(e=Ea(e,"COPY MEMOSPRITE BASIC STATS"),e=Ea(e,"MEMOSPRITE DAMAGE CALCS"),e=Ea(e,"MC ASSIGNMENT")),n.resultSort!=T.EHP.key&&!o.DEBUG&&t.minEhp==0&&t.maxEhp==m.MAX_INT&&(e=Ea(e,"EHP CALC")),n.resultSort!=T.COMBO.key&&!o.DEBUG&&(n.resultSort!=T.DOT.key&&t.minDot==0&&t.maxDot==m.MAX_INT&&(e=Ea(e,"DOT CALC")),n.resultSort!=T.BASIC.key&&t.minBasic==0&&t.maxBasic==m.MAX_INT&&(e=Ea(e,"BASIC CALC")),n.resultSort!=T.SKILL.key&&t.minSkill==0&&t.maxSkill==m.MAX_INT&&(e=Ea(e,"SKILL CALC")),n.resultSort!=T.ULT.key&&t.minUlt==0&&t.maxUlt==m.MAX_INT&&(e=Ea(e,"ULT CALC")),n.resultSort!=T.FUA.key&&t.minFua==0&&t.maxFua==m.MAX_INT&&(e=Ea(e,"FUA CALC")),n.resultSort!=T.MEMO_SKILL.key&&t.minMemoSkill==0&&t.maxMemoSkill==m.MAX_INT&&(e=Ea(e,"MEMO_SKILL CALC")),n.resultSort!=T.MEMO_TALENT.key&&t.minMemoTalent==0&&t.maxMemoTalent==m.MAX_INT&&(e=Ea(e,"MEMO_TALENT CALC"))),e}function Ea(e,t){return e=e.replace(`START ${t} */`,`═════════════════════════════════════════ DISABLED ${t} ═════════════════════════════════════════╗`),e=e.replace(`/* END ${t}`,`════════════════════════════════════════════ DISABLED ${t} ═════════════════════════════════════════╝`),e}function $g(e){return e+=`
${Xg}

${Yg}
  `,e}function ul(e){return t=>{const[n,o,s]=t.split(/[><]/).flatMap(c=>c.split(".")).map(c=>c.trim()),r=s.includes("min");return s.includes("max")&&e[s]==m.MAX_INT||r&&e[s]==0?"":t}}function ml(e,t=2){return st(e.length>0?e:"false",t)}function qg(e,t){return e.replace("/* INJECT SET FILTERS */",st(`
if (relicSetSolutionsMatrix[relicSetIndex] < 1 || ornamentSetSolutionsMatrix[ornamentSetIndex] < 1) {
  results[index] = ${t.DEBUG?"ComputedStats()":"-failures; failures = failures + 1"};
  continue;
}
  `,2))}function e2(e,t,n){const o=T[t.resultSort],s=o.gpuProperty,r=o.isComputedRating,l=ul(t);let c=r?`x.${s} < threshold`:`c.${s} < threshold`;s==T.COMBO.key&&(c="");const d=[l("c.SPD < minSpd"),l("c.SPD > maxSpd"),l("c.HP  < minHp"),l("c.HP  > maxHp"),l("c.ATK < minAtk"),l("c.ATK > maxAtk"),l("c.DEF < minDef"),l("c.DEF > maxDef"),l("c.CR  < minCr"),l("c.CR  > maxCr"),l("c.CD  < minCd"),l("c.CD  > maxCd"),l("c.EHR < minEhr"),l("c.EHR > maxEhr"),l("c.RES < minRes"),l("c.RES > maxRes"),l("c.BE  < minBe"),l("c.BE  > maxBe"),l("c.ERR < minErr"),l("c.ERR > maxErr"),l(c)].filter(u=>u.length>0).join(` ||
`);return e=e.replace("/* INJECT BASIC STAT FILTERS */",st(`
if (statDisplay == 1) {
  if (
${ml(d)}
  ) {
    results[index] = ${n.DEBUG?"ComputedStats()":"-failures; failures = failures + 1"};
    break;
  }
}
  `,4)),e}function t2(e,t,n){const s=T[t.resultSort].gpuProperty,r=ul(t),l=[r("x.SPD < minSpd"),r("x.SPD > maxSpd"),r("x.HP  < minHp"),r("x.HP  > maxHp"),r("x.ATK < minAtk"),r("x.ATK > maxAtk"),r("x.DEF < minDef"),r("x.DEF > maxDef"),r("x.CR  < minCr"),r("x.CR  > maxCr"),r("x.CD  < minCd"),r("x.CD  > maxCd"),r("x.EHR < minEhr"),r("x.EHR > maxEhr"),r("x.RES < minRes"),r("x.RES > maxRes"),r("x.BE  < minBe"),r("x.BE  > maxBe"),r("x.ERR < minErr"),r("x.ERR > maxErr"),r("x.EHP < minEhp"),r("x.EHP > maxEhp"),r("x.BASIC_DMG < minBasic"),r("x.BASIC_DMG > maxBasic"),r("x.SKILL_DMG < minSkill"),r("x.SKILL_DMG > maxSkill"),r("x.ULT_DMG < minUlt"),r("x.ULT_DMG > maxUlt"),r("x.FUA_DMG < minFua"),r("x.FUA_DMG > maxFua"),r("x.MEMO_SKILL_DMG < minMemoSkill"),r("x.MEMO_SKILL_DMG > maxMemoSkill"),r("x.MEMO_TALENT_DMG < minMemoTalent"),r("x.MEMO_TALENT_DMG > maxMemoTalent"),r("x.DOT_DMG < minDot"),r("x.DOT_DMG > maxDot"),r("x.BREAK_DMG < minBreak"),r("x.BREAK_DMG > maxBreak"),r("x.HEAL_VALUE < minHeal"),r("x.HEAL_VALUE > maxHeal"),r("x.SHIELD_VALUE < minShield"),r("x.SHIELD_VALUE > maxShield"),s==T.COMBO.key?"":r(`x.${s} < threshold`)].filter(c=>c.length>0).join(` ||
`);return e=e.replace("/* INJECT COMBAT STAT FILTERS */",st(`
if (statDisplay == 0) {
  if (
${ml(l)}
  ) {
    results[index] = ${n.DEBUG?"ComputedStats()":"-failures; failures = failures + 1"};
    break;
  }
}
  `,4)),e}function a2(e,t,n){const o=ul(t),s=[o("x.EHP < minEhp"),o("x.EHP > maxEhp"),o("x.BASIC_DMG < minBasic"),o("x.BASIC_DMG > maxBasic"),o("x.SKILL_DMG < minSkill"),o("x.SKILL_DMG > maxSkill"),o("x.ULT_DMG < minUlt"),o("x.ULT_DMG > maxUlt"),o("x.FUA_DMG < minFua"),o("x.FUA_DMG > maxFua"),o("x.MEMO_SKILL_DMG < minMemoSkill"),o("x.MEMO_SKILL_DMG > maxMemoSkill"),o("x.MEMO_TALENT_DMG < minMemoTalent"),o("x.MEMO_TALENT_DMG > maxMemoTalent"),o("x.DOT_DMG < minDot"),o("x.DOT_DMG > maxDot"),o("x.BREAK_DMG < minBreak"),o("x.BREAK_DMG > maxBreak"),o("x.HEAL_VALUE < minHeal"),o("x.HEAL_VALUE > maxHeal"),o("x.SHIELD_VALUE < minShield"),o("x.SHIELD_VALUE > maxShield")].filter(r=>r.length>0).join(` ||
`);return e=e.replace("/* INJECT RATING STAT FILTERS */",st(`
if (
${ml(s,1)}
) {
  results[index] = ${n.DEBUG?"ComputedStats()":"-failures; failures = failures + 1"};
  break;
}
  `,4)),e}function n2(e,t,n,o){const s=T[t.resultSort],r=o.DEBUG?1:o.CYCLES_PER_INVOCATION;let l="";o.DEBUG&&(l=`
const DEBUG_BASIC_COMBO: f32 = ${t.comboAbilities.filter(h=>h=="BASIC").length};
const DEBUG_SKILL_COMBO: f32 = ${t.comboAbilities.filter(h=>h=="SKILL").length};
const DEBUG_ULT_COMBO: f32 = ${t.comboAbilities.filter(h=>h=="ULT").length};
const DEBUG_FUA_COMBO: f32 = ${t.comboAbilities.filter(h=>h=="FUA").length};
`),e=e.replace("/* INJECT GPU PARAMS */",`
const WORKGROUP_SIZE = ${o.WORKGROUP_SIZE};
const BLOCK_SIZE = ${o.BLOCK_SIZE};
const CYCLES_PER_INVOCATION = ${r};
const DEBUG = ${o.DEBUG?1:0};
${l}
  `),o.DEBUG?e=e.replace("/* INJECT RESULTS BUFFER */",`
@group(2) @binding(0) var<storage, read_write> results : array<ComputedStats>; // DEBUG
    `):e=e.replace("/* INJECT RESULTS BUFFER */",`
@group(2) @binding(0) var<storage, read_write> results : array<f32>;
    `);const c=s.gpuProperty,u=s.isComputedRating?`x.${c}`:`c.${c}`;return o.DEBUG?e=e.replace("/* INJECT RETURN VALUE */",st(`
x.COMBO_DMG = combo + comboDot * x.DOT_DMG + comboBreak * x.BREAK_DMG;
results[index] = x; // DEBUG
results[index + 1] = m; // DEBUG
    `,4)):e=e.replace("/* INJECT RETURN VALUE */",st(`
if (statDisplay == 0) {
  results[index] = x.${c};
  failures = 1;
} else {
  results[index] = ${u};
  failures = 1;
}
    `,4)),n.resultSort==T.COMBO.key?e=e.replace("/* INJECT ACTION ITERATOR */",st(`
for (var actionIndex = actionCount - 1; actionIndex >= 0; actionIndex--) {
    `,4)):e=e.replace("/* INJECT ACTION ITERATOR */",st(`
for (var actionIndex = 0; actionIndex < actionCount; actionIndex++) {
    `,4)),e}a.HP_P+"",a.ATK_P+"",a.DEF_P+"",a.SPD_P+"",a.HP+"",a.ATK+"",a.DEF+"",a.SPD+"",a.CR+"",a.CD+"",a.EHR+"",a.RES+"",a.BE+"",a.ERR+"",a.OHB+"",a.Physical_DMG+"",a.Fire_DMG+"",a.Ice_DMG+"",a.Lightning_DMG+"",a.Wind_DMG+"",a.Quantum_DMG+"",a.Imaginary_DMG+"";function i2(e,t,n,o){var P;const s=n.LinkRope.length,r=n.PlanarSphere.length,l=n.Feet.length,c=n.Body.length,d=n.Hands.length,u=n.Head.length,h=t%s,p=(t-h)/s%r,S=(t-p*s-h)/(s*r)%l,D=(t-S*r*s-p*s-h)/(s*r*l)%c,E=(t-D*l*r*s-S*r*s-p*s-h)/(s*r*l*c)%d,y=(t-E*c*l*r*s-D*l*r*s-S*r*s-p*s-h)/(s*r*l*c*d)%u;return new Float32Array([h,p,S,D,E,y,o.resultsQueue.size()>=o.RESULTS_LIMIT?((P=o.resultsQueue.top())==null?void 0:P.value)??0:0])}function s2(e){return r2([...e.Head,...e.Hands,...e.Body,...e.Feet,...e.PlanarSphere,...e.LinkRope])}const o2=23;function r2(e){const t=[];for(let n=0;n<e.length;n++){const o=e[n],s=o2*n;let r=0;const l={},c=o.condensedStats;for(const d of c)l[d[0]]=d[1];t[s+r++]=l[f.HP_P]||0,t[s+r++]=l[f.ATK_P]||0,t[s+r++]=l[f.DEF_P]||0,t[s+r++]=l[f.SPD_P]||0,t[s+r++]=l[f.HP]||0,t[s+r++]=l[f.ATK]||0,t[s+r++]=l[f.DEF]||0,t[s+r++]=l[f.SPD]||0,t[s+r++]=l[f.CR]||0,t[s+r++]=l[f.CD]||0,t[s+r++]=l[f.EHR]||0,t[s+r++]=l[f.RES]||0,t[s+r++]=l[f.BE]||0,t[s+r++]=l[f.ERR]||0,t[s+r++]=l[f.OHB]||0,t[s+r++]=l[f.PHYSICAL_DMG_BOOST]||0,t[s+r++]=l[f.FIRE_DMG_BOOST]||0,t[s+r++]=l[f.ICE_DMG_BOOST]||0,t[s+r++]=l[f.LIGHTNING_DMG_BOOST]||0,t[s+r++]=l[f.WIND_DMG_BOOST]||0,t[s+r++]=l[f.QUANTUM_DMG_BOOST]||0,t[s+r++]=l[f.IMAGINARY_DMG_BOOST]||0,t[s+r++]=l2(o)}return t}function l2(e){return Ja.some(t=>t===e.set)?Ba[e.set]:Nn[e.set]}const c2=`@group(0) @binding(0) var<storage, read_write> results : array<f32>;
@compute @workgroup_size(256)
fn main(
  @builtin(workgroup_id) workgroup_id : vec3<u32>,
  @builtin(local_invocation_id) local_invocation_id : vec3<u32>,
  @builtin(global_invocation_id) global_invocation_id : vec3<u32>,
  @builtin(local_invocation_index) local_invocation_index: u32,
  @builtin(num_workgroups) num_workgroups: vec3<u32>
) {
  var flag = 0;
  let offset = local_invocation_index * 256 * 512;

  for (var i: u32 = 511; i < 256 * 512; i += 512) {
    let index = offset + i;
    if (results[index] != -512) {
      flag = 1;
      break;
    }
  }

  if (flag == 0) {
    results[offset] = -1024;
  }

  workgroupBarrier();
  storageBarrier();

  if (local_invocation_index != 0) {
    return;
  }

  var skip: u32 = 256;
  for (var i: u32 = 0; i < 256; i += 1) {
    let index = i * 512 * 256;
    if (results[index] != -1024) {
      skip = i;
      break;
    }
  }

  if (skip > 0) {
    results[0] = -2048 - f32(skip);
  }
}
`;class Yd extends _m{constructor(n,o){super([],o,!1);Ue(this,"limit");Ue(this,"compare");this.limit=n,this.compare=o}fixedSizePush(n){this.size()>=this.limit?this.compare(n,this.top())>=0&&(this.pop(),this.push(n)):this.push(n)}fixedSizePushOvercapped(n){return this.push(n),this.pop()}}function Jd(e,t,n,o,s,r,l,c,d=!1,u=!1){const D=n.resultsLimit??1024,E=d,y=Jg(o,n,t,{WORKGROUP_SIZE:256,BLOCK_SIZE:65536,CYCLES_PER_INVOCATION:512,RESULTS_LIMIT:D,DEBUG:E});E&&!u&&console.log(y);const P=d2(e,y),_=u2(e),x=Float32Array.BYTES_PER_ELEMENT*7,G=Float32Array.BYTES_PER_ELEMENT*65536*512,M=e.createBuffer({size:G,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC}),H=e.createBuffer({size:x,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST}),Z=s2(t),X=Wo(e,new Float32Array(Z),GPUBufferUsage.STORAGE),W=Wo(e,new Int32Array(l),GPUBufferUsage.STORAGE,!0,!0),L=Wo(e,new Int32Array(c),GPUBufferUsage.STORAGE,!0,!0),A=P.getBindGroupLayout(0),O=P.getBindGroupLayout(1),j=P.getBindGroupLayout(2),ie=e.createBindGroup({layout:P.getBindGroupLayout(0),entries:[{binding:0,resource:{buffer:H}}]}),ee=e.createBindGroup({layout:P.getBindGroupLayout(1),entries:[{binding:0,resource:{buffer:X}},{binding:1,resource:{buffer:L}},{binding:2,resource:{buffer:W}}]}),me=e.createBindGroup({layout:P.getBindGroupLayout(2),entries:[{binding:0,resource:{buffer:M}}]}),he=e.createBindGroup({layout:_.getBindGroupLayout(0),entries:[{binding:0,resource:{buffer:M}}]}),De=[A,O,j],ae=e.createBuffer({size:G,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),Q=Math.ceil(s/65536/512),Oe=new Yd(D,(Ae,Ze)=>Ae.value-Ze.value);return{WORKGROUP_SIZE:256,BLOCK_SIZE:65536,CYCLES_PER_INVOCATION:512,RESULTS_LIMIT:D,DEBUG:E,request:n,context:o,paramsMatrixBufferSize:x,resultMatrixBufferSize:G,permutations:s,iterations:Q,startTime:0,relics:t,resultsQueue:Oe,cancelled:!1,computeEngine:r,device:e,computePipeline:P,postComputePipeline:_,bindGroup0:ie,bindGroup1:ee,bindGroup2:me,postComputeBindGroup0:he,paramsMatrixBuffer:H,resultMatrixBuffer:M,relicsMatrixBuffer:X,relicSetSolutionsMatrixBuffer:W,ornamentSetSolutionsMatrixBuffer:L,gpuReadBuffer:ae,bindGroupLayouts:De}}function Qd(e,t){const n=i2(e.device,t,e.relics,e),o=e.device,s=e.computePipeline,r=e.postComputePipeline,l=e.bindGroup0,c=e.bindGroup1,d=e.bindGroup2,u=e.postComputeBindGroup0,h=e.resultMatrixBufferSize,p=e.resultMatrixBuffer;o.queue.writeBuffer(e.paramsMatrixBuffer,0,n);const S=o.createCommandEncoder(),D=S.beginComputePass();return D.setPipeline(s),D.setBindGroup(0,l),D.setBindGroup(1,c),D.setBindGroup(2,d),D.dispatchWorkgroups(e.WORKGROUP_SIZE),e.computeEngine==vi&&(D.setPipeline(r),D.setBindGroup(0,u),D.dispatchWorkgroups(1)),D.end(),S.copyBufferToBuffer(p,0,e.gpuReadBuffer,0,h),o.queue.submit([S.finish()]),e.gpuReadBuffer}function d2(e,t){const n=m2(e),o=e.createShaderModule({code:t});return e.createComputePipeline({layout:e.createPipelineLayout({bindGroupLayouts:n}),compute:{module:o,entryPoint:"main"}})}function u2(e){const t=[e.createBindGroupLayout({entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage"}}]})],n=e.createShaderModule({code:c2});return e.createComputePipeline({layout:e.createPipelineLayout({bindGroupLayouts:t}),compute:{module:n,entryPoint:"main"}})}function m2(e){return[e.createBindGroupLayout({entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}}]}),e.createBindGroupLayout({entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,buffer:{type:"read-only-storage"}},{binding:1,visibility:GPUShaderStage.COMPUTE,buffer:{type:"read-only-storage"}},{binding:2,visibility:GPUShaderStage.COMPUTE,buffer:{type:"read-only-storage"}}]}),e.createBindGroupLayout({entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage"}}]})]}function Wo(e,t,n,o=!0,s=!1){const r=e.createBuffer({mappedAtCreation:o,size:t.byteLength,usage:n}),l=r.getMappedRange();return s?new Int32Array(l).set(t):new Float32Array(l).set(t),r.unmap(),r}function $d(e){e.resultMatrixBuffer.unmap(),e.resultMatrixBuffer.destroy(),e.relicsMatrixBuffer.unmap(),e.relicsMatrixBuffer.destroy(),e.relicSetSolutionsMatrixBuffer.unmap(),e.relicSetSolutionsMatrixBuffer.destroy(),e.ornamentSetSolutionsMatrixBuffer.unmap(),e.ornamentSetSolutionsMatrixBuffer.destroy()}function h2(e,t,n){const o=n.lightConeConditionalController,s=n.characterConditionalController;o.finalizeCalculations&&o.finalizeCalculations(e,t,n),s.finalizeCalculations&&s.finalizeCalculations(e,t,n)}function qd(e,t,n){e.a[f.MEMOSPRITE]&&qd(e.m,t,n);const o=n.enemyLevel,s=e.a;f2(e,n),p2(e),g2(e),s[f.CR]+=s[f.CR_BOOST],s[f.CD]+=s[f.CD_BOOST],s[f.ATK]+=s[f.ATK_P_BOOST]*n.baseATK,s[f.ELEMENTAL_DMG]+=a1(e,n.elementalDamageType);const r=1+s[f.ELEMENTAL_DMG],l=s[f.DEF_PEN]+n.combatBuffs.DEF_PEN,c=s[f.ENEMY_WEAKNESS_BROKEN]?1:.9,d=n.enemyDamageResistance-s[f.RES_PEN]-n.combatBuffs.RES_PEN-t1(e,n.elementalResPenType),u=1+s[f.BREAK_EFFICIENCY_BOOST];s[f.BREAK_DMG]=c*3767.5533*n.elementalBreakScaling*os(o,l+s[f.BREAK_DEF_PEN])*(.5+n.enemyMaxToughness/120)*(1+s[f.VULNERABILITY]+s[f.BREAK_VULNERABILITY])*(1-d)*(1+s[f.BE])*(1+s[f.BREAK_DMG_BOOST]);const h=c*3767.5533/10*os(o,l+s[f.SUPER_BREAK_DEF_PEN])*(1+s[f.VULNERABILITY]+s[f.SUPER_BREAK_VULNERABILITY])*(1-d)*(1+s[f.BE])*(1+s[f.SUPER_BREAK_DMG_BOOST]);if(t.actionType=="DEFAULT"){const S=r+s[f.DOT_DMG_BOOST],D=os(o,l+s[f.DOT_DEF_PEN]),E=1+s[f.VULNERABILITY]+s[f.DOT_VULNERABILITY],y=1-(d-s[f.DOT_RES_PEN]),P=R2(e,n),_=s[f.TRUE_DMG_MODIFIER]+s[f.DOT_TRUE_DMG_MODIFIER],x=In(s,n,s[f.DOT_DMG],s[f.DOT_HP_SCALING],s[f.DOT_DEF_SCALING],s[f.DOT_ATK_SCALING],s[f.DOT_ATK_P_BOOST]);s[f.DOT_DMG]=D2(e,t,f.DOT_DMG,x,c,S,D,E,y,P,_)}if((t.actionType=="BASIC"||t.actionType=="DEFAULT")&&n.activeAbilityFlags&kt.BASIC){const S=In(s,n,s[f.BASIC_DMG],s[f.BASIC_HP_SCALING],s[f.BASIC_DEF_SCALING],s[f.BASIC_ATK_SCALING],s[f.BASIC_ATK_P_BOOST]);s[f.BASIC_DMG]=oi(e,t,n,c,r,l,d,h,u,f.BASIC_DMG,S,s[f.BASIC_DMG_BOOST],s[f.BASIC_VULNERABILITY],s[f.BASIC_DEF_PEN],s[f.BASIC_RES_PEN],s[f.BASIC_CR_BOOST],s[f.BASIC_CD_BOOST],s[f.BASIC_FINAL_DMG_BOOST],s[f.BASIC_BREAK_EFFICIENCY_BOOST],s[f.BASIC_SUPER_BREAK_MODIFIER],s[f.BASIC_BREAK_DMG_MODIFIER],s[f.BASIC_TOUGHNESS_DMG],s[f.BASIC_ADDITIONAL_DMG],0,0,s[f.BASIC_TRUE_DMG_MODIFIER],e.a[f.MEMOSPRITE]?e.m.a[f.BASIC_DMG]:0)}if((t.actionType=="SKILL"||t.actionType=="DEFAULT")&&n.activeAbilityFlags&kt.SKILL){const S=In(s,n,s[f.SKILL_DMG],s[f.SKILL_HP_SCALING],s[f.SKILL_DEF_SCALING],s[f.SKILL_ATK_SCALING],s[f.SKILL_ATK_P_BOOST]);s[f.SKILL_DMG]=oi(e,t,n,c,r,l,d,h,u,f.SKILL_DMG,S,s[f.SKILL_DMG_BOOST],s[f.SKILL_VULNERABILITY],s[f.SKILL_DEF_PEN],s[f.SKILL_RES_PEN],s[f.SKILL_CR_BOOST],s[f.SKILL_CD_BOOST],s[f.SKILL_FINAL_DMG_BOOST],0,0,0,s[f.SKILL_TOUGHNESS_DMG],s[f.SKILL_ADDITIONAL_DMG],0,0,s[f.SKILL_TRUE_DMG_MODIFIER],e.a[f.MEMOSPRITE]?e.m.a[f.SKILL_DMG]:0)}if((t.actionType=="ULT"||t.actionType=="DEFAULT")&&n.activeAbilityFlags&kt.ULT){const S=In(s,n,s[f.ULT_DMG],s[f.ULT_HP_SCALING],s[f.ULT_DEF_SCALING],s[f.ULT_ATK_SCALING],s[f.ULT_ATK_P_BOOST]);s[f.ULT_DMG]=oi(e,t,n,c,r,l,d,h,u,f.ULT_DMG,S,s[f.ULT_DMG_BOOST],s[f.ULT_VULNERABILITY],s[f.ULT_DEF_PEN],s[f.ULT_RES_PEN],s[f.ULT_CR_BOOST],s[f.ULT_CD_BOOST],s[f.ULT_FINAL_DMG_BOOST],s[f.ULT_BREAK_EFFICIENCY_BOOST],0,0,s[f.ULT_TOUGHNESS_DMG],s[f.ULT_ADDITIONAL_DMG],s[f.ULT_ADDITIONAL_DMG_CR_OVERRIDE],s[f.ULT_ADDITIONAL_DMG_CD_OVERRIDE],s[f.ULT_TRUE_DMG_MODIFIER],e.a[f.MEMOSPRITE]?e.m.a[f.ULT_DMG]:0)}if((t.actionType=="FUA"||t.actionType=="DEFAULT")&&n.activeAbilityFlags&kt.FUA){const S=In(s,n,s[f.FUA_DMG],s[f.FUA_HP_SCALING],s[f.FUA_DEF_SCALING],s[f.FUA_ATK_SCALING],s[f.FUA_ATK_P_BOOST]);s[f.FUA_DMG]=oi(e,t,n,c,r,l,d,h,u,f.FUA_DMG,S,s[f.FUA_DMG_BOOST],s[f.FUA_VULNERABILITY],s[f.FUA_DEF_PEN],s[f.FUA_RES_PEN],s[f.FUA_CR_BOOST],s[f.FUA_CD_BOOST],0,0,0,0,s[f.FUA_TOUGHNESS_DMG],s[f.FUA_ADDITIONAL_DMG],0,0,s[f.FUA_TRUE_DMG_MODIFIER],e.a[f.MEMOSPRITE]?e.m.a[f.FUA_DMG]:0)}if((t.actionType=="MEMO_SKILL"||t.actionType=="DEFAULT")&&n.activeAbilityFlags&kt.MEMO_SKILL)if(e.a[f.MEMOSPRITE])s[f.MEMO_SKILL_DMG]+=e.m.a[f.MEMO_SKILL_DMG];else{const S=In(s,n,s[f.MEMO_SKILL_DMG],s[f.MEMO_SKILL_HP_SCALING],s[f.MEMO_SKILL_DEF_SCALING],s[f.MEMO_SKILL_ATK_SCALING],s[f.MEMO_SKILL_ATK_P_BOOST]);s[f.MEMO_SKILL_DMG]=oi(e,t,n,c,r,l,d,h,u,f.MEMO_SKILL_DMG,S,s[f.MEMO_SKILL_DMG_BOOST],0,0,0,0,0,0,0,0,0,s[f.MEMO_SKILL_TOUGHNESS_DMG],0,0,0,s[f.MEMO_SKILL_TRUE_DMG_MODIFIER],0)}if((t.actionType=="MEMO_TALENT"||t.actionType=="DEFAULT")&&n.activeAbilityFlags&kt.MEMO_TALENT)if(e.a[f.MEMOSPRITE])s[f.MEMO_TALENT_DMG]+=e.m.a[f.MEMO_TALENT_DMG];else{const S=In(s,n,s[f.MEMO_TALENT_DMG],s[f.MEMO_TALENT_HP_SCALING],s[f.MEMO_TALENT_DEF_SCALING],s[f.MEMO_TALENT_ATK_SCALING],s[f.MEMO_TALENT_ATK_P_BOOST]);s[f.MEMO_TALENT_DMG]=oi(e,t,n,c,r,l,d,h,u,f.MEMO_TALENT_DMG,S,s[f.MEMO_TALENT_DMG_BOOST],0,0,0,0,0,0,0,0,0,s[f.MEMO_TALENT_TOUGHNESS_DMG],0,0,0,s[f.MEMO_TALENT_TRUE_DMG_MODIFIER],0)}const p=s[f.BREAK_DMG]*(s[f.TRUE_DMG_MODIFIER]+s[f.BREAK_TRUE_DMG_MODIFIER]);if(e.trace&&t.actionType=="DEFAULT"){const S=Io[f.BREAK_DMG].name,D=e.dmgSplits[S];D.breakDmg=s[f.BREAK_DMG],D.trueDmg=p}s[f.BREAK_DMG]+=p}const Rc=100;function In(e,t,n,o,s,r,l){return n+o*e[f.HP]+s*e[f.DEF]+r*(e[f.ATK]+l*t.baseATK)}function os(e,t){return Rc/((e+20)*Math.max(0,1-t)+Rc)}function f2(e,t){const n=e.a;let o=n[f.HP]/(1-n[f.DEF]/(n[f.DEF]+200+10*t.enemyLevel));o*=1/n[f.DMG_RED_MULTI],n[f.EHP]=o}function p2(e,t){const n=e.a;n[f.HEAL_VALUE]=n[f.HEAL_VALUE]*(1+n[f.OHB]+n[f.SKILL_OHB]*(n[f.HEAL_TYPE]==jt?1:0)+n[f.ULT_OHB]*(n[f.HEAL_TYPE]==xt?1:0))}function g2(e,t){const n=e.a;n[f.SHIELD_VALUE]=n[f.SHIELD_VALUE]*(1+n[f.SHIELD_BOOST])}function oi(e,t,n,o,s,r,l,c,d,u,h,p,S,D,E,y,P,_,x,G,M,H,Z,X,W,L,A){const O=e.a,j=n.enemyLevel;let ie=0;if(h){const Ae=Math.min(1,O[f.CR]+y),Ze=O[f.CD]+O[f.CD_BOOST]+P,tt=Ae*(1+Ze)+(1-Ae),ue=1+O[f.VULNERABILITY]+S,te=os(j,r+D),pe=1-(l-E),ge=1+_+O[f.FINAL_DMG_BOOST];ie=b2(h,o,s+p,te,ue,tt,pe,ge)}let ee=0;M&&(ee=M*O[f.BREAK_DMG]);let me=0;const he=O[f.SUPER_BREAK_MODIFIER]+G;he>0&&(me=S2(c,he,d+x,H));let De=0;if(Z>0){const Ae=X||Math.min(1,O[f.CR]),Ze=W||O[f.CD],tt=Ae*(1+Ze)+(1-Ae);De=E2(Z,o,s+O[f.ADDITIONAL_DMG_BOOST],os(j,r),1+O[f.VULNERABILITY],tt,1-l)}const ae=ie+ee+me+De,Q=(O[f.TRUE_DMG_MODIFIER]+L)*ae;let Oe=0;if(A>0&&(Oe=A),e.trace&&t.actionType=="DEFAULT"){const Ae=Io[u].name,Ze=e.dmgSplits[Ae];Ze.abilityDmg=ie,Ze.breakDmg=ee,Ze.superBreakDmg=me,Ze.additionalDmg=De,Ze.trueDmg=Q,Ze.jointDmg=Oe}return ae+Q+Oe}function S2(e,t,n,o){return e*t*n*o}function b2(e,t,n,o,s,r,l,c){return e*t*n*o*s*r*l*c}function D2(e,t,n,o,s,r,l,c,d,u,h){const p=o*s*r*l*c*d*u,S=p*h;if(e.trace&&t.actionType=="DEFAULT"){const D=Io[n].name,E=e.dmgSplits[D];E.dotDmg=p,E.trueDmg=S}return p+S}function R2(e,t){const n=e.a,o=t.enemyEffectResistance,s=Math.min(1,n[f.DOT_CHANCE]*(1+n[f.EHR])*(1-o+n[f.EFFECT_RES_PEN]));return n[f.DOT_SPLIT]?(1+n[f.DOT_SPLIT]*s*(n[f.DOT_STACKS]-1))/(1+n[f.DOT_SPLIT]*(n[f.DOT_STACKS]-1)):s}function E2(e,t,n,o,s,r,l){return e*t*n*o*s*r*l}const C2={[m.Stats.HP_P]:64.8/43.2,[m.Stats.ATK_P]:64.8/43.2,[m.Stats.DEF_P]:64.8/54,[m.Stats.HP]:64.8/43.2*Re[m.Stats.HP_P][5].high/Re[m.Stats.HP][5].high,[m.Stats.ATK]:64.8/43.2*Re[m.Stats.ATK_P][5].high/Re[m.Stats.ATK][5].high,[m.Stats.DEF]:64.8/54*Re[m.Stats.DEF_P][5].high/Re[m.Stats.DEF][5].high,[m.Stats.CR]:64.8/32.4,[m.Stats.CD]:64.8/64.8,[m.Stats.OHB]:64.8/34.5,[m.Stats.EHR]:64.8/43.2,[m.Stats.RES]:64.8/43.2,[m.Stats.SPD]:64.8/25,[m.Stats.BE]:64.8/64.8},qe={calculateWeightScore:(e,t)=>{const n=e.weights||{};n[m.Stats.ATK]=n[m.Stats.ATK_P],n[m.Stats.DEF]=n[m.Stats.DEF_P],n[m.Stats.HP]=n[m.Stats.HP_P];for(const o of Object.keys(n))n[o]===void 0&&(n[o]=0);for(const o of t){let s=0;for(const r of o.substats){const l=n[r.stat]||0,c=C2[r.stat]||0,d=r.value||0;s+=d*l*c}o.weightScore=s}return t},applyTopFilter:(e,t)=>{const n=e.weights||{},o={[b.Head]:n.headHands||0,[b.Hands]:n.headHands||0,[b.Body]:n.bodyFeet||0,[b.Feet]:n.bodyFeet||0,[b.PlanarSphere]:n.sphereRope||0,[b.LinkRope]:n.sphereRope||0};for(const s of Object.values(m.Parts)){const r=t[s];t[s]=r.filter(l=>l.weightScore>=o[s]*6.48*.8)}return t},applyRankFilter:(e,t)=>{if(!e.rankFilter)return t;const n=B.getCharacters(),o=e.characterId,s={};for(let r=0;r<n.length;r++){const l=n[r];if(l.id!=o){if(r>=e.rank)break;Object.values(l.equipped).filter(c=>c!=null).map(c=>s[c]=!0)}}return t.filter(r=>!s[r.id])},applyExcludeFilter:(e,t)=>{if(!e.exclude)return t;const n=B.getCharacters(),o={};for(const s of n)e.exclude.includes(s.id)&&s.id!=e.characterId&&Object.values(s.equipped).filter(r=>r!=null).map(r=>o[r]=!0);return t.filter(s=>!o[s.id])},applyMainFilter:(e,t)=>{const n=[];return n.push(...t.filter(o=>o.part==m.Parts.Head)),n.push(...t.filter(o=>o.part==m.Parts.Hands)),n.push(...t.filter(o=>o.part==m.Parts.Body).filter(o=>e.mainBody.length==0||e.mainBody.includes(o.main.stat))),n.push(...t.filter(o=>o.part==m.Parts.Feet).filter(o=>e.mainFeet.length==0||e.mainFeet.includes(o.main.stat))),n.push(...t.filter(o=>o.part==m.Parts.PlanarSphere).filter(o=>e.mainPlanarSphere.length==0||e.mainPlanarSphere.includes(o.main.stat))),n.push(...t.filter(o=>o.part==m.Parts.LinkRope).filter(o=>e.mainLinkRope.length==0||e.mainLinkRope.includes(o.main.stat))),n},applyEnhanceFilter:(e,t)=>t.filter(n=>n.enhance>=e.enhance),applyEquippedFilter:(e,t)=>{if(e.includeEquippedRelics)return t;const n=e.characterId||"99999999";let o=[];return window.store.getState().characters.forEach(s=>{if(s.id==n)return;const r=Object.values(s.equipped).filter(l=>l!=null);o=o.concat(r)}),t.filter(s=>!o.includes(s.id))},applyGradeFilter:(e,t)=>t.filter(n=>n.grade?n.grade>=e.grade:!0),applySetFilter:(e,t)=>{function n(s,r){if(!s.relicSets||s.relicSets.length==0)return r;let l=F.arrayOfZeroes(Object.values(m.SetsRelics).length);for(const c of s.relicSets){if(c[0]==pa.relic4Piece&&c.length==2){const d=m.RelicSetToIndex[c[1]];l[d]=1}if(c[0]==pa.relic2PlusAny&&(l=F.arrayOfValue(Object.values(m.SetsRelics).length,1)),c[0]==pa.relic2Plus2Piece&&c.length==3){const d=m.RelicSetToIndex[c[1]];l[d]=1;const u=m.RelicSetToIndex[c[2]];l[u]=1}}return r.filter(c=>c.part==m.Parts.Head||c.part==m.Parts.Hands||c.part==m.Parts.Body||c.part==m.Parts.Feet?l[m.RelicSetToIndex[c.set]]==1:!0)}function o(s,r){if(!s.ornamentSets||s.ornamentSets.length==0)return r;const l=F.arrayOfZeroes(Object.values(m.SetsOrnaments).length);for(const c of s.ornamentSets){const d=m.OrnamentSetToIndex[c];l[d]=1}return r.filter(c=>c.part==m.Parts.PlanarSphere||c.part==m.Parts.LinkRope?l[m.OrnamentSetToIndex[c.set]]==1:!0)}return o(e,n(e,t))},applyCurrentFilter:(e,t)=>{if(!e.keepCurrentRelics)return t;const n=B.getCharacterById(e.characterId);if(!n)return t;function o(s){const r=t[s];if(!n.equipped[s])return r;const l=r.find(c=>c.id==n.equipped[s]);return l?[l]:[]}return{Head:o(b.Head),Hands:o(b.Hands),Body:o(b.Body),Feet:o(b.Feet),PlanarSphere:o(b.PlanarSphere),LinkRope:o(b.LinkRope)}},splitRelicsByPart:e=>({Head:e.filter(t=>t.part==b.Head),Hands:e.filter(t=>t.part==b.Hands),Body:e.filter(t=>t.part==b.Body),Feet:e.filter(t=>t.part==b.Feet),PlanarSphere:e.filter(t=>t.part==b.PlanarSphere),LinkRope:e.filter(t=>t.part==b.LinkRope)}),applyMainStatsFilter:(e,t)=>{const n=e.mainStatUpscaleLevel;return n&&t.map(o=>{const{grade:s,enhance:r,main:{stat:l}}=o,c=s*3;if(r<c&&r<n){const d=c<n?c:n,u=C.calculateRelicMainStatValue(l,s,d)/(F.isFlat(o.main.stat)?1:100);return o.augmentedStats.mainValue=u}}),t},condenseRelicSubstatsForOptimizerSingle:e=>{for(const t of e){t.condensedStats=[];for(const n of t.substats){const o=n.stat,s=Gt[o],r=T2(o,n.value);t.condensedStats.push([s,r])}t.condensedStats.push([Gt[t.augmentedStats.mainStat],t.augmentedStats.mainValue])}},condenseRelicSubstatsForOptimizer:e=>{for(const t of Object.values(e))qe.condenseRelicSubstatsForOptimizerSingle(t);return e},condenseSingleRelicByPartSubstatsForOptimizer:e=>{for(const t of Object.values(e))qe.condenseRelicSubstatsForOptimizerSingle([t]);return e}};function T2(e,t){return F.precisionRound(F.isFlat(e)?t:t/100)}function Un(e,t,n,o,s,r=!1,l=!1,c=!1,d=0,u=!1){r||(e=F.clone(e));const h=n??Ki(e);if(l)for(const De of h.actions)De.conditionalState={};else zd(e,h);const{Head:p,Hands:S,Body:D,Feet:E,PlanarSphere:y,LinkRope:P}=P2(t);u&&qe.calculateWeightScore(e,[p,S,D,E,y,P]);const _=y2(t);let x=0;const G=Ba[t.Head.set]??_[x++],M=Ba[t.Hands.set]??_[x++],H=Ba[t.Body.set]??_[x++],Z=Ba[t.Feet.set]??_[x++],X=Nn[t.PlanarSphere.set]??_[x++],W=Nn[t.LinkRope.set]??_[x++],L=o??new $a(!1),A=s??new Ma(!1),O=A.m,j=G+H*ni+M*ni*ni+Z*ni*ni*ni,ie=X+W*xh,ee=[G,M,H,Z,X,W],me=_p(ee);L.init(j,ie,me,ee,-1),Ap(L,h,me,ee),Kp(L,p,S,D,E,y,P,u),Fp(L,h),Lp(L,h),d&&L.SPD.set(d,v.NONE),A.setBasic(L),A.a[f.MEMOSPRITE]&&(O.setBasic(L.m),L.initMemo());let he=0;for(let De=h.actions.length-1;De>=0;De--){const ae=h.actions[De],Q=A.a;A.setPrecompute(ae.precomputedX.a),A.a[f.MEMOSPRITE]&&O.setPrecompute(ae.precomputedM.a),A.trace&&(A.tracePrecompute(ae.precomputedX),O.tracePrecompute(ae.precomputedM)),Hp(A,ae,h),wp(A,ae,h),h2(A,ae,h),qd(A,ae,h),ae.actionType==="BASIC"?he+=Q[f.BASIC_DMG]:ae.actionType==="SKILL"?he+=Q[f.SKILL_DMG]:ae.actionType==="ULT"?he+=Q[f.ULT_DMG]:ae.actionType==="FUA"?he+=Q[f.FUA_DMG]:ae.actionType==="MEMO_SKILL"?he+=Q[f.MEMO_SKILL_DMG]:ae.actionType==="MEMO_TALENT"&&(he+=Q[f.MEMO_TALENT_DMG]),De===0&&(he+=h.comboDot*Q[f.DOT_DMG]+h.comboBreak*Q[f.BREAK_DMG],A.COMBO_DMG.set(he,v.NONE))}return A}function y2(e){const t=new Set([Ba[e.Head.set],Ba[e.Hands.set],Ba[e.Body.set],Ba[e.Feet.set],Nn[e.PlanarSphere.set],Nn[e.LinkRope.set]]);return[0,1,2,3,4,5].filter(n=>!t.has(n))}function P2(e){for(const t of Object.keys(m.Parts))e[t]=e[t]||hl();return e}function hl(){return{set:-1,substats:[]}}function fa(e){const t=e.width??10;return i.jsx(g,{vertical:!0,children:i.jsx(Mt,{type:"vertical",style:{flexGrow:1,margin:`10px ${t}px`}})})}const sa=Lt(Mt)`
    margin: 5px 0px;
`,{Text:fl}=Ce,I2={IMPORT:{descriptionKey:"0Perms.RootCauses.IMPORT.Description",buttonTextKey:"0Perms.RootCauses.IMPORT.ButtonText",applyFix:()=>{window.store.getState().setActiveKey(de.IMPORT),window.store.getState().setZeroPermutationsModalOpen(!1)},successMessageKey:"0Perms.RootCauses.IMPORT.SuccessMessage"},BODY_MAIN:vs(b.Body),FEET_MAIN:vs(b.Feet),PLANAR_SPHERE_MAIN:vs(b.PlanarSphere),LINK_ROPE_MAIN:vs(b.LinkRope),RELIC_SETS:{descriptionKey:"0Perms.RootCauses.RELIC_SETS.Description",buttonTextKey:"0Perms.RootCauses.RELIC_SETS.ButtonText",applyFix:()=>{window.optimizerForm.setFieldValue("relicSets",[])},successMessageKey:"0Perms.RootCauses.RELIC_SETS.SuccessMessage"},ORNAMENT_SETS:{descriptionKey:"0Perms.RootCauses.ORNAMENT_SETS.Description",buttonTextKey:"0Perms.RootCauses.ORNAMENT_SETS.ButtonText",applyFix:()=>{window.optimizerForm.setFieldValue("ornamentSets",[])},successMessageKey:"0Perms.RootCauses.ORNAMENT_SETS.SuccessMessage"},KEEP_CURRENT:{descriptionKey:"0Perms.RootCauses.KEEP_CURRENT.Description",buttonTextKey:"0Perms.RootCauses.KEEP_CURRENT.ButtonText",applyFix:()=>{window.optimizerForm.setFieldValue("keepCurrentRelics",!1)},successMessageKey:"0Perms.RootCauses.KEEP_CURRENT.SuccessMessage"},PRIORITY:{descriptionKey:"0Perms.RootCauses.PRIORITY.Description",buttonTextKey:"0Perms.RootCauses.PRIORITY.ButtonText",applyFix:()=>{B.insertCharacter(window.store.getState().optimizerTabFocusCharacter,0),B.refreshCharacters()},successMessageKey:"0Perms.RootCauses.PRIORITY.SuccessMessage"},EXCLUDE_ENABLED:{descriptionKey:"0Perms.RootCauses.EXCLUDE_ENABLED.Description",buttonTextKey:"0Perms.RootCauses.EXCLUDE_ENABLED.ButtonText",applyFix:()=>{window.optimizerForm.setFieldValue("exclude",[])},successMessageKey:"0Perms.RootCauses.EXCLUDE_ENABLED.SuccessMessage"},EQUIPPED_DISABLED:{descriptionKey:"0Perms.RootCauses.EQUIPPED_DISABLED.Description",buttonTextKey:"0Perms.RootCauses.EQUIPPED_DISABLED.ButtonText",applyFix:()=>{window.optimizerForm.setFieldValue("includeEquippedRelics",!0)},successMessageKey:"0Perms.RootCauses.EQUIPPED_DISABLED.SuccessMessage"},MINIMUM_ROLLS:{descriptionKey:"0Perms.RootCauses.MINIMUM_ROLLS.Description",buttonTextKey:"0Perms.RootCauses.MINIMUM_ROLLS.ButtonText",applyFix:()=>{window.optimizerForm.setFieldValue(["weights","headHands"],0),window.optimizerForm.setFieldValue(["weights","bodyFeet"],0),window.optimizerForm.setFieldValue(["weights","sphereRope"],0)},successMessageKey:"0Perms.RootCauses.MINIMUM_ROLLS.SuccessMessage"}};function vs(e){return{descriptionKey:`0Perms.RootCauses.${e}_MAIN.Description`,buttonTextKey:`0Perms.RootCauses.${e}_MAIN.ButtonText`,applyFix:()=>{window.optimizerForm.setFieldValue(`main${e}`,[])},successMessageKey:`0Perms.RootCauses.${e}_MAIN.SuccessMessage`}}let fe=[];function B2(e){fe=[];const[t,n]=io.getFilteredRelics(e);if(B.getRelics().length==0){fe.push("IMPORT"),window.store.getState().setZeroPermutationsModalOpen(!0);return}t.Body.length==0&&e.mainBody.length>0&&n.Body.length>0&&fe.push("BODY_MAIN"),t.Feet.length==0&&e.mainFeet.length>0&&n.Feet.length>0&&fe.push("FEET_MAIN"),t.PlanarSphere.length==0&&e.mainPlanarSphere.length>0&&n.PlanarSphere.length>0&&fe.push("PLANAR_SPHERE_MAIN"),t.LinkRope.length==0&&e.mainLinkRope.length>0&&n.LinkRope.length>0&&fe.push("LINK_ROPE_MAIN"),(t.PlanarSphere.length==0||t.LinkRope.length==0)&&e.ornamentSets.length>0&&fe.push("ORNAMENT_SETS"),(t.Head.length==0||t.Hands.length==0||t.Body.length==0||t.Feet.length==0)&&e.relicSets.length>0&&fe.push("RELIC_SETS"),e.keepCurrentRelics&&fe.push("KEEP_CURRENT"),e.rank!=0&&fe.push("PRIORITY"),e.exclude.length>0&&fe.push("EXCLUDE_ENABLED"),e.includeEquippedRelics||fe.push("EQUIPPED_DISABLED"),(e.weights.headHands>0||e.weights.bodyFeet>0||e.weights.sphereRope>0)&&fe.push("MINIMUM_ROLLS"),fe.length==0&&fe.push("IMPORT"),window.store.getState().setZeroPermutationsModalOpen(!0)}function eu(e,t){const n=I2[e]||tu[e];return i.jsxs(g,{justify:"space-between",align:"center",style:{height:45},children:[i.jsx(fl,{style:{width:550},children:t(n.descriptionKey)}),i.jsx(Y,{onClick:()=>{n.applyFix(),window.onOptimizerFormValuesChange({},se.getForm()),J.success(t(n.successMessageKey),2)},style:{width:250},type:"primary",children:t(n.buttonTextKey)})]},F.randomId())}function G2(){const{t:e}=V("modals"),t=window.store(s=>s.zeroPermutationModalOpen),n=window.store(s=>s.setZeroPermutationsModalOpen),o=[];for(const s of fe)o.push(eu(s,e));return i.jsx(_t,{title:e("0Perms.Title"),open:t,width:900,destroyOnClose:!0,centered:!0,onOk:()=>n(!1),onCancel:()=>n(!1),footer:null,children:i.jsxs(g,{vertical:!0,gap:15,style:{marginBottom:15},children:[i.jsx(fl,{children:e("0Perms.Description")}),i.jsx(sa,{}),o]})})}const tu={MAX_HP:Pe("MAX_HP"),MIN_HP:Pe("MIN_HP"),MAX_ATK:Pe("MAX_ATK"),MIN_ATK:Pe("MIN_ATK"),MAX_DEF:Pe("MAX_DEF"),MIN_DEF:Pe("MIN_DEF"),MAX_SPD:Pe("MAX_SPD"),MIN_SPD:Pe("MIN_SPD"),MAX_CR:Pe("MAX_CR"),MIN_CR:Pe("MIN_CR"),MAX_CD:Pe("MAX_CD"),MIN_CD:Pe("MIN_CD"),MAX_EHR:Pe("MAX_EHR"),MIN_EHR:Pe("MIN_EHR"),MAX_RES:Pe("MAX_RES"),MIN_RES:Pe("MIN_RES"),MAX_BE:Pe("MAX_BE"),MIN_BE:Pe("MIN_BE"),MAX_ERR:Pe("MAX_ERR"),MIN_ERR:Pe("MIN_ERR"),MAX_EHP:Pe("MAX_EHP"),MIN_EHP:Pe("MIN_EHP"),MAX_BASIC:Pe("MAX_BASIC"),MIN_BASIC:Pe("MIN_BASIC"),MAX_SKILL:Pe("MAX_SKILL"),MIN_SKILL:Pe("MIN_SKILL"),MAX_ULT:Pe("MAX_ULT"),MIN_ULT:Pe("MIN_ULT"),MAX_FUA:Pe("MAX_FUA"),MIN_FUA:Pe("MIN_FUA"),MAX_DOT:Pe("MAX_DOT"),MIN_DOT:Pe("MIN_DOT"),MAX_BREAK:Pe("MAX_BREAK"),MIN_BREAK:Pe("MIN_BREAK"),MIN_MEMO_SKILL:Pe("MIN_MEMO_SKILL"),MAX_MEMO_SKILL:Pe("MAX_MEMO_SKILL"),MIN_MEMO_TALENT:Pe("MIN_MEMO_TALENT"),MAX_MEMO_TALENT:Pe("MAX_MEMO_TALENT"),MAX_HEAL:Pe("MAX_HEAL"),MIN_HEAL:Pe("MIN_HEAL"),MAX_SHIELD:Pe("MAX_SHIELD"),MIN_SHIELD:Pe("MIN_SHIELD"),MAX_COMBO:Pe("MAX_COMBO"),MIN_COMBO:Pe("MIN_COMBO"),STAT_VIEW:{descriptionKey:"0Results.RootCauses.StatView.Description",buttonTextKey:"0Results.RootCauses.StatView.ButtonText",applyFix:()=>{const e=window.store.getState().setStatDisplay;e("combat")},successMessageKey:"0Results.RootCauses.StatView.SuccessMessage"}};function Pe(e){const t=e.split("_"),n=t[0].toLowerCase()+t[1][0]+t[1].slice(1).toLowerCase();return{descriptionKey:`0Results.RootCauses.${e}.Description`,buttonTextKey:`0Results.RootCauses.${e}.ButtonText`,applyFix:()=>{window.optimizerForm.setFieldValue(n,void 0)},successMessageKey:`0Results.RootCauses.${e}.SuccessMessage`}}function au(e){fe=[],window.store.getState().statDisplay=="base"&&fe.push("STAT_VIEW"),e.minHp&&fe.push("MIN_HP"),e.maxHp<2147483647&&fe.push("MAX_HP"),e.minAtk&&fe.push("MIN_ATK"),e.maxAtk<2147483647&&fe.push("MAX_ATK"),e.minDef&&fe.push("MIN_DEF"),e.maxDef<2147483647&&fe.push("MAX_DEF"),e.minSpd&&fe.push("MIN_SPD"),e.maxSpd<2147483647&&fe.push("MAX_SPD"),e.minCr&&fe.push("MIN_CR"),e.maxCr<2147483647&&fe.push("MAX_CR"),e.minCd&&fe.push("MIN_CD"),e.maxCd<2147483647&&fe.push("MAX_CD"),e.minEhr&&fe.push("MIN_EHR"),e.maxEhr<2147483647&&fe.push("MAX_EHR"),e.minRes&&fe.push("MIN_RES"),e.maxRes<2147483647&&fe.push("MAX_RES"),e.minBe&&fe.push("MIN_BE"),e.maxBe<2147483647&&fe.push("MAX_BE"),e.minErr&&fe.push("MIN_ERR"),e.maxErr<2147483647&&fe.push("MAX_ERR"),e.minEhp&&fe.push("MIN_EHP"),e.maxEhp<2147483647&&fe.push("MAX_EHP"),e.minBasic&&fe.push("MIN_BASIC"),e.maxBasic<2147483647&&fe.push("MAX_BASIC"),e.minSkill&&fe.push("MIN_SKILL"),e.maxSkill<2147483647&&fe.push("MAX_SKILL"),e.minUlt&&fe.push("MIN_ULT"),e.maxUlt<2147483647&&fe.push("MAX_ULT"),e.minFua&&fe.push("MIN_FUA"),e.maxFua<2147483647&&fe.push("MAX_FUA"),e.minMemoSkill&&fe.push("MIN_MEMO_SKILL"),e.maxMemoSkill<2147483647&&fe.push("MAX_MEMO_SKILL"),e.minMemoTalent&&fe.push("MIN_MEMO_TALENT"),e.maxMemoTalent<2147483647&&fe.push("MAX_MEMO_TALENT"),e.minDot&&fe.push("MIN_DOT"),e.maxDot<2147483647&&fe.push("MAX_DOT"),e.minBreak&&fe.push("MIN_BREAK"),e.maxBreak<2147483647&&fe.push("MAX_BREAK"),e.minHeal&&fe.push("MIN_HEAL"),e.maxHeal<2147483647&&fe.push("MAX_HEAL"),e.minShield&&fe.push("MIN_SHIELD"),e.maxShield<2147483647&&fe.push("MAX_SHIELD"),window.store.getState().setZeroResultModalOpen(!0)}function M2(){const e=window.store(s=>s.zeroResultModalOpen),t=window.store(s=>s.setZeroResultModalOpen),{t:n}=V("modals"),o=[];for(const s of fe)o.push(eu(s,n));return i.jsx(_t,{title:n("0Results.Title"),open:e,width:900,destroyOnClose:!0,centered:!0,onOk:()=>t(!1),onCancel:()=>t(!1),footer:null,children:i.jsxs(g,{vertical:!0,gap:15,style:{marginBottom:15},children:[i.jsxs(g,{justify:"space-between",align:"center",style:{height:45},children:[i.jsx(fl,{children:n("0Results.ResetAll.Description")}),i.jsx(Y,{onClick:()=>{for(const r of fe)r!="STAT_VIEW"&&tu[r].applyFix();const s=window.store.getState().setStatDisplay;s("combat"),J.success(n("0Results.ResetAll.SuccessMessage")),t(!1)},style:{width:250},type:"primary",children:n("0Results.ResetAll.ButtonText")})]}),i.jsx(sa,{}),o]})})}window.WEBGPU_DEBUG=!1;async function x2(e){const{context:t,request:n,relics:o,permutations:s,computeEngine:r,relicSetSolutions:l,ornamentSetSolutions:c}=e,d=e.device;if(d==null){console.error("Not supported");return}d.onuncapturederror=h=>{window.store.getState().optimizationInProgress&&(window.store.getState().setOptimizationInProgress(!1),UD())},window.store.getState().setOptimizerStartTime(Date.now()),window.store.getState().setOptimizerRunningEngine(r);const u=Jd(d,o,n,t,s,r,l,c,window.WEBGPU_DEBUG);u.DEBUG&&J.warning("Debug mode is ON",5),u.startTime||(u.startTime=performance.now());for(let h=0;h<u.iterations;h++){const p=h*u.BLOCK_SIZE*u.CYCLES_PER_INVOCATION,S=p+u.BLOCK_SIZE*u.CYCLES_PER_INVOCATION,D=Qd(u,p);if(r==vi){await D.mapAsync(GPUMapMode.READ,0,4);const E=new Float32Array(D.getMappedRange(0,4))[0];if(D.unmap(),E!=-2304)if(E<=-2048){const P=-(E+2048)*512*256;await Zo(p,D,u,P)}else await Zo(p,D,u)}else await Zo(p,D,u);if(setTimeout(()=>{const E=window.store.getState();E.setOptimizerEndTime(Date.now()),E.setPermutationsResults(u.resultsQueue.size()),E.setPermutationsSearched(Math.min(u.permutations,S))},0),D.unmap(),u.permutations<=S||!window.store.getState().optimizationInProgress){u.cancelled=!0;break}}u.cancelled||window.store.getState().setPermutationsSearched(u.permutations),window.store.getState().setOptimizationInProgress(!1),window.store.getState().setPermutationsResults(u.resultsQueue.size()),setTimeout(()=>{v2(u),$d(u)},1)}async function Zo(e,t,n,o=0){var S;await t.mapAsync(GPUMapMode.READ,o);const s=t.getMappedRange(o*4),r=new Float32Array(s),l=n.resultsQueue;let c=((S=l.top())==null?void 0:S.value)??0,d=n.BLOCK_SIZE*n.CYCLES_PER_INVOCATION;const u=e+n.BLOCK_SIZE*n.CYCLES_PER_INVOCATION,h=n.permutations-u;h<0&&(d+=h);const p=e+o;if(l.size()>=n.RESULTS_LIMIT)for(let D=d-o-1;D>=0;D--){const E=r[D];if(E<0){D+=E+1;continue}E<=c||(c=l.fixedSizePushOvercapped({index:p+D,value:E}).value)}else for(let D=d-o-1;D>=0;D--){const E=r[D];if(E<0){D+=E+1;continue}E<=c&&l.size()>=n.RESULTS_LIMIT||(l.fixedSizePush({index:p+D,value:E}),c=l.top().value)}n.DEBUG&&Bg(n,s)}function v2(e){const t=e.relics,n=t.LinkRope.length,o=t.PlanarSphere.length,s=t.Feet.length,r=t.Body.length,l=t.Hands.length,c=t.Head.length,d=e.context,u=e.resultsQueue.toArray().sort((y,P)=>P.value-y.value),h=[],p=new $a(!1),S=new Ma(!1);for(let y=0;y<u.length;y++){const P=u[y].index,_=P%n,x=(P-_)/n%o,G=(P-x*n-_)/(n*o)%s,M=(P-G*o*n-x*n-_)/(n*o*s)%r,H=(P-M*s*o*n-G*o*n-x*n-_)/(n*o*s*r)%l,Z=(P-H*r*s*o*n-M*s*o*n-G*o*n-x*n-_)/(n*o*s*r*l)%c,X=Un(e.request,{Head:t.Head[Z],Hands:t.Hands[H],Body:t.Body[M],Feet:t.Feet[G],PlanarSphere:t.PlanarSphere[x],LinkRope:t.LinkRope[_]},d,p,S,!0,!0,void 0,void 0,!0),W=Sl(X);W.id=P,h.push(W)}h.length==0&&au(e.request);const D=T[e.request.resultSort],E=e.request.statDisplay=="combat"?D.combatGridColumn:D.basicGridColumn;vo(E),se.setRows(h),window.optimizerGrid.current.api.updateGridOptions({datasource:se.getDataSource()})}const _s=65,bs={extractCharacter:(e,t,n)=>(t=t*_s,{id:e[t]+n,HP:e[t+1],ATK:e[t+2],DEF:e[t+3],SPD:e[t+4],"CRIT Rate":e[t+5],"CRIT DMG":e[t+6],"Effect Hit Rate":e[t+7],"Effect RES":e[t+8],"Break Effect":e[t+9],"Energy Regeneration Rate":e[t+10],"Outgoing Healing Boost":e[t+11],ED:e[t+12],WEIGHT:e[t+13],EHP:e[t+14],HEAL:e[t+15],SHIELD:e[t+16],BASIC:e[t+17],SKILL:e[t+18],ULT:e[t+19],FUA:e[t+20],MEMO_SKILL:e[t+21],MEMO_TALENT:e[t+22],DOT:e[t+23],BREAK:e[t+24],COMBO:e[t+25],xHP:e[t+26],xATK:e[t+27],xDEF:e[t+28],xSPD:e[t+29],xCR:e[t+30],xCD:e[t+31],xEHR:e[t+32],xRES:e[t+33],xBE:e[t+34],xERR:e[t+35],xOHB:e[t+36],xELEMENTAL_DMG:e[t+37],relicSetIndex:e[t+38],ornamentSetIndex:e[t+39],mHP:e[t+40],mATK:e[t+41],mDEF:e[t+42],mSPD:e[t+43],mCR:e[t+44],mCD:e[t+45],mEHR:e[t+46],mRES:e[t+47],mBE:e[t+48],mERR:e[t+49],mOHB:e[t+50],mELEMENTAL_DMG:e[t+51],mxHP:e[t+52],mxATK:e[t+53],mxDEF:e[t+54],mxSPD:e[t+55],mxCR:e[t+56],mxCD:e[t+57],mxEHR:e[t+58],mxRES:e[t+59],mxBE:e[t+60],mxERR:e[t+61],mxOHB:e[t+62],mxELEMENTAL_DMG:e[t+63],mxEHP:e[t+64]}),extractArrayToResults:(e,t,n,o)=>{for(let s=0;s<t&&e[s*_s+1];s++){const r=bs.extractCharacter(e,s,o);n.fixedSizePush(r)}},packCharacter:(e,t,n)=>{t=t*_s;const o=n.c,s=n.a,r=o.a;if(e[t]=o.id,e[t+1]=r[f.HP],e[t+2]=r[f.ATK],e[t+3]=r[f.DEF],e[t+4]=r[f.SPD],e[t+5]=r[f.CR],e[t+6]=r[f.CD],e[t+7]=r[f.EHR],e[t+8]=r[f.RES],e[t+9]=r[f.BE],e[t+10]=r[f.ERR],e[t+11]=r[f.OHB],e[t+12]=r[f.ELEMENTAL_DMG],e[t+13]=o.weight,e[t+14]=s[f.EHP],e[t+15]=s[f.HEAL_VALUE],e[t+16]=s[f.SHIELD_VALUE],e[t+17]=s[f.BASIC_DMG],e[t+18]=s[f.SKILL_DMG],e[t+19]=s[f.ULT_DMG],e[t+20]=s[f.FUA_DMG],e[t+21]=s[f.MEMO_SKILL_DMG],e[t+22]=s[f.MEMO_TALENT_DMG],e[t+23]=s[f.DOT_DMG],e[t+24]=s[f.BREAK_DMG],e[t+25]=s[f.COMBO_DMG],e[t+26]=s[f.HP],e[t+27]=s[f.ATK],e[t+28]=s[f.DEF],e[t+29]=s[f.SPD],e[t+30]=s[f.CR],e[t+31]=s[f.CD],e[t+32]=s[f.EHR],e[t+33]=s[f.RES],e[t+34]=s[f.BE],e[t+35]=s[f.ERR],e[t+36]=s[f.OHB],e[t+37]=s[f.ELEMENTAL_DMG],e[t+38]=o.relicSetIndex,e[t+39]=o.ornamentSetIndex,n.a[f.MEMOSPRITE]){const l=n.m.c.a;e[t+40]=l[f.HP],e[t+41]=l[f.ATK],e[t+42]=l[f.DEF],e[t+43]=l[f.SPD],e[t+44]=l[f.CR],e[t+45]=l[f.CD],e[t+46]=l[f.EHR],e[t+47]=l[f.RES],e[t+48]=l[f.BE],e[t+49]=l[f.ERR],e[t+50]=l[f.OHB],e[t+51]=l[f.ELEMENTAL_DMG];const c=n.m.a;e[t+52]=c[f.HP],e[t+53]=c[f.ATK],e[t+54]=c[f.DEF],e[t+55]=c[f.SPD],e[t+56]=c[f.CR],e[t+57]=c[f.CD],e[t+58]=c[f.EHR],e[t+59]=c[f.RES],e[t+60]=c[f.BE],e[t+61]=c[f.ERR],e[t+62]=c[f.OHB],e[t+63]=c[f.ELEMENTAL_DMG],e[t+64]=c[f.EHP]}},cleanFloatBuffer:e=>{new Float32Array(e).fill(0)},createFloatBuffer:e=>new Float32Array(e*_s).buffer};function _2(e){const t=m.SetsRelicsNames.length,n=e.relicSets||[],o=[];for(const s of n){if(s[0]==pa.relic4Piece&&s.length==2){const r=m.RelicSetToIndex[s[1]],l=F.arrayOfZeroes(t);l[r]=4;const c=As(l);o.push(c)}if(s[0]==pa.relic2PlusAny&&s.length==2){const r=m.RelicSetToIndex[s[1]];for(let u=0;u<t;u++){const h=F.arrayOfZeroes(t);h[r]=2,h[u]+=2;const p=As(h);o.push(p)}const l=F.arrayOfZeroes(t);l[r]=2;const c=As(l),d=L2(c,t);o.push(...d)}if(s[0]==pa.relic2Plus2Piece&&s.length==3){const r=F.arrayOfZeroes(t),l=m.RelicSetToIndex[s[1]],c=m.RelicSetToIndex[s[2]];r[l]+=2,r[c]+=2;const d=As(r);o.push(d)}}return F2(o)}function A2(e){const t=e.ornamentSets||[],n=m.SetsOrnamentsNames.length;if(t.length==0)return F.arrayOfValue(n*n,1);const o=F.arrayOfZeroes(n*n);for(const s of t){const r=m.OrnamentSetToIndex[s],l=r+r*n;o[l]=1}return o}function As(e){const t=[];for(let n=0;n<e.length;n++)for(;e[n];)e[n]--,t.push(n);return t}function L2(e,t){const n=[];for(let o=0;o<t;o++)for(let s=0;s<t;s++){const r=F.arrayOfZeroes(4);r[0]=e[0],r[1]=e[1],r[2]=o,r[3]=s,n.push(r)}return n}function F2(e){const t=m.SetsRelicsNames.length;if(e.length==0)return F.arrayOfValue(Math.pow(t,4),1);const n=F.arrayOfZeroes(Math.pow(t,4));for(let o=0;o<e.length;o++){const s=e[o],r=H2(s);for(const l of r){const c=l[0]+l[1]*Math.pow(t,1)+l[2]*Math.pow(t,2)+l[3]*Math.pow(t,3);n[c]=1}}return n}const H2=e=>{const t=[],n=(o,s=[])=>{if(o.length===0)t.push(s);else for(let r=0;r<o.length;r++){const l=o.slice(),c=l.splice(r,1);n(l.slice(),s.concat(c))}};return n(e),t};function w2(e){return new Worker("/dreary-quibbles/assets/baseOptimizerWorker-D9p07sLo.js",{type:"module",name:e==null?void 0:e.name})}const Ys=Math.min(10,Math.max(1,(navigator.hardwareConcurrency||4)-1));let Zi=0;console.log("Using pool size "+Ys);const Ni=[],Ls=[];let ri=[];const Aa={initializeWorker:()=>{if(Zi<Ys){const e=new w2;Ni.push(e),Zi++,console.log("Initialized workers: "+Zi)}},initializeAllWorkers:()=>{for(let e=0;e<Ys;e++)setTimeout(()=>{Aa.initializeWorker()},500*e)},nextTask:()=>{if(ri.length==0)return;const{task:e,callback:t}=ri.shift();Aa.execute(e,t)},execute:(e,t)=>{if(e.attempts==null&&(e.attempts=0),e.attempts>10)return console.log("Too many failures, abandoning task");if(Aa.initializeWorker(),Ni.length>0){const n=Ni.shift();let o;Ls.length>0?(o=Ls.pop(),bs.cleanFloatBuffer(o)):o=bs.createFloatBuffer(m.THREAD_BUFFER_LENGTH),e.input.buffer=o,n.onmessage=s=>{Ni.push(n),Aa.nextTask(),t&&t(s.data),Ls.push(s.data.buffer)},n.onerror=s=>{console.warn("Worker error",s),Zi--,e.attempts++,ri.push({task:e,callback:t}),n.terminate(),setTimeout(()=>{Aa.initializeWorker(),Aa.nextTask()},100)},e.input.request.resultMinFilter=e.getMinFilter(),n.postMessage(e.input,[e.input.buffer])}else ri.push({task:e,callback:t})},cancel:e=>{ri=[]},state:()=>{console.log({poolSize:Ys,workers:Ni,taskQueue:ri,buffers:Ls,initializedWorkers:Zi})}};var pl=(e=>(e[e.OPTIMIZER=0]="OPTIMIZER",e[e.EST_TBP=1]="EST_TBP",e))(pl||{});let Vi=!1;const O2=typeof navigator<"u"&&navigator.userAgent.toLowerCase().indexOf("firefox")>-1;function gl(e){let t=B.getRelics();t=t.filter(l=>l.equippedBy==e.characterId),t=C.clone(t),qe.calculateWeightScore(e,t),t=qe.applyMainStatsFilter(e,t);const n=qe.splitRelicsByPart(t);qe.condenseRelicSubstatsForOptimizer(n),Object.keys(n).map(l=>n[l]=n[l][0]);const o=Un(e,n,null,null,null,void 0,void 0,void 0,void 0,!0),s=Sl(o);se.setTopRow(s,!0),window.store.getState().setOptimizerSelectedRowData(s);const r=B.getCharacterById(e.characterId);r&&window.store.getState().setOptimizerBuild(r.equipped)}const io={cancel:e=>{Vi=!0,Aa.cancel(e)},getFilteredRelics:e=>{let t=B.getRelics();t=qe.applyEquippedFilter(e,t),t=qe.applyEnhanceFilter(e,t),t=qe.applyGradeFilter(e,t),t=qe.applyRankFilter(e,t),t=qe.applyExcludeFilter(e,t);const n=qe.splitRelicsByPart(t);t=qe.applyMainFilter(e,t),t=C.clone(t),t=qe.applyMainStatsFilter(e,t),t=qe.applySetFilter(e,t),qe.calculateWeightScore(e,t);let o=qe.splitRelicsByPart(t);return o=qe.applyCurrentFilter(e,o),o=qe.applyTopFilter(e,o),[o,n]},optimize:async function(e){Vi=!1;const t=[e.teammate0,e.teammate1,e.teammate2].filter(M=>!!M.characterId);for(let M=0;M<t.length;M++){const H=t[M],Z=B.getMetadata().characters[H.characterId];H.ELEMENTAL_DMG_TYPE=ei[Z.element]}const[n]=this.getFilteredRelics(e);qe.condenseRelicSubstatsForOptimizer(n);const o=_2(e),s=A2(e),r={hSize:n.Head.length,gSize:n.Hands.length,bSize:n.Body.length,fSize:n.Feet.length,pSize:n.PlanarSphere.length,lSize:n.LinkRope.length},l=r.hSize*r.gSize*r.bSize*r.fSize*r.pSize*r.lSize;if(se.setMetadata(r,n),console.log(`Optimization permutations: ${l}, blocksize: ${m.THREAD_BUFFER_LENGTH}`),l==0){window.store.getState().setOptimizationInProgress(!1),B2(e),se.setRows([]),se.resetDataSource();return}if(Vi){window.store.getState().setOptimizationInProgress(!1);return}se.scrollToGrid(),window.optimizerGrid.current.api.setGridOption("loading",!0);const c=Ki(e);setTimeout(()=>{gl(e)},200);let d=0,u=!1,h=[];const p=T[e.resultSort],S=e.statDisplay=="combat"?p.combatGridColumn:p.basicGridColumn,D=e.resultsLimit||1024,E=new Yd(D,(M,H)=>M[S]-H[S]),y=2e4;let P=0;const _=m.THREAD_BUFFER_LENGTH,x=F.clone(c);let G=window.store.getState().savedSession[Ne.computeEngine];if(G!=Pa&&dl().then(M=>{M==null?(J.warning("GPU acceleration is not available on this browser - only desktop Chrome and Opera are supported. If you are on a supported browser, report a bug to the Discord server",15),window.store.getState().setSavedSessionKey(Ne.computeEngine,Pa),G=Pa):F.sleep(200).then(()=>{x2({device:M,context:c,request:e,relics:n,permutations:l,computeEngine:G,relicSetSolutions:o,ornamentSetSolutions:s})})}),G==Pa){const M=[];for(let Z=0;Z<l;Z+=P)P=Math.min(_,P+y),M.push({skip:Z,runSize:P});let H=M.length;window.store.getState().setOptimizerStartTime(Date.now()),window.store.getState().setOptimizerRunningEngine(Pa);for(const Z of M){const X={input:{context:x,request:e,relics:n,WIDTH:Z.runSize,skip:Z.skip,permutations:l,relicSetSolutions:o,ornamentSetSolutions:s,isFirefox:O2,workerType:pl.OPTIMIZER},getMinFilter:()=>E.size()&&E.size()>=e.resultsLimit?E.top()[S]:0},W=L=>{if(d+=Z.runSize,H-=1,Vi&&u)return;const A=new Float32Array(L.buffer);if(bs.extractArrayToResults(A,Z.runSize,E,X.input.skip),window.store.getState().setPermutationsResults(E.size()),window.store.getState().setPermutationsSearched(Math.min(l,d)),window.store.getState().setOptimizerEndTime(Date.now()),H==0||Vi){window.store.getState().setOptimizationInProgress(!1),h=E.toArray(),se.setRows(h),vo(S),window.optimizerGrid.current.api.updateGridOptions({datasource:se.getDataSource()}),console.log("Done",h.length),u=!0,!h.length&&!H&&au(e);return}};Aa.execute(X,W)}}}};function Sl(e){const t=e.c,n={relicSetIndex:t.relicSetIndex,ornamentSetIndex:t.ornamentSetIndex,id:t.id,WEIGHT:t.weight,xa:new Float32Array(e.a),ca:new Float32Array(t.a),tracedX:e};if(n[a.HP]=t.HP.get(),n[a.ATK]=t.ATK.get(),n[a.DEF]=t.DEF.get(),n[a.SPD]=t.SPD.get(),n[a.CR]=t.CR.get(),n[a.CD]=t.CD.get(),n[a.EHR]=t.EHR.get(),n[a.RES]=t.RES.get(),n[a.BE]=t.BE.get(),n[a.ERR]=t.ERR.get(),n[a.OHB]=t.OHB.get(),n.ED=t.ELEMENTAL_DMG.get(),n.BASIC=e.BASIC_DMG.get(),n.SKILL=e.SKILL_DMG.get(),n.ULT=e.ULT_DMG.get(),n.FUA=e.FUA_DMG.get(),n.MEMO_SKILL=e.MEMO_SKILL_DMG.get(),n.MEMO_TALENT=e.MEMO_TALENT_DMG.get(),n.DOT=e.DOT_DMG.get(),n.BREAK=e.BREAK_DMG.get(),n.COMBO=e.COMBO_DMG.get(),n.EHP=e.EHP.get(),n.HEAL=e.HEAL_VALUE.get(),n.SHIELD=e.SHIELD_VALUE.get(),n.xHP=e.HP.get(),n.xATK=e.ATK.get(),n.xDEF=e.DEF.get(),n.xSPD=e.SPD.get(),n.xCR=e.CR.get(),n.xCD=e.CD.get(),n.xEHR=e.EHR.get(),n.xRES=e.RES.get(),n.xBE=e.BE.get(),n.xERR=e.ERR.get(),n.xOHB=e.OHB.get(),n.xELEMENTAL_DMG=e.ELEMENTAL_DMG.get(),n.mELEMENTAL_DMG=t.ELEMENTAL_DMG.get(),e.a[f.MEMOSPRITE]){const o=e.m.c;n.mHP=o.HP.get(),n.mATK=o.ATK.get(),n.mDEF=o.DEF.get(),n.mSPD=o.SPD.get(),n.mCR=o.CR.get(),n.mCD=o.CD.get(),n.mEHR=o.EHR.get(),n.mRES=o.RES.get(),n.mBE=o.BE.get(),n.mERR=o.ERR.get(),n.mOHB=o.OHB.get();const s=e.m;n.mxHP=s.HP.get(),n.mxATK=s.ATK.get(),n.mxDEF=s.DEF.get(),n.mxSPD=s.SPD.get(),n.mxCR=s.CR.get(),n.mxCD=s.CD.get(),n.mxEHR=s.EHR.get(),n.mxRES=s.RES.get(),n.mxBE=s.BE.get(),n.mxERR=s.ERR.get(),n.mxOHB=s.OHB.get(),n.mxELEMENTAL_DMG=s.ELEMENTAL_DMG.get(),n.mxEHP=s.EHP.get()}return n}const ut={ratingFilters:()=>({title:w.t("hint:RatingFilter.Title"),content:i.jsxs(g,{vertical:!0,gap:10,children:[i.jsx("p",{children:w.t("hint:RatingFilter.p1")}),i.jsx("p",{children:w.t("hint:RatingFilter.p2")}),i.jsx("p",{children:w.t("hint:RatingFilter.p3")})]})}),combatBuffs:()=>({title:w.t("hint:CombatBuffs.Title"),content:i.jsx(g,{vertical:!0,gap:10,children:i.jsx("p",{children:w.t("hint:CombatBuffs.p1")})})}),statFilters:()=>({title:w.t("hint:StatFilters.Title"),content:i.jsxs(g,{vertical:!0,gap:10,children:[i.jsx("p",{children:w.t("hint:StatFilters.p1")}),i.jsx("p",{children:w.t("hint:StatFilters.p2")}),i.jsx("p",{children:w.t("hint:StatFilters.p3")})]})}),mainStats:()=>({title:w.t("hint:Mainstats.Title"),content:i.jsx(g,{vertical:!0,gap:10,children:i.jsx("p",{children:w.t("hint:Mainstats.p1")})})}),sets:()=>({title:w.t("hint:Sets.Title"),content:i.jsxs(g,{vertical:!0,gap:10,children:[i.jsx("p",{children:w.t("hint:Sets.p1")}),i.jsx("p",{children:w.t("hint:Sets.p2")})]})}),character:()=>({title:w.t("hint:Character.Title"),content:i.jsx(g,{vertical:!0,gap:10,children:i.jsx("p",{children:w.t("hint:Character.p1")})})}),characterPassives:()=>({title:w.t("hint:CharacterPassives.Title"),content:i.jsxs(g,{vertical:!0,gap:10,children:[i.jsx("p",{children:w.t("hint:CharacterPassives.p1")}),i.jsx("p",{children:w.t("hint:CharacterPassives.p2")})]})}),lightConePassives:()=>({title:w.t("hint:LightconePassives.Title"),content:i.jsxs(g,{vertical:!0,gap:10,children:[i.jsx("p",{children:w.t("hint:LightconePassives.p1")}),i.jsx("p",{children:w.t("hint:LightconePassives.p2")})]})}),lightCone:()=>({title:w.t("hint:Lightcone.Title"),content:i.jsxs(g,{vertical:!0,gap:10,children:[i.jsx("p",{children:w.t("hint:Lightcone.p1")}),i.jsx("p",{children:w.t("hint:Lightcone.p2")})]})}),actions:()=>({title:w.t("hint:Actions.Title"),content:i.jsxs(g,{vertical:!0,gap:10,children:[i.jsx("p",{children:w.t("hint:Actions.p1")}),i.jsx("p",{children:w.t("hint:Actions.p2")}),i.jsx("p",{children:w.t("hint:Actions.p3")}),i.jsx("p",{children:w.t("hint:Actions.p4")})]})}),optimizerOptions:()=>({title:w.t("hint:OptimizerOptions.Title"),content:(()=>{const{t:e}=V("hint",{keyPrefix:"OptimizerOptions"});return i.jsxs(g,{vertical:!0,gap:10,children:[i.jsx("p",{children:i.jsxs(Rt,{t:e,i18nKey:"p1",children:[i.jsx("strong",{children:"Character priority filter"}),"- When this option is enabled, the character may only steal relics from lower priority characters. The optimizer will ignore relics equipped by higher priority characters on the list. Change character ranks from the priority selector or by dragging them on the Characters page."]})}),i.jsx("p",{children:i.jsxs(Rt,{t:e,i18nKey:"p2",children:[i.jsx("strong",{children:"Boost main stat"}),"- Calculates relic mains stats as if they were this level (or their max if they can't reach this level) if they are currently below it. Substats are not changed accordingly, so builds with lower level relics may be stronger once you level them."]})}),i.jsx("p",{children:i.jsxs(Rt,{t:e,i18nKey:"p3",children:[i.jsx("strong",{children:"Keep current relics"}),"- The character must use its currently equipped items, and the optimizer will try to fill in empty slots"]})}),i.jsx("p",{children:i.jsxs(Rt,{t:e,i18nKey:"p4",children:[i.jsx("strong",{children:"Include equipped relics"}),"- When enabled, the optimizer will allow using currently equipped by a character for the search. Otherwise equipped relics are excluded"]})}),i.jsx("p",{children:i.jsxs(Rt,{t:e,i18nKey:"p5",children:[i.jsx("strong",{children:"Priority"}),"- See: Character priority filter. Changing this setting will change the character's priority"]})}),i.jsx("p",{children:i.jsxs(Rt,{t:e,i18nKey:"p6",children:[i.jsx("strong",{children:"Exclude"}),"- Select specific characters' equipped relics to exclude for the search. This setting overrides the priority filter"]})}),i.jsx("p",{children:i.jsxs(Rt,{t:e,i18nKey:"p7",children:[i.jsx("strong",{children:"Enhance / grade"}),"- Select the minimum enhance to search for and minimum stars for relics to include"]})})]})})()}),relics:()=>({title:w.t("hint:Relics.Title"),content:i.jsxs(g,{vertical:!0,gap:10,children:[i.jsx("p",{children:w.t("hint:Relics.p1")}),i.jsx("p",{children:w.t("hint:Relics.p2")}),i.jsx("p",{children:w.t("hint:Relics.p3")}),i.jsx("p",{children:w.t("hint:Relics.p4")}),i.jsx("p",{children:w.t("hint:Relics.p5")})]})}),optimizationDetails:()=>({title:w.t("hint:OptimizationDetails.Title"),content:i.jsxs(g,{vertical:!0,gap:10,children:[i.jsx("p",{children:w.t("hint:OptimizationDetails.p1")}),i.jsx("p",{children:w.t("hint:OptimizationDetails.p2")}),i.jsx("p",{children:w.t("hint:OptimizationDetails.p3")}),i.jsx("p",{children:w.t("hint:OptimizationDetails.p4")})]})}),enemyOptions:()=>({title:w.t("hint:EnemyOptions.Title"),content:i.jsxs(g,{vertical:!0,gap:10,children:[i.jsx("p",{children:w.t("hint:EnemyOptions.p1")}),i.jsx("p",{children:w.t("hint:EnemyOptions.p2")}),i.jsx("p",{children:w.t("hint:EnemyOptions.p3")}),i.jsx("p",{children:w.t("hint:EnemyOptions.p4")}),i.jsx("p",{children:w.t("hint:EnemyOptions.p5")}),i.jsx("p",{children:w.t("hint:EnemyOptions.p6")}),i.jsx("p",{children:w.t("hint:EnemyOptions.p7")})]})}),substatWeightFilter:()=>({title:w.t("hint:SubstatWeightFilter.Title"),content:i.jsxs(g,{vertical:!0,gap:10,children:[i.jsx("p",{children:w.t("hint:SubstatWeightFilter.p1")}),i.jsx("p",{children:w.t("hint:SubstatWeightFilter.p2")}),i.jsx("p",{children:w.t("hint:SubstatWeightFilter.p3")}),i.jsx("p",{children:w.t("hint:SubstatWeightFilter.p4")})]})}),statDisplay:()=>({title:w.t("hint:StatDisplay.Title"),content:i.jsxs(g,{vertical:!0,gap:10,children:[i.jsx("p",{children:w.t("hint:StatDisplay.p1")}),i.jsx("p",{children:w.t("hint:StatDisplay.p2")}),i.jsx("p",{children:w.t("hint:StatDisplay.p3")})]})}),valueColumns:()=>({title:w.t("hint:ValueColumns.Title"),content:i.jsxs(g,{vertical:!0,gap:10,children:[i.jsx("p",{children:w.t("hint:ValueColumns.p1")}),i.jsx("p",{children:i.jsx("b",{children:w.t("hint:ValueColumns.p2")})}),i.jsx("p",{children:w.t("hint:ValueColumns.p3")}),i.jsx("p",{children:w.t("hint:ValueColumns.p4")}),i.jsx("p",{children:w.t("hint:ValueColumns.p5")}),i.jsx("p",{children:w.t("hint:ValueColumns.p6")})]})}),relicInsight:()=>({title:w.t("hint:RelicInsights.Title"),content:(()=>{const{t:e}=V("hint",{keyPrefix:"RelicInsights"});return i.jsxs(g,{vertical:!0,gap:10,children:[i.jsx("p",{children:e("p1")}),i.jsx("p",{children:i.jsxs(Rt,{t:e,i18nKey:"p2",children:["'Buckets' looks at how perfect this relic could be (with the best possible upgrade rolls) for each character, and buckets them into percentages.",i.jsx("br",{}),"If you hover over a character portrait you'll see the new stats and/or rolls necessary to reach the max potential of this relic.",i.jsx("br",{}),"⚠️ Relics with missing substats may have misleadingly high buckets, as best-case upgrade analysis assumes the best new substat per character."]})}),i.jsx("p",{children:e("p3")})]})})()}),relicLocation:()=>({title:w.t("hint:RelicLocation.Title"),content:i.jsxs(g,{vertical:!0,gap:10,children:[i.jsx("p",{children:w.t("hint:RelicLocation.p1")}),i.jsx("p",{children:w.t("hint:RelicLocation.p2")}),i.jsxs(g,{vertical:!0,children:[i.jsx("div",{children:w.t("hint:RelicLocation.p3")}),i.jsxs("ul",{children:[i.jsx("li",{children:w.t("hint:RelicLocation.p4")}),i.jsx("li",{children:w.t("hint:RelicLocation.p5")}),i.jsx("li",{children:w.t("hint:RelicLocation.p6")})]})]})]})}),locatorParams:()=>({title:w.t("hint:LocatorParams.Title"),content:(()=>{const{t:e}=V("hint",{keyPrefix:"LocatorParams"});return i.jsxs(g,{vertical:!0,gap:8,children:[i.jsx("p",{children:i.jsxs(Rt,{t:e,i18nKey:"p1",children:[i.jsx("strong",{children:"Inventory Width"}),"- Select the number of columns the inventory has ingame so that the relic locator can find your relic accurately"]})}),i.jsx("p",{children:i.jsxs(Rt,{t:e,i18nKey:"p2",children:[i.jsx("strong",{children:"Auto Filter rows"}),"- Maximum number of rows before the relic locator applies a part/set filter to try and bring the searched relic closer to the top of your inventory"]})})]})})()})},{Text:k2}=Ce;function Bo(e){const t=n=>{const[o,s]=Et.useState(!1),r=i.jsxs(k2,{style:{width:400,display:"block"},children:[i.jsx("hr",{}),n.content]});return i.jsx(hs,{trigger:"hover",placement:"left",content:r,title:n.title,open:o,mouseEnterDelay:.4,onOpenChange:s,children:i.jsx("span",{style:{width:"100%"},children:i.jsx(e,{...n})})})};return t.displayName="WithPopoverWrapped",t}Bo.displayName="WithPopover";const K2="flex-start",j2="center",W2=Lt(Ce)`
    white-space: pre-line;
`;function Z2(e){return e.set?"setConditionals":e.lc?"lightConeConditionals":"characterConditionals"}function bl(e){const t=Z2(e);if(e.set)return[t,e.id,1];const n=[t,e.id];return e.teammateIndex!=null&&n.unshift(`teammate${e.teammateIndex}`),n}const N2=e=>{const t=bl(e),n=i.jsx(gn,{checkedChildren:i.jsx(Sn,{}),unCheckedChildren:i.jsx(Fa,{}),disabled:e.disabled,style:{width:45,marginRight:5},onChange:e.onChange,defaultChecked:e.value??void 0});return i.jsxs(g,{justify:K2,align:j2,children:[e.removeForm?n:i.jsx(N.Item,{name:t,valuePropName:"checked",children:n}),i.jsx(W2,{children:e.text})]})},nu=Bo(N2),V2="flex-start",z2="center",U2=Lt(Ce)`
    white-space: pre-line;
`,X2=e=>{const[t,n]=I.useState(e.value??void 0),o=bl(e),s=i.jsx(z,{disabled:e.disabled,style:{minWidth:e.fullWidth?"100%":80,width:e.fullWidth?"100%":80,marginRight:5},optionLabelProp:"display",listHeight:500,size:"small",dropdownStyle:{width:"fit-content"},options:e.options,onChange:r=>{e.onChange&&n(r??0)},onBlur:()=>{e.onChange&&e.onChange(t??0)},value:e.value==null?void 0:t});return i.jsxs(g,{justify:V2,align:z2,style:{width:e.fullWidth?"100%":void 0},children:[e.removeForm?s:i.jsx(N.Item,{name:o,style:{width:e.fullWidth?"100%":void 0},children:s}),i.jsx(U2,{children:e.fullWidth?null:e.text})]})},iu=Bo(X2),Y2="flex-start",J2="center",Q2=61,$2=55,q2=155,Ec=Lt(Ce)`
    white-space: pre-line;
`,eS=e=>{const[t,n]=I.useState((e==null?void 0:e.value)??void 0),o=e.percent?100:1,s=e.percent?.01:1,r=e.percent?"%":"",l=I.useRef(e.min),c=I.useRef(e.max),d=bl(e);I.useEffect(()=>{const p=window.optimizerForm.getFieldValue(d);(p>=e.max||p==c.current)&&window.optimizerForm.setFieldValue(d,e.max),(p<=e.min||p==l.current)&&window.optimizerForm.setFieldValue(d,e.min),l.current=e.min,c.current=e.max},[e.min,e.max]);const u=i.jsx($t,{min:e.min,max:e.max,controls:!1,size:"small",style:{width:$2},parser:p=>p==null||p==""?0:C.precisionRound(parseFloat(p)/o),formatter:p=>`${C.precisionRound((p??0)*o)}${r}`,disabled:e.disabled,onChange:p=>{e.onChange&&e.onChange(t??0)},onBlur:()=>{e.onChange&&e.onChange(t??0)},value:e.value==null?void 0:t}),h=i.jsx(Ro,{min:e.min,max:e.max,step:s,style:{minWidth:q2,marginTop:0,marginBottom:0,marginLeft:1},tooltip:{formatter:p=>`${C.precisionRound((p??0)*o)}${r}`},disabled:e.disabled,onChange:p=>{e.onChange&&n(p)},onChangeComplete:p=>{e.onChange&&e.onChange(p)},value:e.value==null?void 0:t});return i.jsxs(g,{vertical:!0,gap:0,style:{marginBottom:0},children:[i.jsxs(g,{justify:Y2,align:J2,children:[i.jsx("div",{style:{minWidth:Q2,display:"block"},children:e.removeForm?u:i.jsx(N.Item,{name:d,children:u})}),i.jsx(Ec,{style:{lineHeight:"16px"},children:e.text})]}),i.jsxs(g,{align:"center",justify:"flex-start",gap:5,style:{height:14},children:[e.removeForm?h:i.jsx(N.Item,{name:d,children:h}),i.jsx(Ec,{style:{minWidth:20,marginBottom:2,textAlign:"center"},children:`${C.precisionRound(e.max*o)}${r}`})]})]})},su=Bo(eS),Ts=(e,t="#ebb434")=>{if(w.resolvedLanguage=="aa_ER")return i.jsx(i.Fragment,{children:e});const n=[];let o=0;return e&&e.split("::BR::").forEach(s=>{let r="",l=!1;n.length>0&&(n.push(i.jsx("br",{},o++)),n.push(i.jsx("br",{},o++)));for(let c=0;c<s.length;c++)s[c]>="0"&&s[c]<="9"||s[c]==="%"||s[c]==="A"&&s[c+1]&&/[2,4,6]/.test(s[c+1])||s[c]==="E"&&s[c+1]&&/[0-6]/.test(s[c+1])?(r+=s[c],l=!0):(l&&(n.push(i.jsx("span",{style:{color:t},children:r},o++)),r="",l=!1),n.push(i.jsx("span",{children:s[c]},o++)));l&&n.push(i.jsx("span",{style:{color:t},children:r},o++))}),i.jsx(i.Fragment,{children:n})},tS={switch:nu,slider:su,select:iu},ou=({content:e,teammateIndex:t})=>{const{t:n}=V("optimizerTab"),o=[];let s=0;return e?e.length===0?t!=null?o.push(i.jsx("div",{children:n("NoTeamConditionals")},s++)):o.push(i.jsx("div",{children:n("NoConditionals")},s++)):e.forEach(r=>{const l=tS[r.formItem];r.teammateIndex=t,o.push(I.createElement(l,{...r,title:r.text,content:Ts(r.content),text:r.text,key:s++})),s++}):t!=null?o.push(i.jsx("div",{children:n("NoTeamConditionals")},s++)):o.push(i.jsx("div",{children:n("NoConditionals")},s++)),i.jsx(g,{vertical:!0,gap:6,children:o})},{Text:aS}=Ce,$=Lt(aS)`
    text-decoration: underline;
    text-decoration-color: #6d97ffb3;
    text-underline-offset: 2px;
    white-space: nowrap;
`;function He(e){return new URL(wt+"/assets"+e,import.meta.url).href}const Cc={[a.HP]:"IconMaxHP.webp",[a.ATK]:"IconAttack.webp",[a.DEF]:"IconDefence.webp",[a.HP_P]:"IconMaxHP.webp",[a.ATK_P]:"IconAttack.webp",[a.DEF_P]:"IconDefence.webp",[a.SPD]:"IconSpeed.webp",[a.SPD_P]:"IconSpeed.webp",[a.CR]:"IconCriticalChance.webp",[a.CD]:"IconCriticalDamage.webp",[a.EHR]:"IconStatusProbability.webp",[a.RES]:"IconStatusResistance.webp",[a.BE]:"IconBreakUp.webp",[a.ERR]:"IconEnergyRecovery.webp",[a.OHB]:"IconHealRatio.webp",[a.Physical_DMG]:"IconPhysicalAddedRatio.webp",[a.Fire_DMG]:"IconFireAddedRatio.webp",[a.Ice_DMG]:"IconIceAddedRatio.webp",[a.Lightning_DMG]:"IconThunderAddedRatio.webp",[a.Wind_DMG]:"IconWindAddedRatio.webp",[a.Quantum_DMG]:"IconQuantumAddedRatio.webp",[a.Imaginary_DMG]:"IconImaginaryAddedRatio.webp"},k={getStatIcon:(e,t=!1)=>e=="CV"?He("/misc/cv.webp"):e=="simScore"?He("/misc/battle.webp"):e==m.Stats.HP_P&&t?He("/misc/IconMaxHPPercent.webp"):e==m.Stats.ATK_P&&t?He("/misc/IconAttackPercent.webp"):e==m.Stats.DEF_P&&t?He("/misc/IconDefencePercent.webp"):!e||!Cc[e]?k.getBlank():He(`/icon/property/${Cc[e]}`),getCharacterPortraitById:e=>e?He(`/image/character_portrait/${e}.webp`):(console.warn("No id found"),k.getBlank()),getCharacterAvatarById:e=>e?He(`/icon/avatar/${e}.webp`):k.getBlank(),getCharacterPreviewById:e=>e?He(`/image/character_preview/${e}.webp`):k.getBlank(),getLightConePortrait:e=>e?He(`/image/light_cone_portrait/${e.id}.webp`):k.getBlank(),getLightConePortraitById:e=>e?He(`/image/light_cone_portrait/${e}.webp`):k.getBlank(),getLightConeIconById:e=>e?He(`/icon/light_cone/${e}.webp`):k.getBlank(),getPath:e=>e?He(`/icon/path/${e}.webp`):k.getBlank(),getPathFromClass:e=>e?He(`/icon/path/${e}.webp`):k.getBlank(),getElement:e=>e?He(`/icon/element/${e}.webp`):k.getBlank(),getBlank:()=>He("/misc/blank.webp"),getQuestion:()=>He("/misc/tooltip.webp"),getLogo:()=>He("/misc/logo.webp"),getDiscord:()=>He("/misc/badgediscord.webp"),getGithub:()=>He("/misc/badgegithub.webp"),getKofi:()=>He("/misc/badgekofi.webp"),getJade:()=>He("/misc/jade.webp"),getPass:()=>He("/misc/pass.webp"),getStarlight:()=>He("/misc/starlight.webp"),getStar:()=>He("/misc/StarBig.webp"),getScore:()=>He("/misc/QuestMainIcon.webp"),getScoreNoSpeed:()=>He("/misc/noSpdScore.webp"),getPart:e=>{const t={[b.Head]:"partHead",[b.Hands]:"partHands",[b.Body]:"partBody",[b.Feet]:"partFeet",[b.PlanarSphere]:"partPlanarSphere",[b.LinkRope]:"partLinkRope"};return He(`/misc/${t[e]}.webp`)},getChangelog:e=>He(`/misc/changelog/${e}`),getSetImage:(e,t=m.Parts.PlanarSphere,n=!1)=>{if(e==-1)return k.getBlank();const o=String(e),s={base:"",[m.Parts.Head]:"_0",[m.Parts.Hands]:"_1",[m.Parts.Body]:"_2",[m.Parts.Feet]:"_3",[m.Parts.PlanarSphere]:"_0",[m.Parts.LinkRope]:"_1"};return n?e==ps||e==gs?He(`/icon/relic/${rt[m.Sets.SacerdosRelivedOrdeal]}.webp`):He(`/icon/relic/${rt[o]}.webp`):e==ps||e==gs?He(`/icon/relic/${rt[m.Sets.SacerdosRelivedOrdeal]}${s[t]}.webp`):He(`/icon/relic/${rt[o]}${s[t]}.webp`)},getHomeFeature:(e,t="en_US")=>He(`/misc/home/${t}/${e}.webp`),getHomeBackground:e=>He(`/misc/home/background/${e}.webp`),getGlobe:()=>He("/misc/globe.webp")},ft=e=>i.jsx(hs,{content:e.type.content,title:e.type.title,overlayStyle:{width:500},children:i.jsx("img",{src:k.getQuestion(),style:{width:16,opacity:.6}})}),Dl=I.memo(({id:e,eidolon:t,teammateIndex:n})=>{const{t:o}=V("optimizerTab"),s=e;if(!e)return i.jsxs(g,{justify:"space-between",align:"center",children:[i.jsx($,{children:o("CharacterPassives")}),i.jsx(ft,{type:ut.characterPassives()})]});const r=ta.get({characterId:s,characterEidolon:t},!0);if(!r)return i.jsxs(g,{justify:"space-between",align:"center",children:[i.jsx($,{children:o("CharacterPassives")}),i.jsx(ft,{type:ut.characterPassives()})]});const l=n!=null?r.teammateContent?r.teammateContent():void 0:r.content();return i.jsxs(g,{vertical:!0,gap:5,children:[n==null&&i.jsxs(g,{justify:"space-between",align:"center",children:[i.jsx($,{children:o("CharacterPassives")}),i.jsx(ft,{type:ut.characterPassives()})]}),i.jsx(ou,{content:l,teammateIndex:n})]})});Dl.displayName="CharacterConditionalDisplay";const Rl=I.memo(e=>{var u;const{t}=V("optimizerTab"),{id:n,superImposition:o,teammateIndex:s}=e,r=s==null?window.optimizerForm.getFieldValue("characterId"):(u=window.optimizerForm.getFieldValue(`teammate${s}`))==null?void 0:u.characterId,l=yn({characterId:r,characterEidolon:0,lightCone:n,lightConeSuperimposition:o},e.dbMetadata),c=aa.get(l,!0),d=s!=null?c.teammateContent?c.teammateContent():void 0:c.content();return i.jsxs(g,{vertical:!0,gap:5,children:[s==null&&i.jsxs(g,{justify:"space-between",align:"center",children:[i.jsx($,{children:t("LightconePassives")}),i.jsx(ft,{type:ut.lightConePassives()})]}),i.jsx(ou,{content:d,teammateIndex:s})]})});Rl.displayName="LightConeConditionalDisplay";const nS=Qs([{color:"#5A1A06",pos:0},{color:"#343127",pos:.35},{color:"#38821F",pos:1}]);let No=Qs("#343127","#38821F");const iS={"augmentedStats.HP":169.35,"augmentedStats.ATK":84.675,"augmentedStats.DEF":84.675,"augmentedStats.SPD":10,"augmentedStats.ATK%":.1728,"augmentedStats.HP%":.1728,"augmentedStats.DEF%":.216,"augmentedStats.CRIT Rate":.1296,"augmentedStats.CRIT DMG":.2592,"augmentedStats.Effect Hit Rate":.1728,"augmentedStats.Effect RES":.1728,"augmentedStats.Break Effect":.2592,cv:.4,"weights.current":64.8,"weights.potentialSelected.averagePct":100,"weights.potentialSelected.bestPct":100,"weights.potentialAllAll":100,"weights.rerollAvgSelectedDelta":40},be={getColor:(e,t)=>t.rgbAt(e).toHexString(),getOptimizerColumnGradient:e=>{const t=se.getAggregations();try{const n=e.column.colId,o=se.getColumnsToAggregateMap();if(e.data&&t&&o[n]){const s=t.min[n],r=t.max[n];let c=(e.value-s)/(r-s);return r==s&&(c=.5),{backgroundColor:be.getColor(Math.min(Math.max(c,0),1),nS)}}}catch(n){console.error(n)}},setTheme(e){No=Qs(e.colorBgBase,e.colorPrimary)},setToken(e){No=Qs(e.colorBgElevated,e.colorPrimaryHover)},getRelicGradient(e){const t=e.column.colId,n=e.value;if(isNaN(n)||n==0)return{};let o;return t=="weights.rerollAvgSelectedDelta"?o=n/40:t.startsWith("weights.potential")||t.startsWith("weights.reroll")?o=n/100:t.startsWith("weights.")?o=n/(6.48*9):o=n/iS[t],{backgroundColor:be.getColor(Math.min(Math.max(o,0),1),No)}}},El={de_DE:{locale:"de_DE",nativeName:"Deutsch",shortName:"Deutsch"},en_US:{locale:"en_US",nativeName:"English",shortName:"English"},es_ES:{locale:"es_ES",nativeName:"Español",shortName:"Español"},fr_FR:{locale:"fr_FR",nativeName:"Français",shortName:"Français"},it_IT:{locale:"it_IT",nativeName:"Italiano",shortName:"Italiano"},ja_JP:{locale:"ja_JP",nativeName:"日本語",shortName:"日本語"},ko_KR:{locale:"ko_KR",nativeName:"한국어",shortName:"한국어"},pt_BR:{locale:"pt_BR",nativeName:"Português",shortName:"Português"},ru_RU:{locale:"ru_RU",nativeName:"русский",shortName:"русский"},tr_TR:{locale:"tr_TR",nativeName:"Türkçe",shortName:"Türkçe"},vi_VN:{locale:"vi_VN",nativeName:"Tiếng Việt",shortName:"Tiếng Việt"},zh_CN:{locale:"zh_CN",nativeName:"中文",shortName:"中文"},zh_TW:{locale:"zh_TW",nativeName:"中文",shortName:"中文"},aa_ER:{locale:"aa_ER",nativeName:"inContext",shortName:"inContext"}},sS=Object.values(El).reduce((e,t)=>(e[t.locale]=t.locale.replace("_","-"),e),{});function Vo(e,t=0,n=!1){return e.toLocaleString(wa(),{maximumFractionDigits:t,minimumFractionDigits:t,useGrouping:n})}const oS={maximumFractionDigits:0,minimumFractionDigits:0,useGrouping:!0},rS={maximumFractionDigits:1,minimumFractionDigits:1,useGrouping:!0},lS={maximumFractionDigits:0,minimumFractionDigits:0,useGrouping:!1},cS={maximumFractionDigits:1,minimumFractionDigits:1,useGrouping:!1},dS={maximumFractionDigits:2,minimumFractionDigits:2,useGrouping:!1},uS={maximumFractionDigits:3,minimumFractionDigits:3,useGrouping:!1},la=e=>e.toLocaleString(wa(),oS),mS=e=>e.toLocaleString(wa(),rS),fn=e=>e.toLocaleString(wa(),lS),Ct=e=>e.toLocaleString(wa(),cS),Kn=e=>e.toLocaleString(wa(),dS),An=e=>e.toLocaleString(wa(),uS);function wa(){return sS[w.resolvedLanguage]}const K={floor:e=>(e==null?void 0:e.value)==null?"":fn(Math.floor(e.value)),x100Tenths:e=>(e==null?void 0:e.value)==null?"":Ct(Math.floor(F.precisionRound(e.value*100)*10)/10),tenths:e=>(e==null?void 0:e.value)==null?"":Ct(Math.floor(F.precisionRound(e.value)*10)/10),relicSet:e=>{if((e==null?void 0:e.value)==null||isNaN(e.value))return"";const t=e.value,n=Object.values(m.SetsRelics).length,o=[],s=t%n,r=(t-s)/n%n,l=(t-r*n-s)/(n*n)%n,c=(t-l*n*n-r*n-s)/(n*n*n)%n,d=[s,r,l,c];for(;d.length>0;){const u=d[0];if(d.lastIndexOf(u)){const h=Object.entries(m.RelicSetToIndex).find(D=>D[1]==u)[0],p=k.getSetImage(h,m.Parts.Head);o.push(p);const S=d.lastIndexOf(u);d.splice(S,1)}d.splice(0,1)}return o.sort(),i.jsxs(g,{justify:"center",style:{marginTop:-1},children:[i.jsx(li,{asset:o[0]}),i.jsx(li,{asset:o[1]})]})},ornamentSet:e=>{if((e==null?void 0:e.value)==null)return"";const t=e.value,n=Object.values(m.SetsOrnaments).length;let o;const s=t%n,r=(t-s)/n%n;if(s==r){const l=Object.entries(m.OrnamentSetToIndex).find(c=>c[1]==s)[0];return o=k.getSetImage(l,m.Parts.PlanarSphere),i.jsx(g,{justify:"center",style:{marginTop:-1},children:i.jsx(li,{asset:o})})}else return""},anySet:e=>{if((e==null?void 0:e.value)==null)return"";const t=e.data.part,n=k.getSetImage(e.data.set,t);return i.jsx(g,{justify:"center",title:e.data.set,style:{marginTop:-1},children:i.jsx(li,{asset:n})})},characterIcon:e=>{if((e==null?void 0:e.value)==null)return"";const t=e.data.equippedBy;if(!t)return"";const n=k.getCharacterAvatarById(t);return i.jsx(g,{justify:"center",style:{marginTop:-1},children:i.jsx(li,{asset:n})})},readableStat:e=>(e==null?void 0:e.value)==null?"":w.t(`common:ShortReadableStats.${e.value}`),readablePart:e=>(e==null?void 0:e.value)==null?"":w.t(`common:ReadableParts.${e.value}`),partIcon:e=>(e==null?void 0:e.value)==null?"":i.jsx(g,{justify:"center",style:{marginTop:-1,width:20,marginBottom:3},children:i.jsx(li,{asset:k.getPart(e.value)})}),hideZeroesFloor:e=>e.value==0?"":""+Math.floor(e.value),hideZeroes10thsRelicTabSpd:e=>{if(e.value==0)return"";const t=F.precisionRound(Math.floor(e.value*10)/10);return e.data.verified?t.toFixed(1):t},mainValueRenderer:e=>{const t=e.data.part;return t==m.Parts.Hands||t==m.Parts.Head?e.value==0?"":fn(Math.floor(e.value)):e.value==0?"":F.truncate10ths(e.value).toLocaleString(wa())},hideZeroesX100Tenths:e=>e.value==0?"":K.x100Tenths(e),hideNaNAndFloor:e=>isNaN(e.value)?0:Math.floor(e.value),hideNaNAndFloorPercent:e=>(isNaN(e.value)?0:Math.floor(e.value))+"%",renderSubstatNumber:(e,t)=>e.stat==m.Stats.SPD?t.verified?Ct(F.truncate10ths(e.value)):Math.floor(e.value):F.isFlat(e.stat)?fn(Math.floor(e.value)):Ct(F.truncate10ths(e.value)),renderMainStatNumber:e=>F.isFlat(e.stat)?fn(Math.floor(e.value)):Ct(F.truncate10ths(e.value)),renderGradeCell:e=>{const t=e.data;return K.renderGrade(t)},renderGrade:e=>{const t=hS[e.grade]||"";return e.verified?i.jsx(Y0,{mouseEnterDelay:.4,title:w.t("common:VerifiedRelicHoverText"),children:i.jsx($s,{style:{fontSize:"14px",color:t}})}):i.jsx(g,{children:i.jsx("svg",{width:"14",height:"14",viewBox:"0 0 14 14",style:{display:"inline-block",verticalAlign:"middle"},children:i.jsx("circle",{cx:"7",cy:"7",r:"7",fill:t==""?"transparent":t})})})},renderEquippedBy:e=>e=="true"?i.jsx($s,{style:{fontSize:"14px",color:"#6de362"}}):i.jsx(Yr,{style:{fontSize:"14px",color:"#de5555"}})},hS={5:"#efb679",4:"#cc52f1",3:"#58beed",2:"#63e0ac",[-1]:"#bdbdbd"};function li(e){return e.asset?i.jsx(J0,{src:e.asset,width:32,preview:!1}):""}const bt=46,Ge=50,Go=52,Xe=56,Mo=62,Bt=5,ra=211,Ii=11,Tc={rowHeight:33,pagination:!0,rowModelType:"infinite",datasource:null,paginationPageSize:500,paginationPageSizeSelector:[100,500,1e3],cacheBlockSize:500,maxBlocksInCache:1,alwaysShowVerticalScroll:!0,suppressDragLeaveHidesColumns:!0,suppressScrollOnNewData:!0,suppressMultiSort:!0,getRowId:e=>String(e.data.id||F.randomId())},fS={cellStyle:be.getOptimizerColumnGradient,sortable:!0,sortingOrder:["desc","asc"],wrapHeaderText:!0,autoHeaderHeight:!0},it="ᴹ";function pS(e){return[{field:"relicSetIndex",cellRenderer:K.relicSet,width:72,headerName:e("Grid.Headers.Basic.Set")},{field:"ornamentSetIndex",cellRenderer:K.ornamentSet,width:42,headerName:e("Grid.Headers.Basic.Set")},{field:m.Stats.ATK,valueFormatter:K.floor,minWidth:Ge,flex:10,headerName:e("Grid.Headers.Basic.ATK"),cellStyle:be.getOptimizerColumnGradient},{field:m.Stats.DEF,valueFormatter:K.floor,minWidth:Ge,flex:10,headerName:e("Grid.Headers.Basic.DEF"),cellStyle:be.getOptimizerColumnGradient},{field:m.Stats.HP,valueFormatter:K.floor,minWidth:Ge,flex:10,headerName:e("Grid.Headers.Basic.HP"),cellStyle:be.getOptimizerColumnGradient},{field:m.Stats.SPD,valueFormatter:K.tenths,minWidth:Ge,flex:10,headerName:e("Grid.Headers.Basic.SPD"),cellStyle:be.getOptimizerColumnGradient},{field:m.Stats.CR,valueFormatter:K.x100Tenths,minWidth:Ge,flex:10,headerName:e("Grid.Headers.Basic.CR"),cellStyle:be.getOptimizerColumnGradient},{field:m.Stats.CD,valueFormatter:K.x100Tenths,minWidth:Ge,flex:10,headerName:e("Grid.Headers.Basic.CD"),cellStyle:be.getOptimizerColumnGradient},{field:m.Stats.EHR,valueFormatter:K.x100Tenths,minWidth:Ge,flex:10,headerName:e("Grid.Headers.Basic.EHR"),cellStyle:be.getOptimizerColumnGradient},{field:m.Stats.RES,valueFormatter:K.x100Tenths,minWidth:bt,flex:10,headerName:e("Grid.Headers.Basic.RES"),cellStyle:be.getOptimizerColumnGradient},{field:m.Stats.BE,valueFormatter:K.x100Tenths,minWidth:Ge,flex:10,headerName:e("Grid.Headers.Basic.BE"),cellStyle:be.getOptimizerColumnGradient},{field:m.Stats.OHB,valueFormatter:K.x100Tenths,minWidth:bt,flex:10,headerName:e("Grid.Headers.Basic.OHB")},{field:m.Stats.ERR,valueFormatter:K.x100Tenths,minWidth:bt,flex:10,headerName:e("Grid.Headers.Basic.ERR")},{field:"ED",valueFormatter:K.x100Tenths,minWidth:Ge,flex:10,headerName:e("Grid.Headers.Basic.DMG")},{field:"EHP",valueFormatter:K.floor,minWidth:Ge,flex:10,headerName:e("Grid.Headers.Basic.EHP")},{field:"HEAL",valueFormatter:K.floor,minWidth:bt,flex:10,headerName:e("Grid.Headers.Basic.HEAL")},{field:"SHIELD",valueFormatter:K.floor,minWidth:bt,flex:10,headerName:e("Grid.Headers.Basic.SHIELD")},{field:"WEIGHT",valueFormatter:K.floor,minWidth:Go,flex:10,headerName:e("Grid.Headers.Basic.WEIGHT")},{field:"BASIC",valueFormatter:K.floor,minWidth:Xe,flex:12,headerName:e("Grid.Headers.Basic.BASIC")},{field:"SKILL",valueFormatter:K.floor,minWidth:Xe,flex:12,headerName:e("Grid.Headers.Basic.SKILL")},{field:"ULT",valueFormatter:K.floor,minWidth:Xe,flex:12,headerName:e("Grid.Headers.Basic.ULT")},{field:"FUA",valueFormatter:K.floor,minWidth:Xe,flex:12,headerName:e("Grid.Headers.Basic.FUA")},{field:"MEMO_SKILL",valueFormatter:K.floor,minWidth:Xe,flex:12,headerName:e("Grid.Headers.Basic.MEMO_SKILL")},{field:"MEMO_TALENT",valueFormatter:K.floor,minWidth:Xe,flex:12,headerName:e("Grid.Headers.Basic.MEMO_TALENT")},{field:"DOT",valueFormatter:K.floor,minWidth:Xe,flex:12,headerName:e("Grid.Headers.Basic.DOT")},{field:"BREAK",valueFormatter:K.floor,minWidth:Ge,flex:12,headerName:e("Grid.Headers.Basic.BREAK")},{field:"COMBO",valueFormatter:K.floor,minWidth:Mo,flex:13,headerName:e("Grid.Headers.Basic.COMBO")}]}function gS(e){return[{field:"relicSetIndex",cellRenderer:K.relicSet,width:72,headerName:e("Grid.Headers.Basic.Set")},{field:"ornamentSetIndex",cellRenderer:K.ornamentSet,width:42,headerName:e("Grid.Headers.Basic.Set")},{field:"mATK",valueFormatter:K.floor,minWidth:Ge,flex:10,headerName:e("Grid.Headers.Basic.ATK")+it,cellStyle:be.getOptimizerColumnGradient},{field:"mDEF",valueFormatter:K.floor,minWidth:Ge,flex:10,headerName:e("Grid.Headers.Basic.DEF")+it,cellStyle:be.getOptimizerColumnGradient},{field:"mHP",valueFormatter:K.floor,minWidth:Ge,flex:10,headerName:e("Grid.Headers.Basic.HP")+it,cellStyle:be.getOptimizerColumnGradient},{field:"mSPD",valueFormatter:K.tenths,minWidth:Ge,flex:10,headerName:e("Grid.Headers.Basic.SPD")+it,cellStyle:be.getOptimizerColumnGradient},{field:"mCR",valueFormatter:K.x100Tenths,minWidth:Ge,flex:10,headerName:e("Grid.Headers.Basic.CR")+it,cellStyle:be.getOptimizerColumnGradient},{field:"mCD",valueFormatter:K.x100Tenths,minWidth:Ge,flex:10,headerName:e("Grid.Headers.Basic.CD")+it,cellStyle:be.getOptimizerColumnGradient},{field:"mEHR",valueFormatter:K.x100Tenths,minWidth:Ge,flex:10,headerName:e("Grid.Headers.Basic.EHR")+it,cellStyle:be.getOptimizerColumnGradient},{field:"mRES",valueFormatter:K.x100Tenths,minWidth:bt,flex:10,headerName:e("Grid.Headers.Basic.RES")+it,cellStyle:be.getOptimizerColumnGradient},{field:"mBE",valueFormatter:K.x100Tenths,minWidth:Ge,flex:10,headerName:e("Grid.Headers.Basic.BE")+it,cellStyle:be.getOptimizerColumnGradient},{field:"mOHB",valueFormatter:K.x100Tenths,minWidth:bt,flex:10,headerName:e("Grid.Headers.Basic.OHB")+it},{field:"mERR",valueFormatter:K.x100Tenths,minWidth:bt,flex:10,headerName:e("Grid.Headers.Basic.ERR")+it},{field:"mELEMENTAL_DMG",valueFormatter:K.x100Tenths,minWidth:Ge,flex:10,headerName:e("Grid.Headers.Basic.DMG")+it},{field:"mxEHP",valueFormatter:K.floor,minWidth:Ge,flex:10,headerName:e("Grid.Headers.Basic.EHP")},{field:"HEAL",valueFormatter:K.floor,minWidth:bt,flex:10,headerName:e("Grid.Headers.Basic.HEAL")},{field:"SHIELD",valueFormatter:K.floor,minWidth:bt,flex:10,headerName:e("Grid.Headers.Basic.SHIELD")},{field:"WEIGHT",valueFormatter:K.floor,minWidth:Go,flex:10,headerName:e("Grid.Headers.Basic.WEIGHT")},{field:"BASIC",valueFormatter:K.floor,minWidth:Xe,flex:12,headerName:e("Grid.Headers.Basic.BASIC")},{field:"SKILL",valueFormatter:K.floor,minWidth:Xe,flex:12,headerName:e("Grid.Headers.Basic.SKILL")},{field:"ULT",valueFormatter:K.floor,minWidth:Xe,flex:12,headerName:e("Grid.Headers.Basic.ULT")},{field:"FUA",valueFormatter:K.floor,minWidth:Xe,flex:12,headerName:e("Grid.Headers.Basic.FUA")},{field:"MEMO_SKILL",valueFormatter:K.floor,minWidth:Xe,flex:12,headerName:e("Grid.Headers.Basic.MEMO_SKILL")},{field:"MEMO_TALENT",valueFormatter:K.floor,minWidth:Xe,flex:12,headerName:e("Grid.Headers.Basic.MEMO_TALENT")},{field:"DOT",valueFormatter:K.floor,minWidth:Xe,flex:12,headerName:e("Grid.Headers.Basic.DOT")},{field:"BREAK",valueFormatter:K.floor,minWidth:Ge,flex:12,headerName:e("Grid.Headers.Basic.BREAK")},{field:"COMBO",valueFormatter:K.floor,minWidth:Mo,flex:13,headerName:e("Grid.Headers.Basic.COMBO")}]}function SS(e){return[{field:"relicSetIndex",cellRenderer:K.relicSet,width:72,headerName:e("Grid.Headers.Combat.Set")},{field:"ornamentSetIndex",cellRenderer:K.ornamentSet,width:42,headerName:e("Grid.Headers.Combat.Set")},{field:"xATK",valueFormatter:K.floor,minWidth:Ge,flex:10,cellStyle:be.getOptimizerColumnGradient,headerName:e("Grid.Headers.Combat.ATK")},{field:"xDEF",valueFormatter:K.floor,minWidth:Ge,flex:10,cellStyle:be.getOptimizerColumnGradient,headerName:e("Grid.Headers.Combat.DEF")},{field:"xHP",valueFormatter:K.floor,minWidth:Ge,flex:10,cellStyle:be.getOptimizerColumnGradient,headerName:e("Grid.Headers.Combat.HP")},{field:"xSPD",valueFormatter:K.tenths,minWidth:Ge,flex:10,cellStyle:be.getOptimizerColumnGradient,headerName:e("Grid.Headers.Combat.SPD")},{field:"xCR",valueFormatter:K.x100Tenths,minWidth:Ge,flex:10,cellStyle:be.getOptimizerColumnGradient,headerName:e("Grid.Headers.Combat.CR")},{field:"xCD",valueFormatter:K.x100Tenths,minWidth:Ge,flex:10,cellStyle:be.getOptimizerColumnGradient,headerName:e("Grid.Headers.Combat.CD")},{field:"xEHR",valueFormatter:K.x100Tenths,minWidth:Ge,flex:10,cellStyle:be.getOptimizerColumnGradient,headerName:e("Grid.Headers.Combat.EHR")},{field:"xRES",valueFormatter:K.x100Tenths,minWidth:bt,flex:10,cellStyle:be.getOptimizerColumnGradient,headerName:e("Grid.Headers.Combat.RES")},{field:"xBE",valueFormatter:K.x100Tenths,minWidth:Ge,flex:10,cellStyle:be.getOptimizerColumnGradient,headerName:e("Grid.Headers.Combat.BE")},{field:"xOHB",valueFormatter:K.x100Tenths,minWidth:bt,flex:10,headerName:e("Grid.Headers.Combat.OHB")},{field:"xERR",valueFormatter:K.x100Tenths,minWidth:bt,flex:10,headerName:e("Grid.Headers.Combat.ERR")},{field:"xELEMENTAL_DMG",valueFormatter:K.x100Tenths,minWidth:Ge,flex:10,headerName:e("Grid.Headers.Combat.DMG")},{field:"EHP",valueFormatter:K.floor,minWidth:Ge,flex:10,headerName:e("Grid.Headers.Combat.EHP")},{field:"HEAL",valueFormatter:K.floor,minWidth:bt,flex:10,headerName:e("Grid.Headers.Combat.HEAL")},{field:"SHIELD",valueFormatter:K.floor,minWidth:bt,flex:10,headerName:e("Grid.Headers.Combat.SHIELD")},{field:"WEIGHT",valueFormatter:K.floor,minWidth:Go,flex:10,headerName:e("Grid.Headers.Combat.WEIGHT")},{field:"BASIC",valueFormatter:K.floor,minWidth:Xe,flex:12,headerName:e("Grid.Headers.Combat.BASIC")},{field:"SKILL",valueFormatter:K.floor,minWidth:Xe,flex:12,headerName:e("Grid.Headers.Combat.SKILL")},{field:"ULT",valueFormatter:K.floor,minWidth:Xe,flex:12,headerName:e("Grid.Headers.Combat.ULT")},{field:"FUA",valueFormatter:K.floor,minWidth:Xe,flex:12,headerName:e("Grid.Headers.Combat.FUA")},{field:"MEMO_SKILL",valueFormatter:K.floor,minWidth:Xe,flex:12,headerName:e("Grid.Headers.Combat.MEMO_SKILL")},{field:"MEMO_TALENT",valueFormatter:K.floor,minWidth:Xe,flex:12,headerName:e("Grid.Headers.Combat.MEMO_TALENT")},{field:"DOT",valueFormatter:K.floor,minWidth:Xe,flex:12,headerName:e("Grid.Headers.Combat.DOT")},{field:"BREAK",valueFormatter:K.floor,minWidth:Ge,flex:12,headerName:e("Grid.Headers.Combat.BREAK")},{field:"COMBO",valueFormatter:K.floor,minWidth:Mo,flex:13,headerName:e("Grid.Headers.Combat.COMBO")}]}function bS(e){return[{field:"relicSetIndex",cellRenderer:K.relicSet,width:72,headerName:e("Grid.Headers.Combat.Set")},{field:"ornamentSetIndex",cellRenderer:K.ornamentSet,width:42,headerName:e("Grid.Headers.Combat.Set")},{field:"mxATK",valueFormatter:K.floor,minWidth:Ge,flex:10,cellStyle:be.getOptimizerColumnGradient,headerName:e("Grid.Headers.Combat.ATK")+it},{field:"mxDEF",valueFormatter:K.floor,minWidth:Ge,flex:10,cellStyle:be.getOptimizerColumnGradient,headerName:e("Grid.Headers.Combat.DEF")+it},{field:"mxHP",valueFormatter:K.floor,minWidth:Ge,flex:10,cellStyle:be.getOptimizerColumnGradient,headerName:e("Grid.Headers.Combat.HP")+it},{field:"mxSPD",valueFormatter:K.tenths,minWidth:Ge,flex:10,cellStyle:be.getOptimizerColumnGradient,headerName:e("Grid.Headers.Combat.SPD")+it},{field:"mxCR",valueFormatter:K.x100Tenths,minWidth:Ge,flex:10,cellStyle:be.getOptimizerColumnGradient,headerName:e("Grid.Headers.Combat.CR")+it},{field:"mxCD",valueFormatter:K.x100Tenths,minWidth:Ge,flex:10,cellStyle:be.getOptimizerColumnGradient,headerName:e("Grid.Headers.Combat.CD")+it},{field:"mxEHR",valueFormatter:K.x100Tenths,minWidth:Ge,flex:10,cellStyle:be.getOptimizerColumnGradient,headerName:e("Grid.Headers.Combat.EHR")+it},{field:"mxRES",valueFormatter:K.x100Tenths,minWidth:bt,flex:10,cellStyle:be.getOptimizerColumnGradient,headerName:e("Grid.Headers.Combat.RES")+it},{field:"mxBE",valueFormatter:K.x100Tenths,minWidth:Ge,flex:10,cellStyle:be.getOptimizerColumnGradient,headerName:e("Grid.Headers.Combat.BE")+it},{field:"mxOHB",valueFormatter:K.x100Tenths,minWidth:bt,flex:10,headerName:e("Grid.Headers.Combat.OHB")+it},{field:"mxERR",valueFormatter:K.x100Tenths,minWidth:bt,flex:10,headerName:e("Grid.Headers.Combat.ERR")+it},{field:"mxELEMENTAL_DMG",valueFormatter:K.x100Tenths,minWidth:Ge,flex:10,headerName:e("Grid.Headers.Combat.DMG")+it},{field:"mxEHP",valueFormatter:K.floor,minWidth:Ge,flex:10,headerName:e("Grid.Headers.Combat.EHP")},{field:"HEAL",valueFormatter:K.floor,minWidth:bt,flex:10,headerName:e("Grid.Headers.Combat.HEAL")},{field:"SHIELD",valueFormatter:K.floor,minWidth:bt,flex:10,headerName:e("Grid.Headers.Combat.SHIELD")},{field:"WEIGHT",valueFormatter:K.floor,minWidth:Go,flex:10,headerName:e("Grid.Headers.Combat.WEIGHT")},{field:"BASIC",valueFormatter:K.floor,minWidth:Xe,flex:12,headerName:e("Grid.Headers.Combat.BASIC")},{field:"SKILL",valueFormatter:K.floor,minWidth:Xe,flex:12,headerName:e("Grid.Headers.Combat.SKILL")},{field:"ULT",valueFormatter:K.floor,minWidth:Xe,flex:12,headerName:e("Grid.Headers.Combat.ULT")},{field:"FUA",valueFormatter:K.floor,minWidth:Xe,flex:12,headerName:e("Grid.Headers.Combat.FUA")},{field:"MEMO_SKILL",valueFormatter:K.floor,minWidth:Xe,flex:12,headerName:e("Grid.Headers.Combat.MEMO_SKILL")},{field:"MEMO_TALENT",valueFormatter:K.floor,minWidth:Xe,flex:12,headerName:e("Grid.Headers.Combat.MEMO_TALENT")},{field:"DOT",valueFormatter:K.floor,minWidth:Xe,flex:12,headerName:e("Grid.Headers.Combat.DOT")},{field:"BREAK",valueFormatter:K.floor,minWidth:Ge,flex:12,headerName:e("Grid.Headers.Combat.BREAK")},{field:"COMBO",valueFormatter:K.floor,minWidth:Mo,flex:13,headerName:e("Grid.Headers.Combat.COMBO")}]}const DS=()=>{const{t:e}=V("optimizerTab",{keyPrefix:"AdvancedOptions"}),t=window.store(c=>c.setCombatBuffsDrawerOpen),n=window.store(c=>c.setEnemyConfigurationsDrawerOpen),o=window.store(c=>c.setStatTracesDrawerOpen),s=window.store(c=>c.setStatTracesDrawerFocusCharacter),r=N.useWatch(c=>c.combatBuffs,window.optimizerForm),l=I.useMemo(()=>r?Object.values(r).filter(c=>c!=null).length:0,[r]);return i.jsxs(g,{vertical:!0,gap:Bt,children:[i.jsx($,{style:{marginTop:25},children:e("Header")}),i.jsx(Y,{onClick:()=>{o(!0),s(window.store.getState().optimizerTabFocusCharacter)},icon:i.jsx(Ga,{}),children:e("CustomTracesButtonText")}),i.jsx(Y,{onClick:()=>t(!0),icon:i.jsx(Ga,{}),children:l?e("CombatBuffsButtonText",{activeCount:l}):e("CombatBuffsButtonTextNone")}),i.jsx(Y,{onClick:()=>n(!0),icon:i.jsx(Ga,{}),children:e("EnemyConfigButtonText")})]})};function ru(){const e=w.getFixedT(null,"gameData","Characters"),t=C.clone(B.getMetadata().characters);for(const n of Object.values(t))n.value=n.id,n.label=e(`${n.id}.LongName`);return Object.values(t).sort((n,o)=>n.label.localeCompare(o.label,wa()))}function RS(e){const t=w.getFixedT(null,"gameData","Lightcones"),n=C.clone(B.getMetadata().lightCones);let o=null;for(const s of Object.values(n))s.value=s.id,s.label=t(`${s.id}.Name`);return Object.values(n).filter(s=>!o).sort((s,r)=>s.label.localeCompare(r.label,wa()))}const{useToken:ES}=Ft,{Paragraph:CS}=Ce,TS=100,yS=150,lu=e=>i.jsxs("div",{children:[i.jsx("img",{width:e.innerW,src:e.imgSrc,style:{transform:`translate(${(e.innerW-TS)/2/e.innerW*-100}%, ${(e.innerH-yS)/2/e.innerH*-100}%)`}}),i.jsx(CS,{ellipsis:{rows:e.rows},style:{position:"absolute",bottom:0,left:0,width:"110%",textAlign:"center",background:"#282B31",color:"#D0D0D2",marginLeft:"-5%",paddingLeft:10,paddingRight:10,lineHeight:"16px",height:18*e.rows,alignItems:"center",marginBottom:0,fontSize:13},children:i.jsx("div",{style:{position:"relative",top:"50%",transform:"translateY(-50%)",maxHeight:18*e.rows,textOverflow:"ellipsis",overflow:"hidden"},children:e.text})})]});function Cl(){return Object.keys(Oi).map(e=>({key:e,display:i.jsx("img",{style:{width:32},src:k.getPath(e)})}))}function PS(){return[5,4,3].map(e=>{const t=[];for(let n=0;n<e;n++)t.push(i.jsx("img",{style:{width:16},src:k.getStar()},n));return{key:e,display:i.jsx(g,{flex:1,justify:"center",align:"center",style:{marginTop:1},children:t})}})}function cu(){return Object.keys(ei).map(e=>({key:e,display:i.jsx("img",{style:{width:30},src:k.getElement(e)})}))}function Ai(e){const{token:t}=ES(),{currentFilters:n,name:o,flexBasis:s,tags:r,setCurrentFilters:l}=e,c=n[o],d=(u,h)=>{const p=h?[...c,u]:c.filter(D=>D!=u),S=C.clone(n);S[o]=p,console.log("filters",o,S),l(S)};return i.jsx(g,{style:{flexWrap:"wrap",flexGrow:1,backgroundColor:t.colorBgContainer,boxShadow:`0px 0px 0px 1px ${t.colorBorder} inset`,borderRadius:6,overflow:"hidden",height:40},children:r.map(u=>i.jsx(Q0,{checked:hn(c,u.key),onChange:h=>d(u.key,h),style:{flex:1,flexBasis:s,boxShadow:`1px 1px 1px 0px ${t.colorBorder}`,backgroundColor:hn(c,u.key)?t.colorPrimary:"transparent"},children:i.jsx(g,{align:"center",justify:"space-around",style:{height:"100%"},children:u.display})},u.key))})}const IS=100,BS=150,GS=150,MS=170,xS="linear-gradient(#8A6700 0px, #D6A100 63px, #D6A100 130px, #282B31 130px, #282B31 150px)",vS="linear-gradient(#5F388C 0px, #9F6CD9 63px, #9F6CD9 130px, #282B31 130px, #282B31 150px)",yc={rarity:[],path:[],element:[],name:""},Li=({value:e,onChange:t,selectStyle:n,multipleSelect:o,withIcon:s,externalOpen:r,setExternalOpen:l})=>{const c=I.useRef(null),{t:d}=V("modals",{keyPrefix:"CharacterSelect"}),[u,h]=I.useState(!1),[p,S]=I.useState(F.clone(yc)),D=I.useMemo(()=>ru(),[d]),[E,y]=I.useState(new Map),P=window.store(Z=>Z.excludedRelicPotentialCharacters),_=[];for(const Z of D)_.push({value:Z.value,label:i.jsxs(g,{gap:5,align:"center",children:[i.jsx("img",{src:k.getCharacterAvatarById(Z.value),style:{height:22,marginRight:4}}),Z.label]})});I.useEffect(()=>{if((u||r)&&(setTimeout(()=>{var Z;return(Z=c==null?void 0:c.current)==null?void 0:Z.focus()},100),o)){const Z=new Map(P.map(X=>[X,!0]));y(Z)}},[u,r]);function x(Z){return!(p.element.length&&!p.element.includes(Z.element)||p.path.length&&!p.path.includes(Z.path)||!Z.label.toLowerCase().includes(p.name))}const G=Z=>{o?(E.set(Z,!E.get(Z)),y(new Map(E))):(h(!1),l&&l(!1),t&&t(Z))},M=()=>{const Z=new Map(E);D.filter(x).forEach(X=>Z.set(X.id,!0)),y(Z)},H=()=>{const Z=new Map(E);D.filter(x).forEach(X=>Z.delete(X.id)),y(Z)};return i.jsxs(i.Fragment,{children:[i.jsx(z,{style:n,value:e,options:s?_:D,placeholder:d(o?"MultiSelect.Placeholder":"SingleSelect.Placeholder"),allowClear:!0,maxTagCount:0,maxTagPlaceholder:()=>i.jsx("span",{children:P.length?d("MultiSelect.MaxTagPlaceholderSome",{count:P.length}):d("MultiSelect.MaxTagPlaceholderNone")}),onClear:()=>{t&&t(null)},onDropdownVisibleChange:Z=>{Z&&(h(!0),S(F.clone(yc)))},dropdownStyle:{display:"none"},suffixIcon:null,mode:o?"multiple":void 0}),i.jsx(_t,{open:u||r,centered:!0,destroyOnClose:!0,width:"90%",style:{height:"80%",maxWidth:1450},title:d(o?"MultiSelect.ModalTitle":"SingleSelect.ModalTitle"),onCancel:()=>{o&&t&&t(E),h(!1),l&&l(!1)},footer:null,children:i.jsxs(g,{vertical:!0,gap:12,style:{minWidth:350},children:[i.jsxs(g,{gap:12,wrap:"wrap",children:[i.jsxs(g,{wrap:"nowrap",style:{flexGrow:1},gap:10,children:[i.jsx(Kt,{size:"large",style:{height:40,flex:1},placeholder:d("SearchPlaceholder"),ref:c,onChange:Z=>{const X=F.clone(p);X.name=Z.target.value.toLowerCase(),S(X)},onPressEnter:()=>{const Z=D.filter(x)[0];Z&&G(Z.id)}}),o&&i.jsxs(g,{gap:12,children:[i.jsx(Y,{onClick:M,style:{height:"100%",width:120},children:d("ExcludeButton")}),i.jsx(Y,{onClick:H,style:{height:"100%",width:120},children:d("ClearButton")})]})]}),i.jsxs(g,{wrap:"wrap",style:{minWidth:350,flexGrow:1},gap:12,children:[i.jsx(g,{wrap:"wrap",style:{minWidth:350,flexGrow:1},children:i.jsx(Ai,{name:"element",tags:cu(),flexBasis:"14.2%",currentFilters:p,setCurrentFilters:S})}),i.jsx(g,{wrap:"wrap",style:{minWidth:350,flexGrow:1},children:i.jsx(Ai,{name:"path",tags:Cl(),flexBasis:"12.5%",currentFilters:p,setCurrentFilters:S})})]})]}),i.jsx("div",{style:{display:"grid",gridTemplateColumns:`repeat(auto-fill, minmax(${IS}px, 1fr))`,gridGap:8},children:D.sort(F.sortRarityDesc).filter(x).map(Z=>i.jsx(Yn,{hoverable:!0,style:{background:Z.rarity===5?xS:vS,overflow:"hidden",height:`${BS}px`,...E.get(Z.id)?{opacity:.25,background:"grey"}:{}},styles:{body:{padding:1}},onMouseDown:()=>G(Z.id),children:i.jsx(lu,{imgSrc:k.getCharacterPreviewById(Z.id),text:Z.label,innerW:GS,innerH:MS,rows:1})},Z.id))})]})})]})},_S="linear-gradient(#8A6700 0px, #D6A100 63px, #D6A100 112px, #282B31 112px, #282B31 150px)",AS="linear-gradient(#5F388C 0px, #9F6CD9 63px, #9F6CD9 112px, #282B31 112px, #282B31 150px)",LS="linear-gradient(#2d4cc5 0px, #4A85C8 63px, #4A85C8 112px, #282B31 112px, #282B31 150px)",FS={5:_S,4:AS,3:LS},HS=100,wS=150,OS=115,kS=150,Tl=({characterId:e,value:t,onChange:n,selectStyle:o,initialPath:s,withIcon:r,externalOpen:l,setExternalOpen:c})=>{const d=B.getMetadata(),[u,h]=I.useState(!1),{t:p}=V("modals",{keyPrefix:"LightconeSelect"}),S=I.useMemo(()=>({rarity:[],path:s??(e?[d.characters[e].path]:[]),name:""}),[e,s]),D=I.useRef(null),[E,y]=I.useState(F.clone(S)),P=I.useMemo(()=>RS(),[p]),_=I.useMemo(()=>{const M=[];for(const H of P)M.push({value:H.value,label:i.jsxs(g,{gap:5,align:"center",children:[i.jsx("img",{src:k.getPath(d.lightCones[H.value].path),style:{height:22,marginRight:4}}),H.label]})});return M},[P]);I.useEffect(()=>{(u||l)&&setTimeout(()=>{var M;return(M=D==null?void 0:D.current)==null?void 0:M.focus()},100)},[u,l]);function x(M){return!(E.rarity.length&&!E.rarity.includes(M.rarity)||E.path.length&&!E.path.includes(M.path)||!M.name.toLowerCase().includes(E.name))}const G=M=>{h(!1),c&&c(!1),n&&n(M)};return i.jsxs(i.Fragment,{children:[i.jsx(z,{style:o,value:t,options:r?_:P,placeholder:p("Placeholder"),allowClear:!0,onClear:()=>{n&&n(null)},onDropdownVisibleChange:M=>{M&&(h(!0),y(F.clone(S)))},dropdownStyle:{display:"none"},suffixIcon:null}),i.jsx(_t,{open:u||l,centered:!0,width:"90%",style:{height:"70%",maxWidth:1200},destroyOnClose:!0,title:p("Title"),onCancel:()=>{h(!1),c&&c(!1)},footer:null,children:i.jsxs(g,{vertical:!0,gap:12,children:[i.jsxs(g,{gap:12,wrap:"wrap",children:[i.jsx(g,{vertical:!0,wrap:"wrap",style:{minWidth:300,flexGrow:1},children:i.jsx(Kt,{size:"large",style:{height:40},placeholder:p("Placeholder"),ref:D,onChange:M=>{const H=F.clone(E);H.name=M.target.value.toLowerCase(),y(H)},onPressEnter:()=>{const M=P.filter(x)[0];M&&G(M.id)}})}),i.jsxs(g,{wrap:"wrap",style:{flexGrow:1},gap:12,children:[i.jsx(g,{wrap:"wrap",style:{minWidth:350,flexGrow:1},children:i.jsx(Ai,{name:"path",tags:Cl(),flexBasis:"12.5%",currentFilters:E,setCurrentFilters:y})}),i.jsx(g,{wrap:"wrap",style:{minWidth:350,flexGrow:1},children:i.jsx(Ai,{name:"rarity",tags:PS(),flexBasis:"14.2%",currentFilters:E,setCurrentFilters:y})})]})]}),i.jsx("div",{style:{display:"grid",gridTemplateColumns:`repeat(auto-fill, minmax(${HS}px, 1fr))`,gridGap:8},children:P.sort(F.sortRarityDesc).filter(x).map(M=>i.jsx(Yn,{hoverable:!0,style:{background:FS[M.rarity],overflow:"hidden",height:`${wS}px`},onMouseDown:()=>G(M.id),styles:{body:{padding:1}},children:i.jsx(lu,{imgSrc:k.getLightConeIconById(M.id),text:M.label,innerW:OS,innerH:kS,rows:2})},M.id))})]})})]})};function KS(){const{t:e}=V(["optimizerTab","common"]),t=window.store(S=>S.optimizerTabFocusCharacter),n=window.store(S=>S.setOptimizerTabFocusCharacter),o=window.store(S=>S.setOptimizerFormCharacterEidolon),s=window.store(S=>S.setOptimizerFormSelectedLightCone),r=window.store(S=>S.setOptimizerFormSelectedLightConeSuperimposition),l=window.store(S=>S.optimizerTabFocusCharacterSelectModalOpen),c=window.store(S=>S.setOptimizerTabFocusCharacterSelectModalOpen);I.useEffect(()=>{se.updateCharacter(t)},[t]);const d=I.useMemo(()=>{const S=[];for(let D=0;D<=6;D++)S.push({value:D,label:e("common:EidolonNShort",{eidolon:D})});return S},[e]),u=I.useMemo(()=>{const S=[];for(let D=1;D<=5;D++)S.push({value:D,label:e("common:SuperimpositionNShort",{superimposition:D})});return S},[e]),h=I.useMemo(()=>{const S=[];for(let D=64;D<=65536;D=D*2)S.push({value:D,label:e("ResultLimitN",{limit:D})});return S},[e]),p=I.useMemo(()=>[{label:e("SortOptions.DMGLabel"),options:[{value:T.COMBO.key,label:e("SortOptions.COMBO")},{value:T.BASIC.key,label:e("SortOptions.BASIC")},{value:T.SKILL.key,label:e("SortOptions.SKILL")},{value:T.ULT.key,label:e("SortOptions.ULT")},{value:T.FUA.key,label:e("SortOptions.FUA")},{value:T.MEMO_SKILL.key,label:e("SortOptions.MEMO_SKILL")},{value:T.MEMO_TALENT.key,label:e("SortOptions.MEMO_TALENT")},{value:T.DOT.key,label:e("SortOptions.DOT")},{value:T.BREAK.key,label:e("SortOptions.BREAK")},{value:T.HEAL.key,label:e("SortOptions.HEAL")},{value:T.SHIELD.key,label:e("SortOptions.SHIELD")}]},{label:e("SortOptions.StatLabel"),options:[{value:T.HP.key,label:e("SortOptions.HP")},{value:T.ATK.key,label:e("SortOptions.ATK")},{value:T.DEF.key,label:e("SortOptions.DEF")},{value:T.SPD.key,label:e("SortOptions.SPD")},{value:T.CR.key,label:e("SortOptions.CR")},{value:T.CD.key,label:e("SortOptions.CD")},{value:T.EHR.key,label:e("SortOptions.EHR")},{value:T.RES.key,label:e("SortOptions.RES")},{value:T.BE.key,label:e("SortOptions.BE")},{value:T.OHB.key,label:e("SortOptions.OHB")},{value:T.ERR.key,label:e("SortOptions.ERR")},{value:T.ELEMENTAL_DMG.key,label:e("SortOptions.DMG")},{value:T.EHP.key,label:e("SortOptions.EHP")}]}],[e]);return i.jsxs(g,{vertical:!0,gap:Bt,children:[i.jsxs(g,{justify:"space-between",align:"center",children:[i.jsx($,{children:e("CharacterSelector.Character")}),i.jsx(ft,{type:ut.character()})]}),i.jsxs(g,{gap:Bt,children:[i.jsx(N.Item,{name:"characterId",children:i.jsx(Li,{value:"",selectStyle:{width:151},onChange:n,externalOpen:l,setExternalOpen:c})}),i.jsx(N.Item,{name:"characterEidolon",children:i.jsx(z,{showSearch:!0,style:{width:55},options:d,onChange:o,placeholder:e("CharacterSelector.EidolonPlaceholder"),popupMatchSelectWidth:55,suffixIcon:null})})]}),i.jsxs(g,{justify:"space-between",align:"center",children:[i.jsx($,{children:e("CharacterSelector.Lightcone")}),i.jsx(ft,{type:ut.lightCone()})]}),i.jsx(g,{vertical:!0,gap:Bt,children:i.jsxs(g,{gap:Bt,children:[i.jsx(N.Item,{name:"lightCone",children:i.jsx(Tl,{value:"",selectStyle:{width:151},characterId:t,onChange:s})}),i.jsx(N.Item,{name:"lightConeSuperimposition",children:i.jsx(z,{showSearch:!0,style:{width:55},onChange:r,options:u,placeholder:e("CharacterSelector.SuperimpositionPlaceholder"),popupMatchSelectWidth:55,suffixIcon:null})})]})}),i.jsx(g,{justify:"space-between",align:"center",style:{marginTop:30},children:i.jsx($,{children:e("CharacterSelector.Presets")})}),i.jsx(BD,{}),i.jsx(g,{justify:"space-between",align:"center",style:{marginTop:30},children:i.jsx($,{children:e("CharacterSelector.Target")})}),i.jsx(N.Item,{name:"resultsLimit",children:i.jsx(z,{showSearch:!0,style:{width:ra},options:h,placeholder:e("CharacterSelector.ResultsPlaceholder"),listHeight:800})}),i.jsx(N.Item,{name:"resultSort",children:i.jsx(z,{showSearch:!0,style:{width:ra},options:p,listHeight:900,popupMatchSelectWidth:250,placeholder:e("CharacterSelector.TargetPlaceholder"),filterOption:F.labelFilterOption})})]})}const Ve=22,$e=8,Ds=280*3+$e*2,Ua=198*2+$e,jS=1024,WS=240,ZS=280,du=250,NS=1260/902*du,VS=240,so=Lt($t)`
    width: 60px
`,{Text:zS}=Ce,US=()=>{const{t:e}=V("optimizerTab",{keyPrefix:"CombatBuffs"}),t=window.store(s=>s.combatBuffsDrawerOpen),n=window.store(s=>s.setCombatBuffsDrawerOpen),o=I.useMemo(()=>Object.values(yo).map(s=>i.jsx(XS,{title:e(`${s.key}`),name:s.key},s.key)),[e]);return i.jsx(Jn,{title:e("Title"),placement:"right",onClose:()=>n(!1),open:t,width:300,forceRender:!0,children:i.jsx(g,{vertical:!0,gap:$e,children:i.jsx(g,{vertical:!0,gap:Bt,children:o})})})};function XS(e){return i.jsxs(g,{justify:"space-between",children:[i.jsx(zS,{children:e.title}),i.jsx(N.Item,{name:["combatBuffs",e.name],children:i.jsx(so,{size:"small",controls:!1})})]})}function YS(){const e=window.scrollY;document.body.style.position="fixed",document.body.style.top=`-${e}px`,document.body.style.width="100%"}function JS(){const e=parseInt(document.body.style.top||"0")*-1;document.body.style.position="",document.body.style.top="",document.body.style.width="",window.scrollTo(0,e)}function rs(e){const{value:t,label:n,closable:o,onClose:s}=e,r=typeof n=="string"?n.replace(/[^0-9+]/g,""):null;return t?i.jsx(Bi,{closable:o,onClose:s,style:{display:"flex",flexDirection:"row",paddingInline:"1px",marginInlineEnd:"4px",height:21,alignItems:"center",overflow:"hidden"},children:i.jsx(g,{children:i.jsx("img",{title:t,src:k.getSetImage(t,m.Parts.PlanarSphere),style:{width:24,height:24}})})}):i.jsx(Bi,{closable:o,onClose:s,children:i.jsx(g,{children:r})})}const yl=()=>Object.values(qn).filter(e=>!Gi[e]).map(e=>({value:e,label:i.jsxs(g,{gap:5,align:"center",children:[i.jsx("img",{src:k.getSetImage(e,m.Parts.PlanarSphere),style:{width:21,height:21}}),i.jsx("div",{style:{display:"inline-block",overflow:"hidden",textOverflow:"ellipsis",width:250,whiteSpace:"nowrap"},children:w.t(`common:RelicSets.${rt[e]}.Name`)})]})})),QS=()=>{const e=w.getFixedT(null,"optimizerTab","RelicSetSelector"),t=w.getFixedT(null,"gameData","RelicSets"),n=[{value:pa.relic4Piece,label:e("4pcLabel"),children:[]},{value:pa.relic2Plus2Piece,label:e("2+2pcLabel"),children:[]},{value:pa.relic2PlusAny,label:e("2pcLabel"),children:[]}],o=Object.entries(m.SetsRelics).filter(r=>!Gi[r[1]]).map(r=>({value:r[1],label:r[1]})),s=(r,l,c)=>{const d=r=="Any"?k.getBlank():k.getSetImage(r,m.Parts.Head);return i.jsxs(g,{gap:5,align:"center",children:[i.jsx("img",{src:d,style:{width:26,height:26}}),i.jsx("div",{style:{display:"inline-block",overflow:"hidden",textOverflow:"ellipsis",width:250,whiteSpace:"nowrap"},children:l+c})]})};for(const r of Object.entries(m.SetsRelics).filter(l=>!Gi[l[1]]))n[0].children.push({value:r[1],label:s(r[1],"(4) ",t(`${rt[r[1]]}.Name`))}),n[1].children.push({value:r[1],label:s(r[1],"(2) ",t(`${rt[r[1]]}.Name`)),children:o.map(l=>({value:l.value,label:s(l.value,"(2) ",t(`${rt[l.label]}.Name`))}))}),n[2].children.push({value:r[1],label:s(r[1],"(2) ",t(`${rt[r[1]]}.Name`))});return n},_r=()=>{const e=w.getFixedT(null,"gameData","RelicSets");return Object.values(m.SetsRelics).filter(t=>!Gi[t]).map(t=>({value:t,label:i.jsxs(g,{gap:5,align:"center",children:[i.jsx("img",{src:k.getSetImage(t,m.Parts.Head),style:{width:21,height:21}}),i.jsx("div",{style:{display:"inline-block",overflow:"hidden",textOverflow:"ellipsis",width:250,whiteSpace:"nowrap"},children:e(`${rt[t]}.Name`)})]})}))};function At(e){return i.jsx("a",{href:e.url,target:"_blank",onClick:e.onClick,rel:"noreferrer",children:i.jsxs("span",{style:{display:"inline-flex",gap:"4px",alignItems:"center",textDecoration:e.noUnderline?"":"underline",color:"#91bfff"},children:[e.text,e.linkIcon&&i.jsx($0,{}),e.externalIcon&&i.jsx(q0,{})]})})}const oo={fontSize:20};function $S(){const e=window.store(c=>c.comboDrawerOpen),t=window.store(c=>c.setComboDrawerOpen),n=window.store(c=>c.formValues),o=window.store(c=>c.comboState),s=window.store(c=>c.setComboState),r=I.useRef(!0),l=I.useRef(void 0);return I.useEffect(()=>{if(e){YS();const c=se.getForm();if(!(c!=null&&c.characterId)||!c.characterConditionals)return;const d=ao(c,!0);s(d)}else JS(),cl(o)},[n,e]),i.jsx(Jn,{title:i.jsx(qS,{}),placement:"right",onClose:()=>t(!1),open:e,width:1125,className:".comboDrawer",extra:i.jsx(g,{style:{width:716},align:"center",children:i.jsx(nb,{comboState:o})}),children:i.jsxs("div",{style:{width:1050,height:"100%"},children:[i.jsx(ob,{comboState:o}),i.jsx(Am,{className:"selecto-selection",selectableTargets:[".selectable"],selectByClick:!0,selectFromInside:!0,continueSelect:!0,keyContainer:window,hitRate:0,onDrag:c=>{const d=c.inputEvent.srcElement.getAttribute("data-key")??"{}";d!=l.current&&(cc(d,o),l.current=d)},onDragStart:c=>{const d=c.inputEvent.srcElement.getAttribute("data-key")??"{}",u=ll(d,o);r.current=!(u&&u.value),l.current=void 0},onSelect:c=>{const d={...o};c.added.forEach(h=>{lc(Pc(h),r.current,d)}),c.removed.forEach(h=>{lc(Pc(h),r.current,d)});const u=c.inputEvent.srcElement.getAttribute("data-key")??"{}";u!=l.current&&(cc(u,o),l.current=u),s(d)}})]})})}function qS(){const{t:e}=V("optimizerTab",{keyPrefix:"ComboDrawer"});return i.jsx("div",{style:{width:"fit-content"},children:i.jsx(At,{text:e("Title"),url:"https://github.com/fribbels/hsr-optimizer/blob/main/docs/guides/en/advanced-rotations.md",linkIcon:!0})})}function eb(e){return e.index==0?i.jsx(i.Fragment,{}):i.jsx(z,{dropdownStyle:{width:"fit-content"},style:{width:uu},listHeight:800,optionLabelProp:"display",options:e.abilitySelectOptions,placement:"bottomLeft",value:e.comboAbilities[e.index],allowClear:!0,onSelect:t=>{uc(e.index,t)},onDeselect:t=>{},onClear:()=>{uc(e.index,null)}})}const uu=70,tb=6,ab=[{value:"BASIC",label:"Basic"},{value:"SKILL",label:"Skill"},{value:"ULT",label:"Ult"},{value:"FUA",label:"Fua"},{value:"MEMO_SKILL",label:"MemoSkill"},{value:"MEMO_TALENT",label:"MemoTalent"}];function nb(e){const{t}=V("optimizerTab",{keyPrefix:"ComboFilter.ComboOptions"}),n=e.comboState.comboAbilities,o=I.useMemo(()=>{const l=[];for(const c of ab)l.push({value:c.value,label:t(`${c.label}`),display:t(`${c.label}`)});return l},[t]);if(!n)return i.jsx(i.Fragment,{});const s=n.length,r=Array(Math.min(9,s+1)).fill(!1).map((l,c)=>i.jsx(eb,{comboAbilities:n,index:c,abilitySelectOptions:o},c));return i.jsxs(g,{gap:tb,children:[i.jsx("div",{style:{width:uu}}),r]})}function Pc(e){return e.getAttribute("data-key")??"{}"}function Fs(e){return i.jsx(Mt,{plain:!0,children:e.text})}function Ic(e){return i.jsx(z,{dropdownStyle:{width:300},listHeight:800,mode:"multiple",allowClear:!0,style:{flex:1},options:e.options,tagRender:rs,placeholder:e.placeholder,maxTagCount:"responsive",placement:"topRight",value:e.selected??[],onSelect:t=>{[...e.selected],e.submit([...e.selected,t])},onDeselect:t=>{const n=e.selected.filter(o=>o!==t);e.submit(n)},onClear:()=>{e.submit([])}})}function ib(e){var r,l;const{t,i18n:n}=V("optimizerTab",{keyPrefix:"ComboDrawer.Placeholders"}),o=I.useMemo(()=>yl(),[n.resolvedLanguage]),s=I.useMemo(()=>_r(),[n.resolvedLanguage]);return i.jsxs(g,{style:{width:"100%"},gap:10,children:[i.jsx(Ic,{selected:(r=e.comboOrigin)==null?void 0:r.displayedRelicSets,options:s,placeholder:t("Sets"),submit:c=>{dc(c,!1)}}),i.jsx(Ic,{selected:(l=e.comboOrigin)==null?void 0:l.displayedOrnamentSets,options:o,placeholder:t("Ornaments"),submit:c=>{dc(c,!0)}})]})}function sb(e){var s,r;const t=((s=e.comboOrigin)==null?void 0:s.displayedRelicSets)||[],n=((r=e.comboOrigin)==null?void 0:r.displayedOrnamentSets)||[],o=[...t,...n].map(l=>i.jsx(Ht,{comboOrigin:e.comboOrigin,conditionalType:l,actionCount:e.actionCount,originKey:e.originKey},l));return i.jsx(g,{vertical:!0,gap:8,children:o})}function ob(e){var c,d,u,h,p,S;const t=(c=e.comboState)==null?void 0:c.comboCharacter,n=(d=e.comboState)==null?void 0:d.comboTeammate0,o=(u=e.comboState)==null?void 0:u.comboTeammate1,s=(h=e.comboState)==null?void 0:h.comboTeammate2,r=((S=(p=e.comboState)==null?void 0:p.comboAbilities)==null?void 0:S.length)||0,{t:l}=V("optimizerTab",{keyPrefix:"ComboDrawer"});return i.jsxs(g,{vertical:!0,gap:8,children:[i.jsx(Ht,{comboOrigin:t,actionCount:r,conditionalType:"character",originKey:"comboCharacter"}),i.jsx(Ht,{comboOrigin:t,actionCount:r,conditionalType:"lightCone",originKey:"comboCharacterLightCone"}),i.jsx(Fs,{text:l("GroupHeaders.Sets")}),i.jsx(ib,{comboOrigin:t}),i.jsx(sb,{comboOrigin:t,conditionalType:"relicSets",actionCount:r,originKey:"comboCharacterRelicSets"}),i.jsx(Fs,{text:l("GroupHeaders.Teammate1")}),i.jsx(Ht,{comboOrigin:n,actionCount:r,conditionalType:"character",originKey:"comboTeammate0"}),i.jsx(Ht,{comboOrigin:n,actionCount:r,conditionalType:"lightCone",originKey:"comboTeammate0LightCone"}),i.jsx(Ht,{comboOrigin:n,actionCount:r,conditionalType:"lightCone",originKey:"comboTeammate0RelicSet"}),i.jsx(Ht,{comboOrigin:n,actionCount:r,conditionalType:"lightCone",originKey:"comboTeammate0OrnamentSet"}),i.jsx(Fs,{text:l("GroupHeaders.Teammate2")}),i.jsx(Ht,{comboOrigin:o,actionCount:r,conditionalType:"character",originKey:"comboTeammate1"}),i.jsx(Ht,{comboOrigin:o,actionCount:r,conditionalType:"lightCone",originKey:"comboTeammate1LightCone"}),i.jsx(Ht,{comboOrigin:o,actionCount:r,conditionalType:"lightCone",originKey:"comboTeammate1RelicSet"}),i.jsx(Ht,{comboOrigin:o,actionCount:r,conditionalType:"lightCone",originKey:"comboTeammate1OrnamentSet"}),i.jsx(Fs,{text:l("GroupHeaders.Teammate3")}),i.jsx(Ht,{comboOrigin:s,actionCount:r,conditionalType:"character",originKey:"comboTeammate2"}),i.jsx(Ht,{comboOrigin:s,actionCount:r,conditionalType:"lightCone",originKey:"comboTeammate2LightCone"}),i.jsx(Ht,{comboOrigin:s,actionCount:r,conditionalType:"lightCone",originKey:"comboTeammate2RelicSet"}),i.jsx(Ht,{comboOrigin:s,actionCount:r,conditionalType:"lightCone",originKey:"comboTeammate2OrnamentSet"})]})}function Ht(e){const{t,i18n:n}=V("gameData",{keyPrefix:"RelicSets"}),{t:o}=V("optimizerTab",{keyPrefix:"SetConditionals.SelectOptions"}),s=I.useMemo(()=>Xp(o),[o]),r=I.useMemo(()=>{var D,E;if(!e.comboOrigin)return null;let l,c,d;const u=e.originKey.includes("Teammate"),h=e.comboOrigin,p=e.comboOrigin,S=h.metadata;if(e.originKey.includes("LightCone")){const y=aa.get(S,!0);l=u?((D=y.teammateContent)==null?void 0:D.call(y))??[]:y.content(),c=k.getLightConeIconById(S.lightCone),d=h.lightConeConditionals}else if(e.originKey.includes("comboCharacterRelicSets")){const y=e.conditionalType,P=!_i[y].modifiable,_=h.setConditionals[y];if(_.type==ce.BOOLEAN)l=[{formItem:"switch",disabled:P,id:y,name:y,text:t(`${rt[y]}.Name`),title:"",content:t(`${rt[y]}.Name`)}];else if(_.type==ce.NUMBER)l=[{formItem:"slider",disabled:P,id:y,name:y,text:t(`${rt[y]}.Name`),title:"",content:t(`${rt[y]}.Name`),min:0,max:10}];else if(_.type==ce.SELECT)l=[{formItem:"select",disabled:P,id:y,name:y,text:t(`${rt[y]}.Name`),title:"",content:t(`${rt[y]}.Name`),options:s[y]}];else return null;c=k.getSetImage(y,null,!0),d=h.setConditionals}else if(e.originKey.includes("RelicSet")){const y=Object.keys(p.relicSetConditionals);if(y.length){const P=y[0];l=[{formItem:"switch",id:P,name:P,text:P,title:P,content:P}],c=k.getSetImage(P,null,!0),d=p.relicSetConditionals}else return null}else if(e.originKey.includes("OrnamentSet")){const y=Object.keys(p.ornamentSetConditionals);if(y.length){const P=y[0];l=[{formItem:"switch",id:P,name:P,text:P,title:P,content:P}],c=k.getSetImage(P,null,!0),d=p.ornamentSetConditionals}else return null}else{const y=ta.get(S,!0);l=u?((E=y.teammateContent)==null?void 0:E.call(y))??[]:y.content(),c=k.getCharacterAvatarById(S.characterId),d=h.characterConditionals}return{content:l,src:c,conditionals:d}},[e.comboOrigin,n.resolvedLanguage]);return r?i.jsxs(g,{gap:10,align:"center",style:{padding:8,background:"#677dbd1c",borderRadius:5},children:[i.jsx("img",{src:r.src,style:{width:80,height:80}}),i.jsx(rb,{contentItems:r.content,comboConditionals:r.conditionals,actionCount:e.actionCount,sourceKey:e.originKey})]}):i.jsx(i.Fragment,{})}function rb(e){const{t,i18n:n}=V("optimizerTab",{keyPrefix:"ComboDrawer"}),o=I.useMemo(()=>{const s=[];for(const r of e.contentItems){const l=e.comboConditionals[r.id];if(l==null)continue;const c=i.jsx(lb,{contentItem:r,comboConditional:l,actionCount:e.actionCount,sourceKey:e.sourceKey},r.id);s.push(c)}return s},[JSON.stringify(e.comboConditionals),e.actionCount,n.resolvedLanguage]);return i.jsx(g,{vertical:!0,children:o.length==0?i.jsx("div",{style:{marginLeft:5},children:t("NoConditionals")}):o})}function lb(e){return e.contentItem.formItem=="switch"?i.jsx(cb,{contentItem:e.contentItem,activations:e.comboConditional.activations,actionCount:e.actionCount,sourceKey:e.sourceKey}):e.contentItem.formItem=="select"?i.jsx(ub,{comboConditional:e.comboConditional,contentItem:e.contentItem,actionCount:e.actionCount,sourceKey:e.sourceKey}):i.jsx(db,{comboConditional:e.comboConditional,contentItem:e.contentItem,actionCount:e.actionCount,sourceKey:e.sourceKey})}function cb(e){const t=[];for(let n=0;n<e.activations.length;n++)t.push(JSON.stringify({id:e.contentItem.id,source:e.sourceKey,index:n}));return i.jsxs(g,{style:{height:45},children:[i.jsx(mb,{contentItem:e.contentItem,sourceKey:e.sourceKey,value:e.activations[0]}),i.jsx(hu,{activations:e.activations,actionCount:e.actionCount,dataKeys:t,partition:!1,unselectable:e.contentItem.disabled})]},e.contentItem.id)}function db(e){const t=e.comboConditional,n=[];for(let s=0;s<t.partitions.length;s++){const r=t.partitions[s];n.push({value:r.value,display:i.jsx(mu,{partition:r,contentItem:e.contentItem,activations:r.activations,partitionIndex:s,actionCount:e.actionCount,sourceKey:e.sourceKey},s)})}const o=n.sort((s,r)=>s.value-r.value).map(s=>s.display);return i.jsxs(g,{vertical:!0,style:{position:"relative"},children:[i.jsx(ro,{}),o,i.jsx(ro,{bottom:!0})]})}function ro(e){return i.jsx("div",{style:{position:"absolute",top:e.bottom?void 0:-1,bottom:e.bottom?0:void 0,left:0,right:0,borderTop:"1px solid #7999c8",pointerEvents:"none"}})}function ub(e){const t=e.comboConditional,n=[];for(let o=0;o<t.partitions.length;o++){const s=t.partitions[o];n.push(i.jsx(mu,{partition:s,contentItem:e.contentItem,activations:s.activations,partitionIndex:o,actionCount:e.actionCount,sourceKey:e.sourceKey},o))}return i.jsxs(g,{vertical:!0,style:{position:"relative"},children:[i.jsx(ro,{}),n,i.jsx(ro,{bottom:!0})]})}function mu(e){const t=[];for(let o=0;o<e.activations.length;o++)t.push(JSON.stringify({id:e.contentItem.id,source:e.sourceKey,partitionIndex:e.partitionIndex,index:o}));const n=e.contentItem.formItem=="slider"?i.jsx(hb,{contentItem:e.contentItem,value:e.partition.value,sourceKey:e.sourceKey,partitionIndex:e.partitionIndex}):i.jsx(fb,{contentItem:e.contentItem,value:e.partition.value,sourceKey:e.sourceKey,partitionIndex:e.partitionIndex});return i.jsxs(g,{style:{height:45},children:[n,i.jsx(hu,{activations:e.activations,actionCount:e.actionCount,dataKeys:t,partition:!0})]},e.partitionIndex)}function mb(e){const t=e.contentItem;return i.jsx(g,{style:{width:250,marginRight:10},align:"center",gap:0,children:i.jsx(g,{style:{width:210},align:"center",children:i.jsx(nu,{...t,name:t.id,title:t.text,teammateIndex:Pl(e.sourceKey),content:Ts(t.content),text:t.text,removeForm:!1,set:e.sourceKey.includes("comboCharacterRelicSets"),value:e.value,disabled:e.sourceKey.includes("Teammate")&&e.sourceKey.includes("Set")||e.contentItem.disabled})})})}function Pl(e){if(e.includes("Teammate0"))return 0;if(e.includes("Teammate1"))return 1;if(e.includes("Teammate2"))return 2}function hb(e){const t=e.contentItem;return i.jsxs(g,{style:{width:250,marginRight:10},align:"center",gap:0,children:[i.jsx(g,{style:{width:210},align:"center",children:i.jsx(su,{...t,name:t.id,title:t.text,content:Ts(t.content),teammateIndex:Pl(e.sourceKey),text:t.text,onChange:n=>Zd(e.sourceKey,t.id,e.partitionIndex,n),value:e.value,removeForm:e.partitionIndex>0},e.value+e.partitionIndex)}),i.jsx(Y,{type:"text",shape:"circle",icon:e.partitionIndex==0?i.jsx(ed,{style:oo}):i.jsx(td,{style:oo}),onClick:()=>{e.partitionIndex==0?jd(e.sourceKey,e.contentItem.id,e.partitionIndex):Wd(e.sourceKey,e.contentItem.id,e.partitionIndex)}})]})}function fb(e){const t=e.contentItem;return i.jsxs(g,{style:{width:250,marginRight:10},align:"center",gap:5,children:[i.jsx(iu,{...t,name:t.id,title:t.text,teammateIndex:Pl(e.sourceKey),content:Ts(t.content),text:t.text,set:e.sourceKey.includes("comboCharacterRelicSets"),onChange:n=>Zd(e.sourceKey,t.id,e.partitionIndex,n),value:e.value,removeForm:e.partitionIndex>0,fullWidth:!e.sourceKey.includes("comboCharacterRelicSets")}),i.jsx(Y,{type:"text",shape:"circle",icon:e.partitionIndex==0?i.jsx(ed,{style:oo}):i.jsx(td,{style:oo}),onClick:()=>{e.partitionIndex==0?jd(e.sourceKey,e.contentItem.id,e.partitionIndex):Wd(e.sourceKey,e.contentItem.id,e.partitionIndex)}})]})}function hu(e){return i.jsx(g,{children:e.activations.map((t,n)=>i.jsx(pb,{dataKey:e.dataKeys[n],active:t,disabled:n>=e.actionCount,index:n,partition:e.partition,unselectable:e.unselectable},n))})}const pb=Et.memo(function(t){let n;return t.disabled?n="disabledSelect":(t.unselectable?n=t.active?"unselectable selected defaultShaded":"unselectable defaultShaded":n=t.active?"selectable selected":"selectable",t.index==0&&(n+=" defaultShaded"),t.partition&&t.active&&(n+=" partitionShaded")),i.jsx("div",{className:n,"data-key":t.dataKey,style:{width:75,marginLeft:-1,marginTop:-1}})},(e,t)=>e.dataKey===t.dataKey&&e.active===t.active&&e.disabled===t.disabled&&e.index===t.index&&e.partition===t.partition&&e.unselectable===t.unselectable),Bc={display:"flex",flex:1,justifyContent:"center",paddingInline:0},gb=()=>{const{t:e}=V("optimizerTab",{keyPrefix:"ComboFilter"}),{t}=V("common"),n=N.useFormInstance(),o=window.store(l=>l.setComboDrawerOpen),s=N.useWatch("comboType",n),r=I.useMemo(()=>[{label:e("ComboOptions.Basic"),value:"BASIC"},{label:e("ComboOptions.Skill"),value:"SKILL"},{label:e("ComboOptions.Ult"),value:"ULT"},{label:e("ComboOptions.Fua"),value:"FUA"},{label:e("ComboOptions.MemoSkill"),value:"MEMO_SKILL"},{label:e("ComboOptions.MemoTalent"),value:"MEMO_TALENT"}],[e]);return i.jsxs(g,{vertical:!0,gap:Bt,children:[i.jsx($,{children:e("Header")}),i.jsx(N.Item,{name:"comboType",children:i.jsx(Ye.Group,{size:"small",buttonStyle:"solid",style:{width:"100%"},children:i.jsxs(g,{align:"center",children:[i.jsx(Ye.Button,{style:Bc,value:"simple",children:e("ModeSelector.Simple")}),i.jsx(Ye.Button,{style:Bc,value:"advanced",children:e("ModeSelector.Advanced")})]})})}),i.jsxs(g,{style:{width:"100%"},gap:5,children:[i.jsx(Y,{size:"small",variant:"outlined",style:{flex:1},onClick:()=>Sb(n),children:e("RowControls.Add")}),i.jsx(Cn,{title:t("Confirm"),description:e("RowControls.ResetConfirm.Description"),onConfirm:()=>Db(n),placement:"bottom",okText:t("Yes"),cancelText:t("Cancel"),children:i.jsx(Y,{size:"small",variant:"outlined",style:{flex:1},children:t("Reset")})}),i.jsx(Y,{size:"small",variant:"outlined",style:{flex:1},onClick:()=>bb(n),children:e("RowControls.Remove")})]}),i.jsx(Rb,{comboOptions:r}),i.jsxs(i.Fragment,{children:[i.jsx(g,{vertical:!0,gap:8,style:{marginTop:5},children:i.jsx(Y,{onClick:()=>o(!0),icon:i.jsx(Ga,{}),disabled:s=="simple",children:e("RotationButton")})}),i.jsx(N.Item,{name:"comboStateJson",style:{height:0},children:i.jsx(Kt,{placeholder:"This is a fake hidden input to save combo data into the form",style:{display:"none"}})}),i.jsx($S,{})]})]})};function Sb(e){var n;const t=e.getFieldsValue();for(let o=1;o<=10;o++)if(((n=t.comboAbilities)==null?void 0:n[o])==null){e.setFieldValue(["comboAbilities",o],"BASIC");break}}function bb(e){var n;const t=e.getFieldsValue();for(let o=10;o>1;o--)if(((n=t.comboAbilities)==null?void 0:n[o])!=null){e.setFieldValue(["comboAbilities",o],null);break}}function Db(e){var l,c,d,u,h,p;const t=window.store.getState().optimizerTabFocusCharacter,n=B.getMetadata().characters[t];if(!n)return;const o=((c=(l=n.scoringMetadata)==null?void 0:l.simulation)==null?void 0:c.comboAbilities)??[null,"BASIC"],s=((u=(d=n.scoringMetadata)==null?void 0:d.simulation)==null?void 0:u.comboDot)??0,r=((p=(h=n.scoringMetadata)==null?void 0:h.simulation)==null?void 0:p.comboBreak)??0;for(let S=0;S<=10;S++)e.setFieldValue(["comboAbilities",S],o[S]??null);e.setFieldValue(["comboDot"],s),e.setFieldValue(["comboBreak"],r),e.setFieldValue(["comboStateJson"],"{}")}function Rb(e){const{t}=V("optimizerTab",{keyPrefix:"ComboFilter"});return i.jsxs(g,{children:[i.jsxs(g,{vertical:!0,flex:1,style:{marginLeft:2},gap:3,children:[i.jsx($,{children:t("AbilityLabel")}),i.jsx(tn,{index:1,comboOptions:e.comboOptions}),i.jsx(tn,{index:2,comboOptions:e.comboOptions}),i.jsx(tn,{index:3,comboOptions:e.comboOptions}),i.jsx(tn,{index:4,comboOptions:e.comboOptions}),i.jsx(tn,{index:5,comboOptions:e.comboOptions}),i.jsx(tn,{index:6,comboOptions:e.comboOptions}),i.jsx(tn,{index:7,comboOptions:e.comboOptions}),i.jsx(tn,{index:8,comboOptions:e.comboOptions})]}),i.jsx(fa,{width:10}),i.jsxs(g,{vertical:!0,gap:10,flex:1,align:"flex-start",children:[i.jsxs(g,{vertical:!0,children:[i.jsx($,{children:t("CounterLabels.Dot")}),i.jsx(Gc,{name:"comboDot"})]}),i.jsxs(g,{vertical:!0,children:[i.jsx($,{children:t("CounterLabels.Break")}),i.jsx(Gc,{name:"comboBreak"})]})]})]})}function tn(e){return i.jsx(N.Item,{shouldUpdate:(t,n)=>t.comboAbilities!==n.comboAbilities,noStyle:!0,children:({getFieldValue:t})=>(t("comboAbilities")||[])[e.index]!=null||e.index<2?i.jsx(N.Item,{noStyle:!0,name:["comboAbilities",e.index],children:i.jsx(z,{size:"small",variant:"borderless",className:"select-no-padding select-20",options:e.comboOptions,labelRender:s=>`${e.index}. ${s.label}`})}):null})}function Gc(e){return i.jsx(N.Item,{name:e.name,children:i.jsx(so,{addonBefore:"⨯",size:"small",controls:!0,style:{width:"100%"},rootClassName:"comboInputNumber"})})}const{Text:Mc}=Ce,Eb=()=>{const{t:e}=V("optimizerTab",{keyPrefix:"EnemyConfiguration"}),t=window.store(d=>d.enemyConfigurationsDrawerOpen),n=window.store(d=>d.setEnemyConfigurationsDrawerOpen),o=I.useMemo(()=>{const d=[];for(let u=95;u>=1;u--)d.push({value:u,label:e("LevelOptionLabel",{level:u,defense:200+10*u})});return d},[e]),s=I.useMemo(()=>{const d=[];for(let u=1;u<=5;u+=2)d.push({value:u,label:e("CountOptionLabel",{targetCount:u})});return d},[e]),r=I.useMemo(()=>{const d=[];for(let u=20;u<=60;u+=20)d.push({value:u/100,label:e("DmgResOptionLabel",{resistance:u})});return d},[e]),l=I.useMemo(()=>{const d=[];for(let u=0;u<=40;u+=10)d.push({value:u/100,label:e("EffResOptionLabel",{resistance:u})});return d},[e]),c=I.useMemo(()=>{const d=[];for(let u=720;u>=1;u-=30)d.push({value:u,label:e("ToughnessOptionLabel",{toughness:u/3})});return d},[e]);return i.jsx(Jn,{title:e("Title"),placement:"right",onClose:()=>n(!1),open:t,width:300,forceRender:!0,children:i.jsxs(g,{vertical:!0,gap:5,children:[i.jsxs(g,{justify:"space-between",align:"center",style:{marginBottom:5},children:[i.jsx($,{children:e("StatHeader")}),i.jsx(ft,{type:ut.enemyOptions()})]}),i.jsx(N.Item,{name:"enemyLevel",children:i.jsx(z,{showSearch:!0,filterOption:F.labelFilterOption,options:o})}),i.jsx(N.Item,{name:"enemyResistance",children:i.jsx(z,{showSearch:!0,filterOption:F.labelFilterOption,options:r})}),i.jsx(N.Item,{name:"enemyEffectResistance",children:i.jsx(z,{showSearch:!0,filterOption:F.labelFilterOption,options:l})}),i.jsx(N.Item,{name:"enemyMaxToughness",children:i.jsx(z,{showSearch:!0,filterOption:F.labelFilterOption,options:c})}),i.jsx(N.Item,{name:"enemyCount",children:i.jsx(z,{showSearch:!0,filterOption:F.labelFilterOption,options:s})}),i.jsxs(g,{align:"center",children:[i.jsx(N.Item,{name:"enemyElementalWeak",valuePropName:"checked",children:i.jsx(gn,{checkedChildren:i.jsx(Sn,{}),unCheckedChildren:i.jsx(Fa,{}),defaultChecked:!0,style:{width:45,marginRight:5}})}),i.jsx(Mc,{children:e("WeaknessLabel")})]}),i.jsxs(g,{align:"center",children:[i.jsx(N.Item,{name:"enemyWeaknessBroken",valuePropName:"checked",children:i.jsx(gn,{checkedChildren:i.jsx(Sn,{}),unCheckedChildren:i.jsx(Fa,{}),style:{width:45,marginRight:5}})}),i.jsx(Mc,{children:e("BrokenLabel")})]})]})})};const{Text:Ei}=Ce,lo=40,co=200,Hs=80,Ci=5;function Cb(){const{t:e}=V("optimizerTab",{keyPrefix:"SetConditionals"}),t=window.store(S=>S.conditionalSetEffectsDrawerOpen),n=window.store(S=>S.setConditionalSetEffectsDrawerOpen),o=I.useMemo(()=>{const S=[];for(let D=0;D<=5;D++)S.push({display:e("SelectOptions.Streetwise.Display",{stackCount:D}),value:D,label:e("SelectOptions.Streetwise.Label",{stackCount:D,buffValue:5*D})});return S},[e]),s=I.useMemo(()=>[{display:e("SelectOptions.Wastelander.Off.Display"),value:0,label:e("SelectOptions.Wastelander.Off.Label")},{display:e("SelectOptions.Wastelander.Debuffed.Display"),value:1,label:e("SelectOptions.Wastelander.Debuffed.Label")},{display:e("SelectOptions.Wastelander.Imprisoned.Display"),value:2,label:e("SelectOptions.Wastelander.Imprisoned.Label")}],[e]),r=I.useMemo(()=>{const S=[];for(let D=0;D<=2;D++)S.push({display:e("SelectOptions.Sacerdos.Display",{stackCount:D}),value:D,label:e("SelectOptions.Sacerdos.Label",{stackCount:D,buffValue:18*D})});return S},[e]),l=I.useMemo(()=>{const S=[];for(let D=0;D<=2;D++)S.push({display:e("SelectOptions.Longevous.Display",{stackCount:D}),value:D,label:e("SelectOptions.Longevous.Label",{stackCount:D,buffValue:8*D})});return S},[e]),c=I.useMemo(()=>{const S=[];for(let D=0;D<=8;D++)S.push({display:e("SelectOptions.Ashblazing.Display",{stackCount:D}),value:D,label:e("SelectOptions.Ashblazing.Label",{stackCount:D,buffValue:6*D})});return S},[e]),d=I.useMemo(()=>{const S=[];for(let D=0;D<=3;D++)S.push({display:e("SelectOptions.Prisoner.Display",{stackCount:D}),value:D,label:e("SelectOptions.Prisoner.Label",{stackCount:D,buffValue:6*D})});return S},[e]),u=I.useMemo(()=>[{display:e("SelectOptions.Diver.Off.Display"),value:-1,label:e("SelectOptions.Diver.Off.Label")},{display:e("SelectOptions.Diver.1Debuff.Display"),value:0,label:e("SelectOptions.Diver.1Debuff.Label")},{display:e("SelectOptions.Diver.2Debuff.Display"),value:1,label:e("SelectOptions.Diver.2Debuff.Label")},{display:e("SelectOptions.Diver.3Debuff.Display"),value:2,label:e("SelectOptions.Diver.3Debuff.Label")},{display:e("SelectOptions.Diver.2+Debuff.Display"),value:3,label:e("SelectOptions.Diver.2+Debuff.Label")},{display:e("SelectOptions.Diver.3+Debuff.Display"),value:4,label:e("SelectOptions.Diver.3+Debuff.Label")}],[e]),h=I.useMemo(()=>{const S=[];for(let D=0;D<=10;D++)S.push({display:e("SelectOptions.Sigonia.Display",{stackCount:D}),value:D,label:e("SelectOptions.Sigonia.Label",{stackCount:D,buffValue:4*D})});return S},[e]),p=I.useMemo(()=>{const S=[];for(let D=0;D<=5;D++)S.push({display:e("SelectOptions.Duran.Display",{stackCount:D}),value:D,label:e("SelectOptions.Duran.Label",{stackCount:D,buffValue:5*D})});return S[5].label=e("SelectOptions.Duran.Label5"),S},[e]);return i.jsx(Jn,{title:e("Title"),placement:"right",onClose:()=>n(!1),open:t,width:750,forceRender:!0,children:i.jsxs(g,{justify:"center",children:[i.jsxs(g,{vertical:!0,gap:Ci,children:[i.jsxs(g,{gap:Ci,align:"center",justify:"flex-start",children:[i.jsx(Ei,{style:{width:lo}}),i.jsx(Ei,{style:{width:co}})]}),i.jsx(ye,{set:m.Sets.PasserbyOfWanderingCloud,description:e("RelicDescription",{id:101}),conditional:e("Conditionals.DefaultMessage"),p4Checked:!0}),i.jsx(ye,{set:m.Sets.MusketeerOfWildWheat,description:e("RelicDescription",{id:102}),conditional:e("Conditionals.DefaultMessage"),p4Checked:!0}),i.jsx(ye,{set:m.Sets.KnightOfPurityPalace,description:e("RelicDescription",{id:103}),conditional:e("Conditionals.DefaultMessage"),p4Checked:!0}),i.jsx(ye,{set:m.Sets.HunterOfGlacialForest,description:e("RelicDescription",{id:104}),conditional:e("Conditionals.Hunter")}),i.jsx(ye,{set:m.Sets.ChampionOfStreetwiseBoxing,selectOptions:o,description:e("RelicDescription",{id:105}),conditional:e("Conditionals.Streetwise")}),i.jsx(ye,{set:m.Sets.GuardOfWutheringSnow,description:e("RelicDescription",{id:106}),conditional:e("Conditionals.DefaultMessage"),p4Checked:!0}),i.jsx(ye,{set:m.Sets.FiresmithOfLavaForging,description:e("RelicDescription",{id:107}),conditional:e("Conditionals.Firesmith")}),i.jsx(ye,{set:m.Sets.GeniusOfBrilliantStars,description:e("RelicDescription",{id:108}),conditional:e("Conditionals.Genius")}),i.jsx(ye,{set:m.Sets.BandOfSizzlingThunder,description:e("RelicDescription",{id:109}),conditional:e("Conditionals.Thunder")}),i.jsx(ye,{set:m.Sets.EagleOfTwilightLine,description:e("RelicDescription",{id:110}),conditional:e("Conditionals.DefaultMessage"),p4Checked:!0}),i.jsx(ye,{set:m.Sets.ThiefOfShootingMeteor,description:e("RelicDescription",{id:111}),conditional:e("Conditionals.DefaultMessage"),p4Checked:!0}),i.jsx(ye,{set:m.Sets.WastelanderOfBanditryDesert,selectOptions:s,description:e("RelicDescription",{id:112}),conditional:e("Conditionals.Wastelander")}),i.jsx(ye,{set:m.Sets.LongevousDisciple,selectOptions:l,description:e("RelicDescription",{id:113}),conditional:e("Conditionals.Longevous")}),i.jsx(ye,{set:m.Sets.MessengerTraversingHackerspace,description:e("RelicDescription",{id:114}),conditional:e("Conditionals.Messenger")}),i.jsx(ye,{set:m.Sets.TheAshblazingGrandDuke,selectOptions:c,description:e("RelicDescription",{id:115}),conditional:e("Conditionals.Ashblazing")}),i.jsx(ye,{set:m.Sets.PrisonerInDeepConfinement,selectOptions:d,description:e("RelicDescription",{id:116}),conditional:e("Conditionals.Prisoner")}),i.jsx(ye,{set:m.Sets.PioneerDiverOfDeadWaters,selectOptions:u,description:e("RelicDescription",{id:117}),conditional:e("Conditionals.Diver")}),i.jsx(ye,{set:m.Sets.WatchmakerMasterOfDreamMachinations,description:e("RelicDescription",{id:118}),conditional:e("Conditionals.Watchmaker")}),i.jsx(ye,{set:m.Sets.IronCavalryAgainstTheScourge,description:e("RelicDescription",{id:119}),conditional:e("Conditionals.DefaultMessage"),p4Checked:!0}),i.jsx(ye,{set:m.Sets.TheWindSoaringValorous,description:e("RelicDescription",{id:120}),conditional:e("Conditionals.Valorous")}),i.jsx(ye,{set:m.Sets.SacerdosRelivedOrdeal,selectOptions:r,description:e("RelicDescription",{id:121}),conditional:e("Conditionals.Sacerdos")}),i.jsx(ye,{set:m.Sets.ScholarLostInErudition,description:e("RelicDescription",{id:122}),conditional:e("Conditionals.DefaultMessage")}),i.jsx(ye,{set:m.Sets.HeroOfTriumphantSong,description:e("RelicDescription",{id:123}),conditional:e("Conditionals.DefaultMessage")}),i.jsx(ye,{set:m.Sets.PoetOfMourningCollapse,description:e("RelicDescription",{id:124}),conditional:e("Conditionals.DefaultMessage"),p4Checked:!0})]}),i.jsx(fa,{}),i.jsxs(g,{vertical:!0,gap:Ci,style:{marginLeft:5},children:[i.jsxs(g,{gap:Ci,align:"center",justify:"flex-start",children:[i.jsx(Ei,{style:{width:lo}}),i.jsx(Ei,{style:{width:co}})]}),i.jsx(ye,{set:m.Sets.SpaceSealingStation,description:e("PlanarDescription",{id:301}),conditional:e("Conditionals.DefaultMessage"),p2Checked:!0}),i.jsx(ye,{set:m.Sets.FleetOfTheAgeless,description:e("PlanarDescription",{id:302}),conditional:e("Conditionals.DefaultMessage"),p2Checked:!0}),i.jsx(ye,{set:m.Sets.PanCosmicCommercialEnterprise,description:e("PlanarDescription",{id:303}),conditional:e("Conditionals.DefaultMessage"),p2Checked:!0}),i.jsx(ye,{set:m.Sets.BelobogOfTheArchitects,description:e("PlanarDescription",{id:304}),conditional:e("Conditionals.DefaultMessage"),p2Checked:!0}),i.jsx(ye,{set:m.Sets.CelestialDifferentiator,description:e("PlanarDescription",{id:305}),conditional:e("Conditionals.Differentiator")}),i.jsx(ye,{set:m.Sets.InertSalsotto,description:e("PlanarDescription",{id:306}),conditional:e("Conditionals.DefaultMessage"),p2Checked:!0}),i.jsx(ye,{set:m.Sets.TaliaKingdomOfBanditry,description:e("PlanarDescription",{id:307}),conditional:e("Conditionals.DefaultMessage"),p2Checked:!0}),i.jsx(ye,{set:m.Sets.SprightlyVonwacq,description:e("PlanarDescription",{id:308}),conditional:e("Conditionals.DefaultMessage"),p2Checked:!0}),i.jsx(ye,{set:m.Sets.RutilantArena,description:e("PlanarDescription",{id:309}),conditional:e("Conditionals.DefaultMessage"),p2Checked:!0}),i.jsx(ye,{set:m.Sets.BrokenKeel,description:e("PlanarDescription",{id:310}),conditional:e("Conditionals.DefaultMessage"),p2Checked:!0}),i.jsx(ye,{set:m.Sets.FirmamentFrontlineGlamoth,description:e("PlanarDescription",{id:311}),conditional:e("Conditionals.DefaultMessage"),p2Checked:!0}),i.jsx(ye,{set:m.Sets.PenaconyLandOfTheDreams,description:e("PlanarDescription",{id:312}),conditional:e("Conditionals.Penacony")}),i.jsx(ye,{set:m.Sets.SigoniaTheUnclaimedDesolation,selectOptions:h,description:e("PlanarDescription",{id:313}),conditional:e("Conditionals.Sigonia")}),i.jsx(ye,{set:m.Sets.IzumoGenseiAndTakamaDivineRealm,description:e("PlanarDescription",{id:314}),conditional:e("Conditionals.Izumo")}),i.jsx(ye,{set:m.Sets.DuranDynastyOfRunningWolves,selectOptions:p,description:e("PlanarDescription",{id:315}),conditional:e("Conditionals.Duran")}),i.jsx(ye,{set:m.Sets.ForgeOfTheKalpagniLantern,description:e("PlanarDescription",{id:316}),conditional:e("Conditionals.Kalpagni")}),i.jsx(ye,{set:m.Sets.LushakaTheSunkenSeas,description:e("PlanarDescription",{id:317}),conditional:e("Conditionals.Lushaka"),p2Checked:!0}),i.jsx(ye,{set:m.Sets.TheWondrousBananAmusementPark,description:e("PlanarDescription",{id:318}),conditional:e("Conditionals.Banana")}),i.jsx(ye,{set:m.Sets.BoneCollectionsSereneDemesne,description:e("PlanarDescription",{id:319}),conditional:e("Conditionals.DefaultMessage"),p2Checked:!0}),i.jsx(ye,{set:m.Sets.GiantTreeOfRaptBrooding,description:e("PlanarDescription",{id:320}),conditional:e("Conditionals.DefaultMessage"),p2Checked:!0})]})]})})}function ye(e){const{t}=V("optimizerTab",{keyPrefix:"SetConditionals"}),n=i.jsxs(g,{vertical:!0,gap:10,children:[i.jsxs(g,{vertical:!0,children:[i.jsx($,{children:i.jsx("p",{children:t("DescriptionHeader")})}),i.jsx("p",{children:Ts(e.description)})]}),i.jsxs(g,{vertical:!0,children:[i.jsx($,{children:i.jsx("p",{children:t("EffectHeader")})}),i.jsx("p",{children:e.conditional})]})]});if(m.SetsRelicsNames.includes(e.set)){let o=i.jsx(gn,{disabled:e.p4Checked});return e.selectOptions&&(o=i.jsx(z,{optionLabelProp:"display",listHeight:500,size:"small",style:{width:Hs},dropdownStyle:{width:"fit-content"},options:e.selectOptions})),i.jsx(hs,{content:n,title:t("SetName",{id:rt[e.set]}),mouseEnterDelay:.5,overlayStyle:{width:600},children:i.jsxs(g,{gap:Ci,align:"center",justify:"flex-start",children:[i.jsx(g,{style:{width:lo},children:i.jsx("img",{src:k.getSetImage(e.set,m.Parts.PlanarSphere),style:{width:36,height:36}})}),i.jsx(Ei,{style:{width:co,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:t("SetName",{id:rt[e.set]})}),i.jsx(g,{style:{width:Hs},justify:"flex-end",children:i.jsx(N.Item,{name:["setConditionals",e.set,1],valuePropName:e.selectOptions?"value":"checked",children:o})})]})})}else{let o=i.jsx(gn,{disabled:e.p2Checked});return e.selectOptions&&(o=i.jsx(z,{optionLabelProp:"display",listHeight:500,size:"small",style:{width:Hs},dropdownStyle:{width:"fit-content"},options:e.selectOptions})),i.jsx(hs,{content:n,title:t("SetName",{id:rt[e.set]}),mouseEnterDelay:.5,overlayStyle:{width:600},children:i.jsxs(g,{gap:Ci,align:"center",justify:"flex-start",children:[i.jsx(g,{style:{width:lo},children:i.jsx("img",{src:k.getSetImage(e.set,m.Parts.PlanarSphere),style:{width:36,height:36}})}),i.jsx(Ei,{style:{width:co,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:t("SetName",{id:rt[e.set]})}),i.jsx(g,{style:{width:Hs},justify:"flex-end",children:i.jsx(N.Item,{name:["setConditionals",e.set,1],valuePropName:e.selectOptions?"value":"checked",children:o})})]})})}}ye.propTypes={description:Yt.string,p2Checked:Yt.bool,p4Checked:Yt.bool,set:Yt.string,conditional:Yt.string,selectOptions:Yt.array};function Il(e){const{currentCharacters:t,excludeCharacters:n,withNobodyOption:o}={currentCharacters:[],excludeCharacters:[],withNobodyOption:!0,...e},s=t.filter(r=>!n.includes(r)).map(r=>({value:r.id,label:i.jsxs(g,{gap:5,align:"center",children:[i.jsx("img",{src:k.getCharacterAvatarById(r.id),style:{height:22,marginRight:4}}),e.longNameLabel?w.t(`gameData:Characters.${r.id}.LongName`):w.t(`gameData:Characters.${r.id}.Name`)]}),title:e.longNameTitle?w.t(`gameData:Characters.${r.id}.LongName`):w.t(`gameData:Characters.${r.id}.Name`)})).sort((r,l)=>r.title.localeCompare(l.title));return o&&s.unshift({value:"None",label:"None",title:"None"}),s}const{Text:zo}=Ce,Tb=()=>{const{t:e,i18n:t}=V(["optimizerTab","common"]),n=window.store(l=>l.characters),o=window.store(l=>l.optimizerTabFocusCharacter),s=I.useMemo(()=>Il({currentCharacters:n,excludeCharacters:[B.getCharacterById(o)],withNobodyOption:!1,longNameLabel:!0}),[n,o,t.resolvedLanguage]),r=I.useMemo(()=>n.map(l=>({value:l.rank,label:i.jsxs(g,{gap:5,children:[i.jsx("img",{src:k.getCharacterAvatarById(l.id),style:{height:22,marginRight:6}}),e("OptimizerOptions.Priority.Label",{rank:l.rank+1,id:l.id})]}),name:e("OptimizerOptions.Priority.Name",{rank:l.rank+1})})),[n,e]);return i.jsx(g,{vertical:!0,children:i.jsxs(g,{vertical:!0,gap:Bt,children:[i.jsxs(g,{justify:"space-between",align:"center",children:[i.jsx($,{children:e("OptimizerOptions.Header")}),i.jsx(ft,{type:ut.optimizerOptions()})]}),i.jsxs(g,{align:"center",children:[i.jsx(N.Item,{name:"includeEquippedRelics",valuePropName:"checked",children:i.jsx(gn,{checkedChildren:i.jsx(Sn,{}),unCheckedChildren:i.jsx(Fa,{}),defaultChecked:!0,style:{width:45,marginRight:5}})}),i.jsx(zo,{children:e("OptimizerOptions.AllowEquipped")})]}),i.jsxs(g,{align:"center",children:[i.jsx(N.Item,{name:"rankFilter",valuePropName:"checked",children:i.jsx(gn,{checkedChildren:i.jsx(Sn,{}),unCheckedChildren:i.jsx(Fa,{}),defaultChecked:!0,style:{width:45,marginRight:5}})}),i.jsx(zo,{children:e("OptimizerOptions.PriorityFilter")})]}),i.jsxs(g,{align:"center",children:[i.jsx(N.Item,{name:"keepCurrentRelics",valuePropName:"checked",children:i.jsx(gn,{checkedChildren:i.jsx(Sn,{}),unCheckedChildren:i.jsx(Fa,{}),defaultChecked:!0,style:{width:45,marginRight:5}})}),i.jsx(zo,{children:e("OptimizerOptions.KeepCurrent")})]}),i.jsxs(g,{gap:Bt,style:{marginTop:10},children:[i.jsxs(g,{vertical:!0,gap:2,children:[i.jsx($,{children:e("OptimizerOptions.Priority.Header")}),i.jsx(N.Item,{name:"rank",children:i.jsx(z,{style:{width:(ra-Bt)/2},options:r,popupMatchSelectWidth:225,listHeight:500,optionLabelProp:"name",placeholder:e("OptimizerOptions.Priority.Header"),showSearch:!0,filterOption:F.nameFilterOption})})]}),i.jsxs(g,{vertical:!0,gap:2,children:[i.jsx($,{children:e("OptimizerOptions.Exclude")}),i.jsx(N.Item,{name:"exclude",children:i.jsx(z,{style:{width:(ra-Bt)/2},mode:"multiple",maxTagCount:"responsive",popupMatchSelectWidth:250,listHeight:500,allowClear:!0,showSearch:!0,optionLabelProp:"title",placeholder:e("OptimizerOptions.Exclude"),options:s,filterOption:F.titleFilterOption})})]})]}),i.jsxs(g,{justify:"space-between",children:[i.jsxs(g,{vertical:!0,gap:2,children:[i.jsx($,{children:e("OptimizerOptions.MinEnhance.Header")}),i.jsx(N.Item,{name:"enhance",children:i.jsx(z,{style:{width:(ra-Bt)/2},options:[{value:0,label:e("OptimizerOptions.MinEnhance.Label0")},{value:3,label:e("OptimizerOptions.MinEnhance.Label3")},{value:6,label:e("OptimizerOptions.MinEnhance.Label6")},{value:9,label:e("OptimizerOptions.MinEnhance.Label9")},{value:12,label:e("OptimizerOptions.MinEnhance.Label12")},{value:15,label:e("OptimizerOptions.MinEnhance.Label15")}]})})]}),i.jsxs(g,{vertical:!0,gap:2,children:[i.jsx($,{children:e("OptimizerOptions.MinRarity.Header")}),i.jsx(N.Item,{name:"grade",children:i.jsx(z,{style:{width:(ra-Bt)/2},options:[{value:2,label:e("OptimizerOptions.MinRarity.Label2")},{value:3,label:e("OptimizerOptions.MinRarity.Label3")},{value:4,label:e("OptimizerOptions.MinRarity.Label4")},{value:5,label:e("OptimizerOptions.MinRarity.Label5")}]})})]})]}),i.jsx(g,{justify:"space-between",align:"center",children:i.jsxs(g,{vertical:!0,gap:2,children:[i.jsx($,{children:e("OptimizerOptions.BoostMain.Header")}),i.jsx(N.Item,{name:"mainStatUpscaleLevel",children:i.jsx(z,{style:{width:(ra-Bt)/2},options:[{value:3,label:e("OptimizerOptions.BoostMain.Label3")},{value:6,label:e("OptimizerOptions.BoostMain.Label6")},{value:9,label:e("OptimizerOptions.BoostMain.Label9")},{value:12,label:e("OptimizerOptions.BoostMain.Label12")},{value:15,label:e("OptimizerOptions.BoostMain.Label15")}]})})]})})]})})},fu=233,pu=350,Uo=350,xc=400,yb=()=>{const e=window.store(t=>t.optimizerTabFocusCharacter);return i.jsx("div",{style:{width:fu,height:pu,borderRadius:10,position:"relative"},children:i.jsx(gu,{id:e})})};function gu(e){const t=e.parentH??pu,n=t>=xc?t:xc;return i.jsx("img",{width:Uo,src:k.getCharacterPreviewById(e.id),style:{transform:`translate(${(Uo-fu)/2/Uo*-100}%, ${(n-t)/2/n*-100}%)`,cursor:e.disableClick?"":"pointer"},onClick:()=>{e.disableClick||window.store.getState().setOptimizerTabFocusCharacterSelectModalOpen(!0)}})}function Pb(e){const{value:t,label:n,closable:o,onClose:s}=e;if(!t){const c=typeof n=="string"?n.replace(/[^0-9+]/g,""):null;return i.jsx(Bi,{closable:o,onClose:s,children:i.jsx(g,{children:c})})}const r=t.split("__RC_CASCADER_SPLIT__");let l;return r[0]==pa.relic4Piece&&(l=i.jsxs(Et.Fragment,{children:[i.jsx("img",{title:r[1],src:k.getSetImage(r[1],m.Parts.Head),style:{width:26,height:26}}),i.jsx("img",{title:r[1],src:k.getSetImage(r[1],m.Parts.Head),style:{width:26,height:26}})]})),r[0]==pa.relic2Plus2Piece&&(l=i.jsxs(Et.Fragment,{children:[i.jsx("img",{title:r[1],src:k.getSetImage(r[1],m.Parts.Head),style:{width:26,height:26}}),i.jsx("img",{title:r[2],src:k.getSetImage(r[2],m.Parts.Head),style:{width:26,height:26}})]})),r[0]==pa.relic2PlusAny&&(l=i.jsx(Et.Fragment,{children:i.jsx("img",{title:r[1],src:k.getSetImage(r[1],m.Parts.Head),style:{width:26,height:26}})})),i.jsx(Bi,{closable:!1,onClose:s,style:{display:"flex",flexDirection:"row",paddingInline:"1px",marginInlineEnd:"4px",height:22,alignItems:"center",overflow:"hidden"},children:i.jsx(g,{children:l})})}const{SHOW_CHILD:Ib}=ad;function Bb(){const{t:e}=V(["optimizerTab","common"]),t=window.store(n=>n.setConditionalSetEffectsDrawerOpen);return i.jsxs(g,{vertical:!0,gap:Bt,children:[i.jsxs(g,{justify:"space-between",align:"center",children:[i.jsx($,{children:e("MainStats")}),i.jsx(ft,{type:ut.mainStats()})]}),i.jsxs(g,{vertical:!0,gap:7,children:[i.jsx(N.Item,{name:"mainBody",children:i.jsxs(z,{mode:"multiple",allowClear:!0,style:{width:ra},placeholder:e("common:Parts.Body"),optionLabelProp:"label",maxTagCount:"responsive",suffixIcon:i.jsx("img",{style:{width:16},src:k.getPart(b.Body)}),children:[i.jsx(z.Option,{value:m.Stats.HP_P,label:e("common:ShortStats.HP%"),children:e("common:Stats.HP%")}),i.jsx(z.Option,{value:m.Stats.ATK_P,label:e("common:ShortStats.ATK%"),children:e("common:Stats.ATK%")}),i.jsx(z.Option,{value:m.Stats.DEF_P,label:e("common:ShortStats.DEF%"),children:e("common:Stats.DEF%")}),i.jsx(z.Option,{value:m.Stats.CR,label:e("common:ShortStats.CRIT Rate"),children:e("common:Stats.CRIT Rate")}),i.jsx(z.Option,{value:m.Stats.CD,label:e("common:ShortStats.CRIT DMG"),children:e("common:Stats.CRIT DMG")}),i.jsx(z.Option,{value:m.Stats.EHR,label:e("common:ShortStats.Effect Hit Rate"),children:e("common:Stats.Effect Hit Rate")}),i.jsx(z.Option,{value:m.Stats.OHB,label:e("common:ShortStats.Outgoing Healing Boost"),children:e("common:Stats.Outgoing Healing Boost")})]})}),i.jsx(N.Item,{name:"mainFeet",children:i.jsxs(z,{mode:"multiple",allowClear:!0,style:{width:ra},placeholder:e("common:Parts.Feet"),optionLabelProp:"label",maxTagCount:"responsive",suffixIcon:i.jsx("img",{style:{width:16},src:k.getPart(b.Feet)}),children:[i.jsx(z.Option,{value:m.Stats.HP_P,label:e("common:ShortStats.HP%"),children:e("common:Stats.HP%")}),i.jsx(z.Option,{value:m.Stats.ATK_P,label:e("common:ShortStats.ATK%"),children:e("common:Stats.ATK%")}),i.jsx(z.Option,{value:m.Stats.DEF_P,label:e("common:ShortStats.DEF%"),children:e("common:Stats.DEF%")}),i.jsx(z.Option,{value:m.Stats.SPD,label:e("common:ShortStats.SPD"),children:e("common:Stats.SPD")})]})}),i.jsx(N.Item,{name:"mainPlanarSphere",children:i.jsxs(z,{mode:"multiple",allowClear:!0,style:{width:ra},placeholder:e("common:Parts.PlanarSphere"),optionLabelProp:"label",listHeight:400,maxTagCount:"responsive",suffixIcon:i.jsx("img",{style:{width:16},src:k.getPart(b.PlanarSphere)}),children:[i.jsx(z.Option,{value:m.Stats.HP_P,label:e("common:ShortStats.HP%"),children:e("common:Stats.HP%")}),i.jsx(z.Option,{value:m.Stats.ATK_P,label:e("common:ShortStats.ATK%"),children:e("common:Stats.ATK%")}),i.jsx(z.Option,{value:m.Stats.DEF_P,label:e("common:ShortStats.DEF%"),children:e("common:Stats.DEF%")}),i.jsx(z.Option,{value:m.Stats.Physical_DMG,label:e("common:ShortStats.Physical DMG Boost"),children:e("common:Stats.Physical DMG Boost")}),i.jsx(z.Option,{value:m.Stats.Fire_DMG,label:e("common:ShortStats.Fire DMG Boost"),children:e("common:Stats.Fire DMG Boost")}),i.jsx(z.Option,{value:m.Stats.Ice_DMG,label:e("common:ShortStats.Ice DMG Boost"),children:e("common:Stats.Ice DMG Boost")}),i.jsx(z.Option,{value:m.Stats.Lightning_DMG,label:e("common:ShortStats.Lightning DMG Boost"),children:e("common:Stats.Lightning DMG Boost")}),i.jsx(z.Option,{value:m.Stats.Wind_DMG,label:e("common:ShortStats.Wind DMG Boost"),children:e("common:Stats.Wind DMG Boost")}),i.jsx(z.Option,{value:m.Stats.Quantum_DMG,label:e("common:ShortStats.Quantum DMG Boost"),children:e("common:Stats.Quantum DMG Boost")}),i.jsx(z.Option,{value:m.Stats.Imaginary_DMG,label:e("common:ShortStats.Imaginary DMG Boost"),children:e("common:Stats.Imaginary DMG Boost")})]})}),i.jsx(N.Item,{name:"mainLinkRope",children:i.jsxs(z,{mode:"multiple",allowClear:!0,style:{width:ra},placeholder:e("common:Parts.LinkRope"),optionLabelProp:"label",maxTagCount:"responsive",suffixIcon:i.jsx("img",{style:{width:16},src:k.getPart(b.LinkRope)}),children:[i.jsx(z.Option,{value:m.Stats.HP_P,label:e("common:ShortStats.HP%"),children:e("common:Stats.HP%")}),i.jsx(z.Option,{value:m.Stats.ATK_P,label:e("common:ShortStats.ATK%"),children:e("common:Stats.ATK%")}),i.jsx(z.Option,{value:m.Stats.DEF_P,label:e("common:ShortStats.DEF%"),children:e("common:Stats.DEF%")}),i.jsx(z.Option,{value:m.Stats.BE,label:e("common:ShortStats.Break Effect"),children:e("common:Stats.Break Effect")}),i.jsx(z.Option,{value:m.Stats.ERR,label:e("common:ShortStats.Energy Regeneration Rate"),children:e("common:Stats.Energy Regeneration Rate")})]})})]}),i.jsxs(g,{justify:"space-between",align:"center",style:{marginTop:30},children:[i.jsx($,{children:e("Sets")}),i.jsx(ft,{type:ut.sets()})]}),i.jsxs(g,{vertical:!0,gap:7,children:[i.jsx(jn,{theme:{components:{Cascader:{dropdownHeight:730,controlItemWidth:100,controlWidth:100,optionPadding:"2px 12px"}}},children:i.jsx(N.Item,{name:"relicSets",children:i.jsx(ad,{placeholder:e("RelicSetSelector.Placeholder"),options:I.useMemo(()=>QS(),[e]),showCheckedStrategy:Ib,tagRender:Pb,placement:"bottomLeft",maxTagCount:"responsive",multiple:!0,expandTrigger:"hover"})})}),i.jsx(N.Item,{name:"ornamentSets",children:i.jsx(z,{dropdownStyle:{width:250},listHeight:800,mode:"multiple",allowClear:!0,style:{width:ra},options:I.useMemo(()=>yl(),[e]),tagRender:rs,placeholder:e("OrnamentSetSelector.Placeholder"),maxTagCount:"responsive"})}),i.jsx(Y,{onClick:()=>t(!0),icon:i.jsx(Ga,{}),children:e("SetConditionals.Title")})]})]})}const{Text:Gb}=Ce,Mb=Lt(Gb)`
    display: block;
    text-align: center;
`,gt=e=>i.jsxs(g,{justify:"space-between",style:{margin:0},children:[i.jsx(N.Item,{name:`min${e.name}`,style:{margin:0},children:i.jsx(so,{size:"small",controls:!1,style:{margin:0,width:63}})}),i.jsx(Mb,{children:e.label}),i.jsx(N.Item,{name:`max${e.name}`,style:{marginRight:0},children:i.jsx(so,{size:"small",controls:!1,style:{margin:0,width:63}})})]}),xb=()=>{const{t:e}=V("optimizerTab",{keyPrefix:"MinMaxFilters"});return i.jsxs(g,{vertical:!0,gap:Bt,children:[i.jsxs(g,{justify:"space-between",align:"center",children:[i.jsx($,{children:e("StatHeader")}),i.jsx(ft,{type:ut.statFilters()})]}),i.jsxs(g,{vertical:!0,gap:7,children:[i.jsx(gt,{name:"Hp",label:e("HPLabel")}),i.jsx(gt,{name:"Atk",label:e("ATKLabel")}),i.jsx(gt,{name:"Def",label:e("DEFLabel")}),i.jsx(gt,{name:"Spd",label:e("SPDLabel")}),i.jsx(gt,{name:"Cr",label:e("CRLabel")}),i.jsx(gt,{name:"Cd",label:e("CDLabel")}),i.jsx(gt,{name:"Ehr",label:e("EHRLabel")}),i.jsx(gt,{name:"Res",label:e("RESLabel")}),i.jsx(gt,{name:"Be",label:e("BELabel")}),i.jsx(gt,{name:"Err",label:e("ERRLabel")})]})]})},vb=()=>{const{t:e}=V("optimizerTab",{keyPrefix:"MinMaxFilters"});return i.jsxs(g,{vertical:!0,gap:Bt,children:[i.jsxs(g,{justify:"space-between",align:"center",children:[i.jsx($,{children:e("RatingHeader")}),i.jsx(ft,{type:ut.ratingFilters()})]}),i.jsxs(g,{vertical:!0,gap:7,children:[i.jsx(gt,{name:"Ehp",label:e("EHPLabel")}),i.jsx(gt,{name:"Basic",label:e("BASICLabel")}),i.jsx(gt,{name:"Skill",label:e("SKILLLabel")}),i.jsx(gt,{name:"Ult",label:e("ULTLabel")}),i.jsx(gt,{name:"Fua",label:e("FUALabel")}),i.jsx(gt,{name:"MemoSkill",label:e("MEMOSKILLLabel")}),i.jsx(gt,{name:"Dot",label:e("DOTLabel")}),i.jsx(gt,{name:"Break",label:e("BREAKLabel")}),i.jsx(gt,{name:"Heal",label:e("HEALLabel")}),i.jsx(gt,{name:"Shield",label:e("SHIELDLabel")})]})]})};function Su(){var o;const e=window.optimizerForm.getFieldsValue();console.log("Save statSim",e.statSim);const t=window.store.getState().statSimulationDisplay;if(t==qa.Disabled||!((o=e.statSim)!=null&&o[t]))return console.warn("Invalid sim",e,t),null;const n=e.statSim[t];return _b(n)?bu(n,t,!0):(console.warn("Invalid sim",e,t),null)}function bu(e,t,n=!1){const o=window.store.getState().statSimulations||[],s=F.randomId(),l={name:e.name||void 0,key:s,simType:t,request:e},c=vc(l);for(const d of o){const u=vc(d);if(c==u)return J.error(w.t("optimizerTab:StatSimulation.DuplicateSimMessage")),null}o.push(l),window.store.getState().setStatSimulations(o),xo(o),n&&Du(),ys()}function vc(e){const t={};for(const n of Object.entries(e.request))n[1]!=null&&(t[n[0]]=n[1]);return F.objectHash({simType:e.simType,request:t})}function _b(e){return!e.simBody||!e.simFeet||!e.simLinkRope||!e.simPlanarSphere?(J.error(w.t("optimizerTab:StatSimulation.MissingMainstatsMessage")),!1):!0}function Ab(e){return i.jsxs(g,{gap:5,children:[i.jsx(Lb,{sim:e}),"|",i.jsx(Fb,{sim:e}),"|",i.jsx(g,{children:e.name?`${e.name}`:null}),i.jsx(g,{children:e.name?"|":null}),i.jsx(Hb,{sim:e})]})}function Lb(e){const t=e.sim.request,n=22,o=k.getSetImage(t.simRelicSet1),s=k.getSetImage(t.simRelicSet2),r=t.simOrnamentSet?k.getSetImage(t.simOrnamentSet):k.getBlank();return i.jsxs(g,{gap:5,children:[i.jsxs(g,{style:{width:n*2+5},justify:"center",children:[i.jsx("img",{style:{width:t.simRelicSet1?n:0},src:o}),i.jsx("img",{style:{width:t.simRelicSet2?n:0},src:s})]}),i.jsx("img",{style:{width:n},src:r})]})}function Fb(e){const t=e.sim.request,n=22;return i.jsxs(g,{children:[i.jsx("img",{style:{width:n},src:k.getStatIcon(t.simBody,!0)}),i.jsx("img",{style:{width:n},src:k.getStatIcon(t.simFeet,!0)}),i.jsx("img",{style:{width:n},src:k.getStatIcon(t.simPlanarSphere,!0)}),i.jsx("img",{style:{width:n},src:k.getStatIcon(t.simLinkRope,!0)})]})}const _c={[a.ATK_P]:0,[a.ATK]:1,[a.CR]:2,[a.CD]:3,[a.SPD]:4,[a.BE]:5,[a.HP_P]:6,[a.HP]:7,[a.DEF_P]:8,[a.DEF]:9,[a.EHR]:10,[a.RES]:11};function Hb(e){const{t}=V("common",{keyPrefix:"ShortStats"}),n=[],o=e.sim.request.stats;for(const r of m.SubStats){const l=o[r];l&&n.push({stat:r,value:l})}n.sort((r,l)=>_c[r.stat]-_c[l.stat]);function s(r){return e.sim.simType==qa.SubstatRolls?`${t([r.stat])} x ${r.value}`:`${t([r.stat])} ${r.value}${F.isFlat(r.stat)?"":"%"}`}return i.jsx(g,{gap:0,children:n.map(r=>i.jsx(g,{children:i.jsx(Bi,{style:{paddingInline:"5px",marginInlineEnd:"5px"},children:s(r)})},r.stat))})}function wb(){if(Su()===null)return;const e=window.store.getState().selectedStatSimulations,t=window.store.getState().statSimulations,n=t.map(s=>s.key===e[0]?t.at(-1):s),o=n.pop();window.store.getState().setStatSimulations(n),xo(n),window.store.getState().setSelectedStatSimulations([o.key]),ys()}function Ob(e){console.log("Delete sim",e);const t=window.store.getState().statSimulations,n=F.clone(t.filter(o=>o.key!=e.key));window.store.getState().setStatSimulations(n),xo(n),ys()}function kb(){window.store.getState().setStatSimulations([]),xo([]),ys()}function xo(e){window.optimizerForm.setFieldValue(["statSim","simulations"],e)}const Kb=new Ma(!1),jb=new $a(!1),Wb={quality:1,speedRollValue:2.6,mainStatMultiplier:1,substatRollsModifier:e=>e,simulationFlags:{}};function Ha(e,t,n,o={},s=!1){const r={...Wb,...o},l=r.simulationFlags.forceBasicSpd?r.simulationFlags.forceBasicSpdValue:void 0,c=[];for(const d of n){const u=d.request,h=ii(),p=ii(),S=ii(),D=ii(),E=ii(),y=ii();h.augmentedStats.mainStat=m.Stats.HP,p.augmentedStats.mainStat=m.Stats.ATK,S.augmentedStats.mainStat=u.simBody,D.augmentedStats.mainStat=u.simFeet,E.augmentedStats.mainStat=u.simLinkRope,y.augmentedStats.mainStat=u.simPlanarSphere,h.augmentedStats.mainValue=705.6,p.augmentedStats.mainValue=352.8,S.augmentedStats.mainValue=yt.getMaxedStatValue(u.simBody)*r.mainStatMultiplier,D.augmentedStats.mainValue=yt.getMaxedStatValue(u.simFeet)*r.mainStatMultiplier,E.augmentedStats.mainValue=yt.getMaxedStatValue(u.simLinkRope)*r.mainStatMultiplier,y.augmentedStats.mainValue=yt.getMaxedStatValue(u.simPlanarSphere)*r.mainStatMultiplier;const P=Ja.filter(W=>W!=u.simRelicSet1&&W!=u.simRelicSet2);h.set=u.simRelicSet1||P[0],p.set=u.simRelicSet1||P[1],S.set=u.simRelicSet2||P[2],D.set=u.simRelicSet2||P[3],E.set=u.simOrnamentSet||Qa[0],y.set=u.simOrnamentSet||Qa[1],h.part=b.Head,p.part=b.Hands,S.part=b.Body,D.part=b.Feet,E.part=b.LinkRope,y.part=b.PlanarSphere;const _={[b.Head]:[h],[b.Hands]:[p],[b.Body]:[S],[b.Feet]:[D],[b.LinkRope]:[E],[b.PlanarSphere]:[y]},x={[b.Head]:h,[b.Hands]:p,[b.Body]:S,[b.Feet]:D,[b.LinkRope]:E,[b.PlanarSphere]:y},G=[];for(const W of qt){let L=d.request.stats[W];if(d.simType==qa.SubstatRolls){const A=W==a.SPD?r.speedRollValue:yt.getMaxedSubstatValue(W,r.quality);let O=F.precisionRound(d.request.stats[W]||0);O=r.substatRollsModifier(O,W,x),L=O*A}L&&G.push({stat:W,value:L})}h.substats=G,qe.condenseRelicSubstatsForOptimizer(_);const M=e.trace?new $a(!0):jb,H=e.trace?new Ma(!0):Kb,Z=Un(e,x,t,M,H,!0,!0,!1,l,s),X=Sl(Z);X.statSim={key:d.key},c.push(X)}return c}function Du(){const e=se.getForm(),t=window.store.getState().statSimulations||[];if(t.length==0||!se.validateForm(e))return;console.log("Starting sims",t);const n=Ha(e,null,t,void 0,!0);n.forEach(r=>r.id=r.statSim.key),se.setRows(n),gl(e),window.optimizerGrid.current.api.updateGridOptions({datasource:se.getDataSource()});const o=T[e.resultSort],s=e.statDisplay=="combat"?o.combatGridColumn:o.basicGridColumn;vo(s),ys()}function ys(){const e=se.getForm();B.addFromForm(e),Ee.delayedSave()}function Zb(){const e=window.optimizerGrid.current.api.getSelectedRows()[0];if(!e){J.warning(w.t("optimizerTab:StatSimulation.NothingToImport"));return}if(e.statSim){J.warning(w.t("optimizerTab:StatSimulation.BuildAlreadyImported"));return}const t=se.calculateRelicsFromId(e.id),n=e.relicSetIndex,o=Ru(n),s=e.ornamentSetIndex,r=Eu(s),l=Bl(t,o[0],o[1],r,1);bu(l,qa.SubstatRolls,!1)}function Ru(e){const t=Object.values(m.SetsRelics).length,n=e%t,o=(e-n)/t%t,s=(e-o*t-n)/(t*t)%t,r=(e-s*t*t-o*t-n)/(t*t*t)%t;return Cu([n,o,s,r])}function Eu(e){const t=Object.values(m.SetsOrnaments).length,n=e%t,o=(e-n)/t%t;return Tu([n,o],!1)}function Bl(e,t,n,o,s=1,r=2.6){const l=Object.values(e),c={};qt.map(d=>c[d]=0);for(const d of l)for(const u of d.substats)c[u.stat]+=u.value/(u.stat==a.SPD?r:yt.getMaxedSubstatValue(u.stat,s));return qt.map(d=>c[d]=F.precisionRound(c[d],4)),{name:"",simRelicSet1:t,simRelicSet2:n,simOrnamentSet:o,simBody:e[b.Body].main.stat,simFeet:e[b.Feet].main.stat,simPlanarSphere:e[b.PlanarSphere].main.stat,simLinkRope:e[b.LinkRope].main.stat,stats:{[a.HP]:c[a.HP]||null,[a.ATK]:c[a.ATK]||null,[a.DEF]:c[a.DEF]||null,[a.HP_P]:c[a.HP_P]||null,[a.ATK_P]:c[a.ATK_P]||null,[a.DEF_P]:c[a.DEF_P]||null,[a.CR]:c[a.CR]||null,[a.CD]:c[a.CD]||null,[a.SPD]:c[a.SPD]||null,[a.EHR]:c[a.EHR]||null,[a.RES]:c[a.RES]||null,[a.BE]:c[a.BE]||null}}}function Cu(e,t=!1){const n=[];for(;e.length>0;){const o=e[0];if(e.lastIndexOf(o)){const s=t?o:Object.entries(m.RelicSetToIndex).find(l=>l[1]==o)[0];n.push(s);const r=e.lastIndexOf(o);e.splice(r,1)}e.splice(0,1)}return n}function Tu(e,t=!0){if(e[0]!=null&&e[0]==e[1])return t?e[1]:Object.entries(m.OrnamentSetToIndex).find(n=>n[1]==e[1])[0]}const Nb=[{title:i.jsx(g,{style:{marginLeft:5},children:"Simulation details"}),dataIndex:"name",fixed:"left",width:"560",render:(e,t)=>Ab(t),key:"y",ellipsis:!0},{title:"",dataIndex:"",key:"x",render:(e,t)=>i.jsx("a",{onClick:()=>{Ob(t)},style:{display:"flex",justifyContent:"center"},children:i.jsx(Fa,{})}),width:36,fixed:"right"}];function Vb(e){for(const t of Object.entries(e))t[1]==0&&(e[t[0]]=null);return e}function zb(){const{t:e}=V("optimizerTab",{keyPrefix:"StatSimulation"}),t=window.store(r=>r.statSimulations),n=window.store(r=>r.selectedStatSimulations),o=window.store(r=>r.setSelectedStatSimulations);function s(r){n[0]!=r&&o(r!=null?[r]:[]);const l=t.find(u=>u.key===r);if(console.log("Syncing matching statSim",l),!l)return;let c;window.optimizerGrid.current.api.forEachNode(u=>{var h,p;((p=(h=u.data)==null?void 0:h.statSim)==null?void 0:p.key)==l.key&&(c=u)}),c&&c.setSelected(!0,!0);const d=F.clone(l.request);Vb(d.stats),window.optimizerForm.setFieldValue(["statSim",l.simType],d),window.store.getState().setStatSimulationDisplay(l.simType)}return I.useEffect(()=>{n.length&&s(n[0])},[n]),i.jsx(Qn,{showHeader:!1,locale:{emptyText:i.jsx(Ul,{image:Ul.PRESENTED_IMAGE_SIMPLE,description:e("NoStatSimulations")})},rowSelection:{selectedRowKeys:n,type:"radio",columnWidth:0,renderCell:()=>""},columns:Nb,dataSource:t,onRow:r=>({onClick:()=>{o(r.key!=null?[r.key]:[])}}),pagination:!1,size:"small",style:{flex:1,width:Pu,height:"100%",backgroundColor:"#0000001a",border:"1px solid rgba(255, 255, 255, 0.15)"},scroll:{y:300}})}const{useToken:Ub}=Ft,Ps="rgba(0, 0, 0, 0.25) 0px 0.0625em 0.0625em, rgba(0, 0, 0, 0.25) 0px 0.125em 0.5em, rgba(255, 255, 255, 0.15) 0px 0px 0px 1px inset",Is="rgba(0, 0, 0, 0.25) 0px 0.0625em 0.0625em, rgba(0, 0, 0, 0.25) 0px 0.125em 0.5em",Xb=5,Yb=ra,Jb=373,Qb=1183,$b={small:Yb,narrow:233,medium:Jb,large:Qb};function ma(e){var s,r;const{token:t}=Ub(),n=e.size??"small",o=$b[n];return i.jsx(g,{style:{borderRadius:5,backgroundColor:t.colorBgContainer,height:e.height??400,padding:((s=e.style)==null?void 0:s.padding)??Ii,boxShadow:Ps,overflow:(r=e.style)==null?void 0:r.overflow},children:i.jsx(g,{style:{width:o},justify:e.justify??void 0,children:i.jsx(g,{vertical:!0,style:{width:o},gap:Xb,justify:e.justify??void 0,children:e.children})})})}const{Text:yu}=Ce;var qa=(e=>(e.Disabled="disabled",e.SubstatTotals="substatTotals",e.SubstatRolls="substatRolls",e))(qa||{});const qb=425,Pu=680,ls=215,Iu=190;function eD(){const{t:e}=V("optimizerTab",{keyPrefix:"StatSimulation"}),{t}=V("common"),n=window.store(l=>l.statSimulationDisplay),o=window.store(l=>l.setStatSimulationDisplay),s=window.store(l=>l.setConditionalSetEffectsDrawerOpen);function r(){return n=="disabled"||!n}return i.jsx(ma,{style:{overflow:"hidden"},size:"large",height:qb,children:i.jsxs(g,{gap:15,style:{height:"100%"},children:[i.jsxs(g,{vertical:!0,gap:15,align:"center",children:[i.jsxs(Ye.Group,{onChange:l=>{const{target:{value:c}}=l;o(c)},optionType:"button",buttonStyle:"solid",value:n,style:{width:`${Pu}px`,display:"flex"},children:[i.jsx(Ye,{style:{display:"flex",flex:.3,justifyContent:"center",paddingInline:0},value:"disabled",children:e("ModeSelector.Off")}),i.jsx(Ye,{style:{display:"flex",flex:1,justifyContent:"center",paddingInline:0},value:"substatRolls",children:e("ModeSelector.RollCount")}),i.jsx(Ye,{style:{display:"flex",flex:1,justifyContent:"center",paddingInline:0},value:"substatTotals",children:e("ModeSelector.Totals")})]}),i.jsx(g,{style:{minHeight:302},children:i.jsx(zb,{})}),i.jsxs(g,{gap:10,children:[i.jsx(Y,{style:{width:200},disabled:r(),onClick:Du,icon:i.jsx(Eo,{}),children:e("FooterLabels.Simulate")}),i.jsx(Y,{style:{width:200},disabled:r(),onClick:Zb,icon:i.jsx(Lm,{}),children:e("FooterLabels.Import")}),i.jsx(Y,{style:{width:200},disabled:r(),onClick:()=>s(!0),icon:i.jsx(Ga,{}),children:e("FooterLabels.Conditionals")})]})]}),i.jsx(g,{vertical:!0,justify:"space-around",children:i.jsxs(g,{vertical:!0,gap:10,children:[i.jsx(Y,{type:"primary",style:{width:35,height:100,padding:0},onClick:Su,disabled:r(),children:i.jsx(Fm,{})}),i.jsx(Y,{type:"dashed",style:{width:35,height:35,padding:0},disabled:r(),onClick:wb,children:i.jsx(nd,{})}),i.jsx(Cn,{title:e("DeletePopup.Title"),description:e("DeletePopup.Description"),onConfirm:kb,placement:"bottom",okText:t("Yes"),cancelText:t("Cancel"),children:i.jsx(Y,{type:"dashed",style:{width:35,height:35,padding:0},disabled:r(),children:i.jsx(Jr,{})})})]})}),i.jsx(tD,{})]})})}function tD(){const{t:e}=V("optimizerTab",{keyPrefix:"StatSimulation"}),t=window.store(r=>r.statSimulationDisplay),n=N.useWatch(r=>r.statSim,window.optimizerForm),o=I.useMemo(()=>{if(!n)return 0;let r=0;for(const l of qt){const c=n.substatRolls;c!=null&&c.stats[l]&&(r+=c.stats[l])}return r},[n]),s=I.useMemo(()=>i.jsxs(i.Fragment,{children:[i.jsx(N.Item,{name:bn("simulations"),children:i.jsx(Kt,{placeholder:"This is a fake hidden input to save simulations into the form",style:{display:"none"}})}),i.jsxs(g,{gap:5,style:{display:t=="substatTotals"?"flex":"none"},children:[i.jsxs(g,{vertical:!0,gap:5,style:{width:ls},children:[i.jsx(Ac,{simType:"substatTotals"}),i.jsx(Lc,{simType:"substatTotals"}),i.jsx($,{children:e("OptionsHeader")}),i.jsx(N.Item,{name:bn("substatTotals","name"),children:i.jsx(Kt,{placeholder:e("SimulationNamePlaceholder"),autoComplete:"off"})})]}),i.jsx(fa,{}),i.jsx(Fc,{simType:"substatTotals",title:e("TotalsHeader")})]}),i.jsxs(g,{gap:5,style:{display:t=="substatRolls"?"flex":"none"},children:[i.jsxs(g,{vertical:!0,gap:5,style:{width:ls},children:[i.jsx(Ac,{simType:"substatRolls"}),i.jsx(Lc,{simType:"substatRolls"}),i.jsx($,{children:e("OptionsHeader")}),i.jsx(N.Item,{name:bn("substatRolls","name"),children:i.jsx(Kt,{placeholder:e("SimulationNamePlaceholder"),autoComplete:"off"})})]}),i.jsx(fa,{}),i.jsx(Fc,{simType:"substatRolls",title:e("RollsHeader"),total:o})]}),i.jsxs(g,{gap:5,style:{display:t=="disabled"?"flex":"none"},children:[i.jsx("div",{style:{width:ls}}),i.jsx(fa,{})]})]}),[t,o,e]);return i.jsx(g,{style:{minHeight:300},children:s})}function Ac(e){const{t,i18n:n}=V("optimizerTab",{keyPrefix:"StatSimulation"});return i.jsxs(i.Fragment,{children:[i.jsx($,{children:t("SetSelection.Header")}),i.jsx(N.Item,{name:bn(e.simType,"simRelicSet1"),style:{maxHeight:32},children:i.jsx(z,{dropdownStyle:{width:250},listHeight:700,allowClear:!0,options:I.useMemo(()=>_r(),[n.resolvedLanguage]),tagRender:rs,placeholder:t("SetSelection.RelicPlaceholder"),maxTagCount:"responsive",showSearch:!0})}),i.jsx(N.Item,{name:bn(e.simType,"simRelicSet2"),style:{maxHeight:32},children:i.jsx(z,{dropdownStyle:{width:250},listHeight:700,allowClear:!0,options:I.useMemo(()=>_r(),[n.resolvedLanguage]),tagRender:rs,placeholder:t("SetSelection.RelicPlaceholder"),maxTagCount:"responsive",showSearch:!0})}),i.jsx(N.Item,{name:bn(e.simType,"simOrnamentSet"),style:{maxHeight:32},children:i.jsx(z,{dropdownStyle:{width:250},listHeight:600,allowClear:!0,options:I.useMemo(()=>yl(),[n.resolvedLanguage]),tagRender:rs,placeholder:t("SetSelection.OrnamentPlaceholder"),maxTagCount:"responsive",showSearch:!0})})]})}function Lc(e){const{t}=V("optimizerTab",{keyPrefix:"StatSimulation.MainStatsSelection"}),n=I.useMemo(()=>[a.HP_P,a.ATK_P,a.DEF_P,a.CR,a.CD,a.EHR,a.OHB].map(l=>({value:l,short:t("ShortStat",{stat:l}),label:t("LabelStat",{stat:l})})),[t]),o=I.useMemo(()=>[a.HP_P,a.ATK_P,a.DEF_P,a.SPD].map(l=>({value:l,short:t("ShortStat",{stat:l}),label:t("LabelStat",{stat:l})})),[t]),s=I.useMemo(()=>[a.HP_P,a.ATK_P,a.DEF_P,a.BE,a.ERR].map(l=>({value:l,short:t("ShortStat",{stat:l}),label:t("LabelStat",{stat:l})})),[t]),r=I.useMemo(()=>[a.HP_P,a.ATK_P,a.DEF_P,a.Physical_DMG,a.Fire_DMG,a.Ice_DMG,a.Lightning_DMG,a.Wind_DMG,a.Quantum_DMG,a.Imaginary_DMG].map(l=>({value:l,short:t("ShortStat",{stat:l}),label:t("LabelStat",{stat:l})})),[t]);return i.jsxs(i.Fragment,{children:[i.jsx($,{children:t("Header")}),i.jsxs(g,{vertical:!0,gap:5,children:[i.jsxs(g,{gap:5,style:{width:ls},children:[i.jsx(ws,{placeholder:t("BodyPlaceholder"),part:b.Body,options:n,simType:e.simType}),i.jsx(ws,{placeholder:t("FeetPlaceholder"),part:b.Feet,options:o,simType:e.simType})]}),i.jsxs(g,{gap:5,style:{width:ls},children:[i.jsx(ws,{placeholder:t("SpherePlaceholder"),part:b.PlanarSphere,options:r,simType:e.simType}),i.jsx(ws,{placeholder:t("SpherePlaceholder"),part:b.LinkRope,options:s,simType:e.simType})]})]})]})}function ws(e){return i.jsx(N.Item,{name:bn(e.simType,"sim"+e.part),style:{flex:1},children:i.jsx(z,{placeholder:e.placeholder,style:{flex:1},allowClear:!0,optionLabelProp:"short",maxTagCount:"responsive",suffixIcon:i.jsx("img",{style:{width:16},src:k.getPart(e.part)}),options:e.options,listHeight:750,popupMatchSelectWidth:200,showSearch:!0})})}function Fc(e){const{t}=V("optimizerTab",{keyPrefix:"StatSimulation"});return i.jsx(i.Fragment,{children:i.jsxs(g,{vertical:!0,children:[i.jsx($,{children:e.title}),i.jsxs(g,{vertical:!0,gap:5,children:[i.jsx(da,{simType:e.simType,name:a.ATK_P,label:t("SubstatSelectorLabel",{stat:a.ATK_P})}),i.jsx(da,{simType:e.simType,name:a.ATK,label:t("SubstatSelectorLabel",{stat:a.ATK})}),i.jsx(da,{simType:e.simType,name:a.CR,label:t("SubstatSelectorLabel",{stat:a.CR})}),i.jsx(da,{simType:e.simType,name:a.CD,label:t("SubstatSelectorLabel",{stat:a.CD})}),i.jsx(da,{simType:e.simType,name:a.SPD,label:t("SubstatSelectorLabel",{stat:a.SPD})}),i.jsx(da,{simType:e.simType,name:a.BE,label:t("SubstatSelectorLabel",{stat:a.BE})}),i.jsx(da,{simType:e.simType,name:a.HP_P,label:t("SubstatSelectorLabel",{stat:a.HP_P})}),i.jsx(da,{simType:e.simType,name:a.HP,label:t("SubstatSelectorLabel",{stat:a.HP})}),i.jsx(da,{simType:e.simType,name:a.DEF_P,label:t("SubstatSelectorLabel",{stat:a.DEF_P})}),i.jsx(da,{simType:e.simType,name:a.DEF,label:t("SubstatSelectorLabel",{stat:a.DEF})}),i.jsx(da,{simType:e.simType,name:a.EHR,label:t("SubstatSelectorLabel",{stat:a.EHR})}),i.jsx(da,{simType:e.simType,name:a.RES,label:t("SubstatSelectorLabel",{stat:a.RES})}),e.simType=="substatRolls"&&i.jsxs(g,{justify:"space-between",style:{width:Iu},children:[i.jsx(yu,{children:t("TotalRolls")}),i.jsx($t,{size:"small",controls:!1,disabled:!0,value:F.truncate10ths(e.total),variant:"borderless",formatter:n=>`${n} / 54`,max:54,status:e.total>54?"error":void 0,style:{width:70}})]})]})]})})}function da(e){return i.jsxs(g,{justify:"space-between",style:{width:Iu},children:[i.jsx(yu,{children:e.label}),i.jsx(N.Item,{name:bn(e.simType,"stats",e.name),children:i.jsx($t,{size:"small",controls:!1,disabled:e.disabled,value:e.value,style:{width:70}})})]})}function bn(e,t,n){return["statSim",e,t,n].filter(o=>o)}Lt(Ce)`
    white-space: pre-line;
`;const aD=[{text:"HPFilterText",name:m.Stats.HP_P},{text:"ATKFilterText",name:m.Stats.ATK_P},{text:"DEFFilterText",name:m.Stats.DEF_P},{text:"SPDFilterText",name:m.Stats.SPD},{text:"CRFilterText",name:m.Stats.CR},{text:"CDFilterText",name:m.Stats.CD},{text:"EHRFilterText",name:m.Stats.EHR},{text:"RESFilterText",name:m.Stats.RES},{text:"BEFilterText",name:m.Stats.BE}];function nD(){const{t:e}=V("optimizerTab",{keyPrefix:"WeightFilter"}),t=[],n=[];for(const o of aD)t.push(i.jsx("span",{style:{textWrap:"nowrap"},children:e(o.text)},o.name)),n.push(i.jsx(N.Item,{name:["weights",o.name],style:{width:"100%",alignContent:"end",alignSelf:"end"},children:i.jsx(Ro,{min:0,max:1,step:.25,style:{width:"100%",marginTop:0,marginBottom:0,marginLeft:"auto",marginRight:"auto"},onChangeComplete:()=>window.onOptimizerFormValuesChange({},se.getForm(),!0)})},o.name));return i.jsxs(g,{gap:10,children:[i.jsx(g,{vertical:!0,style:{width:"max-content"},gap:3,children:t}),i.jsx(g,{vertical:!0,gap:3,style:{width:"100%",marginLeft:10,marginRight:10},align:"flex-end",children:n})]})}const iD={0:[b.Head,b.Hands],1:[b.Body,b.Feet],2:[b.PlanarSphere,b.LinkRope]},sD={0:"headHands",1:"bodyFeet",2:"sphereRope"},Hc=5;function Xo(e){const{index:t}=e,n=iD[t],o=sD[t],[s,r]=I.useState(1),l=c=>{r(c)};return i.jsxs(g,{gap:5,style:{marginBottom:0},align:"center",children:[i.jsxs(g,{gap:5,justify:"flex-start",style:{minWidth:50},children:[i.jsx("img",{src:k.getPart(n[0]),style:{width:18}}),i.jsx("img",{src:k.getPart(n[1]),style:{width:18}})]}),i.jsx(g,{align:"center",justify:"flex-start",gap:10,children:i.jsx(N.Item,{name:["weights",o],children:i.jsx(Ro,{min:0,max:Hc,step:.5,style:{minWidth:105,marginTop:0,marginBottom:0,marginLeft:0,marginRight:5},keyboard:!1,tooltip:{formatter:c=>`${F.precisionRound(c)}`},value:typeof s=="number"?s:0,onChange:l,onChangeComplete:()=>window.onOptimizerFormValuesChange({},se.getForm(),!0)})})}),i.jsx(N.Item,{name:["weights",o],children:i.jsx($t,{size:"small",className:"center-input-text",style:{width:40},controls:!1,min:0,max:Hc,variant:"borderless",onChange:c=>{l(c),window.onOptimizerFormValuesChange({},se.getForm(),!0)}})})]})}const oD=()=>{const{t:e}=V("optimizerTab",{keyPrefix:"WeightFilter"});return i.jsxs(g,{vertical:!0,gap:20,children:[i.jsxs(g,{vertical:!0,gap:0,children:[i.jsxs(g,{justify:"space-between",align:"center",children:[i.jsx($,{children:e("WeightFilterHeader")}),i.jsx(ft,{type:ut.substatWeightFilter()})]}),i.jsx(nD,{})]}),i.jsxs(g,{vertical:!0,gap:3,children:[i.jsx($,{children:e("RollFilterHeader")}),i.jsxs(g,{vertical:!0,gap:7,children:[i.jsx(Xo,{index:0}),i.jsx(Xo,{index:1}),i.jsx(Xo,{index:2})]})]})]})},{Text:Bu}=Ce,Ti=110,rD=Ti,lD=Ti,Bs=120,cD=Bs,dD=Bs,wc=Bs,Oc=Bs,uD=480,kc=e=>e.data.value?i.jsxs(g,{gap:10,align:"center",children:[i.jsx(g,{children:i.jsx("img",{src:k.getSetImage(e.data.value,m.Parts.PlanarSphere),style:{width:26,height:26}})}),e.data.desc]}):i.jsx(Bu,{children:"None"}),an=(e,t)=>i.jsxs(g,{align:"center",gap:3,children:[i.jsx("img",{src:k.getSetImage(e,m.Parts.PlanarSphere),style:{width:20,height:20}}),i.jsx(Bu,{style:{fontSize:12},children:t})]});function mD(e){return`teammate${e}`}function hD(){return{characterEidolon:0,characterConditionals:{},lightConeSuperimposition:1,lightConeConditionals:{}}}const fD=[R.MessengerTraversingHackerspace,R.WatchmakerMasterOfDreamMachinations,R.SacerdosRelivedOrdeal],pD=[R.BrokenKeel,R.FleetOfTheAgeless,R.PenaconyLandOfTheDreams,R.LushakaTheSunkenSeas];function gD(e){const t=Object.values(e.equipped).map(o=>B.getRelicById(o)).filter(o=>o),n={};for(const o of fD)if(t.filter(s=>s.set==o).length==4){if(o==R.MessengerTraversingHackerspace)continue;o==R.SacerdosRelivedOrdeal?e.id=="1313"||e.id=="1306"?n.teamRelicSet=gs:n.teamRelicSet=ps:n.teamRelicSet=o}for(const o of pD)t.filter(s=>s.set==o).length==2&&(n.teamOrnamentSet=o);return n}function SD(){const e=window.optimizerForm.getFieldsValue();return[e.teammate0,e.teammate1,e.teammate2].filter(t=>t==null?void 0:t.characterId).length}const Yo=e=>{const{t}=V("optimizerTab",{keyPrefix:"TeammateCard"}),n=I.useMemo(()=>mD(e.index),[e.index]),o=N.useWatch([n,"characterId"],window.optimizerForm),s=N.useWatch([n,"characterEidolon"],window.optimizerForm),r=N.useWatch([n,"lightCone"],window.optimizerForm),l=N.useWatch([n,"lightConeSuperimposition"],window.optimizerForm),[c,d]=I.useState(!1),[u,h]=I.useState(!1),p=o==null,S=I.useMemo(()=>[{value:R.MessengerTraversingHackerspace,desc:t("TeammateSets.Messenger.Desc"),label:an(R.MessengerTraversingHackerspace,t("TeammateSets.Messenger.Text"))},{value:R.WatchmakerMasterOfDreamMachinations,desc:t("TeammateSets.Watchmaker.Desc"),label:an(R.WatchmakerMasterOfDreamMachinations,t("TeammateSets.Watchmaker.Text"))},{value:ps,desc:t("TeammateSets.Sacerdos1Stack.Desc"),label:an(R.SacerdosRelivedOrdeal,t("TeammateSets.Sacerdos1Stack.Text"))},{value:gs,desc:t("TeammateSets.Sacerdos2Stack.Desc"),label:an(R.SacerdosRelivedOrdeal,t("TeammateSets.Sacerdos2Stack.Text"))}],[t]),D=I.useMemo(()=>[{value:R.BrokenKeel,desc:t("TeammateSets.Keel.Desc"),label:an(R.BrokenKeel,t("TeammateSets.Keel.Text"))},{value:R.FleetOfTheAgeless,desc:t("TeammateSets.Ageless.Desc"),label:an(R.FleetOfTheAgeless,t("TeammateSets.Ageless.Text"))},{value:R.PenaconyLandOfTheDreams,desc:t("TeammateSets.Penacony.Desc"),label:an(R.PenaconyLandOfTheDreams,t("TeammateSets.Penacony.Text"))},{value:R.LushakaTheSunkenSeas,desc:t("TeammateSets.Lushaka.Desc"),label:an(R.LushakaTheSunkenSeas,t("TeammateSets.Lushaka.Text"))}],[t]),E=I.useMemo(()=>{const _=[];for(let x=1;x<=5;x++)_.push({value:x,label:t("SuperimpositionN",{superimposition:x})});return _},[t]),y=I.useMemo(()=>{const _=[];for(let x=0;x<=6;x++)_.push({value:x,label:t("EidolonN",{eidolon:x})});return _},[t]);function P(){if(window.store.getState().setTeammateCount(SD()),!o){window.optimizerForm.setFieldValue([n],hD());return}const x=se.formToDisplay(se.getForm())[n],G=B.getCharacterById(o);if(G){x.lightCone=G.form.lightCone,x.lightConeSuperimposition=G.form.lightConeSuperimposition||1,x.characterEidolon=G.form.characterEidolon;const H=gD(G);x.teamRelicSet=H.teamRelicSet,x.teamOrnamentSet=H.teamOrnamentSet}else x.lightConeSuperimposition=1,x.characterEidolon=0;const M=ta.get({characterId:o,characterEidolon:x.characterEidolon});M.teammateDefaults&&(x.characterConditionals=Object.assign({},M.teammateDefaults(),x.characterConditionals)),window.optimizerForm.setFieldValue([n],x)}return I.useEffect(()=>{P()},[o,e.index]),I.useEffect(()=>{if(!r)return;const _=se.formToDisplay(se.getForm()),x=_[n],G=yn(x,e.dbMetadata),M=aa.get(G);if(!M.teammateDefaults)return;const H=Object.assign({},M.teammateDefaults(),_[n].lightConeConditionals);window.optimizerForm.setFieldValue([n,"lightConeConditionals"],H)},[r,l,o,e.index]),i.jsx(ma,{size:"medium",height:uD,style:{overflow:"auto"},children:i.jsxs(g,{vertical:!0,gap:5,children:[i.jsxs(g,{gap:5,children:[i.jsx(N.Item,{name:[n,"characterId"],style:{flex:1},children:i.jsx(Li,{value:"",selectStyle:{},externalOpen:c,setExternalOpen:d})}),i.jsx(Y,{icon:i.jsx(id,{}),style:{width:35},disabled:p,onClick:()=>{P(),J.success(t("TeammateSyncSuccessMessage"))}}),i.jsx(N.Item,{name:[n,"characterEidolon"],children:i.jsx(z,{showSearch:!0,style:{width:110},options:y,placeholder:t("EidolonPlaceholder"),disabled:p})})]}),i.jsxs(g,{children:[i.jsx(g,{vertical:!0,style:{minWidth:258,marginLeft:5},children:i.jsx(Dl,{id:o,eidolon:s,teammateIndex:e.index})}),i.jsxs(g,{vertical:!0,gap:5,children:[i.jsx("div",{style:{width:`${Ti}px`,height:`${Ti}px`,borderRadius:"10px"},children:i.jsx("img",{width:Ti,height:Ti,src:k.getCharacterAvatarById(o),onClick:()=>d(!0),style:{cursor:"pointer"}})}),i.jsx(N.Item,{name:[n,"teamRelicSet"],children:i.jsx(z,{className:"teammate-set-select",style:{width:110},options:S,placeholder:t("RelicsPlaceholder"),allowClear:!0,popupMatchSelectWidth:!1,optionLabelProp:"label",optionRender:kc,disabled:p})}),i.jsx(N.Item,{name:[n,"teamOrnamentSet"],children:i.jsx(z,{className:"teammate-set-select",style:{width:110},options:D,placeholder:t("OrnamentsPlaceholder"),allowClear:!0,popupMatchSelectWidth:!1,optionLabelProp:"label",optionRender:kc,disabled:p})})]})]}),i.jsxs(g,{gap:5,children:[i.jsx(N.Item,{name:[n,"lightCone"],children:i.jsx(Tl,{value:"",selectStyle:{width:258},characterId:o,externalOpen:u,setExternalOpen:h})}),i.jsx(N.Item,{name:[n,"lightConeSuperimposition"],children:i.jsx(z,{showSearch:!0,style:{width:110},options:E,placeholder:t("SuperimpositionPlaceholder"),disabled:p})})]}),i.jsxs(g,{children:[i.jsx(g,{vertical:!0,style:{minWidth:258,marginLeft:5},children:i.jsx(Rl,{id:r,superImposition:l,teammateIndex:e.index,dbMetadata:e.dbMetadata})}),i.jsx(g,{children:i.jsx("div",{style:{width:`${rD}px`,height:`${lD}px`,borderRadius:"10px"},children:i.jsx("img",{width:Bs,src:k.getLightConeIconById(r),style:{marginLeft:-5,transform:`translate(${(wc-cD)/2/wc*-100}%, ${(Oc-dD)/2/Oc*-100}%)`,cursor:"pointer"},onClick:()=>h(!0)})})})]})]})})};function Gu(e){return i.jsx(g,{vertical:!0,style:{overflow:"hidden",borderRadius:5,paddingBottom:10,background:"rgb(29 42 81 / 73%)",boxShadow:Is,backdropFilter:"blur(5px)",border:"1px solid rgba(255, 255, 255, 0.10)",WebkitBackdropFilter:"blur(5px)",width:1227},children:e.children})}const Ia={characterOptions:"Character options",relicAndStatFilters:"Relic & stat filters",teammates:"Teammates",characterStatsSimulation:"Character custom stats simulation",analysis:"Analysis"};function cs(e){const{t}=V("optimizerTab",{keyPrefix:"FormRowLabels"}),n=window.store(l=>l.optimizerMenuState),o=window.store(l=>l.setOptimizerMenuState);function s(l){n[e.id]=l.length>0,o(n)}const r=[{key:e.id,label:i.jsx(g,{style:{paddingTop:6},children:e.label??t(`${e.id}`)}),forceRender:!0,children:i.jsx(g,{style:{paddingLeft:10,marginTop:5,paddingRight:10},gap:10,children:e.children})}];return i.jsx(g,{gap:0,vertical:!0,className:"form-row",style:{minWidth:"100%"},children:i.jsx(Co,{defaultActiveKey:n[e.id]?e.id:void 0,items:r,onChange:s,expandIconPosition:"end",ghost:!0})})}function bD(e){const{t}=V("optimizerTab",{keyPrefix:"TeammateRow"}),n=window.store(s=>s.teammateCount),o=I.useMemo(()=>t("Header",{teammateCount:n?` (${n})`:""}),[n,t]);return i.jsx(cs,{id:e.id,label:o,children:e.children})}const Gl={};function DD(){console.log("======================================================================= RENDER OptimizerForm");const[e]=N.useForm();window.optimizerForm=e,I.useEffect(()=>{var l;const s=B.getCharacters()||[],r=window.store.getState().savedSession[Ne.optimizerCharacterId];se.updateCharacter(r??((l=s[0])==null?void 0:l.id))},[]);const t=I.useMemo(()=>B.getMetadata(),[]),n=(s,r,l=!1)=>{if(!s||!(r!=null&&r.characterId))return;const c=Object.keys(s);if(c.length==1&&(c[0]=="characterConditionals"||c[0]=="lightConeConditionals"||c[0]=="setConditionals"||c[0].startsWith("teammate"))&&mg(s),!l){if(c.length==1&&(c[0].startsWith("min")||c[0].startsWith("max")||c[0].startsWith("buff")||c[0].startsWith("statDisplay")||c[0].startsWith("statSim")||c[0].startsWith("teammate")||c[0].startsWith("combatBuffs")||c[0]=="characterConditionals"||c[0]=="lightConeConditionals"))return}const d=r;c[0]==="characterId"&&(window.store.getState().setSavedSessionKey(Ne.optimizerCharacterId,s.characterId),Ee.delayedSave()),!B.getCharacterById(r.characterId)&&c[0]!="characterId"&&B.addFromForm(r),s.rank!=null&&B.getCharacterById(r.characterId).rank!=r.rank&&(B.insertCharacter(r.characterId,r.rank),B.refreshCharacters());const[u,h]=io.getFilteredRelics(d),p={Head:u.Head.length,Hands:u.Hands.length,Body:u.Body.length,Feet:u.Feet.length,PlanarSphere:u.PlanarSphere.length,LinkRope:u.LinkRope.length,HeadTotal:h.Head.length,HandsTotal:h.Hands.length,BodyTotal:h.Body.length,FeetTotal:h.Feet.length,PlanarSphereTotal:h.PlanarSphere.length,LinkRopeTotal:h.LinkRope.length};window.store.getState().setPermutationDetails(p),window.store.getState().setPermutations(u.Head.length*u.Hands.length*u.Body.length*u.Feet.length*u.PlanarSphere.length*u.LinkRope.length)};window.onOptimizerFormValuesChange=n;function o(){console.log("Start clicked");const s=se.getForm();if(!se.validateForm(s))return;window.store.getState().setPermutationsSearched(0),window.store.getState().setPermutationsResults(0),window.store.getState().setOptimizationInProgress(!0),setTimeout(()=>{B.addFromForm(s)},2e3),Ee.delayedSave();const r=F.randomId();window.store.getState().setOptimizationId(r),s.optimizationId=r,s.statDisplay=window.store.getState().statDisplay,Gl[r]=s,console.log("Form finished",s),setTimeout(()=>io.optimize(s),50)}return window.optimizerStartClicked=o,i.jsx("div",{style:{position:"relative"},children:i.jsxs(N,{form:e,layout:"vertical",onValuesChange:n,children:[i.jsx(Cb,{}),i.jsxs(Gu,{children:[i.jsxs(cs,{id:Ia.characterOptions,children:[i.jsx(ma,{style:{overflow:"hidden",padding:"none"},size:"narrow",children:i.jsx(yb,{})}),i.jsx(ma,{children:i.jsx(KS,{})}),i.jsx(ma,{children:i.jsx(RD,{})}),i.jsx(ma,{justify:"space-between",children:i.jsx(ED,{metadata:t})}),i.jsx(ma,{children:i.jsx(Tb,{})})]}),i.jsxs(cs,{id:Ia.relicAndStatFilters,children:[i.jsx(ma,{children:i.jsx(Bb,{})}),i.jsx(ma,{children:i.jsx(oD,{})}),i.jsx(ma,{children:i.jsx(xb,{})}),i.jsx(ma,{children:i.jsx(vb,{})}),i.jsxs(ma,{children:[i.jsx(gb,{}),i.jsx(US,{}),i.jsx(Eb,{})]})]}),i.jsxs(bD,{id:Ia.teammates,children:[i.jsx(Yo,{index:0,dbMetadata:t}),i.jsx(Yo,{index:1,dbMetadata:t}),i.jsx(Yo,{index:2,dbMetadata:t})]}),i.jsx(cs,{id:Ia.characterStatsSimulation,children:i.jsx(eD,{})})]})]})})}function RD(){const e=N.useWatch(["characterId"],window.optimizerForm),t=N.useWatch(["characterEidolon"],window.optimizerForm);return i.jsx(Dl,{id:e,eidolon:t})}function ED(e){const{metadata:t}=e,n=N.useWatch(["lightCone"],window.optimizerForm),o=N.useWatch(["lightConeSuperimposition"],window.optimizerForm),s=N.useWatch(["characterId"],window.optimizerForm);return I.useEffect(()=>{var u;const r=yn({characterId:s,characterEidolon:0,lightCone:n,lightConeSuperimposition:o},t),c=aa.get(r).defaults(),d=((u=B.getCharacterById(s))==null?void 0:u.form.lightConeConditionals)||{};F.mergeDefinedValues(c,d),window.optimizerForm.setFieldValue("lightConeConditionals",c)},[n,o,s]),i.jsxs(g,{vertical:!0,justify:"space-between",style:{height:"100%",marginBottom:8},children:[i.jsx(Rl,{id:n,superImposition:o,dbMetadata:t}),i.jsx(DS,{})]})}function CD(e){const t=m.MAX_INT;e.statDisplay=window.store.getState().statDisplay||Cs,e.memoDisplay=window.store.getState().memoDisplay||To,e.maxHp=xe(e.maxHp,t),e.minHp=xe(e.minHp,0),e.maxAtk=xe(e.maxAtk,t),e.minAtk=xe(e.minAtk,0),e.maxDef=xe(e.maxDef,t),e.minDef=xe(e.minDef,0),e.maxSpd=xe(e.maxSpd,t),e.minSpd=xe(e.minSpd,0),e.maxCr=xe(e.maxCr,t,100),e.minCr=xe(e.minCr,0,100),e.maxCd=xe(e.maxCd,t,100),e.minCd=xe(e.minCd,0,100),e.maxEhr=xe(e.maxEhr,t,100),e.minEhr=xe(e.minEhr,0,100),e.maxRes=xe(e.maxRes,t,100),e.minRes=xe(e.minRes,0,100),e.maxBe=xe(e.maxBe,t,100),e.minBe=xe(e.minBe,0,100),e.maxErr=xe(e.maxErr,t,100),e.minErr=xe(e.minErr,0,100),e.maxEhp=xe(e.maxEhp,t),e.minEhp=xe(e.minEhp,0),e.maxBasic=xe(e.maxBasic,t),e.minBasic=xe(e.minBasic,0),e.maxSkill=xe(e.maxSkill,t),e.minSkill=xe(e.minSkill,0),e.maxUlt=xe(e.maxUlt,t),e.minUlt=xe(e.minUlt,0),e.maxFua=xe(e.maxFua,t),e.minFua=xe(e.minFua,0),e.maxMemoSkill=xe(e.maxMemoSkill,t),e.minMemoSkill=xe(e.minMemoSkill,0),e.maxMemoTalent=xe(e.maxMemoTalent,t),e.minMemoTalent=xe(e.minMemoTalent,0),e.maxDot=xe(e.maxDot,t),e.minDot=xe(e.minDot,0),e.maxBreak=xe(e.maxBreak,t),e.minBreak=xe(e.minBreak,0),e.maxHeal=xe(e.maxHeal,t),e.minHeal=xe(e.minHeal,0),e.maxShield=xe(e.maxShield,t),e.minShield=xe(e.minShield,0),e.combatBuffs||(e.combatBuffs={});for(const n of Object.values(yo))e.combatBuffs[n.key]=xe(e.combatBuffs[n.key],0,n.percent?100:0);return e.characterConditionals||(e.characterConditionals={}),e.lightConeConditionals||(e.lightConeConditionals={}),e.mainHead=e.mainHead||[],e.mainHands=e.mainHands||[],e.mainBody=e.mainBody||[],e.mainFeet=e.mainFeet||[],e.mainPlanarSphere=e.mainPlanarSphere||[],e.mainLinkRope=e.mainLinkRope||[],e}function TD(e){var u;const t=e.characterId,n=C.clone(e),o=B.getMetadata(),s=t?o.characters[t]:null,r=t?B.getScoringMetadata(t):null;n.maxHp=mt(e.maxHp),n.minHp=lt(e.minHp),n.maxAtk=mt(e.maxAtk),n.minAtk=lt(e.minAtk),n.maxDef=mt(e.maxDef),n.minDef=lt(e.minDef),n.maxSpd=mt(e.maxSpd),n.minSpd=lt(e.minSpd),n.maxCr=mt(e.maxCr,!0),n.minCr=lt(e.minCr,!0),n.maxCd=mt(e.maxCd,!0),n.minCd=lt(e.minCd,!0),n.maxEhr=mt(e.maxEhr,!0),n.minEhr=lt(e.minEhr,!0),n.maxRes=mt(e.maxRes,!0),n.minRes=lt(e.minRes,!0),n.maxBe=mt(e.maxBe,!0),n.minBe=lt(e.minBe,!0),n.maxErr=mt(e.maxErr,!0),n.minErr=lt(e.minErr,!0),n.maxEhp=mt(e.maxEhp),n.minEhp=lt(e.minEhp),n.maxBasic=mt(e.maxBasic),n.minBasic=lt(e.minBasic),n.maxSkill=mt(e.maxSkill),n.minSkill=lt(e.minSkill),n.maxUlt=mt(e.maxUlt),n.minUlt=lt(e.minUlt),n.maxFua=mt(e.maxFua),n.minFua=lt(e.minFua),n.maxMemoSkill=mt(e.maxMemoSkill),n.minMemoSkill=lt(e.minMemoSkill),n.maxMemoTalent=mt(e.maxMemoTalent),n.minMemoTalent=lt(e.minMemoTalent),n.maxDot=mt(e.maxDot),n.minDot=lt(e.minDot),n.maxBreak=mt(e.maxBreak),n.minBreak=lt(e.minBreak),n.maxHeal=mt(e.maxHeal),n.minHeal=lt(e.minHeal),n.maxShield=mt(e.maxShield),n.minShield=lt(e.minShield);const l={};e.combatBuffs||(e.combatBuffs={});for(const h of Object.values(yo))l[h.key]=lt(e.combatBuffs[h.key],h.percent);n.combatBuffs=l,n.setConditionals?F.mergeUndefinedValues(n.setConditionals,yi):n.setConditionals=yi;const c=Lu();if(e.enemyLevel||(n.enemyLevel=c.enemyLevel),e.enemyCount||(n.enemyCount=c.enemyCount),e.enemyResistance||(n.enemyResistance=c.enemyResistance),e.enemyEffectResistance||(n.enemyEffectResistance=c.enemyEffectResistance),e.enemyElementalWeak==null&&(n.enemyElementalWeak=c.enemyElementalWeak),e.enemyWeaknessBroken==null&&(n.enemyWeaknessBroken=c.enemyWeaknessBroken),e.enemyMaxToughness||(n.enemyMaxToughness=c.enemyMaxToughness),n.characterId){const h=ta.get(e).defaults();n.characterConditionals||(n.characterConditionals={});for(const p of Object.keys(h))n.characterConditionals[p]==null&&(n.characterConditionals[p]=h[p])}if(n.lightCone){const h=yn(e,o),p=aa.get(h).defaults();n.lightConeConditionals||(n.lightConeConditionals={});for(const S of Object.keys(p))n.lightConeConditionals[S]==null&&(n.lightConeConditionals[S]=p[S])}else n.lightCone=void 0,n.lightConeLevel=80,n.lightConeSuperimposition=1,n.lightConeConditionals={};n.statDisplay||(n.statDisplay=Cs),n.memoDisplay||(n.memoDisplay=To);const d=B.getCharacterById(t);if(d)n.rank=d.rank;else if(n.rank=B.getCharacters().length,s&&r){for(const h of r.presets||[])h.apply(n);n.mainBody=r.parts[m.Parts.Body],n.mainFeet=r.parts[m.Parts.Feet],n.mainPlanarSphere=r.parts[m.Parts.PlanarSphere],n.mainLinkRope=r.parts[m.Parts.LinkRope],n.weights=r.stats,n.weights.headHands=0,n.weights.bodyFeet=0,n.weights.sphereRope=0,vu(n,r)}if(n.weights||(n.weights=Fr(t)),n.weights.headHands||(n.weights.headHands=0),n.weights.bodyFeet||(n.weights.bodyFeet=0),n.weights.sphereRope||(n.weights.sphereRope=0),n.exclude||(n.exclude=[]),n.exclude=n.exclude.filter(h=>B.getCharacterById(h)),n.includeEquippedRelics==null&&(n.includeEquippedRelics=!0),[1,3,5].includes(n.enemyCount)||(n.enemyCount=1),n.teammate0=Jo(e.teammate0),n.teammate1=Jo(e.teammate1),n.teammate2=Jo(e.teammate2),n.weights||(n.weights=Fr()),n.resultSort||s&&(n.resultSort=s.scoringMetadata.sortOption.key),n.resultsLimit||(n.resultsLimit=1024),n.mainStatUpscaleLevel||(n.mainStatUpscaleLevel=15),n.comboStateJson||(n.comboStateJson="{}"),!n.comboAbilities&&s){const h=(u=s.scoringMetadata)==null?void 0:u.simulation;n.comboAbilities=(h==null?void 0:h.comboAbilities)??[null,"BASIC"],n.comboDot=(h==null?void 0:h.comboDot)??0,n.comboBreak=(h==null?void 0:h.comboBreak)??0}n.comboType||(n.comboType="simple");for(const[h,p]of Object.entries(n.setConditionals)){const S=h;if(!_i[S]){delete e.setConditionals[S],delete n.setConditionals[S];continue}_i[S].type===ce.SELECT?typeof p[1]!="number"&&(n.setConditionals[S][1]=yi[S][1]):typeof p[1]!="boolean"&&(n.setConditionals[S][1]=yi[S][1])}return n}function xe(e,t,n=0){return e==null?t:(n=n||1,e/n)}function lt(e,t=!1){if(e!=null)return e==0?void 0:parseFloat((t?e*100:e).toFixed(3))}function mt(e,t=!1){if(e!=null)return e==m.MAX_INT?void 0:parseFloat((t?e*100:e).toFixed(3))}function Jo(e){return e!=null&&e.characterId?{characterId:e.characterId??null,characterEidolon:e.characterEidolon??null,lightCone:e.lightCone??null,lightConeSuperimposition:e.lightConeSuperimposition??null,characterConditionals:Kc(e.characterConditionals),lightConeConditionals:Kc(e.lightConeConditionals)}:Js()}function Kc(e){if(!e)return null;for(const t of Object.keys(e))e[t]==null&&delete e[t];return e}function Ml(){return window.optimizerGrid.current.api}let Bn,Gn,Ar,Ot=[],Lr,zi,On;const Mu={[a.HP]:!0,[a.ATK]:!0,[a.DEF]:!0,[a.SPD]:!0,[a.CR]:!0,[a.CD]:!0,[a.EHR]:!0,[a.RES]:!0,[a.BE]:!0,[a.ERR]:!0,[a.OHB]:!0,ED:!0,WEIGHT:!0,EHP:!0,BASIC:!0,SKILL:!0,ULT:!0,FUA:!0,MEMO_SKILL:!0,MEMO_TALENT:!0,DOT:!0,BREAK:!0,COMBO:!0,HEAL:!0,SHIELD:!0,xATK:!0,xDEF:!0,xHP:!0,xSPD:!0,xCR:!0,xCD:!0,xEHR:!0,xRES:!0,xBE:!0,xERR:!0,xOHB:!0,xELEMENTAL_DMG:!0,mATK:!0,mDEF:!0,mHP:!0,mSPD:!0,mCR:!0,mCD:!0,mEHR:!0,mRES:!0,mBE:!0,mERR:!0,mOHB:!0,mELEMENTAL_DMG:!0,mxATK:!0,mxDEF:!0,mxHP:!0,mxSPD:!0,mxCR:!0,mxCD:!0,mxEHR:!0,mxRES:!0,mxBE:!0,mxERR:!0,mxOHB:!0,mxELEMENTAL_DMG:!0,mxEHP:!0},yD=Object.keys(Mu),se={setMetadata:(e,t)=>{Gn=e,Bn=t},getAggregations:()=>Ar,setRows:e=>{Ot=e},setTopRow:(e,t=!1)=>{var o,s,r,l,c;if(t){(o=window.optimizerGrid.current)==null||o.api.updateGridOptions({pinnedTopRowData:[e]});return}const n=((l=(r=(s=window.optimizerGrid)==null?void 0:s.current)==null?void 0:r.api)==null?void 0:l.getGridOption("pinnedTopRowData"))??[];n[0]=e,(c=window.optimizerGrid.current)==null||c.api.updateGridOptions({pinnedTopRowData:n})},getRows:()=>Ot,scrollToGrid:()=>{const e=document.getElementById("optimizerGridContainer");e&&C.smoothScrollNearest(e,250)},getForm:()=>{const e=window.optimizerForm.getFieldsValue();return se.displayToForm(e)},formToDisplay:e=>TD(e),displayToForm:e=>CD(e),equipClicked:()=>{var r,l,c;console.log("Equip clicked");const e=se.getForm(),t=e.characterId;if(!t)return;B.addFromForm(e);const n=(r=window.optimizerGrid.current)==null?void 0:r.api.getSelectedNodes();if(!n||n.length==0||(c=(l=n[0])==null?void 0:l.data)!=null&&c.statSim)return;const o=n[0].data,s=se.calculateRelicIdsFromId(o.id);B.equipRelicIdsToCharacter(Object.values(s),t),J.success("Equipped relics"),se.setTopRow(o),window.store.getState().setOptimizerBuild(s),Ee.delayedSave(),se.updateFilters()},cellClicked:e=>{var s,r;const t=e.data,n=Ml();if(window.store.getState().setOptimizerSelectedRowData(t),e.rowPinned=="top"){console.log("Top row clicked",t);const l=se.getForm();if(t&&l.characterId){t.id||n.deselectAll();const c=B.getCharacterById(l.characterId);if(c&&t.id){const d=t.id,u=se.calculateRelicIdsFromId(d,l);window.store.getState().setOptimizerBuild(u);const h=n.getRowNode(String(t.id));if(h){const p=n.getGridOption("pinnedTopRowData")??[];String(p[0].id)==String(h.data.id)?(s=window.optimizerGrid.current)==null||s.api.deselectAll():h.setSelected(!0)}}else c&&window.store.getState().setOptimizerBuild(c.equipped)}return}if(console.log("cellClicked",e),t.statSim){const l=t.statSim.key;window.store.getState().setSelectedStatSimulations([l]),window.store.getState().setOptimizerBuild({}),(r=window.optimizerGrid.current)==null||r.api.deselectAll();return}const o=se.calculateRelicIdsFromId(t.id);window.store.getState().setOptimizerBuild(o)},getColumnsToAggregate:()=>yD,getColumnsToAggregateMap:()=>Mu,resetDataSource:()=>{var e,t;(t=(e=window.optimizerGrid.current)==null?void 0:e.api)==null||t.updateGridOptions({datasource:se.getDataSource(On,zi)})},getDataSource:(e,t)=>(e&&(On=e),t&&(zi=t),{getRows:n=>{var o,s,r;Ar=void 0,(s=(o=window==null?void 0:window.optimizerGrid)==null?void 0:o.current)!=null&&s.api&&((r=window.optimizerGrid.current)==null||r.api.setGridOption("loading",!0)),C.sleep(100).then(()=>{var l,c,d;if(n.sortModel.length>0&&n.sortModel[0]!=On&&(On=n.sortModel[0],PD()),zi){ID(zi);const u=Lr.slice(n.startRow,n.endRow),h=[];for(const p of u)h.push(Ot[p]);jc(h),n.successCallback(h,Lr.length)}else{const u=Ot.slice(n.startRow,n.endRow);jc(u),n.successCallback(u,Ot.length)}(c=(l=window==null?void 0:window.optimizerGrid)==null?void 0:l.current)!=null&&c.api&&((d=window.optimizerGrid.current)==null||d.api.setGridOption("loading",!1)),se.redrawRows()})}}),calculateRelicsFromId:(e,t)=>{if(e===-1){const y=t??Gl[window.store.getState().optimizationId],P=B.getCharacterById(y.characterId).equipped,_={};for(const x of Object.keys(P))_[x]=B.getRelicById(P[x]);return _}const n=Gn.lSize,o=Gn.pSize,s=Gn.fSize,r=Gn.bSize,l=Gn.gSize,c=Gn.hSize,d=e,u=d%n,h=(d-u)/n%o,p=(d-h*n-u)/(n*o)%s,S=(d-p*o*n-h*n-u)/(n*o*s)%r,D=(d-S*s*o*n-p*o*n-h*n-u)/(n*o*s*r)%l,E=(d-D*r*s*o*n-S*s*o*n-p*o*n-h*n-u)/(n*o*s*r*l)%c;return{Head:Bn.Head[E],Hands:Bn.Hands[D],Body:Bn.Body[S],Feet:Bn.Feet[p],PlanarSphere:Bn.PlanarSphere[h],LinkRope:Bn.LinkRope[u]}},calculateRelicIdsFromId:(e,t)=>{var o,s,r,l,c,d;const n=se.calculateRelicsFromId(e,t);return{Head:(o=n.Head)==null?void 0:o.id,Hands:(s=n.Hands)==null?void 0:s.id,Body:(r=n.Body)==null?void 0:r.id,Feet:(l=n.Feet)==null?void 0:l.id,PlanarSphere:(c=n.PlanarSphere)==null?void 0:c.id,LinkRope:(d=n.LinkRope)==null?void 0:d.id}},validateForm:e=>{if(console.log("validate",e),!e.lightCone||!e.lightConeSuperimposition)return J.error("Missing light cone fields"),console.log("Missing light cone"),!1;if(!e.characterId||e.characterEidolon==null)return J.error("Missing character fields"),console.log("Missing character"),!1;if(!e.resultsLimit||!e.resultSort)return J.error("Missing optimization target fields"),console.log("Missing optimization target fields"),!1;if(Object.values(m.Stats).map(s=>e.weights[s]).filter(s=>!!s).length==0)return J.error("All substat weights are set to 0. Make sure to set the substat weights for your character or use the Recommended presets button.",10),console.log("Top percent"),!1;const t=B.getMetadata(),n=t.lightCones[e.lightCone],o=t.characters[e.characterId];return n.path!=o.path&&(J.warning("Character path doesn't match light cone path.",10),console.log("Path mismatch")),!0},updateFilters:()=>{if(window.optimizerForm&&window.onOptimizerFormValuesChange){const e=se.getForm();window.onOptimizerFormValuesChange({},e)}},resetFilters:()=>{const e=se.getForm(),t={characterEidolon:e.characterEidolon,characterId:e.characterId,characterLevel:80,enhance:9,grade:5,mainStatUpscaleLevel:15,rankFilter:!0,includeEquippedRelics:!0,keepCurrentRelics:!1,lightCone:e.lightCone,lightConeLevel:80,lightConeSuperimposition:e.lightConeSuperimposition,mainBody:[],mainFeet:[],mainHands:[],mainHead:[],mainLinkRope:[],mainPlanarSphere:[],ornamentSets:[],relicSets:[]};window.optimizerForm.setFieldsValue(se.formToDisplay(t)),se.updateFilters()},setCharacter:e=>{window.store.getState().setOptimizerTabFocusCharacter(e),window.optimizerForm.setFieldValue("characterId",e),window.store.getState().setSavedSessionKey(Ne.optimizerCharacterId,e),Ee.delayedSave()},updateCharacter:e=>{if(console.log("@updateCharacter",e),!e)return;se.setRows([]),se.resetDataSource();const t=B.getCharacterById(e),n=t?t.form:ji({id:e}),o=se.formToDisplay(n);window.optimizerForm.setFieldsValue(o);const s=se.displayToForm(o),r=ao(s,!0);window.store.getState().setComboState(r),setTimeout(()=>{var l,c,d;window.store.getState().setOptimizerFormSelectedLightCone(n.lightCone),window.store.getState().setOptimizerFormSelectedLightConeSuperimposition(n.lightConeSuperimposition),window.store.getState().setOptimizerTabFocusCharacter(e),window.store.getState().setOptimizerFormCharacterEidolon(n.characterEidolon),window.store.getState().setStatDisplay(n.statDisplay??Cs),window.store.getState().setStatSimulations(((l=n.statSim)==null?void 0:l.simulations)??[]),window.store.getState().setOptimizerSelectedRowData(null),(d=(c=window.optimizerGrid.current)==null?void 0:c.api)==null||d.deselectAll(),Ki(s),gl(s),window.onOptimizerFormValuesChange({},o)},50)},redrawRows:()=>{var e;(e=window.optimizerGrid.current)==null||e.api.refreshCells({force:!0})},applyRowFilters:()=>{const e=se.getForm();e.statDisplay=window.store.getState().statDisplay,zi=e,console.log("Apply filters to rows",e),se.resetDataSource()}};function jc(e){const t=yt.getZeroes();for(const s of se.getColumnsToAggregate())t[s]=m.MAX_INT;function n(s){t[s]=m.MAX_INT,o[s]=0}const o=yt.getZeroes();t.ED=m.MAX_INT,o.ED=0,t.WEIGHT=m.MAX_INT,o.WEIGHT=0,t.EHP=m.MAX_INT,o.EHP=0,n("BASIC"),n("SKILL"),n("ULT"),n("FUA"),n("MEMO_SKILL"),n("MEMO_TALENT"),n("DOT"),n("BREAK"),n("COMBO"),n("HEAL"),n("SHIELD"),n("xATK"),n("xDEF"),n("xHP"),n("xSPD"),n("xCR"),n("xCD"),n("xEHR"),n("xRES"),n("xBE"),n("xERR"),n("xOHB"),n("xELEMENTAL_DMG"),n("mATK"),n("mDEF"),n("mHP"),n("mSPD"),n("mCR"),n("mCD"),n("mEHR"),n("mRES"),n("mBE"),n("mERR"),n("mOHB"),n("mELEMENTAL_DMG"),n("mxATK"),n("mxDEF"),n("mxHP"),n("mxSPD"),n("mxCR"),n("mxCD"),n("mxEHR"),n("mxRES"),n("mxBE"),n("mxERR"),n("mxOHB"),n("mxELEMENTAL_DMG"),n("mxEHP");for(const s of e)for(const r of se.getColumnsToAggregate()){const l=s[r];l<t[r]&&(t[r]=l),l>o[r]&&(o[r]=l)}Ar={min:t,max:o}}function PD(){On.sort=="desc"?Xl(Ot).desc(e=>e[On.colId]):Xl(Ot).asc(e=>e[On.colId])}function ID(e){const t=e.statDisplay=="combat",n=e.memoDisplay=="memo",o=[];if(t)if(n)for(let s=0;s<Ot.length;s++){const r=Ot[s];r.mxHP>=e.minHp&&r.mxHP<=e.maxHp&&r.mxATK>=e.minAtk&&r.mxATK<=e.maxAtk&&r.mxDEF>=e.minDef&&r.mxDEF<=e.maxDef&&r.mxSPD>=e.minSpd&&r.mxSPD<=e.maxSpd&&r.mxCR>=e.minCr&&r.mxCR<=e.maxCr&&r.mxCD>=e.minCd&&r.mxCD<=e.maxCd&&r.mxEHR>=e.minEhr&&r.mxEHR<=e.maxEhr&&r.mxRES>=e.minRes&&r.mxRES<=e.maxRes&&r.mxBE>=e.minBe&&r.mxBE<=e.maxBe&&r.mxERR>=e.minErr&&r.mxERR<=e.maxErr&&r.EHP>=e.minEhp&&r.EHP<=e.maxEhp&&r.BASIC>=e.minBasic&&r.BASIC<=e.maxBasic&&r.SKILL>=e.minSkill&&r.SKILL<=e.maxSkill&&r.ULT>=e.minUlt&&r.ULT<=e.maxUlt&&r.FUA>=e.minFua&&r.FUA<=e.maxFua&&r.MEMO_SKILL>=e.minMemoSkill&&r.MEMO_SKILL<=e.maxMemoSkill&&r.MEMO_TALENT>=e.minMemoTalent&&r.MEMO_TALENT<=e.maxMemoTalent&&r.DOT>=e.minDot&&r.DOT<=e.maxDot&&r.BREAK>=e.minBreak&&r.BREAK<=e.maxBreak&&r.HEAL>=e.minHeal&&r.HEAL<=e.maxHeal&&r.SHIELD>=e.minShield&&r.SHIELD<=e.maxShield&&o.push(s)}else for(let s=0;s<Ot.length;s++){const r=Ot[s];r.xHP>=e.minHp&&r.xHP<=e.maxHp&&r.xATK>=e.minAtk&&r.xATK<=e.maxAtk&&r.xDEF>=e.minDef&&r.xDEF<=e.maxDef&&r.xSPD>=e.minSpd&&r.xSPD<=e.maxSpd&&r.xCR>=e.minCr&&r.xCR<=e.maxCr&&r.xCD>=e.minCd&&r.xCD<=e.maxCd&&r.xEHR>=e.minEhr&&r.xEHR<=e.maxEhr&&r.xRES>=e.minRes&&r.xRES<=e.maxRes&&r.xBE>=e.minBe&&r.xBE<=e.maxBe&&r.xERR>=e.minErr&&r.xERR<=e.maxErr&&r.EHP>=e.minEhp&&r.EHP<=e.maxEhp&&r.BASIC>=e.minBasic&&r.BASIC<=e.maxBasic&&r.SKILL>=e.minSkill&&r.SKILL<=e.maxSkill&&r.ULT>=e.minUlt&&r.ULT<=e.maxUlt&&r.FUA>=e.minFua&&r.FUA<=e.maxFua&&r.MEMO_SKILL>=e.minMemoSkill&&r.MEMO_SKILL<=e.maxMemoSkill&&r.MEMO_TALENT>=e.minMemoTalent&&r.MEMO_TALENT<=e.maxMemoTalent&&r.DOT>=e.minDot&&r.DOT<=e.maxDot&&r.BREAK>=e.minBreak&&r.BREAK<=e.maxBreak&&r.HEAL>=e.minHeal&&r.HEAL<=e.maxHeal&&r.SHIELD>=e.minShield&&r.SHIELD<=e.maxShield&&o.push(s)}else if(n)for(let s=0;s<Ot.length;s++){const r=Ot[s];r.mHP>=e.minHp&&r.mHP<=e.maxHp&&r.mATK>=e.minAtk&&r.mATK<=e.maxAtk&&r.mDEF>=e.minDef&&r.mDEF<=e.maxDef&&r.mSPD>=e.minSpd&&r.mSPD<=e.maxSpd&&r.mCR>=e.minCr&&r.mCR<=e.maxCr&&r.mCD>=e.minCd&&r.mCD<=e.maxCd&&r.mEHR>=e.minEhr&&r.mEHR<=e.maxEhr&&r.mRES>=e.minRes&&r.mRES<=e.maxRes&&r.mBE>=e.minBe&&r.mBE<=e.maxBe&&r.mERR>=e.minErr&&r.mERR<=e.maxErr&&r.EHP>=e.minEhp&&r.EHP<=e.maxEhp&&r.BASIC>=e.minBasic&&r.BASIC<=e.maxBasic&&r.SKILL>=e.minSkill&&r.SKILL<=e.maxSkill&&r.ULT>=e.minUlt&&r.ULT<=e.maxUlt&&r.FUA>=e.minFua&&r.FUA<=e.maxFua&&r.MEMO_SKILL>=e.minMemoSkill&&r.MEMO_SKILL<=e.maxMemoSkill&&r.MEMO_TALENT>=e.minMemoTalent&&r.MEMO_TALENT<=e.maxMemoTalent&&r.DOT>=e.minDot&&r.DOT<=e.maxDot&&r.BREAK>=e.minBreak&&r.BREAK<=e.maxBreak&&r.HEAL>=e.minHeal&&r.HEAL<=e.maxHeal&&r.SHIELD>=e.minShield&&r.SHIELD<=e.maxShield&&o.push(s)}else for(let s=0;s<Ot.length;s++){const r=Ot[s];r[a.HP]>=e.minHp&&r[a.HP]<=e.maxHp&&r[a.ATK]>=e.minAtk&&r[a.ATK]<=e.maxAtk&&r[a.DEF]>=e.minDef&&r[a.DEF]<=e.maxDef&&r[a.SPD]>=e.minSpd&&r[a.SPD]<=e.maxSpd&&r[a.CR]>=e.minCr&&r[a.CR]<=e.maxCr&&r[a.CD]>=e.minCd&&r[a.CD]<=e.maxCd&&r[a.EHR]>=e.minEhr&&r[a.EHR]<=e.maxEhr&&r[a.RES]>=e.minRes&&r[a.RES]<=e.maxRes&&r[a.BE]>=e.minBe&&r[a.BE]<=e.maxBe&&r[a.ERR]>=e.minErr&&r[a.ERR]<=e.maxErr&&r.EHP>=e.minEhp&&r.EHP<=e.maxEhp&&r.BASIC>=e.minBasic&&r.BASIC<=e.maxBasic&&r.SKILL>=e.minSkill&&r.SKILL<=e.maxSkill&&r.ULT>=e.minUlt&&r.ULT<=e.maxUlt&&r.FUA>=e.minFua&&r.FUA<=e.maxFua&&r.MEMO_SKILL>=e.minMemoSkill&&r.MEMO_SKILL<=e.maxMemoSkill&&r.MEMO_TALENT>=e.minMemoTalent&&r.MEMO_TALENT<=e.maxMemoTalent&&r.DOT>=e.minDot&&r.DOT<=e.maxDot&&r.BREAK>=e.minBreak&&r.BREAK<=e.maxBreak&&r.HEAL>=e.minHeal&&r.HEAL<=e.maxHeal&&r.SHIELD>=e.minShield&&r.SHIELD<=e.maxShield&&o.push(s)}Lr=o}const oe={fnAshblazingSet:e=>({name:"fnAshblazingSet",value:e,apply:t=>{t.setConditionals[R.TheAshblazingGrandDuke][1]=e}}),fnPioneerSet:e=>({name:"fnPioneerSet",value:e,apply:t=>{t.setConditionals[R.PioneerDiverOfDeadWaters][1]=e}}),fnSacerdosSet:e=>({name:"fnSacerdosSet",value:e,apply:t=>{t.setConditionals[R.SacerdosRelivedOrdeal][1]=e}}),PRISONER_SET:{name:"PRISONER_SET",value:3,apply:e=>{e.setConditionals[R.PrisonerInDeepConfinement][1]=3}},WASTELANDER_SET:{name:"WASTELANDER_SET",value:2,apply:e=>{e.setConditionals[R.WastelanderOfBanditryDesert][1]=2}},VALOROUS_SET:{name:"VALOROUS_SET",value:!0,apply:e=>{e.setConditionals[R.TheWindSoaringValorous][1]=!0}},BANANA_SET:{name:"BANANA_SET",value:!0,apply:e=>{e.setConditionals[R.TheWondrousBananAmusementPark][1]=!0}},GENIUS_SET:{name:"GENIUS_SET",value:!0,apply:e=>{e.setConditionals[R.GeniusOfBrilliantStars][1]=!0}}};function vo(e){var n;const t={state:[{colId:e,sort:"desc"}],defaultState:{sort:null}};(n=window.optimizerGrid.current)==null||n.api.applyColumnState(t)}function xu(e){return{SPD0:{key:"SPD0",label:e("SpdValues.SPD0"),value:void 0},SPD111:{key:"SPD111",label:e("SpdValues.SPD111"),value:111.112},SPD114:{key:"SPD114",label:e("SpdValues.SPD114"),value:114.286},SPD120:{key:"SPD120",label:e("SpdValues.SPD120"),value:120},SPD133:{key:"SPD133",label:e("SpdValues.SPD133"),value:133.334},SPD142:{key:"SPD142",label:e("SpdValues.SPD142"),value:142.858},SPD155:{key:"SPD155",label:e("SpdValues.SPD155"),value:155.556},SPD160:{key:"SPD160",label:e("SpdValues.SPD160"),value:160},SPD171:{key:"SPD171",label:e("SpdValues.SPD171"),value:171.429},SPD177:{key:"SPD177",label:e("SpdValues.SPD177"),value:177.778},SPD200:{key:"SPD200",label:e("SpdValues.SPD200"),value:200}}}const BD=()=>{const{t:e}=V("optimizerTab",{keyPrefix:"Presets"}),t=window.store(c=>c.optimizerTabFocusCharacter),n=I.useMemo(()=>xu(e),[e]),o=Object.values(n);o.map(c=>c.label=i.jsx("div",{style:{minWidth:450},children:c.label}));function s(c){return{key:c,label:c,children:o}}const l={items:I.useMemo(function(){if(!t)return[];const c=B.getMetadata().characters[t];return c?[s(e("StandardLabel",{id:c.id}))]:[]},[t,e]),onClick:c=>{n[c.key]?Wc(n[c.key].value,t):J.warning(e("PresetNotAvailable"))}};return i.jsx(Es.Button,{className:"full-width-dropdown-button",type:"primary",menu:l,onClick:()=>Wc(n.SPD0.value,t),icon:i.jsx(Eo,{}),style:{flex:1,width:"100%"},children:e("RecommendedPresets")})};function Wc(e,t){if(!t)return;const n=B.getMetadata().characters[t],o=C.clone(n.scoringMetadata),s=se.formToDisplay(se.getForm()),r=se.formToDisplay(ji(n));s.setConditionals=r.setConditionals;const l=window.store.getState().scoringMetadataOverrides[t];l&&(F.mergeDefinedValues(o.parts,l.parts),F.mergeDefinedValues(o.stats,l.stats)),s.minSpd=e,vu(s,o);const c=o.sortOption;s.resultSort=c.key,vo(c.combatGridColumn),window.optimizerForm.setFieldsValue(s),window.onOptimizerFormValuesChange({},s)}function vu(e,t){var n,o,s;F.mergeUndefinedValues(e,ji()),e.comboAbilities=((n=t==null?void 0:t.simulation)==null?void 0:n.comboAbilities)||[null,"BASIC"],e.comboDot=((o=t==null?void 0:t.simulation)==null?void 0:o.comboDot)||0,e.comboBreak=((s=t==null?void 0:t.simulation)==null?void 0:s.comboBreak)||0,e.maxSpd=void 0,e.mainBody=t.parts[m.Parts.Body],e.mainFeet=t.parts[m.Parts.Feet],e.mainPlanarSphere=t.parts[m.Parts.PlanarSphere],e.mainLinkRope=t.parts[m.Parts.LinkRope],e.weights={...e.weights,...t.stats},e.weights.headHands=e.weights.headHands||0,e.weights.bodyFeet=e.weights.bodyFeet||0,e.weights.sphereRope=e.weights.sphereRope||0,Au(e),_u(e)}function _u(e){var o;const t=B.getMetadata().characters[e.characterId],n=((o=t==null?void 0:t.scoringMetadata)==null?void 0:o.presets)??[];for(const s of n)s.apply(e)}function Au(e){const t=B.getMetadata().characters[e.characterId];F.mergeUndefinedValues(e.setConditionals,yi);const n=t==null?void 0:t.element;e.setConditionals[R.GeniusOfBrilliantStars][1]=n==ec.Quantum,e.setConditionals[R.ForgeOfTheKalpagniLantern][1]=n==ec.Fire;const o=t==null?void 0:t.path;e.setConditionals[R.HeroOfTriumphantSong][1]=o==Oi.Remembrance}function Fr(e){if(e){const t=C.clone(B.getScoringMetadata(e));return t.stats.headHands=0,t.stats.bodyFeet=0,t.stats.sphereRope=0,t.stats}return{[m.Stats.HP_P]:1,[m.Stats.ATK_P]:1,[m.Stats.DEF_P]:1,[m.Stats.SPD_P]:1,[m.Stats.HP]:1,[m.Stats.ATK]:1,[m.Stats.DEF]:1,[m.Stats.SPD]:1,[m.Stats.CD]:1,[m.Stats.CR]:1,[m.Stats.EHR]:1,[m.Stats.RES]:1,[m.Stats.BE]:1,headHands:0,bodyFeet:0,sphereRope:0}}function ji(e){var l,c;const t=(l=B.getMetadata().characters[e==null?void 0:e.id])==null?void 0:l.scoringMetadata,n=(t==null?void 0:t.parts)||{},o=(t==null?void 0:t.stats)||Fr(),s={};Object.values(yo).map(d=>s[d.key]=0);const r=C.clone({characterId:e==null?void 0:e.id,mainBody:n[m.Parts.Body]||[],mainFeet:n[m.Parts.Feet]||[],mainPlanarSphere:n[m.Parts.PlanarSphere]||[],mainLinkRope:n[m.Parts.LinkRope]||[],relicSets:[],ornamentSets:[],characterLevel:80,characterEidolon:0,lightConeLevel:80,lightConeSuperimposition:1,mainStatUpscaleLevel:15,rankFilter:!0,includeEquippedRelics:!0,keepCurrentRelics:!1,enhance:9,grade:5,mainHead:[],mainHands:[],statDisplay:Cs,memoDisplay:To,weights:o,setConditionals:yi,teammate0:Js(),teammate1:Js(),teammate2:Js(),resultSort:t==null?void 0:t.sortOption.key,resultsLimit:1024,combatBuffs:s,combo:{BASIC:0,SKILL:0,ULT:0,FUA:0,DOT:0,BREAK:0},comboStateJson:"{}",...Lu()});return Au(r),_u(r),(c=t==null?void 0:t.simulation)!=null&&c.comboAbilities&&(r.comboAbilities=t.simulation.comboAbilities,r.comboDot=t.simulation.comboDot,r.comboBreak=t.simulation.comboBreak),r}function Js(){return{characterId:void 0,characterEidolon:0,lightCone:void 0,lightConeSuperimposition:1}}function Lu(){return{enemyLevel:95,enemyCount:1,enemyResistance:.2,enemyEffectResistance:.2,enemyMaxToughness:360,enemyElementalWeak:!0,enemyWeaknessBroken:!1}}const yi={[R.PasserbyOfWanderingCloud]:[void 0,!0],[R.MusketeerOfWildWheat]:[void 0,!0],[R.KnightOfPurityPalace]:[void 0,!0],[R.HunterOfGlacialForest]:[void 0,!0],[R.ChampionOfStreetwiseBoxing]:[void 0,5],[R.GuardOfWutheringSnow]:[void 0,!0],[R.FiresmithOfLavaForging]:[void 0,!0],[R.GeniusOfBrilliantStars]:[void 0,!0],[R.BandOfSizzlingThunder]:[void 0,!0],[R.EagleOfTwilightLine]:[void 0,!0],[R.ThiefOfShootingMeteor]:[void 0,!0],[R.WastelanderOfBanditryDesert]:[void 0,1],[R.LongevousDisciple]:[void 0,2],[R.MessengerTraversingHackerspace]:[void 0,!1],[R.TheAshblazingGrandDuke]:[void 0,0],[R.PrisonerInDeepConfinement]:[void 0,0],[R.PioneerDiverOfDeadWaters]:[void 0,2],[R.WatchmakerMasterOfDreamMachinations]:[void 0,!1],[R.IronCavalryAgainstTheScourge]:[void 0,!0],[R.TheWindSoaringValorous]:[void 0,!1],[R.SacerdosRelivedOrdeal]:[void 0,0],[R.ScholarLostInErudition]:[void 0,!0],[R.HeroOfTriumphantSong]:[void 0,!1],[R.PoetOfMourningCollapse]:[void 0,!0],[R.SpaceSealingStation]:[void 0,!0],[R.FleetOfTheAgeless]:[void 0,!0],[R.PanCosmicCommercialEnterprise]:[void 0,!0],[R.BelobogOfTheArchitects]:[void 0,!0],[R.CelestialDifferentiator]:[void 0,!1],[R.InertSalsotto]:[void 0,!0],[R.TaliaKingdomOfBanditry]:[void 0,!0],[R.SprightlyVonwacq]:[void 0,!0],[R.RutilantArena]:[void 0,!0],[R.BrokenKeel]:[void 0,!0],[R.FirmamentFrontlineGlamoth]:[void 0,!0],[R.PenaconyLandOfTheDreams]:[void 0,!0],[R.SigoniaTheUnclaimedDesolation]:[void 0,4],[R.IzumoGenseiAndTakamaDivineRealm]:[void 0,!0],[R.DuranDynastyOfRunningWolves]:[void 0,5],[R.ForgeOfTheKalpagniLantern]:[void 0,!1],[R.LushakaTheSunkenSeas]:[void 0,!1],[R.TheWondrousBananAmusementPark]:[void 0,!1],[R.BoneCollectionsSereneDemesne]:[void 0,!0],[R.GiantTreeOfRaptBrooding]:[void 0,!0]},{Text:Os}=Ce,GD=5,Qo=Lt.span`
    white-space: wrap !important;
    word-break: break-word !important;`,je={RelicEquippingBehavior:{name:"RelicEquippingBehavior",Swap:"Swap",Replace:"Replace"},PermutationsSidebarBehavior:{name:"PermutationsSidebarBehavior",NoShow:"Do Not Show",ShowXL:"Show XL",ShowXXL:"Show XXL"},RelicPotentialLoadBehavior:{name:"RelicPotentialLoadBehavior",ScoreAtStartup:"Score at startup",ManuallyClickReapplyScores:"Manually click reapply scores"},ExpandedInfoPanelPosition:{name:"ExpandedInfoPanelPosition",Above:"Above",Below:"Below"}},Fu={[je.RelicEquippingBehavior.name]:je.RelicEquippingBehavior.Replace,[je.PermutationsSidebarBehavior.name]:je.PermutationsSidebarBehavior.ShowXL,[je.RelicPotentialLoadBehavior.name]:je.RelicPotentialLoadBehavior.ScoreAtStartup,[je.ExpandedInfoPanelPosition.name]:je.ExpandedInfoPanelPosition.Below},MD=()=>{const[e]=N.useForm(),t=window.store(p=>p.settingsDrawerOpen),n=window.store(p=>p.setSettingsDrawerOpen),o=window.store(p=>p.settings),s=window.store(p=>p.setSettings),{t:r}=V("settings"),l=[{value:je.RelicEquippingBehavior.Replace,label:i.jsx("span",{children:r("RelicEquippingBehaviour.Replace")})},{value:je.RelicEquippingBehavior.Swap,label:i.jsx("span",{children:r("RelicEquippingBehaviour.Swap")})}],c=[{value:je.PermutationsSidebarBehavior.ShowXL,label:i.jsx("span",{children:r("PermutationSidebarBehaviour.XL")})},{value:je.PermutationsSidebarBehavior.ShowXXL,label:i.jsx("span",{children:r("PermutationSidebarBehaviour.XXL")})},{value:je.PermutationsSidebarBehavior.NoShow,label:i.jsx("span",{children:r("PermutationSidebarBehaviour.NoShow")})}],d=[{value:je.RelicPotentialLoadBehavior.ScoreAtStartup,label:i.jsx("span",{children:r("RelicPotentialLoadBehaviour.OnStartup")})},{value:je.RelicPotentialLoadBehavior.ManuallyClickReapplyScores,label:i.jsx("span",{children:r("RelicPotentialLoadBehaviour.Manual")})}],u=[{value:je.ExpandedInfoPanelPosition.Above,label:i.jsx("span",{children:"Show expanded info above relics preview"})},{value:je.ExpandedInfoPanelPosition.Below,label:i.jsx("span",{children:"Default: Show expanded info below relics preview"})}];I.useEffect(()=>{const p=C.clone(Fu),S=F.mergeDefinedValues(p,o);s(S),e.setFieldsValue(S)},[]);const h=(p,S)=>{s(S),Ee.delayedSave()};return i.jsx(N,{form:e,onValuesChange:h,children:i.jsx(Jn,{title:r("Title"),placement:"right",onClose:()=>n(!1),open:t,width:900,forceRender:!0,children:i.jsxs(g,{vertical:!0,gap:GD,children:[i.jsxs(g,{justify:"space-between",align:"center",children:[i.jsx(Os,{children:r("RelicEquippingBehaviour.Label")}),i.jsx(N.Item,{name:je.RelicEquippingBehavior.name,children:i.jsx(z,{style:{width:500},options:l})})]}),i.jsxs(g,{justify:"space-between",align:"center",children:[i.jsx(Os,{children:r("PermutationSidebarBehaviour.Label")}),i.jsx(N.Item,{name:je.PermutationsSidebarBehavior.name,children:i.jsx(z,{style:{width:500},options:c,optionRender:p=>i.jsx(Qo,{children:p.label})})})]}),i.jsxs(g,{justify:"space-between",align:"center",children:[i.jsx(Os,{children:r("RelicPotentialLoadBehaviour.Label")}),i.jsx(N.Item,{name:je.RelicPotentialLoadBehavior.name,children:i.jsx(z,{style:{width:500},options:d,optionRender:p=>i.jsx(Qo,{children:p.label})})})]}),i.jsxs(g,{justify:"space-between",align:"center",children:[i.jsx(Os,{children:"Optimizer Expanded info panel position"}),i.jsx(N.Item,{name:je.ExpandedInfoPanelPosition.name,children:i.jsx(z,{style:{width:500},options:u,optionRender:p=>i.jsx(Qo,{children:p.label})})})]})]})})})},Hu={1:m.Parts.Head,2:m.Parts.Hands,3:m.Parts.Body,4:m.Parts.Feet,5:m.Parts.PlanarSphere,6:m.Parts.LinkRope},wu={6:5,5:4,4:3,3:2},Hr={HPAddedRatio:m.Stats.HP_P,AttackAddedRatio:m.Stats.ATK_P,DefenceAddedRatio:m.Stats.DEF_P,HPDelta:m.Stats.HP,AttackDelta:m.Stats.ATK,DefenceDelta:m.Stats.DEF,SpeedDelta:m.Stats.SPD,CriticalDamageBase:m.Stats.CD,CriticalChanceBase:m.Stats.CR,StatusProbabilityBase:m.Stats.EHR,StatusResistanceBase:m.Stats.RES,BreakDamageAddedRatioBase:m.Stats.BE,SPRatioBase:m.Stats.ERR,HealRatioBase:m.Stats.OHB,PhysicalAddedRatio:m.Stats.Physical_DMG,FireAddedRatio:m.Stats.Fire_DMG,IceAddedRatio:m.Stats.Ice_DMG,ThunderAddedRatio:m.Stats.Lightning_DMG,WindAddedRatio:m.Stats.Wind_DMG,QuantumAddedRatio:m.Stats.Quantum_DMG,ImaginaryAddedRatio:m.Stats.Imaginary_DMG},xl={convert:e=>{const t=e.relicList||[],n=e.equipment,o=e.rank||0,s=""+e.avatarId,r=n?""+n.tid:void 0,l=n?n.level:0,c=n?n.rank:0,d=t.map(h=>xD(h)).filter(h=>!!h),u={};for(const h of d)h.equippedBy=s,u[h.part]=h;return{id:s,key:F.randomId(),form:{characterLevel:80,characterId:s,characterEidolon:o,lightCone:r,lightConeLevel:l,lightConeSuperimposition:c},equipped:u}},getConstantConversions:()=>({statConversion:Hr,partConversion:Hu,gradeConversion:wu})},ci={55001:{set:"101",part:"3",main:"436"},55002:{set:"101",part:"4",main:"441"},55003:{set:"102",part:"3",main:"434"},55004:{set:"103",part:"3",main:"433"},55005:{set:"103",part:"4",main:"443"},55006:{set:"105",part:"3",main:"434"}};function xD(e){try{const t=B.getMetadata().relics,n=""+e.tid,o=e.level||0;let s=n.substring(1,4);ci[n]&&(s=ci[n].set);const r=t.relicSets[s].name;let l=n.substring(4,5);ci[n]&&(l=ci[n].part);const c=Hu[l],d=n.substring(0,1),u=wu[d];let h=e.mainAffixId;h||(h=Object.values(t.relicMainAffixes[`${u}${l}`].affixes).find(G=>G.property==e.main_affix.type).affix_id);let p=t.relicMainAffixes[`${u}${l}`].affixes[h];ci[n]&&(p=t.relicMainAffixes[ci[n].main].affixes[h]);const S=Hr[p.property],D=p.base,E=p.step,y=D+E*o,P={stat:S,value:F.precisionRound(y*(F.isFlat(S)?1:100),5)},_=[];for(const G of e.subAffixList){let M=G.affixId;M||(M=Object.values(t.relicSubAffixes[`${u}`].affixes).find(j=>j.property==G.type).affix_id);const H=G.cnt??G.count,Z=G.step||0,X=t.relicSubAffixes[u].affixes[M],W=Hr[X.property],L=X.base,A=X.step,O=L*H+A*Z;if(H!=null&&Z!=null){const j=vl(H,Z).rolls;_.push({stat:W,value:F.precisionRound(O*(F.isFlat(W)?1:100),5),addedRolls:Math.max(0,H-1),rolls:j})}else _.push({stat:W,value:F.precisionRound(O*(F.isFlat(W)?1:100),5)})}const x={verified:!0,part:c,set:r,enhance:o,grade:u,main:P,substats:_};return Xn.augment(x)}catch(t){return console.error(t),null}}function vl(e,t){const n={high:0,mid:0,low:0};let o=!1;if(e!=null&&t!=null){n.low=e;for(let s=0;s<t;s++)n.low==0?(n.high++,n.mid--):(n.mid++,n.low--);(n.high>e||n.mid<0||n.low<0)&&(o=!0),n.high=Math.min(e,n.high),n.mid=Math.max(0,n.mid),n.low=Math.max(0,n.low)}else o=!0;return{rolls:n,errorFlag:o}}let Zc,$o,Nc,qo=!1;const Fi={fixMainStatValue:e=>{qo||Fi.initialize();const t=e.enhance,n=e.main.stat,o=Nc[e.part],r=`${e.grade}${o}`,l=B.getMetadata().relics.relicMainAffixes[r].affixes,c=Object.values(l).find(S=>S.property==$o[n]);if(!c)return 0;const d=c.step,h=c.base+d*t,p=F.isFlat(n)?h:h*100;return C.precisionRound(p,5)},fixSubStatValue:(e,t,n)=>{if(qo||Fi.initialize(),e==m.Stats.SPD)return t;const o=vD[n];if(!o)return t;const s=Zc[e];if(!s||!o[s])return t;const l=o[s][t];if(!l)return t;const c=typeof l!="number"?l[0]:l,d=B.getMetadata().relics.relicSubAffixes[n].affixes,u=Object.values(d).find(y=>y.property==$o[e]);if(!u)return t;const h=u.base,p=u.step,D=(h+p*2)*c,E=F.isFlat(e)?D:D*100;return F.precisionRound(E,5)},initialize:()=>{qo=!0;const e=xl.getConstantConversions();$o=C.flipStringMapping(e.statConversion),Nc=C.flipStringMapping(e.partConversion),Zc=F.flipMapping({ATK:m.Stats.ATK,HP:m.Stats.HP,DEF:m.Stats.DEF,ATK_:m.Stats.ATK_P,HP_:m.Stats.HP_P,DEF_:m.Stats.DEF_P,SPD:m.Stats.SPD,"CRIT Rate_":m.Stats.CR,"CRIT DMG_":m.Stats.CD,"Effect Hit Rate_":m.Stats.EHR,"Effect RES_":m.Stats.RES,"Break Effect_":m.Stats.BE})}},vD={2:{HP:{13:.8,15:.9,16:1},ATK:{6:.8,7:.9,8:1},DEF:{6:.8,7:.9,8:1},HP_:{1.3:.8,1.5:.9,1.7:1},ATK_:{1.3:.8,1.5:.9,1.7:1},DEF_:{1.7:.8,1.9:.9,2.1:1},SPD:{1:[.8,.9,1]},"CRIT Rate_":{1:.8,1.1:.9,1.2:1},"CRIT DMG_":{2:.8,2.3:.9,2.5:1},"Effect Hit Rate_":{1.3:.8,1.5:.9,1.7:1},"Effect RES_":{1.3:.8,1.5:.9,1.7:1},"Break Effect_":{2:.8,2.3:.9,2.5:1}},3:{HP:{20:.8,22:.9,25:1,40:1.6,43:1.7,45:1.8,48:1.9,50:2},ATK:{10:.8,11:.9,12:1,20:1.6,21:1.7,22:1.8,24:1.9,25:2},DEF:{10:.8,11:.9,12:1,20:1.6,21:1.7,22:1.8,24:1.9,25:2},HP_:{2:.8,2.3:.9,2.5:1,4.1:1.6,4.4:1.7,4.6:1.8,4.9:1.9,5.1:2},ATK_:{2:.8,2.3:.9,2.5:1,4.1:1.6,4.4:1.7,4.6:1.8,4.9:1.9,5.1:2},DEF_:{2.5:.8,2.9:.9,3.2:1,5.1:1.6,5.5:1.7,5.8:1.8,6.1:1.9,6.4:2},SPD:{1:[.8,.9,1],2:[1.6,1.7,1.8,1.9,2]},"CRIT Rate_":{1.5:.8,1.7:.9,1.9:1,3.1:1.6,3.3:1.7,3.4:1.8,3.6:1.9,3.8:2},"CRIT DMG_":{3.1:.8,3.4:.9,3.8:1,6.2:1.6,6.6:1.7,6.9:1.8,7.3:1.9,7.7:2},"Effect Hit Rate_":{2:.8,2.3:.9,2.5:1,4.1:1.6,4.4:1.7,4.6:1.8,4.9:1.9,5.1:2},"Effect RES_":{2:.8,2.3:.9,2.5:1,4.1:1.6,4.4:1.7,4.6:1.8,4.9:1.9,5.1:2},"Break Effect_":{3.1:.8,3.4:.9,3.8:1,6.2:1.6,6.6:1.7,6.9:1.8,7.3:1.9,7.7:2}},4:{HP:{27:.8,30:.9,33:1,54:1.6,57:1.7,60:1.8,64:1.9,67:2,81:2.4,84:2.5,88:2.6,91:2.7,94:2.8,98:2.9,101:3,108:3.2,111:3.3,115:3.4,118:3.5,121:3.6,125:3.7,128:3.8,132:3.9,135:4},ATK:{13:.8,15:.9,16:1,27:1.6,28:1.7,30:1.8,32:1.9,33:2,40:2.4,42:2.5,44:2.6,45:2.7,47:2.8,49:2.9,50:3,54:3.2,55:3.3,57:3.4,59:3.5,60:3.6,62:3.7,64:3.8,66:3.9,67:4},DEF:{13:.8,15:.9,16:1,27:1.6,28:1.7,30:1.8,32:1.9,33:2,40:2.4,42:2.5,44:2.6,45:2.7,47:2.8,49:2.9,50:3,54:3.2,55:3.3,57:3.4,59:3.5,60:3.6,62:3.7,64:3.8,66:3.9,67:4},HP_:{2.7:.8,3.1:.9,3.4:1,5.5:1.6,5.8:1.7,6.2:1.8,6.5:1.9,6.9:2,8.2:2.4,8.6:2.5,8.9:2.6,9.3:2.7,9.6:2.8,10:2.9,10.3:3,11:3.2,11.4:3.3,11.7:3.4,12:3.5,12.4:3.6,12.7:3.7,13.1:3.8,13.4:3.9,13.8:4},ATK_:{2.7:.8,3.1:.9,3.4:1,5.5:1.6,5.8:1.7,6.2:1.8,6.5:1.9,6.9:2,8.2:2.4,8.6:2.5,8.9:2.6,9.3:2.7,9.6:2.8,10:2.9,10.3:3,11:3.2,11.4:3.3,11.7:3.4,12:3.5,12.4:3.6,12.7:3.7,13.1:3.8,13.4:3.9,13.8:4},DEF_:{3.4:.8,3.8:.9,4.3:1,6.9:1.6,7.3:1.7,7.7:1.8,8.2:1.9,8.6:2,10.3:2.4,10.8:2.5,11.2:2.6,11.6:2.7,12:2.8,12.5:2.9,12.9:3,13.8:3.2,14.2:3.3,14.6:3.4,15.1:3.5,15.5:3.6,15.9:3.7,16.4:3.8,16.8:3.9,17.2:4},SPD:{1:[.8,.9],2:1,3:[1.6,1.7,1.8,1.9],4:[2,2.4],5:[2.5,2.6,2.7,2.8,2.9],6:[3,3.2,3.3,3.4],7:[3.5,3.6,3.7,3.8,3.9],8:4},"CRIT Rate_":{2:.8,2.3:.9,2.5:1,4.1:1.6,4.4:1.7,4.6:1.8,4.9:1.9,5.1:2,6.2:2.4,6.4:2.5,6.7:2.6,6.9:2.7,7.2:2.8,7.5:2.9,7.7:3,8.2:3.2,8.5:3.3,8.8:3.4,9:3.5,9.3:3.6,9.5:3.7,9.8:3.8,10.1:3.9,10.3:4},"CRIT DMG_":{4.1:.8,4.6:.9,5.1:1,8.2:1.6,8.8:1.7,9.3:1.8,9.8:1.9,10.3:2,12.4:2.4,12.9:2.5,13.4:2.6,13.9:2.7,14.5:2.8,15:2.9,15.5:3,16.5:3.2,17.1:3.3,17.6:3.4,18.1:3.5,18.6:3.6,19.1:3.7,19.6:3.8,20.2:3.9,20.7:4},"Effect Hit Rate_":{2.7:.8,3.1:.9,3.4:1,5.5:1.6,5.8:1.7,6.2:1.8,6.5:1.9,6.9:2,8.2:2.4,8.6:2.5,8.9:2.6,9.3:2.7,9.6:2.8,10:2.9,10.3:3,11:3.2,11.4:3.3,11.7:3.4,12:3.5,12.4:3.6,12.7:3.7,13.1:3.8,13.4:3.9,13.8:4},"Effect RES_":{2.7:.8,3.1:.9,3.4:1,5.5:1.6,5.8:1.7,6.2:1.8,6.5:1.9,6.9:2,8.2:2.4,8.6:2.5,8.9:2.6,9.3:2.7,9.6:2.8,10:2.9,10.3:3,11:3.2,11.4:3.3,11.7:3.4,12:3.5,12.4:3.6,12.7:3.7,13.1:3.8,13.4:3.9,13.8:4},"Break Effect_":{4.1:.8,4.6:.9,5.1:1,8.2:1.6,8.8:1.7,9.3:1.8,9.8:1.9,10.3:2,12.4:2.4,12.9:2.5,13.4:2.6,13.9:2.7,14.5:2.8,15:2.9,15.5:3,16.5:3.2,17.1:3.3,17.6:3.4,18.1:3.5,18.6:3.6,19.1:3.7,19.6:3.8,20.2:3.9,20.7:4}},5:{HP:{33:.8,38:.9,42:1,67:1.6,71:1.7,76:1.8,80:1.9,84:2,101:2.4,105:2.5,110:2.6,114:2.7,118:2.8,122:2.9,127:3,135:3.2,139:3.3,143:3.4,148:3.5,152:3.6,156:3.7,160:3.8,165:3.9,169:4,173:4.1,177:4.2,182:4.3,186:4.4,190:4.5,194:4.6,198:4.7,203:4.8,207:4.9,211:5,215:5.1,220:5.2,224:5.3,228:5.4,232:5.5,237:5.6,241:5.7,245:5.8,249:5.9,254:6},ATK:{16:.8,19:.9,21:1,33:1.6,35:1.7,38:1.8,40:1.9,42:2,50:2.4,52:2.5,55:2.6,57:2.7,59:2.8,61:2.9,63:3,67:3.2,69:3.3,71:3.4,74:3.5,76:3.6,78:3.7,80:3.8,82:3.9,84:4,86:4.1,88:4.2,91:4.3,93:4.4,95:4.5,97:4.6,99:4.7,101:4.8,103:4.9,105:5,107:5.1,110:5.2,112:5.3,114:5.4,116:5.5,118:5.6,120:5.7,122:5.8,124:5.9,127:6},DEF:{16:.8,19:.9,21:1,33:1.6,35:1.7,38:1.8,40:1.9,42:2,50:2.4,52:2.5,55:2.6,57:2.7,59:2.8,61:2.9,63:3,67:3.2,69:3.3,71:3.4,74:3.5,76:3.6,78:3.7,80:3.8,82:3.9,84:4,86:4.1,88:4.2,91:4.3,93:4.4,95:4.5,97:4.6,99:4.7,101:4.8,103:4.9,105:5,107:5.1,110:5.2,112:5.3,114:5.4,116:5.5,118:5.6,120:5.7,122:5.8,124:5.9,127:6},HP_:{3.4:.8,3.8:.9,4.3:1,6.9:1.6,7.3:1.7,7.7:1.8,8.2:1.9,8.6:2,10.3:2.4,10.8:2.5,11.2:2.6,11.6:2.7,12:2.8,12.5:2.9,12.9:3,13.8:3.2,14.2:3.3,14.6:3.4,15.1:3.5,15.5:3.6,15.9:3.7,16.4:3.8,16.8:3.9,17.2:4,17.7:4.1,18.1:4.2,18.5:4.3,19:4.4,19.4:4.5,19.8:4.6,20.3:4.7,20.7:4.8,21.1:4.9,21.6:5,22:5.1,22.4:5.2,22.8:5.3,23.3:5.4,23.7:5.5,24.1:5.6,24.6:5.7,25:5.8,25.4:5.9,25.9:6},ATK_:{3.4:.8,3.8:.9,4.3:1,6.9:1.6,7.3:1.7,7.7:1.8,8.2:1.9,8.6:2,10.3:2.4,10.8:2.5,11.2:2.6,11.6:2.7,12:2.8,12.5:2.9,12.9:3,13.8:3.2,14.2:3.3,14.6:3.4,15.1:3.5,15.5:3.6,15.9:3.7,16.4:3.8,16.8:3.9,17.2:4,17.7:4.1,18.1:4.2,18.5:4.3,19:4.4,19.4:4.5,19.8:4.6,20.3:4.7,20.7:4.8,21.1:4.9,21.6:5,22:5.1,22.4:5.2,22.8:5.3,23.3:5.4,23.7:5.5,24.1:5.6,24.6:5.7,25:5.8,25.4:5.9,25.9:6},DEF_:{4.3:.8,4.8:.9,5.4:1,8.6:1.6,9.1:1.7,9.7:1.8,10.2:1.9,10.8:2,12.9:2.4,13.5:2.5,14:2.6,14.5:2.7,15.1:2.8,15.6:2.9,16.2:3,17.2:3.2,17.8:3.3,18.3:3.4,18.9:3.5,19.4:3.6,19.9:3.7,20.5:3.8,21:3.9,21.6:4,22.1:4.1,22.6:4.2,23.2:4.3,23.7:4.4,24.3:4.5,24.8:4.6,25.3:4.7,25.9:4.8,26.4:4.9,27:5,27.5:5.1,28:5.2,28.6:5.3,29.1:5.4,29.7:5.5,30.2:5.6,30.7:5.7,31.3:5.8,31.8:5.9,32.4:6},SPD:{2:[.8,.9,1],4:[1.6,1.7,1.8,1.9],5:2,6:[2.4,2.5,2.6],7:[2.7,2.8,2.9,3],8:[3.2,3.3,3.4],9:[3.5,3.6,3.7,3.8],10:[3.9,4,4.1,4.2],11:[4.3,4.4,4.5,4.6],12:[4.7,4.8,4.9],13:[5,5.1,5.2,5.3],14:[5.4,5.5,5.6,5.7],15:[5.8,5.9,6]},"CRIT Rate_":{2.5:.8,2.9:.9,3.2:1,5.1:1.6,5.5:1.7,5.8:1.8,6.1:1.9,6.4:2,7.7:2.4,8.1:2.5,8.4:2.6,8.7:2.7,9:2.8,9.3:2.9,9.7:3,10.3:3.2,10.6:3.3,11:3.4,11.3:3.5,11.6:3.6,11.9:3.7,12.3:3.8,12.6:3.9,12.9:4,13.2:4.1,13.6:4.2,13.9:4.3,14.2:4.4,14.5:4.5,14.9:4.6,15.2:4.7,15.5:4.8,15.8:4.9,16.2:5,16.5:5.1,16.8:5.2,17.1:5.3,17.4:5.4,17.8:5.5,18.1:5.6,18.4:5.7,18.7:5.8,19.1:5.9,19.4:6},"CRIT DMG_":{5.1:.8,5.8:.9,6.4:1,10.3:1.6,11:1.7,11.6:1.8,12.3:1.9,12.9:2,15.5:2.4,16.2:2.5,16.8:2.6,17.4:2.7,18.1:2.8,18.7:2.9,19.4:3,20.7:3.2,21.3:3.3,22:3.4,22.6:3.5,23.3:3.6,23.9:3.7,24.6:3.8,25.2:3.9,25.9:4,26.5:4.1,27.2:4.2,27.8:4.3,28.5:4.4,29.1:4.5,29.8:4.6,30.4:4.7,31.1:4.8,31.7:4.9,32.4:5,33:5.1,33.6:5.2,34.3:5.3,34.9:5.4,35.6:5.5,36.2:5.6,36.9:5.7,37.5:5.8,38.2:5.9,38.8:6},"Effect Hit Rate_":{3.4:.8,3.8:.9,4.3:1,6.9:1.6,7.3:1.7,7.7:1.8,8.2:1.9,8.6:2,10.3:2.4,10.8:2.5,11.2:2.6,11.6:2.7,12:2.8,12.5:2.9,12.9:3,13.8:3.2,14.2:3.3,14.6:3.4,15.1:3.5,15.5:3.6,15.9:3.7,16.4:3.8,16.8:3.9,17.2:4,17.7:4.1,18.1:4.2,18.5:4.3,19:4.4,19.4:4.5,19.8:4.6,20.3:4.7,20.7:4.8,21.1:4.9,21.6:5,22:5.1,22.4:5.2,22.8:5.3,23.3:5.4,23.7:5.5,24.1:5.6,24.6:5.7,25:5.8,25.4:5.9,25.9:6},"Effect RES_":{3.4:.8,3.8:.9,4.3:1,6.9:1.6,7.3:1.7,7.7:1.8,8.2:1.9,8.6:2,10.3:2.4,10.8:2.5,11.2:2.6,11.6:2.7,12:2.8,12.5:2.9,12.9:3,13.8:3.2,14.2:3.3,14.6:3.4,15.1:3.5,15.5:3.6,15.9:3.7,16.4:3.8,16.8:3.9,17.2:4,17.7:4.1,18.1:4.2,18.5:4.3,19:4.4,19.4:4.5,19.8:4.6,20.3:4.7,20.7:4.8,21.1:4.9,21.6:5,22:5.1,22.4:5.2,22.8:5.3,23.3:5.4,23.7:5.5,24.1:5.6,24.6:5.7,25:5.8,25.4:5.9,25.9:6},"Break Effect_":{5.1:.8,5.8:.9,6.4:1,10.3:1.6,11:1.7,11.6:1.8,12.3:1.9,12.9:2,15.5:2.4,16.2:2.5,16.8:2.6,17.4:2.7,18.1:2.8,18.7:2.9,19.4:3,20.7:3.2,21.3:3.3,22:3.4,22.6:3.5,23.3:3.6,23.9:3.7,24.6:3.8,25.2:3.9,25.9:4,26.5:4.1,27.2:4.2,27.8:4.3,28.5:4.4,29.1:4.5,29.8:4.6,30.4:4.7,31.1:4.8,31.7:4.9,32.4:5,33:5.1,33.6:5.2,34.3:5.3,34.9:5.4,35.6:5.5,36.2:5.6,36.9:5.7,37.5:5.8,38.2:5.9,38.8:6}}},Ou={calculateIncrementCounts(e,t){let n=1/0,o=null;function s(r,l,c){if(c===Object.keys(t).length){Math.abs(r-e)<Math.abs(n-e)&&(n=r,o={...l});return}const d=Object.keys(t)[c];for(let u=0;r+u*t[d]<=e+.01;u++)l[d]=u,s(r+u*t[d],l,c+1)}return s(0,{high:0,mid:0,low:0},0),o},calculateRelicSubstatRolls(e){if(e.verified&&!e.substats.some(n=>n.rolls==null))return;if(e.grade<5){e.substats.map(n=>{n.addedRolls=0});return}let t=0;if(e.substats.forEach(n=>{const o=Re[n.stat][e.grade],s=this.calculateIncrementCounts(n.value,o);s&&(n.addedRolls=Math.min(5,Math.max(0,s.high+s.mid+s.low-1)),n.rolls=s,t+=n.addedRolls)}),t>Math.floor(e.enhance/3)){const n=e.substats.reduce((o,s)=>o.addedRolls>s.addedRolls?o:s);n.addedRolls-=1}}},Xn={augment:function(e){const t={};if(e.grade&&!e.main)return null;const n=e.main.stat;e.main.value=Fi.fixMainStatValue(e);const o=e.main.value;t.mainStat=n,t.mainValue=o,_D(e);for(const s of e.substats){const r=s.stat;s.value=F.precisionRound(s.value),s.value=Fi.fixSubStatValue(r,s.value,e.grade),t[r]=s.value}return e.enhance>12&&e.grade!=5&&(e.grade=5),e.id||(e.id=F.randomId()),e.augmentedStats=t,AD([e]),Ou.calculateRelicSubstatRolls(e),e}},Vc={[a.HP]:0,[a.ATK]:1,[a.DEF]:2,[a.HP_P]:3,[a.ATK_P]:4,[a.DEF_P]:5,[a.SPD]:6,[a.CR]:7,[a.CD]:8,[a.EHR]:9,[a.RES]:10,[a.BE]:11};function _D(e){e.substats=e.substats.sort((t,n)=>Vc[t.stat]-Vc[n.stat])}function AD(e){return e.map(t=>{for(const n of Object.values(m.Stats))t.augmentedStats&&(t.augmentedStats[n]=t.augmentedStats[n]||0,F.isFlat(n)||(t.augmentedStats.mainStat==n&&(t.augmentedStats.mainValue=t.augmentedStats.mainValue/100),t.augmentedStats[n]=t.augmentedStats[n]/100));return t})}const wr={BLUE:{colorTextBase:"#ffffff",colorBgBase:"#182239",colorPrimary:"#1677FF"},ALT:{colorTextBase:"#ffffff",colorBgBase:"#182239",colorPrimary:"#1677FF"}};function _l(e){return{"--ag-background-color":e.colorBgContainer,"--ag-odd-row-background-color":e.colorBgElevated,"--ag-header-background-color":e.colorBgLayout,"--ag-border-color":e.colorBorderSecondary,"--ag-row-hover-color":e.colorPrimary}}function LD(e){return{token:{motionUnit:.1,opacityLoading:.2,colorBgBase:e.colorBgBase,colorTextBase:e.colorTextBase,colorPrimary:e.colorPrimary,colorPrimaryBorderHover:e.colorPrimary,screenXL:1530,screenXLMin:1530,screenXXL:1660,screenXXLMin:1660},components:{Collapse:{contentPadding:"0px 0px"},Menu:{margin:2,itemPaddingInline:0,subMenuItemBg:"rgba(255, 255, 255, 0.05)"},Table:{headerBg:"#00000036",cellPaddingInlineSM:5,cellPaddingBlockSM:6},Slider:{dotBorderColor:e.colorPrimary,dotActiveBorderColor:e.colorPrimary,handleActiveColor:e.colorPrimary,handleColor:e.colorPrimary,handleColorDisabled:e.colorPrimary,trackBg:e.colorPrimary,trackHoverBg:e.colorPrimary,railHoverBg:"#ffffff80",railBg:"#ffffff12",handleSize:5,handleSizeHover:5,handleLineWidth:3,handleLineWidthHover:3,railSize:3},InputNumber:{paddingInlineSM:6},Tag:{defaultColor:"#ffffff"},Notification:{width:450},Dropdown:{zIndexPopup:900}},algorithm:Ft.darkAlgorithm}}const FD={1001:{ATK:0,"ATK%":0,DEF:1,"DEF%":1,HP:.5,"HP%":.5,SPD:1,"CRIT Rate":0,"CRIT DMG":0,"Effect Hit Rate":1,"Effect RES":.75,"Break Effect":0,"Energy Regeneration Rate":1,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1002:{ATK:.75,"ATK%":.75,DEF:0,"DEF%":0,HP:0,"HP%":0,SPD:1,"CRIT Rate":1,"CRIT DMG":1,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":1,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1003:{ATK:.75,"ATK%":.75,DEF:0,"DEF%":0,HP:0,"HP%":0,SPD:1,"CRIT Rate":1,"CRIT DMG":1,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":.5,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":1,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1004:{ATK:.75,"ATK%":.75,DEF:0,"DEF%":0,HP:0,"HP%":0,SPD:1,"CRIT Rate":1,"CRIT DMG":1,"Effect Hit Rate":1,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":1,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":1},1005:{ATK:1,"ATK%":1,DEF:0,"DEF%":0,HP:0,"HP%":0,SPD:1,"CRIT Rate":.5,"CRIT DMG":.5,"Effect Hit Rate":.5,"Effect RES":0,"Break Effect":.75,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":1,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1006:{ATK:.5,"ATK%":.5,DEF:.25,"DEF%":.25,HP:.25,"HP%":.25,SPD:1,"CRIT Rate":.75,"CRIT DMG":.75,"Effect Hit Rate":1,"Effect RES":0,"Break Effect":.75,"Energy Regeneration Rate":1,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":1,"Imaginary DMG Boost":0},1008:{ATK:.75,"ATK%":.75,DEF:0,"DEF%":0,HP:0,"HP%":0,SPD:1,"CRIT Rate":1,"CRIT DMG":1,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":1,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1009:{ATK:.75,"ATK%":.75,DEF:.75,"DEF%":.75,HP:.75,"HP%":.75,SPD:1,"CRIT Rate":0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":.75,"Break Effect":.5,"Energy Regeneration Rate":1,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":1,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1013:{ATK:.75,"ATK%":.75,DEF:0,"DEF%":0,HP:0,"HP%":0,SPD:1,"CRIT Rate":1,"CRIT DMG":1,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":1,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1101:{ATK:0,"ATK%":0,DEF:.75,"DEF%":.75,HP:.75,"HP%":.75,SPD:1,"CRIT Rate":0,"CRIT DMG":1,"Effect Hit Rate":0,"Effect RES":.75,"Break Effect":0,"Energy Regeneration Rate":1,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":1,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1102:{ATK:.75,"ATK%":.75,DEF:0,"DEF%":0,HP:0,"HP%":0,SPD:1,"CRIT Rate":1,"CRIT DMG":1,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":1,"Imaginary DMG Boost":0},1103:{ATK:.75,"ATK%":.75,DEF:0,"DEF%":0,HP:0,"HP%":0,SPD:1,"CRIT Rate":1,"CRIT DMG":1,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":1,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1104:{ATK:0,"ATK%":0,DEF:1,"DEF%":1,HP:.5,"HP%":.5,SPD:1,"CRIT Rate":0,"CRIT DMG":0,"Effect Hit Rate":.75,"Effect RES":.75,"Break Effect":0,"Energy Regeneration Rate":1,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1105:{ATK:0,"ATK%":0,DEF:.75,"DEF%":.75,HP:1,"HP%":1,SPD:1,"CRIT Rate":0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":.75,"Break Effect":0,"Energy Regeneration Rate":1,"Outgoing Healing Boost":1,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1106:{ATK:0,"ATK%":0,DEF:.75,"DEF%":.75,HP:.75,"HP%":.75,SPD:1,"CRIT Rate":0,"CRIT DMG":0,"Effect Hit Rate":1,"Effect RES":.75,"Break Effect":0,"Energy Regeneration Rate":1,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":1,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1107:{ATK:.75,"ATK%":.75,DEF:0,"DEF%":0,HP:0,"HP%":0,SPD:1,"CRIT Rate":1,"CRIT DMG":1,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":1,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1108:{ATK:1,"ATK%":1,DEF:0,"DEF%":0,HP:0,"HP%":0,SPD:1,"CRIT Rate":0,"CRIT DMG":0,"Effect Hit Rate":1,"Effect RES":0,"Break Effect":1,"Energy Regeneration Rate":1,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":1,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1109:{ATK:.75,"ATK%":.75,DEF:0,"DEF%":0,HP:0,"HP%":0,SPD:1,"CRIT Rate":1,"CRIT DMG":1,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":1,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1110:{ATK:0,"ATK%":0,DEF:.75,"DEF%":.75,HP:1,"HP%":1,SPD:1,"CRIT Rate":0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":.75,"Break Effect":0,"Energy Regeneration Rate":1,"Outgoing Healing Boost":1,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1111:{ATK:1,"ATK%":1,DEF:0,"DEF%":0,HP:0,"HP%":0,SPD:1,"CRIT Rate":0,"CRIT DMG":0,"Effect Hit Rate":1,"Effect RES":0,"Break Effect":.75,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":1,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1112:{ATK:.75,"ATK%":.75,DEF:0,"DEF%":0,HP:0,"HP%":0,SPD:1,"CRIT Rate":1,"CRIT DMG":1,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":1,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1201:{ATK:.75,"ATK%":.75,DEF:0,"DEF%":0,HP:0,"HP%":0,SPD:1,"CRIT Rate":1,"CRIT DMG":1,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":1,"Imaginary DMG Boost":0},1202:{ATK:1,"ATK%":1,DEF:.75,"DEF%":.75,HP:.75,"HP%":.75,SPD:1,"CRIT Rate":0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":.75,"Break Effect":0,"Energy Regeneration Rate":1,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1203:{ATK:1,"ATK%":1,DEF:.75,"DEF%":.75,HP:.75,"HP%":.75,SPD:1,"CRIT Rate":0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":.75,"Break Effect":0,"Energy Regeneration Rate":1,"Outgoing Healing Boost":1,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1204:{ATK:.75,"ATK%":.75,DEF:0,"DEF%":0,HP:0,"HP%":0,SPD:1,"CRIT Rate":1,"CRIT DMG":1,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":1,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1205:{ATK:.25,"ATK%":.25,DEF:0,"DEF%":0,HP:1,"HP%":1,SPD:1,"CRIT Rate":1,"CRIT DMG":1,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":1,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1206:{ATK:.75,"ATK%":.75,DEF:0,"DEF%":0,HP:0,"HP%":0,SPD:1,"CRIT Rate":1,"CRIT DMG":1,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":.5,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":1,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1207:{ATK:.75,"ATK%":.75,DEF:0,"DEF%":0,HP:0,"HP%":0,SPD:1,"CRIT Rate":1,"CRIT DMG":1,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":1,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":1},1208:{ATK:0,"ATK%":0,DEF:.75,"DEF%":.75,HP:1,"HP%":1,SPD:1,"CRIT Rate":0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":.75,"Break Effect":0,"Energy Regeneration Rate":1,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1209:{ATK:.75,"ATK%":.75,DEF:0,"DEF%":0,HP:0,"HP%":0,SPD:1,"CRIT Rate":1,"CRIT DMG":1,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":1,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1210:{ATK:1,"ATK%":1,DEF:0,"DEF%":0,HP:0,"HP%":0,SPD:1,"CRIT Rate":0,"CRIT DMG":0,"Effect Hit Rate":1,"Effect RES":0,"Break Effect":.75,"Energy Regeneration Rate":1,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":1,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1211:{ATK:0,"ATK%":0,DEF:.75,"DEF%":.75,HP:1,"HP%":1,SPD:1,"CRIT Rate":0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":.75,"Break Effect":0,"Energy Regeneration Rate":1,"Outgoing Healing Boost":1,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1212:{ATK:.75,"ATK%":.75,DEF:0,"DEF%":0,HP:0,"HP%":0,SPD:1,"CRIT Rate":1,"CRIT DMG":1,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":1,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1213:{ATK:.75,"ATK%":.75,DEF:0,"DEF%":0,HP:0,"HP%":0,SPD:1,"CRIT Rate":1,"CRIT DMG":1,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":1},1214:{ATK:.75,"ATK%":.75,DEF:0,"DEF%":0,HP:0,"HP%":0,SPD:1,"CRIT Rate":1,"CRIT DMG":1,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":1,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":1,"Imaginary DMG Boost":0},1215:{ATK:0,"ATK%":0,DEF:.75,"DEF%":.75,HP:.75,"HP%":.75,SPD:1,"CRIT Rate":0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":.75,"Break Effect":0,"Energy Regeneration Rate":1,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1217:{ATK:0,"ATK%":0,DEF:.75,"DEF%":.75,HP:1,"HP%":1,SPD:1,"CRIT Rate":0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":.75,"Break Effect":0,"Energy Regeneration Rate":1,"Outgoing Healing Boost":1,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1218:{ATK:.5,"ATK%":.5,DEF:.5,"DEF%":.5,HP:.5,"HP%":.5,SPD:1,"CRIT Rate":0,"CRIT DMG":0,"Effect Hit Rate":1,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":1,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1220:{ATK:.75,"ATK%":.75,DEF:0,"DEF%":0,HP:0,"HP%":0,SPD:1,"CRIT Rate":1,"CRIT DMG":1,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":1,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1221:{ATK:.75,"ATK%":.75,DEF:0,"DEF%":0,HP:0,"HP%":0,SPD:1,"CRIT Rate":1,"CRIT DMG":1,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":1,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1222:{ATK:.75,"ATK%":.75,DEF:.5,"DEF%":.5,HP:.5,"HP%":.5,SPD:1,"CRIT Rate":0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":.75,"Break Effect":1,"Energy Regeneration Rate":1,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":1,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1223:{ATK:.75,"ATK%":.75,DEF:0,"DEF%":0,HP:0,"HP%":0,SPD:1,"CRIT Rate":1,"CRIT DMG":1,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":1,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1224:{ATK:.75,"ATK%":.75,DEF:0,"DEF%":0,HP:0,"HP%":0,SPD:1,"CRIT Rate":1,"CRIT DMG":1,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":1},1301:{ATK:0,"ATK%":0,DEF:.75,"DEF%":.75,HP:.75,"HP%":.75,SPD:1,"CRIT Rate":0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":.75,"Break Effect":1,"Energy Regeneration Rate":1,"Outgoing Healing Boost":1,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1302:{ATK:.75,"ATK%":.75,DEF:0,"DEF%":0,HP:0,"HP%":0,SPD:1,"CRIT Rate":1,"CRIT DMG":1,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":1,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1303:{ATK:0,"ATK%":0,DEF:.75,"DEF%":.75,HP:.75,"HP%":.75,SPD:1,"CRIT Rate":0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":.75,"Break Effect":1,"Energy Regeneration Rate":1,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1304:{ATK:0,"ATK%":0,DEF:1,"DEF%":1,HP:.5,"HP%":.5,SPD:1,"CRIT Rate":1,"CRIT DMG":1,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":1,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":1},1305:{ATK:.75,"ATK%":.75,DEF:0,"DEF%":0,HP:0,"HP%":0,SPD:1,"CRIT Rate":1,"CRIT DMG":1,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":1},1306:{ATK:0,"ATK%":0,DEF:.75,"DEF%":.75,HP:.75,"HP%":.75,SPD:1,"CRIT Rate":0,"CRIT DMG":1,"Effect Hit Rate":0,"Effect RES":.75,"Break Effect":0,"Energy Regeneration Rate":1,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1307:{ATK:1,"ATK%":1,DEF:0,"DEF%":0,HP:0,"HP%":0,SPD:1,"CRIT Rate":0,"CRIT DMG":0,"Effect Hit Rate":1,"Effect RES":0,"Break Effect":.5,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":1,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1308:{ATK:.75,"ATK%":.75,DEF:0,"DEF%":0,HP:0,"HP%":0,SPD:1,"CRIT Rate":1,"CRIT DMG":1,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":1,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1309:{ATK:1,"ATK%":1,DEF:.75,"DEF%":.75,HP:.75,"HP%":.75,SPD:1,"CRIT Rate":0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":.75,"Break Effect":0,"Energy Regeneration Rate":1,"Outgoing Healing Boost":0,"Physical DMG Boost":1,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1310:{ATK:1,"ATK%":1,DEF:0,"DEF%":0,HP:0,"HP%":0,SPD:1,"CRIT Rate":0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":1,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1312:{ATK:.75,"ATK%":.75,DEF:0,"DEF%":0,HP:0,"HP%":0,SPD:1,"CRIT Rate":1,"CRIT DMG":1,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":1,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},1314:{ATK:.75,"ATK%":.75,DEF:0,"DEF%":0,HP:0,"HP%":0,SPD:1,"CRIT Rate":1,"CRIT DMG":1,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":1,"Imaginary DMG Boost":0},1315:{ATK:.5,"ATK%":.5,DEF:0,"DEF%":0,HP:0,"HP%":0,SPD:1,"CRIT Rate":.75,"CRIT DMG":.75,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":1,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":1,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},8001:{ATK:.75,"ATK%":.75,DEF:0,"DEF%":0,HP:0,"HP%":0,SPD:1,"CRIT Rate":1,"CRIT DMG":1,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":.5,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":1,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},8002:{ATK:.75,"ATK%":.75,DEF:0,"DEF%":0,HP:0,"HP%":0,SPD:1,"CRIT Rate":1,"CRIT DMG":1,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":.5,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":1,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},8003:{ATK:0,"ATK%":0,DEF:1,"DEF%":1,HP:.5,"HP%":.5,SPD:1,"CRIT Rate":0,"CRIT DMG":0,"Effect Hit Rate":.75,"Effect RES":.75,"Break Effect":0,"Energy Regeneration Rate":1,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},8004:{ATK:0,"ATK%":0,DEF:1,"DEF%":1,HP:.5,"HP%":.5,SPD:1,"CRIT Rate":0,"CRIT DMG":0,"Effect Hit Rate":.75,"Effect RES":.75,"Break Effect":0,"Energy Regeneration Rate":1,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},8005:{ATK:0,"ATK%":0,DEF:.75,"DEF%":.75,HP:.75,"HP%":.75,SPD:1,"CRIT Rate":0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":.75,"Break Effect":1,"Energy Regeneration Rate":1,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},8006:{ATK:0,"ATK%":0,DEF:.75,"DEF%":.75,HP:.75,"HP%":.75,SPD:1,"CRIT Rate":0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":.75,"Break Effect":1,"Energy Regeneration Rate":1,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0}},HD=()=>(e,t)=>{console.log(`Publishing [${e}] with data: ${t}`),document.dispatchEvent(new CustomEvent(e,{detail:t}))},{Text:Ui}=Ce,wD=Lt(Mt)`
    margin-top: 10px !important;
    margin-bottom: 10px !important;
`,OD=Lt($t)`
    width: 62px
`;function kD(){const{t:e}=V(["modals","common"]),t=HD(),[n]=N.useForm(),o=window.store(G=>G.scoringAlgorithmFocusCharacter),s=window.store(G=>G.setScoringAlgorithmFocusCharacter),r=window.store(G=>G.setScoringModalOpen),l=window.store(G=>G.scoringModalOpen);function c(G){s(G)}function d(G){for(const M of Object.entries(G.stats))M[1]==0&&(G.stats[M[0]]=null);return G}I.useEffect(()=>{const G=o;if(G){let M=C.clone(B.getScoringMetadata(G));M=d(M),n.setFieldsValue(M)}},[o,l,n]);const u=220,h=5,p=260;function S(G){return i.jsxs(g,{justify:"flex-start",style:{width:u},align:"center",gap:5,children:[i.jsx(N.Item,{name:["stats",G.stat],children:i.jsx(OD,{controls:!1,size:"small",min:0,max:1})}),i.jsxs(g,{children:[i.jsx("img",{src:k.getStatIcon(G.stat),style:{width:25,height:25,marginRight:3}}),i.jsx(Ui,{style:{lineHeight:1.8},children:e(`common:ReadableStats.${G.stat}`)})]})]})}function D(){console.log("onModalOk OK");const G=n.getFieldsValue();E(G),r(!1),t("refreshRelicsScore","null")}const E=G=>{if(!o)return;console.log("Form finished",G),G.stats[a.ATK_P]=G.stats[a.ATK],G.stats[a.DEF_P]=G.stats[a.DEF],G.stats[a.HP_P]=G.stats[a.HP];const M=C.clone(B.getMetadata().characters[o].scoringMetadata),H=B.getScoringMetadata(o);M.simulation=H.simulation,B.updateCharacterScoreOverrides(o,G)},y=()=>{if(!o)return;const G=B.getMetadata().characters[o].scoringMetadata,M=d(G);B.updateCharacterScoreOverrides(o,G),n.setFieldsValue(M)};function P(){const G=()=>{console.log("Reset the scoring algorithm for all characters");const M=window.store.getState().charactersById;for(const H of Object.keys(M)){const Z=B.getMetadata().characters[H].scoringMetadata;B.updateCharacterScoreOverrides(H,Z)}if(o){const H=B.getMetadata().characters[o].scoringMetadata,Z=d(H);n.setFieldsValue(Z)}};return i.jsx(Cn,{title:e("Scoring.ResetAllConfirm.Title"),description:e("Scoring.ResetAllConfirm.Description"),onConfirm:G,okText:e("common:Yes"),cancelText:e("common:No"),children:i.jsx(Y,{danger:!0,children:e("Scoring.Footer.ResetAll")})})}const _=()=>{r(!1)},x=o?k.getCharacterPreviewById(o):k.getBlank();return i.jsx(_t,{open:l,width:900,destroyOnClose:!0,centered:!0,forceRender:!0,onOk:D,onCancel:_,footer:[i.jsx(Y,{onClick:_,children:e("common:Cancel")},"back"),i.jsx(Y,{onClick:y,children:e("Scoring.Footer.Reset")},"default"),i.jsx(P,{},"resetAll"),i.jsx(Y,{type:"primary",onClick:D,children:e("Scoring.Footer.Save")},"submit")],children:i.jsxs(N,{form:n,preserve:!1,layout:"vertical",onFinish:E,children:[i.jsx(wD,{children:e("Scoring.StatWeightsHeader")}),i.jsxs(g,{gap:20,children:[i.jsxs(g,{vertical:!0,gap:5,children:[i.jsx(N.Item,{name:"characterId",children:i.jsx(Li,{value:"",selectStyle:{},onChange:c})}),i.jsx("div",{style:{height:230,width:u,overflow:"hidden"},children:i.jsx("img",{src:x,style:{width:u}})})]}),i.jsx(fa,{}),i.jsx(g,{vertical:!0,children:i.jsx(g,{justify:"space-between",children:i.jsxs(g,{vertical:!0,gap:h*2,children:[i.jsxs(g,{vertical:!0,gap:1,justify:"flex-start",children:[i.jsx(Ui,{style:{marginLeft:5},children:e("common:Parts.Body")}),i.jsx(N.Item,{name:["parts",b.Body],children:i.jsxs(z,{mode:"multiple",allowClear:!0,style:{width:p},placeholder:e("common:Parts.Body"),maxTagCount:"responsive",children:[i.jsx(z.Option,{value:a.HP_P,children:e(`common:Stats.${a.HP_P}`)}),i.jsx(z.Option,{value:a.ATK_P,children:e(`common:Stats.${a.ATK_P}`)}),i.jsx(z.Option,{value:a.DEF_P,children:e(`common:Stats.${a.DEF_P}`)}),i.jsx(z.Option,{value:a.CR,children:e(`common:Stats.${a.CR}`)}),i.jsx(z.Option,{value:a.CD,children:e(`common:Stats.${a.CD}`)}),i.jsx(z.Option,{value:a.OHB,children:e(`common:Stats.${a.OHB}`)}),i.jsx(z.Option,{value:a.EHR,children:e(`common:Stats.${a.EHR}`)})]})})]}),i.jsxs(g,{vertical:!0,gap:1,justify:"flex-start",children:[i.jsx(Ui,{style:{marginLeft:5},children:e("common:Parts.Feet")}),i.jsx(N.Item,{name:["parts",b.Feet],children:i.jsxs(z,{mode:"multiple",allowClear:!0,style:{width:p},placeholder:e("common:Parts.Feet"),maxTagCount:"responsive",children:[i.jsx(z.Option,{value:a.HP_P,children:e(`common:Stats.${a.HP_P}`)}),i.jsx(z.Option,{value:a.ATK_P,children:e(`common:Stats.${a.ATK_P}`)}),i.jsx(z.Option,{value:a.DEF_P,children:e(`common:Stats.${a.DEF_P}`)}),i.jsx(z.Option,{value:a.SPD,children:e(`common:Stats.${a.SPD}`)})]})})]}),i.jsxs(g,{vertical:!0,gap:1,justify:"flex-start",children:[i.jsx(Ui,{style:{marginLeft:5},children:e("common:Parts.PlanarSphere")}),i.jsx(N.Item,{name:["parts",b.PlanarSphere],children:i.jsxs(z,{mode:"multiple",allowClear:!0,style:{width:p},placeholder:e("common:Parts.PlanarSphere"),listHeight:400,maxTagCount:"responsive",children:[i.jsx(z.Option,{value:a.HP_P,children:e(`common:Stats.${a.HP_P}`)}),i.jsx(z.Option,{value:a.ATK_P,children:e(`common:Stats.${a.ATK_P}`)}),i.jsx(z.Option,{value:a.DEF_P,children:e(`common:Stats.${a.DEF_P}`)}),i.jsx(z.Option,{value:a.Physical_DMG,children:e(`common:Stats.${a.Physical_DMG}`)}),i.jsx(z.Option,{value:a.Fire_DMG,children:e(`common:Stats.${a.Fire_DMG}`)}),i.jsx(z.Option,{value:a.Ice_DMG,children:e(`common:Stats.${a.Ice_DMG}`)}),i.jsx(z.Option,{value:a.Lightning_DMG,children:e(`common:Stats.${a.Lightning_DMG}`)}),i.jsx(z.Option,{value:a.Wind_DMG,children:e(`common:Stats.${a.Wind_DMG}`)}),i.jsx(z.Option,{value:a.Quantum_DMG,children:e(`common:Stats.${a.Quantum_DMG}`)}),i.jsx(z.Option,{value:a.Imaginary_DMG,children:e(`common:Stats.${a.Imaginary_DMG}`)})]})})]}),i.jsxs(g,{vertical:!0,gap:1,justify:"flex-start",children:[i.jsx(Ui,{style:{marginLeft:5},children:e("common:Parts.LinkRope")}),i.jsx(N.Item,{name:["parts",b.LinkRope],children:i.jsxs(z,{mode:"multiple",allowClear:!0,style:{width:p},placeholder:e("common:Parts.LinkRope"),maxTagCount:"responsive",children:[i.jsx(z.Option,{value:a.HP_P,children:e(`common:Stats.${a.HP_P}`)}),i.jsx(z.Option,{value:a.ATK_P,children:e(`common:Stats.${a.ATK_P}`)}),i.jsx(z.Option,{value:a.DEF_P,children:e(`common:Stats.${a.DEF_P}`)}),i.jsx(z.Option,{value:a.BE,children:e(`common:Stats.${a.BE}`)}),i.jsx(z.Option,{value:a.ERR,children:e(`common:Stats.${a.ERR}`)})]})})]})]})})}),i.jsx(fa,{}),i.jsxs(g,{vertical:!0,gap:3,children:[i.jsx(S,{stat:a.ATK}),i.jsx(S,{stat:a.HP}),i.jsx(S,{stat:a.DEF}),i.jsx(S,{stat:a.SPD}),i.jsx(S,{stat:a.CR}),i.jsx(S,{stat:a.CD}),i.jsx(S,{stat:a.EHR}),i.jsx(S,{stat:a.RES}),i.jsx(S,{stat:a.BE})]})]}),i.jsx(Mt,{style:{marginTop:10,marginBottom:40},children:i.jsx(At,{text:e("Scoring.WeightMethodology.Header"),linkIcon:!0,url:"https://github.com/fribbels/hsr-optimizer/blob/main/docs/guides/en/stat-score.md"})})]})})}function zc(e){return e??0}var ku=(e=>(e[e.DEFAULT=0]="DEFAULT",e[e.DEFAULT_NO_SPEED=1]="DEFAULT_NO_SPEED",e[e.MODIFIED=2]="MODIFIED",e))(ku||{});function KD(e,t){let n=!1,o=!0,s=!1;for(const r of Object.values(a)){const l=t.stats[r];e.stats[r]!=l&&(n=!0,r==a.SPD&&l==0?s=!0:o=!1)}return o&&s||!n&&e.stats[a.SPD]==0?1:n?2:0}function er(e,t){t.modified=!1;for(const n of Object.values(a))zc(t.stats[n])!=zc(e.stats[n])&&(t.modified=!0)}const Uc={};function jD(e,t,n){const o=Uc[e];o&&clearTimeout(o),Uc[e]=setTimeout(()=>{n()},t)}const Xc={metadata:{}};var uo=(e=>(e.MAIN="/hsr-optimizer",e.BETA="/dreary-quibbles",e))(uo||{});const wt="/dreary-quibbles",de={OPTIMIZER:"OPTIMIZER",CHARACTERS:"CHARACTERS",RELICS:"RELICS",IMPORT:"IMPORT",GETTING_STARTED:"GETTING_STARTED",CHANGELOG:"CHANGELOG",RELIC_SCORER:"RELIC_SCORER",SHOWCASE:"SHOWCASE",WARP:"WARP",WEBGPU_TEST:"WEBGPU_TEST",METADATA_TEST:"METADATA_TEST",HOME:"HOME"},oa={[de.HOME]:wt,[de.OPTIMIZER]:wt+"#main",[de.RELIC_SCORER]:wt+"#scorer",[de.SHOWCASE]:wt+"#showcase",[de.WARP]:wt+"#warp",[de.CHANGELOG]:wt+"#changelog",[de.GETTING_STARTED]:wt+"#getting-started",[de.WEBGPU_TEST]:wt+"#webgpu",[de.METADATA_TEST]:wt+"#metadata"},WD={[oa[de.OPTIMIZER]]:de.OPTIMIZER,[oa[de.RELIC_SCORER]]:de.SHOWCASE,[oa[de.SHOWCASE]]:de.SHOWCASE,[oa[de.WARP]]:de.WARP,[oa[de.CHANGELOG]]:de.CHANGELOG,[oa[de.GETTING_STARTED]]:de.GETTING_STARTED,[oa[de.WEBGPU_TEST]]:de.WEBGPU_TEST,[oa[de.METADATA_TEST]]:de.METADATA_TEST,[oa[de.HOME]]:de.HOME},Ku={[Ne.optimizerCharacterId]:null,[Ne.relicScorerSidebarOpen]:!0,[Ne.scoringType]:Mi,[Ne.combatScoreDetails]:nl,[Ne.computeEngine]:xi,[Ne.showcaseStandardMode]:!1,[Ne.showcaseDarkMode]:!1,[Ne.showcaseUID]:!0,[Ne.showcasePreciseSpd]:!1};function ZD(){const e=C.stripTrailingSlashes(window.location.pathname);return WD[e+window.location.hash.split("?")[0]]??de.HOME}window.store=Hm(e=>({version:eo,colorTheme:wr.BLUE,globalThemeConfig:LD(wr.BLUE),formValues:void 0,optimizerGrid:void 0,comboState:{},optimizerTabFocusCharacter:void 0,characterTabFocusCharacter:void 0,scoringAlgorithmFocusCharacter:void 0,statTracesDrawerFocusCharacter:void 0,relicsTabFocusCharacter:void 0,inventoryWidth:9,rowLimit:10,activeKey:ZD(),characters:[],charactersById:{},conditionalSetEffectsDrawerOpen:!1,comboDrawerOpen:!1,combatBuffsDrawerOpen:!1,statTracesDrawerOpen:!1,enemyConfigurationsDrawerOpen:!1,settingsDrawerOpen:!1,gettingStartedDrawerOpen:!1,permutations:0,permutationsResults:0,permutationsSearched:0,relicsById:{},scorerId:"",scoringMetadataOverrides:{},showcasePreferences:{},showcaseTemporaryOptions:{},warpRequest:{},warpResult:{},statDisplay:Cs,memoDisplay:To,statSimulationDisplay:qa.Disabled,statSimulations:[],selectedStatSimulations:[],optimizationInProgress:!1,optimizationId:null,teammateCount:0,zeroPermutationModalOpen:!1,zeroResultModalOpen:!1,scoringModalOpen:!1,menuSidebarOpen:!0,relicScorerSidebarOpen:!0,optimizerRunningEngine:xi,optimizerStartTime:null,optimizerEndTime:null,optimizerTabFocusCharacterSelectModalOpen:!1,optimizerFormCharacterEidolon:0,optimizerFormSelectedLightCone:void 0,optimizerFormSelectedLightConeSuperimposition:1,permutationDetails:{Head:0,Hands:0,Body:0,Feet:0,PlanarSphere:0,LinkRope:0,HeadTotal:0,HandsTotal:0,BodyTotal:0,FeetTotal:0,PlanarSphereTotal:0,LinkRopeTotal:0},relicTabFilters:{set:[],part:[],enhance:[],mainStats:[],subStats:[],grade:[],verified:[],equippedBy:[]},characterTabFilters:{name:"",element:[],path:[],rarity:[]},excludedRelicPotentialCharacters:[],optimizerMenuState:{[Ia.characterOptions]:!0,[Ia.relicAndStatFilters]:!0,[Ia.teammates]:!0,[Ia.characterStatsSimulation]:!1,[Ia.analysis]:!0},savedSession:Ku,settings:Fu,optimizerBuild:null,optimizerExpandedPanelBuildData:null,optimizerSelectedRowData:null,optimizerBuffGroups:void 0,setComboState:n=>e(()=>({comboState:n})),setVersion:n=>e(()=>({version:n})),setActiveKey:n=>e(()=>({activeKey:n})),setFormValues:n=>e(()=>({formValues:n})),setCharacters:n=>e(()=>({characters:n})),setCharactersById:n=>e(()=>({charactersById:n})),setInventoryWidth:n=>e(()=>({inventoryWidth:n})),setRowLimit:n=>e(()=>({rowLimit:n})),setConditionalSetEffectsDrawerOpen:n=>e(()=>({conditionalSetEffectsDrawerOpen:n})),setComboDrawerOpen:n=>e(()=>({comboDrawerOpen:n})),setCombatBuffsDrawerOpen:n=>e(()=>({combatBuffsDrawerOpen:n})),setStatTracesDrawerOpen:n=>e(()=>({statTracesDrawerOpen:n})),setEnemyConfigurationsDrawerOpen:n=>e(()=>({enemyConfigurationsDrawerOpen:n})),setSettingsDrawerOpen:n=>e(()=>({settingsDrawerOpen:n})),setGettingStartedDrawerOpen:n=>e(()=>({gettingStartedDrawerOpen:n})),setOptimizerTabFocusCharacter:n=>e(()=>({optimizerTabFocusCharacter:n})),setCharacterTabFocusCharacter:n=>e(()=>({characterTabFocusCharacter:n})),setScoringAlgorithmFocusCharacter:n=>e(()=>({scoringAlgorithmFocusCharacter:n})),setStatTracesDrawerFocusCharacter:n=>e(()=>({statTracesDrawerFocusCharacter:n})),setRelicsTabFocusCharacter:n=>e(()=>({relicsTabFocusCharacter:n})),setPermutationDetails:n=>e(()=>({permutationDetails:n})),setPermutations:n=>e(()=>({permutations:n})),setPermutationsResults:n=>e(()=>({permutationsResults:n})),setPermutationsSearched:n=>e(()=>({permutationsSearched:n})),setRelicsById:n=>e(()=>({relicsById:n})),setRelicTabFilters:n=>e(()=>({relicTabFilters:n})),setCharacterTabFilters:n=>e(()=>({characterTabFilters:n})),setScorerId:n=>e(()=>({scorerId:n})),setScoringMetadataOverrides:n=>e(()=>({scoringMetadataOverrides:n})),setShowcasePreferences:n=>e(()=>({showcasePreferences:n})),setShowcaseTemporaryOptions:n=>e(()=>({showcaseTemporaryOptions:n})),setWarpRequest:n=>e(()=>({warpRequest:n})),setWarpResult:n=>e(()=>({warpResult:n})),setStatDisplay:n=>e(()=>({statDisplay:n})),setMemoDisplay:n=>e(()=>({memoDisplay:n})),setStatSimulationDisplay:n=>e(()=>({statSimulationDisplay:n})),setStatSimulations:n=>e(()=>({statSimulations:F.clone(n)})),setSelectedStatSimulations:n=>e(()=>({selectedStatSimulations:n})),setOptimizerMenuState:n=>e(()=>({optimizerMenuState:n})),setOptimizationInProgress:n=>e(()=>({optimizationInProgress:n})),setOptimizationId:n=>e(()=>({optimizationId:n})),setOptimizerStartTime:n=>e(()=>({optimizerStartTime:n})),setOptimizerRunningEngine:n=>e(()=>({optimizerRunningEngine:n})),setOptimizerEndTime:n=>e(()=>({optimizerEndTime:n})),setTeammateCount:n=>e(()=>({teammateCount:n})),setOptimizerFormCharacterEidolon:n=>e(()=>({optimizerFormCharacterEidolon:n})),setOptimizerFormSelectedLightCone:n=>e(()=>({optimizerFormSelectedLightCone:n})),setOptimizerFormSelectedLightConeSuperimposition:n=>e(()=>({optimizerFormSelectedLightConeSuperimposition:n})),setOptimizerTabFocusCharacterSelectModalOpen:n=>e(()=>({optimizerTabFocusCharacterSelectModalOpen:n})),setZeroPermutationsModalOpen:n=>e(()=>({zeroPermutationModalOpen:n})),setZeroResultModalOpen:n=>e(()=>({zeroResultModalOpen:n})),setScoringModalOpen:n=>e(()=>({scoringModalOpen:n})),setExcludedRelicPotentialCharacters:n=>e(()=>({excludedRelicPotentialCharacters:n})),setMenuSidebarOpen:n=>e(()=>({menuSidebarOpen:n})),setSettings:n=>e(()=>({settings:n})),setSavedSession:n=>e(()=>({savedSession:n})),setSavedSessionKey:(n,o)=>e(s=>({savedSession:{...s.savedSession,[n]:o}})),setColorTheme:n=>e(()=>({colorTheme:n})),setOptimizerBuild:n=>e(()=>({optimizerBuild:n})),setOptimizerExpandedPanelBuildData:n=>e(()=>({optimizerExpandedPanelBuildData:n})),setOptimizerSelectedRowData:n=>e(()=>({optimizerSelectedRowData:n})),setOptimizerBuffGroups:n=>e(()=>({optimizerBuffGroups:n})),setGlobalThemeConfig:n=>e(()=>({globalThemeConfig:n}))}));const B={getMetadata:()=>Xc.metadata,setMetadata:e=>Xc.metadata=e,getCharacters:()=>window.store.getState().characters,getCharacterById:e=>window.store.getState().charactersById[e],setCharacters:e=>{const t={};for(const o of e)t[o.id]=o;Yc(e);const n=[...e];window.store.getState().setCharacters(n),window.store.getState().setCharactersById(t)},setCharacter:e=>{const t=window.store.getState().charactersById;t[e.id]=e,window.store.getState().setCharactersById(t)},addCharacter:e=>{const t=B.getCharacters();t.push(e),B.setCharacters(t)},insertCharacter:(e,t)=>{console.log("insert",e,t);const n=B.getCharacters();t<0&&(t=n.length);const o=B.getCharacterById(e);if(!o)return console.warn("No matching character to insert",e,t);const s=n.splice(o.rank,1);n.splice(t,0,s[0]),B.setCharacters(n),window.onOptimizerFormValuesChange({},se.getForm())},refreshCharacters:()=>{window.setCharacterRows&&window.setCharacterRows(B.getCharacters())},getRelics:()=>Object.values(window.store.getState().relicsById),getRelicsById:()=>window.store.getState().relicsById,setRelics:e=>{const t={};for(const n of e)t[n.id]=n;window.store.getState().setRelicsById(t)},getRelicById:e=>window.store.getState().relicsById[e],setRelic:e=>{var o;if(!e.id)return console.warn("No matching relic",e);const t=B.getRelicById(e.id);!t?(e.ageIndex=B.getRelics().length,Mn(e),e.equippedBy&&B.equipRelic(e,e.equippedBy)):((t.part!==e.part||!e.equippedBy)&&(B.unequipRelicById(e.id),Mn(e)),e.equippedBy&&((o=B.getCharacterById(e.equippedBy))==null?void 0:o.equipped[e.part])!==e.id&&B.equipRelic(e,e.equippedBy),Mn(e))},refreshRelics:()=>{window.setRelicRows&&window.setRelicRows(B.getRelics())},getState:()=>window.store.getState(),getScoringMetadata:e=>{const n=B.getMetadata().characters[e].scoringMetadata,s=window.store.getState().scoringMetadataOverrides[e],r=F.mergeUndefinedValues(s||{},n);for(const l of Object.keys(n.stats))r.stats[l]==null&&(r.stats[l]=0);return er(n,r),delete r.presets,r},updateCharacterScoreOverrides:(e,t)=>{const n=window.store.getState().scoringMetadataOverrides;n[e]?F.mergeDefinedValues(n[e],t):n[e]=t,t.modified;const o=B.getMetadata().characters[e].scoringMetadata;er(o,n[e]),window.store.getState().setScoringMetadataOverrides(n),Ee.delayedSave()},updateSimulationScoreOverrides:(e,t)=>{if(!t)return;const n=window.store.getState().scoringMetadataOverrides;n[e]?n[e].simulation=t:n[e]={simulation:t},window.store.getState().setScoringMetadataOverrides(n),Ee.delayedSave()},setStore:(e,t=!0)=>{var s,r,l,c,d,u,h,p,S;const n={},o=B.getMetadata().characters;B.getMetadata().lightCones,e.characters=e.characters.filter(D=>o[D.id]);for(const D of e.characters)D.equipped={},n[D.id]=D,(r=(s=D.form)==null?void 0:s.statSim)!=null&&r.simulations&&(D.form.statSim.simulations=D.form.statSim.simulations.filter(E=>{var y;return(y=E.request)==null?void 0:y.stats})),D.form.characterLevel=80,D.form.lightConeLevel=80,D.form.resultSort==="WEIGHT"&&(D.form.resultSort="SPD"),D.form.mainBody=Xi(D.form.mainBody),D.form.mainFeet=Xi(D.form.mainFeet),D.form.mainPlanarSphere=Xi(D.form.mainPlanarSphere),D.form.mainLinkRope=Xi(D.form.mainLinkRope),(((c=(l=D.form.setConditionals)==null?void 0:l[R.DuranDynastyOfRunningWolves])==null?void 0:c[1])??!1)&&(D.form.setConditionals[R.DuranDynastyOfRunningWolves][1]=5),typeof((u=(d=D.form.setConditionals)==null?void 0:d[R.SacerdosRelivedOrdeal])==null?void 0:u[1])=="boolean"&&(D.form.setConditionals[R.SacerdosRelivedOrdeal][1]=0);for(const D of Object.values(o))for(const E of Object.keys(m.Parts))D.scoringMetadata.parts[E]=Xi(D.scoringMetadata.parts[E]);for(const D of e.relics){Xn.augment(D);const E=n[D.equippedBy];E&&!E.equipped[D.part]?E.equipped[D.part]=D.id:D.equippedBy=void 0}if(tr(e.relics),e.scoringMetadataOverrides){for(const[D,E]of Object.entries(e.scoringMetadataOverrides)){E.length&&delete e.scoringMetadataOverrides[D];const y=e.scoringMetadataOverrides[D];if(y){if(!((h=o[D])!=null&&h.scoringMetadata))continue;const P=FD[D]||{},_=o[D].scoringMetadata;let x=!0;for(const G of Object.values(m.Stats))if(F.nullUndefinedToZero(y.stats[G])!=F.nullUndefinedToZero(P[G])){x=!1;break}if(x)y.stats=F.clone(_.stats),y.modified=!1;else{let G=!1;for(const M of m.SubStats){const H=y.stats[M];F.nullUndefinedToZero(H)!=F.nullUndefinedToZero(_.stats[M])&&(G=!0),H<0&&(y.stats[M]=0),H>1&&(y.stats[M]=1)}G&&(y.modified=!0)}er(_,y)}}window.store.getState().setScoringMetadataOverrides(e.scoringMetadataOverrides||{})}if(e.showcasePreferences&&window.store.getState().setShowcasePreferences(e.showcasePreferences||{}),e.warpRequest&&window.store.getState().setWarpRequest(e.warpRequest||{}),window.store.getState().setScorerId(e.scorerId),e.optimizerMenuState){const D=window.store.getState().optimizerMenuState;for(const E of Object.values(Ia))e.optimizerMenuState[E]!=null&&(D[E]=e.optimizerMenuState[E]);window.store.getState().setOptimizerMenuState(D)}if(e.savedSession){const D=e.savedSession.optimizerCharacterId;D&&!o[D]&&delete e.savedSession.optimizerCharacterId;const E={...Ku,...e.savedSession};window.store.getState().setSavedSession(E)}e.settings&&window.store.getState().setSettings(e.settings),window.store.getState().setExcludedRelicPotentialCharacters(e.excludedRelicPotentialCharacters||[]),window.store.getState().setVersion(e.version),window.store.getState().setInventoryWidth(((p=e.relicLocator)==null?void 0:p.inventoryWidth)??9),window.store.getState().setRowLimit(((S=e.relicLocator)==null?void 0:S.rowLimit)??10),Yc(e.characters),B.setRelics(e.relics),B.setCharacters(e.characters),B.refreshCharacters(),B.refreshRelics(),t&&Ee.delayedSave(),Lh(Object.keys(B.getMetadata().characters))},resetStore:()=>{const e={relics:[],characters:[],showcasePreferences:{}};B.setStore(e)},replaceCharacterForm:e=>{const t=B.getCharacterById(e.characterId);t&&(t.form={...t.form,...e})},addFromForm:(e,t=!0)=>{var s,r;const n=B.getCharacters();let o=B.getCharacterById(e.characterId);if(o)o.form={...o.form,...e},B.setCharacters(n);else{const l=ji({id:e.characterId});o={id:e.characterId,form:{...l,...e},equipped:{}},B.addCharacter(o)}return(r=(s=window.characterGrid)==null?void 0:s.current)!=null&&r.api&&(window.characterGrid.current.api.updateGridOptions({rowData:n}),window.characterGrid.current.api.forEachNode(l=>{l.data.id==o.id&&l.setSelected(!0)}),window.store.getState().setCharacterTabFocusCharacter(o.id)),t&&Ee.delayedSave(),o},saveCharacterPortrait:(e,t)=>{let n=B.getCharacterById(e);n||(B.addFromForm({characterId:e}),n=B.getCharacterById(e),console.log("Character did not previously exist, adding",n)),n.portrait=t,B.setCharacter(n),console.log("Saved portrait",B.getState())},deleteCharacterPortrait:e=>{const t=B.getCharacterById(e);if(!t){console.warn("No character selected");return}delete t.portrait,B.setCharacter(t),console.log("Deleted portrait",B.getState())},saveCharacterBuild:(e,t,n)=>{var r;const o=B.getCharacterById(t);if(!o){console.warn("No character selected");return}if((r=o.builds)==null?void 0:r.find(l=>l.name==e)){const l=`Build name [${e}] already exists`;return console.warn(l),{error:l}}else o.builds||(o.builds=[]),o.builds.push({name:e,build:[...Object.values(o.equipped)],score:n}),B.setCharacter(o),console.log("Saved build",B.getState())},deleteCharacterBuild:(e,t)=>{const n=B.getCharacterById(e);if(!n)return console.warn("No character to delete build for");n.builds=n.builds.filter(o=>o.name!=t),B.setCharacter(n)},clearCharacterBuilds:e=>{const t=B.getCharacterById(e);if(!t)return console.warn("No character to clear builds for");t.builds=[],B.setCharacter(t)},unequipCharacter:e=>{const t=B.getCharacterById(e);if(!t)return console.warn("No character to unequip");console.log("Unequipping character",e,t);for(const n of Object.values(m.Parts)){const o=t.equipped[n];if(!o)continue;const s=B.getRelicById(o);t.equipped[n]=void 0,s&&(s.equippedBy=void 0,Mn(s))}B.setCharacter(t)},removeCharacter:e=>{B.unequipCharacter(e);let t=B.getCharacters();t=t.filter(n=>n.id!=e),B.setCharacters(t)},unequipRelicById:e=>{var o;if(!e)return console.warn("No relic");const t=B.getRelicById(e);console.log("UNEQUIP RELIC");const n=B.getCharacters();for(const s of n)(o=s.equipped)!=null&&o[t.part]&&s.equipped[t.part]==t.id&&(s.equipped[t.part]=void 0);B.setCharacters(n),t.equippedBy=void 0,Mn(t)},equipRelic:(e,t,n=!1)=>{if(!(e!=null&&e.id))return console.warn("No relic");if(!t)return console.warn("No character");e=B.getRelicById(e.id);const o=e.equippedBy,s=B.getCharacterById(o),r=B.getCharacterById(t),l=B.getRelicById(r.equipped[e.part]);l&&B.unequipRelicById(l.id);const c=n||B.getState().settings[je.RelicEquippingBehavior.name]==je.RelicEquippingBehavior.Swap;o!==t&&s&&(l&&c?(s.equipped[e.part]=l.id,l.equippedBy=s.id,Mn(l)):s.equipped[e.part]=void 0,B.setCharacter(s)),r.equipped[e.part]=e.id,e.equippedBy=r.id,B.setCharacter(r),Mn(e),jD("refreshRelics",500,()=>{var d,u;return(u=(d=window.relicsGrid)==null?void 0:d.current)==null?void 0:u.api.refreshCells()})},equipRelicIdsToCharacter:(e,t,n=!1)=>{if(!t)return console.warn("No characterId to equip to");console.log("Equipping relics to character",e,t);for(const o of e)B.equipRelic({id:o},t,n)},switchRelics:(e,t)=>{if(!e)return console.warn("No characterId to equip from");if(!t)return console.warn("No characterId to equip to");console.log(`Switching relics from character ${e} to character ${t}`);const n=B.getCharacterById(e);B.equipRelicIdsToCharacter(Object.values(n.equipped),t,!0)},deleteRelic:e=>{var n,o;if(!e)return J.error("Unable to delete relic");B.unequipRelicById(e);const t=window.store.getState().relicsById;delete t[e],window.store.getState().setRelicsById(t),(o=(n=window.characterGrid)==null?void 0:n.current)!=null&&o.api&&window.characterGrid.current.api.redrawRows()},mergeRelicsWithState:(e,t)=>{var c,d,u,h,p;const n=B.getRelics();if(e=F.clone(e)||[],t=F.clone(t)||[],console.log("Merging relics",e,t),t)for(const S of t)B.addFromForm(S,!1);const o=B.getCharacters(),s={};for(const S of n){const D=Jc(S);s[D]=S}let r=[];e.length==0&&(r=n);for(let S of e){const D=Jc(S),E=s[D];let y;if(E?(S.verified&&(E.verified=!0,E.substats=S.substats,E.augmentedStats=S.augmentedStats),S.equippedBy&&t.length&&(E.equippedBy=S.equippedBy,S=E),r.push(E),y=E.id,delete s[D]):(y=S.id,r.push(S)),S.equippedBy&&t.length){const P=o.find(_=>_.id==S.equippedBy);P?P.equipped[S.part]=y:console.log("No character to equip relic to",S)}}tr(r),console.log("Replacement relics",r),B.setRelics(r);for(const S of o)for(const D of Object.values(m.Parts))(c=S.equipped)!=null&&c[D]&&!B.getRelicById(S.equipped[D])&&(S.equipped[D]=void 0);for(const S of B.getRelics()){if(!S.equippedBy)continue;const D=B.getCharacterById(S.equippedBy);(!D||D.equipped[S.part]!=S.id)&&(S.equippedBy=void 0)}for(const S of B.getCharacters())for(const D of Object.keys(S.equipped)){const E=S.equipped[D];E&&B.getRelicById(E).equippedBy!=S.id&&(S.equipped[D]=void 0)}B.setRelics(r),B.setCharacters(o),(u=(d=window.relicsGrid)==null?void 0:d.current)!=null&&u.api&&window.relicsGrid.current.api.updateGridOptions({rowData:r}),(p=(h=window.characterGrid)==null?void 0:h.current)!=null&&p.api&&window.characterGrid.current.api.redrawRows();const l=se.getForm();window.onOptimizerFormValuesChange({},l),window.refreshRelicsScore()},mergePartialRelicsWithState:(e,t=[])=>{var l,c;const n=C.clone(B.getRelics())||[];e=C.clone(e)||[];const o=[],s=[],r=[];for(const d of e){const u=ND(d,n);u?(u.substats=d.substats,u.main=d.main,u.enhance=d.enhance,u.verified=!0,o.push(u),r.push({relic:u,equippedBy:d.equippedBy})):(n.push(d),s.push(d),r.push({relic:d,equippedBy:d.equippedBy}),d.equippedBy=void 0)}console.log("addedNewRelics",s),console.log("updatedOldRelics",o),n.map(d=>Xn.augment(d)),tr(n),B.setRelics(n);for(const d of r)t.find(u=>u.id==d.equippedBy)&&B.equipRelic(d.relic,d.equippedBy);B.refreshRelics(),window.refreshRelicsScore(),(c=(l=window.characterGrid)==null?void 0:l.current)!=null&&c.api&&window.characterGrid.current.api.redrawRows(),o.length&&J.success(w.t("importSaveTab:PartialImport.OldRelics",{count:o.length}),8),s.length&&J.success(w.t("importSaveTab:PartialImport.NewRelics",{count:s.length}),8)}};function ND(e,t){const n={};for(const l of t){const c=$c(l);n[c]||(n[c]=[]),n[c].push(l)}const o=$c(e),s=n[o]||[];let r;for(const l of s){if(e.enhance<l.enhance||e.substats.length<l.substats.length)continue;let c=!1,d=0;for(let h=0;h<l.substats.length;h++){const p=l.substats[h],S=e.substats.find(D=>D.stat==p.stat);if(!S){c=!0;break}if(p.stat!=S.stat){c=!0;break}if(Qc(p,S)==-1){c=!0;break}Qc(p,S)==1&&d++}if(c)continue;const u=Math.round((Math.floor(e.enhance/3)*3-Math.floor(l.enhance/3)*3)/3);if(!(d>u)){r=l;break}}return r}function Yc(e){for(let n=0;n<e.length;n++)e[n].rank=n;const t=B.getCharacterById(window.store.getState().optimizerTabFocusCharacter);return t&&window.optimizerForm.setFieldValue("rank",t.rank),e}function Jc(e){const t=[],n=[];for(const s of e.substats)F.isFlat(s.stat)?t.push(Math.floor(s.value)):t.push(F.precisionRound(F.truncate10ths(s.value))),n.push(s.stat);const o={part:e.part,set:e.set,grade:e.grade,enhance:e.enhance,mainStat:e.main.stat,mainValue:Math.floor(e.main.value),substatValues:t,substatStats:n};return C.objectHash(o)}function Qc(e,t){let n,o;return F.isFlat(e.stat)?(n=Math.floor(e.value),o=Math.floor(t.value)):(n=F.precisionRound(F.truncate10ths(e.value)),o=F.precisionRound(F.truncate10ths(t.value))),n==o?0:n<o?1:-1}function $c(e){const t={part:e.part,set:e.set,grade:e.grade,mainStat:e.main.stat};return C.objectHash(t)}function Mn(e){const t=window.store.getState().relicsById;t[e.id]=e,window.store.getState().setRelicsById(t)}function Xi(e){return e==null?e:[...new Set(e)]}function tr(e){const t=e.length;for(let n=0;n<t;n++)e[n].ageIndex=t-n-1}function VD(e){const t=w.getFixedT(null,"notifications","Changelog");try{const n=!e||sd.lt(e,eo);if(console.log(`Is out of date? ${n}`,e,eo),!n)return;const o=i.jsxs(Qr,{children:[i.jsx(Y,{type:"primary",icon:i.jsx(od,{}),onClick:()=>{window.notificationApi.destroy(),window.store.getState().setActiveKey(de.CHANGELOG)},children:t("View")}),i.jsx(Y,{type:"default",onClick:()=>window.notificationApi.destroy(),children:t("Dismiss")})]});window.notificationApi.success({message:t("Message"),description:t("Description"),btn:o,duration:30})}catch(n){console.error(n)}}function zD(){const e=w.getFixedT(null,"notifications","GPU"),t=w.getFixedT(null,"notifications","GPUCrash");try{window.notificationApi.warning({message:e("Message"),description:i.jsxs(g,{vertical:!0,children:[i.jsx("div",{children:e("Description.l1")}),i.jsx("div",{children:i.jsxs("ul",{children:[i.jsx("li",{children:e("Description.l2")}),i.jsx("li",{children:i.jsx(Rt,{t:e,i18nKey:"Description.l3",components:{CustomLink:i.jsx(At,{url:"https://github.com/gpuweb/gpuweb/wiki/Implementation-Status",linkIcon:!0})}})})]})}),i.jsx("p",{children:e("Description.l4")}),i.jsx("p",{children:i.jsx(Rt,{t,i18nKey:"Description.l2",components:{CustomLink:i.jsx(At,{url:"https://github.com/fribbels/hsr-optimizer/blob/main/docs/guides/en/troubleshooting.md#gpu",linkIcon:!0})}})})]}),duration:15})}catch(n){console.error(n)}}function UD(){const e=w.getFixedT(null,"notifications","GPUCrash");try{window.notificationApi.warning({message:e("Message"),description:i.jsxs(g,{vertical:!0,gap:10,children:[i.jsx("div",{children:e("Description.l1")}),i.jsx("div",{children:i.jsx(Rt,{t:e,i18nKey:"Description.l2",components:{CustomLink:i.jsx(At,{url:"https://github.com/fribbels/hsr-optimizer/blob/main/docs/guides/en/troubleshooting.md#gpu",linkIcon:!0})}})})]}),duration:15})}catch(t){console.error(t)}}window.yaml=rd;const Or=["en_US","fr_FR","ja_JP","ko_KR","pt_BR","vi_VN","zh_CN"],kr=wt===uo.BETA,XD=kr?Object.keys(El):Or;w.use(wm).use(Om).use(km).init({ns:["charactersTab","common","conditionals","gameData","getStartedTab","hint","hometab","importSaveTab","modals","notifications","optimizerTab","relicScorerTab","relicsTab","settings","sidebar","warpCalculatorTab"],defaultNS:"common",fallbackNS:["common","gameData"],debug:!1,supportedLngs:XD,load:"currentOnly",fallbackLng:"en_US",interpolation:{escapeValue:!1},backend:{loadPath:wt+"/locales/{{lng}}/{{ns}}.yaml",parse:function(e){return rd.load(e)}}});function YD(){const{i18n:e}=V(),t=Object.values(El).filter(n=>n.locale!=="aa_ER"?kr||Or.includes(n.locale):wt===uo.BETA).map(({locale:n,nativeName:o,shortName:s})=>({value:n,display:i.jsxs(g,{align:"center",gap:10,children:[i.jsx("img",{style:{width:22},src:k.getGlobe()}),s]}),label:i.jsxs(g,{gap:8,title:n,children:[o,kr?` (${n})`:"",Or.includes(n)?"":" - (WIP)"]})}));return i.jsx(z,{options:t,optionRender:n=>n.data.label,onChange:n=>{e.changeLanguage(n).then(()=>{wt===uo.BETA&&(n==="aa_ER"?window.jipt.start():window.jipt.stop()),console.log("setting language to:",e.resolvedLanguage)})},style:{width:135,marginRight:6,height:36},placement:"bottomLeft",optionLabelProp:"display",dropdownStyle:{width:210},defaultValue:e.resolvedLanguage,dropdownRender:n=>i.jsxs(g,{gap:4,vertical:!0,children:[n,i.jsx(Y,{type:"primary",style:{borderRadius:5,height:32},onClick:()=>window.open("https://discord.gg/rDmB4Un7qg"),children:"Help translate the website!"})]})})}const{useToken:JD}=Ft,{Header:QD}=fs;function $D(){const e=window.store(o=>o.menuSidebarOpen),t=window.store(o=>o.setMenuSidebarOpen),{token:n}=JD();return i.jsx(QD,{style:{display:"flex",alignItems:"center",paddingLeft:"30px",paddingRight:"0px",height:48,width:"100%",backgroundColor:n.colorBgLayout,backgroundImage:"linear-gradient(rgb(0 0 0/60%) 0 0)"},children:i.jsxs(g,{align:"center",justify:"space-between",style:{width:"100%"},children:[i.jsxs(g,{children:[i.jsx(Y,{type:"text",icon:e?i.jsx(Fa,{}):i.jsx(Km,{}),onClick:()=>t(!e),style:{fontSize:"16px",position:"relative",left:"-20px"}}),i.jsx("a",{href:wt,children:i.jsxs(g,{align:"center",style:{position:"relative",left:"-10px"},children:[i.jsx("img",{src:k.getLogo(),style:{width:30,height:30,marginRight:15}}),i.jsx(Ce,{style:{fontWeight:600,fontSize:22},color:"inherit",children:"Fribbels Honkai Star Rail Optimizer (Beta)"})]})})]}),i.jsxs(g,{children:[i.jsx(YD,{}),i.jsx("a",{href:"https://ko-fi.com/fribbels",target:"_blank",rel:"noreferrer",children:i.jsx(g,{children:i.jsx("img",{src:k.getKofi(),style:{height:36,marginRight:6,borderRadius:5}})})}),i.jsx("a",{href:"https://github.com/fribbels/hsr-optimizer",target:"_blank",rel:"noreferrer",children:i.jsx(g,{children:i.jsx("img",{src:k.getGithub(),style:{height:36,marginRight:6,borderRadius:5}})})}),i.jsx("a",{href:"https://discord.gg/rDmB4Un7qg",target:"_blank",rel:"noreferrer",children:i.jsx(g,{children:i.jsx("img",{src:k.getDiscord(),style:{height:36,marginRight:8,borderRadius:5}})})})]})]})})}const qD=()=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",children:[i.jsx("path",{fillRule:"evenodd",d:"M.5 6a.5.5 0 0 0-.488.608l1.652 7.434A2.5 2.5 0 0 0 4.104 16h5.792a2.5 2.5 0 0 0 2.44-1.958l.131-.59a3 3 0 0 0 1.3-5.854l.221-.99A.5.5 0 0 0 13.5 6zM13 12.5a2.01 2.01 0 0 1-.316-.025l.867-3.898A2.001 2.001 0 0 1 13 12.5"}),i.jsx("path",{d:"m4.4.8-.003.004-.014.019a4.167 4.167 0 0 0-.204.31 2.327 2.327 0 0 0-.141.267c-.026.06-.034.092-.037.103v.004a.593.593 0 0 0 .091.248c.075.133.178.272.308.445l.01.012c.118.158.26.347.37.543.112.2.22.455.22.745 0 .188-.065.368-.119.494a3.31 3.31 0 0 1-.202.388 5.444 5.444 0 0 1-.253.382l-.018.025-.005.008-.002.002A.5.5 0 0 1 3.6 4.2l.003-.004.014-.019a4.149 4.149 0 0 0 .204-.31 2.06 2.06 0 0 0 .141-.267c.026-.06.034-.092.037-.103a.593.593 0 0 0-.09-.252A4.334 4.334 0 0 0 3.6 2.8l-.01-.012a5.099 5.099 0 0 1-.37-.543A1.53 1.53 0 0 1 3 1.5c0-.188.065-.368.119-.494.059-.138.134-.274.202-.388a5.446 5.446 0 0 1 .253-.382l.025-.035A.5.5 0 0 1 4.4.8m3 0-.003.004-.014.019a4.167 4.167 0 0 0-.204.31 2.327 2.327 0 0 0-.141.267c-.026.06-.034.092-.037.103v.004a.593.593 0 0 0 .091.248c.075.133.178.272.308.445l.01.012c.118.158.26.347.37.543.112.2.22.455.22.745 0 .188-.065.368-.119.494a3.31 3.31 0 0 1-.202.388 5.444 5.444 0 0 1-.253.382l-.018.025-.005.008-.002.002A.5.5 0 0 1 6.6 4.2l.003-.004.014-.019a4.149 4.149 0 0 0 .204-.31 2.06 2.06 0 0 0 .141-.267c.026-.06.034-.092.037-.103a.593.593 0 0 0-.09-.252A4.334 4.334 0 0 0 6.6 2.8l-.01-.012a5.099 5.099 0 0 1-.37-.543A1.53 1.53 0 0 1 6 1.5c0-.188.065-.368.119-.494.059-.138.134-.274.202-.388a5.446 5.446 0 0 1 .253-.382l.025-.035A.5.5 0 0 1 7.4.8m3 0-.003.004-.014.019a4.077 4.077 0 0 0-.204.31 2.337 2.337 0 0 0-.141.267c-.026.06-.034.092-.037.103v.004a.593.593 0 0 0 .091.248c.075.133.178.272.308.445l.01.012c.118.158.26.347.37.543.112.2.22.455.22.745 0 .188-.065.368-.119.494a3.198 3.198 0 0 1-.202.388 5.385 5.385 0 0 1-.252.382l-.019.025-.005.008-.002.002A.5.5 0 0 1 9.6 4.2l.003-.004.014-.019a4.149 4.149 0 0 0 .204-.31 2.06 2.06 0 0 0 .141-.267c.026-.06.034-.092.037-.103a.593.593 0 0 0-.09-.252A4.334 4.334 0 0 0 9.6 2.8l-.01-.012a5.099 5.099 0 0 1-.37-.543A1.53 1.53 0 0 1 9 1.5c0-.188.065-.368.119-.494.059-.138.134-.274.202-.388a5.446 5.446 0 0 1 .253-.382l.025-.035A.5.5 0 0 1 10.4.8"})]}),eR=e=>i.jsx(Wn,{component:qD,...e}),tR=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 -1 16 16",children:i.jsx("path",{d:"M13.545 2.907a13.227 13.227 0 0 0-3.257-1.011.05.05 0 0 0-.052.025c-.141.25-.297.577-.406.833a12.19 12.19 0 0 0-3.658 0 8.258 8.258 0 0 0-.412-.833.051.051 0 0 0-.052-.025c-1.125.194-2.22.534-3.257 1.011a.041.041 0 0 0-.021.018C.356 6.024-.213 9.047.066 12.032c.001.014.01.028.021.037a13.276 13.276 0 0 0 3.995 2.02.05.05 0 0 0 .056-.019c.308-.42.582-.863.818-1.329a.05.05 0 0 0-.01-.059.051.051 0 0 0-.018-.011 8.875 8.875 0 0 1-1.248-.595.05.05 0 0 1-.02-.066.051.051 0 0 1 .015-.019c.084-.063.168-.129.248-.195a.05.05 0 0 1 .051-.007c2.619 1.196 5.454 1.196 8.041 0a.052.052 0 0 1 .053.007c.08.066.164.132.248.195a.051.051 0 0 1-.004.085 8.254 8.254 0 0 1-1.249.594.05.05 0 0 0-.03.03.052.052 0 0 0 .003.041c.24.465.515.909.817 1.329a.05.05 0 0 0 .056.019 13.235 13.235 0 0 0 4.001-2.02.049.049 0 0 0 .021-.037c.334-3.451-.559-6.449-2.366-9.106a.034.034 0 0 0-.02-.019Zm-8.198 7.307c-.789 0-1.438-.724-1.438-1.612 0-.889.637-1.613 1.438-1.613.807 0 1.45.73 1.438 1.613 0 .888-.637 1.612-1.438 1.612m5.316 0c-.788 0-1.438-.724-1.438-1.612 0-.889.637-1.613 1.438-1.613.807 0 1.451.73 1.438 1.613 0 .888-.631 1.612-1.438 1.612"})}),aR=e=>i.jsx(Wn,{component:tR,...e}),nR=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",children:i.jsx("path",{d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8"})}),iR=e=>i.jsx(Wn,{component:nR,...e});function Pt(e,t,n,o){return{label:e,key:t,icon:n,children:o}}const sR=()=>{const{t:e}=V("sidebar"),t=window.store(r=>r.activeKey),n=window.store(r=>r.setActiveKey),o=I.useMemo(()=>[Pt(e("Tools.Title"),"subTools",i.jsx(ld,{}),[Pt(i.jsxs(g,{children:[i.jsx(jm,{style:{marginRight:5,width:16}})," ",e("Tools.Showcase")]}),de.SHOWCASE),Pt(i.jsxs(g,{children:[i.jsx(Wm,{style:{marginRight:5,width:16}})," ",e("Tools.WarpPlanner")]}),de.WARP)]),Pt(e("Optimization.Title"),"subOptimizer",i.jsx(zm,{}),[Pt(i.jsxs(g,{children:[i.jsx(Zm,{style:{marginRight:5,width:16}})," ",e("Optimization.Optimizer")]}),de.OPTIMIZER),Pt(i.jsxs(g,{children:[i.jsx(cd,{style:{marginRight:5,width:16}})," ",e("Optimization.Characters")]}),de.CHARACTERS),Pt(i.jsxs(g,{children:[i.jsx(Nm,{style:{marginRight:5,width:16}})," ",e("Optimization.Relics")]}),de.RELICS),Pt(i.jsxs(g,{children:[i.jsx($r,{style:{marginRight:5,width:16}})," ",e("Optimization.Import")]}),de.IMPORT),Pt(i.jsxs(g,{onClick:()=>window.store.getState().setSettingsDrawerOpen(!0),style:{width:"100%"},children:[i.jsx(Ga,{style:{marginRight:5,width:16}})," ",e("Optimization.Settings")]}),"link settings"),Pt(i.jsxs(g,{onClick:()=>window.store.getState().setGettingStartedDrawerOpen(!0),style:{width:"100%"},children:[i.jsx(Vm,{style:{marginRight:5,width:16}})," ",e("Optimization.Start")]}),"link gettingstarted")]),Pt(e("Links.Title"),"subLinks",i.jsx(Xm,{}),[Pt(i.jsxs(Ce.Link,{children:[i.jsx(Um,{style:{marginRight:2,width:16}})," ",e("Links.Home")]}),de.HOME),Pt(i.jsxs(Ce.Link,{children:[i.jsx(od,{style:{marginRight:2,width:16}})," ",e("Links.Changelog")]}),de.CHANGELOG),Pt(i.jsxs(Ce.Link,{href:"https://ko-fi.com/fribbels",target:"_blank",rel:"noopener noreferrer",children:[i.jsx(eR,{style:{marginRight:5}})," ",e("Links.Kofi")]}),"link donate"),Pt(i.jsxs(Ce.Link,{href:"https://discord.gg/rDmB4Un7qg",target:"_blank",rel:"noopener noreferrer",children:[i.jsx(aR,{style:{marginRight:5}})," ",e("Links.Discord")]}),"link discord"),Pt(i.jsxs(Ce.Link,{href:"https://github.com/fribbels/hsr-optimizer",target:"_blank",rel:"noopener noreferrer",children:[i.jsx(iR,{style:{marginRight:5}})," ",e("Links.Github")]}),"link github"),Pt(i.jsxs(Ce.Link,{href:"https://starrailoptimizer.github.io/",target:"_blank",rel:"noopener noreferrer",children:[i.jsx($0,{style:{marginRight:5}})," ",e("Links.Unleak")]}),"link leaks free")])],[e]),s=r=>{var l;(l=r.key)!=null&&l.includes("link")||n(r.key)};return i.jsx(Ym,{onClick:s,inlineIndent:12,defaultSelectedKeys:["1"],defaultOpenKeys:["subOptimizer","subTools","subLinks"],selectedKeys:[t],mode:"inline",items:o,className:"no-highlight"})},{useToken:oR}=Ft,{Sider:rR}=fs;function lR(){const{token:e}=oR(),t=window.store(n=>n.menuSidebarOpen);return i.jsx(rR,{width:170,style:{background:e.colorBgContainer},collapsible:!0,collapsedWidth:48,collapsed:!t,trigger:null,children:i.jsx("div",{style:{position:"sticky",top:0},children:i.jsx(sR,{})})})}const cR=[{part:"Head",set:"Hunter of Glacial Forest",enhance:15,grade:5,main:{stat:"HP",value:705.6000000101048},substats:[{stat:"CRIT Rate",value:11.016,scoreMeta:{multiplier:1,score:22}},{stat:"CRIT DMG",value:10.367999999999999,scoreMeta:{multiplier:1,score:10.3}},{stat:"Effect RES",value:3.456,scoreMeta:{multiplier:0,score:0}},{stat:"Break Effect",value:5.183999999999999,scoreMeta:{multiplier:0,score:0}}],id:"cd85c14c-a662-4413-a149-a379e6d538d3",augmentedStats:{mainStat:"HP",mainValue:705.6000000101048,"CRIT Rate":.11016,"CRIT DMG":.10367999999999998,"Effect RES":.03456,"Break Effect":.05183999999999999,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"Effect Hit Rate":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:32.3,ss:5.184,ds:5.183999999999999,cs:32.4,equippedBy:"1212",weightScore:42.767999999999994},{part:"Head",set:"Passerby of Wandering Cloud",enhance:15,grade:5,main:{stat:"HP",value:705.6000000101048},substats:[{stat:"DEF",value:19.0518957},{stat:"HP%",value:12.096},{stat:"DEF%",value:14.580000000000002},{stat:"Effect RES",value:7.344}],id:"0bd7404f-3420-4bf5-9e45-f79343728685",augmentedStats:{mainStat:"HP",mainValue:705.6000000101048,DEF:19.0518957,"HP%":.12096,"DEF%":.1458,"Effect RES":.07344,"ATK%":0,"SPD%":0,HP:0,ATK:0,SPD:0,"CRIT DMG":0,"CRIT Rate":0,"Effect Hit Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:0,ss:46.656,ds:0,equippedBy:"1217",cs:0},{part:"Head",set:"Hunter of Glacial Forest",enhance:15,grade:5,main:{stat:"HP",value:705.6000000101048},substats:[{stat:"ATK",value:35.9869141},{stat:"SPD",value:8},{stat:"CRIT Rate",value:2.916},{stat:"Effect RES",value:7.344}],id:"77ac4c85-21a7-4526-999a-6e54646dda6d",augmentedStats:{mainStat:"HP",mainValue:705.6000000101048,ATK:35.9869141,SPD:8,"CRIT Rate":.02916,"Effect RES":.07344,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,DEF:0,"CRIT DMG":0,"Effect Hit Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:26.6,ss:31.816000000000003,ds:20.8,cs:26.632,weightScore:41.5581710950614},{part:"Head",set:"Longevous Disciple",enhance:15,grade:5,main:{stat:"HP",value:705.6000000101048},substats:[{stat:"ATK%",value:4.32},{stat:"SPD",value:4},{stat:"CRIT Rate",value:10.367999999999999},{stat:"Effect RES",value:4.32}],id:"e898e418-bc4e-404d-be3f-2477dec9839a",augmentedStats:{mainStat:"HP",mainValue:705.6000000101048,"ATK%":.0432,SPD:4,"CRIT Rate":.10367999999999998,"Effect RES":.0432,"HP%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,DEF:0,"CRIT DMG":0,"Effect Hit Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:37.45,ss:16.880000000000003,ds:16.880000000000003,equippedBy:"1205",cs:31.135999999999996},{part:"Head",set:"Genius of Brilliant Stars",enhance:15,grade:5,main:{stat:"HP",value:705.6000000101048},substats:[{stat:"DEF",value:19.0518957},{stat:"CRIT Rate",value:8.424},{stat:"CRIT DMG",value:18.144},{stat:"Effect RES",value:8.208}],id:"eda5ede8-dfaa-4fa9-b2c2-17011ed0abe6",augmentedStats:{mainStat:"HP",mainValue:705.6000000101048,DEF:19.0518957,"CRIT Rate":.08424,"CRIT DMG":.18144,"Effect RES":.08208,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,SPD:0,"Effect Hit Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:34.900000000000006,ss:12.312000000000001,ds:0,equippedBy:"1102",cs:34.992},{part:"Head",set:"Hunter of Glacial Forest",enhance:15,grade:5,main:{stat:"HP",value:705.6000000101048},substats:[{stat:"DEF",value:38.1037914},{stat:"DEF%",value:5.4},{stat:"CRIT Rate",value:2.916},{stat:"CRIT DMG",value:23.976}],id:"8de51c73-36b5-40ea-91a2-e566d97da2a9",augmentedStats:{mainStat:"HP",mainValue:705.6000000101048,DEF:38.1037914,"DEF%":.054000000000000006,"CRIT Rate":.02916,"CRIT DMG":.23976,"HP%":0,"ATK%":0,"SPD%":0,HP:0,ATK:0,SPD:0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:29.7,ss:6.48,ds:0,equippedBy:"1101",cs:29.808,weightScore:41.00089936920223},{part:"Head",set:"Band of Sizzling Thunder",enhance:15,grade:5,main:{stat:"HP",value:705.6000000101048},substats:[{stat:"ATK%",value:10.8},{stat:"DEF%",value:9.719999999999999},{stat:"SPD",value:2},{stat:"Break Effect",value:12.312}],id:"354bde06-a10b-4449-8365-16f0dcac7b88",augmentedStats:{mainStat:"HP",mainValue:705.6000000101048,"ATK%":.10800000000000001,"DEF%":.0972,SPD:2,"Break Effect":.12312,"HP%":0,"SPD%":0,HP:0,ATK:0,DEF:0,"CRIT DMG":0,"CRIT Rate":0,"Effect Hit Rate":0,"Effect RES":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:21.400000000000002,ss:16.863999999999997,ds:33.712,equippedBy:"1005",cs:5.2},{part:"Head",set:"Messenger Traversing Hackerspace",enhance:15,grade:5,main:{stat:"HP",value:705.6000000101048},substats:[{stat:"HP%",value:3.456},{stat:"ATK%",value:7.776},{stat:"DEF%",value:10.26},{stat:"CRIT DMG",value:17.496000000000002}],id:"1e0de4ea-c1bf-4990-a0bd-739b1eea2e1d",augmentedStats:{mainStat:"HP",mainValue:705.6000000101048,"HP%":.03456,"ATK%":.07776,"DEF%":.1026,"CRIT DMG":.17496000000000003,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"CRIT Rate":0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:28.95,ss:17.496,ds:11.664,cs:17.496000000000002},{part:"Head",set:"Hunter of Glacial Forest",enhance:15,grade:5,main:{stat:"HP",value:705.6000000101048},substats:[{stat:"ATK",value:40.2206687},{stat:"DEF",value:21.168773},{stat:"ATK%",value:12.096},{stat:"CRIT Rate",value:9.072}],id:"be226101-f443-4ea0-93e8-81813e48f692",augmentedStats:{mainStat:"HP",mainValue:705.6000000101048,ATK:40.2206687,DEF:21.168773,"ATK%":.12096,"CRIT Rate":.09072,"HP%":0,"DEF%":0,"SPD%":0,HP:0,SPD:0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:36,ss:0,ds:18.144,cs:18.144,weightScore:43.34799806299142},{part:"Head",set:"Hunter of Glacial Forest",enhance:15,grade:5,main:{stat:"HP",value:705.6000000101048},substats:[{stat:"HP%",value:12.528,scoreMeta:{multiplier:0,score:0}},{stat:"DEF%",value:9.719999999999999,scoreMeta:{multiplier:0,score:0}},{stat:"CRIT Rate",value:5.832,scoreMeta:{multiplier:1,score:11.664}},{stat:"CRIT DMG",value:12.959999999999999,scoreMeta:{multiplier:1,score:12.959999999999999}}],id:"e30bce86-38ef-42db-9cea-58b18a94d4bc",augmentedStats:{mainStat:"HP",mainValue:705.6000000101048,"HP%":.12528,"DEF%":.0972,"CRIT Rate":.05832,"CRIT DMG":.1296,"ATK%":0,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:24.5,ss:30.456,ds:0,cs:24.624,weightScore:55.08},{part:"Head",set:"Hunter of Glacial Forest",enhance:15,grade:5,main:{stat:"HP",value:705.6000000101048},substats:[{stat:"ATK%",value:15.552},{stat:"DEF%",value:9.719999999999999},{stat:"SPD",value:2},{stat:"CRIT DMG",value:6.4799999999999995}],id:"01287db9-7fe8-49c9-b30e-907db3b6d0d0",augmentedStats:{mainStat:"HP",mainValue:705.6000000101048,"ATK%":.15552,"DEF%":.0972,SPD:2,"CRIT DMG":.0648,"HP%":0,"SPD%":0,HP:0,ATK:0,DEF:0,"CRIT Rate":0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:34.85,ss:16.863999999999997,ds:28.528,cs:11.68,weightScore:46.655999999999985},{part:"Head",set:"Hunter of Glacial Forest",enhance:15,grade:5,main:{stat:"HP",value:705.6000000101048},substats:[{stat:"ATK",value:19.0518957},{stat:"HP%",value:3.456},{stat:"SPD",value:6},{stat:"CRIT DMG",value:18.792}],id:"85c1d15d-a89e-4e08-ab91-29c09449eaf7",augmentedStats:{mainStat:"HP",mainValue:705.6000000101048,ATK:19.0518957,"HP%":.03456,SPD:6,"CRIT DMG":.18792,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,DEF:0,"CRIT Rate":0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:34.3,ss:20.784000000000002,ds:15.600000000000001,cs:34.392,weightScore:41.63197293267957},{part:"Head",set:"Hunter of Glacial Forest",enhance:15,grade:5,main:{stat:"HP",value:705.6000000101048},substats:[{stat:"HP%",value:4.32},{stat:"DEF%",value:13.5},{stat:"CRIT Rate",value:8.748000000000001},{stat:"CRIT DMG",value:5.832}],id:"15153c3a-7c55-4f18-8b0f-5938ea3165a9",augmentedStats:{mainStat:"HP",mainValue:705.6000000101048,"HP%":.0432,"DEF%":.135,"CRIT Rate":.08748000000000002,"CRIT DMG":.05832,"ATK%":0,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:23.2,ss:22.68,ds:0,cs:23.328000000000003,weightScore:46.008},{part:"Head",set:"Hunter of Glacial Forest",enhance:15,grade:5,main:{stat:"HP",value:705.6000000101048},substats:[{stat:"DEF",value:38.1037914},{stat:"HP%",value:11.664},{stat:"CRIT Rate",value:6.156},{stat:"CRIT DMG",value:12.312}],id:"406b32a8-1a17-4a85-a9b2-f707bbb7d789",augmentedStats:{mainStat:"HP",mainValue:705.6000000101048,DEF:38.1037914,"HP%":.11664,"CRIT Rate":.06156,"CRIT DMG":.12312,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,SPD:0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:24.5,ss:17.496,ds:0,cs:24.624,weightScore:46.832899369202224},{part:"Head",set:"Hunter of Glacial Forest",enhance:15,grade:5,main:{stat:"HP",value:705.6000000101048},substats:[{stat:"SPD",value:4},{stat:"CRIT DMG",value:23.976},{stat:"Effect Hit Rate",value:7.776},{stat:"Effect RES",value:3.888}],id:"32478990-1729-40f5-a85a-c6c448abf4e3",augmentedStats:{mainStat:"HP",mainValue:705.6000000101048,SPD:4,"CRIT DMG":.23976,"Effect Hit Rate":.07776,"Effect RES":.03888,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,DEF:0,"CRIT Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:34.3,ss:16.232,ds:22.064,cs:34.376,weightScore:51.839999999999996},{part:"Head",set:"Hunter of Glacial Forest",enhance:15,grade:5,main:{stat:"HP",value:705.6000000101048},substats:[{stat:"DEF",value:16.9350184},{stat:"HP%",value:11.664},{stat:"SPD",value:4},{stat:"CRIT Rate",value:6.156}],id:"631dc239-48a5-4109-b4ad-57db6387e61a",augmentedStats:{mainStat:"HP",mainValue:705.6000000101048,DEF:16.9350184,"HP%":.11664,SPD:4,"CRIT Rate":.06156,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:22.6,ss:27.896,ds:10.4,cs:22.712,weightScore:42.27062194186765},{part:"Head",set:"Hunter of Glacial Forest",enhance:15,grade:5,main:{stat:"HP",value:705.6000000101048},substats:[{stat:"ATK",value:38.1037914},{stat:"SPD",value:4},{stat:"CRIT DMG",value:11.016},{stat:"Effect RES",value:8.208}],id:"f02e66d8-7de8-4d81-97d1-3ea73fce4056",augmentedStats:{mainStat:"HP",mainValue:705.6000000101048,ATK:38.1037914,SPD:4,"CRIT DMG":.11016,"Effect RES":.08208,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,DEF:0,"CRIT Rate":0,"Effect Hit Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:21.4,ss:22.712000000000003,ds:10.4,cs:21.416,weightScore:37.90394586535913},{part:"Head",set:"Musketeer of Wild Wheat",enhance:12,grade:5,main:{stat:"HP",value:587.059200008167},substats:[{stat:"DEF",value:33.8700368},{stat:"HP%",value:8.208},{stat:"CRIT Rate",value:5.832},{stat:"Effect Hit Rate",value:8.208}],id:"e3169778-e239-4cc6-b673-f02137df9378",augmentedStats:{mainStat:"HP",mainValue:587.059200008167,DEF:33.8700368,"HP%":.08208,"CRIT Rate":.05832,"Effect Hit Rate":.08208,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,SPD:0,"CRIT DMG":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:11.6,ss:12.312000000000001,ds:12.312000000000001,cs:11.664},{part:"Head",set:"Genius of Brilliant Stars",enhance:12,grade:5,main:{stat:"HP",value:587.059200008167},substats:[{stat:"HP%",value:6.912},{stat:"ATK%",value:8.208},{stat:"CRIT Rate",value:5.183999999999999},{stat:"CRIT DMG",value:5.832}],id:"f5ca028c-ebfc-4a3f-86b9-92e8c191ca0f",augmentedStats:{mainStat:"HP",mainValue:587.059200008167,"HP%":.06912,"ATK%":.08208,"CRIT Rate":.05183999999999999,"CRIT DMG":.05832,"DEF%":0,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:28.299999999999997,ss:10.368,ds:12.312000000000001,cs:16.2},{part:"Head",set:"Longevous Disciple",enhance:12,grade:5,main:{stat:"HP",value:587.059200008167},substats:[{stat:"HP%",value:7.776},{stat:"DEF%",value:9.180000000000001},{stat:"CRIT DMG",value:6.4799999999999995},{stat:"Effect RES",value:7.776}],id:"712b4702-b22a-4e75-8921-1fe6dcca2f50",augmentedStats:{mainStat:"HP",mainValue:587.059200008167,"HP%":.07776,"DEF%":.09180000000000002,"CRIT DMG":.0648,"Effect RES":.07776,"ATK%":0,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"CRIT Rate":0,"Effect Hit Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:6.4,ss:34.344,ds:0,cs:6.4799999999999995},{part:"Head",set:"Messenger Traversing Hackerspace",enhance:12,grade:5,main:{stat:"HP",value:587.059200008167},substats:[{stat:"HP%",value:6.912},{stat:"ATK%",value:7.344},{stat:"SPD",value:2},{stat:"Break Effect",value:11.664}],id:"0ad72590-0a68-46b5-b2ba-1d7a45d77fd7",augmentedStats:{mainStat:"HP",mainValue:587.059200008167,"HP%":.06912,"ATK%":.07344,SPD:2,"Break Effect":.11664,"DEF%":0,"SPD%":0,HP:0,ATK:0,DEF:0,"CRIT DMG":0,"CRIT Rate":0,"Effect Hit Rate":0,"Effect RES":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:16.15,ss:15.568000000000001,ds:27.88,cs:5.2},{part:"Head",set:"Longevous Disciple",enhance:12,grade:5,main:{stat:"HP",value:587.059200008167},substats:[{stat:"CRIT Rate",value:6.156},{stat:"CRIT DMG",value:16.848},{stat:"Effect RES",value:4.32},{stat:"Break Effect",value:6.4799999999999995}],id:"5e6a0316-5618-4e9e-8c7f-ae788edea454",augmentedStats:{mainStat:"HP",mainValue:587.059200008167,"CRIT Rate":.06156,"CRIT DMG":.16848,"Effect RES":.0432,"Break Effect":.0648,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"Effect Hit Rate":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:29,ss:6.48,ds:6.4799999999999995,cs:29.159999999999997},{part:"Head",set:"Longevous Disciple",enhance:12,grade:5,main:{stat:"HP",value:587.059200008167},substats:[{stat:"ATK",value:40.2206687},{stat:"HP%",value:4.32},{stat:"CRIT DMG",value:12.312},{stat:"Effect Hit Rate",value:6.912}],id:"f8667a7d-7ba6-4e2f-931e-cbe2230b51bc",augmentedStats:{mainStat:"HP",mainValue:587.059200008167,ATK:40.2206687,"HP%":.0432,"CRIT DMG":.12312,"Effect Hit Rate":.06912,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,DEF:0,SPD:0,"CRIT Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:12.3,ss:6.48,ds:10.368,cs:12.312},{part:"Head",set:"Band of Sizzling Thunder",enhance:12,grade:5,main:{stat:"HP",value:587.059200008167},substats:[{stat:"HP%",value:4.32},{stat:"ATK%",value:3.456},{stat:"CRIT Rate",value:6.4799999999999995},{stat:"Effect Hit Rate",value:10.367999999999999}],id:"3a3dcda5-a6b0-4514-9aa3-5930e832aca5",augmentedStats:{mainStat:"HP",mainValue:587.059200008167,"HP%":.0432,"ATK%":.03456,"CRIT Rate":.0648,"Effect Hit Rate":.10367999999999998,"DEF%":0,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"CRIT DMG":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:17.900000000000002,ss:6.48,ds:20.735999999999997,cs:12.959999999999999},{part:"Head",set:"Band of Sizzling Thunder",enhance:12,grade:5,main:{stat:"HP",value:587.059200008167},substats:[{stat:"ATK",value:40.2206687},{stat:"HP%",value:3.888},{stat:"SPD",value:4},{stat:"CRIT Rate",value:9.072}],id:"75756842-66be-4ac6-bb65-70b51f222b0a",augmentedStats:{mainStat:"HP",mainValue:587.059200008167,ATK:40.2206687,"HP%":.03888,SPD:4,"CRIT Rate":.09072,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,DEF:0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:28.4,ss:16.232,ds:10.4,cs:28.543999999999997},{part:"Head",set:"Hunter of Glacial Forest",enhance:12,grade:5,main:{stat:"HP",value:587.059200008167},substats:[{stat:"CRIT Rate",value:5.832},{stat:"CRIT DMG",value:12.959999999999999},{stat:"Effect RES",value:7.344},{stat:"Break Effect",value:11.664}],id:"c4adf66e-d769-47be-bf6d-d22f94786308",augmentedStats:{mainStat:"HP",mainValue:587.059200008167,"CRIT Rate":.05832,"CRIT DMG":.1296,"Effect RES":.07344,"Break Effect":.11664,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"Effect Hit Rate":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:24.5,ss:11.016,ds:11.664,cs:24.624},{part:"Hands",set:"Hunter of Glacial Forest",enhance:15,grade:5,main:{stat:"ATK",value:352.8000000116881},substats:[{stat:"HP%",value:3.456,scoreMeta:{multiplier:0,score:0}},{stat:"SPD",value:4,scoreMeta:{multiplier:1,score:10.368}},{stat:"CRIT DMG",value:22.68,scoreMeta:{multiplier:1,score:22.6}},{stat:"Effect Hit Rate",value:3.456,scoreMeta:{multiplier:0,score:0}}],id:"798657c8-5c5c-4b44-9c5f-f5f094414289",augmentedStats:{mainStat:"ATK",mainValue:352.8000000116881,"HP%":.03456,SPD:4,"CRIT DMG":.2268,"Effect Hit Rate":.03456,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,DEF:0,"CRIT Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:33,ss:15.584,ds:15.584,equippedBy:"1212",cs:33.08,weightScore:43.416},{part:"Hands",set:"Passerby of Wandering Cloud",enhance:15,grade:5,main:{stat:"ATK",value:352.8000000116881},substats:[{stat:"HP%",value:8.208},{stat:"ATK%",value:4.32},{stat:"CRIT DMG",value:17.496000000000002},{stat:"Effect RES",value:7.776}],id:"9b3f7f9b-b394-4c87-af67-0f4f7e41a6a8",augmentedStats:{mainStat:"ATK",mainValue:352.8000000116881,"HP%":.08208,"ATK%":.0432,"CRIT DMG":.17496000000000003,"Effect RES":.07776,"DEF%":0,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"CRIT Rate":0,"Effect Hit Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:23.849999999999998,ss:23.976,ds:6.48,equippedBy:"1217",cs:17.496000000000002},{part:"Hands",set:"Longevous Disciple",enhance:15,grade:5,main:{stat:"ATK",value:352.8000000116881},substats:[{stat:"SPD",value:7},{stat:"CRIT Rate",value:5.508},{stat:"CRIT DMG",value:11.664},{stat:"Effect Hit Rate",value:4.32}],id:"71b088e8-e254-4219-96d5-f56cde1702d3",augmentedStats:{mainStat:"ATK",mainValue:352.8000000116881,SPD:7,"CRIT Rate":.05508,"CRIT DMG":.11664,"Effect Hit Rate":.0432,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,DEF:0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:40.8,ss:18.2,ds:24.68,equippedBy:"1205",cs:40.879999999999995},{part:"Hands",set:"Genius of Brilliant Stars",enhance:15,grade:5,main:{stat:"ATK",value:352.8000000116881},substats:[{stat:"HP",value:38.1037941},{stat:"ATK%",value:7.776},{stat:"CRIT Rate",value:8.748000000000001},{stat:"CRIT DMG",value:12.312}],id:"d0b2b781-33dc-4029-b875-81ecbc659466",augmentedStats:{mainStat:"ATK",mainValue:352.8000000116881,HP:38.1037941,"ATK%":.07776,"CRIT Rate":.08748000000000002,"CRIT DMG":.12312,"HP%":0,"DEF%":0,"SPD%":0,ATK:0,DEF:0,SPD:0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:41.25,ss:0,ds:11.664,equippedBy:"1102",cs:29.808},{part:"Hands",set:"Hunter of Glacial Forest",enhance:15,grade:5,main:{stat:"ATK",value:352.8000000116881},substats:[{stat:"HP%",value:3.456},{stat:"SPD",value:4},{stat:"CRIT DMG",value:17.496000000000002},{stat:"Effect RES",value:10.8}],id:"1c3f175d-c9db-4b42-aa7d-0ffb5f9f3cf4",augmentedStats:{mainStat:"ATK",mainValue:352.8000000116881,"HP%":.03456,SPD:4,"CRIT DMG":.17496000000000003,"Effect RES":.10800000000000001,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,DEF:0,"CRIT Rate":0,"Effect Hit Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:27.799999999999997,ss:31.784000000000006,ds:10.4,cs:27.896,weightScore:49.248000000000005},{part:"Hands",set:"Genius of Brilliant Stars",enhance:15,grade:5,main:{stat:"ATK",value:352.8000000116881},substats:[{stat:"HP",value:38.1037941},{stat:"CRIT Rate",value:5.832},{stat:"CRIT DMG",value:16.2},{stat:"Effect Hit Rate",value:8.208}],id:"9f2ab764-badb-4240-9b57-484fdab84ff7",augmentedStats:{mainStat:"ATK",mainValue:352.8000000116881,HP:38.1037941,"CRIT Rate":.05832,"CRIT DMG":.162,"Effect Hit Rate":.08208,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,ATK:0,DEF:0,SPD:0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:27.799999999999997,ss:0,ds:12.312000000000001,cs:27.863999999999997},{part:"Hands",set:"Genius of Brilliant Stars",enhance:15,grade:5,main:{stat:"ATK",value:352.8000000116881},substats:[{stat:"HP",value:42.337549},{stat:"DEF",value:69.8569509},{stat:"ATK%",value:10.367999999999999},{stat:"CRIT Rate",value:2.5919999999999996}],id:"25966262-0749-4675-a5c3-7e701163e083",augmentedStats:{mainStat:"ATK",mainValue:352.8000000116881,HP:42.337549,DEF:69.8569509,"ATK%":.10367999999999998,"CRIT Rate":.025919999999999995,"HP%":0,"DEF%":0,"SPD%":0,ATK:0,SPD:0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:20.450000000000003,ss:0,ds:15.551999999999998,cs:5.183999999999999},{part:"Hands",set:"Band of Sizzling Thunder",enhance:15,grade:5,main:{stat:"ATK",value:352.8000000116881},substats:[{stat:"HP",value:42.337549},{stat:"ATK%",value:15.120000000000001},{stat:"CRIT DMG",value:11.664},{stat:"Break Effect",value:5.832}],id:"81a06240-1434-4b48-b7c4-cedbca15ff50",augmentedStats:{mainStat:"ATK",mainValue:352.8000000116881,HP:42.337549,"ATK%":.1512,"CRIT DMG":.11664,"Break Effect":.05832,"HP%":0,"DEF%":0,"SPD%":0,ATK:0,DEF:0,SPD:0,"CRIT Rate":0,"Effect Hit Rate":0,"Effect RES":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:34.25,ss:0,ds:28.512,equippedBy:"1005",cs:11.664},{part:"Hands",set:"Messenger Traversing Hackerspace",enhance:15,grade:5,main:{stat:"ATK",value:352.8000000116881},substats:[{stat:"DEF%",value:4.32},{stat:"SPD",value:4},{stat:"Effect Hit Rate",value:12.096},{stat:"Effect RES",value:7.776}],id:"24a8bb7d-4924-446c-8d8d-56b7d782ab70",augmentedStats:{mainStat:"ATK",mainValue:352.8000000116881,"DEF%":.0432,SPD:4,"Effect Hit Rate":.12096,"Effect RES":.07776,"HP%":0,"ATK%":0,"SPD%":0,HP:0,ATK:0,DEF:0,"CRIT DMG":0,"CRIT Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:10.4,ss:27.247999999999998,ds:28.543999999999997,cs:10.4},{part:"Hands",set:"Messenger Traversing Hackerspace",enhance:15,grade:5,main:{stat:"ATK",value:352.8000000116881},substats:[{stat:"HP%",value:3.888},{stat:"ATK%",value:8.208},{stat:"DEF%",value:4.859999999999999},{stat:"SPD",value:9}],id:"039ac008-c1a4-453a-92d2-0aaece2fb9ca",augmentedStats:{mainStat:"ATK",mainValue:352.8000000116881,"HP%":.03888,"ATK%":.08208,"DEF%":.0486,SPD:9,"SPD%":0,HP:0,ATK:0,DEF:0,"CRIT DMG":0,"CRIT Rate":0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:35.7,ss:35.064,ds:35.712,cs:23.400000000000002},{part:"Hands",set:"Messenger Traversing Hackerspace",enhance:15,grade:5,main:{stat:"ATK",value:352.8000000116881},substats:[{stat:"DEF",value:42.337546},{stat:"SPD",value:4},{stat:"Effect Hit Rate",value:8.64},{stat:"Break Effect",value:12.959999999999999}],id:"0d95b359-89d2-4809-9f84-e0dc5794a367",augmentedStats:{mainStat:"ATK",mainValue:352.8000000116881,DEF:42.337546,SPD:4,"Effect Hit Rate":.0864,"Break Effect":.1296,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,"CRIT DMG":0,"CRIT Rate":0,"Effect RES":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:10.4,ss:10.4,ds:36.32,cs:10.4},{part:"Hands",set:"Band of Sizzling Thunder",enhance:15,grade:5,main:{stat:"ATK",value:352.8000000116881},substats:[{stat:"HP%",value:7.776},{stat:"ATK%",value:15.984000000000002},{stat:"CRIT Rate",value:5.832},{stat:"CRIT DMG",value:5.183999999999999}],id:"19cb32c1-62e9-4a24-8b09-2e4d48056681",augmentedStats:{mainStat:"ATK",mainValue:352.8000000116881,"HP%":.07776,"ATK%":.15984,"CRIT Rate":.05832,"CRIT DMG":.05183999999999999,"DEF%":0,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:40.550000000000004,ss:11.664,ds:23.976000000000003,cs:16.848},{part:"Hands",set:"Genius of Brilliant Stars",enhance:15,grade:5,main:{stat:"ATK",value:352.8000000116881},substats:[{stat:"DEF",value:38.1037914},{stat:"ATK%",value:3.888},{stat:"SPD",value:6},{stat:"CRIT Rate",value:5.508}],id:"58fd5666-2e8a-4a56-a675-5098c886ff87",augmentedStats:{mainStat:"ATK",mainValue:352.8000000116881,DEF:38.1037914,"ATK%":.03888,SPD:6,"CRIT Rate":.05508,"HP%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:32.3,ss:15.600000000000001,ds:21.432000000000002,cs:26.616},{part:"Hands",set:"Genius of Brilliant Stars",enhance:15,grade:5,main:{stat:"ATK",value:352.8000000116881},substats:[{stat:"DEF",value:55.0388098},{stat:"CRIT Rate",value:2.5919999999999996},{stat:"CRIT DMG",value:11.016},{stat:"Effect RES",value:10.8}],id:"92158d7b-fd3a-462c-b4fd-2091b81286b2",augmentedStats:{mainStat:"ATK",mainValue:352.8000000116881,DEF:55.0388098,"CRIT Rate":.025919999999999995,"CRIT DMG":.11016,"Effect RES":.10800000000000001,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,SPD:0,"Effect Hit Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:16,ss:16.200000000000003,ds:0,cs:16.2},{part:"Hands",set:"Hunter of Glacial Forest",enhance:15,grade:5,main:{stat:"ATK",value:352.8000000116881},substats:[{stat:"HP%",value:7.776},{stat:"CRIT Rate",value:5.183999999999999},{stat:"CRIT DMG",value:16.2},{stat:"Break Effect",value:10.367999999999999}],id:"26d1567a-3fe8-4c02-9874-80612a6fa4a7",augmentedStats:{mainStat:"ATK",mainValue:352.8000000116881,"HP%":.07776,"CRIT Rate":.05183999999999999,"CRIT DMG":.162,"Break Effect":.10367999999999998,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"Effect Hit Rate":0,"Effect RES":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:26.4,ss:11.664,ds:10.367999999999999,cs:26.567999999999998,weightScore:48.599999999999994},{part:"Hands",set:"Hunter of Glacial Forest",enhance:15,grade:5,main:{stat:"ATK",value:352.8000000116881},substats:[{stat:"DEF",value:40.2206687},{stat:"CRIT Rate",value:9.072},{stat:"CRIT DMG",value:5.832},{stat:"Break Effect",value:18.144}],id:"130a284c-8e10-40bf-9ba9-b3e56ac894b9",augmentedStats:{mainStat:"ATK",mainValue:352.8000000116881,DEF:40.2206687,"CRIT Rate":.09072,"CRIT DMG":.05832,"Break Effect":.18144,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,SPD:0,"Effect Hit Rate":0,"Effect RES":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:23.8,ss:0,ds:18.144,cs:23.976,weightScore:47.09472711193568},{part:"Hands",set:"Hunter of Glacial Forest",enhance:15,grade:5,main:{stat:"ATK",value:352.8000000116881},substats:[{stat:"HP%",value:7.344},{stat:"DEF%",value:9.719999999999999},{stat:"CRIT Rate",value:5.832},{stat:"CRIT DMG",value:11.016}],id:"0bb9bf7e-5f26-496b-91ff-fa0087f1407b",augmentedStats:{mainStat:"ATK",mainValue:352.8000000116881,"HP%":.07344,"DEF%":.0972,"CRIT Rate":.05832,"CRIT DMG":.11016,"ATK%":0,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:22.6,ss:22.68,ds:0,cs:22.68,weightScore:45.35999999999999},{part:"Hands",set:"Hunter of Glacial Forest",enhance:15,grade:5,main:{stat:"ATK",value:352.8000000116881},substats:[{stat:"HP%",value:7.776,scoreMeta:{multiplier:0,score:0}},{stat:"SPD",value:8,scoreMeta:{multiplier:1,score:20.736}},{stat:"CRIT DMG",value:6.4799999999999995,scoreMeta:{multiplier:1,score:6.4799999999999995}},{stat:"Effect Hit Rate",value:7.344,scoreMeta:{multiplier:0,score:0}}],id:"5b198c90-85fd-4baa-b44a-556f6e9d4d18",augmentedStats:{mainStat:"ATK",mainValue:352.8000000116881,"HP%":.07776,SPD:8,"CRIT DMG":.0648,"Effect Hit Rate":.07344,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,DEF:0,"CRIT Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:27.200000000000003,ss:32.464,ds:31.816000000000003,cs:27.28,weightScore:49.895999999999994},{part:"Hands",set:"Hunter of Glacial Forest",enhance:15,grade:5,main:{stat:"ATK",value:352.8000000116881},substats:[{stat:"DEF",value:19.0518957},{stat:"CRIT Rate",value:5.183999999999999},{stat:"CRIT DMG",value:12.312},{stat:"Effect RES",value:10.8}],id:"85589ec4-df10-4cbc-b190-8a3fca0030b0",augmentedStats:{mainStat:"ATK",mainValue:352.8000000116881,DEF:19.0518957,"CRIT Rate":.05183999999999999,"CRIT DMG":.12312,"Effect RES":.10800000000000001,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,SPD:0,"Effect Hit Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:22.5,ss:16.200000000000003,ds:0,cs:22.68,weightScore:41.23644968460111},{part:"Hands",set:"Hunter of Glacial Forest",enhance:15,grade:5,main:{stat:"ATK",value:352.8000000116881},substats:[{stat:"HP%",value:3.456},{stat:"ATK%",value:7.776},{stat:"CRIT Rate",value:11.988},{stat:"Effect RES",value:3.888}],id:"467aa841-1d6b-4d13-8b7b-3f6d4c288367",augmentedStats:{mainStat:"ATK",mainValue:352.8000000116881,"HP%":.03456,"ATK%":.07776,"CRIT Rate":.11988,"Effect RES":.03888,"DEF%":0,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"CRIT DMG":0,"Effect Hit Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:35.35,ss:11.016,ds:11.664,cs:23.976,weightScore:46.656},{part:"Hands",set:"Hunter of Glacial Forest",enhance:15,grade:5,main:{stat:"ATK",value:352.8000000116881},substats:[{stat:"ATK%",value:8.64},{stat:"DEF%",value:9.180000000000001},{stat:"CRIT DMG",value:12.312},{stat:"Break Effect",value:12.959999999999999}],id:"df9b4eda-ad97-4940-935e-a2094414414c",augmentedStats:{mainStat:"ATK",mainValue:352.8000000116881,"ATK%":.0864,"DEF%":.09180000000000002,"CRIT DMG":.12312,"Break Effect":.1296,"HP%":0,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"CRIT Rate":0,"Effect Hit Rate":0,"Effect RES":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:25.2,ss:11.016000000000002,ds:25.92,cs:12.312,weightScore:49.248},{part:"Hands",set:"Guard of Wuthering Snow",enhance:12,grade:5,main:{stat:"ATK",value:293.52960000932217},substats:[{stat:"HP%",value:3.888},{stat:"DEF%",value:4.32},{stat:"Effect Hit Rate",value:6.912},{stat:"Effect RES",value:10.8}],id:"605af0bc-ad64-46da-9681-e8889fa8d66d",augmentedStats:{mainStat:"ATK",mainValue:293.52960000932217,"HP%":.03888,"DEF%":.0432,"Effect Hit Rate":.06912,"Effect RES":.10800000000000001,"ATK%":0,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"CRIT DMG":0,"CRIT Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:0,ss:27.216,ds:10.368,cs:0},{part:"Hands",set:"Musketeer of Wild Wheat",enhance:12,grade:5,main:{stat:"ATK",value:293.52960000932217},substats:[{stat:"HP",value:71.9738333},{stat:"DEF",value:33.8700368},{stat:"HP%",value:12.959999999999999},{stat:"DEF%",value:4.32}],id:"67999399-0a5f-4a94-9267-32c42a7fbbe5",augmentedStats:{mainStat:"ATK",mainValue:293.52960000932217,HP:71.9738333,DEF:33.8700368,"HP%":.1296,"DEF%":.0432,"ATK%":0,"SPD%":0,ATK:0,SPD:0,"CRIT DMG":0,"CRIT Rate":0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:0,ss:24.624,ds:0,equippedBy:"1202",cs:0},{part:"Hands",set:"Longevous Disciple",enhance:12,grade:5,main:{stat:"ATK",value:293.52960000932217},substats:[{stat:"HP%",value:16.416},{stat:"ATK%",value:7.776},{stat:"CRIT DMG",value:5.832},{stat:"Effect Hit Rate",value:3.456}],id:"2fa02060-e9c7-4910-bd20-c89864379aff",augmentedStats:{mainStat:"ATK",mainValue:293.52960000932217,"HP%":.16416,"ATK%":.07776,"CRIT DMG":.05832,"Effect Hit Rate":.03456,"DEF%":0,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"CRIT Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:17.35,ss:24.624000000000002,ds:16.848,cs:5.832},{part:"Hands",set:"Hunter of Glacial Forest",enhance:12,grade:5,main:{stat:"ATK",value:293.52960000932217},substats:[{stat:"DEF",value:57.1556871},{stat:"ATK%",value:8.64},{stat:"CRIT Rate",value:3.2399999999999998},{stat:"CRIT DMG",value:5.183999999999999}],id:"5e67a642-be84-4d5d-b887-cc323b84e8c6",augmentedStats:{mainStat:"ATK",mainValue:293.52960000932217,DEF:57.1556871,"ATK%":.0864,"CRIT Rate":.0324,"CRIT DMG":.05183999999999999,"HP%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,SPD:0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:24.4,ss:0,ds:12.96,cs:11.663999999999998},{part:"Hands",set:"Hunter of Glacial Forest",enhance:12,grade:5,main:{stat:"ATK",value:293.52960000932217},substats:[{stat:"HP",value:38.1037941},{stat:"SPD",value:6},{stat:"CRIT DMG",value:6.4799999999999995},{stat:"Effect RES",value:10.8}],id:"6f1373fd-b42f-4dc3-a562-9c44fbe8e1fb",augmentedStats:{mainStat:"ATK",mainValue:293.52960000932217,HP:38.1037941,SPD:6,"CRIT DMG":.0648,"Effect RES":.10800000000000001,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,ATK:0,DEF:0,"CRIT Rate":0,"Effect Hit Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:22,ss:31.800000000000004,ds:15.600000000000001,cs:22.080000000000002},{part:"Hands",set:"Hunter of Glacial Forest",enhance:12,grade:5,main:{stat:"ATK",value:293.52960000932217},substats:[{stat:"HP",value:42.337549},{stat:"SPD",value:2},{stat:"CRIT DMG",value:11.664},{stat:"Effect RES",value:12.096}],id:"63457d83-ec25-40dd-a1d1-04dda49a3740",augmentedStats:{mainStat:"ATK",mainValue:293.52960000932217,HP:42.337549,SPD:2,"CRIT DMG":.11664,"Effect RES":.12096,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,ATK:0,DEF:0,"CRIT Rate":0,"Effect Hit Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:16.8,ss:23.343999999999998,ds:5.2,cs:16.864},{part:"Hands",set:"Guard of Wuthering Snow",enhance:10,grade:3,main:{stat:"ATK",value:152.40960001200438},substats:[{stat:"HP",value:71},{stat:"HP%",value:8.2},{stat:"Effect Hit Rate",value:8.2},{stat:"Effect RES",value:3.8}],id:"d6aaf5a8-2351-4880-bcd6-0f7ceb011956",augmentedStats:{mainStat:"ATK",mainValue:152.40960001200438,HP:71,"HP%":.08199999999999999,"Effect Hit Rate":.08199999999999999,"Effect RES":.038,"ATK%":0,"DEF%":0,"SPD%":0,ATK:0,DEF:0,SPD:0,"CRIT DMG":0,"CRIT Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},cs:0,ss:18,ds:12.299999999999999},{part:"Hands",set:"Musketeer of Wild Wheat",enhance:9,grade:3,main:{stat:"ATK",value:140.55552001087926},substats:[{stat:"HP%",value:3.4},{stat:"DEF%",value:10.2},{stat:"Effect RES",value:7.3},{stat:"Break Effect",value:5.1}],id:"d61a533d-e721-4edb-99f4-787708a08132",augmentedStats:{mainStat:"ATK",mainValue:140.55552001087926,"HP%":.034,"DEF%":.102,"Effect RES":.073,"Break Effect":.051,"ATK%":0,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"CRIT DMG":0,"CRIT Rate":0,"Effect Hit Rate":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},cs:0,ss:28.29,ds:5.1},{part:"Hands",set:"Passerby of Wandering Cloud",enhance:9,grade:3,main:{stat:"ATK",value:140.55552001087926},substats:[{stat:"HP",value:42},{stat:"HP%",value:7.7},{stat:"CRIT Rate",value:5.5},{stat:"Effect Hit Rate",value:3.4}],id:"a75828e1-5e27-49ab-8bca-67e2e1fdd3ec",augmentedStats:{mainStat:"ATK",mainValue:140.55552001087926,HP:42,"HP%":.077,"CRIT Rate":.055,"Effect Hit Rate":.034,"ATK%":0,"DEF%":0,"SPD%":0,ATK:0,DEF:0,SPD:0,"CRIT DMG":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},cs:11,ss:11.55,ds:5.1000000000000005},{part:"Hands",set:"Guard of Wuthering Snow",enhance:9,grade:3,main:{stat:"ATK",value:140.55552001087926},substats:[{stat:"DEF",value:38},{stat:"DEF%",value:15.6},{stat:"CRIT Rate",value:2.9},{stat:"Effect Hit Rate",value:3.4}],id:"1c2a19ba-fb58-4ff6-9f4d-582c3db368ae",augmentedStats:{mainStat:"ATK",mainValue:140.55552001087926,DEF:38,"DEF%":.156,"CRIT Rate":.028999999999999998,"Effect Hit Rate":.034,"HP%":0,"ATK%":0,"SPD%":0,HP:0,ATK:0,SPD:0,"CRIT DMG":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},cs:5.8,ss:18.72,ds:5.1000000000000005},{part:"Hands",set:"Band of Sizzling Thunder",enhance:9,grade:3,main:{stat:"ATK",value:140.55552001087926},substats:[{stat:"HP%",value:8.6},{stat:"DEF%",value:4.3},{stat:"SPD",value:2},{stat:"Break Effect",value:11}],id:"30362d67-7152-4dd2-a57c-4408c0287b8e",augmentedStats:{mainStat:"ATK",mainValue:140.55552001087926,"HP%":.086,"DEF%":.043,SPD:2,"Break Effect":.11,"ATK%":0,"SPD%":0,HP:0,ATK:0,DEF:0,"CRIT DMG":0,"CRIT Rate":0,"Effect Hit Rate":0,"Effect RES":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},cs:5.2,ss:23.259999999999998,ds:16.2},{part:"Hands",set:"Longevous Disciple",enhance:9,grade:3,main:{stat:"ATK",value:140.55552001087926},substats:[{stat:"HP%",value:3.4},{stat:"DEF%",value:14.5},{stat:"CRIT DMG",value:6.4},{stat:"Effect Hit Rate",value:3.8}],id:"0a4f8d97-9ca4-452c-b872-3d19a9576b4c",augmentedStats:{mainStat:"ATK",mainValue:140.55552001087926,"HP%":.034,"DEF%":.145,"CRIT DMG":.064,"Effect Hit Rate":.038,"ATK%":0,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"CRIT Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},cs:6.4,ss:22.5,ds:5.699999999999999},{part:"Hands",set:"Band of Sizzling Thunder",enhance:9,grade:3,main:{stat:"ATK",value:140.55552001087926},substats:[{stat:"HP%",value:3.8},{stat:"ATK%",value:3.4},{stat:"Effect Hit Rate",value:12},{stat:"Break Effect",value:5.8}],id:"4e512372-e8b0-456e-a37e-8080445edfed",augmentedStats:{mainStat:"ATK",mainValue:140.55552001087926,"HP%":.038,"ATK%":.034,"Effect Hit Rate":.12,"Break Effect":.057999999999999996,"DEF%":0,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"CRIT DMG":0,"CRIT Rate":0,"Effect RES":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},cs:0,ss:5.699999999999999,ds:28.900000000000002},{part:"Hands",set:"Hunter of Glacial Forest",enhance:9,grade:3,main:{stat:"ATK",value:140.55552001087926},substats:[{stat:"DEF",value:21.5921488},{stat:"SPD",value:2},{stat:"CRIT Rate",value:5.8},{stat:"Effect RES",value:7.3}],id:"c128854c-b34e-4a05-acdc-5179534bf55f",augmentedStats:{mainStat:"ATK",mainValue:140.55552001087926,DEF:21.5921488,SPD:2,"CRIT Rate":.057999999999999996,"Effect RES":.073,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,"CRIT DMG":0,"Effect Hit Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},cs:16.8,ss:16.15,ds:5.2},{part:"Hands",set:"Hunter of Glacial Forest",enhance:9,grade:3,main:{stat:"ATK",value:140.55552001087926},substats:[{stat:"HP",value:71},{stat:"ATK%",value:3.8},{stat:"DEF%",value:4.8},{stat:"CRIT Rate",value:5.5}],id:"9e27d180-01ec-4b06-86fc-cd7cb7868724",augmentedStats:{mainStat:"ATK",mainValue:140.55552001087926,HP:71,"ATK%":.038,"DEF%":.048,"CRIT Rate":.055,"HP%":0,"SPD%":0,ATK:0,DEF:0,SPD:0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},cs:11,ss:5.76,ds:5.699999999999999},{part:"Hands",set:"Hunter of Glacial Forest",enhance:9,grade:3,main:{stat:"ATK",value:140.55552001087926},substats:[{stat:"DEF%",value:5.4},{stat:"SPD",value:4},{stat:"CRIT DMG",value:5.8},{stat:"Effect RES",value:8.2}],id:"8ed0420b-66e4-4b5e-83d0-6aa75db77e5d",augmentedStats:{mainStat:"ATK",mainValue:140.55552001087926,"DEF%":.054000000000000006,SPD:4,"CRIT DMG":.057999999999999996,"Effect RES":.08199999999999999,"HP%":0,"ATK%":0,"SPD%":0,HP:0,ATK:0,DEF:0,"CRIT Rate":0,"Effect Hit Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},cs:16.2,ss:29.18,ds:10.4},{part:"Hands",set:"Hunter of Glacial Forest",enhance:9,grade:3,main:{stat:"ATK",value:140.55552001087926},substats:[{stat:"HP%",value:3.4},{stat:"ATK%",value:3.8},{stat:"DEF%",value:9.7},{stat:"CRIT Rate",value:5.8}],id:"0d3e87b1-c8de-4a05-a817-4e1e59f0281f",augmentedStats:{mainStat:"ATK",mainValue:140.55552001087926,"HP%":.034,"ATK%":.038,"DEF%":.09699999999999999,"CRIT Rate":.057999999999999996,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},cs:11.6,ss:16.74,ds:5.699999999999999},{part:"Hands",set:"Passerby of Wandering Cloud",enhance:9,grade:3,main:{stat:"ATK",value:140.55552001087926},substats:[{stat:"DEF",value:16},{stat:"HP%",value:4.3},{stat:"DEF%",value:15.1},{stat:"Break Effect",value:6.4}],id:"98fdd38c-9f98-41b4-ba20-9b9333a4ed22",augmentedStats:{mainStat:"ATK",mainValue:140.55552001087926,DEF:16,"HP%":.043,"DEF%":.151,"Break Effect":.064,"ATK%":0,"SPD%":0,HP:0,ATK:0,SPD:0,"CRIT DMG":0,"CRIT Rate":0,"Effect Hit Rate":0,"Effect RES":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},cs:0,ss:24.569999999999997,ds:6.4},{part:"Body",set:"Hunter of Glacial Forest",enhance:15,grade:5,main:{stat:"CRIT DMG",value:64.8000007029628},substats:[{stat:"HP",value:114.3113823,scoreMeta:{multiplier:0,score:0}},{stat:"ATK%",value:7.344,scoreMeta:{multiplier:.75,score:8.212499999999999}},{stat:"DEF%",value:4.32,scoreMeta:{multiplier:0,score:0}},{stat:"CRIT Rate",value:8.1,scoreMeta:{multiplier:1,score:16.2}}],id:"b3376a19-62f9-489e-80e6-8f98335af158",augmentedStats:{mainStat:"CRIT DMG",mainValue:.648000007029628,HP:114.3113823,"ATK%":.07344,"DEF%":.0432,"CRIT Rate":.081,"HP%":0,"SPD%":0,ATK:0,DEF:0,SPD:0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:27.15,ss:5.184,ds:11.016,equippedBy:"1212",cs:16.2,weightScore:38.37073442122549},{part:"Body",set:"Passerby of Wandering Cloud",enhance:15,grade:5,main:{stat:"Outgoing Healing Boost",value:34.5606000395488},substats:[{stat:"DEF",value:21.5921488},{stat:"DEF%",value:14.04},{stat:"Effect RES",value:7.776},{stat:"Break Effect",value:11.664}],id:"0241587d-bbff-4ffb-b93c-d201728d1c0b",augmentedStats:{mainStat:"Outgoing Healing Boost",mainValue:.345606000395488,DEF:21.5921488,"DEF%":.1404,"Effect RES":.07776,"Break Effect":.11664,"HP%":0,"ATK%":0,"SPD%":0,HP:0,ATK:0,SPD:0,"CRIT DMG":0,"CRIT Rate":0,"Effect Hit Rate":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},cs:0,ss:28.512,ds:11.664},{part:"Body",set:"Longevous Disciple",enhance:15,grade:5,main:{stat:"CRIT DMG",value:64.8000007029628},substats:[{stat:"HP",value:139.7139117},{stat:"DEF%",value:4.32},{stat:"SPD",value:4},{stat:"Break Effect",value:5.832}],id:"7cdd90c6-73fc-4a5f-9cea-6458d5e6f456",augmentedStats:{mainStat:"CRIT DMG",mainValue:.648000007029628,HP:139.7139117,"DEF%":.0432,SPD:4,"Break Effect":.05832,"HP%":0,"ATK%":0,"SPD%":0,ATK:0,DEF:0,"CRIT DMG":0,"CRIT Rate":0,"Effect Hit Rate":0,"Effect RES":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:10.4,ss:15.584,ds:16.232,equippedBy:"1205",cs:10.4},{part:"Body",set:"Genius of Brilliant Stars",enhance:15,grade:5,main:{stat:"CRIT Rate",value:32.399999862536205},substats:[{stat:"ATK%",value:12.096},{stat:"SPD",value:4},{stat:"Effect Hit Rate",value:6.912},{stat:"Break Effect",value:5.183999999999999}],id:"4b8dafeb-6f5a-410c-bcbc-4caaef116af2",augmentedStats:{mainStat:"CRIT Rate",mainValue:.32399999862536205,"ATK%":.12096,SPD:4,"Effect Hit Rate":.06912,"Break Effect":.05183999999999999,"HP%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,DEF:0,"CRIT DMG":0,"CRIT Rate":0,"Effect RES":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:28.4,ss:10.4,ds:44.096,equippedBy:"1102",cs:10.4},{part:"Body",set:"Hunter of Glacial Forest",enhance:15,grade:5,main:{stat:"CRIT DMG",value:64.8000007029628},substats:[{stat:"HP",value:71.9738333},{stat:"DEF",value:21.5921488},{stat:"SPD",value:5},{stat:"Break Effect",value:17.496000000000002}],id:"1717f468-9cb4-495a-b20d-57f69205b5f6",augmentedStats:{mainStat:"CRIT DMG",mainValue:.648000007029628,HP:71.9738333,DEF:21.5921488,SPD:5,"Break Effect":.17496000000000003,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,ATK:0,"CRIT DMG":0,"CRIT Rate":0,"Effect Hit Rate":0,"Effect RES":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},cs:13,ss:13,ds:30.496000000000002,weightScore:36.885994320187535},{part:"Body",set:"Genius of Brilliant Stars",enhance:15,grade:5,main:{stat:"CRIT DMG",value:64.8000007029628},substats:[{stat:"HP",value:110.0776274},{stat:"ATK%",value:8.64},{stat:"CRIT Rate",value:6.156},{stat:"Break Effect",value:5.832}],id:"3e94d21f-f47c-4dba-8470-8eaf4b8624e9",augmentedStats:{mainStat:"CRIT DMG",mainValue:.648000007029628,HP:110.0776274,"ATK%":.0864,"CRIT Rate":.06156,"Break Effect":.05832,"HP%":0,"DEF%":0,"SPD%":0,ATK:0,DEF:0,SPD:0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:25.099999999999998,ss:0,ds:18.792,cs:12.312},{part:"Body",set:"Band of Sizzling Thunder",enhance:15,grade:5,main:{stat:"ATK%",value:43.200000724755604},substats:[{stat:"HP",value:71.9738333},{stat:"DEF%",value:9.180000000000001},{stat:"SPD",value:4},{stat:"Break Effect",value:12.312}],id:"dd7d21eb-5a85-466e-a7a3-98fc6f63e546",augmentedStats:{mainStat:"ATK%",mainValue:.43200000724755605,HP:71.9738333,"DEF%":.09180000000000002,SPD:4,"Break Effect":.12312,"HP%":0,"ATK%":0,"SPD%":0,ATK:0,DEF:0,"CRIT DMG":0,"CRIT Rate":0,"Effect Hit Rate":0,"Effect RES":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:10.4,ss:21.416000000000004,ds:22.712,equippedBy:"1005",cs:10.4},{part:"Body",set:"Messenger Traversing Hackerspace",enhance:15,grade:5,main:{stat:"CRIT DMG",value:64.8000007029628},substats:[{stat:"HP%",value:8.64},{stat:"ATK%",value:7.776},{stat:"DEF%",value:10.26},{stat:"Effect Hit Rate",value:12.528}],id:"29f91de6-5c70-4e10-90e1-cf79888932d6",augmentedStats:{mainStat:"CRIT DMG",mainValue:.648000007029628,"HP%":.0864,"ATK%":.07776,"DEF%":.1026,"Effect Hit Rate":.12528,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"CRIT DMG":0,"CRIT Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:11.55,ss:25.272,ds:30.456000000000003,cs:0},{part:"Body",set:"Eagle of Twilight Line",enhance:15,grade:5,main:{stat:"CRIT DMG",value:64.8000007029628},substats:[{stat:"HP%",value:11.232000000000001},{stat:"SPD",value:2},{stat:"CRIT Rate",value:6.4799999999999995},{stat:"Effect RES",value:7.344}],id:"b41c1519-2f34-4701-9d04-2c54cbfa8a3f",augmentedStats:{mainStat:"CRIT DMG",mainValue:.648000007029628,"HP%":.11232000000000002,SPD:2,"CRIT Rate":.0648,"Effect RES":.07344,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,DEF:0,"CRIT DMG":0,"Effect Hit Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},cs:18.16,ss:33.06400000000001,ds:5.2},{part:"Body",set:"Eagle of Twilight Line",enhance:15,grade:5,main:{stat:"HP%",value:43.200000724755604},substats:[{stat:"HP",value:76.2075882},{stat:"DEF%",value:4.32},{stat:"SPD",value:6},{stat:"CRIT DMG",value:12.312}],id:"834292d9-899b-42a7-84b1-82f663bc007d",augmentedStats:{mainStat:"HP%",mainValue:.43200000724755605,HP:76.2075882,"DEF%":.0432,SPD:6,"CRIT DMG":.12312,"HP%":0,"ATK%":0,"SPD%":0,ATK:0,DEF:0,"CRIT Rate":0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:27.900000000000002,ss:20.784000000000002,ds:15.600000000000001,cs:27.912},{part:"Body",set:"Guard of Wuthering Snow",enhance:15,grade:5,main:{stat:"Outgoing Healing Boost",value:34.5606000395488},substats:[{stat:"HP%",value:7.344},{stat:"DEF%",value:10.26},{stat:"Effect Hit Rate",value:3.456},{stat:"Effect RES",value:12.096}],id:"9a5915a8-e547-47aa-9ff1-fd907341a6c3",augmentedStats:{mainStat:"Outgoing Healing Boost",mainValue:.345606000395488,"HP%":.07344,"DEF%":.1026,"Effect Hit Rate":.03456,"Effect RES":.12096,"ATK%":0,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"CRIT DMG":0,"CRIT Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:0,ss:41.471999999999994,ds:5.184,cs:0},{part:"Body",set:"Hunter of Glacial Forest",enhance:15,grade:5,main:{stat:"CRIT DMG",value:64.8000007029628},substats:[{stat:"HP",value:67.7400784},{stat:"ATK%",value:7.776},{stat:"CRIT Rate",value:5.832},{stat:"Break Effect",value:16.848}],id:"b1006c27-f93f-4965-911b-4a934cd41021",augmentedStats:{mainStat:"CRIT DMG",mainValue:.648000007029628,HP:67.7400784,"ATK%":.07776,"CRIT Rate":.05832,"Break Effect":.16848,"HP%":0,"DEF%":0,"SPD%":0,ATK:0,DEF:0,SPD:0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:23.15,ss:0,ds:28.512,cs:11.664,weightScore:43.71421299035585},{part:"Body",set:"Hunter of Glacial Forest",enhance:15,grade:5,main:{stat:"CRIT DMG",value:64.8000007029628},substats:[{stat:"ATK%",value:7.776,scoreMeta:{multiplier:.75,score:8.748}},{stat:"CRIT Rate",value:6.156,scoreMeta:{multiplier:1,score:12.312}},{stat:"Effect RES",value:7.344,scoreMeta:{multiplier:0,score:0}},{stat:"Break Effect",value:12.312,scoreMeta:{multiplier:0,score:0}}],id:"a8d2e198-7d41-4251-91ef-f7259ff39df4",augmentedStats:{mainStat:"CRIT DMG",mainValue:.648000007029628,"ATK%":.07776,"CRIT Rate":.06156,"Effect RES":.07344,"Break Effect":.12312,"HP%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"CRIT DMG":0,"Effect Hit Rate":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:23.75,ss:11.016,ds:23.976,cs:12.312,weightScore:47.303999999999995},{part:"Body",set:"Hunter of Glacial Forest",enhance:15,grade:5,main:{stat:"CRIT DMG",value:64.8000007029628},substats:[{stat:"ATK",value:19.0518957},{stat:"DEF",value:40.2206687},{stat:"HP%",value:15.984000000000002},{stat:"CRIT Rate",value:2.916}],id:"f3177930-819d-4e84-8818-adc97455f734",augmentedStats:{mainStat:"CRIT DMG",mainValue:.648000007029628,ATK:19.0518957,DEF:40.2206687,"HP%":.15984,"CRIT Rate":.02916,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,SPD:0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:5.8,ss:23.976000000000003,ds:0,cs:5.832,weightScore:36.886700044615246},{part:"Body",set:"Passerby of Wandering Cloud",enhance:15,grade:5,main:{stat:"Outgoing Healing Boost",value:34.5606000395488},substats:[{stat:"HP",value:38.1037941},{stat:"SPD",value:9},{stat:"CRIT DMG",value:12.312},{stat:"Effect RES",value:3.456}],id:"725e6ee5-9465-45a2-8172-ed69241c1e54",augmentedStats:{mainStat:"Outgoing Healing Boost",mainValue:.345606000395488,HP:38.1037941,SPD:9,"CRIT DMG":.12312,"Effect RES":.03456,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,ATK:0,DEF:0,"CRIT Rate":0,"Effect Hit Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:35.7,ss:28.584000000000003,ds:23.400000000000002,equippedBy:"1217",cs:35.712},{part:"Body",set:"Guard of Wuthering Snow",enhance:14,grade:5,main:{stat:"CRIT DMG",value:61.1712006619205},substats:[{stat:"DEF%",value:4.859999999999999},{stat:"SPD",value:4},{stat:"Effect RES",value:11.232000000000001},{stat:"Break Effect",value:5.832}],id:"79f1d0f3-741b-4430-9685-87e29267e01d",augmentedStats:{mainStat:"CRIT DMG",mainValue:.611712006619205,"DEF%":.0486,SPD:4,"Effect RES":.11232000000000002,"Break Effect":.05832,"HP%":0,"ATK%":0,"SPD%":0,HP:0,ATK:0,DEF:0,"CRIT DMG":0,"CRIT Rate":0,"Effect Hit Rate":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},cs:10.4,ss:33.08,ds:16.232},{part:"Body",set:"Musketeer of Wild Wheat",enhance:12,grade:5,main:{stat:"Outgoing Healing Boost",value:28.7544000428167},substats:[{stat:"HP",value:38.1037941},{stat:"ATK",value:35.9869141},{stat:"ATK%",value:8.64},{stat:"SPD",value:4}],id:"0b4bdbc7-dac3-4648-bd6f-631d6750a5b5",augmentedStats:{mainStat:"Outgoing Healing Boost",mainValue:.287544000428167,HP:38.1037941,ATK:35.9869141,"ATK%":.0864,SPD:4,"HP%":0,"DEF%":0,"SPD%":0,DEF:0,"CRIT DMG":0,"CRIT Rate":0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:23.299999999999997,ss:10.4,ds:23.36,cs:10.4},{part:"Body",set:"Messenger Traversing Hackerspace",enhance:12,grade:5,main:{stat:"HP%",value:35.9424005728218},substats:[{stat:"SPD",value:4},{stat:"CRIT Rate",value:5.508},{stat:"CRIT DMG",value:11.664},{stat:"Break Effect",value:6.4799999999999995}],id:"fb53d114-66ea-4014-9ef6-7dc4519cc4e1",augmentedStats:{mainStat:"HP%",mainValue:.35942400572821803,SPD:4,"CRIT Rate":.05508,"CRIT DMG":.11664,"Break Effect":.0648,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,DEF:0,"Effect Hit Rate":0,"Effect RES":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:33,ss:10.4,ds:16.88,cs:33.08},{part:"Body",set:"Messenger Traversing Hackerspace",enhance:12,grade:5,main:{stat:"HP%",value:35.9424005728218},substats:[{stat:"HP",value:105.8438725},{stat:"SPD",value:4},{stat:"CRIT DMG",value:6.4799999999999995},{stat:"Effect Hit Rate",value:4.32}],id:"45ad26f9-f51b-4ca6-960b-b0db7edb5087",augmentedStats:{mainStat:"HP%",mainValue:.35942400572821803,HP:105.8438725,SPD:4,"CRIT DMG":.0648,"Effect Hit Rate":.0432,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,ATK:0,DEF:0,"CRIT Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:16.8,ss:10.4,ds:16.880000000000003,cs:16.88},{part:"Body",set:"Champion of Streetwise Boxing",enhance:12,grade:5,main:{stat:"CRIT DMG",value:53.913600579835894},substats:[{stat:"HP%",value:4.32},{stat:"ATK%",value:8.208},{stat:"CRIT Rate",value:5.508},{stat:"Break Effect",value:10.367999999999999}],id:"3f8b30aa-4c91-4677-af83-8906d7d968d9",augmentedStats:{mainStat:"CRIT DMG",mainValue:.539136005798359,"HP%":.0432,"ATK%":.08208,"CRIT Rate":.05508,"Break Effect":.10367999999999998,"DEF%":0,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:23.299999999999997,ss:6.48,ds:22.68,cs:11.016},{part:"Body",set:"Hunter of Glacial Forest",enhance:12,grade:5,main:{stat:"CRIT DMG",value:53.913600579835894},substats:[{stat:"HP",value:110.0776274},{stat:"DEF",value:38.1037914},{stat:"ATK%",value:3.456},{stat:"CRIT Rate",value:3.2399999999999998}],id:"c23bb26b-ccb0-4318-ae7b-a8aec9ef0db1",augmentedStats:{mainStat:"CRIT DMG",mainValue:.539136005798359,HP:110.0776274,DEF:38.1037914,"ATK%":.03456,"CRIT Rate":.0324,"HP%":0,"DEF%":0,"SPD%":0,ATK:0,SPD:0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:11.5,ss:0,ds:5.184,cs:6.4799999999999995},{part:"Body",set:"Musketeer of Wild Wheat",enhance:12,grade:5,main:{stat:"DEF%",value:44.9280005414036},substats:[{stat:"ATK%",value:3.888},{stat:"SPD",value:6},{stat:"Effect Hit Rate",value:7.344},{stat:"Break Effect",value:12.959999999999999}],id:"3147142d-dd65-4524-85ff-2535a61bd342",augmentedStats:{mainStat:"DEF%",mainValue:.449280005414036,"ATK%":.03888,SPD:6,"Effect Hit Rate":.07344,"Break Effect":.1296,"HP%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,DEF:0,"CRIT DMG":0,"CRIT Rate":0,"Effect RES":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:21.3,ss:15.600000000000001,ds:45.408,cs:15.600000000000001},{part:"Body",set:"Knight of Purity Palace",enhance:12,grade:4,main:{stat:"DEF%",value:35.9424005728218},substats:[{stat:"DEF",value:28.789534},{stat:"ATK%",value:6.5664},{stat:"SPD",value:1},{stat:"Effect Hit Rate",value:6.912}],id:"c85f95b4-28af-4519-8992-bd274ed268f1",augmentedStats:{mainStat:"DEF%",mainValue:.35942400572821803,DEF:28.789534,"ATK%":.065664,SPD:1,"Effect Hit Rate":.06912,"HP%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,"CRIT DMG":0,"CRIT Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:12.35,ss:2.6,ds:22.8176,cs:2.6},{part:"Body",set:"Musketeer of Wild Wheat",enhance:12,grade:4,main:{stat:"HP%",value:28.7544000428167},substats:[{stat:"HP",value:30.4830351},{stat:"DEF%",value:12.096},{stat:"SPD",value:3},{stat:"Break Effect",value:4.1472}],id:"cd8b362d-24e4-4427-b09e-2666c1fb97b4",augmentedStats:{mainStat:"HP%",mainValue:.287544000428167,HP:30.4830351,"DEF%":.12096,SPD:3,"Break Effect":.041471999999999995,"HP%":0,"ATK%":0,"SPD%":0,ATK:0,DEF:0,"CRIT DMG":0,"CRIT Rate":0,"Effect Hit Rate":0,"Effect RES":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:7.800000000000001,ss:22.3152,ds:11.9472,equippedBy:"1202",cs:7.800000000000001},{part:"Body",set:"Passerby of Wandering Cloud",enhance:12,grade:4,main:{stat:"Outgoing Healing Boost",value:23.003300675190395},substats:[{stat:"HP%",value:2.7647999999999997},{stat:"ATK%",value:3.1104},{stat:"SPD",value:3},{stat:"CRIT DMG",value:14.5152}],id:"05045a76-0f4c-4ad8-8997-878b60b2d226",augmentedStats:{mainStat:"Outgoing Healing Boost",mainValue:.23003300675190397,"HP%":.027647999999999995,"ATK%":.031104,SPD:3,"CRIT DMG":.145152,"DEF%":0,"SPD%":0,HP:0,ATK:0,DEF:0,"CRIT Rate":0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:26.95,ss:11.9472,ds:12.4656,cs:22.3152},{part:"Body",set:"Guard of Wuthering Snow",enhance:9,grade:3,main:{stat:"DEF%",value:21.5135999489572},substats:[{stat:"DEF",value:40},{stat:"HP%",value:3.4},{stat:"ATK%",value:4.3},{stat:"CRIT Rate",value:5.8}],id:"6be4a25d-b557-44a5-9176-12499975ba72",augmentedStats:{mainStat:"DEF%",mainValue:.215135999489572,DEF:40,"HP%":.034,"ATK%":.043,"CRIT Rate":.057999999999999996,"DEF%":0,"SPD%":0,HP:0,ATK:0,SPD:0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},cs:11.6,ss:5.1000000000000005,ds:6.449999999999999},{part:"Body",set:"Genius of Brilliant Stars",enhance:9,grade:3,main:{stat:"ATK%",value:17.210700223222197},substats:[{stat:"ATK",value:35},{stat:"HP%",value:7.7},{stat:"SPD",value:2},{stat:"Effect Hit Rate",value:3.4}],id:"c1257f42-d466-4cc6-ac37-a164be4efd1b",augmentedStats:{mainStat:"ATK%",mainValue:.17210700223222197,ATK:35,"HP%":.077,SPD:2,"Effect Hit Rate":.034,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,DEF:0,"CRIT DMG":0,"CRIT Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},cs:5.2,ss:16.75,ds:10.3},{part:"Body",set:"Genius of Brilliant Stars",enhance:9,grade:3,main:{stat:"HP%",value:17.210700223222197},substats:[{stat:"ATK",value:38},{stat:"DEF",value:21.5921488},{stat:"DEF%",value:5.4},{stat:"SPD",value:6}],id:"5629890a-6aec-4990-851c-74532f2f37af",augmentedStats:{mainStat:"HP%",mainValue:.17210700223222197,ATK:38,DEF:21.5921488,"DEF%":.054000000000000006,SPD:6,"HP%":0,"ATK%":0,"SPD%":0,HP:0,"CRIT DMG":0,"CRIT Rate":0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},cs:15.600000000000001,ss:22.080000000000002,ds:15.600000000000001},{part:"Body",set:"Messenger Traversing Hackerspace",enhance:9,grade:3,main:{stat:"CRIT DMG",value:25.8165008621286},substats:[{stat:"HP%",value:3.8},{stat:"DEF%",value:9.1},{stat:"SPD",value:4},{stat:"CRIT Rate",value:2.9}],id:"8b8127ed-1513-4b8e-bfc5-e2f6ae07f501",augmentedStats:{mainStat:"CRIT DMG",mainValue:.258165008621286,"HP%":.038,"DEF%":.091,SPD:4,"CRIT Rate":.028999999999999998,"ATK%":0,"SPD%":0,HP:0,ATK:0,DEF:0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},cs:16.2,ss:27.019999999999996,ds:10.4},{part:"Body",set:"Hunter of Glacial Forest",enhance:9,grade:3,main:{stat:"CRIT Rate",value:12.9078010562808},substats:[{stat:"ATK",value:35},{stat:"DEF",value:42},{stat:"CRIT DMG",value:6.4},{stat:"Break Effect",value:6.4}],id:"ca9148ab-988c-4e5f-b24d-36336521b584",augmentedStats:{mainStat:"CRIT Rate",mainValue:.129078010562808,ATK:35,DEF:42,"CRIT DMG":.064,"Break Effect":.064,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,SPD:0,"CRIT Rate":0,"Effect Hit Rate":0,"Effect RES":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},cs:6.4,ss:0,ds:6.4},{part:"Body",set:"Hunter of Glacial Forest",enhance:9,grade:3,main:{stat:"CRIT DMG",value:25.8165008621286},substats:[{stat:"HP",value:33},{stat:"ATK",value:33},{stat:"ATK%",value:3.4},{stat:"Break Effect",value:12.3}],id:"9bc3914c-ef10-492c-b9dc-20b9bbb53678",augmentedStats:{mainStat:"CRIT DMG",mainValue:.258165008621286,HP:33,ATK:33,"ATK%":.034,"Break Effect":.12300000000000001,"HP%":0,"DEF%":0,"SPD%":0,DEF:0,SPD:0,"CRIT DMG":0,"CRIT Rate":0,"Effect Hit Rate":0,"Effect RES":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},cs:0,ss:0,ds:17.400000000000002},{part:"Feet",set:"Hunter of Glacial Forest",enhance:15,grade:5,main:{stat:"SPD",value:25.03200000547804},substats:[{stat:"ATK",value:21.168773,scoreMeta:{multiplier:.75,score:1.7533107772329706}},{stat:"ATK%",value:11.664,scoreMeta:{multiplier:.75,score:13.121999999999996}},{stat:"DEF%",value:4.859999999999999,scoreMeta:{multiplier:0,score:0}},{stat:"CRIT DMG",value:17.496000000000002,scoreMeta:{multiplier:1,score:17.496000000000002}}],id:"92c53d06-80d0-43a8-b896-2feeda419674",augmentedStats:{mainStat:"SPD",mainValue:25.03200000547804,ATK:21.168773,"ATK%":.11664,"DEF%":.0486,"CRIT DMG":.17496000000000003,"HP%":0,"SPD%":0,HP:0,DEF:0,SPD:0,"CRIT Rate":0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:34.8,ss:5.831999999999999,ds:17.496,equippedBy:"1212",cs:17.496000000000002,weightScore:43.161747702977294},{part:"Feet",set:"Passerby of Wandering Cloud",enhance:15,grade:5,main:{stat:"SPD",value:25.03200000547804},substats:[{stat:"HP",value:148.1814215},{stat:"ATK%",value:6.912},{stat:"Effect Hit Rate",value:3.888},{stat:"Break Effect",value:5.183999999999999}],id:"f8d42acd-c848-484a-9eee-d03a7b88f030",augmentedStats:{mainStat:"SPD",mainValue:25.03200000547804,HP:148.1814215,"ATK%":.06912,"Effect Hit Rate":.03888,"Break Effect":.05183999999999999,"HP%":0,"DEF%":0,"SPD%":0,ATK:0,DEF:0,SPD:0,"CRIT DMG":0,"CRIT Rate":0,"Effect RES":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:10.350000000000001,ss:0,ds:21.384,equippedBy:"1217",cs:0},{part:"Feet",set:"Longevous Disciple",enhance:15,grade:5,main:{stat:"SPD",value:25.03200000547804},substats:[{stat:"ATK",value:38.1037914},{stat:"DEF",value:21.168773},{stat:"HP%",value:16.848},{stat:"CRIT DMG",value:5.183999999999999}],id:"726e7b1f-f630-4182-ac11-1e8523a33fc1",augmentedStats:{mainStat:"SPD",mainValue:25.03200000547804,ATK:38.1037914,DEF:21.168773,"HP%":.16848,"CRIT DMG":.05183999999999999,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,SPD:0,"CRIT Rate":0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:5.1,ss:25.272,ds:0,equippedBy:"1205",cs:5.183999999999999},{part:"Feet",set:"Musketeer of Wild Wheat",enhance:15,grade:5,main:{stat:"SPD",value:25.03200000547804},substats:[{stat:"HP",value:38.1037941},{stat:"HP%",value:8.208},{stat:"ATK%",value:11.664},{stat:"Effect Hit Rate",value:11.232000000000001}],id:"ac206198-c5b1-4be7-8dda-0d7b85e1aabf",augmentedStats:{mainStat:"SPD",mainValue:25.03200000547804,HP:38.1037941,"HP%":.08208,"ATK%":.11664,"Effect Hit Rate":.11232000000000002,"DEF%":0,"SPD%":0,ATK:0,DEF:0,SPD:0,"CRIT DMG":0,"CRIT Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:17.4,ss:12.312000000000001,ds:34.344,equippedBy:"1202",cs:0},{part:"Feet",set:"Musketeer of Wild Wheat",enhance:15,grade:5,main:{stat:"SPD",value:25.03200000547804},substats:[{stat:"HP",value:76.2075882},{stat:"ATK",value:38.1037914},{stat:"Effect RES",value:7.776},{stat:"Break Effect",value:12.312}],id:"ad67f0ac-1c0e-4869-8855-3718b601447b",augmentedStats:{mainStat:"SPD",mainValue:25.03200000547804,HP:76.2075882,ATK:38.1037914,"Effect RES":.07776,"Break Effect":.12312,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,DEF:0,SPD:0,"CRIT DMG":0,"CRIT Rate":0,"Effect Hit Rate":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:0,ss:11.664,ds:12.312,cs:0},{part:"Feet",set:"Genius of Brilliant Stars",enhance:15,grade:5,main:{stat:"ATK%",value:43.200000724755604},substats:[{stat:"DEF",value:38.1037914},{stat:"DEF%",value:4.859999999999999},{stat:"SPD",value:9},{stat:"CRIT DMG",value:11.664}],id:"9d68a932-b623-4ac7-bd0a-7c54779b64fb",augmentedStats:{mainStat:"ATK%",mainValue:.43200000724755605,DEF:38.1037914,"DEF%":.0486,SPD:9,"CRIT DMG":.11664,"HP%":0,"ATK%":0,"SPD%":0,HP:0,ATK:0,"CRIT Rate":0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:35,ss:29.232,ds:23.400000000000002,equippedBy:"1102",cs:35.064},{part:"Feet",set:"Eagle of Twilight Line",enhance:15,grade:5,main:{stat:"SPD",value:25.03200000547804},substats:[{stat:"HP",value:84.675098},{stat:"HP%",value:4.32},{stat:"DEF%",value:5.4},{stat:"Effect RES",value:16.416}],id:"dd1bb72d-80f3-432c-b8d9-0b62c7790b9a",augmentedStats:{mainStat:"SPD",mainValue:25.03200000547804,HP:84.675098,"HP%":.0432,"DEF%":.054000000000000006,"Effect RES":.16416,"ATK%":0,"SPD%":0,ATK:0,DEF:0,SPD:0,"CRIT DMG":0,"CRIT Rate":0,"Effect Hit Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:0,ss:37.584,ds:0,equippedBy:"1101",cs:0},{part:"Feet",set:"Genius of Brilliant Stars",enhance:15,grade:5,main:{stat:"ATK%",value:43.200000724755604},substats:[{stat:"DEF%",value:9.180000000000001},{stat:"SPD",value:2},{stat:"CRIT Rate",value:11.016},{stat:"CRIT DMG",value:12.312}],id:"a615dc2f-c26d-4f13-8c92-0b2c746e0f3f",augmentedStats:{mainStat:"ATK%",mainValue:.43200000724755605,"DEF%":.09180000000000002,SPD:2,"CRIT Rate":.11016,"CRIT DMG":.12312,"HP%":0,"ATK%":0,"SPD%":0,HP:0,ATK:0,DEF:0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:39.5,ss:16.216,ds:5.2,cs:39.544000000000004},{part:"Feet",set:"Band of Sizzling Thunder",enhance:15,grade:5,main:{stat:"SPD",value:25.03200000547804},substats:[{stat:"DEF",value:16.9350184},{stat:"ATK%",value:4.32},{stat:"CRIT Rate",value:2.5919999999999996},{stat:"Effect RES",value:19.872}],id:"53a00fa5-22a9-40bc-948b-8469d6e248ec",augmentedStats:{mainStat:"SPD",mainValue:25.03200000547804,DEF:16.9350184,"ATK%":.0432,"CRIT Rate":.025919999999999995,"Effect RES":.19872,"HP%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,SPD:0,"CRIT DMG":0,"Effect Hit Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:11.45,ss:29.808,ds:6.48,equippedBy:"1005",cs:5.183999999999999},{part:"Feet",set:"Messenger Traversing Hackerspace",enhance:15,grade:5,main:{stat:"SPD",value:25.03200000547804},substats:[{stat:"ATK",value:33.8700368},{stat:"ATK%",value:7.344},{stat:"DEF%",value:19.439999999999998},{stat:"CRIT Rate",value:2.916}],id:"76603793-39c6-477f-9874-194d66f8ae88",augmentedStats:{mainStat:"SPD",mainValue:25.03200000547804,ATK:33.8700368,"ATK%":.07344,"DEF%":.1944,"CRIT Rate":.02916,"HP%":0,"SPD%":0,HP:0,DEF:0,SPD:0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:16.75,ss:23.327999999999996,ds:11.016,cs:5.832},{part:"Feet",set:"Genius of Brilliant Stars",enhance:15,grade:5,main:{stat:"ATK%",value:43.200000724755604},substats:[{stat:"HP",value:156.6489313},{stat:"DEF%",value:5.4},{stat:"SPD",value:7},{stat:"Break Effect",value:5.832}],id:"5ba46dc3-191b-4a37-9781-bcaa1adf7f0d",augmentedStats:{mainStat:"ATK%",mainValue:.43200000724755605,HP:156.6489313,"DEF%":.054000000000000006,SPD:7,"Break Effect":.05832,"HP%":0,"ATK%":0,"SPD%":0,ATK:0,DEF:0,"CRIT DMG":0,"CRIT Rate":0,"Effect Hit Rate":0,"Effect RES":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:18.2,ss:24.68,ds:24.032,cs:18.2},{part:"Feet",set:"Hunter of Glacial Forest",enhance:15,grade:5,main:{stat:"ATK%",value:43.200000724755604},substats:[{stat:"ATK",value:16.9350184},{stat:"DEF",value:19.0518957},{stat:"SPD",value:4},{stat:"CRIT DMG",value:22.68}],id:"af5b9fae-fdcc-4b11-bf4a-0ce3bd832648",augmentedStats:{mainStat:"ATK%",mainValue:.43200000724755605,ATK:16.9350184,DEF:19.0518957,SPD:4,"CRIT DMG":.2268,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,"CRIT Rate":0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:33,ss:10.4,ds:10.4,cs:33.08},{part:"Feet",set:"Hunter of Glacial Forest",enhance:15,grade:5,main:{stat:"SPD",value:25.03200000547804},substats:[{stat:"ATK",value:40.2206687},{stat:"ATK%",value:3.888},{stat:"CRIT Rate",value:8.424},{stat:"Break Effect",value:11.016}],id:"01eca278-3dec-4b6a-bb39-e199603423f3",augmentedStats:{mainStat:"SPD",mainValue:25.03200000547804,ATK:40.2206687,"ATK%":.03888,"CRIT Rate":.08424,"Break Effect":.11016,"HP%":0,"DEF%":0,"SPD%":0,HP:0,DEF:0,SPD:0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:22.5,ss:0,ds:16.848,cs:16.848,weightScore:38.137720635656855},{part:"Feet",set:"Genius of Brilliant Stars",enhance:12,grade:5,main:{stat:"SPD",value:20.832000004360452},substats:[{stat:"ATK%",value:3.456},{stat:"DEF%",value:10.8},{stat:"Effect Hit Rate",value:7.776},{stat:"Break Effect",value:11.664}],id:"d348e2e3-87f5-4782-81db-1478c1ab2901",augmentedStats:{mainStat:"SPD",mainValue:20.832000004360452,"ATK%":.03456,"DEF%":.10800000000000001,"Effect Hit Rate":.07776,"Break Effect":.11664,"HP%":0,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"CRIT DMG":0,"CRIT Rate":0,"Effect RES":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:5.1000000000000005,ss:12.96,ds:28.512,cs:0},{part:"Feet",set:"Guard of Wuthering Snow",enhance:12,grade:4,main:{stat:"SPD",value:16.42560000135563},substats:[{stat:"ATK",value:28.789534},{stat:"DEF%",value:7.344},{stat:"Effect Hit Rate",value:3.456},{stat:"Effect RES",value:2.7647999999999997}],id:"4fa7cb12-80ac-43af-ae67-cec01b31208d",augmentedStats:{mainStat:"SPD",mainValue:16.42560000135563,ATK:28.789534,"DEF%":.07344,"Effect Hit Rate":.03456,"Effect RES":.027647999999999995,"HP%":0,"ATK%":0,"SPD%":0,HP:0,DEF:0,SPD:0,"CRIT DMG":0,"CRIT Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:0,ss:12.959999999999999,ds:5.184,cs:0},{part:"Feet",set:"Passerby of Wandering Cloud",enhance:12,grade:4,main:{stat:"SPD",value:16.42560000135563},substats:[{stat:"ATK%",value:9.6768},{stat:"Effect Hit Rate",value:2.7647999999999997},{stat:"Effect RES",value:3.456},{stat:"Break Effect",value:5.183999999999999}],id:"120c957e-4880-4fd7-a1a9-33fd9e5b5b74",augmentedStats:{mainStat:"SPD",mainValue:16.42560000135563,"ATK%":.096768,"Effect Hit Rate":.027647999999999995,"Effect RES":.03456,"Break Effect":.05183999999999999,"HP%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"CRIT DMG":0,"CRIT Rate":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:14.399999999999999,ss:5.184,ds:23.846399999999996,cs:0},{part:"Feet",set:"Guard of Wuthering Snow",enhance:9,grade:3,main:{stat:"DEF%",value:21.5135999489572},substats:[{stat:"HP",value:38},{stat:"DEF",value:57},{stat:"HP%",value:4.3},{stat:"CRIT Rate",value:3.2}],id:"685b8eec-9f29-4213-b26e-7fc46ce17f43",augmentedStats:{mainStat:"DEF%",mainValue:.215135999489572,HP:38,DEF:57,"HP%":.043,"CRIT Rate":.032,"ATK%":0,"DEF%":0,"SPD%":0,ATK:0,SPD:0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},cs:6.4,ss:6.449999999999999,ds:0},{part:"Feet",set:"Hunter of Glacial Forest",enhance:9,grade:3,main:{stat:"SPD",value:11.419199999887496},substats:[{stat:"HP%",value:8.6},{stat:"ATK%",value:3.4},{stat:"CRIT Rate",value:6.1},{stat:"Effect Hit Rate",value:7.7}],id:"a616f8ad-8b70-43f9-a877-ec33ba60d6e8",augmentedStats:{mainStat:"SPD",mainValue:11.419199999887496,"HP%":.086,"ATK%":.034,"CRIT Rate":.061,"Effect Hit Rate":.077,"DEF%":0,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"CRIT DMG":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},cs:12.2,ss:12.899999999999999,ds:16.650000000000002},{part:"Feet",set:"Hunter of Glacial Forest",enhance:9,grade:3,main:{stat:"ATK%",value:17.210700223222197},substats:[{stat:"DEF%",value:4.8},{stat:"CRIT Rate",value:5.5},{stat:"Effect Hit Rate",value:3.4},{stat:"Effect RES",value:7.3}],id:"578c0fdb-8976-4408-9271-fe43ce0afc5d",augmentedStats:{mainStat:"ATK%",mainValue:.17210700223222197,"DEF%":.048,"CRIT Rate":.055,"Effect Hit Rate":.034,"Effect RES":.073,"HP%":0,"ATK%":0,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"CRIT DMG":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},cs:11,ss:16.71,ds:5.1000000000000005},{part:"Feet",set:"Hunter of Glacial Forest",enhance:9,grade:3,main:{stat:"SPD",value:11.419199999887496},substats:[{stat:"HP",value:33},{stat:"ATK",value:21.5921488},{stat:"CRIT Rate",value:6.1},{stat:"Effect RES",value:8.2}],id:"620a1f8e-ba95-47d9-99c1-8fd7713c7b10",augmentedStats:{mainStat:"SPD",mainValue:11.419199999887496,HP:33,ATK:21.5921488,"CRIT Rate":.061,"Effect RES":.08199999999999999,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,DEF:0,SPD:0,"CRIT DMG":0,"Effect Hit Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},cs:12.2,ss:12.299999999999999,ds:0},{part:"Feet",set:"Hunter of Glacial Forest",enhance:9,grade:3,main:{stat:"ATK%",value:17.210700223222197},substats:[{stat:"HP",value:38},{stat:"HP%",value:12.5},{stat:"SPD",value:5},{stat:"CRIT Rate",value:3.2}],id:"fe8aca62-7935-4897-ad02-fae126b720b1",augmentedStats:{mainStat:"ATK%",mainValue:.17210700223222197,HP:38,"HP%":.125,SPD:5,"CRIT Rate":.032,"ATK%":0,"DEF%":0,"SPD%":0,ATK:0,DEF:0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},cs:19.4,ss:31.75,ds:13},{part:"PlanarSphere",set:"Rutilant Arena",enhance:15,grade:5,main:{stat:"Ice DMG Boost",value:38.8803014298894},substats:[{stat:"DEF",value:74.0907055,scoreMeta:{multiplier:0,score:0}},{stat:"CRIT Rate",value:5.508,scoreMeta:{multiplier:1,score:11.016}},{stat:"CRIT DMG",value:12.312,scoreMeta:{multiplier:1,score:12.312}},{stat:"Effect Hit Rate",value:4.32,scoreMeta:{multiplier:0,score:0}}],id:"80abbd56-b1a0-4587-a349-754c33627217",augmentedStats:{mainStat:"Ice DMG Boost",mainValue:.388803014298894,DEF:74.0907055,"CRIT Rate":.05508,"CRIT DMG":.12312,"Effect Hit Rate":.0432,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,SPD:0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:23.3,ss:0,ds:6.48,equippedBy:"1212",cs:23.328,weightScore:38.97197099567099},{part:"PlanarSphere",set:"Fleet of the Ageless",enhance:15,grade:5,main:{stat:"HP%",value:43.200000724755604},substats:[{stat:"ATK%",value:12.096},{stat:"DEF%",value:4.32},{stat:"Effect Hit Rate",value:4.32},{stat:"Break Effect",value:17.496000000000002}],id:"f89266f4-241e-43bc-b04a-a864eea60e49",augmentedStats:{mainStat:"HP%",mainValue:.43200000724755605,"ATK%":.12096,"DEF%":.0432,"Effect Hit Rate":.0432,"Break Effect":.17496000000000003,"HP%":0,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"CRIT DMG":0,"CRIT Rate":0,"Effect RES":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:18,ss:5.184,ds:42.120000000000005,equippedBy:"1217",cs:0},{part:"PlanarSphere",set:"Broken Keel",enhance:15,grade:5,main:{stat:"DEF%",value:54.0000006789338},substats:[{stat:"HP%",value:8.208},{stat:"ATK%",value:3.888},{stat:"SPD",value:4},{stat:"Effect RES",value:11.664}],id:"16f7f4d9-5734-401f-b14f-2a74eaec9dcc",augmentedStats:{mainStat:"DEF%",mainValue:.540000006789338,"HP%":.08208,"ATK%":.03888,SPD:4,"Effect RES":.11664,"DEF%":0,"SPD%":0,HP:0,ATK:0,DEF:0,"CRIT DMG":0,"CRIT Rate":0,"Effect Hit Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:16.1,ss:40.208,ds:16.232,cs:10.4},{part:"PlanarSphere",set:"Inert Salsotto",enhance:15,grade:5,main:{stat:"HP%",value:43.200000724755604},substats:[{stat:"ATK",value:19.0518957},{stat:"CRIT Rate",value:6.4799999999999995},{stat:"CRIT DMG",value:17.496000000000002},{stat:"Effect RES",value:7.776}],id:"9714ef68-45e7-4f62-81f2-b437649d3a49",augmentedStats:{mainStat:"HP%",mainValue:.43200000724755605,ATK:19.0518957,"CRIT Rate":.0648,"CRIT DMG":.17496000000000003,"Effect RES":.07776,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,DEF:0,SPD:0,"Effect Hit Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:30.2,ss:11.664,ds:0,equippedBy:"1205",cs:30.456000000000003},{part:"PlanarSphere",set:"Space Sealing Station",enhance:15,grade:5,main:{stat:"Physical DMG Boost",value:38.8803014298894},substats:[{stat:"SPD",value:2},{stat:"CRIT Rate",value:2.5919999999999996},{stat:"CRIT DMG",value:23.328},{stat:"Effect RES",value:7.776}],id:"2340f351-b46e-4e11-87a2-732c5c887941",augmentedStats:{mainStat:"Physical DMG Boost",mainValue:.388803014298894,SPD:2,"CRIT Rate":.025919999999999995,"CRIT DMG":.23328,"Effect RES":.07776,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,DEF:0,"Effect Hit Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:33.5,ss:16.864,ds:5.2,cs:33.712},{part:"PlanarSphere",set:"Rutilant Arena",enhance:15,grade:5,main:{stat:"Quantum DMG Boost",value:38.8803014298894},substats:[{stat:"ATK%",value:7.776},{stat:"DEF%",value:4.859999999999999},{stat:"SPD",value:4},{stat:"CRIT DMG",value:18.144}],id:"4806d951-5a01-48bb-876f-5368059a674d",augmentedStats:{mainStat:"Quantum DMG Boost",mainValue:.388803014298894,"ATK%":.07776,"DEF%":.0486,SPD:4,"CRIT DMG":.18144,"HP%":0,"SPD%":0,HP:0,ATK:0,DEF:0,"CRIT Rate":0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:40.050000000000004,ss:16.232,ds:22.064,equippedBy:"1102",cs:28.543999999999997},{part:"PlanarSphere",set:"Broken Keel",enhance:15,grade:5,main:{stat:"HP%",value:43.200000724755604},substats:[{stat:"DEF",value:59.2725644},{stat:"DEF%",value:5.4},{stat:"CRIT DMG",value:5.183999999999999},{stat:"Effect Hit Rate",value:11.232000000000001}],id:"1735bd09-55f7-4023-866f-509dc716badf",augmentedStats:{mainStat:"HP%",mainValue:.43200000724755605,DEF:59.2725644,"DEF%":.054000000000000006,"CRIT DMG":.05183999999999999,"Effect Hit Rate":.11232000000000002,"HP%":0,"ATK%":0,"SPD%":0,HP:0,ATK:0,SPD:0,"CRIT Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},cs:5.183999999999999,ss:6.48,ds:16.848000000000003},{part:"PlanarSphere",set:"Space Sealing Station",enhance:15,grade:5,main:{stat:"Lightning DMG Boost",value:38.8803014298894},substats:[{stat:"ATK",value:59.2725644},{stat:"ATK%",value:8.208},{stat:"DEF%",value:5.4},{stat:"Effect Hit Rate",value:6.912}],id:"15d53aff-64cc-421f-837f-5ccfd55240b6",augmentedStats:{mainStat:"Lightning DMG Boost",mainValue:.388803014298894,ATK:59.2725644,"ATK%":.08208,"DEF%":.054000000000000006,"Effect Hit Rate":.06912,"HP%":0,"SPD%":0,HP:0,DEF:0,SPD:0,"CRIT DMG":0,"CRIT Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:12.299999999999999,ss:6.48,ds:22.68,equippedBy:"1005",cs:0},{part:"PlanarSphere",set:"Broken Keel",enhance:15,grade:5,main:{stat:"HP%",value:43.200000724755604},substats:[{stat:"HP",value:67.7400784},{stat:"ATK",value:38.1037914},{stat:"DEF%",value:9.719999999999999},{stat:"Effect Hit Rate",value:6.912}],id:"86816eed-af3c-441e-9379-22aca07bc15f",augmentedStats:{mainStat:"HP%",mainValue:.43200000724755605,HP:67.7400784,ATK:38.1037914,"DEF%":.0972,"Effect Hit Rate":.06912,"HP%":0,"ATK%":0,"SPD%":0,DEF:0,SPD:0,"CRIT DMG":0,"CRIT Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:0,ss:11.663999999999998,ds:10.368,equippedBy:"1101",cs:0},{part:"PlanarSphere",set:"Rutilant Arena",enhance:15,grade:5,main:{stat:"Ice DMG Boost",value:38.8803014298894},substats:[{stat:"DEF",value:40.2206687},{stat:"SPD",value:9},{stat:"CRIT Rate",value:2.5919999999999996},{stat:"Effect Hit Rate",value:3.456}],id:"1e00ea87-98be-4601-a1b6-90eed8929758",augmentedStats:{mainStat:"Ice DMG Boost",mainValue:.388803014298894,DEF:40.2206687,SPD:9,"CRIT Rate":.025919999999999995,"Effect Hit Rate":.03456,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,"CRIT DMG":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:28.400000000000002,ss:23.400000000000002,ds:28.584000000000003,cs:28.584000000000003,weightScore:38.670727111935676},{part:"PlanarSphere",set:"Space Sealing Station",enhance:15,grade:5,main:{stat:"Quantum DMG Boost",value:38.8803014298894},substats:[{stat:"HP%",value:7.344},{stat:"ATK%",value:6.912},{stat:"CRIT Rate",value:9.072},{stat:"CRIT DMG",value:5.832}],id:"030acc28-213c-4913-b527-fd5e4242ade5",augmentedStats:{mainStat:"Quantum DMG Boost",mainValue:.388803014298894,"HP%":.07344,"ATK%":.06912,"CRIT Rate":.09072,"CRIT DMG":.05832,"DEF%":0,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:34.150000000000006,ss:11.016,ds:10.368,cs:23.976},{part:"PlanarSphere",set:"Fleet of the Ageless",enhance:12,grade:5,main:{stat:"DEF%",value:44.9280005414036},substats:[{stat:"DEF",value:61.3894417},{stat:"HP%",value:3.888},{stat:"ATK%",value:8.64},{stat:"SPD",value:2}],id:"687f3295-1bfa-4349-b529-68145a681f3d",augmentedStats:{mainStat:"DEF%",mainValue:.449280005414036,DEF:61.3894417,"HP%":.03888,"ATK%":.0864,SPD:2,"DEF%":0,"SPD%":0,HP:0,ATK:0,"CRIT DMG":0,"CRIT Rate":0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:18.099999999999998,ss:11.032,ds:18.16,cs:5.2},{part:"PlanarSphere",set:"Fleet of the Ageless",enhance:12,grade:5,main:{stat:"ATK%",value:35.9424005728218},substats:[{stat:"HP",value:33.8700392},{stat:"HP%",value:7.344},{stat:"Effect Hit Rate",value:8.208},{stat:"Break Effect",value:12.959999999999999}],id:"f838c821-addf-477a-97e7-605a00417a80",augmentedStats:{mainStat:"ATK%",mainValue:.35942400572821803,HP:33.8700392,"HP%":.07344,"Effect Hit Rate":.08208,"Break Effect":.1296,"ATK%":0,"DEF%":0,"SPD%":0,ATK:0,DEF:0,SPD:0,"CRIT DMG":0,"CRIT Rate":0,"Effect RES":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:0,ss:11.016,ds:25.272,cs:0},{part:"PlanarSphere",set:"Fleet of the Ageless",enhance:12,grade:5,main:{stat:"ATK%",value:35.9424005728218},substats:[{stat:"HP",value:122.7788921},{stat:"ATK",value:38.1037914},{stat:"HP%",value:4.32},{stat:"CRIT DMG",value:6.4799999999999995}],id:"2576e256-b473-481b-9e69-5e5ce2641f1a",augmentedStats:{mainStat:"ATK%",mainValue:.35942400572821803,HP:122.7788921,ATK:38.1037914,"HP%":.0432,"CRIT DMG":.0648,"ATK%":0,"DEF%":0,"SPD%":0,DEF:0,SPD:0,"CRIT Rate":0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:6.4,ss:6.48,ds:0,equippedBy:"1202",cs:6.4799999999999995},{part:"PlanarSphere",set:"Sprightly Vonwacq",enhance:12,grade:5,main:{stat:"HP%",value:35.9424005728218},substats:[{stat:"DEF",value:21.168773},{stat:"ATK%",value:8.64},{stat:"CRIT Rate",value:5.832},{stat:"Effect RES",value:8.208}],id:"29ec4a4e-a2d1-470b-8898-4271e5d58801",augmentedStats:{mainStat:"HP%",mainValue:.35942400572821803,DEF:21.168773,"ATK%":.0864,"CRIT Rate":.05832,"Effect RES":.08208,"HP%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,SPD:0,"CRIT DMG":0,"Effect Hit Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:24.5,ss:12.312000000000001,ds:12.96,cs:11.664},{part:"PlanarSphere",set:"Rutilant Arena",enhance:12,grade:5,main:{stat:"Ice DMG Boost",value:32.348401146008996},substats:[{stat:"ATK",value:38.1037914},{stat:"DEF%",value:9.180000000000001},{stat:"CRIT Rate",value:6.156},{stat:"Break Effect",value:5.832}],id:"6ea90a16-c508-400a-84e5-956be061dd81",augmentedStats:{mainStat:"Ice DMG Boost",mainValue:.32348401146009,ATK:38.1037914,"DEF%":.09180000000000002,"CRIT Rate":.06156,"Break Effect":.05832,"HP%":0,"ATK%":0,"SPD%":0,HP:0,DEF:0,SPD:0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:12.2,ss:11.016000000000002,ds:5.832,cs:12.312},{part:"PlanarSphere",set:"Rutilant Arena",enhance:12,grade:5,main:{stat:"Quantum DMG Boost",value:32.348401146008996},substats:[{stat:"ATK",value:21.168773},{stat:"ATK%",value:7.344},{stat:"DEF%",value:10.26},{stat:"CRIT Rate",value:6.156}],id:"f6f59c42-c75d-4b13-8630-cf4030317fb6",augmentedStats:{mainStat:"Quantum DMG Boost",mainValue:.32348401146009,ATK:21.168773,"ATK%":.07344,"DEF%":.1026,"CRIT Rate":.06156,"HP%":0,"SPD%":0,HP:0,DEF:0,SPD:0,"CRIT DMG":0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:23.15,ss:12.312,ds:11.016,cs:12.312},{part:"PlanarSphere",set:"Fleet of the Ageless",enhance:9,grade:3,main:{stat:"HP%",value:17.210700223222197},substats:[{stat:"HP",value:42},{stat:"ATK%",value:11.2},{stat:"DEF%",value:5.4},{stat:"Effect Hit Rate",value:3.4}],id:"bc8d6ec2-f7ce-46b5-99bd-f9abcb5cd7d3",augmentedStats:{mainStat:"HP%",mainValue:.17210700223222197,HP:42,"ATK%":.11199999999999999,"DEF%":.054000000000000006,"Effect Hit Rate":.034,"HP%":0,"SPD%":0,ATK:0,DEF:0,SPD:0,"CRIT DMG":0,"CRIT Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},cs:0,ss:6.48,ds:21.9},{part:"PlanarSphere",set:"Belobog of the Architects",enhance:9,grade:3,main:{stat:"DEF%",value:21.5135999489572},substats:[{stat:"DEF",value:52},{stat:"HP%",value:7.7},{stat:"Effect RES",value:3.4},{stat:"Break Effect",value:6.4}],id:"1d4bfa56-f16b-4380-8124-481ef3c284f2",augmentedStats:{mainStat:"DEF%",mainValue:.215135999489572,DEF:52,"HP%":.077,"Effect RES":.034,"Break Effect":.064,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,SPD:0,"CRIT DMG":0,"CRIT Rate":0,"Effect Hit Rate":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},cs:0,ss:16.650000000000002,ds:6.4},{part:"PlanarSphere",set:"Broken Keel",enhance:9,grade:3,main:{stat:"HP%",value:17.210700223222197},substats:[{stat:"HP",value:33},{stat:"ATK",value:19},{stat:"Effect Hit Rate",value:7.3},{stat:"Effect RES",value:6.9}],id:"5968a21b-6035-45f7-8347-3445cb23dd48",augmentedStats:{mainStat:"HP%",mainValue:.17210700223222197,HP:33,ATK:19,"Effect Hit Rate":.073,"Effect RES":.069,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,DEF:0,SPD:0,"CRIT DMG":0,"CRIT Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},cs:0,ss:10.350000000000001,ds:10.95},{part:"LinkRope",set:"Rutilant Arena",enhance:15,grade:5,main:{stat:"ATK%",value:43.200000724755604},substats:[{stat:"HP",value:80.4413431,scoreMeta:{multiplier:0,score:0}},{stat:"CRIT Rate",value:8.424,scoreMeta:{multiplier:1,score:16.8}},{stat:"CRIT DMG",value:10.367999999999999,scoreMeta:{multiplier:1,score:10.3}},{stat:"Break Effect",value:5.832,scoreMeta:{multiplier:0,score:0}}],id:"c521dc03-6c6e-45ef-9933-811367312441",augmentedStats:{mainStat:"ATK%",mainValue:.43200000724755605,HP:80.4413431,"CRIT Rate":.08424,"CRIT DMG":.10367999999999998,"Break Effect":.05832,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,ATK:0,DEF:0,SPD:0,"Effect Hit Rate":0,"Effect RES":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:27.1,ss:0,ds:5.832,equippedBy:"1212",cs:27.215999999999998,weightScore:37.249627926047566},{part:"LinkRope",set:"Fleet of the Ageless",enhance:15,grade:5,main:{stat:"Energy Regeneration Rate",value:19.4394017569722},substats:[{stat:"ATK",value:38.1037914},{stat:"DEF",value:21.168773},{stat:"DEF%",value:15.659999999999998},{stat:"Break Effect",value:12.312}],id:"e1650ead-9ec8-4e2a-9ab9-c4199e1b609c",augmentedStats:{mainStat:"Energy Regeneration Rate",mainValue:.194394017569722,ATK:38.1037914,DEF:21.168773,"DEF%":.1566,"Break Effect":.12312,"HP%":0,"ATK%":0,"SPD%":0,HP:0,SPD:0,"CRIT DMG":0,"CRIT Rate":0,"Effect Hit Rate":0,"Effect RES":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:0,ss:18.791999999999998,ds:12.312,equippedBy:"1217",cs:0},{part:"LinkRope",set:"Inert Salsotto",enhance:15,grade:5,main:{stat:"HP%",value:43.200000724755604},substats:[{stat:"CRIT Rate",value:6.156},{stat:"Effect Hit Rate",value:7.344},{stat:"Effect RES",value:8.208},{stat:"Break Effect",value:12.312}],id:"426a1d2d-c361-42d0-a7d6-5001755c220d",augmentedStats:{mainStat:"HP%",mainValue:.43200000724755605,"CRIT Rate":.06156,"Effect Hit Rate":.07344,"Effect RES":.08208,"Break Effect":.12312,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"CRIT DMG":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:12.2,ss:12.312000000000001,ds:23.328,equippedBy:"1205",cs:12.312},{part:"LinkRope",set:"Fleet of the Ageless",enhance:15,grade:5,main:{stat:"Energy Regeneration Rate",value:19.4394017569722},substats:[{stat:"DEF",value:35.9869141},{stat:"ATK%",value:7.776},{stat:"DEF%",value:14.04},{stat:"SPD",value:2}],id:"9c66993a-07b4-4994-8bb5-86507e6ba49b",augmentedStats:{mainStat:"Energy Regeneration Rate",mainValue:.194394017569722,DEF:35.9869141,"ATK%":.07776,"DEF%":.1404,SPD:2,"HP%":0,"SPD%":0,HP:0,ATK:0,"CRIT DMG":0,"CRIT Rate":0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:16.75,ss:22.048,ds:16.864,equippedBy:"1202",cs:5.2},{part:"LinkRope",set:"Belobog of the Architects",enhance:15,grade:5,main:{stat:"Energy Regeneration Rate",value:19.4394017569722},substats:[{stat:"ATK%",value:14.688},{stat:"DEF%",value:5.4},{stat:"Effect Hit Rate",value:7.776},{stat:"Break Effect",value:5.183999999999999}],id:"f751b41e-8099-4b80-94c1-a86d264ca8bd",augmentedStats:{mainStat:"Energy Regeneration Rate",mainValue:.194394017569722,"ATK%":.14688,"DEF%":.054000000000000006,"Effect Hit Rate":.07776,"Break Effect":.05183999999999999,"HP%":0,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"CRIT DMG":0,"CRIT Rate":0,"Effect RES":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:21.9,ss:6.48,ds:38.879999999999995,cs:0},{part:"LinkRope",set:"Rutilant Arena",enhance:15,grade:5,main:{stat:"ATK%",value:43.200000724755604},substats:[{stat:"SPD",value:2},{stat:"CRIT DMG",value:18.144},{stat:"Effect Hit Rate",value:7.344},{stat:"Effect RES",value:7.776}],id:"c32194b9-dddc-47de-853e-17ac8b8f61a4",augmentedStats:{mainStat:"ATK%",mainValue:.43200000724755605,SPD:2,"CRIT DMG":.18144,"Effect Hit Rate":.07344,"Effect RES":.07776,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,DEF:0,"CRIT Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:23.3,ss:16.864,ds:16.216,equippedBy:"1102",cs:23.343999999999998,weightScore:46.007999999999996},{part:"LinkRope",set:"Broken Keel",enhance:15,grade:5,main:{stat:"Energy Regeneration Rate",value:19.4394017569722},substats:[{stat:"HP%",value:15.984000000000002},{stat:"ATK%",value:3.888},{stat:"CRIT Rate",value:3.2399999999999998},{stat:"CRIT DMG",value:17.496000000000002}],id:"5788b45d-6d75-4189-9689-872fd84280f7",augmentedStats:{mainStat:"Energy Regeneration Rate",mainValue:.194394017569722,"HP%":.15984,"ATK%":.03888,"CRIT Rate":.0324,"CRIT DMG":.17496000000000003,"DEF%":0,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:29.5,ss:23.976000000000003,ds:5.832,equippedBy:"1101",cs:23.976000000000003},{part:"LinkRope",set:"Space Sealing Station",enhance:15,grade:5,main:{stat:"ATK%",value:43.200000724755604},substats:[{stat:"HP",value:38.1037941},{stat:"ATK",value:63.506319},{stat:"SPD",value:5},{stat:"Effect Hit Rate",value:8.208}],id:"c46c97d3-0cc6-4ac9-8b0d-2d5ad0f0a0e7",augmentedStats:{mainStat:"ATK%",mainValue:.43200000724755605,HP:38.1037941,ATK:63.506319,SPD:5,"Effect Hit Rate":.08208,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,DEF:0,"CRIT DMG":0,"CRIT Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:13,ss:13,ds:25.312,equippedBy:"1005",cs:13},{part:"LinkRope",set:"Rutilant Arena",enhance:15,grade:5,main:{stat:"ATK%",value:43.200000724755604},substats:[{stat:"DEF%",value:10.8},{stat:"CRIT Rate",value:9.072},{stat:"Effect Hit Rate",value:6.912},{stat:"Break Effect",value:6.4799999999999995}],id:"9dc0a37b-9c62-4c1a-80f9-3edd769b0e68",augmentedStats:{mainStat:"ATK%",mainValue:.43200000724755605,"DEF%":.10800000000000001,"CRIT Rate":.09072,"Effect Hit Rate":.06912,"Break Effect":.0648,"HP%":0,"ATK%":0,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"CRIT DMG":0,"Effect RES":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:18,ss:12.96,ds:16.848,cs:18.144,weightScore:47.95199999999999},{part:"LinkRope",set:"Rutilant Arena",enhance:15,grade:5,main:{stat:"ATK%",value:43.200000724755604},substats:[{stat:"HP",value:38.1037941},{stat:"DEF%",value:10.8},{stat:"CRIT DMG",value:18.792},{stat:"Effect RES",value:7.776}],id:"b63d8cc1-3b84-476f-b8f7-ea31e0a83dbc",augmentedStats:{mainStat:"ATK%",mainValue:.43200000724755605,HP:38.1037941,"DEF%":.10800000000000001,"CRIT DMG":.18792,"Effect RES":.07776,"HP%":0,"ATK%":0,"SPD%":0,ATK:0,DEF:0,SPD:0,"CRIT Rate":0,"Effect Hit Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:18.7,ss:24.624000000000002,ds:0,cs:18.792,weightScore:45.40624480707517},{part:"LinkRope",set:"Rutilant Arena",enhance:15,grade:5,main:{stat:"ATK%",value:43.200000724755604},substats:[{stat:"ATK",value:35.9869141,scoreMeta:{multiplier:.75,score:2.9806283212960496}},{stat:"HP%",value:3.456,scoreMeta:{multiplier:0,score:0}},{stat:"CRIT DMG",value:5.183999999999999,scoreMeta:{multiplier:1,score:5.183999999999999}},{stat:"Effect RES",value:15.984000000000002,scoreMeta:{multiplier:0,score:0}}],id:"7d1bb971-e351-47ee-9ab9-3c605386b6f8",augmentedStats:{mainStat:"ATK%",mainValue:.43200000724755605,ATK:35.9869141,"HP%":.03456,"CRIT DMG":.05183999999999999,"Effect RES":.15984,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,DEF:0,SPD:0,"CRIT Rate":0,"Effect Hit Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:5.1,ss:29.160000000000004,ds:0,cs:5.183999999999999,weightScore:38.318171095061395},{part:"LinkRope",set:"Rutilant Arena",enhance:15,grade:5,main:{stat:"Energy Regeneration Rate",value:19.4394017569722},substats:[{stat:"HP",value:38.1037941},{stat:"ATK",value:78.3244601},{stat:"ATK%",value:7.776},{stat:"CRIT DMG",value:11.664}],id:"fce0a251-7922-469e-a3e6-b63783177cbf",augmentedStats:{mainStat:"Energy Regeneration Rate",mainValue:.194394017569722,HP:38.1037941,ATK:78.3244601,"ATK%":.07776,"CRIT DMG":.11664,"HP%":0,"DEF%":0,"SPD%":0,DEF:0,SPD:0,"CRIT Rate":0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:23.15,ss:0,ds:11.664,cs:11.664},{part:"LinkRope",set:"Fleet of the Ageless",enhance:15,grade:5,main:{stat:"Energy Regeneration Rate",value:19.4394017569722},substats:[{stat:"HP",value:33.8700392},{stat:"ATK",value:57.1556871},{stat:"DEF%",value:5.4},{stat:"CRIT DMG",value:17.496000000000002}],id:"4de09d13-9ab5-48c0-8552-c99e0961c6d7",augmentedStats:{mainStat:"Energy Regeneration Rate",mainValue:.194394017569722,HP:33.8700392,ATK:57.1556871,"DEF%":.054000000000000006,"CRIT DMG":.17496000000000003,"HP%":0,"ATK%":0,"SPD%":0,DEF:0,SPD:0,"CRIT Rate":0,"Effect Hit Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:17.4,ss:6.48,ds:0,cs:17.496000000000002},{part:"LinkRope",set:"Space Sealing Station",enhance:15,grade:5,main:{stat:"ATK%",value:43.200000724755604},substats:[{stat:"SPD",value:4},{stat:"CRIT DMG",value:6.4799999999999995},{stat:"Effect RES",value:7.344},{stat:"Break Effect",value:18.144}],id:"5336ce8e-c6be-426f-9e6b-cbdf058d7eb8",augmentedStats:{mainStat:"ATK%",mainValue:.43200000724755605,SPD:4,"CRIT DMG":.0648,"Effect RES":.07344,"Break Effect":.18144,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,DEF:0,"CRIT Rate":0,"Effect Hit Rate":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:16.8,ss:21.416,ds:28.543999999999997,cs:16.88},{part:"LinkRope",set:"Space Sealing Station",enhance:15,grade:5,main:{stat:"ATK%",value:43.200000724755604},substats:[{stat:"DEF",value:38.1037914},{stat:"DEF%",value:17.82},{stat:"CRIT Rate",value:2.5919999999999996},{stat:"Effect RES",value:3.456}],id:"507b39d1-d464-4b88-a968-074059a16326",augmentedStats:{mainStat:"ATK%",mainValue:.43200000724755605,DEF:38.1037914,"DEF%":.1782,"CRIT Rate":.025919999999999995,"Effect RES":.03456,"HP%":0,"ATK%":0,"SPD%":0,HP:0,ATK:0,SPD:0,"CRIT DMG":0,"Effect Hit Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:5,ss:26.568,ds:0,cs:5.183999999999999},{part:"LinkRope",set:"Fleet of the Ageless",enhance:12,grade:5,main:{stat:"DEF%",value:44.9280005414036},substats:[{stat:"DEF",value:38.1037914},{stat:"HP%",value:4.32},{stat:"ATK%",value:3.888},{stat:"Effect Hit Rate",value:15.552}],id:"13562a04-2e82-44a6-acee-42500b505634",augmentedStats:{mainStat:"DEF%",mainValue:.449280005414036,DEF:38.1037914,"HP%":.0432,"ATK%":.03888,"Effect Hit Rate":.15552,"DEF%":0,"SPD%":0,HP:0,ATK:0,SPD:0,"CRIT DMG":0,"CRIT Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:5.699999999999999,ss:6.48,ds:29.16,cs:0},{part:"LinkRope",set:"Fleet of the Ageless",enhance:12,grade:5,main:{stat:"Energy Regeneration Rate",value:16.1736014066265},substats:[{stat:"DEF",value:16.9350184},{stat:"DEF%",value:9.719999999999999},{stat:"CRIT Rate",value:3.2399999999999998},{stat:"Effect RES",value:12.096}],id:"1364b4d9-1dc2-4ea9-973c-5508c5676a78",augmentedStats:{mainStat:"Energy Regeneration Rate",mainValue:.161736014066265,DEF:16.9350184,"DEF%":.0972,"CRIT Rate":.0324,"Effect RES":.12096,"HP%":0,"ATK%":0,"SPD%":0,HP:0,ATK:0,SPD:0,"CRIT DMG":0,"Effect Hit Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:6.4,ss:29.807999999999996,ds:0,cs:6.4799999999999995},{part:"LinkRope",set:"Space Sealing Station",enhance:12,grade:5,main:{stat:"ATK%",value:35.9424005728218},substats:[{stat:"HP%",value:15.552},{stat:"DEF%",value:9.180000000000001},{stat:"CRIT DMG",value:5.183999999999999},{stat:"Break Effect",value:6.4799999999999995}],id:"439c6e66-9371-4872-a5dc-916756a46a99",augmentedStats:{mainStat:"ATK%",mainValue:.35942400572821803,"HP%":.15552,"DEF%":.09180000000000002,"CRIT DMG":.05183999999999999,"Break Effect":.0648,"ATK%":0,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"CRIT Rate":0,"Effect Hit Rate":0,"Effect RES":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:5.1,ss:34.344,ds:6.4799999999999995,cs:5.183999999999999},{part:"LinkRope",set:"Space Sealing Station",enhance:12,grade:5,main:{stat:"ATK%",value:35.9424005728218},substats:[{stat:"ATK",value:19.0518957},{stat:"HP%",value:7.776},{stat:"Effect Hit Rate",value:11.664},{stat:"Break Effect",value:5.183999999999999}],id:"24e5659e-51f5-428d-83b7-0daa994ecf97",augmentedStats:{mainStat:"ATK%",mainValue:.35942400572821803,ATK:19.0518957,"HP%":.07776,"Effect Hit Rate":.11664,"Break Effect":.05183999999999999,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,DEF:0,SPD:0,"CRIT DMG":0,"CRIT Rate":0,"Effect RES":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:0,ss:11.664,ds:22.68,cs:0},{part:"LinkRope",set:"Rutilant Arena",enhance:12,grade:5,main:{stat:"ATK%",value:35.9424005728218},substats:[{stat:"ATK",value:40.2206687},{stat:"DEF",value:40.2206687},{stat:"CRIT DMG",value:11.664},{stat:"Effect Hit Rate",value:3.888}],id:"3aac125b-f436-4a66-bc76-124bccee2190",augmentedStats:{mainStat:"ATK%",mainValue:.35942400572821803,ATK:40.2206687,DEF:40.2206687,"CRIT DMG":.11664,"Effect Hit Rate":.03888,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,SPD:0,"CRIT Rate":0,"Effect RES":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},os:11.6,ss:0,ds:5.832,cs:11.664},{part:"LinkRope",set:"Broken Keel",enhance:9,grade:3,main:{stat:"Energy Regeneration Rate",value:7.7450001612309},substats:[{stat:"DEF",value:19},{stat:"SPD",value:4},{stat:"Effect Hit Rate",value:7.7},{stat:"Effect RES",value:4.3}],id:"563780c9-ac0a-4c54-98fa-2c24883f633b",augmentedStats:{mainStat:"Energy Regeneration Rate",mainValue:.077450001612309,DEF:19,SPD:4,"Effect Hit Rate":.077,"Effect RES":.043,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,"CRIT DMG":0,"CRIT Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},cs:10.4,ss:16.85,ds:21.950000000000003},{part:"LinkRope",set:"Broken Keel",enhance:9,grade:3,main:{stat:"Energy Regeneration Rate",value:7.7450001612309},substats:[{stat:"HP",value:38},{stat:"ATK%",value:12.5},{stat:"CRIT DMG",value:10.3},{stat:"Effect RES",value:4.3}],id:"bc344db6-5740-44ed-9858-46f15000d4a8",augmentedStats:{mainStat:"Energy Regeneration Rate",mainValue:.077450001612309,HP:38,"ATK%":.125,"CRIT DMG":.10300000000000001,"Effect RES":.043,"HP%":0,"DEF%":0,"SPD%":0,ATK:0,DEF:0,SPD:0,"CRIT Rate":0,"Effect Hit Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},cs:10.3,ss:6.449999999999999,ds:18.75},{part:"LinkRope",set:"Rutilant Arena",enhance:9,grade:3,main:{stat:"ATK%",value:17.210700223222197},substats:[{stat:"DEF",value:40},{stat:"CRIT Rate",value:5.5},{stat:"Effect Hit Rate",value:3.8},{stat:"Effect RES",value:3.4}],id:"802a690c-b6be-4c91-8551-c79c4fe019d1",augmentedStats:{mainStat:"ATK%",mainValue:.17210700223222197,DEF:40,"CRIT Rate":.055,"Effect Hit Rate":.038,"Effect RES":.034,"HP%":0,"ATK%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,SPD:0,"CRIT DMG":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},cs:11,ss:5.1000000000000005,ds:5.699999999999999},{part:"LinkRope",set:"Rutilant Arena",enhance:9,grade:3,main:{stat:"HP%",value:17.210700223222197},substats:[{stat:"ATK%",value:7.7},{stat:"CRIT Rate",value:5.8},{stat:"CRIT DMG",value:6.4},{stat:"Break Effect",value:11}],id:"13ec2e5b-6f28-40b2-b85a-72a862499671",augmentedStats:{mainStat:"HP%",mainValue:.17210700223222197,"ATK%":.077,"CRIT Rate":.057999999999999996,"CRIT DMG":.064,"Break Effect":.11,"HP%":0,"DEF%":0,"SPD%":0,HP:0,ATK:0,DEF:0,SPD:0,"Effect Hit Rate":0,"Effect RES":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},cs:18,ss:0,ds:22.55},{part:"LinkRope",set:"Inert Salsotto",enhance:9,grade:3,main:{stat:"Energy Regeneration Rate",value:7.7450001612309},substats:[{stat:"DEF",value:16},{stat:"DEF%",value:10.2},{stat:"Effect Hit Rate",value:8.6},{stat:"Effect RES",value:7.7}],id:"6a81c65c-861d-4568-8373-d0a4ffe52989",augmentedStats:{mainStat:"Energy Regeneration Rate",mainValue:.077450001612309,DEF:16,"DEF%":.102,"Effect Hit Rate":.086,"Effect RES":.077,"HP%":0,"ATK%":0,"SPD%":0,HP:0,ATK:0,SPD:0,"CRIT DMG":0,"CRIT Rate":0,"Break Effect":0,"Energy Regeneration Rate":0,"Outgoing Healing Boost":0,"Physical DMG Boost":0,"Fire DMG Boost":0,"Ice DMG Boost":0,"Lightning DMG Boost":0,"Wind DMG Boost":0,"Quantum DMG Boost":0,"Imaginary DMG Boost":0},cs:0,ss:23.79,ds:12.899999999999999}],dR=[{id:"1212",form:{characterId:"1212",characterLevel:80,characterEidolon:1,lightCone:"23014",lightConeLevel:80,lightConeSuperimposition:1,mainBody:["CRIT DMG"],mainFeet:["SPD"],mainPlanarSphere:["Ice DMG Boost"],mainLinkRope:["ATK%"],ornamentSets:["Rutilant Arena"],relicSets:[["4 Piece","Hunter of Glacial Forest"]],minAtk:0,maxAtk:2147483647,minHp:0,maxHp:2147483647,minDef:0,maxDef:2147483647,minSpd:134,maxSpd:2147483647,minCr:0,maxCr:2147483647,minCd:0,maxCd:2147483647,minEhr:0,maxEhr:2147483647,minRes:0,maxRes:2147483647,minBe:0,maxBe:2147483647,minCv:0,maxCv:2147483647,minDmg:0,maxDmg:2147483647,minMcd:0,maxMcd:2147483647,minEhp:0,maxEhp:2147483647,buffAtk:0,buffAtkP:3.12,buffCr:0,buffCd:0,rankFilter:!0,predictMaxedMainStat:!0,mainStatUpscaleLevel:12,keepCurrentRelics:!1,enhance:15,grade:5,mainHead:[],mainHands:[],setConditionals:{"Passerby of Wandering Cloud":[null,!0],"Musketeer of Wild Wheat":[null,!0],"Knight of Purity Palace":[null,!0],"Hunter of Glacial Forest":[null,!0],"Champion of Streetwise Boxing":[null,5],"Guard of Wuthering Snow":[null,!0],"Firesmith of Lava-Forging":[null,!0],"Genius of Brilliant Stars":[null,!0],"Band of Sizzling Thunder":[null,!0],"Eagle of Twilight Line":[null,!0],"Thief of Shooting Meteor":[null,!0],"Wastelander of Banditry Desert":[null,0],"Longevous Disciple":[null,2],"Messenger Traversing Hackerspace":[null,!0],"The Ashblazing Grand Duke":[null,0],"Prisoner in Deep Confinement":[null,0],"Space Sealing Station":[null,!0],"Fleet of the Ageless":[null,!0],"Pan-Cosmic Commercial Enterprise":[null,!0],"Belobog of the Architects":[null,!0],"Celestial Differentiator":[null,!1],"Inert Salsotto":[null,!0],"Talia: Kingdom of Banditry":[null,!0],"Sprightly Vonwacq":[null,!0],"Rutilant Arena":[null,!0],"Broken Keel":[null,!0],"Firmament Frontline: Glamoth":[null,!0],"Penacony, Land of the Dreams":[null,!0]},characterConditionals:{talentEnhancedState:!0,talentHpDrainAtkBuff:1.8,e1CdBuff:!0,e2SkillDmgBuff:!0},lightConeConditionals:{eclipseStacks:3,maxStackDefPen:!0},enemyLevel:95,enemyCount:1,enemyResistance:.2,enemyMaxToughness:360,enemyElementalWeak:!0,enemyWeaknessBroken:!1,statDisplay:"base",weights:{"ATK%":1,"DEF%":1,"HP%":1,SPD:1,"CRIT Rate":1,"CRIT DMG":1,"Effect Hit Rate":1,"Effect RES":1,"Break Effect":1,topPercent:100,ATK:1,DEF:1,HP:1},minWeight:0,maxWeight:2147483647,minBasic:0,maxBasic:2147483647,minSkill:0,maxSkill:2147483647,minUlt:0,maxUlt:2147483647,minFua:0,maxFua:2147483647,minDot:0,maxDot:2147483647,buffSpd:0,buffSpdP:0,buffBe:0,buffDmgBoost:0,buffDefShred:0,buffResPen:0},equipped:{Head:"cd85c14c-a662-4413-a149-a379e6d538d3",Hands:"798657c8-5c5c-4b44-9c5f-f5f094414289",Body:"b3376a19-62f9-489e-80e6-8f98335af158",Feet:"92c53d06-80d0-43a8-b896-2feeda419674",PlanarSphere:"80abbd56-b1a0-4587-a349-754c33627217",LinkRope:"c521dc03-6c6e-45ef-9933-811367312441"},rank:0},{id:"1005",form:{characterId:"1005",characterLevel:80,characterEidolon:0,lightCone:"21022",lightConeLevel:80,lightConeSuperimposition:5,mainBody:["ATK%"],mainFeet:["SPD"],mainPlanarSphere:["Lightning DMG Boost"],mainLinkRope:["ATK%"],relicSets:[["4 Piece","Band of Sizzling Thunder"]],ornamentSets:["Space Sealing Station"],minAtk:0,maxAtk:2147483647,minHp:0,maxHp:2147483647,minDef:0,maxDef:2147483647,minSpd:130,maxSpd:2147483647,minCr:0,maxCr:2147483647,minCd:0,maxCd:2147483647,minEhr:0,maxEhr:2147483647,minRes:0,maxRes:2147483647,minBe:0,maxBe:2147483647,minDmg:0,maxDmg:2147483647,minMcd:0,maxMcd:2147483647,minEhp:0,maxEhp:2147483647,buffAtk:0,buffAtkP:0,buffCr:0,buffCd:0,rankFilter:!0,predictMaxedMainStat:!0,keepCurrentRelics:!1,enhance:9,grade:5,mainHead:[],mainHands:[]},equipped:{Head:"354bde06-a10b-4449-8365-16f0dcac7b88",Hands:"81a06240-1434-4b48-b7c4-cedbca15ff50",Body:"dd7d21eb-5a85-466e-a7a3-98fc6f63e546",Feet:"53a00fa5-22a9-40bc-948b-8469d6e248ec",PlanarSphere:"15d53aff-64cc-421f-837f-5ccfd55240b6",LinkRope:"c46c97d3-0cc6-4ac9-8b0d-2d5ad0f0a0e7"},rank:1},{id:"1102",form:{characterId:"1102",characterLevel:80,characterEidolon:0,lightCone:"24001",lightConeLevel:80,lightConeSuperimposition:5,mainBody:["CRIT DMG","CRIT Rate"],mainFeet:["ATK%"],mainPlanarSphere:["Quantum DMG Boost"],mainLinkRope:["ATK%"],relicSets:[["4 Piece","Genius of Brilliant Stars"]],ornamentSets:["Rutilant Arena"],minAtk:0,maxAtk:2147483647,minHp:0,maxHp:2147483647,minDef:0,maxDef:2147483647,minSpd:130,maxSpd:2147483647,minCr:0,maxCr:2147483647,minCd:0,maxCd:2147483647,minEhr:0,maxEhr:2147483647,minRes:0,maxRes:2147483647,minBe:0,maxBe:2147483647,minDmg:0,maxDmg:2147483647,minMcd:0,maxMcd:2147483647,minEhp:0,maxEhp:2147483647,buffAtk:0,buffAtkP:0,buffCr:0,buffCd:0,rankFilter:!0,predictMaxedMainStat:!0,keepCurrentRelics:!1,enhance:9,grade:5,mainHead:[],mainHands:[]},equipped:{Head:"eda5ede8-dfaa-4fa9-b2c2-17011ed0abe6",Hands:"d0b2b781-33dc-4029-b875-81ecbc659466",Body:"4b8dafeb-6f5a-410c-bcbc-4caaef116af2",Feet:"9d68a932-b623-4ac7-bd0a-7c54779b64fb",PlanarSphere:"4806d951-5a01-48bb-876f-5368059a674d",LinkRope:"c32194b9-dddc-47de-853e-17ac8b8f61a4"},rank:2},{id:"1217",form:{characterId:"1217",characterLevel:80,characterEidolon:0,lightCone:"21000",lightConeLevel:80,lightConeSuperimposition:4,mainBody:["Outgoing Healing Boost"],mainFeet:["SPD"],mainPlanarSphere:["HP%"],mainLinkRope:["Energy Regeneration Rate"],relicSets:[["4 Piece","Passerby of Wandering Cloud"]],ornamentSets:["Fleet of the Ageless"],minAtk:0,maxAtk:2147483647,minHp:0,maxHp:2147483647,minDef:0,maxDef:2147483647,minSpd:130,maxSpd:2147483647,minCr:0,maxCr:2147483647,minCd:0,maxCd:2147483647,minEhr:0,maxEhr:2147483647,minRes:0,maxRes:2147483647,minBe:0,maxBe:2147483647,minDmg:0,maxDmg:2147483647,minMcd:0,maxMcd:2147483647,minEhp:0,maxEhp:2147483647,buffAtk:0,buffAtkP:0,buffCr:0,buffCd:0,rankFilter:!0,predictMaxedMainStat:!0,keepCurrentRelics:!1,enhance:9,grade:5,mainHead:[],mainHands:[]},equipped:{Head:"0bd7404f-3420-4bf5-9e45-f79343728685",Hands:"9b3f7f9b-b394-4c87-af67-0f4f7e41a6a8",Body:"725e6ee5-9465-45a2-8172-ed69241c1e54",Feet:"f8d42acd-c848-484a-9eee-d03a7b88f030",PlanarSphere:"f89266f4-241e-43bc-b04a-a864eea60e49",LinkRope:"e1650ead-9ec8-4e2a-9ab9-c4199e1b609c"},rank:3},{id:"1205",form:{characterId:"1205",characterLevel:80,characterEidolon:0,lightCone:"21012",lightConeLevel:80,lightConeSuperimposition:1,mainBody:["CRIT Rate","CRIT DMG"],mainFeet:["SPD"],mainPlanarSphere:["Wind DMG Boost","HP%"],mainLinkRope:["HP%"],relicSets:[["4 Piece","Longevous Disciple"]],ornamentSets:["Inert Salsotto"],minAtk:0,maxAtk:2147483647,minHp:0,maxHp:2147483647,minDef:0,maxDef:2147483647,minSpd:134,maxSpd:2147483647,minCr:0,maxCr:2147483647,minCd:0,maxCd:2147483647,minEhr:0,maxEhr:2147483647,minRes:0,maxRes:2147483647,minBe:0,maxBe:2147483647,minDmg:0,maxDmg:2147483647,minMcd:0,maxMcd:2147483647,minEhp:0,maxEhp:2147483647,buffAtk:0,buffAtkP:0,buffCr:0,buffCd:0,rankFilter:!0,predictMaxedMainStat:!0,keepCurrentRelics:!1,enhance:9,grade:5,mainHead:[],mainHands:[]},equipped:{Head:"e898e418-bc4e-404d-be3f-2477dec9839a",Hands:"71b088e8-e254-4219-96d5-f56cde1702d3",Body:"7cdd90c6-73fc-4a5f-9cea-6458d5e6f456",Feet:"726e7b1f-f630-4182-ac11-1e8523a33fc1",PlanarSphere:"9714ef68-45e7-4f62-81f2-b437649d3a49",LinkRope:"426a1d2d-c361-42d0-a7d6-5001755c220d"},rank:4},{id:"1202",form:{characterId:"1202",characterLevel:80,characterEidolon:6,lightCone:"21032",lightConeLevel:80,lightConeSuperimposition:4,mainBody:["HP%","ATK%"],mainFeet:["SPD"],mainPlanarSphere:["HP%","ATK%"],mainLinkRope:["Energy Regeneration Rate"],relicSets:[["4 Piece","Musketeer of Wild Wheat"]],ornamentSets:["Fleet of the Ageless"],minAtk:0,maxAtk:2147483647,minHp:0,maxHp:2147483647,minDef:0,maxDef:2147483647,minSpd:140,maxSpd:2147483647,minCr:0,maxCr:2147483647,minCd:0,maxCd:2147483647,minEhr:0,maxEhr:2147483647,minRes:0,maxRes:2147483647,minBe:0,maxBe:2147483647,minDmg:0,maxDmg:2147483647,minMcd:0,maxMcd:2147483647,minEhp:0,maxEhp:2147483647,buffAtk:0,buffAtkP:0,buffCr:0,buffCd:0,rankFilter:!0,predictMaxedMainStat:!0,keepCurrentRelics:!1,enhance:9,grade:5,mainHead:[],mainHands:[]},equipped:{Hands:"67999399-0a5f-4a94-9267-32c42a7fbbe5",Body:"cd8b362d-24e4-4427-b09e-2666c1fb97b4",Feet:"ac206198-c5b1-4be7-8dda-0d7b85e1aabf",PlanarSphere:"2576e256-b473-481b-9e69-5e5ce2641f1a",LinkRope:"9c66993a-07b4-4994-8bb5-86507e6ba49b"},rank:5},{id:"1101",form:{characterId:"1101",characterLevel:80,characterEidolon:1,lightCone:"23003",lightConeLevel:80,lightConeSuperimposition:1,mainBody:["CRIT DMG","HP%"],mainFeet:["SPD"],mainPlanarSphere:["HP%","DEF%"],mainLinkRope:["Energy Regeneration Rate"],relicSets:[["2 Piece","Eagle of Twilight Line"]],ornamentSets:["Fleet of the Ageless","Broken Keel"],minAtk:0,maxAtk:2147483647,minHp:0,maxHp:2147483647,minDef:0,maxDef:2147483647,minSpd:134,maxSpd:2147483647,minCr:0,maxCr:2147483647,minCd:0,maxCd:2147483647,minEhr:0,maxEhr:2147483647,minRes:0,maxRes:2147483647,minBe:0,maxBe:2147483647,minDmg:0,maxDmg:2147483647,minMcd:0,maxMcd:2147483647,minEhp:0,maxEhp:2147483647,buffAtk:0,buffAtkP:0,buffCr:0,buffCd:0,rankFilter:!0,predictMaxedMainStat:!0,keepCurrentRelics:!1,enhance:9,grade:5,mainHead:[],mainHands:[]},equipped:{Head:"8de51c73-36b5-40ea-91a2-e566d97da2a9",Feet:"dd1bb72d-80f3-432c-b8d9-0b62c7790b9a",PlanarSphere:"86816eed-af3c-441e-9379-22aca07bc15f",LinkRope:"5788b45d-6d75-4189-9689-872fd84280f7"},rank:6},{id:"1105",form:{characterId:"1105",characterLevel:80,characterEidolon:6,lightCone:"21007",lightConeLevel:80,lightConeSuperimposition:1,mainBody:["Outgoing Healing Boost"],mainFeet:["SPD"],mainPlanarSphere:["HP%"],mainLinkRope:["Energy Regeneration Rate"],relicSets:[],ornamentSets:[],minAtk:0,maxAtk:2147483647,minHp:0,maxHp:2147483647,minDef:0,maxDef:2147483647,minSpd:0,maxSpd:2147483647,minCr:0,maxCr:2147483647,minCd:0,maxCd:2147483647,minEhr:0,maxEhr:2147483647,minRes:0,maxRes:2147483647,minBe:0,maxBe:2147483647,minDmg:0,maxDmg:2147483647,minMcd:0,maxMcd:2147483647,minEhp:0,maxEhp:2147483647,buffAtk:0,buffAtkP:0,buffCr:0,buffCd:0,rankFilter:!0,predictMaxedMainStat:!0,keepCurrentRelics:!1,enhance:9,grade:5,mainHead:[],mainHands:[]},equipped:{},rank:7}],uR={relics:cR,characters:dR},mR=()=>{const{t:e}=V(["getStartedTab","common"]),t=window.store(s=>s.gettingStartedDrawerOpen),n=window.store(s=>s.setGettingStartedDrawerOpen);function o(){B.setStore(JSON.parse(JSON.stringify(uR)),!1),Ee.save(),J.success(e("TryOut.SuccessMessage"))}return i.jsx(Jn,{title:e("TryOut.Header"),placement:"right",onClose:()=>n(!1),open:t,width:250,children:i.jsxs(g,{vertical:!0,gap:20,children:[i.jsx(At,{text:e("TryOut.DocumentationTitle"),linkIcon:!0,url:"https://github.com/fribbels/hsr-optimizer/blob/main/docs/guides/en/optimizer.md"}),i.jsx(Cn,{title:e("common:Confirm"),description:e("TryOut.description"),onConfirm:o,placement:"bottom",okText:e("common:Yes"),cancelText:e("common:Cancel"),children:i.jsx(Y,{type:"primary",icon:i.jsx(ts,{}),style:{width:200},children:e("TryOut.ButtonText")})})]})})},hR=()=>{const{t:e}=V("common",{keyPrefix:"Stats"}),{t}=V("optimizerTab",{keyPrefix:"TracesDrawer"}),n=window.store(y=>y.statTracesDrawerOpen),o=window.store(y=>y.setStatTracesDrawerOpen),s=window.store.getState().statTracesDrawerFocusCharacter,[r,l]=I.useState([]),[c,d]=I.useState([]),[u,h]=I.useState(!1),p=I.useMemo(()=>{if(s){const y=B.getScoringMetadata(s),P=B.getMetadata().characters[s].traceTree,_=[...P],x=[];for(;_.length;){const G=_.pop();for(const M of G.children)_.push(M);x.push(G.id)}if(l(x),y.traces){const G=y.traces.deactivated??[],M=x.filter(H=>!G.includes(H));d(M)}else d(x);return P}return[]},[s]),S={},D=[...p];for(;D.length;){const y=D.pop();for(const P of y.children)D.push(P);S[y.id]=y}const E=(y,P)=>{let _=y.checked;const x=S[P.node.key];if(x){if(P.checked){let G=x.id;for(;G;){const H=S[G];if(!H)break;_=Array.from(new Set([..._,H.id])),G=H.pre}const M=[x];for(;M.length;){const H=M.pop();_=Array.from(new Set([..._,H.id]));for(const Z of H.children)M.push(Z)}}else{const G=[x];for(;G.length;){const M=G.pop();_=_.filter(H=>H!==M.id);for(const H of M.children)G.push(H)}}d(_)}};return i.jsx(Jn,{title:t("Title"),placement:"right",onClose:()=>o(!1),open:n,width:400,forceRender:!0,children:i.jsxs(g,{vertical:!0,gap:15,style:{display:s?"flex":"none"},children:[i.jsx($,{children:t("Header")}),i.jsx(Jm,{checkable:!0,checkStrictly:!0,showLine:!0,expandedKeys:r,selectable:!1,onCheck:E,checkedKeys:c,fieldNames:{title:"stat",key:"id",children:"children"},defaultExpandParent:!0,defaultExpandAll:!0,switcherIcon:i.jsx(Qm,{}),treeData:p,titleRender:y=>i.jsxs(g,{gap:0,align:"center",children:[i.jsx("img",{src:k.getStatIcon(y.stat),style:{height:20,marginLeft:-6,marginRight:4}}),i.jsx("div",{style:{whiteSpace:"pre-wrap"},children:`${F.isFlat(y.stat)?y.value:F.precisionRound(y.value*100)+"%"} - ${e(y.stat)}`})]}),style:{padding:8}}),i.jsx(Y,{block:!0,type:"primary",loading:u,onClick:()=>{if(!s)return;h(!0);const P=Object.keys(S).filter(x=>!c.includes(x)),_=B.getScoringMetadata(s);_.traces={deactivated:P},B.updateCharacterScoreOverrides(s,_),setTimeout(()=>{J.success("Saved"),h(!1),Ee.delayedSave(),o(!1)},500)},children:t("ButtonText")})]})})},{useToken:fR}=Ft,{Text:pR}=Ce;function gR(){const{token:e}=fR(),t=window.store(s=>s.activeKey),n=I.useMemo(()=>SR(),[]);if(t!=de.CHANGELOG)return i.jsx(i.Fragment,{});function o(s,r){const l=[];let c=0;for(const u of s)u.endsWith(".webp")?l.push(i.jsx("img",{src:k.getChangelog(`${r.date}/${u}`),loading:"lazy",style:{border:`2px solid ${e.colorBgContainer}`,margin:5,maxWidth:1200}},c++)):u.startsWith("https")?l.push(i.jsx("li",{children:i.jsx(At,{text:u,url:u},c++)},c++)):l.push(i.jsx("li",{children:i.jsx(pR,{style:{fontSize:16},children:u})},c++));const d=r.date!=""?`Update ${r.date}`:r.title;return i.jsxs(g,{vertical:!0,children:[i.jsx(Ce.Title,{style:{marginLeft:20},children:i.jsx("u",{children:d})}),i.jsx("ul",{children:l})]})}return i.jsx(Yl,{itemLayout:"vertical",size:"large",pagination:{onChange:s=>{console.log(s)},position:"bottom",align:"start",pageSize:4},dataSource:n,renderItem:s=>i.jsx(Yl.Item,{children:o(s.content,s)},s.title)})}function SR(){const e=[{title:`Current data version: ${Zn}`,date:"",content:[]},{title:"",date:"2025-03-10",content:["Updated content to 3.2v3","Added a DPS Score progress meter to visualize the scoring benchmarks and the damage increments between them","meter.webp","Updated main stat / substat upgrade tables on the DPS Score analysis page","The main stat upgrades now show the damage difference on downgrades as well","upgrade.webp","Updated warp income options to v3.2","income.webp","Added a New / Rerun banner selector to the Warp Planner page","When Rerun is selected, the current eidolon and superimposition options are shown","rerun.webp","Optimizer stat upgrades are now shown as an additional max stat roll instead of min roll","maxRoll.webp","Added a new Relics tab column for Reroll average delta potential vs currently equipped relics","This column can be used to sort by the most likely upgrades to a character's current relics","vs.webp","The Combat buffs menu will now show ability scalings by the scaling stat","scaling.webp","Relic displays will now accurately show previously ambiguous roll counts on relics verified by the Showcase page or Reliquary Archiver","roll.webp","Toughness measurement displays are now updated to 10 per basic atk instead of 30 per basic atk, no functional changes","Selecting Trailblazers on character menus will now default to E6","Improved performance of GPU optimization engine","Improved performance of CPU optimization engine on Firefox","Light cone effects will no longer activate when its path is mismatched with the character","Fix: Acheron's trace will now automatically update based on the number of Nihility teammates","Fix: Sparkle's trace will now automatically update based on the number of Quantum teammates","Fix: The Herta's trace will now automatically update based on the number of Erudition teammates","Fix: Poised To Bloom light cone will now automatically update based on teammates' paths","Fix: Izumo Gensei and Takama Divine Realm set will automatically update based on teammates' paths","Fix: On-Hit ATK / CR / CD boosting abilities will now no longer count towards filters and conditional activations, e.g. Ruan Mei E2, Acheron's E1","Fix: E6 Sparkle now correctly buffs memosprites","Fix: Penacony, Land of the Dreams set will now correctly buff the wearer's memosprite","Fix: Rappa's break vulnerability now correctly applies to memosprites","Fix: Long Road Leads Home light cone break vulnerability now correctly applies to memosprites","Fix: Buff priority no longer disables Castorice and her memosprite's self buffs","Fix: Clicking substat upgrades on the Edit Relic menu will now upgrade to the nearest 3, instead of adding 3","Balance: Mydei's benchmark now defaults to Bone Collection's Serene Demesne set","Balance: Acheron's simulated benchmarks can now also optimize with ATK % body"]},{title:"",date:"2025-02-25",content:["Updated content to v3.2v1","Added Castorice showcase","castorice.webp","Added Anaxa showcase","anaxa.webp","Fix: Improved GPU optimization performance and faster compile times","Fix: Combo DMG optimization on GPU on Mac no longer crashes"]},{title:"",date:"2025-02-21",content:["Added an Optimization Results Analysis panel with in depth information & comparisons for optimizer results","analysis.webp","Enabled i18n support for Korean","Enabled i18n support for Vietnamese","vnkr.webp","Added a display for tracking sources of combat buffs on the showcase analysis and optimizer analysis","buffs.webp","Improved the additional warp resources selector to include warp income per half patch","income.webp","Added an overwrite button to the custom stats simulation tool, to edit and replace an existing simulation","replace.webp","UID is now shown by default on the character showcase","uid.webp","Added a UID show / hide selector on the showcase customization toolbar","showUid.webp","Added an importer option to only import characters that are already in the optimizer","import.webp","Bronya / Remembrance Trailblazer / Sunday Crit DMG limits are increased to 400% on optimizer conditionals","cd.webp","The optimizer now selects the character's currently equipped relics for stat display and the analysis panel",'Character scores are now set to "?" ranking for non-6 piece builds and missing light cones',"Improved UI performance for loading showcases","Optimization performance improvements for CPU engine","Fix: Forcing weakness break from certain character conditionals now also correctly applies the global weakness broken DMG multiplier","Fix: Optimizer input changes now save correctly after page refresh","Fix: Aglaea and Remembrance Trailblazer conditionals now enable The Wondrous BananAmusement Park set by default","Fix: Memosprites now correctly receive SPD buffs","Fix: Memosprites now correctly calculate Super Break DMG","Fix: Additional DMG instances now correctly get calculated without ability-type DMG boosts","Fix: Tribbie E1 now correctly applies to the entire team","Fix: True DMG now correctly applies to DOT and Break DMG instances","Fix: Home page UID input now searches on Enter key press","Fix: Damage upgrades will no longer recommend an existing main stat","Fix: Damage upgrades will no longer recommend other ropes when the benchmark is matching Energy Regen rope","Fix: Mydei now correctly uses basic HP for conversion instead of combat HP","Fix: Sacerdos' Relived Ordeal set now syncs correctly on optimizer teammates","Fix: Bone Collection's Serene Demesne and Giant Tree of Rapt Brooding sets are now applied correctly in SubDPS scoring mode","Balance: Argenti's benchmarks now equalize for Energy Regen rope","Balance: Tribbie's SPD weight updated 0 -> 1.0 again after buffs","Balance: Tribbie's benchmarks now use Genius of Brilliant Stars by default, while matching the user's Poet of Mourning Collapse set","Balance: Tribbie's combo rotation now uses 4 -> 3 FUAs","Balance: Blade's default benchmark set is now Bone Collection's Serene Demesne"]},{title:"",date:"2025-01-26",content:["Updated content to version 3.1v3","Added a Warp Planner tab for calculating warp probabilities","warp.webp","Added a new customization sidebar for showcase scoring and stat views","stats.webp","Stat trace trees can now be customized, allowing SPD traces to be disabled for Poet of Mourning Collapse sets for example","trace.webp","The SPD precision selector will allow for toggling between 1 and 3 decimal places for SPD displays for precise SPD tuning","Modified traces will show with an asterisk *","spd.webp","The SPD weight selector will allow for toggling the value of SPD substats between 0% and 100% for better grading of low SPD builds","0% weight SPD scores are marked with a special boots icon when SPD = 0 is the only customized weight","weight.webp","The SPD benchmark selector will force the benchmark simulations to target a specific SPD value that is lower than your character's SPD","benchmark.webp","Scores with a modified SPD benchmark will show their SPD target on the DPS score display","benchmarkScore.webp","The Buff Priority selector will allow for toggling between making the character the primary target of single target buffs or not","priority.webp","When a character is on Buff Priority: Low, they will no longer be targeted with single target buffs, and will be labeled as a Sub DPS","Their Combat Stats and DPS score will also adjust based on their buff status","subdps.webp","Updated the auto color selection algorithm for custom portraits","Removed the CV value display from character cards, adjusted the logic for showing relevant stats","Fixed: Showcase shadows on mobile screenshot downloads","Fixed: Various formatting issues were corrected in conditional text popups","Fixed: Relic potential scoring now matches the main stats for optimal main stat relics","Balance: Added ERR rope to Tribbie scoring","Balance: Set Tribbie's default SPD weight to 0","Balance: Set Tribbie's default set to Poet of Mourning Collapse","Balance: Enabling Sub DPS mode by default for Tribbie / Aventurine / Fugue / Serval / Topaz / Moze / March 7th (Hunt)"]},{title:"",date:"2025-01-13",content:["Updated content to version 3.1v1","Added Tribbie showcase","tribbie.webp","Added Mydei showcase","mydei.webp","Added new relic sets for 3.1","sets.webp","Added new relic rating columns for relic reroll potential","— The reroll column shows the average potential of the relic after using reroll dice on it","— The reroll delta column shows the expected increase in potential from the current relic to its post-reroll stats","ratingColumns.webp","The reroll and delta columns are now sortable in the relics grid","columns.webp","Added buff priority selectors for Remembrance characters, for choosing between prioritizing the summoner or memosprite when receiving single target buffs","buffPrio.webp","Fix: Added Aglaea missing Seam Stitch conditional","Fix: Added Black Swan missing E4 conditional","Fix: Dmg RES and Eff RES enemy options labels were swapped","Fix: Showcase rendering on mobile devices","Fix: Relic potential changed between re-scores in certain cases","Balance: Added ERR rope to Serval scoring","Balance: Added ERR rope to Welt scoring"]},{title:"",date:"2025-01-07",content:["Added a no-scoring showcase card view","noScore.webp","Added dark mode for showcase card colors","Adjusted showcase card colors for various characters","dark.webp","Content has been updated for version 3.0","Added Memosprite handling logic for remembrance characters","Optimizer sidebar now has a Summoner / Memosprite stats view selector which changes the optimizer stat targets, similar to Combat / Basic mode","memoView.webp","On the optimizer grid, columns for Memosprite stats are now denoted in superscript such as Σ ATKᴹ","Added a new ability damage column for Memosprite skills: SKILLᴹ DMG","memoSkill.webp","The Combo DMG ability rotation panel is updated to include SKILLᴹ DMG","memoCombo.webp","Aglaea DPS scoring is now active, defaulting to Hero of Triumphant Song + The Wondrous BananAmusement Park sets","aglaea.webp","Remembrance Trailblazer True DMG scoring conditionals are now active","rmc.webp","Single target buffs are assumed to apply to the summoner, certain Sunday buffs / RMC buffs / team buffs can apply to both summoner and memo","Hero of Triumphant Song and Poet of Mourning Collapse sets are now active","heroPoet.webp","Added rerun characters to showcase presets","rerun.webp","Added support for Japanese translations in the i18n menu","jp.webp","Imported characters' light cones are now preselected on character / teammate menus","Updated menu banner to identify no leaks / beta sites",'Fix: Showcase Damage Improvements tab now shows Elemental + Ability DMG as "DMG %" to not overflow space',"Fix: The 100% benchmark for DPS scoring will now exactly match the user's SPD stat (except for Poet of Mourning Collapse sets)","Fix: The 200% incorrectly assumed the 100%'s boots were optimal - now, 200% will always choose the optimal SPD / ATK boots, resulting in possible score decreases","Balance: Added diminishing returns for 100% benchmark with high SPD, for characters like Kafka","Balance: Benchmarks with the Poet of Mourning Collapse set will now match the set's SPD threshold at 110 or 95 SPD, instead of matching the user's SPD","Balance: The Wondrous BananAmusement Park set is now matched for summoner benchmarks","Balance: Updated some outdated characters' relic / ornament benchmark sets for combat score",'Balance: 4 star relics are now rated as "?"',"Balance: Scoring changes for version 3.0 dice and resin","— Previously, main stats were given between 1 to 2 free substats worth of score to balance for rarity / difficulty of obtaining optimal the main stat","— This was balanced for version 1.x but now with the addition of reroll dice and substat resin in 3.x, optimal main stats are much easier to obtain","— We're adjusting this free score to be worth 1 substat roll for all main stats, which will result in a slight Character / Relic score decrease","— For Combat scoring, the scaling thresholds have also been updated for grades above the 100% benchmark to adjust for score inflation from dice / resin","score.webp"]},{title:"",date:"2024-11-27",content:["The optimizer site has a new home page","home.webp","Updated the character showcase design","showcase.webp","Added a new showcase theme customization sidebar","custom.webp","I18n support has been enabled with support for: Français, Português (BR), 中文","i18n.webp","Added healing and shielding columns and filters for sustain characters, and adjusted their default sort columns","heal.webp","Added new selector conditional type for healing and shielding sources","healSource.webp","Added a new AEON tier for DPS score at 150% with verified-only relics","aeon.webp","Incorrect main stat pieces will now get a (?) rating on the character showcase","question.webp","The optimizer grid will now remove irrelevant columns for characters to hide the full-zero columns","Made slight adjustments to relic scoring - flat stats are now valued at a static 0.40x of their percentage counterpart","Fix: Fugue E4 break DMG buff now calculates correctly","Balance: Sim scoring will now match Energy Regeneration rope for certain character / eidolon combinations","Balance: Fugue now has additional Break instances in her combo damage rotation to push towards break focus"]},{title:"",date:"2024-10-19",content:["Updated content for version 2.7","fugue.webp","Added a new ability rotation calculation methodology, where damage abilities are evaluated sequentially for buff activation","rotation.webp","Added an Advanced Rotation panel for full customizability of buff uptime and in-battle conditional calculations for the entire team","Simple mode will automatically apply presets, while Advanced mode grants full control. Improved preset accuracy is under development","advanced.webp","DPS score now shows the combo rotation abilities","abilities.webp","Added i18n support, looking for contributors to help translate the website","i18n.webp","Removed Stat Weight sort and filter options for optimizer simplification. The stat weight column still remains","Sacerdos has been added as a personal relic set conditional for characters with self buffs","Fix: The Recommended Presets button no longer resets weighted rolls per relic","Fix: Improved Firefox optimizer search performance","Balance: DPS score overvalued ATK boots in certain situations with large amount of speed buffs, mostly affects ATK boots Kafka S1 builds","Balance: Jiaoqiu is now recommended ATK / ERR rope by default","Balance: Ruan Mei can now use all mains stats for feet","Balance: Shadowed by Night light cone now has SPD buff enabled by default"]},{title:"",date:"2024-09-20",content:["Added a Relic Locator tool to the Relics tab for finding the relic's row / column in the inventory","locator.webp","Updated all assets files to high quality images for character portraits, light cones, icons","Readjusted the crop and zoom for the new portrait assets","Reduced the light cone portrait height for Combat scoring view","Moved the Character Menu button to the top of the Characters tab for better findability","characterTab.webp","Reliquary is now updated for 2.5","reliquary.webp","Updated Rappa's default scoring team","rappaTeam.webp","Added pointer cursors to clickable icons","Optimizer tab character and teammate menus are now open upon clicking their icons","Fix: Save file now correctly loads previous scoring algorithm changes","Fix: Pioneer Diver of Dead Waters 0x conditional now correctly applies","Balance: Lowered the scoring penalty for missing flat stat breakpoints for combat scoring","Balance: Updated Pioneer Diver of Dead Waters default conditional to 3x+ for characters with debuffs","Balance: Changed Rappa's scoring weights from 1 ATK / 1 SPD / 1 BE to 0.5 ATK / 1 SPD / 1 BE"]},{title:"",date:"2024-09-08",content:["Added GPU acceleration to perform calculations on the graphics card for a significant improvement in optimizer search speed","Enabling GPU acceleration will improve the optimizer's search speed to hundreds of millions of permutations per second, up to billions on high end devices","3 compute engine options are now available","— GPU Experimental: Fastest search speed but potentially unsupported on some devices","— GPU Stable: Fast search speed for general device compatability (default)","— CPU Only","GPU acceleration only supported on Windows & Mac: Chrome, Opera, Edge browsers, Linux: Chromium browsers with a cli flag","gpu.webp","Updated the substat scoring algorithm to score relics stats relative to the maximum possible score on the relic","This means that when a weighted substat is occupied by the main stat, the score value of the remaining substat weights increases","Default character weights were rebalanced to account for this, and now more accurately reflect the true value of substats, for example:","Firefly's previous weight of 1.0 ATK / 1.0 SPD / 1.0 BE has been updated to 0.5 ATK / 1.0 SPD / 1.0 BE since her passive converts ATK at roughly half the value of BE","While the ATK weight was reduced, this actually makes the score value of SPD and BE higher since the new system scores stats relative to the other weights","The updated substat weight methodology can be viewed from the Scoring Algorithm menu","scoring.webp","Updated the copy screenshot button to work for all browsers. Also works on mobile devices now","screenshot.webp","Updated the Edit Portrait workflow to be smoother. Added an 'Upload new image' button to change the portrait","portrait.webp","Multiple relics can now be selected and deleted simultaneously on the Relics tab with Shift + Click and Ctrl + Click","multiselect.webp","Added a new setting for enabling / disabling a full inventory rescore on page load. Disable for faster load times on large inventories","scoreSetting.webp","Results limits for the optimization target have been changed to be compatible with GPU optimizer - now defaults to 1024 results","resultCount.webp","The Relic Insights tool now opens the character scoring panel on click, and now updates correctly when the selected character is changed","insights.webp","Updated with version 2.6v1 content","rappa.webp","Clicking the light cone portrait on character cards now bring up the Edit Character / Light Cone menu","Added a confirmation popup for resetting optimizer filters","Added on-hit buffs for the character's primary ability to the Combat stats section of scoring cards","Relic scorer URL can now be shared with user IDs included","Relic cards now show a border on hover","Performance: Improved relic scorer stability","Performance: Improved portrait image loading times, fixed images jumping around when loading","Performance: Improved character card loading time for Combat score cards","Performance: Improved relic import responsiveness","Performance: Improved editing and saving relics responsiveness","Fix: Some custom portrait dimensions were not cropping correctly","Fix: On the Relics tab, relics will remain selected after editing it","Fix: Prevent Combat stats panel from overflowing on scoring cards","Fix: Firesmith of Lava-Forging 4p was incorrectly adding combat buffs","Fix: Relic / ornament set selector on Optimizer tab was incorrectly rendering overflowing tags","Fix: But the Battle Isn't Over was not showing the Energy Regeneration Rate passive","Balance: Allow ATK % rope on Lingsha default scoring","Balance: Fixed a bug where the 200% benchmark used an extra substat roll in some cases, resulting in an impossible build. Minor DPS Score buff to affected characters","Balance: The Wind-Soaring Valorous 4p is now disabled by default, but activated by default only for specific characters who can benefit from it","Balance: Updated Jiaoqiu to have 3x stacks of Prisoner in Deep Confinement 4p by default","Balance: Updated Moze to have 3x+ stacks of Pioneer Diver of Dead Waters 4p by default","Balance: Updated Jade to have 8x stacks of The Ashblazing Grand Duke 4p by default","Balance: Updated Herta to have 8x stacks of The Ashblazing Grand Duke 4p by default","Balance: Updated Yunli to have 8x stacks of The Ashblazing Grand Duke 4p by default","Balance: Updated Himeko to have 8x stacks of The Ashblazing Grand Duke 4p by default","Balance: Revisited all characters weights and adjusted values for maximum-potential based relic scoring","Balance: Kafka weights","— Prev: 1.0 ATK / 1.0 SPD / 0.5 CR / 0.5 CD / 0.5 EHR / 0.75 BE","— Now: 1.0 ATK, 1.0 SPD, 0.5 EHR","Balance: Silver Wolf weights","— Prev: 0.5 ATK / 0.25 DEF / 0.25 HP / 1.0 SPD / 0.75 CR / 0.75 CD / 1.0 EHR / 0.75 BE","— Now: 0.5 DEF / 0.5 HP / 1.0 SPD / 1.0 EHR / 0.5 RES","Balance: Asta weights","— Prev: 0.75 ATK / 0.75 DEF / 0.75 HP / 1.0 SPD / 0.75 RES / 0.5 BE","— Now: 0.5 ATK / 0.5 DEF / 1.0 HP / 1.0 SPD / 0.5 RES / 0.5 BE","Balance: Bronya weights","— Prev: 0.75 DEF / 0.75 HP / 1.0 SPD / 1.0 CD / 0.75 RES","— Now: 0.5 DEF / 0.5 HP / 1.0 SPD / 1.0 CD / 0.75 RES","Balance: Pela weights","— Prev: 0.75 DEF / 0.75 HP / 1.0 SPD / 1.0 EHR / 0.75 RES","— Now: 0.75 DEF / 0.75 HP / 1.0 SPD / 1.0 EHR / 0.5 RES","Balance: Tingyun weights","— Prev: 1.0 ATK / 0.75 DEF / 0.75 HP / 1.0 SPD / 0.75 RES","— Now: 1.0 ATK / 0.75 DEF / 0.75 HP / 1.0 SPD / 0.5 RES","Balance: Fu Xuan weights","— Prev: 0.75 DEF / 1.0 HP / 1.0 SPD / 0.75 RES","— Now: 1.0 DEF / 1.0 HP / 1.0 SPD / 0.5 RES","Balance: Guinaifen weights","— Prev: 1.0 ATK / 1.0 SPD / 1.0 EHR / 0.75 BE","— Now: 1.0 ATK / 0.5 DEF / 0.5 HP / 1.0 SPD / 1.0 EHR / 0.5 RES","Balance: Hanya weights","— Prev: 0.75 DEF / 0.75 HP / 1.0 SPD / 0.75 RES","— Now: 0.75 DEF / 0.75 HP / 1.0 SPD / 0.5 RES","Balance: Jiaoqiu weights","— Prev: 0.5 ATK / 0.5 DEF / 0.5 HP / 1.0 SPD / 1.0 EHR","— Now: 0.5 ATK / 0.5 DEF / 0.5 HP / 1.0 SPD / 1.0 EHR / 0.5 RES","Balance: Ruan Mei weights","— Prev: 0.75 DEF / 0.75 HP / 1.0 SPD / 0.75 RES / 1.0 BE","— Now: 0.5 DEF / 0.5 HP / 1.0 SPD / 0.5 RES / 1.0 BE","Balance: Aventurine weights","— Prev: 1.0 DEF / 0.5 HP / 1.0 SPD / 1.0 CR / 1.0 CD","— Now: 1.0 DEF / 1.0 SPD / 1.0 CR / 1.0 CD","Balance: Sparkle weights","— Prev: 0.75 DEF / 0.75 HP / 1.0 SPD / 1.0 CD / 0.75 RES","— Now: 0.5 DEF / 0.5 HP / 1.0 SPD / 1.0 CD / 0.5 RES","Balance: Black Swan weights","— Prev: 1.0 ATK / 1.0 SPD / 1.0 EHR / 0.5 BE","— Now: 1.0 ATK / 1.0 SPD / 1.0 EHR","Balance: Robin weights","— Prev: 1.0 ATK / 0.75 DEF / 0.75 HP / 1.0 SPD / 0.75 RES","— Now: 1.0 ATK / 0.5 DEF / 0.5 HP / 1.0 SPD / 0.5 RES","Balance: Firefly weights","— Prev: 1.0 ATK / 1.0 SPD / 1.0 BE","— Now: 0.5 ATK / 1.0 SPD / 1.0 BE","Balance: Boothill weights","— Prev: 0.5 ATK / 1.0 SPD / 0.75 CR / 0.75 CD / 1.0 BE","— Now: 0.25 ATK / 1.0 SPD / 0.25 CR / 0.25 CD / 1.0 BE","Balance: Trailblazer Harmony weights","— Prev: 0.75 DEF / 0.75 HP / 1.0 SPD / 0.75 RES / 1.0 BE","— New: 0.5 DEF / 0.5 HP / 1.0 SPD / 0.5 RES / 1.0 BE","Keep in mind with the new substat scoring system, a reduction in one stat's weight now actually makes the other substats worth more","Meaning in most cases these weight reductions actually are buffs to the scores of good relics"]},{title:"",date:"2024-08-19",content:["Added a new Combat Stats view for the score card, showing the character's fully buffed in-combat details","combat.webp","Added a new toggle to switch between Combat Stats and Damage Upgrades card view","upgrades.webp","Added a new panel to suggest filter changes when optimizer searches produce zero results","popup.webp","Updated scoring card with better rules for showing relevant stats","Renamed Sim Damage to Combo DMG for clarity","stats.webp","Updated Edit Character menu to auto-populate the light cone path, added path icons","Switching light cones will now reset its superimposition to S1","modal.webp","Relic scorer card now has an Edit character button","edit.webp","Moved Relic Scorer tab to a new Showcase menu at the top of the sidebar for visibility","showcase.webp","Updated content to version 2.5v4","Editing a relic now re-scores it automatically and updates the Relics tab grid","Updated Kel-Z and Reliquary Archiver imports to support the new v4 format","Fix: Some relic set text descriptions were out of date","Fix: Importing relics no longer overwrites the optimizer's equipped owner","Balance: Kafka / Black Swan's sim scoring updated to lean more towards DoT","Balance: Moze's default sim updated to to 4p Pioneer, allow Ashblazing and Izumo","Balance: Feixiao's damage combo updated to remove Break, updated combo with her ult changes"]},{title:"",date:"2024-08-10",content:["Added Healing Boost and Energy Regen on the character score card","Removed CV from the stat card","card.webp","Optimizer builds can now be pinned to the top of the grid for easier comparisons","pin.webp","The Relic scorer can now import characters along with relics","import.webp","Updated the Edit character menu with more convenient selectors","edit.webp","Added estimated time remaining to optimizer searches","eta.webp","Added an Equipped state filter to the Relics tab","equipped.webp","Added Lushaka set to teammate effects","lushaka.webp","Updated with 2.5 beta data","Fix: Conditional sliders max/min selections will now update properly when eidolons change","Fix: The baseline simulation will now use the best default set when the user's character isn't using an equivalent set","Fix: Lingsha calculations now correctly take into account teammate super break triggers","Balance: Himeko's default ornament set is now Duran","Balance: Dr Ratio's default ornament set is now Duran","Balance: Feixiao secondary ult now forces weakness break to enabled","Balance: Removed break damage from Feixiao's rotation","Balance: Adjusted logic for simulation scoring using speed boots vs atk boots"]},{title:"",date:"2024-07-08",content:["Buffed DPS scores across all characters, making the 100% benchmark slightly easier to reach","benchmark.webp","The Characters tab now has a search bar, and filters for element / path","search.webp","The Relics tab custom characters menu now has buttons to Exclude all / Clear","Custom view is now the default","exclude.webp","Reliquary archiver is back online and been updated for v2.3, new download required","reliquary.webp","Re-formatted optimizer grid headers for readability","grid.webp","Characters' default scoring combo is now automatically filled in on the optimizer","combo.webp","Updated Yunli's default scoring team","yunli.webp","Updated Yunli and March 8th's Ashblazing set calcs","Updated v2.3 characters conditional tooltips","Re-centered all light cones for simulation scoring view","Fix: Updated ability-type buff logic to correctly apply DMG buffs on characters that can change ability types","Fix: Aventurine now correctly applies CD buff on Unnerved","Fix: Certain relics weren't showing correctly in Hoyolab import","Fix: Duran and Lantern set stats are now applied correctly for scoring","Fix: Manual relic creation was broken in certain cases","Balance: Allow the scoring simulation to use Lantern/Talia sets as well as Cavalry on Harmony MC teams","Balance: Seele E1 CR buff is now disabled by default","Balance: March 8th now uses S5 Cruising in the Stellar Sea for scoring"]},{title:"",date:"2024-06-18",content:["Added 2.4 characters and light cones","beta.webp","Changed DPS Score Improvements -> Damage improvements and updated the percentage to use damage","damageImprovements.webp","Added relic counter on the relics tab grid","relicCount.webp","The sorted optimizer column is now highlighted","highlightColumn.webp","Moved enemy options to an Enemy configurations menu under Advanced options","advancedOptions.webp","Added Effect RES as a customizable enemy option for DoT calcs","enemyConfigurations.webp","Added options to toggle seeing all / custom characters on the potential graph","customCharacters.webp","Expanded the Extra combat stats menu with more buff options","combatBuffs.webp","Added a new Boost main stat option to select the desired main stat upgrade level","optimizerOptions.webp","Added character icons to various places","Character cards now zoom out properly for the smaller sim scoring portrait","Fix: Herta's technique now disabled by default","Fix: Manually editing verified relics will now remove their verified status","Fix: Elemental damage now shows correctly on the character card","Fix: Corrected display bug on relics tab potential upgrades suggesting invalid stats","Fix: Ruan Mei's E2 is now correctly calculated for Firefly","Fix: Harmony Trailblazer is now imported correctly from the scanners","Balance: Increased DoT scoring for Luka / Sampo","Balance: Adding Break Effect and Cavalry set as valid BiS scoring options when HMC is on the simulation team","Balance: Adjusted multiple support characters main stats to be more flexible","Balance: Firefly's scoring stats have been adjusted","Balance: Firefly's default sim now uses Cavalry / Lantern sets"]},{title:"",date:"2024-06-06",content:["Improved relic edit menu UI, with automatic substat upgrade calculations","relicModal.webp","DPS Score upgrades section now shows the score improvement of switching main stats, and switching to BiS relic set","scoreUpgrades.webp","Adding option to switch between scoring types","switchScoring.webp","Added a settings menu for combat sim options","scoringSettings.webp","Added new Edit character button to the Characters tab for changing eidolons / lcs","editCharacter.webp","Added new Sim Damage stat for showing the simulated combo damage used for scoring","simDamage.webp","Added new version of the substat weight filter, to filter relics by minimum weighted rolls per gear slot","substatWeight.webp","Changed the scoring grade scale to balance DPS score changes","newGrades.webp","Updated build analysis section with more details about the benchmark builds","buildAnalysis.webp","Added HoyoLab import to the scanner options","importer.webp","Various other DPS score balance changes, detailed out in the methodology section. New benchmark ruleset measures against 0% / 100% / 200% builds","Fix: Sets were not activating correctly in some cases for Aventurine","Fix: Jade now correctly applies Ashblazing set buffs","Fix: Boothill's Standoff conditional now correctly applies as a vulnerability instead of DMG increase","Fix: Sleep Like the Dead's Crit Rate buff is now deactivated by default","Fix: Cruising in the Stellar Sea's Crit Rate buff is now deactivated by default","Fix: Adjusted Firefly and Boothill scoring main stats","Fix: Ruan Mei scoring can now use all main stats for body / sphere"]},{title:"",date:"2024-05-22",content:["Updated with new character card layout","Added damage simulation based character scoring","newScore.webp","Add custom teammates display","customTeam.webp","Added a substat upgrade calculation for damage scoring","scoreUpgrades.webp","More details about the simulation scoring can be found below the character card","scoreSummary.webp","Added EHR considerations for DoT damage calculation, assumes 20% enemy RES","Adding customizable Rotation Combo damage formula","comboMenu.webp","The combo results can be filtered and sorted in the optimizer","comboGrid.webp","Added responsive handling to optimizer permutations sidebar, which now collapses into a footer for smaller screens","footer.webp","Moved Combat Buffs menu into a drawer","combatBuffs.webp","Added a +3 enhance button to the Relic Edit modal for easy enhancing","plusThree.webp","Added bar search to damage sim selectors","Raised Robin’s ATK cap to 8000","Raised Robin’s ATK default to 5000","Reliquary version bumped to 0.1.6","Character / light cone images are now blurred while loading","Updated with beta 5.3v3 changes","Fix: Fixed Firefly Break Effect conversion interaction with ratio converted ATK buffs (Robin/Lynx)","Fix: Ruan Mei’s default sort is now Break Effect","Fix: Robin’s default sort is now ATK","Fix: Prevent Ult DMG buffs from applying to Robin’s ult (Salsotto)","Fix: Removed Jade skill damage","Fix: Sparkle now correctly applies her skill CD","Fix: Custom character weights are now applied to the optimizer page","Fix: Allow all main stats for Harmony MC on body and sphere","Fix: Super break override now applies correctly to HMC","Fix: Prevent teammate sync from adding messenger set to calculations","Fix: Various relics tab potential optimality bugs have been fixed","Fix: Characters with not enough desired stats now score correctly on relics tab","Fix: Renamed Base stats to Basic stats"]},{title:"",date:"2024-05-07",content:['Added a new "Character custom stats simulation" feature',"This allows for simulating and comparing multiple character builds with custom main stats / teammates / sets / substats without having to edit relics","The substat rolls view calculates builds based on the number of max rolls in each substat","Optimizer builds can be imported as substat roll simulations","rollSim.webp","The substat totals view simulates the sum of the substat values","totalsSim.webp","Jade and Firefly have been added with damage calculations, and to the Relic Scorer experiment options","jade.webp","Custom character portraits can now be saved from the Relic Scorer","scorer.webp","Updated Harmony Trailblazer with Super Break DMG calculations","When the Super Break conditional is enabled, each ability's toughness DMG will be used to calculate Super Break DMG, which is added to the respective ability's damage column","superBreak.webp","Added new 2.3 relic sets","relics.webp","Added new 2.3 ornament sets","ornaments.webp","Reliquary Archiver is now the recommended scanner","Note: It may have a few hours of downtime following new ingame patches","import.webp","New updates will now show a notification linking to the changelog","update.webp","Added a new settings panel","The first setting is toggle the behavior when equipping relics with another owner, which now defaults to replacing without swapping","settings.webp","Using the Recommended Presets button now takes into account custom scoring overrides","Newly added characters will have their recommended presets applied by default","Harmony Trailblazer's default teammate Break Effect conditional is now 200%, and the cap is increased to 400%","The Genius set's conditional effects are now only active by default on Quantum characters, and disabled by default otherwise","Fix: Tingyun SPD buff is now disabled by default due to having inconsistent uptime","Fix: Himeko's SPD buff is now disabled by default due to having inconsistent uptime","Fix: Qingque's SPD buff is now disabled by default due to having inconsistent uptime","Fix: Sparkle's self-skill buff is now disabled on herself by default","Fix: Bronya's battle-start buffs are now disabled by default","Fix: Asta's skill now correctly calculates the sum of the bounces for damage instead of an individual hit","Fix: Remove ATK% rope from Robin's presets","Fix: Main stat free rolls are now applied correctly to non-full-weight main stats. This results in a minor score buff for certain main stats","Fix: Various visual overflow issues on small screens"]},{title:"",date:"2024-04-18",content:["Launched a new leak-free version of the optimizer which has no leaks and only contains officially released content","https://starrailoptimizer.github.io","noLeaks.webp","Added a one-click-optimize button to the Relic Scorer page, accessed by clicking the graph icon or the Optimize Character Stats button","This automatically imports the scored profile relics, adds the character and light cone, applies recommended filters and conditionals, and starts an optimizer search","This is meant to be an easy way for new users to get started using the optimizer","oneClick.webp","Updated the Get Started tab with up to date instructions and a step-by-step guide to using the optimizer for the first time","getStarted.webp","Added new Average potential view as an option alongside Max potential on Relics tab","potentialUpdates.webp","Relic potential ratings menu now has a Custom characters view enabled by default, where only a subset of characters are considered for the potential calculations","relicRatings.webp","All characters are included initially, then specific characters can be selected to excluded from the relic potential view","customCharacters.webp","Clicking empty relic slots now brings up the Add New Relic menu","clickEmpty.webp","Added icons to sidebar menu tabs","Added a button to hide the menu sidebar for easier viewing on smaller screens","hideSidebar.webp","Updated the Recommended Presets speed breakpoints to 1000ths precision","breakpoints.webp","Ambiguous speed values near specific breakpoints (such as 133.333..) are now displayed to 1000ths precision for checking if the breakpoint is met","spdValues.webp","Added a Reset All Characters button to the scoring algorithm menu","resetAll.webp","Rephrased pioneer conditional to specify between basic and combat stat buffs","The last optimized character will now be open by default on the next session","The Simulate Relics On Another Character menu is now open by default on the Relic Scorer tab","Updated Boothill damage calcs","Updated Robin damage calcs","Fix: Herta now correctly defaults to FUA sort","Fix: Removed leftover unused character level selectors, all characters now default to level 80","Fix: Black Swan E1 now correctly only applies res shred on DOT elements","Fix: Scores for saved builds will now update with scoring changes","Fix: Creating new relics with an owner now equips the relic"]},{title:"",date:"2024-04-04",content:["Added Break DMG calculations for all characters and a sortable BREAK column in the optimizer grid","breakDmg.webp","Updated Boothill's Enhanced basic attack calculation to include his Talent's additional break damage",`Updated Boothill's conditional toggle to be "Talent break DMG (forces weakness break)" which overrides the weakness break option when enabled`,"Updated Boothill's default sort option to Basic DMG","boothill.webp","Updated Boothill's scoring algorithm to prioritize SPD and Break Effect","boothillScore.webp","Added a display for the artist's name on custom character portraits","artist.webp","The artist name can be updated along with the image on the crop menu","Enabled gif uploads for custom character portraits","artistInput.webp","Updated Reliquary Archiver import for 2.1 patch, which imports accurate speed decimals for the entire inventory","archiver.webp",'Added new character action menu entry to "Sort by score" which rearranges the character priority by their character scores',"sortByScore.webp","Updated conditional set effects for Pioneer Diver of Dead Waters set with a 0x debuffs option which disables the 2p effect","pioneer.webp","Removed the Enemy HP% selector from the enemy options panel, and replaced it with Enemy Toughness, which affects the Break DMG calculations in the optimizer","tough.webp","Since the Enemy HP% selector was removed, updated character conditionals that depended on it to have their own toggle","Dan Heng now has an enemy HP% threshold toggle","Himeko now has an enemy HP% threshold toggle","Herta now has an enemy HP% threshold toggle","Argenti now has an enemy HP% threshold toggle","Reduced the filesize of assets for faster image loading","Optimizer search speed improvements for unfiltered searches","Added warning popup for optimizer searches with mismatching character and light cone paths",`Ruan Mei's teammate buff renamed to "Overtone buff" and now also applies her weakness break efficiency buff`,"Gallagher's Besotted buff added with Break DMG vulnerability","Fix: Argenti A6 trace now correctly applies to all his abilities instead of just ult DMG","Fix: Updated tooltips for 2.1 light cones","Fix: Updated Along the Passing Shore light cone's passive effect to Mirage Fizzle","Fix: Planetary Rendezvous now shows correctly on the teammate buffs panel","Fix: Bug with unselectable main stats being available in the Edit Relic view in certain cases","Fix: Stat filters are now saved to 1000ths precision"]},{title:"",date:"2024-03-26",content:['Added custom character portrait images, through the "Edit portrait" menu button on the character preview/relic scorer',"sparkle.webp","Portrait images can be selected by url or uploaded from file","crop.webp","Added substat roll count indicators to relics, showing the number of additional rolls per stat","rollQuality.webp","Added new relic rating tools to the Relics tab: for evaluating relic potential for the selected character or all characters","When selecting a character on the Relics grid, all selected relics will show their score according to the selected character's weights","relicsGrid.webp","Added new Relic Insights: Buckets graphs to display the potential of a relic and which characters are the best fit for the stats","relicBuckets.webp","The Relic Insights: Top 10 view shows the min/max range of potential for the top 10 best fit characters","relicTop10.webp","Added new 2.1 sets: Sigonia, the Unclaimed Desolation & Izumo Gensei and Takama Divine Realm","21sets.webp","Added new importer option for the Reliquary Archiver (beta) which can import accurate speed decimals for the entire inventory","importer.webp","Added new Optimization Target options to the optimizer page.","optimimationTarget.webp","This removes the 2 million results hard cap from before.","resultsLimit.webp","Choose the desired optimization goal for damage/stats/rating, and select a results limit, to find the top search results sorted by the target","sortBy.webp","Stat decimals are now shown to 1000ths precision on the Character preview when hovered","spdHover.webp","Added new Character action to switch relics with another character","switchRelics.webp","Added new 2.2 characters: Robin / Boothill / Harmony Trailblazer","Added new 2.2 light cones: Boundless Choreo / For Tomorrow's Journey / Flowing Nightglow / Sailing Towards A Second Life","22chars.webp","Adjusted character optimal main stats, allowing more lenient options such as ATK% spheres for DPS and any sphere stats for Bronya/Sparkle","Removed level selectors on Optimizer tab - all optimizations now assume level 80 character and light cone","Made the sidebar menu always stay on screen when scrolling","Fix: Relic imports from scanning newly rolled relics before logout no longer causes duplicate relics","Fix: Download screenshot button on mobile devices and Safari browsers now generates the image correctly","Fix: Pela E2 skill conditional SPD buff is now off by default","Fix: Bronya technique conditional ATK buff is now off by default","Fix: Silver Wolf skill conditional weakness implanted RES shred is now off by default","Fix: Sparkle talent conditional Quantum allies ATK buff now only applies to Quantum elemental main characters","Fix: Acheron trace Stygian Resurge now has its own slider instead of assuming all hits on target","Fix: Seele E1 conditional CR buff now has its own toggle instead of being linked to the enemy HP selector"]},{title:"",date:"2024-03-12",content:["Added a new visual character selector menu with search and filters","charSelect.webp","Light cone selectors are also updated and now default to the selected character's path","lcSelect.webp","Added a new menu that automatically shows suggestions to fix common misconfigurations in setting up optimizer searches that result in 0 permutations","zeroPerm.webp","Presets speed breakpoints are now defined to 100ths precision","presets.webp","Added def values to enemy level selector","enemyDef.webp","Updated calculations with the latest beta character abilities","Reorganized some stat orderings for consistency",`Fix: Light cone "Today is Another Peaceful Day" now defaults to the character's max energy`,"Fix: E2/E5 eidolon calculations for some characters","Fix: EHP filter works again","Fix: Linking to #scorer and other pages works again","Fix: Permutations now refresh when navigating to Optimizer tab","Fix: Alerts can now be closed when clicking on them"]},{title:"",date:"2024-02-28",content:["Enabled up/down arrow key navigation for grids","Updated the selected row overlay to be more visible","gridRow.webp","Added new priority and exclusion selectors in optimizer options","Priority can now be changed from the optimizer tab now instead of dragging. Exclude will additionally filter out specific characters relics","priorityExclude.webp","Added a notice to update when the scanner version is out of date","outOfDate.webp","Relic scorer Simulate button has been move to a sidebar, and now has preset characters for current/upcoming banners","simulate.webp","Added a sortable CV column for crit value to the Relics tab","cvColumn.webp",'Added a "Move to top" action button to the Characters tab',"moveToTop.webp","Started adding more icons to selectors for readability, more to come","icons.webp","Removed CV column & filter from optimizer tab - damage calculations are a better option to sort by now",'Stats display is set to "Combat Stats" by default now, also the setting now saves correctly per character',"Changed relic scorer API in preparation for upcoming leaderboards update"]},{title:"",date:"2024-02-20",content:["Added: Acheron / Aventurine / Gallagher","newChars.webp",'Added: "Simulate relics on another character" button on the Relic scorer.',"Now the profile characters' builds can be simulated as unowned or unreleased characters & light cones to preview their gear with accurate base stats","simulate.webp","Added: Teammates menu for the optimizer. This automatically adds the teammate's character passives/eidolons/light cone/relic sets to the calculations for more accurate results","teammates.webp","Added: Character builds can now be saved as loadouts, keeping a history of saved builds that can be easily swapped between","savedBuilds.webp","Added: Changelog page to track new optimizer changes","changelog.webp","Moved stat display to the sidebar for easier access","statDisplay.webp",'Clicking "Start optimizing" now scrolls the page down to the results grid',"Deprecated the Fribbels scanner option in favor of the Kel-Z scanner","Energy Regeneration Rate column can be filtered on now","Imports now work with scanner files that only contain characters/light cones without relics","Minor scoring changes for: Sushang, Luka, Physical Trailblazer, Blade, Silver Wolf, Kafka, and Preservation characters"]},{title:"",date:"2024-02-05",content:["Added 'Recommended Presets' button to fill out the optimizer with some suggested values","presets.webp","Added the new Pioneer & Watchmaker relic sets","newSets.webp","Added support for 8 relic scorer slots","scorer8Characters.webp","All character and light cone passives now have descriptions on hover","skillDescriptions.webp","Reorganized Character tab buttons with new Add / Edit character actions","characterActions.webp","Added a Screenshot button for copying the character preview to clipboard / downloads","screenshot.webp","Added a progress bar for the search","progress.webp","Updated damage calcs with all 2.0 light cones","Relic set filters now have a 2 piece + Any option","Improved optimizer search performance, should run 3-6x faster now"]},{title:"",date:"2024-01-22",content:["Black Swan / Sparkle / Misha added with dmg calcs and their signature light cones","newChars.webp","New 'Use equipped relics' optimizer filter toggle","useEquipped.webp","Optimizer grid now shows speed decimals","spd.webp","QOLs for relic editing for autofilled main stats","Double clicking on the characters list now will navigate to the optimizer"]},{title:"",date:"2024-01-13",content:["Big update to the relics tab, including filters and a relic recommendation tool","The recommendation tool scores each relic by its potential at +15 to help with picking which unenhanced relics to roll while building characters","relicsTab.webp","Also updated the Relic Scorer with an import option - now you can import relics directly from your ingame profile characters, with accurate speed values","import.webp"]},{title:"",date:"2024-01-06",content:["Accurate damage calculations for every character, and new optimization columns for average Basic / Skill / Ult / Follow-up / DoT damage","calcs.webp","Character abilities + Light cone passive selectors to customize the damage simulation","passives.webp","Relic set effects menu for customizing which sets to activate","setEffects.webp","New filtering tools including the substat weight filter to reduce permutations & improve search time","weightFilter.webp","Enemy count / DEF / RES / HP / and weakness selectors for optimizing specific combat scenarios","enemyOptions.webp","Integrated with the Kel-Z HSR Scanner for faster & more accurate scans","importer.webp","Expanded combat buffs options for adding more team effects like SPD / DMG% / DEF & RES shred / etc","Relic stat editor and better handling for hidden decimals","New character importer option - Import all your character builds and light cones directly from the game"]}];return e.map(t=>t.content=t.content.filter(n=>n.length>0)),e}const{Text:bR}=Ce;var Tt=(e=>(e[e.CHARACTER_TAB=0]="CHARACTER_TAB",e[e.SHOWCASE_TAB=1]="SHOWCASE_TAB",e[e.BUILDS_MODAL=2]="BUILDS_MODAL",e))(Tt||{});function DR(){const e=navigator.userAgent,t=/Android|iPhone|iPad|iPod|Opera Mini|IEMobile|WPDesktop|BlackBerry/i.test(e),n=/^((?!chrome|android).)*safari/i.test(e);return t||n}const Hi=DR()?"rgb(0, 0, 0) 1px 0px 6px":"rgb(0, 0, 0) 1px 1px 6px",ju=", inset rgb(255 255 255 / 30%) 0px 0px 2px",qc="rgba(255, 255, 255, 0.20) solid 1px",wi="rgba(255, 255, 255, 0.40) solid 1px",Kr="blur(3px)",ar={flex:"auto",opacity:0,transition:"opacity 0.3s ease",visibility:"hidden"};function e0(e){const t=e.top;return i.jsx(g,{vertical:!0,style:{position:"relative",height:0,top:t},align:"center",children:i.jsx(bR,{style:{position:"absolute",backgroundColor:"rgba(0, 0, 0, 0.85)",padding:"2px 14px",borderRadius:4,fontSize:12,whiteSpace:"nowrap",textShadow:"0px 0px 10px black",outline:wi,lineHeight:"12px"},children:e.text})})}function RR(e){return e==b.PlanarSphere||e==b.LinkRope}function ER(e){return e==b.Head||e==b.Hands||e==b.Body||e==b.Feet}const Al={onEditOk:(e,t)=>{t.id=e.id;const n={...e,...t};return window.rescoreSingleRelic(n),B.setRelic(n),window.setRelicRows(B.getRelics()),console.log("onEditOk",n),J.success(w.t("modals:Relic.Messages.EditSuccess")),setTimeout(()=>{Ee.delayedSave(),window.forceCharacterTabUpdate(),se.updateFilters()},200),n}};function ks(e){return isNaN(parseFloat(e))}function CR(e){if(console.log("Form finished",e),!e.part)return J.error(w.t("modals:Relic.Messages.Error.PartMissing"));if(!e.mainStatType)return J.error(w.t("modals:Relic.Messages.Error.MainstatMissing"));if(!e.mainStatValue)return J.error(w.t("modals:Relic.Messages.Error.MainstatMissing"));if(!e.set)return J.error(w.t("modals:Relic.Messages.Error.SetMissing"));if(e.enhance==null)return J.error(w.t("modals:Relic.Messages.Error.EnhanceMissing"));if(e.grade==null)return J.error(w.t("modals:Relic.Messages.Error.GradeMissing"));if(e.grade>5||e.grade<2)return J.error(w.t("modals:Relic.Messages.Error.GradeInvalid"));if(e.enhance>15||e.enhance<0)return J.error(w.t("modals:Relic.Messages.Error.EnhanceInvalid"));if(e.enhance>e.grade*3)return J.error(w.t("modals:Relic.Messages.Error.EnhanceTooHigh"));if(!hn(Ja,e.set)&&!hn(Qa,e.set))return J.error(w.t("modals:Relic.Messages.Error.SetInvalid"));if(hn(Ja,e.set)&&RR(e.part))return J.error(w.t("modals:Relic.Messages.Error.SetNotOrnament"));if(hn(Qa,e.set)&&ER(e.part))return J.error(w.t("modals:Relic.Messages.Error.SetNotRelic"));if(e.substatType0!=null&&ks(e.substatValue0)||e.substatType0==null&&e.substatValue0!=null)return J.error(w.t("modals:Relic.Messages.Error.SubNInvalid",{number:1}));if(e.substatType1!=null&&ks(e.substatValue1)||e.substatType1==null&&e.substatValue1!=null)return J.error(w.t("modals:Relic.Messages.Error.SubNInvalid",{number:2}));if(e.substatType2!=null&&ks(e.substatValue2)||e.substatType2==null&&e.substatValue2!=null)return J.error(w.t("modals:Relic.Messages.Error.SubNInvalid",{number:3}));if(e.substatType3!=null&&ks(e.substatValue3)||e.substatType3==null&&e.substatValue3!=null)return J.error(w.t("modals:Relic.Messages.Error.SubNInvalid",{number:4}));if(e.substatType3!=null&&(e.substatType0==null||e.substatType1==null||e.substatType2==null))return J.error(w.t("modals:Relic.Messages.Error.SubsOutOfOrder"));if(e.substatType2!=null&&(e.substatType0==null||e.substatType1==null))return J.error(w.t("modals:Relic.Messages.Error.SubsOutOfOrder"));if(e.substatType1!=null&&e.substatType0==null)return J.error(w.t("modals:Relic.Messages.Error.SubsOutOfOrder"));const t=[e.substatType0,e.substatType1,e.substatType2,e.substatType3].filter(d=>d!=null);if(new Set(t).size!==t.length)return J.error(w.t("modals:Relic.Messages.Error.DuplicateSubs"));if(t.includes(e.mainStatType))return J.error(w.t("modals:Relic.Messages.Error.MainAsSub"));const n=parseFloat(e.substatValue0),o=parseFloat(e.substatValue1),s=parseFloat(e.substatValue2),r=parseFloat(e.substatValue3);if(n>=1e3||o>=1e3||s>=1e3||r>=1e3)return J.error(w.t("modals:Relic.Messages.Error.SubTooBig"));if(e.mainStatValue>=1e3)return J.error(w.t("modals:Relic.Messages.Error.MainTooBig"));if(n<=0||o<=0||s<=0||r<=0)return J.error(w.t("modals:Relic.Messages.Error.SubTooSmall"));if(e.mainStatValue<=0)return J.error(w.t("modals:Relic.Messages.Error.MainTooSmall"));const l={equippedBy:e.equippedBy=="None"?void 0:e.equippedBy,enhance:e.enhance,grade:e.grade,part:e.part,set:e.set,main:{stat:e.mainStatType,value:e.mainStatValue}},c=[];return e.substatType0!=null&&e.substatValue0!=null&&c.push({stat:e.substatType0,value:n}),e.substatType1!=null&&e.substatValue1!=null&&c.push({stat:e.substatType1,value:o}),e.substatType2!=null&&e.substatValue2!=null&&c.push({stat:e.substatType2,value:s}),e.substatType3!=null&&e.substatValue3!=null&&c.push({stat:e.substatType3,value:r}),l.substats=c,Xn.augment(l),l}function TR(e){const t=[{stat:e.substatType0,value:e.substatValue0},{stat:e.substatType1,value:e.substatValue1},{stat:e.substatType2,value:e.substatValue2},{stat:e.substatType3,value:e.substatValue3}],n=[];for(let{stat:o,value:s}of t)if(o!=null&&s!=null){if(s=="")s="0";else if(isNaN(parseFloat(s))){n.push({low:void 0,mid:void 0,high:void 0});continue}if(o==a.SPD){const d=parseFloat(s)+(e.grade==5?2:1);n.push({low:Math.floor(d),mid:void 0,high:Math.floor(d+1)});continue}const r=F.truncate10ths(F.precisionRound(parseFloat(s))),l=Fi.fixSubStatValue(o,r,5),c=F.clone(Re[o][e.grade]);F.isFlat(o)?(c.low=nr(l+c.low),c.mid=nr(l+c.mid),c.high=nr(l+c.high)):(c.low=ir(l+c.low),c.mid=ir(l+c.mid),c.high=ir(l+c.high)),n.push(c)}else n.push({low:void 0,mid:void 0,high:void 0});return n}function nr(e){return Math.floor(C.precisionRound(e))}function ir(e){return parseFloat(F.truncate10ths(C.precisionRound(e)).toFixed(1))}const t0=["F","F","F","F+","D","D+","C","C+","B","B+","A","A+","S","S+","SS","SS+","SSS","SSS+","WTF","WTF+"],sr={HP:.4,ATK:.4,DEF:.4},Ca=.582,Ll=5.1,nn={[m.Stats.HP_P]:64.8/43.2,[m.Stats.ATK_P]:64.8/43.2,[m.Stats.DEF_P]:64.8/54,[m.Stats.HP]:64.8/43.2*Re[m.Stats.HP_P][5].high/Re[m.Stats.HP][5].high,[m.Stats.ATK]:64.8/43.2*Re[m.Stats.ATK_P][5].high/Re[m.Stats.ATK][5].high,[m.Stats.DEF]:64.8/54*Re[m.Stats.DEF_P][5].high/Re[m.Stats.DEF][5].high,[m.Stats.CR]:64.8/32.4,[m.Stats.CD]:64.8/64.8,[m.Stats.OHB]:64.8/34.5606,[m.Stats.EHR]:64.8/43.2,[m.Stats.RES]:64.8/43.2,[m.Stats.SPD]:64.8/25.032,[m.Stats.BE]:64.8/64.8},or=[a.Physical_DMG,a.Fire_DMG,a.Ice_DMG,a.Lightning_DMG,a.Wind_DMG,a.Quantum_DMG,a.Imaginary_DMG],Ks=new Set(m.SubStats);class dt{constructor(){Ue(this,"characterRelicScoreMetas");Ue(this,"optimalPartScore");Ue(this,"currentRelicScore");Ue(this,"futureRelicScore");this.characterRelicScoreMetas=new Map,this.optimalPartScore=new Map,this.currentRelicScore=new Map,this.futureRelicScore=new Map}static scoreFutureRelic(t,n,o=!1){return new dt().getFutureRelicScore(t,n,o)}static scoreCurrentRelic(t,n){return new dt().getCurrentRelicScore(t,n)}static scoreCharacterWithRelics(t,n){return new dt().scoreCharacterWithRelics(t,n)}static scoreCharacter(t){return new dt().scoreCharacter(t)}static scoreRelicPotential(t,n,o=!1){return new dt().scoreRelicPotential(t,n,o)}getRelicScoreMeta(t){let n=this.characterRelicScoreMetas.get(t);if(n)return n;n=F.clone(B.getScoringMetadata(t));const o=B.getMetadata().characters[t].scoringMetadata;n.category=KD(o,{stats:n.stats}),n.stats[m.Stats.HP]=n.stats[m.Stats.HP_P]*sr.HP,n.stats[m.Stats.ATK]=n.stats[m.Stats.ATK_P]*sr.ATK,n.stats[m.Stats.DEF]=n.stats[m.Stats.DEF_P]*sr.DEF,n.sortedSubstats=Object.entries(n.stats).filter(l=>Ks.has(l[0])).sort((l,c)=>c[1]*nn[c[0]]*Re[c[0]][5].high-l[1]*nn[l[0]]*Re[l[0]][5].high),n.groupedSubstats=new Map;for(const[l,c]of n.sortedSubstats)n.groupedSubstats.has(c)||n.groupedSubstats.set(c,[]),n.groupedSubstats.get(c).push(l);for(const l of n.groupedSubstats.values())l.sort();let s=0;Object.entries(n.stats).forEach(([l,c])=>{or.includes(l)&&c&&s++});let r=0;if(n.parts.PlanarSphere.forEach(l=>{or.includes(l)&&r++}),s<2&&r<2){const l=[n.parts.Head,n.parts.Hands,n.parts.Body,n.parts.Feet,n.parts.PlanarSphere.filter(c=>!or.includes(c)),n.parts.LinkRope];n.greedyHash=C.objectHash({sortedSubstats:n.sortedSubstats,parts:l}),n.hash=C.objectHash({...n.stats,...n.parts})}else n.greedyHash=C.objectHash({stats:n.stats,parts:n.parts}),n.hash=n.greedyHash;return this.characterRelicScoreMetas.set(t,n),n}getOptimalPartScore(t,n,o){var l,c;const s=this.getRelicScoreMeta(o).greedyHash;let r=(c=(l=this.optimalPartScore.get(t))==null?void 0:l.get(s))==null?void 0:c.get(n);return r||(r=this.scoreOptimalRelic(t,n,o),this.optimalPartScore.has(t)||this.optimalPartScore.set(t,new Map),this.optimalPartScore.get(t).has(s)||this.optimalPartScore.get(t).set(s,new Map),this.optimalPartScore.get(t).get(s).set(n,r)),r}getFutureRelicScore(t,n,o=!1){var l;const s=this.getRelicScoreMeta(n).hash;let r=(l=this.futureRelicScore.get(t.id))==null?void 0:l.get(s);return r||(r=this.scoreFutureRelic(t,n,o),this.futureRelicScore.has(t.id)||this.futureRelicScore.set(t.id,new Map),this.futureRelicScore.get(t.id).set(s,r)),r}getCurrentRelicScore(t,n){var r;if(!t)return{score:"0",rating:"",mainStatScore:0};const o=this.getRelicScoreMeta(n).hash;let s=(r=this.currentRelicScore.get(t.id))==null?void 0:r.get(o);return s||(s=this.scoreCurrentRelic(t,n),this.currentRelicScore.has(t.id)||this.currentRelicScore.set(t.id,new Map),this.currentRelicScore.get(t.id).set(o,s)),s}substatScore(t,n){const o=this.getRelicScoreMeta(n);if(!o||!n||!t)return console.warn("substatScore() called but missing 1 or more arguments. relic:",t,"meta:",o,"id:",n),{score:0,mainStatScore:0,scoringMetadata:o,part:t==null?void 0:t.part};const s=o.stats;let r=0;for(const c of t.substats)r+=c.value*(s[c.stat]||0)*nn[c.stat];const l=((c,d,u,h)=>{if(u==b.Head||u==b.Hands)return 0;let p;switch(d){case 2:p=12.8562;break;case 3:p=25.8165;break;case 4:p=43.1304;break;default:p=64.8}return p*(h[u].includes(c)?1:s[c])})(t.main.stat,t.grade,t.part,o.parts);return{score:r,mainStatScore:l,part:t.part,scoringMetadata:o}}scoreOptimalRelic(t,n,o){let s=0,r;const l=this.getRelicScoreMeta(o),c=PR(l);switch(c){case 5:s=1/0;break;case 1:case 2:case 3:{let d=[];const u=l.sortedSubstats[0][0],h=l.sortedSubstats[1][0];t==m.Parts.Head&&c==1||t==m.Parts.Hands&&c==2?d=xn(5,{stat:u,value:Re[u][5].high*6}):d=xn(5,{stat:u,value:Re[u][5].high*6},{stat:h,value:Re[h][5].high}),r=di(5,15,t,m.Stats.HP_P,d),s=this.substatScore(r,o).score}break;case 0:{const d=l.sortedSubstats[0][0],u=xn(5,{stat:d,value:Re[d][5].high*6});s=this.substatScore(di(5,15,t,m.Stats.HP_P,u),o).score}break;case 4:{let d="";const u=l.parts[t]||[];if(u.includes(n)||l.stats[n]==1||!F.hasMainStat(t))d=n;else{const D=Object.entries(l.stats).map(G=>u.includes(G[0])||l.stats[G[0]]==1?[G[0],1]:[G[0],G[1]]).sort((G,M)=>{const H=Ks.has(G[0])?G[1]*nn[G[0]]*Re[G[0]][5].high:G[1]*6.48;return(Ks.has(M[0])?M[1]*nn[M[0]]*Re[M[0]][5].high:M[1]*6.48)-H}),E=al[t],y=D.findIndex(([G,M])=>E.includes(G)),P=D[y][1];d=D[y][0];let _=!1,x=!0;for(let G=y;G<D.length;G++){const[M,H]=D[G];if(H!=P)break;if(!E.includes(M))continue;const Z=u.includes(M),X=Ks.has(M);_&&!Z||!x&&X||_===Z&&x==X||(d=M,_=Z,x=X)}}const p=l.sortedSubstats.filter(([D,E])=>D!==d).slice(0,4),S=xn(5,{stat:p[0][0],value:Re[p[0][0]][5].high*6},{stat:p[1][0],value:Re[p[1][0]][5].high},{stat:p[2][0],value:Re[p[2][0]][5].high},{stat:p[3][0],value:Re[p[3][0]][5].high});r=di(5,15,t,d,S),s=this.substatScore(r,o).score}break}return s}scoreFutureRelic(t,n,o=!1){if(!n||!t)return console.warn("scoreFutureRelic() called but lacking arguments"),{current:0,best:0,average:0,worst:0,rerollAvg:0,idealScore:1,meta:{bestAddedStats:[""],bestUpgradedStats:[""]},substatScore:{best:0,average:0,worst:0}};const s=this.getRelicScoreMeta(n);if(!s.sortedSubstats[0][0])return{current:0,best:0,average:0,worst:0,rerollAvg:0,idealScore:1,meta:{bestAddedStats:[""],bestUpgradedStats:[""]},substatScore:{best:0,average:0,worst:0}};const r=(()=>{switch(t.grade){case 2:return 12.8562;case 3:return 25.8165;case 4:return 43.1304;case 5:return 64.8}})(),l=F.hasMainStat(t.part)?(MR(t,s)-1)*r:0,c=s.sortedSubstats.filter(W=>W[0]!=t.main.stat&&!t.substats.map(L=>L.stat).includes(W[0])),d=Math.ceil((js(t.grade)-t.enhance)/3)-(4-t.substats.length),u=rr(t.part,t.main.stat,s),h=this.getOptimalPartScore(t.part,t.main.stat,n),p=Math.max(0,(this.substatScore(t,n).score+u)/h*100*Ca+l),S=[{stat:"HP",value:0},{stat:"HP",value:0},{stat:"HP",value:0},{stat:"HP",value:0}];for(let W=0;W<t.substats.length;W++)S[W].stat=t.substats[W].stat,S[W].value=t.substats[W].value;for(let W=t.substats.length;W<4;W++){const L=c[W-t.substats.length][0];S[W].stat=L,S[W].value=Re[L][5].high}const D=IR(S,s);S[D.index].value+=d*Re[D.stat][t.grade].high;let E=di(t.grade,js(t.grade),t.part,t.main.stat,xn(5,S[0],S[1],S[2],S[3]));const y=Math.max(0,(this.substatScore(E,n).score+l)/h*100*Ca+u),P=[{stat:"HP",value:0},{stat:"HP",value:0},{stat:"HP",value:0},{stat:"HP",value:0}];for(let W=0;W<t.substats.length;W++)P[W].stat=t.substats[W].stat,P[W].value=t.substats[W].value+d/4*Re[P[W].stat][t.grade].mid;let _=0;for(const W of c){const[L,A]=W;_+=Re[L][t.grade].mid*A*nn[L]}_=_/c.length;for(let W=t.substats.length;W<4;W++)P[W].stat=s.sortedSubstats[0][0],P[W].value=_*(1+d/4)/(nn[s.sortedSubstats[0][0]]*s.sortedSubstats[0][1]);E=di(t.grade,js(t.grade),t.part,t.main.stat,xn(5,P[0],P[1],P[2],P[3]));const x=Math.max(0,(this.substatScore(E,n).score+l)/h*100*Ca+u);c.reverse();const G=[{stat:"HP",value:0},{stat:"HP",value:0},{stat:"HP",value:0},{stat:"HP",value:0}];for(let W=0;W<t.substats.length;W++)G[W].stat=t.substats[W].stat,G[W].value=t.substats[W].value;for(let W=t.substats.length;W<4;W++){const L=c[W-t.substats.length][0];G[W].stat=L,G[W].value=Re[L][5].high}const M=BR(G,s);G[M.index].value+=Re[M.stat][t.grade].low*d,E=di(t.grade,js(t.grade),t.part,t.main.stat,xn(5,G[0],G[1],G[2],G[3]));const H=Math.max(0,(this.substatScore(E,n).score+l)/h*100*Ca+u);let Z;if(o){const W=[];if(t.substats.length<4)for(const[ee,me]of c)me>=c[c.length-1][1]&&W.push(ee);const L=s.sortedSubstats.filter(ee=>t.main.stat!==ee[0]),A=[],O={...ig(t.substats,"stat"),...sg(W)},j=L.filter(ee=>O[ee[0]]),ie=j[0][1];for(const[ee,me]of j)O[ee]&&me>=ie&&A.push(ee);W.forEach((ee,me)=>W[me]=w.t(`common:Stats.${ee}`)),A.forEach((ee,me)=>A[me]=w.t(`common:Stats.${ee}`)),Z={bestAddedStats:W,bestUpgradedStats:A}}let X=0;if(t.grade>=5&&t.substats.length==4){const W=C.sumArray(t.substats.map(O=>O.addedRolls??0)),L=Math.ceil((15-t.enhance)/3),A=Math.min(W+L,5);for(const O of t.substats){const j=O.stat,ie=Re[j][5].high*s.stats[j]*nn[j];A>=5?X+=ie*2.25:X+=ie*2}X=Math.min(X,h),X=(X+l)/h*100*Ca+u}return{current:p,best:y,average:x,worst:H,rerollAvg:X,meta:Z}}scoreCurrentRelic(t,n){if(!t)return{score:"",scoreNumber:0,rating:"",mainStatScore:0};if(!n)return console.warn("scoreCurrentRelic called but lacking character",t),{score:"",scoreNumber:0,rating:"",mainStatScore:0};const o=this.getRelicScoreMeta(n),s=t.part,r=rr(t.part,t.main.stat,o),l=this.substatScore(t,n),c=this.getOptimalPartScore(s,t.main.stat,n),d=l.score/c*100*Ca+r,u=a0(d,l,t),h=l.mainStatScore;return{score:d.toFixed(1),scoreNumber:d,rating:u,mainStatScore:h,part:s,meta:o}}scoreCharacterWithRelics(t,n){if(!(t!=null&&t.id))return console.warn("scoreCharacterWithRelics called but no character given"),{relics:[],totalScore:0,totalRating:"?"};const o=n.map(c=>this.getCurrentRelicScore(c,t.id));let s=0;for(const c of o)s+=Number(c.score)+Number(c.mainStatScore);const r=3-yR(n.filter(c=>c!=null).map(c=>c.set));s=Math.max(0,s-r*3*Ll);const l=o.length<6?"?":a0((s-4*64.8)/6);return{relics:o,totalScore:s,totalRating:l}}scoreCharacter(t){if(!t)return{};const n=window.store.getState().relicsById,o=Object.values(t.equipped).map(s=>n[s??""]);return this.scoreCharacterWithRelics(t,o)}scoreRelicPotential(t,n,o=!1){const s=this.getRelicScoreMeta(n),r=rr(t.part,t.main.stat,s),l=this.getFutureRelicScore(t,n,o);return{currentPct:Math.max(0,l.current-r)/Ca,bestPct:Math.max(0,l.best-r)/Ca,averagePct:Math.max(0,l.average-r)/Ca,worstPct:Math.max(0,l.worst-r)/Ca,rerollAvgPct:Math.max(0,l.rerollAvg-r)/Ca,meta:l.meta}}}function yR(e){let t=0;const n={};return e.forEach(o=>{n[o]?(t+=1,n[o]=0):n[o]=1}),t}function rr(e,t,n){const o=n.stats,s=n.parts;if(e==m.Parts.Body||e==m.Parts.Feet||e==m.Parts.PlanarSphere||e==m.Parts.LinkRope){const r=s[e].includes(t)?1:o[t];return 1*Ll*r}return 0}function di(e,t,n,o,s){return{enhance:t,grade:e,part:n,main:{stat:o,value:Mr[o][e].base+Mr[o][e].increment*t},substats:s}}function xn(e,t,n,o,s){const r=[{stat:t.stat,value:t.value,rolls:{high:Re[t.stat][e].high,mid:Re[t.stat][e].mid,low:Re[t.stat][e].low},addedRolls:0}];return n&&r.push({stat:n.stat,value:n.value,rolls:{high:Re[n.stat][e].high,mid:Re[n.stat][e].mid,low:Re[n.stat][e].low},addedRolls:0}),o&&r.push({stat:o.stat,value:o.value,rolls:{high:Re[o.stat][e].high,mid:Re[o.stat][e].mid,low:Re[o.stat][e].low},addedRolls:0}),s&&r.push({stat:s.stat,value:s.value,rolls:{high:Re[s.stat][e].high,mid:Re[s.stat][e].mid,low:Re[s.stat][e].low},addedRolls:0}),r}function PR(e){const t=e.sortedSubstats;return t[0][1]==0?5:t[1][1]==0?0:t[2][1]>0?4:t[1][0]==a.HP&&t[0][0]==a.HP_P||t[1][0]==a.HP_P&&t[0][0]==a.HP?1:t[1][0]==a.ATK&&t[0][0]==a.ATK_P||t[1][0]==a.ATK_P&&t[0][0]==a.ATK?2:t[1][0]==a.DEF&&t[0][0]==a.DEF_P||t[1][0]==a.DEF_P&&t[0][0]==a.DEF?3:4}function IR(e,t){let n=0,o=0,s="";for(let r=0;r<e.length;r++){const l=t.stats[e[r].stat];(l>o||r==0)&&(o=l,n=r,s=e[r].stat)}return{index:n,weight:o,stat:s}}function BR(e,t){let n=0,o=1,s="";for(let r=0;r<e.length;r++){const l=t.stats[e[r].stat];(l<o||r==0)&&(o=l,n=r,s=e[r].stat)}return{index:n,weight:o,stat:s}}function js(e){switch(e){case 2:return 6;case 3:return 9;case 4:return 12;default:return 15}}function a0(e,t,n){if(n&&n.grade!=5)return"?";const o=Math.min(Math.floor(e/(Ll/2)),t0.length-1);return o<0||GR(t)?"?":t0[o]}function GR(e){return e&&e.part!=b.Hands&&e.part!=b.Head&&C.precisionRound(e.mainStatScore)<=0}function MR(e,t){return F.hasMainStat(e.part)?t.parts[e.part].includes(e.main.stat)?1:t.stats[e.main.stat]:0}function Wu(e,t,n){return{[a.HP_P]:t.freeRolls,[a.ATK_P]:t.freeRolls,[a.DEF_P]:t.freeRolls,[a.HP]:t.freeRolls,[a.ATK]:t.freeRolls,[a.DEF]:t.freeRolls,[a.SPD]:e.speedRollsDeduction,[a.CR]:t.freeRolls,[a.CD]:t.freeRolls,[a.EHR]:t.freeRolls,[a.RES]:t.freeRolls,[a.BE]:t.freeRolls}}function Zu(e,t,n,o,s){var h;const r=e.simulation.request,l={[a.HP_P]:0,[a.ATK_P]:0,[a.DEF_P]:0,[a.HP]:0,[a.ATK]:0,[a.DEF]:0,[a.SPD]:0,[a.CR]:0,[a.CD]:0,[a.EHR]:0,[a.RES]:0,[a.BE]:0};for(const p of t.substats)l[p]=n.maxPerSub;l[r.simBody]-=n.deductionPerMain,l[r.simFeet]-=n.deductionPerMain,l[r.simPlanarSphere]-=n.deductionPerMain,l[r.simLinkRope]-=n.deductionPerMain;for(const p of qt)l[p]=Math.min(l[p],n.substatGoal-10*n.freeRolls-Math.ceil(e.speedRollsDeduction)),l[p]=Math.max(l[p],n.freeRolls),((h=t.maxBonusRolls)==null?void 0:h[p])!=null&&(l[p]=Math.min(l[p],t.maxBonusRolls[p]+n.freeRolls));if(n.limitFlatStats&&(l[a.ATK]=n.freeRolls,l[a.HP]=n.freeRolls,l[a.DEF]=n.freeRolls),l[a.ATK]=Math.min(10,l[a.ATK]),l[a.HP]=Math.min(10,l[a.HP]),l[a.DEF]=Math.min(10,l[a.DEF]),l[a.SPD]=e.speedRollsDeduction,!s.overcapCritRate){const p=yt.getMaxedSubstatValue(a.CR,n.quality),S=Math.max(0,100-o.xa[f.CR]*100);l[a.CR]=Math.max(n.baselineFreeRolls,Math.max(n.enforcePossibleDistribution?6:0,Math.min(r.simBody==a.CR?Math.ceil((S-32.4)/p):Math.ceil(S/p),l[a.CR])))}const c=yt.getMaxedSubstatValue(a.EHR,n.quality),d=Math.max(0,120-o.xa[f.EHR]*100);l[a.EHR]=l[a.EHR]==0?0:Math.max(n.baselineFreeRolls,Math.max(n.enforcePossibleDistribution?6:0,Math.min(r.simBody==a.EHR?Math.ceil((d-43.2)/c):Math.ceil(d/c),l[a.EHR])));const u=Math.ceil(e.speedRollsDeduction)-6;for(const p of qt)p!=a.SPD&&(l[p]=Math.max(n.baselineFreeRolls,Math.min(l[p],36-u)));return l}const va={quality:.8,speedRollValue:2.3,substatGoal:48,freeRolls:2,maxPerSub:30,deductionPerMain:5,baselineFreeRolls:2,limitFlatStats:!0,enforcePossibleDistribution:!1,substatRollsModifier:xR},jr={...va,substatRollsModifier:e=>e},ui={quality:1,speedRollValue:2.6,substatGoal:54,freeRolls:0,maxPerSub:36,deductionPerMain:6,baselineFreeRolls:0,limitFlatStats:!1,enforcePossibleDistribution:!0,substatRollsModifier:e=>e};function xR(e,t,n){const o=Object.values(n).filter(s=>s.augmentedStats.mainStat==t).length;return t==a.SPD?mo(o,e):Nu(o,e)}function Nu(e,t){const n=12-2*e;if(t<=n)return t;const o=Math.max(0,t-n),s=o/Math.pow(o,.25);return n+s}function mo(e,t){const n=12-2*e;if(t<=n)return t;const o=Math.max(0,t-n),s=o/Math.pow(o,.1);return n+s}function vR(e,t,n){let o=0,s=0;for(;o<t;)s++,o=mo(e,s)*n;const r=s-1;if(o===t)return s;let l=r,c=s,d=0;const u=1e-6;for(;c-l>u;)d=(l+c)/2,mo(e,d)*n<t?l=d:c=d;return d}function _R(e){const t=C.clone(e),n={};for(const o of Object.values(b))n[o]=t[o]||{set:-1,substats:[],main:{stat:"NONE",value:0}};return n}function AR(e){return e.request.simFeet==a.SPD}function Vu(e,t){const n=AR(e);return t.substatGoal==48?n?25:26:n?30:36}function zu(e,t){const n=e.result;return t.result.simScore-n.simScore}function LR(e,t,n,o,s,r,l,c,d){const u=t-l.xa[f.SPD],h=[];for(const p of n.parts[b.Feet])for(const S of n.parts[b.PlanarSphere]){const D=C.clone(e);D.request.simPlanarSphere=S,D.request.simFeet=p;const E=p==a.SPD?Math.max(0,C.precisionRound((u-25.032)/ui.speedRollValue)):Math.max(0,C.precisionRound(u/ui.speedRollValue));if(E>36&&p!=a.SPD)continue;const y={simulation:D,finalSpeed:0,speedRollsDeduction:Math.min(E,Vu(D,ui))},P=Wu(y,ui),_=Zu(y,n,ui,l,d);Object.values(qt).map(G=>y.simulation.request.stats[G]=_[G]);const x=Uu(y,P,_,o,s,r,n,ui,d);h.push(x)}return h.sort(zu),h[0]}const lr={};function FR(e,t,n,o){const s=e.form,r=s.characterId,l=s.characterEidolon,c=s.lightCone,d=s.lightConeSuperimposition,u=B.getMetadata().characters[r];if(!(u!=null&&u.scoringMetadata.simulation))return console.log("No scoring sim defined for this character"),null;if(!r||!s)return console.log("Invalid character sim setup"),null;const h=u.scoringMetadata,p=B.getScoringMetadata(r),S=C.clone(h.simulation),D=C.clone(p.simulation),E=p.traces,y=D.deprioritizeBuffs??!1;n==Di&&(S.teammates=D.teammates);const P=_R(t),_=C.objectHash({traces:E,characterId:r,characterEidolon:l,lightCone:c,lightConeSuperimposition:d,relicsByPart:P,metadata:S,customMetadata:D,showcaseTemporaryOptions:o});if(lr[_])return lr[_];const x={addBreakEffect:!1,overcapCritRate:!1,simPoetActive:!1,characterPoetActive:!1,forceBasicSpd:!0,forceBasicSpdValue:0},G=S.substats;S.comboBreak>0&&(x.addBreakEffect=!0),S.teammates.find(re=>re.characterId=="8005"||re.characterId=="8006"||re.characterId=="1225")&&(x.addBreakEffect=!0),x.addBreakEffect&&!G.includes(a.BE)&&G.push(a.BE),x.addBreakEffect&&!S.parts[b.LinkRope].includes(a.BE)&&S.parts[b.LinkRope].push(a.BE),x.addBreakEffect&&!S.relicSets.find(re=>re[0]==re[1]&&re[1]==R.IronCavalryAgainstTheScourge)&&S.relicSets.push([R.IronCavalryAgainstTheScourge,R.IronCavalryAgainstTheScourge]),x.addBreakEffect&&!S.relicSets.find(re=>re[0]==re[1]&&re[1]==R.IronCavalryAgainstTheScourge)&&S.relicSets.push([R.IronCavalryAgainstTheScourge,R.IronCavalryAgainstTheScourge]),x.addBreakEffect&&!S.ornamentSets.find(re=>re==R.TaliaKingdomOfBanditry)&&S.ornamentSets.push(R.TaliaKingdomOfBanditry),x.addBreakEffect&&!S.ornamentSets.find(re=>re==R.ForgeOfTheKalpagniLantern)&&S.ornamentSets.push(R.ForgeOfTheKalpagniLantern),S.teammates.find(re=>re.characterId=="1313"&&re.characterEidolon==6)&&(x.overcapCritRate=!0);const M=OR(S,P);P.Head.set==R.PoetOfMourningCollapse&&P.Hands.set==R.PoetOfMourningCollapse&&P.Body.set==R.PoetOfMourningCollapse&&P.Feet.set==R.PoetOfMourningCollapse&&(x.characterPoetActive=!0),M.relicSet1==R.PoetOfMourningCollapse&&M.relicSet2==R.PoetOfMourningCollapse&&(x.simPoetActive=!0);const H=Pi(r,c,l,d,!1),Z=Pi(S.teammates[0].characterId,S.teammates[0].lightCone,S.teammates[0].characterEidolon,S.teammates[0].lightConeSuperimposition,!0),X=Pi(S.teammates[1].characterId,S.teammates[1].lightCone,S.teammates[1].characterEidolon,S.teammates[1].lightConeSuperimposition,!0),W=Pi(S.teammates[2].characterId,S.teammates[2].lightCone,S.teammates[2].characterEidolon,S.teammates[2].lightConeSuperimposition,!0);H.teammate0=Z,H.teammate1=X,H.teammate2=W,H.deprioritizeBuffs=y;const L=Ki(H),A=(re,at=!0)=>{re&&(re.unpenalizedSimScore=re.xa[f.COMBO_DMG],re.penaltyMultiplier=jR(re,S,va),re.simScore=re.unpenalizedSimScore*(at?re.penaltyMultiplier:1))};let{originalSimResult:O,originalSim:j}=Wr(P,M,H,L,jr,x);const ie=C.precisionRound(O.ca[f.SPD],3),{baselineSimResult:ee,baselineSim:me}=KR(P,H,L,M,va,x);A(ee);const he=o.spdBenchmark!=null?Math.max(ee[a.SPD],o.spdBenchmark):null;x.simPoetActive?ee[a.SPD]<95?x.forceBasicSpdValue=Math.min(ie,94.999,he??94.999):ee[a.SPD]<110&&(x.forceBasicSpdValue=Math.min(ie,109.999,he??109.999)):x.forceBasicSpdValue=Math.min(he??ie,ie);const{originalSimResult:De,originalSim:ae}=Wr(P,M,H,L,jr,x);let Q;x.characterPoetActive?Q=De.xa[f.SPD]:x.simPoetActive?Q=x.forceBasicSpdValue:(O=De,j=ae,Q=O.xa[f.SPD]),A(O);const Oe=kR(e,S,M,j),Ae=[];for(const re of Oe){const Nt=Ha(H,L,[re.simulation],va)[0].xa[f.SPD];re.finalSpeed=Nt;const ti=re.simulation.request.simFeet==a.SPD?1:0,Pn=C.precisionRound(vR(ti,Q-Nt,va.speedRollValue),3);if(re.speedRollsDeduction=Math.min(Math.max(0,Pn),Vu(re.simulation,va)),re.speedRollsDeduction>=26&&re.simulation.request.simFeet!=a.SPD){console.log("Rejected candidate sim with non SPD boots");continue}const ai=Wu(re,va),Fe=Zu(re,S,va,ee,x);Object.values(qt).map(en=>re.simulation.request.stats[en]=Fe[en]);const Dt=Uu(re,ai,Fe,H,L,A,S,va,x);A(Dt.result),Dt.key=JSON.stringify(Dt.request),Dt.name="",re.simulation.request.stats[a.SPD]>26&&re.simulation.request.simFeet!=a.SPD?console.log("Rejected candidate sim"):Ae.push(Dt)}Ae.sort(zu);const Ze=Ae[0],tt=Ze.result,ue=LR(Ze,Q,S,H,L,A,ee,O,x),te=ue.result;A(te);const pe=tt.simScore,ge=O.simScore,Le=ee.simScore,et=te.simScore,vt=ge>=pe?1+(ge-pe)/(et-pe):(ge-Le)/(pe-Le),{substatUpgradeResults:Zt,setUpgradeResults:Da,mainUpgradeResults:q}=HR(O,j,Ae[0],H,L,S,A,va);for(const re of[...Zt,...Da,...q]){const at=re.simulationResult.simScore,Nt=at>=pe?1+(at-pe)/(et-pe):(at-Le)/(pe-Le);re.percent=Nt}Zt.sort((re,at)=>at.percent-re.percent),Da.sort((re,at)=>at.percent-re.percent),q.sort((re,at)=>at.percent-re.percent);const ze={percent:vt,originalSim:j,baselineSim:me,benchmarkSim:Ze,maximumSim:ue,originalSimResult:O,baselineSimResult:ee,benchmarkSimResult:tt,maximumSimResult:te,originalSimScore:ge,baselineSimScore:Le,benchmarkSimScore:pe,maximumSimScore:et,substatUpgrades:Zt,setUpgrades:Da,mainUpgrades:q,simulationForm:H,simulationMetadata:S,characterMetadata:u,originalSpd:ie,spdBenchmark:he,simulationFlags:x};return lr[_]=ze,ze}function HR(e,t,n,o,s,r,l,c){const d=[];for(const y of r.substats){const P=y,_=C.clone(t);_.request.stats[P]=(_.request.stats[P]??0)+1;const x=Ha(o,s,[_],{...c,substatRollsModifier:G=>G})[0];l(x),d.push({stat:P,simulation:_,simulationResult:x})}const u=[],h=C.clone(t);h.request.simRelicSet1=n.request.simRelicSet1,h.request.simRelicSet2=n.request.simRelicSet2,h.request.simOrnamentSet=n.request.simOrnamentSet;const p=Ha(o,s,[h],{...c,substatRollsModifier:y=>y})[0];l(p),u.push({simulation:h,simulationResult:p});const S=[],D=Xu(o,r,t);function E(y){for(const P of r.parts[y]){const _=C.clone(t),x=wR[y],G=_.request[x];if(D&&G==a.ERR||P==G||P==a.SPD||G==a.SPD)continue;_.request[x]=P;const M=Ha(o,s,[_],{...c,substatRollsModifier:Z=>Z})[0];l(M);const H={stat:P,part:y,simulation:_,simulationResult:M};S.push(H)}}return E(b.Body),E(b.Feet),E(b.PlanarSphere),E(b.LinkRope),{substatUpgradeResults:d,setUpgradeResults:u,mainUpgradeResults:S}}const wR={[b.Body]:"simBody",[b.Feet]:"simFeet",[b.PlanarSphere]:"simPlanarSphere",[b.LinkRope]:"simLinkRope"};function Pi(e,t,n,o,s=!1){var S;if(!e)return null;const r=B.getMetadata(),l=ji({id:e});l.characterId=e,l.characterEidolon=n,l.lightCone=t,l.lightConeSuperimposition=o,l.characterConditionals={},l.lightConeConditionals={};const c={characterId:e,characterEidolon:n},d=yn(l,r),u=ta.get(c),h=aa.get(d);s?(u.teammateDefaults&&F.mergeUndefinedValues(l.characterConditionals,u.teammateDefaults()),h.teammateDefaults&&F.mergeUndefinedValues(l.lightConeConditionals,h.teammateDefaults())):(u.defaults&&F.mergeUndefinedValues(l.characterConditionals,u.defaults()),h.defaults&&F.mergeUndefinedValues(l.lightConeConditionals,h.defaults()));const p=(S=B.getMetadata().characters[e].scoringMetadata)==null?void 0:S.simulation;return p?(l.comboAbilities=[...p.comboAbilities],l.comboDot=p.comboDot,l.comboBreak=p.comboBreak):(l.comboAbilities=[null,"BASIC"],l.comboDot=0,l.comboBreak=0),l}function Uu(e,t,n,o,s,r,l,c,d){const u=t,h=n,p=l.breakpoints,S=c.substatGoal;let D=n0(h),E=e.simulation,y,P=!0,_=!0,x=0;const G=C.sumArray(Object.values(E.request.stats)),M=C.sumArray(Object.values(u));if(G==M||G<S)return E.result=Ha(o,s,[E],{...c,substatRollsModifier:c.substatRollsModifier})[0],E;const H={parts:[]};if(c.enforcePossibleDistribution){_=!1,h[a.SPD]=Math.max(6,h[a.SPD]),E.request.stats[a.SPD]=Math.max(6,h[a.SPD]),D=n0(h);const X=[...l.substats,a.SPD],W=A=>{const O={};return X.forEach(j=>{j!=A&&(O[j]=!0)}),{main:A,substats:O}},L=e.simulation.request;H.parts=[W(L.simLinkRope),W(L.simPlanarSphere),W(L.simFeet),W(L.simBody),W(a.ATK),W(a.HP)]}const Z={};for(;D>S;){let X,W,L,A;const O=Object.entries(E.request.stats).filter(([j,ie])=>ie>c.freeRolls).map(([j])=>j).filter(j=>!Z[j]);E.request.stats;for(const j of O){if(E.request.stats[j]<=c.freeRolls||F.sumArray(Object.values(E.request.stats))<=c.substatGoal||j==a.SPD&&E.request.stats[a.SPD]<=Math.ceil(e.speedRollsDeduction)||E.request.stats[j]<=u[j])continue;const ie=E.request.stats[j],ee=E;ee.request.stats[j]-=1;const me=Ha(o,s,[ee],{...c,substatRollsModifier:c.substatRollsModifier,simulationFlags:d})[0];if(x++,P&&(p!=null&&p[j])&&me.xa[Gt[j]]<p[j]){E.request.stats[j]=ie;continue}r(me),(!X||me.simScore>L.simScore)&&(X=ee,W=Object.assign({},ee.request.stats),L=me,A=j),E.request.stats[j]=ie}if(!L){if(P){P=!1;continue}if(_){_=!1;continue}D-=1;continue}if(c.enforcePossibleDistribution&&W[A]<6){const j=A,ie=W[j],ee=H.parts.map(me=>me.substats[j]).filter(me=>me).length;if(ie<ee){let me=!1;for(const he of H.parts)if(he.substats[j]&&!(Object.values(he.substats).length<=4)){delete he.substats[j],me=!0;break}if(!me){Z[j]=!0;continue}}}E=X,y=L,E.request.stats=W,D-=1}return E.result=y,console.log("simulationRuns",x,e.simulation.request.simBody,e.simulation.request.simFeet,e.simulation.request.simLinkRope,e.simulation.request.simPlanarSphere),E}function n0(e){let t=0;for(const n of qt)t+=e[n];return t}function OR(e,t){const{relicSetNames:n,ornamentSetName:o}=Yu(t);let s=e.relicSets[0][0],r=e.relicSets[0][1],l=e.ornamentSets[0];const c=e.relicSets.map(u=>u.sort());for(const u of c){if(n[0]==u[0]&&n[1]==u[1]){s=u[0],r=u[1];break}if(u[0]!=u[1]&&u.includes(n[0])&&u.includes(n[1])){s=n[0],r=n[1];break}}const d=e.ornamentSets;for(const u of d)if(o==u){l=u;break}return{relicSet1:s,relicSet2:r,ornamentSet:l}}function Xu(e,t,n){return n.request.simLinkRope==a.ERR&&t.errRopeEidolon!=null&&e.characterEidolon>=t.errRopeEidolon}function kR(e,t,n,o){const s=t.parts[b.Feet],l=Xu(e.form,t,o)?[a.ERR]:t.parts[b.LinkRope],{relicSet1:c,relicSet2:d,ornamentSet:u}=n,h=[];for(const p of t.parts[b.Body])for(const S of s)for(const D of t.parts[b.PlanarSphere])for(const E of l){const y={name:"",simRelicSet1:c,simRelicSet2:d,simOrnamentSet:u,simBody:p,simFeet:S,simPlanarSphere:D,simLinkRope:E,stats:{[a.HP_P]:0,[a.ATK_P]:0,[a.DEF_P]:0,[a.HP]:0,[a.ATK]:0,[a.DEF]:0,[a.SPD]:0,[a.CR]:0,[a.CD]:0,[a.EHR]:0,[a.RES]:0,[a.BE]:0}},_={simulation:{name:"",key:"",simType:qa.SubstatRolls,request:y},finalSpeed:0,speedRollsDeduction:0};h.push(_)}return h}function KR(e,t,n,o,s,r){const l=C.clone(e);Object.values(b).forEach(u=>l[u]=l[u]||hl()),Object.values(b).forEach(u=>l[u].part=u),Object.values(l).map(u=>{if(u.substats=[],u.part==b.Head)for(const h of qt)h!=a.SPD&&u.substats.push({stat:h,value:yt.getMaxedSubstatValue(h,s.quality)*0})});const{originalSimResult:c,originalSim:d}=Wr(l,o,t,n,s,r,0,!0);return{baselineSimResult:c,baselineSim:d}}function Wr(e,t,n,o,s,r,l=1,c=!1){const d=C.clone(e);Object.values(b).forEach(E=>d[E].part=E);const{relicSetNames:u,ornamentSetName:h}=Yu(d),p=Bl(d,u[0],u[1],h,s.quality,s.speedRollValue);if(c){const{relicSet1:E,relicSet2:y,ornamentSet:P}=t;p.simRelicSet1=E,p.simRelicSet2=y,p.simOrnamentSet=P}const S={name:"",key:"",simType:qa.SubstatRolls,request:p},D=Ha(n,o,[S],{...s,substatRollsModifier:E=>E,mainStatMultiplier:l,simulationFlags:r})[0];return S.result=D,{originalSimResult:D,originalSim:S}}function Yu(e){Object.values(b).forEach(r=>e[r]=e[r]||hl());const t=[e[b.Head].set,e[b.Hands].set,e[b.Body].set,e[b.Feet].set].filter(r=>r!=-1),n=[e[b.PlanarSphere].set,e[b.LinkRope].set].filter(r=>r!=-1),o=Cu(t,!0),s=Tu(n,!0);return o.sort(),{relicSetNames:o,ornamentSetName:s}}function jR(e,t,n){let o=1;if(t.breakpoints)for(const s of Object.keys(t.breakpoints))F.isFlat(s)?o*=(Math.min(1,e.xa[Gt[s]]/t.breakpoints[s])+1)/2:o*=Math.min(1,1-(t.breakpoints[s]-e.xa[Gt[s]])/yt.getMaxedSubstatValue(s,n.quality));return e.penaltyMultiplier=o,o}function WR(e,t,n,o=!0){if(n!=6||!o)return"?";let s="WTF+";const r=C.precisionRound(e*100);for(const[l,c]of Object.entries(Ju))if(!(l=="AEON"&&!t)&&(s=l,r>=c))return s;return"?"}const Ju={AEON:150,"WTF+":140,WTF:130,"SSS+":121,SSS:113,"SS+":106,SS:100,"S+":95,S:90,"A+":85,A:80,"B+":75,B:70,"C+":65,C:60,"D+":55,D:50,"F+":45,F:40};function ZR(e,t,n){let o,s;if(e==Tt.CHARACTER_TAB)o=dt.scoreCharacter(t),s={Head:mi(n,t,b.Head),Hands:mi(n,t,b.Hands),Body:mi(n,t,b.Body),Feet:mi(n,t,b.Feet),PlanarSphere:mi(n,t,b.PlanarSphere),LinkRope:mi(n,t,b.LinkRope)};else{const r=t.equipped,l=Object.values(r);o=dt.scoreCharacterWithRelics(t,l),s=r}return rg(Object.values(s)).forEach(r=>{const l=o.relics.find(c=>c.part==r.part);l&&(r.scoringResult=l)}),{scoringResults:o,displayRelics:s}}function mi(e,t,n){var o;return(o=t.equipped)!=null&&o[n]?e[t.equipped[n]]:null}function NR(e){var o,s,r;const t=((o=e==null?void 0:e.portrait)==null?void 0:o.artistName)??((r=(s=B.getCharacterById(e==null?void 0:e.id))==null?void 0:s.portrait)==null?void 0:r.artistName);if(!t)return;const n=t.trim();return n.length<1?void 0:n}function VR(e,t){const s=B.getMetadata().characters[e.id].imageCenter,r=e.form.lightCone&&e.form.lightCone!="0"?B.getMetadata().lightCones[e.form.lightCone].imageCenter:0;let l=WS,c=ZS,d=du,u=NS,h=Ds,p=jS;return t&&(l=Ua,c=128,d=Ua+16,u=1260/902*d,h=Ds-128-8,p=950),{tempLcParentW:l,tempLcParentH:c,tempLcInnerW:d,tempLcInnerH:u,tempInnerW:p,tempParentH:h,newLcHeight:128,newLcMargin:8,charCenter:s,lcCenter:r}}function zR(e,t,n){const o=C.clone(t);qe.condenseRelicSubstatsForOptimizerSingle(Object.values(o).filter(c=>!!c));const l={...Un(se.displayToForm(se.formToDisplay(e.form)),o,null,null,null).c.toBasicStatsObject()};return l[n.elementalDmgType]=l.ELEMENTAL_DMG,l}function UR(e,t,n,o,s,r){if(n!=Mi)return null;const l=r[e.id]??{};let c=FR(e,t,o,l);return c!=null&&c.originalSim?c.originalSimResult[s.elementalDmgType]=c.originalSimResult.ELEMENTAL_DMG:c=null,c}function XR(e,t,n){const o=Al.onEditOk(t,e);n(o),Ee.delayedSave()}function YR(e,t){const n=w.getFixedT(null,["charactersTab","modals","common"]);B.setRelic(e),window.setRelicRows(B.getRelics()),t(e),Ee.delayedSave(),J.success(n("CharacterPreview.Messages.AddedRelic"))}function JR(e,t,n,o){const s=w.getFixedT(null,["charactersTab","modals","common"]),{type:r,config:l}=t;switch(r){case"add":n(l),B.saveCharacterPortrait(e.id,l),J.success(s("CharacterPreview.Messages.SavedPortrait")),Ee.delayedSave();break;case"delete":B.deleteCharacterPortrait(e.id),n(void 0),J.success(s("CharacterPreview.Messages.RevertedPortrait")),Ee.delayedSave();break;default:console.error(`Payload of type '${r}' is not valid!`)}o(!1)}function QR(e,t,n){let o=n[e.id];const s=B.getMetadata().characters[e.id].scoringMetadata;if(s!=null&&s.simulation){const r=B.getScoringMetadata(e.id);F.objectHash(r.simulation.teammates)!=F.objectHash(s.simulation.teammates)&&o!=as&&(o=Di)}return t.current=e.id,o??as}function $R(e){const t=w.getFixedT(null,["charactersTab","modals","common"]),n=e.form.characterId,o=B.getMetadata().characters[n],s=o.element,r=80,l=e.form.characterEidolon,c=n?t(`gameData:Characters.${n}.Name`):"",d=o.path,u=e.form.lightCone,h=80,p=e.form.lightConeSuperimposition,S=B.getMetadata().lightCones[u],D=u?t(`gameData:Lightcones.${u}.Name`):"",E=k.getLightConePortrait(S)||"",y=ei[s];return{characterId:n,characterMetadata:o,characterElement:s,characterLevel:r,characterEidolon:l,characterName:c,characterPath:d,lightConeId:u,lightConeLevel:h,lightConeSuperimposition:p,lightConeMetadata:S,lightConeName:D,lightConeSrc:E,elementalDmgType:y}}const qR=[[111.1,111.2],[114.2,114.3],[133.3,133.4],[142.8,142.9],[155.5,155.6],[171.4,171.5],[177.7,177.8]],eE=e=>qR.some(([t,n])=>e>=t&&e<n),i0={"Fire DMG Boost":"Fire DMG","Ice DMG Boost":"Ice DMG","Imaginary DMG Boost":"Imaginary DMG","Lightning DMG Boost":"Lightning DMG","Physical DMG Boost":"Physical DMG","Quantum DMG Boost":"Quantum DMG","Wind DMG Boost":"Wind DMG"},tE={simScore:"Combo DMG","Fire DMG Boost":"Fire DMG","Ice DMG Boost":"Ice DMG","Imaginary DMG Boost":"Imaginary DMG","Lightning DMG Boost":"Lightning DMG","Physical DMG Boost":"Physical DMG","Quantum DMG Boost":"Quantum DMG","Wind DMG Boost":"Wind DMG","Outgoing Healing Boost":"Healing Boost","Energy Regeneration Rate":"Energy Regen",BASIC:"Basic Damage",ULT:"Ult Damage",SKILL:"Skill Damage",FUA:"FUA Damage",DOT:"DoT Damage"};function zt(e){const{stat:t,finalStats:n,edits:o}=e,s=C.precisionRound(n[t]),{t:r,i18n:l}=V("common"),c=tE[t]||t=="CV"?l.exists(`ReadableStats.${t}`)?r(`ReadableStats.${t}`):r(`DMGTypes.${t}`):r(`Stats.${t}`),{valueDisplay:d,value1000thsPrecision:u}=Fl(s,e.value,e.stat,e.preciseSpd);return n?i.jsxs(g,{justify:"space-between",align:"center",title:u,children:[i.jsx("img",{src:k.getStatIcon(t),style:{width:Ve,height:Ve,marginRight:3}}),`${c}${o!=null&&o[t]?" *":""}`,i.jsx(Mt,{style:{margin:"auto 10px",flexGrow:1,width:"unset",minWidth:"unset"},dashed:!0}),`${d}${F.isFlat(t)||t=="CV"||t=="simScore"?"":"%"}${t=="simScore"?r("ThousandsSuffix"):""}`]}):(console.log("No final stats"),i.jsx("div",{}))}function Fl(e,t,n,o){let s,r;return n=="CV"?(s=Ct(F.precisionRound(t)),r=An(F.precisionRound(t))):n=="simScore"||n=="COMBO_DMG"?(s=Ct(F.truncate10ths(F.precisionRound((t??0)/1e3))),r=An(F.precisionRound(t))):n==m.Stats.SPD?(s=eE(e)||o?An(F.precisionRound(e,3)):Ct(F.truncate10ths(F.precisionRound(e,3))),r=An(F.precisionRound(e))):F.isFlat(n)?(s=fn(Math.floor(e)),r=An(F.precisionRound(e))):(s=Ct(F.truncate10ths(F.precisionRound(e*100))),r=An(F.truncate1000ths(F.precisionRound(e*100)))),{valueDisplay:s,value1000thsPrecision:r}}const{Text:Hl}=Ce,En=Lt(Hl)`
    font-family: Segoe UI, Frutiger, Frutiger Linotype, Dejavu Sans, Helvetica Neue, Arial, sans-serif;
    font-size: 17px;
    font-weight: 400;
    white-space: nowrap;
`,aE=Lt(Hl)`
    font-family: Segoe UI, Frutiger, Frutiger Linotype, Dejavu Sans, Helvetica Neue, Arial, sans-serif;
    font-size: 17px;
    font-weight: 400;
    white-space: nowrap;
    text-overflow: ellipsis;
    overflow: hidden;
`,Hn=Lt(Hl)`
    font-family: Segoe UI, Frutiger, Frutiger Linotype, Dejavu Sans, Helvetica Neue, Arial, sans-serif;
    font-size: 16px;
    font-weight: 400;
    white-space: nowrap;
`,s0=.001,Zr=e=>{const t=nE(e.characterId),n=window.store(o=>o.savedSession[Ne.showcasePreciseSpd]);return i.jsx(En,{children:i.jsxs(g,{vertical:!0,style:{paddingLeft:4,paddingRight:6},gap:e.scoringType==Ya?5:3,children:[i.jsx(zt,{finalStats:e.finalStats,stat:a.HP,edits:t}),i.jsx(zt,{finalStats:e.finalStats,stat:a.ATK,edits:t}),i.jsx(zt,{finalStats:e.finalStats,stat:a.DEF,edits:t}),i.jsx(zt,{finalStats:e.finalStats,stat:a.SPD,edits:t,preciseSpd:n}),i.jsx(zt,{finalStats:e.finalStats,stat:a.CR,edits:t}),i.jsx(zt,{finalStats:e.finalStats,stat:a.CD,edits:t}),i.jsx(zt,{finalStats:e.finalStats,stat:a.EHR,edits:t}),i.jsx(zt,{finalStats:e.finalStats,stat:a.RES,edits:t}),i.jsx(zt,{finalStats:e.finalStats,stat:a.BE,edits:t}),!e.simScore&&e.finalStats[a.OHB]>s0&&i.jsx(zt,{finalStats:e.finalStats,stat:a.OHB,edits:t}),(e.showAll||e.finalStats[a.ERR]>s0||e.simScore==null)&&i.jsx(zt,{finalStats:e.finalStats,stat:a.ERR,edits:t}),i.jsx(zt,{finalStats:e.finalStats,stat:e.elementalDmgValue,edits:t}),e.simScore!=null&&i.jsx(zt,{finalStats:e.finalStats,stat:"simScore",value:e.simScore})]})})};function nE(e){if(!e)return{};const t=B.getMetadata().characters[e],n=Gd(t),o=t.traces,s={};for(const[r,l]of Object.entries(o))C.precisionRound(n[r])!=C.precisionRound(l)&&(s[r]=!0,r==a.ATK_P&&(s[a.ATK]=!0),r==a.DEF_P&&(s[a.DEF]=!0),r==a.HP_P&&(s[a.HP]=!0));return s}function wl(e,t=100){const[n,o]=I.useState(null);return I.useEffect(()=>{const s=setTimeout(()=>{o(e)},t);return()=>clearTimeout(s)},[e,t]),n}const iE=()=>i.jsx("svg",{className:"w-6 h-6 text-gray-800 dark:text-white","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",fill:"none",viewBox:"0 1 20 20",children:i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v13m0-13 4 4m-4-4-4 4"})}),sE=e=>i.jsx(Wn,{component:iE,...e});function Qu(e,t){const n=rE(e);return oE(n,t)}function oE(e,t){const n=Object.fromEntries(Object.values(Qt).map(s=>[s,{}])),o=B.getMetadata().characters[t.characterId].path==Oi.Remembrance;for(const s of[...e.buffsBasic,...e.buffs,...o?e.buffsMemo:[]]){const r=s.source.id,l=t.characterId==r?Qt.PRIMARY:s.source.buffType,c=n[l];c[r]||(c[r]=[]),c[r].push(s)}return n}function rE(e){const t=e.buffs,n=e.c.buffs,o=e.m?[...e.buffsMemo,...e.m.buffs]:[];return o.forEach(r=>r.memo=!0),{buffs:t,buffsMemo:o,buffsBasic:n}}function $u(e){const t=e.buffGroups??lE(e.result);if(!t)return i.jsx(i.Fragment,{});const n=[],o=[];let s=0;const r=e.size??390;for(const[l,c]of Object.entries(t.PRIMARY))n.push(i.jsx(Ws,{id:l,buffs:c,buffType:Qt.PRIMARY,size:r},s++));for(const[l,c]of Object.entries(t.SETS))n.push(i.jsx(Ws,{id:l,buffs:c,buffType:Qt.SETS,size:r},s++));for(const[l,c]of Object.entries(t.CHARACTER))o.push(i.jsx(Ws,{id:l,buffs:c,buffType:Qt.CHARACTER,size:r},s++));for(const[l,c]of Object.entries(t.LIGHTCONE))o.push(i.jsx(Ws,{id:l,buffs:c,buffType:Qt.LIGHTCONE,size:r},s++));return e.singleColumn?i.jsxs(g,{gap:20,vertical:!0,children:[n,o]}):i.jsxs(g,{justify:"space-between",style:{width:"100%"},children:[i.jsx(g,{gap:20,vertical:!0,children:n}),i.jsx(g,{gap:20,vertical:!0,children:o})]})}function lE(e){if(!e)return null;e.simulationForm.trace=!0;const n=Ha(e.simulationForm,null,[e.originalSim],jr)[0].tracedX;return Qu(n,e.simulationForm)}function Ws(e){V();const{id:t,buffs:n,buffType:o,size:s}=e;let r;return o==Qt.PRIMARY||o==Qt.CHARACTER?r=k.getCharacterAvatarById(t):o==Qt.LIGHTCONE?r=k.getLightConeIconById(t):o==Qt.SETS?r=k.getSetImage(R[t]):r=k.getBlank(),i.jsxs(g,{align:"center",gap:5,children:[i.jsx("img",{src:r,style:{width:64,height:64}}),i.jsx(cE,{buffs:n,size:s})]})}function cE(e){const{buffs:t}=e,{t:n}=V(["gameData","optimizerTab"]),o=e.size??390,s=[{dataIndex:"value",key:"value",width:70,minWidth:70,render:l=>i.jsx("span",{style:{textWrap:"nowrap"},children:l})},{dataIndex:"stat",key:"stat",render:(l,c)=>i.jsxs(g,{justify:"space-between",children:[i.jsxs("span",{style:{flex:"1 1 auto",overflow:"hidden",textOverflow:"ellipsis",textWrap:"nowrap",marginRight:10,minWidth:130},children:[`${c.statLabel}`," ",c.memo?"ᴹ":""]}),i.jsx("span",{style:{flex:"1 1 auto",overflow:"hidden",textOverflow:"ellipsis",textWrap:"nowrap",textAlign:"end"},children:c.sourceLabel})]})}],r=t.map((l,c)=>{var E;const d=l.stat,u=!is[d].flat,h=is[d].bool,p=((E=is[d])==null?void 0:E.label)??d;let S;switch(l.source.buffType){case Qt.CHARACTER:S=n(`optimizerTab:ExpandedDataPanel.BuffsAnalysisDisplay.Sources.${l.source.ability}`);break;case Qt.LIGHTCONE:S=n(`Lightcones.${l.source.id}.Name`);break;case Qt.SETS:S=n(`RelicSets.${rt[R[l.source.id]]}.Name`);break;default:S=l.source.label}let D;return h?D=l.value?"True":"False":u?D=`${C.precisionRound(l.value*100,2)} %`:D=`${C.precisionRound(l.value,0)}`,{key:c,value:D,memo:l.memo,statLabel:p,sourceLabel:S}});return i.jsx(Qn,{columns:s,dataSource:r,pagination:!1,size:"small",className:"buff-table remove-table-bottom-border",rowClassName:"buff-row",tableLayout:"fixed",style:{width:o,border:"1px solid #354b7d",boxShadow:Ps,borderRadius:5,overflow:"hidden",fontSize:14}})}var qu=(e=>(e[e.SMALL=390]="SMALL",e[e.LARGE=450]="LARGE",e))(qu||{});const em=730,tm=400;function dE(e){const t=e.analysis.newX.dmgSplits;if(!t)return i.jsx("div",{});t.MEMO_SKILL_DMG=e.analysis.newX.m.dmgSplits.MEMO_SKILL_DMG,t.MEMO_TALENT_DMG=e.analysis.newX.m.dmgSplits.MEMO_TALENT_DMG;const n=Object.values(t);return i.jsx(g,{vertical:!0,align:"center",gap:8,style:{width:em,height:tm,boxShadow:Ps,borderRadius:5,overflow:"hidden",background:"#243356"},children:i.jsx(uE,{data:n})})}const o0=["abilityDmg","dotDmg","superBreakDmg","jointDmg","memoDmg","additionalDmg","breakDmg","trueDmg"],r0="#DDD";function uE(e){const{t}=V("optimizerTab",{keyPrefix:"ExpandedDataPanel.DamageSplits"}),[n,o]=I.useState(null),r=e.data.filter(l=>o0.some(c=>l[c]!==0)).map(l=>{const c=l;let d=0;for(const u of o0)d+=l[u]??0;return c.sum=d,c});return r.sort((l,c)=>{const d=Object.values(l).filter(h=>typeof h=="number").reduce((h,p)=>h+p,0);return Object.values(c).filter(h=>typeof h=="number").reduce((h,p)=>h+p,0)-d}),i.jsxs(g,{justify:"center",className:"pre-font",children:[i.jsx("span",{style:{position:"absolute",marginTop:20,fontSize:14},children:t("Title")}),i.jsxs(dd,{layout:"vertical",data:r,margin:{top:50,right:60,bottom:20,left:70},barCategoryGap:"25%",width:em,height:tm,children:[i.jsx(ud,{type:"number",tick:{fill:r0},tickFormatter:ds,width:100}),i.jsx(md,{dataKey:"name",type:"category",axisLine:!1,tickLine:!1,tick:{fill:r0},tickFormatter:l=>t(`YAxisLabel.${l}`),tickMargin:10,width:20}),i.jsx($m,{cursor:!1,isAnimationActive:!1,content:i.jsx(mE,{bar:n})}),i.jsx(qm,{formatter:l=>t(`Legend.${l}`),wrapperStyle:{paddingTop:10,paddingRight:40,paddingLeft:40}}),sn("abilityDmg","#85c1e9",o),sn("jointDmg","#2980b9",o),sn("superBreakDmg","#e59866",o),sn("additionalDmg","#bb8fce",o),sn("dotDmg","#45b39d",o),sn("memoDmg","#cd6155",o),sn("breakDmg","#f8c471",o),sn("trueDmg","#cacfd2",o,!0)]})]})}function sn(e,t,n,o=!1){return i.jsx(hd,{dataKey:e,stackId:"a",fill:t,activeBar:!1,isAnimationActive:!1,onMouseEnter:()=>n(e),onMouseLeave:()=>n(null),children:o&&i.jsx(eh,{dataKey:"sum",position:"right",formatter:ds})},e)}const mE=e=>{const{t}=V("optimizerTab",{keyPrefix:"ExpandedDataPanel.DamageSplits.TooltipText"}),{active:n,payload:o,bar:s}=e;if(!s||!o||!n)return null;const r=o.find(l=>l.dataKey==s);return r?i.jsxs(g,{vertical:!0,className:"pre-font",style:{background:"rgb(69,93,154)",padding:8,borderRadius:3},children:[i.jsx("span",{style:{fontSize:14,fontWeight:"bold"},children:t(s)}),i.jsx("span",{children:la(Math.floor(r.value))})]}):null};function ds(e){return`${Math.floor(Number(e)/1e3)}${w.t("common:ThousandsSuffix")}`}const hE={"WTF+":!0,"SSS+":!0,"SS+":!0,"S+":!0,"A+":!0,"B+":!0,"C+":!0,"D+":!0,"F+":!0};function fE(e){const{maximum:t,benchmark:n,minimum:o}=e,s=Math.min(t,Math.max(e.score,o)),r=Math.random(),l=Object.entries(Ju).sort((ae,Q)=>Q[1]-ae[1]),c=ae=>{const Q=ae/100;if(ae<=100)return o+(n-o)*Q;{const Oe=(ae-100)/100;return n+(t-n)*Oe}},d=[{name:"Score",value:s}],u="#666",h="#999",p=1060,S=150,D={top:45,right:20,left:20,bottom:55},E=10,y=28,P=36,_=p-D.left-D.right,x="#FF6355dd",G="#faf742dd",M="#b0fa42dd",H="#75ec46dd",Z="#17D553dd",X="#23BBFFdd",W="#9F50FFdd",L="#BC38FFdD",A="0%",O=`${(n-o)/2/(t-o)*100}%`,j=`${(n-o)*(3/4)/(t-o)*100}%`,ie=`${(n-o)/(t-o)*100}%`,ee=`${((t-n)/4+(n-o))/(t-o)*100}%`,me=`${((t-n)/2+(n-o))/(t-o)*100}%`,he=`${((t-n)*(3/4)+(n-o))/(t-o)*100}%`;return i.jsx("div",{style:{width:1060},children:i.jsxs(dd,{layout:"vertical",width:p,height:S,data:d,margin:D,barSize:20,children:[i.jsx(ud,{type:"number",domain:[o,t],tick:!1,tickLine:!1,axisLine:{stroke:"#777",strokeWidth:1}}),i.jsx(md,{type:"category",tick:!1,axisLine:!1,width:0,height:10}),i.jsx("defs",{children:i.jsxs("linearGradient",{id:`gradient${r}`,x1:"0%",y1:"0%",x2:"100%",y2:"0%",gradientUnits:"userSpaceOnUse",children:[i.jsx("stop",{offset:A,stopColor:x}),i.jsx("stop",{offset:O,stopColor:G}),i.jsx("stop",{offset:j,stopColor:M}),i.jsx("stop",{offset:ie,stopColor:H}),i.jsx("stop",{offset:ee,stopColor:Z}),i.jsx("stop",{offset:me,stopColor:X}),i.jsx("stop",{offset:he,stopColor:W}),i.jsx("stop",{offset:"100%",stopColor:L})]})}),i.jsx("rect",{x:D.left,y:D.top,width:_,height:20,fill:`url(#gradient${r})`,opacity:.15}),i.jsx(hd,{dataKey:"value",minPointSize:5,isAnimationActive:!1,fill:`url(#gradient${r})`}),i.jsx(Wi,{x:s,stroke:"#fff",strokeWidth:4}),i.jsxs(Wi,{x:t,stroke:u,strokeWidth:1,children:[i.jsx(ca,{value:"200%",position:"bottom",fontSize:12,offset:E,fill:h}),i.jsx(ca,{value:`${ds(t)}`,position:"top",fontSize:12,offset:y,fill:h}),i.jsx(ca,{value:"DMG",position:"top",fontSize:12,offset:E,fill:h})]}),i.jsxs(Wi,{x:n,stroke:u,strokeWidth:1,children:[i.jsx(ca,{value:`${ds(n)}`,position:"top",fontSize:12,offset:y,fill:h}),i.jsx(ca,{value:"DMG",position:"top",fontSize:12,offset:E,fill:h})]}),i.jsxs(Wi,{x:o,stroke:u,strokeWidth:1,children:[i.jsx(ca,{value:"0%",position:"bottom",fontSize:12,offset:E,fill:h}),i.jsx(ca,{value:`${ds(o)}`,position:"top",fontSize:12,offset:y,fill:h}),i.jsx(ca,{value:"DMG",position:"top",fontSize:12,offset:E,fill:h})]}),l.map(([ae,Q])=>{const Oe=c(Q);return i.jsx(Wi,{x:Oe,stroke:u,strokeWidth:1,children:hE[ae]?i.jsxs(i.Fragment,{children:[i.jsx(ca,{value:ae,position:"bottom",fontSize:12,offset:P+E,fill:h}),i.jsx(ca,{value:`${Q}%`,position:"bottom",fontSize:11,offset:P+y,fill:h})]}):i.jsxs(i.Fragment,{children:[i.jsx(ca,{value:ae,position:"bottom",fontSize:12,offset:E,fill:h}),i.jsx(ca,{value:`${Q}%`,position:"bottom",fontSize:11,offset:y,fill:h})]})},ae)})]})})}const pE=429,l0=730;function gE(e){const{analysis:t}=e;return i.jsxs(g,{style:{borderRadius:5,width:l0,height:pE},gap:10,children:[i.jsx(CE,{analysis:t}),i.jsx(g,{style:{borderRadius:5,width:l0,overflow:"hidden",padding:10,background:"#243356",boxShadow:Ps},children:i.jsx(SE,{analysis:t})})]})}function SE(e){const t=e.analysis.oldX.toComputedStatsObject(),n=e.analysis.newX.toComputedStatsObject();return t[e.analysis.elementalDmgValue]=t.ELEMENTAL_DMG,n[e.analysis.elementalDmgValue]=n.ELEMENTAL_DMG,t.simScore=t.COMBO_DMG,n.simScore=n.COMBO_DMG,i.jsx(En,{style:{width:"100%"},children:i.jsxs(g,{vertical:!0,gap:5,children:[i.jsx(na,{oldStats:t,newStats:n,stat:"COMBO_DMG"}),i.jsx(na,{oldStats:t,newStats:n,stat:a.HP}),i.jsx(na,{oldStats:t,newStats:n,stat:a.ATK}),i.jsx(na,{oldStats:t,newStats:n,stat:a.DEF}),i.jsx(na,{oldStats:t,newStats:n,stat:a.SPD}),i.jsx(na,{oldStats:t,newStats:n,stat:a.CR}),i.jsx(na,{oldStats:t,newStats:n,stat:a.CD}),i.jsx(na,{oldStats:t,newStats:n,stat:a.EHR}),i.jsx(na,{oldStats:t,newStats:n,stat:a.RES}),i.jsx(na,{oldStats:t,newStats:n,stat:a.BE}),i.jsx(na,{oldStats:t,newStats:n,stat:a.OHB}),i.jsx(na,{oldStats:t,newStats:n,stat:a.ERR}),i.jsx(na,{oldStats:t,newStats:n,stat:e.analysis.elementalDmgValue})]})})}function na(e){const{oldStats:t,newStats:n,stat:o}=e,s=C.precisionRound(t[o]),r=C.precisionRound(n[o]),{valueDisplay:l}=Fl(r,r,o,!1);return i.jsxs(g,{gap:12,align:"center",children:[i.jsx("div",{style:{width:240},children:i.jsx(zt,{finalStats:t,stat:o=="COMBO_DMG"?"simScore":o,value:o=="COMBO_DMG"?s:void 0})}),i.jsx("span",{style:{marginLeft:15,marginRight:15,fontSize:14,lineHeight:"17px"},children:"➤"}),i.jsx(g,{style:{width:55},justify:"end",children:i.jsx(am,{value:l,stat:o})}),i.jsx(RE,{oldValue:s,newValue:r,stat:o})]})}function am(e){const{t}=V("common"),{value:n,stat:o}=e;return o=="COMBO_DMG"?n+(e.comboDiff?"%":t("ThousandsSuffix")):F.isFlat(o)?n:n+"%"}const bE="#95ef90",DE="#ff97a9";function nm(e){return e?bE:DE}function im(e){return e?"▲":"▼"}function RE(e){const{newValue:t,oldValue:n,stat:o}=e;if(cr(t,n,o)==0)return i.jsx(i.Fragment,{});const s=t>n,r=s?cr(t,n,o):cr(n,t,o),l=im(s),c=nm(s),{valueDisplay:d}=EE(r,r,o);return i.jsxs(g,{style:{color:c,width:90},gap:10,justify:"end",align:"center",children:[i.jsx(am,{value:d,stat:o,comboDiff:!0}),i.jsx("span",{style:{fontSize:10,lineHeight:"17px"},children:l})]})}function EE(e,t,n){if(n=="COMBO_DMG"){const o=`${F.truncate10ths(F.precisionRound(t??0)).toFixed(1)}`,s=F.precisionRound(t).toFixed(3);return{valueDisplay:o,value1000thsPrecision:s}}return Fl(e,t,n)}function cr(e,t,n){return n==a.SPD?C.precisionRound(F.truncate10ths(e)-F.truncate10ths(t)):F.isFlat(n)?C.precisionRound(Math.floor(e)-Math.floor(t)):n=="COMBO_DMG"?C.precisionRound((e/t-1)*100):C.precisionRound(F.truncate1000ths(e)-F.truncate1000ths(t))}function CE(e){return i.jsx("div",{style:{overflow:"hidden",boxShadow:Ps,borderRadius:5,minWidth:233,height:"100%",background:"#243356"},children:i.jsx(gu,{id:e.analysis.request.characterId,disableClick:!0,parentH:400})})}function TE(e){const{t}=V("charactersTab",{keyPrefix:"CharacterPreview.SubstatUpgradeComparisons"}),{t:n}=V(["common","charactersTab"]),{simScore:o}=e,r=o.mainUpgrades.map(c=>{const d=c.stat,u=c.part;return{key:u+d,stat:d,part:u,...sm(o,c)}}).sort((c,d)=>d.scorePercentUpgrade-c.scorePercentUpgrade),l=[{title:t("MainStatUpgrade"),dataIndex:"stat",align:"center",width:200,rowScope:"row",render:(c,d)=>i.jsxs(g,{align:"center",gap:5,children:[i.jsx("img",{src:k.getPart(d.part),style:{width:Ve,height:Ve,marginLeft:3,marginRight:3}}),i.jsx("span",{children:"➔"}),i.jsx("img",{src:k.getStatIcon(c),style:{width:Ve,height:Ve}}),i.jsx("span",{children:`${n(`ShortReadableStats.${c}`)}`})]})},...om(t)];return i.jsx(Qn,{className:"remove-table-bottom-border",columns:l,dataSource:r,pagination:!1,size:"small",style:rm,locale:{emptyText:""}})}function sm(e,t){const n=t.simulationResult.simScore-e.originalSimScore,o=Math.abs(n)<1?0:n,s=t.percent-e.percent;return{scorePercentUpgrade:(Math.abs(s)<1e-4?0:s)*100,scoreValueUpgrade:t.percent*100,damagePercentUpgrade:o/e.originalSimScore*100,damageValueUpgrade:o}}function om(e){return[{title:e("DpsScorePercentUpgrade"),dataIndex:"scorePercentUpgrade",align:"center",render:t=>i.jsxs(g,{align:"center",justify:"center",gap:5,children:[i.jsx(c0,{up:t>=0}),` ${Kn(t)}%`]})},{title:e("ComboDmgPercentUpgrade"),dataIndex:"damagePercentUpgrade",align:"center",render:t=>i.jsxs(g,{align:"center",justify:"center",gap:5,children:[i.jsx(c0,{up:t>=0}),` ${Kn(t)}%`]})},{title:e("UpgradedDpsScore"),dataIndex:"scoreValueUpgrade",align:"center",render:t=>i.jsx(i.Fragment,{children:`${Ct(Math.max(0,t))}%`})},{title:e("ComboDmgUpgrade"),dataIndex:"damageValueUpgrade",align:"center",render:t=>i.jsx(i.Fragment,{children:Ct(t)})}]}const rm={width:"100%",border:"1px solid #354b7d",boxShadow:Is,borderRadius:5,overflow:"hidden"};function c0(e){return i.jsx("span",{style:{color:nm(e.up),fontSize:10},children:im(e.up)})}function yE(e){const{t}=V("charactersTab",{keyPrefix:"CharacterPreview.SubstatUpgradeComparisons"}),{t:n}=V("common",{keyPrefix:"ShortSpacedStats"}),{simScore:o}=e,r=o.substatUpgrades.map(c=>{const d=c.stat;return{key:d,stat:d,...sm(o,c)}}),l=[{title:t("SubStatUpgrade"),dataIndex:"stat",align:"center",width:200,rowScope:"row",render:(c,d)=>i.jsxs(g,{children:[i.jsx("img",{src:k.getStatIcon(c),style:{width:Ve,height:Ve,marginLeft:3,marginRight:3}}),i.jsx("span",{style:{marginRight:10},children:`+1x roll ${n(c)} `})]})},...om(t)];return i.jsx(Qn,{className:"remove-table-bottom-border",columns:l,dataSource:r,pagination:!1,size:"small",style:rm,locale:{emptyText:""}})}const PE=e=>{const{t,i18n:n}=V(["charactersTab","common"]);if(!e.simScoringResult)return i.jsx(i.Fragment,{});const o=C.clone(e.simScoringResult),s=o.simulationForm.characterId,r=B.getMetadata().characters[s],l=ei[r.element];function c(A){return i.jsx(g,{vertical:!0,align:"center",gap:2,children:i.jsx("img",{src:k.getSetImage(A.set),style:{height:60}})})}function d(A){var j;const O=((j=A.stat)==null?void 0:j.replace("Boost",""))||"";return i.jsxs(g,{align:"center",gap:10,children:[i.jsx("img",{src:k.getPart(A.part),style:{height:30}}),i.jsx("pre",{style:{margin:0},children:O})]})}function u(A){const O=A.precision??1,j=A.number??0,ie=j!=0;return i.jsxs(g,{gap:15,justify:"space-between",children:[i.jsx("pre",{style:{margin:0},children:A.label}),i.jsx("pre",{style:{margin:0,textAlign:"right"},children:ie&&Vo(j,O,A.useGrouping)})]})}function h(A){const O=A.precision??1,j=A.number??0,ie=A.parens??0,ee=j!=0,me=ie!=0;return i.jsxs(g,{gap:5,justify:"space-between",children:[i.jsx("pre",{style:{margin:0},children:A.label}),i.jsxs("pre",{style:{margin:0,textAlign:"right"},children:[ee&&Vo(j,O),me&&i.jsx("span",{style:{margin:3},children:"-"}),me&&Vo(ie,1)]})]})}function p(A){const O=A.number??0;return i.jsxs(g,{gap:9,justify:"space-between",children:[i.jsx("pre",{style:{margin:0},children:A.label}),i.jsx("pre",{style:{margin:0,width:A.valueWidth},children:O})]})}function S(A){const O=A.text??"";return i.jsxs(g,{align:"center",gap:1,justify:"space-between",children:[i.jsx("pre",{style:{margin:0},children:A.label}),i.jsx("pre",{style:{margin:0,textAlign:"right"},children:O})]})}function D(A){const O=n.exists(`charactersTab:CharacterPreview.BuildAnalysis.Rotation.${A.comboAbilities[A.index]}`)?t(`CharacterPreview.BuildAnalysis.Rotation.${A.comboAbilities[A.index]}`):null;return O==null?i.jsx(i.Fragment,{}):i.jsx(g,{align:"center",gap:15,children:i.jsx("pre",{style:{margin:0},children:`#${A.index} - ${O}`})})}const E=C.clone(o.originalSimResult),y=C.clone(o.benchmarkSimResult),P=C.clone(o.maximumSimResult),_=E.ca,x=y.ca,G=P.ca,M=E.xa,H=y.xa,Z=P.xa;_[Gt[l]]=_[f.ELEMENTAL_DMG],x[Gt[l]]=x[f.ELEMENTAL_DMG],G[Gt[l]]=G[f.ELEMENTAL_DMG],M[Gt[l]]=M[f.ELEMENTAL_DMG],H[Gt[l]]=H[f.ELEMENTAL_DMG],Z[Gt[l]]=Z[f.ELEMENTAL_DMG];const X=300,W=i.jsx(g,{vertical:!0,children:i.jsx(Mt,{type:"vertical",style:{flexGrow:1,margin:"10px 30px"}})});function L(A){const O=A.simulation.request,j=C.clone(A.simulation.result),ie=Td(j.ca),ee=yd(j.xa),me=A.type=="Character",he="rgb(225, 165, 100)";ie[l]=ie.ELEMENTAL_DMG,ee[l]=ee.ELEMENTAL_DMG;const De={};if(A.type=="Benchmark")for(const[Oe,Ae]of Object.entries(O.stats)){const Ze=[O.simBody,O.simFeet,O.simPlanarSphere,O.simLinkRope,a.ATK,a.HP].filter(tt=>tt==Oe).length;Oe==a.SPD?De[Oe]=Ae-mo(Ze,Ae):De[Oe]=Ae-Nu(Ze,Ae)}const ae=O.stats,Q=A.precision;return i.jsxs(g,{vertical:!0,gap:25,style:{margin:"auto"},children:[i.jsx(g,{vertical:!0,gap:$e,children:i.jsx(g,{justify:"space-around",children:i.jsx("pre",{style:{fontSize:20,fontWeight:"bold",color:me?he:""},children:i.jsx("u",{children:t(`CharacterPreview.ScoringColumn.${A.type}.Header`,{score:F.truncate10ths(F.precisionRound(A.percent*100))})})})})}),i.jsxs(g,{vertical:!0,gap:$e,style:{width:X,margin:"auto"},children:[i.jsx("pre",{style:{margin:"auto",color:me?he:""},children:t(`CharacterPreview.ScoringColumn.${A.type}.BasicStats`)}),i.jsx(Zr,{characterId:s,finalStats:ie,elementalDmgValue:l,simScore:j.simScore,showAll:!0})]}),i.jsxs(g,{vertical:!0,gap:$e,style:{width:X,margin:"auto"},children:[i.jsx("pre",{style:{margin:"auto",color:me?he:""},children:i.jsxs(Rt,{t,i18nKey:`CharacterPreview.ScoringColumn.${A.type}.CombatStats`,children:["build type ",i.jsx("u",{children:"combat stats"})]})}),i.jsx(Zr,{characterId:s,finalStats:ee,elementalDmgValue:l,simScore:j.simScore,showAll:!0})]}),i.jsxs(g,{vertical:!0,gap:$e,children:[i.jsx("pre",{style:{margin:"10px auto",color:me?he:""},children:t(`CharacterPreview.ScoringColumn.${A.type}.Substats`)}),i.jsxs(g,{justify:"space-between",children:[i.jsxs(g,{vertical:!0,gap:$e,style:{width:125,paddingLeft:5},children:[i.jsx(h,{label:t(`common:ShortStats.${a.ATK_P}`)+":",number:ae[a.ATK_P],parens:De[a.ATK_P],precision:Q}),i.jsx(h,{label:t(`common:ShortStats.${a.ATK}`)+":",number:ae[a.ATK],parens:De[a.ATK],precision:Q}),i.jsx(h,{label:t(`common:ShortStats.${a.HP_P}`)+":",number:ae[a.HP_P],parens:De[a.HP_P],precision:Q}),i.jsx(h,{label:t(`common:ShortStats.${a.HP}`)+":",number:ae[a.HP],parens:De[a.HP],precision:Q}),i.jsx(h,{label:t(`common:ShortStats.${a.DEF_P}`)+":",number:ae[a.DEF_P],parens:De[a.DEF_P],precision:Q}),i.jsx(h,{label:t(`common:ShortStats.${a.DEF}`)+":",number:ae[a.DEF],parens:De[a.DEF],precision:Q})]}),i.jsx(fa,{}),i.jsxs(g,{vertical:!0,gap:$e,style:{width:125,paddingRight:5},children:[i.jsx(h,{label:t(`common:ShortStats.${a.SPD}`)+":",number:ae[a.SPD],parens:De[a.SPD],precision:2}),i.jsx(h,{label:t(`common:ShortStats.${a.CR}`)+":",number:ae[a.CR],parens:De[a.CR],precision:Q}),i.jsx(h,{label:t(`common:ShortStats.${a.CD}`)+":",number:ae[a.CD],parens:De[a.CD],precision:Q}),i.jsx(h,{label:t(`common:ShortStats.${a.EHR}`)+":",number:ae[a.EHR],parens:De[a.EHR],precision:Q}),i.jsx(h,{label:t(`common:ShortStats.${a.RES}`)+":",number:ae[a.RES],parens:De[a.RES],precision:Q}),i.jsx(h,{label:t(`common:ShortStats.${a.BE}`)+":",number:ae[a.BE],parens:De[a.BE],precision:Q})]})]})]}),i.jsxs(g,{vertical:!0,gap:$e,children:[i.jsx("pre",{style:{margin:"0 auto",color:me?he:""},children:t(`CharacterPreview.ScoringColumn.${A.type}.Mainstats`)}),i.jsx(g,{gap:$e,justify:"space-around",children:i.jsxs(g,{vertical:!0,gap:10,children:[i.jsx(d,{stat:O.simBody!=="NONE"?t(`common:ReadableStats.${O.simBody}`):"",part:b.Body}),i.jsx(d,{stat:O.simFeet!=="NONE"?t(`common:ReadableStats.${O.simFeet}`):"",part:b.Feet}),i.jsx(d,{stat:O.simPlanarSphere!=="NONE"?t(`common:ReadableStats.${O.simPlanarSphere}`):"",part:b.PlanarSphere}),i.jsx(d,{stat:O.simLinkRope!=="NONE"?t(`common:ReadableStats.${O.simLinkRope}`):"",part:b.LinkRope})]})})]}),i.jsxs(g,{vertical:!0,gap:20,children:[i.jsx("pre",{style:{margin:"0 auto",color:me?he:""},children:t(`CharacterPreview.ScoringColumn.${A.type}.Abilities`)}),i.jsx(g,{gap:$e,justify:"space-around",children:i.jsxs(g,{vertical:!0,gap:10,style:{width:230},children:[i.jsx(u,{label:String(t("common:ShortDMGTypes.Basic"))+":",number:j.BASIC,precision:1}),i.jsx(u,{label:String(t("common:ShortDMGTypes.Skill"))+":",number:j.SKILL,precision:1}),i.jsx(u,{label:String(t("common:ShortDMGTypes.Ult"))+":",number:j.ULT,precision:1}),i.jsx(u,{label:String(t("common:ShortDMGTypes.Fua"))+":",number:j.FUA,precision:1}),i.jsx(u,{label:String(t("common:ShortDMGTypes.Memo_Skill"))+":",number:j.MEMO_SKILL,precision:1}),i.jsx(u,{label:String(t("common:ShortDMGTypes.Memo_Talent"))+":",number:j.MEMO_TALENT,precision:1}),i.jsx(u,{label:String(t("common:ShortDMGTypes.Dot"))+":",number:j.DOT,precision:1}),i.jsx(u,{label:String(t("common:ShortDMGTypes.Break"))+":",number:j.BREAK,precision:1})]})})]})]})}return i.jsxs(g,{vertical:!0,gap:15,align:"center",style:{width:1068},children:[i.jsxs(g,{align:"center",style:{marginTop:15},vertical:!0,gap:15,children:[i.jsx("pre",{style:{fontSize:28,fontWeight:"bold",margin:0},children:i.jsx(At,{text:t("CharacterPreview.BuildAnalysis.Header"),linkIcon:!0,url:"https://github.com/fribbels/hsr-optimizer/blob/main/docs/guides/en/dps-score.md"})}),i.jsx("pre",{style:{textAlign:"center",color:"rgb(225, 165, 100)",lineHeight:"24px",fontSize:14,textWrap:"wrap",margin:0},children:t("CharacterPreview.BuildAnalysis.ScoringNote")}),i.jsx(fE,{score:o.originalSimScore,minimum:o.baselineSimScore,maximum:o.maximumSimScore,benchmark:o.benchmarkSimScore})]}),i.jsxs(g,{gap:$e,vertical:!0,style:{width:"100%"},align:"center",children:[i.jsx("pre",{style:{fontSize:22,textDecoration:"underline"},children:t("CharacterPreview.SubstatUpgradeComparisons.Header")}),i.jsx(yE,{simScore:o})]}),i.jsxs(g,{gap:$e,vertical:!0,style:{width:"100%"},align:"center",children:[i.jsx("pre",{style:{fontSize:22,textDecoration:"underline"},children:t("CharacterPreview.SubstatUpgradeComparisons.MainStatHeader")}),i.jsx(TE,{simScore:o})]}),i.jsxs(g,{gap:25,style:{width:"100%",marginTop:30},justify:"space-around",children:[i.jsxs(g,{vertical:!0,gap:$e,children:[i.jsx("pre",{style:{margin:"5px auto"},children:t("CharacterPreview.BuildAnalysis.SimulationTeammates")}),i.jsxs(g,{gap:15,children:[i.jsx(dr,{result:o,index:0}),i.jsx(dr,{result:o,index:1}),i.jsx(dr,{result:o,index:2})]})]}),i.jsx(fa,{}),i.jsxs(g,{vertical:!0,gap:$e,children:[i.jsx("pre",{style:{margin:"5px auto"},children:t("CharacterPreview.BuildAnalysis.SimulationSets")}),i.jsxs(g,{vertical:!0,gap:$e,children:[i.jsxs(g,{children:[i.jsx(c,{set:o.maximumSim.request.simRelicSet1}),i.jsx(c,{set:o.maximumSim.request.simRelicSet2})]}),i.jsx(c,{set:o.maximumSim.request.simOrnamentSet})]})]}),i.jsx(fa,{}),i.jsxs(g,{vertical:!0,gap:$e,children:[i.jsx("pre",{style:{margin:"5px auto"},children:t("CharacterPreview.BuildAnalysis.Rotation.Header")}),i.jsxs(g,{gap:30,children:[i.jsxs(g,{vertical:!0,gap:2,children:[i.jsx(D,{comboAbilities:o.simulationMetadata.comboAbilities,index:1}),i.jsx(D,{comboAbilities:o.simulationMetadata.comboAbilities,index:2}),i.jsx(D,{comboAbilities:o.simulationMetadata.comboAbilities,index:3}),i.jsx(D,{comboAbilities:o.simulationMetadata.comboAbilities,index:4}),i.jsx(D,{comboAbilities:o.simulationMetadata.comboAbilities,index:5}),i.jsx(D,{comboAbilities:o.simulationMetadata.comboAbilities,index:6}),i.jsx(D,{comboAbilities:o.simulationMetadata.comboAbilities,index:7}),i.jsx(D,{comboAbilities:o.simulationMetadata.comboAbilities,index:8})]}),i.jsxs(g,{vertical:!0,gap:2,children:[i.jsx(p,{label:t("CharacterPreview.BuildAnalysis.Rotation.DOTS"),number:o.simulationMetadata.comboDot}),i.jsx(p,{label:t("CharacterPreview.BuildAnalysis.Rotation.BREAKS"),number:o.simulationMetadata.comboBreak})]})]})]}),i.jsx(fa,{}),i.jsxs(g,{vertical:!0,gap:10,children:[i.jsx("pre",{style:{margin:"5px auto"},children:t("CharacterPreview.BuildAnalysis.CombatResults.Header")}),i.jsxs(g,{vertical:!0,gap:10,style:{width:255},children:[i.jsx(S,{label:t("CharacterPreview.BuildAnalysis.CombatResults.Primary"),text:t(`CharacterPreview.BuildAnalysis.CombatResults.Abilities.${o.characterMetadata.scoringMetadata.sortOption.key}`)}),i.jsx(u,{label:t("CharacterPreview.BuildAnalysis.CombatResults.Character"),number:o.originalSimScore,precision:1}),i.jsx(u,{label:t("CharacterPreview.BuildAnalysis.CombatResults.Baseline"),number:o.baselineSimScore,precision:1}),i.jsx(u,{label:t("CharacterPreview.BuildAnalysis.CombatResults.Benchmark"),number:o.benchmarkSimScore,precision:1}),i.jsx(u,{label:t("CharacterPreview.BuildAnalysis.CombatResults.Maximum"),number:o.maximumSimScore,precision:1}),i.jsx(u,{label:t("CharacterPreview.BuildAnalysis.CombatResults.Score"),number:o.percent*100,precision:2})]})]})]}),i.jsxs(g,{children:[i.jsx(L,{simulation:o.originalSim,percent:o.percent,precision:2,type:"Character"}),W,i.jsx(L,{simulation:o.benchmarkSim,percent:1,precision:0,type:"Benchmark"}),W,i.jsx(L,{simulation:o.maximumSim,percent:2,precision:0,type:"Perfect"})]}),i.jsxs(g,{vertical:!0,align:"center",style:{width:"100%"},children:[i.jsx("pre",{style:{fontSize:22,textDecoration:"underline"},children:o.simulationForm.deprioritizeBuffs?t("CharacterPreview.BuildAnalysis.CombatBuffs.SubDpsHeader"):t("CharacterPreview.BuildAnalysis.CombatBuffs.Header")}),i.jsx($u,{result:o,size:qu.LARGE})]})]})};function dr(e){const{t}=V("common"),n=e.result.simulationMetadata.teammates[e.index],o=60;return i.jsxs(g,{vertical:!0,align:"center",gap:5,children:[i.jsx("img",{src:k.getCharacterAvatarById(n.characterId),style:{height:o}}),i.jsx("pre",{style:{margin:0},children:t("EidolonNShort",{eidolon:n.characterEidolon})}),i.jsx("img",{src:k.getLightConeIconById(n.lightCone),style:{height:o}}),i.jsx("pre",{style:{margin:0},children:t("SuperimpositionNShort",{superimposition:n.lightConeSuperimposition})})]})}function IE(e,t){const n=t.key;e[f.ELEMENTAL_DMG]+=e[f[`${n}_DMG_BOOST`]],n!=T.DOT.key&&(e[f[`${n}_CR_BOOST`]]&&(e[f.CR]+=e[f[`${n}_CR_BOOST`]]),e[f[`${n}_CD_BOOST`]]&&(e[f.CD]+=e[f[`${n}_CD_BOOST`]]))}const d0={[a.ATK_P]:!0,[a.DEF_P]:!0,[a.HP_P]:!0};function BE(e){const t=e.result,n=new Float32Array(t.originalSimResult.xa),o=t.characterMetadata.scoringMetadata.sortOption;IE(n,o);const{t:s}=V("common"),{t:r}=V("charactersTab"),l=window.store(D=>D.savedSession[Ne.showcasePreciseSpd]),c=t.characterMetadata.scoringMetadata.simulation,d=ei[t.characterMetadata.element];let u=c.substats;u=og(u).filter(D=>!d0[D]),u.length<5&&u.push(a.SPD),u.sort((D,E)=>qt.indexOf(D)-qt.indexOf(E));const h=[...u,d],p=[];for(const D of h){if(d0[D])continue;const E=i0[D]?n[f.ELEMENTAL_DMG]:n[Gt[D]],y=F.isFlat(D),P=i0[D]?F.precisionRound(n[f.ELEMENTAL_DMG],2)!=F.precisionRound(t.originalSimResult.ca[f.ELEMENTAL_DMG],2):F.precisionRound(n[Gt[D]],2)!=F.precisionRound(t.originalSimResult.ca[Gt[D]],2);let _=fn(Math.floor(E));D==a.SPD?_=l?An(C.precisionRound(E,4)):Ct(F.truncate10ths(C.precisionRound(E,4))):y||(_=Ct(F.truncate10ths(E*100)));const x=D.includes("DMG Boost")?s("DamagePercent"):s(`ReadableStats.${D}`);p.push(i.jsxs(g,{justify:"space-between",align:"center",style:{width:"100%"},children:[i.jsx("img",{src:k.getStatIcon(D),style:{width:Ve,height:Ve,marginRight:3}}),i.jsxs(g,{gap:1,align:"center",children:[i.jsx(Hn,{children:x}),P&&i.jsx(GE,{})]}),i.jsx(Mt,{style:{margin:"auto 10px",flexGrow:1,width:"unset",minWidth:"unset"},dashed:!0}),i.jsx(Hn,{children:`${_}${y?"":"%"}`})]},F.randomId()))}const S=t.simulationForm.deprioritizeBuffs?r("CharacterPreview.DetailsSlider.Labels.SubDpsCombatStats"):r("CharacterPreview.DetailsSlider.Labels.CombatStats");return i.jsxs(g,{vertical:!0,gap:1,align:"center",style:{paddingLeft:4,paddingRight:6,marginBottom:1},children:[i.jsx($,{style:{fontSize:16},children:S}),p]})}function GE(){return i.jsx(g,{align:"center",children:i.jsx(sE,{})})}function ME(e){const{t}=V(["common","charactersTab"]),n=e.result,o=[],s=n.originalSimResult.simScore,r=n.percent,l=n.substatUpgrades.filter(h=>h.stat!=a.SPD);for(const h of l.slice(0,4)){const p=h.stat,S=h.simulationResult.simScore/s-1;o.push(i.jsxs(g,{justify:"space-between",align:"center",style:{width:"100%"},children:[i.jsx("img",{src:k.getStatIcon(p),style:{width:Ve,height:Ve,marginRight:3}}),i.jsx(Hn,{children:`+1x ${t(`ShortReadableStats.${p}`)}`}),i.jsx(Mt,{style:{margin:"auto 10px",flexGrow:1,width:"unset",minWidth:"unset"},dashed:!0}),i.jsx(Hn,{children:`+ ${Kn(S*100)}%`})]},F.randomId()))}const c=[],d=n.mainUpgrades[0];if(d&&d.percent-r>0){const h=d.part,p=d.stat,S=d.simulationResult.simScore/s-1;c.push(i.jsxs(g,{gap:3,justify:"space-between",align:"center",style:{width:"100%",paddingLeft:1},children:[i.jsx("img",{src:k.getPart(h),style:{width:Ve,height:Ve,marginRight:3}}),i.jsx(Hn,{children:`➔ ${t(`ShortReadableStats.${p}`)}`}),i.jsx(Mt,{style:{margin:"auto 10px",flexGrow:1,width:"unset",minWidth:"unset"},dashed:!0}),i.jsx(Hn,{children:`+ ${Kn(S*100)}%`})]},F.randomId()))}const u=n.setUpgrades[0];if(u.percent-r>0){const h=u.simulationResult.simScore/s-1;c.push(i.jsxs(g,{gap:2,justify:"space-between",align:"center",style:{width:"100%",paddingLeft:1},children:[i.jsx("img",{src:k.getSetImage(u.simulation.request.simRelicSet1),style:{width:Ve,height:Ve,marginRight:3}}),i.jsx("img",{src:k.getSetImage(u.simulation.request.simRelicSet2),style:{width:Ve,height:Ve,marginRight:5}}),i.jsx("img",{src:k.getSetImage(u.simulation.request.simOrnamentSet),style:{width:Ve,height:Ve,marginRight:3}}),i.jsx(Mt,{style:{margin:"auto 10px",flexGrow:1,width:"unset",minWidth:"unset"},dashed:!0}),i.jsx(Hn,{children:`+ ${Kn(h*100)}%`})]},F.randomId()))}return c.length&&(o.splice(4-c.length,c.length),c.map(h=>o.unshift(h))),i.jsxs(g,{vertical:!0,gap:1,align:"center",style:{paddingLeft:4,paddingRight:6,marginBottom:0},children:[i.jsx(g,{vertical:!0,align:"center",children:i.jsx($,{style:{fontSize:16},children:t("charactersTab:CharacterPreview.DMGUpgrades")})}),o]})}function xE(e,t,n,o){return{LinkRope:hi(e.LinkRope,t.LinkRope,n,o),PlanarSphere:hi(e.PlanarSphere,t.PlanarSphere,n,o),Feet:hi(e.Feet,t.Feet,n,o),Body:hi(e.Body,t.Body,n,o),Hands:hi(e.Hands,t.Hands,n,o),Head:hi(e.Head,t.Head,n,o)}}function hi(e,t,n,o){if(!e)return;const s=dt.scoreRelicPotential(e,o),r=vE(e,n);return{relic:e,estDays:t,estTbp:t*240,currentPotential:s.currentPct,rerollPotential:s.rerollAvgPct,rerollDelta:s.rerollAvgPct-s.currentPct,weights:n.stats,weightedRolls:r}}function vE(e,t){let n=0;for(const o of e.substats){const s=o.stat;if(!(o.rolls&&o.rolls.low!=null&&o.rolls.mid!=null&&o.rolls.high!=null)){const r=o.addedRolls+1,l=s==a.SPD?.3:yt.getMaxedSubstatValue(s)/10,c=o.value,d=yt.getMaxedSubstatValue(s,.8)*r,h=Math.max(0,c-d)/l,p=C.precisionRound(h,0),S=vl(r,p);o.rolls=S.rolls}n+=t.stats[s]*lm(s)*(o.rolls.high+o.rolls.mid*.9+o.rolls.low*.8)}return n}function lm(e){return e==a.HP||e==a.DEF||e==a.ATK?.4:1}function _E(e,t){return C.objectHash({relicsHash:Object.values(e).map(AE),characterId:t})}function AE(e){return e?C.objectHash({enhance:e.enhance,equippedBy:e.equippedBy,grade:e.grade,id:e.id,main:e.main,part:e.part,set:e.set,substats:e.substats}):"-"}const LE=()=>i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10",viewBox:"0 0 24 24",children:i.jsx("g",{transform:"translate(24 1) scale(-1 1)",children:i.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeWidth:"3",d:"M8 12L15 5M8 12L15 19"})})}),FE=e=>i.jsx(Wn,{component:LE,...e}),Yi=(e,t,n)=>{const{t:o}=V("common");if(!(e!=null&&e.stat)||e.value==null)return i.jsx("img",{src:k.getBlank(),style:{width:Ve,height:Ve,marginRight:2,marginLeft:-3}});let s;return t?s=K.renderMainStatNumber(e):s=K.renderSubstatNumber(e,n),s+=F.isFlat(e.stat)?"":"%",i.jsxs(g,{justify:"space-between",align:"center",children:[i.jsxs(g,{children:[i.jsx("img",{src:k.getStatIcon(e.stat),style:{width:Ve,height:Ve,marginRight:2,marginLeft:-3}}),o(`ReadableStats.${e.stat}`)]}),t?i.jsx(i.Fragment,{children:s}):i.jsxs(g,{justify:"space-between",style:{width:"41.5%"},children:[i.jsx(g,{gap:0,align:"center",children:e.addedRolls!=null&&HE(e)}),s]})]})};function HE(e){const t=[];for(let n=0;n<e.addedRolls;n++)t.push(i.jsx(FE,{style:{marginRight:-5,opacity:.75}},n));return e.addedRolls==0&&t.push(i.jsx("div",{},0)),t}const{Text:wE}=Ce,OE=Lt(wE)`
    ${e=>kE(e.language)}
`;function kE(e){switch(e){case"fr_FR":case"pt_BR":case"vi_VN":return`
        white-space: nowrap;
        letter-spacing: -0.2px;
        font-size: 13px;
        line-height: 22px;
      `;default:return`
        white-space: nowrap;
        letter-spacing: -0.2px;
      `}}function u0(e,t,n,o){return e<t?e+(t-e)*o:e>n?e-(e-n)*o:e}function KE(e,t){const r=Wt(e),l=r.get("hsl.s"),c=u0(l,.2,.3,.96),d=r.set("hsl.s",c),u=d.luminance(u0(d.luminance(),.025,.03,.93)).alpha(t?.7:.765);return _o(u,t).css()}function _o(e,t){return t?e.desaturate(.05).darken(.2):e}function jE(e,t){const n=Wt(e).desaturate(.55).luminance(.125).brighten(.75).alpha(.8);return _o(n,t).css()}function WE(e,t){const n=Wt(e).desaturate(.2).luminance(.02);return _o(n,t).css()}function ZE(e,t){const n=Wt(e).desaturate(.5).luminance(.2).alpha(.3);return _o(n,t).css()}function NE(){return"#00000000"}function Nr(){return"background-color 0.35s, box-shadow 0.25s, border-color 0.25s"}const cm="#2241be";function VE(e){const t=cm;return!e||e.length===0||e.map(ur).every(o=>o>.4)?t:e.reduce((o,s,r)=>{const l=Wt.deltaE(o,t),c=Wt.deltaE(s,t),d=ur(o),u=ur(s),h=l*(1+d);return c*(1+u)<h?s:o})}function ur(e){const[o,s,r]=Wt(e).hsl(),l=Math.abs(o-37.5),c=1-Math.min(l/40,1),d=Math.max(0,s-.2);return .8*c+.2*d}function zE(e,t){const[n,,o]=Wt(e).hsl(),[s,,r]=Wt(t).hsl(),l=r-o;return l!==0?l:n-s}function UE(e,t){const n=e.sort(zE),o=[];for(let s=0;s<n.length;s+=t){const l=n.slice(s,s+t).sort((c,d)=>{const u=Wt(c).hsl()[0],h=Wt(d).hsl()[0];return u-h});o.push(...l)}return o}function m0(e){const t=[e.Vibrant,e.DarkVibrant,e.Muted,e.DarkMuted,e.LightVibrant,e.LightMuted,...e.colors].slice(0,64);return UE(t,8)}function XE(e){if(e==cm)return e;const t=Wt(e),n=t.get("hsv.v"),o=n+(1-n)*.45,s=t.get("hsv.s"),r=s-s*.15;return t.set("hsv.v",o).set("hsv.s",r).hex()}function Jt(e){const{source:t,characterId:n,score:o,scoringType:s,setEditModalOpen:r,setAddModalOpen:l,setSelectedRelic:c,showcaseTheme:d,unhoverable:u}=e,p={...{enhance:0,part:void 0,set:void 0,grade:0,substats:[],main:void 0,equippedBy:void 0},...e.relic},S=p.set?k.getSetImage(p.set,p.part):k.getBlank(),D=p.equippedBy?k.getCharacterAvatarById(p.equippedBy):k.getBlank(),E=()=>{!p.id&&!n||t==Tt.SHOWCASE_TAB||t==Tt.BUILDS_MODAL||(p.id?(c(p),r==null||r(!0)):(console.log(`Add new relic for characterId=${n}.`),p.equippedBy=n,p.enhance=15,p.grade=5,c(p),l==null||l(!0)))},y=s==Ya?6:0,P=s==Ya?54:50,_=s==Ya?"space-around":"space-between";return i.jsx(Yn,{size:"small",hoverable:t!=Tt.SHOWCASE_TAB&&t!=Tt.BUILDS_MODAL&&!u,onClick:E,style:{width:200,minWidth:200,height:280,backgroundColor:d==null?void 0:d.cardBackgroundColor,borderColor:d==null?void 0:d.cardBorderColor,transition:Nr(),borderRadius:6,boxShadow:t==null?void 0:Hi+ju},children:i.jsx(OE,{language:w.resolvedLanguage,children:i.jsxs(g,{vertical:!0,justify:_,style:{height:255},children:[i.jsxs(g,{justify:"space-between",align:"center",children:[i.jsx("img",{style:{height:P,width:P},title:p.set,src:S}),i.jsxs(g,{align:"center",gap:8,children:[i.jsx("span",{children:K.renderGrade(p)}),i.jsx("span",{children:p.id!=null?`+${p.enhance}`:""})]}),i.jsx("img",{style:{height:P,width:P,borderRadius:P/2,border:p.equippedBy?"1px solid rgba(150, 150, 150, 0.25)":void 0,backgroundColor:p.equippedBy?"rgba(0, 0, 0, 0.1)":void 0},src:D})]}),i.jsx(Mt,{style:{margin:"6px 0px 6px 0px"}}),Yi(p.main,!0,p),i.jsx(Mt,{style:{margin:"6px 0px 6px 0px"}}),i.jsxs(g,{vertical:!0,gap:y,children:[Yi(p.substats[0],!1,p),Yi(p.substats[1],!1,p),Yi(p.substats[2],!1,p),Yi(p.substats[3],!1,p)]}),s!=Ya&&i.jsx(YE,{score:o})]})})})}function YE(e){var l,c;const{t}=V("common"),{score:n}=e;let o=k.getBlank(),s=!1;const r=n!==void 0;return r&&(((l=n==null?void 0:n.meta)==null?void 0:l.category)==ku.DEFAULT_NO_SPEED?o=k.getScoreNoSpeed():o=k.getScore(),(c=n==null?void 0:n.meta)!=null&&c.modified&&(s=!0)),i.jsxs(i.Fragment,{children:[i.jsx(Mt,{style:{margin:"6px 0px 6px 0px"}}),i.jsxs(g,{justify:"space-between",children:[i.jsxs(g,{children:[i.jsx("img",{src:o,style:{width:Ve,height:Ve,marginRight:2,marginLeft:-3}}),r?`${t("Score")}${s?" *":""}`:""]}),r?`${mS(Number(n.score))} (${n.rating})`:""]})]})}const dm="Y29uc3QgaD17QVRLX1A6IkFUSyUiLEFUSzoiQVRLIixCRToiQnJlYWsgRWZmZWN0IixDRDoiQ1JJVCBETUciLENSOiJDUklUIFJhdGUiLERFRl9QOiJERUYlIixERUY6IkRFRiIsRUhSOiJFZmZlY3QgSGl0IFJhdGUiLEVSUjoiRW5lcmd5IFJlZ2VuZXJhdGlvbiBSYXRlIixGaXJlX0RNRzoiRmlyZSBETUcgQm9vc3QiLEhQX1A6IkhQJSIsSFA6IkhQIixJY2VfRE1HOiJJY2UgRE1HIEJvb3N0IixJbWFnaW5hcnlfRE1HOiJJbWFnaW5hcnkgRE1HIEJvb3N0IixMaWdodG5pbmdfRE1HOiJMaWdodG5pbmcgRE1HIEJvb3N0IixPSEI6Ik91dGdvaW5nIEhlYWxpbmcgQm9vc3QiLFBoeXNpY2FsX0RNRzoiUGh5c2ljYWwgRE1HIEJvb3N0IixRdWFudHVtX0RNRzoiUXVhbnR1bSBETUcgQm9vc3QiLFJFUzoiRWZmZWN0IFJFUyIsU1BEX1A6IlNQRCUiLFNQRDoiU1BEIixXaW5kX0RNRzoiV2luZCBETUcgQm9vc3QifSxLdD1baC5IUF9QLGguQVRLX1AsaC5ERUZfUCxoLkhQLGguQVRLLGguU1BELGguQ1IsaC5DRCxoLkVIUixoLkJFLGguT0hCLGguRVJSLGguUGh5c2ljYWxfRE1HLGguRmlyZV9ETUcsaC5JY2VfRE1HLGguTGlnaHRuaW5nX0RNRyxoLldpbmRfRE1HLGguUXVhbnR1bV9ETUcsaC5JbWFnaW5hcnlfRE1HXSxfdD17W2guSFBfUF06ezU6e2Jhc2U6Ni45MTIsaW5jcmVtZW50OjIuNDE5Mn0sNDp7YmFzZTo1LjUyOTYsaW5jcmVtZW50OjEuOTM1NH0sMzp7YmFzZTo0LjE0NzIsaW5jcmVtZW50OjEuNDUxNX0sMjp7YmFzZToyLjc2NDgsaW5jcmVtZW50Oi45Njc3fX0sW2guQVRLX1BdOns1OntiYXNlOjYuOTEyLGluY3JlbWVudDoyLjQxOTJ9LDQ6e2Jhc2U6NS41Mjk2LGluY3JlbWVudDoxLjkzNTR9LDM6e2Jhc2U6NC4xNDcyLGluY3JlbWVudDoxLjQ1MTV9LDI6e2Jhc2U6Mi43NjQ4LGluY3JlbWVudDouOTY3N319LFtoLkRFRl9QXTp7NTp7YmFzZTo4LjY0LGluY3JlbWVudDozLjAyNH0sNDp7YmFzZTo2LjkxMixpbmNyZW1lbnQ6Mi40MTkyfSwzOntiYXNlOjUuMTg0LGluY3JlbWVudDoxLjgxNDR9LDI6e2Jhc2U6My40NTYsaW5jcmVtZW50OjEuMjA5Nn19LFtoLkhQXTp7NTp7YmFzZToxMTIuODk2LGluY3JlbWVudDozOS41MTM2fSw0OntiYXNlOjkwLjMxNjgsaW5jcmVtZW50OjMxLjYxMDg4fSwzOntiYXNlOjY3LjczNzYsaW5jcmVtZW50OjIzLjcwODE2fSwyOntiYXNlOjQ1LjE1ODQsaW5jcmVtZW50OjE1LjgwNTQ0fX0sW2guQVRLXTp7NTp7YmFzZTo1Ni40NDgsaW5jcmVtZW50OjE5Ljc1Njh9LDQ6e2Jhc2U6NDUuMTU4NCxpbmNyZW1lbnQ6MTUuODA1NDR9LDM6e2Jhc2U6MzMuODY4OCxpbmNyZW1lbnQ6MTEuODU0MDh9LDI6e2Jhc2U6MjIuNTc5MixpbmNyZW1lbnQ6Ny45MDI3Mn19LFtoLlNQRF06ezU6e2Jhc2U6NC4wMzIsaW5jcmVtZW50OjEuNH0sNDp7YmFzZTozLjIyNixpbmNyZW1lbnQ6MS4xfSwzOntiYXNlOjIuNDE5LGluY3JlbWVudDoxfSwyOntiYXNlOjEuNjEzLGluY3JlbWVudDoxfX0sW2guQ1JdOns1OntiYXNlOjUuMTg0LGluY3JlbWVudDoxLjgxNDR9LDQ6e2Jhc2U6NC4xNDcyLGluY3JlbWVudDoxLjQ1MTV9LDM6e2Jhc2U6My4xMTA0LGluY3JlbWVudDoxLjA4ODZ9LDI6e2Jhc2U6Mi4wNzM2LGluY3JlbWVudDouNzI1OH19LFtoLkNEXTp7NTp7YmFzZToxMC4zNjgsaW5jcmVtZW50OjMuNjI4OH0sNDp7YmFzZTo4LjI5NDQsaW5jcmVtZW50OjIuOTAzfSwzOntiYXNlOjYuMjIwOCxpbmNyZW1lbnQ6Mi4xNzczfSwyOntiYXNlOjQuMTQ3MixpbmNyZW1lbnQ6MS40NTE1fX0sW2guRUhSXTp7NTp7YmFzZTo2LjkxMixpbmNyZW1lbnQ6Mi40MTkyfSw0OntiYXNlOjUuNTI5NixpbmNyZW1lbnQ6MS45MzU0fSwzOntiYXNlOjQuMTQ3MixpbmNyZW1lbnQ6MS40NTE1fSwyOntiYXNlOjIuNzY0OCxpbmNyZW1lbnQ6Ljk2Nzd9fSxbaC5CRV06ezU6e2Jhc2U6MTAuMzY4LGluY3JlbWVudDozLjYyODh9LDQ6e2Jhc2U6OC4yOTQ0LGluY3JlbWVudDoyLjkwM30sMzp7YmFzZTo2LjIyMDgsaW5jcmVtZW50OjIuMTc3M30sMjp7YmFzZTo0LjE0NzIsaW5jcmVtZW50OjEuNDUxNX19LFtoLkVSUl06ezU6e2Jhc2U6My4xMTA0LGluY3JlbWVudDoxLjA4ODZ9LDQ6e2Jhc2U6Mi40ODgzLGluY3JlbWVudDouODcwOX0sMzp7YmFzZToxLjg2NjIsaW5jcmVtZW50Oi42NTMyfSwyOntiYXNlOjEuMjQ0MixpbmNyZW1lbnQ6LjQzNTV9fSxbaC5PSEJdOns1OntiYXNlOjUuNTI5NixpbmNyZW1lbnQ6MS45MzU0fSw0OntiYXNlOjQuNDIzNyxpbmNyZW1lbnQ6MS41NDgzfSwzOntiYXNlOjMuMzE3OCxpbmNyZW1lbnQ6MS4xNjEyfSwyOntiYXNlOjIuMjExOCxpbmNyZW1lbnQ6Ljc3NDF9fSxbaC5QaHlzaWNhbF9ETUddOns1OntiYXNlOjYuMjIwOCxpbmNyZW1lbnQ6Mi4xNzczfSw0OntiYXNlOjQuOTc2NixpbmNyZW1lbnQ6MS43NDE4fSwzOntiYXNlOjMuNzMyNSxpbmNyZW1lbnQ6MS4zMDY0fSwyOntiYXNlOjIuNDg4MyxpbmNyZW1lbnQ6Ljg3MDl9fSxbaC5GaXJlX0RNR106ezU6e2Jhc2U6Ni4yMjA4LGluY3JlbWVudDoyLjE3NzN9LDQ6e2Jhc2U6NC45NzY2LGluY3JlbWVudDoxLjc0MTh9LDM6e2Jhc2U6My43MzI1LGluY3JlbWVudDoxLjMwNjR9LDI6e2Jhc2U6Mi40ODgzLGluY3JlbWVudDouODcwOX19LFtoLkljZV9ETUddOns1OntiYXNlOjYuMjIwOCxpbmNyZW1lbnQ6Mi4xNzczfSw0OntiYXNlOjQuOTc2NixpbmNyZW1lbnQ6MS43NDE4fSwzOntiYXNlOjMuNzMyNSxpbmNyZW1lbnQ6MS4zMDY0fSwyOntiYXNlOjIuNDg4MyxpbmNyZW1lbnQ6Ljg3MDl9fSxbaC5MaWdodG5pbmdfRE1HXTp7NTp7YmFzZTo2LjIyMDgsaW5jcmVtZW50OjIuMTc3M30sNDp7YmFzZTo0Ljk3NjYsaW5jcmVtZW50OjEuNzQxOH0sMzp7YmFzZTozLjczMjUsaW5jcmVtZW50OjEuMzA2NH0sMjp7YmFzZToyLjQ4ODMsaW5jcmVtZW50Oi44NzA5fX0sW2guV2luZF9ETUddOns1OntiYXNlOjYuMjIwOCxpbmNyZW1lbnQ6Mi4xNzczfSw0OntiYXNlOjQuOTc2NixpbmNyZW1lbnQ6MS43NDE4fSwzOntiYXNlOjMuNzMyNSxpbmNyZW1lbnQ6MS4zMDY0fSwyOntiYXNlOjIuNDg4MyxpbmNyZW1lbnQ6Ljg3MDl9fSxbaC5RdWFudHVtX0RNR106ezU6e2Jhc2U6Ni4yMjA4LGluY3JlbWVudDoyLjE3NzN9LDQ6e2Jhc2U6NC45NzY2LGluY3JlbWVudDoxLjc0MTh9LDM6e2Jhc2U6My43MzI1LGluY3JlbWVudDoxLjMwNjR9LDI6e2Jhc2U6Mi40ODgzLGluY3JlbWVudDouODcwOX19LFtoLkltYWdpbmFyeV9ETUddOns1OntiYXNlOjYuMjIwOCxpbmNyZW1lbnQ6Mi4xNzczfSw0OntiYXNlOjQuOTc2NixpbmNyZW1lbnQ6MS43NDE4fSwzOntiYXNlOjMuNzMyNSxpbmNyZW1lbnQ6MS4zMDY0fSwyOntiYXNlOjIuNDg4MyxpbmNyZW1lbnQ6Ljg3MDl9fX0sU3Q9W2guSFBfUCxoLkFUS19QLGguREVGX1AsaC5IUCxoLkFUSyxoLkRFRixoLlNQRCxoLkNSLGguQ0QsaC5FSFIsaC5SRVMsaC5CRV0sVnQ9e1toLkhQX1BdOiJIUCAlIixbaC5BVEtfUF06IkFUSyAlIixbaC5ERUZfUF06IkRFRiAlIixbaC5TUERfUF06IlNQRCAlIixbaC5IUF06IkhQIixbaC5BVEtdOiJBVEsiLFtoLkRFRl06IkRFRiIsW2guU1BEXToiU1BEIixbaC5DUl06IkNSSVQgUmF0ZSIsW2guQ0RdOiJDUklUIERNRyIsW2guRUhSXToiRWZmZWN0IEhJVCIsW2guUkVTXToiRWZmZWN0IFJFUyIsW2guQkVdOiJCcmVhayBFZmZlY3QiLFtoLkVSUl06IkVuZXJneSBSZWdlbiIsW2guT0hCXToiSGVhbGluZyBCb29zdCIsW2guUGh5c2ljYWxfRE1HXToiUGh5c2ljYWwgRE1HIixbaC5GaXJlX0RNR106IkZpcmUgRE1HIixbaC5JY2VfRE1HXToiSWNlIERNRyIsW2guTGlnaHRuaW5nX0RNR106IkxpZ2h0bmluZyBETUciLFtoLldpbmRfRE1HXToiV2luZCBETUciLFtoLlF1YW50dW1fRE1HXToiUXVhbnR1bSBETUciLFtoLkltYWdpbmFyeV9ETUddOiJJbWFnaW5hcnkgRE1HIn0sRj17SGVhZDoiSGVhZCIsSGFuZHM6IkhhbmRzIixCb2R5OiJCb2R5IixGZWV0OiJGZWV0IixQbGFuYXJTcGhlcmU6IlBsYW5hclNwaGVyZSIsTGlua1JvcGU6IkxpbmtSb3BlIn0sV3Q9e1tGLkhlYWRdOiJIZWFkIixbRi5IYW5kc106IkhhbmRzIixbRi5Cb2R5XToiQm9keSIsW0YuRmVldF06IkZlZXQiLFtGLlBsYW5hclNwaGVyZV06IlNwaGVyZSIsW0YuTGlua1JvcGVdOiJSb3BlIn0sSnQ9e1tGLkhlYWRdOltoLkhQXSxbRi5IYW5kc106W2guQVRLXSxbRi5Cb2R5XTpbaC5IUF9QLGguQVRLX1AsaC5ERUZfUCxoLkNSLGguQ0QsaC5PSEIsaC5FSFJdLFtGLkZlZXRdOltoLkhQX1AsaC5BVEtfUCxoLkRFRl9QLGguU1BEXSxbRi5QbGFuYXJTcGhlcmVdOltoLkhQX1AsaC5BVEtfUCxoLkRFRl9QLGguUGh5c2ljYWxfRE1HLGguRmlyZV9ETUcsaC5JY2VfRE1HLGguTGlnaHRuaW5nX0RNRyxoLldpbmRfRE1HLGguUXVhbnR1bV9ETUcsaC5JbWFnaW5hcnlfRE1HXSxbRi5MaW5rUm9wZV06W2guSFBfUCxoLkFUS19QLGguREVGX1AsaC5CRSxoLkVSUl19LHBlPXtQYXNzZXJieU9mV2FuZGVyaW5nQ2xvdWQ6IlBhc3NlcmJ5IG9mIFdhbmRlcmluZyBDbG91ZCIsTXVza2V0ZWVyT2ZXaWxkV2hlYXQ6Ik11c2tldGVlciBvZiBXaWxkIFdoZWF0IixLbmlnaHRPZlB1cml0eVBhbGFjZToiS25pZ2h0IG9mIFB1cml0eSBQYWxhY2UiLEh1bnRlck9mR2xhY2lhbEZvcmVzdDoiSHVudGVyIG9mIEdsYWNpYWwgRm9yZXN0IixDaGFtcGlvbk9mU3RyZWV0d2lzZUJveGluZzoiQ2hhbXBpb24gb2YgU3RyZWV0d2lzZSBCb3hpbmciLEd1YXJkT2ZXdXRoZXJpbmdTbm93OiJHdWFyZCBvZiBXdXRoZXJpbmcgU25vdyIsRmlyZXNtaXRoT2ZMYXZhRm9yZ2luZzoiRmlyZXNtaXRoIG9mIExhdmEtRm9yZ2luZyIsR2VuaXVzT2ZCcmlsbGlhbnRTdGFyczoiR2VuaXVzIG9mIEJyaWxsaWFudCBTdGFycyIsQmFuZE9mU2l6emxpbmdUaHVuZGVyOiJCYW5kIG9mIFNpenpsaW5nIFRodW5kZXIiLEVhZ2xlT2ZUd2lsaWdodExpbmU6IkVhZ2xlIG9mIFR3aWxpZ2h0IExpbmUiLFRoaWVmT2ZTaG9vdGluZ01ldGVvcjoiVGhpZWYgb2YgU2hvb3RpbmcgTWV0ZW9yIixXYXN0ZWxhbmRlck9mQmFuZGl0cnlEZXNlcnQ6Ildhc3RlbGFuZGVyIG9mIEJhbmRpdHJ5IERlc2VydCIsTG9uZ2V2b3VzRGlzY2lwbGU6Ikxvbmdldm91cyBEaXNjaXBsZSIsTWVzc2VuZ2VyVHJhdmVyc2luZ0hhY2tlcnNwYWNlOiJNZXNzZW5nZXIgVHJhdmVyc2luZyBIYWNrZXJzcGFjZSIsVGhlQXNoYmxhemluZ0dyYW5kRHVrZToiVGhlIEFzaGJsYXppbmcgR3JhbmQgRHVrZSIsUHJpc29uZXJJbkRlZXBDb25maW5lbWVudDoiUHJpc29uZXIgaW4gRGVlcCBDb25maW5lbWVudCIsUGlvbmVlckRpdmVyT2ZEZWFkV2F0ZXJzOiJQaW9uZWVyIERpdmVyIG9mIERlYWQgV2F0ZXJzIixXYXRjaG1ha2VyTWFzdGVyT2ZEcmVhbU1hY2hpbmF0aW9uczoiV2F0Y2htYWtlciwgTWFzdGVyIG9mIERyZWFtIE1hY2hpbmF0aW9ucyIsSXJvbkNhdmFscnlBZ2FpbnN0VGhlU2NvdXJnZToiSXJvbiBDYXZhbHJ5IEFnYWluc3QgdGhlIFNjb3VyZ2UiLFRoZVdpbmRTb2FyaW5nVmFsb3JvdXM6IlRoZSBXaW5kLVNvYXJpbmcgVmFsb3JvdXMiLFNhY2VyZG9zUmVsaXZlZE9yZGVhbDoiU2FjZXJkb3MnIFJlbGl2ZWQgT3JkZWFsIixTY2hvbGFyTG9zdEluRXJ1ZGl0aW9uOiJTY2hvbGFyIExvc3QgaW4gRXJ1ZGl0aW9uIixIZXJvT2ZUcml1bXBoYW50U29uZzoiSGVybyBvZiBUcml1bXBoYW50IFNvbmciLFBvZXRPZk1vdXJuaW5nQ29sbGFwc2U6IlBvZXQgb2YgTW91cm5pbmcgQ29sbGFwc2UifSxnZT17U3BhY2VTZWFsaW5nU3RhdGlvbjoiU3BhY2UgU2VhbGluZyBTdGF0aW9uIixGbGVldE9mVGhlQWdlbGVzczoiRmxlZXQgb2YgdGhlIEFnZWxlc3MiLFBhbkNvc21pY0NvbW1lcmNpYWxFbnRlcnByaXNlOiJQYW4tQ29zbWljIENvbW1lcmNpYWwgRW50ZXJwcmlzZSIsQmVsb2JvZ09mVGhlQXJjaGl0ZWN0czoiQmVsb2JvZyBvZiB0aGUgQXJjaGl0ZWN0cyIsQ2VsZXN0aWFsRGlmZmVyZW50aWF0b3I6IkNlbGVzdGlhbCBEaWZmZXJlbnRpYXRvciIsSW5lcnRTYWxzb3R0bzoiSW5lcnQgU2Fsc290dG8iLFRhbGlhS2luZ2RvbU9mQmFuZGl0cnk6IlRhbGlhOiBLaW5nZG9tIG9mIEJhbmRpdHJ5IixTcHJpZ2h0bHlWb253YWNxOiJTcHJpZ2h0bHkgVm9ud2FjcSIsUnV0aWxhbnRBcmVuYToiUnV0aWxhbnQgQXJlbmEiLEJyb2tlbktlZWw6IkJyb2tlbiBLZWVsIixGaXJtYW1lbnRGcm9udGxpbmVHbGFtb3RoOiJGaXJtYW1lbnQgRnJvbnRsaW5lOiBHbGFtb3RoIixQZW5hY29ueUxhbmRPZlRoZURyZWFtczoiUGVuYWNvbnksIExhbmQgb2YgdGhlIERyZWFtcyIsU2lnb25pYVRoZVVuY2xhaW1lZERlc29sYXRpb246IlNpZ29uaWEsIHRoZSBVbmNsYWltZWQgRGVzb2xhdGlvbiIsSXp1bW9HZW5zZWlBbmRUYWthbWFEaXZpbmVSZWFsbToiSXp1bW8gR2Vuc2VpIGFuZCBUYWthbWEgRGl2aW5lIFJlYWxtIixEdXJhbkR5bmFzdHlPZlJ1bm5pbmdXb2x2ZXM6IkR1cmFuLCBEeW5hc3R5IG9mIFJ1bm5pbmcgV29sdmVzIixGb3JnZU9mVGhlS2FscGFnbmlMYW50ZXJuOiJGb3JnZSBvZiB0aGUgS2FscGFnbmkgTGFudGVybiIsTHVzaGFrYVRoZVN1bmtlblNlYXM6Ikx1c2hha2EsIHRoZSBTdW5rZW4gU2VhcyIsVGhlV29uZHJvdXNCYW5hbkFtdXNlbWVudFBhcms6IlRoZSBXb25kcm91cyBCYW5hbkFtdXNlbWVudCBQYXJrIixCb25lQ29sbGVjdGlvbnNTZXJlbmVEZW1lc25lOiJCb25lIENvbGxlY3Rpb24ncyBTZXJlbmUgRGVtZXNuZSIsR2lhbnRUcmVlT2ZSYXB0QnJvb2Rpbmc6IkdpYW50IFRyZWUgb2YgUmFwdCBCcm9vZGluZyJ9LHp0PXsuLi5wZSwuLi5nZX0sRWU9T2JqZWN0LnZhbHVlcyhwZSksRGU9T2JqZWN0LnZhbHVlcyhnZSksUHQ9e307Zm9yKGxldCBuPTA7bjxEZS5sZW5ndGg7bisrKVB0W0RlW25dXT1uO2NvbnN0IHh0PXt9O2ZvcihsZXQgbj0wO248RWUubGVuZ3RoO24rKyl4dFtFZVtuXV09bjtPYmplY3QudmFsdWVzKHBlKS5sZW5ndGg7T2JqZWN0LnZhbHVlcyhnZSkubGVuZ3RoO2NvbnN0IE5lPXtTZXRzOnp0LFBhcnRzOkYsU3RhdHM6aCxNYWluU3RhdHM6S3QsTWFpblN0YXRzVmFsdWVzOl90LFN1YlN0YXRzOlN0LFNldHNPcm5hbWVudHM6Z2UsU2V0c1JlbGljczpwZSxTZXRzUmVsaWNzTmFtZXM6RWUsU2V0c09ybmFtZW50c05hbWVzOkRlLFN0YXRzVG9SZWFkYWJsZTpWdCxQYXJ0c1RvUmVhZGFibGU6V3QsUGFydHNNYWluU3RhdHM6SnQsUmVsaWNTZXRUb0luZGV4Onh0LE9ybmFtZW50U2V0VG9JbmRleDpQdCxNQVhfSU5UOjIxNDc0ODM2NDcsVEhSRUFEX0JVRkZFUl9MRU5HVEg6MTVlNH0sUXQ9e3R5cGU6ImxvZ2dlciIsbG9nKG4pe3RoaXMub3V0cHV0KCJsb2ciLG4pfSx3YXJuKG4pe3RoaXMub3V0cHV0KCJ3YXJuIixuKX0sZXJyb3Iobil7dGhpcy5vdXRwdXQoImVycm9yIixuKX0sb3V0cHV0KG4sZSl7Y29uc29sZSYmY29uc29sZVtuXSYmY29uc29sZVtuXS5hcHBseShjb25zb2xlLGUpfX07Y2xhc3MgYWV7Y29uc3RydWN0b3IoZSl7bGV0IHQ9YXJndW1lbnRzLmxlbmd0aD4xJiZhcmd1bWVudHNbMV0hPT12b2lkIDA/YXJndW1lbnRzWzFdOnt9O3RoaXMuaW5pdChlLHQpfWluaXQoZSl7bGV0IHQ9YXJndW1lbnRzLmxlbmd0aD4xJiZhcmd1bWVudHNbMV0hPT12b2lkIDA/YXJndW1lbnRzWzFdOnt9O3RoaXMucHJlZml4PXQucHJlZml4fHwiaTE4bmV4dDoiLHRoaXMubG9nZ2VyPWV8fFF0LHRoaXMub3B0aW9ucz10LHRoaXMuZGVidWc9dC5kZWJ1Z31sb2coKXtmb3IodmFyIGU9YXJndW1lbnRzLmxlbmd0aCx0PW5ldyBBcnJheShlKSxyPTA7cjxlO3IrKyl0W3JdPWFyZ3VtZW50c1tyXTtyZXR1cm4gdGhpcy5mb3J3YXJkKHQsImxvZyIsIiIsITApfXdhcm4oKXtmb3IodmFyIGU9YXJndW1lbnRzLmxlbmd0aCx0PW5ldyBBcnJheShlKSxyPTA7cjxlO3IrKyl0W3JdPWFyZ3VtZW50c1tyXTtyZXR1cm4gdGhpcy5mb3J3YXJkKHQsIndhcm4iLCIiLCEwKX1lcnJvcigpe2Zvcih2YXIgZT1hcmd1bWVudHMubGVuZ3RoLHQ9bmV3IEFycmF5KGUpLHI9MDtyPGU7cisrKXRbcl09YXJndW1lbnRzW3JdO3JldHVybiB0aGlzLmZvcndhcmQodCwiZXJyb3IiLCIiKX1kZXByZWNhdGUoKXtmb3IodmFyIGU9YXJndW1lbnRzLmxlbmd0aCx0PW5ldyBBcnJheShlKSxyPTA7cjxlO3IrKyl0W3JdPWFyZ3VtZW50c1tyXTtyZXR1cm4gdGhpcy5mb3J3YXJkKHQsIndhcm4iLCJXQVJOSU5HIERFUFJFQ0FURUQ6ICIsITApfWZvcndhcmQoZSx0LHIsaSl7cmV0dXJuIGkmJiF0aGlzLmRlYnVnP251bGw6KHR5cGVvZiBlWzBdPT0ic3RyaW5nIiYmKGVbMF09YCR7cn0ke3RoaXMucHJlZml4fSAke2VbMF19YCksdGhpcy5sb2dnZXJbdF0oZSkpfWNyZWF0ZShlKXtyZXR1cm4gbmV3IGFlKHRoaXMubG9nZ2VyLHtwcmVmaXg6YCR7dGhpcy5wcmVmaXh9OiR7ZX06YCwuLi50aGlzLm9wdGlvbnN9KX1jbG9uZShlKXtyZXR1cm4gZT1lfHx0aGlzLm9wdGlvbnMsZS5wcmVmaXg9ZS5wcmVmaXh8fHRoaXMucHJlZml4LG5ldyBhZSh0aGlzLmxvZ2dlcixlKX19dmFyIEM9bmV3IGFlO2NsYXNzIGhle2NvbnN0cnVjdG9yKCl7dGhpcy5vYnNlcnZlcnM9e319b24oZSx0KXtyZXR1cm4gZS5zcGxpdCgiICIpLmZvckVhY2gocj0+e3RoaXMub2JzZXJ2ZXJzW3JdfHwodGhpcy5vYnNlcnZlcnNbcl09bmV3IE1hcCk7Y29uc3QgaT10aGlzLm9ic2VydmVyc1tyXS5nZXQodCl8fDA7dGhpcy5vYnNlcnZlcnNbcl0uc2V0KHQsaSsxKX0pLHRoaXN9b2ZmKGUsdCl7aWYodGhpcy5vYnNlcnZlcnNbZV0pe2lmKCF0KXtkZWxldGUgdGhpcy5vYnNlcnZlcnNbZV07cmV0dXJufXRoaXMub2JzZXJ2ZXJzW2VdLmRlbGV0ZSh0KX19ZW1pdChlKXtmb3IodmFyIHQ9YXJndW1lbnRzLmxlbmd0aCxyPW5ldyBBcnJheSh0PjE/dC0xOjApLGk9MTtpPHQ7aSsrKXJbaS0xXT1hcmd1bWVudHNbaV07dGhpcy5vYnNlcnZlcnNbZV0mJkFycmF5LmZyb20odGhpcy5vYnNlcnZlcnNbZV0uZW50cmllcygpKS5mb3JFYWNoKGE9PntsZXRbbyxsXT1hO2ZvcihsZXQgZj0wO2Y8bDtmKyspbyguLi5yKX0pLHRoaXMub2JzZXJ2ZXJzWyIqIl0mJkFycmF5LmZyb20odGhpcy5vYnNlcnZlcnNbIioiXS5lbnRyaWVzKCkpLmZvckVhY2goYT0+e2xldFtvLGxdPWE7Zm9yKGxldCBmPTA7ZjxsO2YrKylvLmFwcGx5KG8sW2UsLi4ucl0pfSl9fWNvbnN0IEo9KCk9PntsZXQgbixlO2NvbnN0IHQ9bmV3IFByb21pc2UoKHIsaSk9PntuPXIsZT1pfSk7cmV0dXJuIHQucmVzb2x2ZT1uLHQucmVqZWN0PWUsdH0sTWU9bj0+bj09bnVsbD8iIjoiIituLHF0PShuLGUsdCk9PntuLmZvckVhY2gocj0+e2Vbcl0mJih0W3JdPWVbcl0pfSl9LFl0PS8jIyMvZyxqZT1uPT5uJiZuLmluZGV4T2YoIiMjIyIpPi0xP24ucmVwbGFjZShZdCwiLiIpOm4sQmU9bj0+IW58fHR5cGVvZiBuPT0ic3RyaW5nIix6PShuLGUsdCk9Pntjb25zdCByPXR5cGVvZiBlIT0ic3RyaW5nIj9lOmUuc3BsaXQoIi4iKTtsZXQgaT0wO2Zvcig7aTxyLmxlbmd0aC0xOyl7aWYoQmUobikpcmV0dXJue307Y29uc3Qgcz1qZShyW2ldKTshbltzXSYmdCYmKG5bc109bmV3IHQpLE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChuLHMpP249bltzXTpuPXt9LCsraX1yZXR1cm4gQmUobik/e306e29iajpuLGs6amUocltpXSl9fSxVZT0obixlLHQpPT57Y29uc3R7b2JqOnIsazppfT16KG4sZSxPYmplY3QpO2lmKHIhPT12b2lkIDB8fGUubGVuZ3RoPT09MSl7cltpXT10O3JldHVybn1sZXQgcz1lW2UubGVuZ3RoLTFdLGE9ZS5zbGljZSgwLGUubGVuZ3RoLTEpLG89eihuLGEsT2JqZWN0KTtmb3IoO28ub2JqPT09dm9pZCAwJiZhLmxlbmd0aDspcz1gJHthW2EubGVuZ3RoLTFdfS4ke3N9YCxhPWEuc2xpY2UoMCxhLmxlbmd0aC0xKSxvPXoobixhLE9iamVjdCksbyYmby5vYmomJnR5cGVvZiBvLm9ialtgJHtvLmt9LiR7c31gXTwidSImJihvLm9iaj12b2lkIDApO28ub2JqW2Ake28ua30uJHtzfWBdPXR9LFp0PShuLGUsdCxyKT0+e2NvbnN0e29iajppLGs6c309eihuLGUsT2JqZWN0KTtpW3NdPWlbc118fFtdLGlbc10ucHVzaCh0KX0sb2U9KG4sZSk9Pntjb25zdHtvYmo6dCxrOnJ9PXoobixlKTtpZih0KXJldHVybiB0W3JdfSxYdD0obixlLHQpPT57Y29uc3Qgcj1vZShuLHQpO3JldHVybiByIT09dm9pZCAwP3I6b2UoZSx0KX0sT3Q9KG4sZSx0KT0+e2Zvcihjb25zdCByIGluIGUpciE9PSJfX3Byb3RvX18iJiZyIT09ImNvbnN0cnVjdG9yIiYmKHIgaW4gbj90eXBlb2YgbltyXT09InN0cmluZyJ8fG5bcl1pbnN0YW5jZW9mIFN0cmluZ3x8dHlwZW9mIGVbcl09PSJzdHJpbmcifHxlW3JdaW5zdGFuY2VvZiBTdHJpbmc/dCYmKG5bcl09ZVtyXSk6T3QobltyXSxlW3JdLHQpOm5bcl09ZVtyXSk7cmV0dXJuIG59LE49bj0+bi5yZXBsYWNlKC9bXC1cW1xdXC9ce1x9XChcKVwqXCtcP1wuXFxcXlwkXHxdL2csIlxcJCYiKTt2YXIgZXI9eyImIjoiJmFtcDsiLCI8IjoiJmx0OyIsIj4iOiImZ3Q7IiwnIic6IiZxdW90OyIsIiciOiImIzM5OyIsIi8iOiImI3gyRjsifTtjb25zdCB0cj1uPT50eXBlb2Ygbj09InN0cmluZyI/bi5yZXBsYWNlKC9bJjw+IidcL10vZyxlPT5lcltlXSk6bjtjbGFzcyBycntjb25zdHJ1Y3RvcihlKXt0aGlzLmNhcGFjaXR5PWUsdGhpcy5yZWdFeHBNYXA9bmV3IE1hcCx0aGlzLnJlZ0V4cFF1ZXVlPVtdfWdldFJlZ0V4cChlKXtjb25zdCB0PXRoaXMucmVnRXhwTWFwLmdldChlKTtpZih0IT09dm9pZCAwKXJldHVybiB0O2NvbnN0IHI9bmV3IFJlZ0V4cChlKTtyZXR1cm4gdGhpcy5yZWdFeHBRdWV1ZS5sZW5ndGg9PT10aGlzLmNhcGFjaXR5JiZ0aGlzLnJlZ0V4cE1hcC5kZWxldGUodGhpcy5yZWdFeHBRdWV1ZS5zaGlmdCgpKSx0aGlzLnJlZ0V4cE1hcC5zZXQoZSxyKSx0aGlzLnJlZ0V4cFF1ZXVlLnB1c2goZSkscn19Y29uc3QgbnI9WyIgIiwiLCIsIj8iLCIhIiwiOyJdLGlyPW5ldyBycigyMCksc3I9KG4sZSx0KT0+e2U9ZXx8IiIsdD10fHwiIjtjb25zdCByPW5yLmZpbHRlcihhPT5lLmluZGV4T2YoYSk8MCYmdC5pbmRleE9mKGEpPDApO2lmKHIubGVuZ3RoPT09MClyZXR1cm4hMDtjb25zdCBpPWlyLmdldFJlZ0V4cChgKCR7ci5tYXAoYT0+YT09PSI/Ij8iXFw/IjphKS5qb2luKCJ8Iil9KWApO2xldCBzPSFpLnRlc3Qobik7aWYoIXMpe2NvbnN0IGE9bi5pbmRleE9mKHQpO2E+MCYmIWkudGVzdChuLnN1YnN0cmluZygwLGEpKSYmKHM9ITApfXJldHVybiBzfSxMZT1mdW5jdGlvbihuLGUpe2xldCB0PWFyZ3VtZW50cy5sZW5ndGg+MiYmYXJndW1lbnRzWzJdIT09dm9pZCAwP2FyZ3VtZW50c1syXToiLiI7aWYoIW4pcmV0dXJuO2lmKG5bZV0pcmV0dXJuIG5bZV07Y29uc3Qgcj1lLnNwbGl0KHQpO2xldCBpPW47Zm9yKGxldCBzPTA7czxyLmxlbmd0aDspe2lmKCFpfHx0eXBlb2YgaSE9Im9iamVjdCIpcmV0dXJuO2xldCBhLG89IiI7Zm9yKGxldCBsPXM7bDxyLmxlbmd0aDsrK2wpaWYobCE9PXMmJihvKz10KSxvKz1yW2xdLGE9aVtvXSxhIT09dm9pZCAwKXtpZihbInN0cmluZyIsIm51bWJlciIsImJvb2xlYW4iXS5pbmRleE9mKHR5cGVvZiBhKT4tMSYmbDxyLmxlbmd0aC0xKWNvbnRpbnVlO3MrPWwtcysxO2JyZWFrfWk9YX1yZXR1cm4gaX0sbGU9bj0+biYmbi5pbmRleE9mKCJfIik+MD9uLnJlcGxhY2UoIl8iLCItIik6bjtjbGFzcyBHZSBleHRlbmRzIGhle2NvbnN0cnVjdG9yKGUpe2xldCB0PWFyZ3VtZW50cy5sZW5ndGg+MSYmYXJndW1lbnRzWzFdIT09dm9pZCAwP2FyZ3VtZW50c1sxXTp7bnM6WyJ0cmFuc2xhdGlvbiJdLGRlZmF1bHROUzoidHJhbnNsYXRpb24ifTtzdXBlcigpLHRoaXMuZGF0YT1lfHx7fSx0aGlzLm9wdGlvbnM9dCx0aGlzLm9wdGlvbnMua2V5U2VwYXJhdG9yPT09dm9pZCAwJiYodGhpcy5vcHRpb25zLmtleVNlcGFyYXRvcj0iLiIpLHRoaXMub3B0aW9ucy5pZ25vcmVKU09OU3RydWN0dXJlPT09dm9pZCAwJiYodGhpcy5vcHRpb25zLmlnbm9yZUpTT05TdHJ1Y3R1cmU9ITApfWFkZE5hbWVzcGFjZXMoZSl7dGhpcy5vcHRpb25zLm5zLmluZGV4T2YoZSk8MCYmdGhpcy5vcHRpb25zLm5zLnB1c2goZSl9cmVtb3ZlTmFtZXNwYWNlcyhlKXtjb25zdCB0PXRoaXMub3B0aW9ucy5ucy5pbmRleE9mKGUpO3Q+LTEmJnRoaXMub3B0aW9ucy5ucy5zcGxpY2UodCwxKX1nZXRSZXNvdXJjZShlLHQscil7bGV0IGk9YXJndW1lbnRzLmxlbmd0aD4zJiZhcmd1bWVudHNbM10hPT12b2lkIDA/YXJndW1lbnRzWzNdOnt9O2NvbnN0IHM9aS5rZXlTZXBhcmF0b3IhPT12b2lkIDA/aS5rZXlTZXBhcmF0b3I6dGhpcy5vcHRpb25zLmtleVNlcGFyYXRvcixhPWkuaWdub3JlSlNPTlN0cnVjdHVyZSE9PXZvaWQgMD9pLmlnbm9yZUpTT05TdHJ1Y3R1cmU6dGhpcy5vcHRpb25zLmlnbm9yZUpTT05TdHJ1Y3R1cmU7bGV0IG87ZS5pbmRleE9mKCIuIik+LTE/bz1lLnNwbGl0KCIuIik6KG89W2UsdF0sciYmKEFycmF5LmlzQXJyYXkocik/by5wdXNoKC4uLnIpOnR5cGVvZiByPT0ic3RyaW5nIiYmcz9vLnB1c2goLi4uci5zcGxpdChzKSk6by5wdXNoKHIpKSk7Y29uc3QgbD1vZSh0aGlzLmRhdGEsbyk7cmV0dXJuIWwmJiF0JiYhciYmZS5pbmRleE9mKCIuIik+LTEmJihlPW9bMF0sdD1vWzFdLHI9by5zbGljZSgyKS5qb2luKCIuIikpLGx8fCFhfHx0eXBlb2YgciE9InN0cmluZyI/bDpMZSh0aGlzLmRhdGEmJnRoaXMuZGF0YVtlXSYmdGhpcy5kYXRhW2VdW3RdLHIscyl9YWRkUmVzb3VyY2UoZSx0LHIsaSl7bGV0IHM9YXJndW1lbnRzLmxlbmd0aD40JiZhcmd1bWVudHNbNF0hPT12b2lkIDA/YXJndW1lbnRzWzRdOntzaWxlbnQ6ITF9O2NvbnN0IGE9cy5rZXlTZXBhcmF0b3IhPT12b2lkIDA/cy5rZXlTZXBhcmF0b3I6dGhpcy5vcHRpb25zLmtleVNlcGFyYXRvcjtsZXQgbz1bZSx0XTtyJiYobz1vLmNvbmNhdChhP3Iuc3BsaXQoYSk6cikpLGUuaW5kZXhPZigiLiIpPi0xJiYobz1lLnNwbGl0KCIuIiksaT10LHQ9b1sxXSksdGhpcy5hZGROYW1lc3BhY2VzKHQpLFVlKHRoaXMuZGF0YSxvLGkpLHMuc2lsZW50fHx0aGlzLmVtaXQoImFkZGVkIixlLHQscixpKX1hZGRSZXNvdXJjZXMoZSx0LHIpe2xldCBpPWFyZ3VtZW50cy5sZW5ndGg+MyYmYXJndW1lbnRzWzNdIT09dm9pZCAwP2FyZ3VtZW50c1szXTp7c2lsZW50OiExfTtmb3IoY29uc3QgcyBpbiByKSh0eXBlb2YgcltzXT09InN0cmluZyJ8fEFycmF5LmlzQXJyYXkocltzXSkpJiZ0aGlzLmFkZFJlc291cmNlKGUsdCxzLHJbc10se3NpbGVudDohMH0pO2kuc2lsZW50fHx0aGlzLmVtaXQoImFkZGVkIixlLHQscil9YWRkUmVzb3VyY2VCdW5kbGUoZSx0LHIsaSxzKXtsZXQgYT1hcmd1bWVudHMubGVuZ3RoPjUmJmFyZ3VtZW50c1s1XSE9PXZvaWQgMD9hcmd1bWVudHNbNV06e3NpbGVudDohMSxza2lwQ29weTohMX0sbz1bZSx0XTtlLmluZGV4T2YoIi4iKT4tMSYmKG89ZS5zcGxpdCgiLiIpLGk9cixyPXQsdD1vWzFdKSx0aGlzLmFkZE5hbWVzcGFjZXModCk7bGV0IGw9b2UodGhpcy5kYXRhLG8pfHx7fTthLnNraXBDb3B5fHwocj1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHIpKSksaT9PdChsLHIscyk6bD17Li4ubCwuLi5yfSxVZSh0aGlzLmRhdGEsbyxsKSxhLnNpbGVudHx8dGhpcy5lbWl0KCJhZGRlZCIsZSx0LHIpfXJlbW92ZVJlc291cmNlQnVuZGxlKGUsdCl7dGhpcy5oYXNSZXNvdXJjZUJ1bmRsZShlLHQpJiZkZWxldGUgdGhpcy5kYXRhW2VdW3RdLHRoaXMucmVtb3ZlTmFtZXNwYWNlcyh0KSx0aGlzLmVtaXQoInJlbW92ZWQiLGUsdCl9aGFzUmVzb3VyY2VCdW5kbGUoZSx0KXtyZXR1cm4gdGhpcy5nZXRSZXNvdXJjZShlLHQpIT09dm9pZCAwfWdldFJlc291cmNlQnVuZGxlKGUsdCl7cmV0dXJuIHR8fCh0PXRoaXMub3B0aW9ucy5kZWZhdWx0TlMpLHRoaXMub3B0aW9ucy5jb21wYXRpYmlsaXR5QVBJPT09InYxIj97Li4udGhpcy5nZXRSZXNvdXJjZShlLHQpfTp0aGlzLmdldFJlc291cmNlKGUsdCl9Z2V0RGF0YUJ5TGFuZ3VhZ2UoZSl7cmV0dXJuIHRoaXMuZGF0YVtlXX1oYXNMYW5ndWFnZVNvbWVUcmFuc2xhdGlvbnMoZSl7Y29uc3QgdD10aGlzLmdldERhdGFCeUxhbmd1YWdlKGUpO3JldHVybiEhKHQmJk9iamVjdC5rZXlzKHQpfHxbXSkuZmluZChpPT50W2ldJiZPYmplY3Qua2V5cyh0W2ldKS5sZW5ndGg+MCl9dG9KU09OKCl7cmV0dXJuIHRoaXMuZGF0YX19dmFyIHd0PXtwcm9jZXNzb3JzOnt9LGFkZFBvc3RQcm9jZXNzb3Iobil7dGhpcy5wcm9jZXNzb3JzW24ubmFtZV09bn0saGFuZGxlKG4sZSx0LHIsaSl7cmV0dXJuIG4uZm9yRWFjaChzPT57dGhpcy5wcm9jZXNzb3JzW3NdJiYoZT10aGlzLnByb2Nlc3NvcnNbc10ucHJvY2VzcyhlLHQscixpKSl9KSxlfX07Y29uc3QgSGU9e307Y2xhc3MgdWUgZXh0ZW5kcyBoZXtjb25zdHJ1Y3RvcihlKXtsZXQgdD1hcmd1bWVudHMubGVuZ3RoPjEmJmFyZ3VtZW50c1sxXSE9PXZvaWQgMD9hcmd1bWVudHNbMV06e307c3VwZXIoKSxxdChbInJlc291cmNlU3RvcmUiLCJsYW5ndWFnZVV0aWxzIiwicGx1cmFsUmVzb2x2ZXIiLCJpbnRlcnBvbGF0b3IiLCJiYWNrZW5kQ29ubmVjdG9yIiwiaTE4bkZvcm1hdCIsInV0aWxzIl0sZSx0aGlzKSx0aGlzLm9wdGlvbnM9dCx0aGlzLm9wdGlvbnMua2V5U2VwYXJhdG9yPT09dm9pZCAwJiYodGhpcy5vcHRpb25zLmtleVNlcGFyYXRvcj0iLiIpLHRoaXMubG9nZ2VyPUMuY3JlYXRlKCJ0cmFuc2xhdG9yIil9Y2hhbmdlTGFuZ3VhZ2UoZSl7ZSYmKHRoaXMubGFuZ3VhZ2U9ZSl9ZXhpc3RzKGUpe2xldCB0PWFyZ3VtZW50cy5sZW5ndGg+MSYmYXJndW1lbnRzWzFdIT09dm9pZCAwP2FyZ3VtZW50c1sxXTp7aW50ZXJwb2xhdGlvbjp7fX07aWYoZT09bnVsbClyZXR1cm4hMTtjb25zdCByPXRoaXMucmVzb2x2ZShlLHQpO3JldHVybiByJiZyLnJlcyE9PXZvaWQgMH1leHRyYWN0RnJvbUtleShlLHQpe2xldCByPXQubnNTZXBhcmF0b3IhPT12b2lkIDA/dC5uc1NlcGFyYXRvcjp0aGlzLm9wdGlvbnMubnNTZXBhcmF0b3I7cj09PXZvaWQgMCYmKHI9IjoiKTtjb25zdCBpPXQua2V5U2VwYXJhdG9yIT09dm9pZCAwP3Qua2V5U2VwYXJhdG9yOnRoaXMub3B0aW9ucy5rZXlTZXBhcmF0b3I7bGV0IHM9dC5uc3x8dGhpcy5vcHRpb25zLmRlZmF1bHROU3x8W107Y29uc3QgYT1yJiZlLmluZGV4T2Yocik+LTEsbz0hdGhpcy5vcHRpb25zLnVzZXJEZWZpbmVkS2V5U2VwYXJhdG9yJiYhdC5rZXlTZXBhcmF0b3ImJiF0aGlzLm9wdGlvbnMudXNlckRlZmluZWROc1NlcGFyYXRvciYmIXQubnNTZXBhcmF0b3ImJiFzcihlLHIsaSk7aWYoYSYmIW8pe2NvbnN0IGw9ZS5tYXRjaCh0aGlzLmludGVycG9sYXRvci5uZXN0aW5nUmVnZXhwKTtpZihsJiZsLmxlbmd0aD4wKXJldHVybntrZXk6ZSxuYW1lc3BhY2VzOnN9O2NvbnN0IGY9ZS5zcGxpdChyKTsociE9PWl8fHI9PT1pJiZ0aGlzLm9wdGlvbnMubnMuaW5kZXhPZihmWzBdKT4tMSkmJihzPWYuc2hpZnQoKSksZT1mLmpvaW4oaSl9cmV0dXJuIHR5cGVvZiBzPT0ic3RyaW5nIiYmKHM9W3NdKSx7a2V5OmUsbmFtZXNwYWNlczpzfX10cmFuc2xhdGUoZSx0LHIpe2lmKHR5cGVvZiB0IT0ib2JqZWN0IiYmdGhpcy5vcHRpb25zLm92ZXJsb2FkVHJhbnNsYXRpb25PcHRpb25IYW5kbGVyJiYodD10aGlzLm9wdGlvbnMub3ZlcmxvYWRUcmFuc2xhdGlvbk9wdGlvbkhhbmRsZXIoYXJndW1lbnRzKSksdHlwZW9mIHQ9PSJvYmplY3QiJiYodD17Li4udH0pLHR8fCh0PXt9KSxlPT1udWxsKXJldHVybiIiO0FycmF5LmlzQXJyYXkoZSl8fChlPVtTdHJpbmcoZSldKTtjb25zdCBpPXQucmV0dXJuRGV0YWlscyE9PXZvaWQgMD90LnJldHVybkRldGFpbHM6dGhpcy5vcHRpb25zLnJldHVybkRldGFpbHMscz10LmtleVNlcGFyYXRvciE9PXZvaWQgMD90LmtleVNlcGFyYXRvcjp0aGlzLm9wdGlvbnMua2V5U2VwYXJhdG9yLHtrZXk6YSxuYW1lc3BhY2VzOm99PXRoaXMuZXh0cmFjdEZyb21LZXkoZVtlLmxlbmd0aC0xXSx0KSxsPW9bby5sZW5ndGgtMV0sZj10LmxuZ3x8dGhpcy5sYW5ndWFnZSxjPXQuYXBwZW5kTmFtZXNwYWNlVG9DSU1vZGV8fHRoaXMub3B0aW9ucy5hcHBlbmROYW1lc3BhY2VUb0NJTW9kZTtpZihmJiZmLnRvTG93ZXJDYXNlKCk9PT0iY2ltb2RlIil7aWYoYyl7Y29uc3Qgdj10Lm5zU2VwYXJhdG9yfHx0aGlzLm9wdGlvbnMubnNTZXBhcmF0b3I7cmV0dXJuIGk/e3JlczpgJHtsfSR7dn0ke2F9YCx1c2VkS2V5OmEsZXhhY3RVc2VkS2V5OmEsdXNlZExuZzpmLHVzZWROUzpsLHVzZWRQYXJhbXM6dGhpcy5nZXRVc2VkUGFyYW1zRGV0YWlscyh0KX06YCR7bH0ke3Z9JHthfWB9cmV0dXJuIGk/e3JlczphLHVzZWRLZXk6YSxleGFjdFVzZWRLZXk6YSx1c2VkTG5nOmYsdXNlZE5TOmwsdXNlZFBhcmFtczp0aGlzLmdldFVzZWRQYXJhbXNEZXRhaWxzKHQpfTphfWNvbnN0IGc9dGhpcy5yZXNvbHZlKGUsdCk7bGV0IHU9ZyYmZy5yZXM7Y29uc3QgcD1nJiZnLnVzZWRLZXl8fGEsZD1nJiZnLmV4YWN0VXNlZEtleXx8YSxtPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuYXBwbHkodSkseT1bIltvYmplY3QgTnVtYmVyXSIsIltvYmplY3QgRnVuY3Rpb25dIiwiW29iamVjdCBSZWdFeHBdIl0seD10LmpvaW5BcnJheXMhPT12b2lkIDA/dC5qb2luQXJyYXlzOnRoaXMub3B0aW9ucy5qb2luQXJyYXlzLFM9IXRoaXMuaTE4bkZvcm1hdHx8dGhpcy5pMThuRm9ybWF0LmhhbmRsZUFzT2JqZWN0O2lmKFMmJnUmJih0eXBlb2YgdSE9InN0cmluZyImJnR5cGVvZiB1IT0iYm9vbGVhbiImJnR5cGVvZiB1IT0ibnVtYmVyIikmJnkuaW5kZXhPZihtKTwwJiYhKHR5cGVvZiB4PT0ic3RyaW5nIiYmQXJyYXkuaXNBcnJheSh1KSkpe2lmKCF0LnJldHVybk9iamVjdHMmJiF0aGlzLm9wdGlvbnMucmV0dXJuT2JqZWN0cyl7dGhpcy5vcHRpb25zLnJldHVybmVkT2JqZWN0SGFuZGxlcnx8dGhpcy5sb2dnZXIud2FybigiYWNjZXNzaW5nIGFuIG9iamVjdCAtIGJ1dCByZXR1cm5PYmplY3RzIG9wdGlvbnMgaXMgbm90IGVuYWJsZWQhIik7Y29uc3Qgdj10aGlzLm9wdGlvbnMucmV0dXJuZWRPYmplY3RIYW5kbGVyP3RoaXMub3B0aW9ucy5yZXR1cm5lZE9iamVjdEhhbmRsZXIocCx1LHsuLi50LG5zOm99KTpga2V5ICcke2F9ICgke3RoaXMubGFuZ3VhZ2V9KScgcmV0dXJuZWQgYW4gb2JqZWN0IGluc3RlYWQgb2Ygc3RyaW5nLmA7cmV0dXJuIGk/KGcucmVzPXYsZy51c2VkUGFyYW1zPXRoaXMuZ2V0VXNlZFBhcmFtc0RldGFpbHModCksZyk6dn1pZihzKXtjb25zdCB2PUFycmF5LmlzQXJyYXkodSksUD12P1tdOnt9LEQ9dj9kOnA7Zm9yKGNvbnN0IFIgaW4gdSlpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodSxSKSl7Y29uc3QgJD1gJHtEfSR7c30ke1J9YDtQW1JdPXRoaXMudHJhbnNsYXRlKCQsey4uLnQsam9pbkFycmF5czohMSxuczpvfSksUFtSXT09PSQmJihQW1JdPXVbUl0pfXU9UH19ZWxzZSBpZihTJiZ0eXBlb2YgeD09InN0cmluZyImJkFycmF5LmlzQXJyYXkodSkpdT11LmpvaW4oeCksdSYmKHU9dGhpcy5leHRlbmRUcmFuc2xhdGlvbih1LGUsdCxyKSk7ZWxzZXtsZXQgdj0hMSxQPSExO2NvbnN0IEQ9dC5jb3VudCE9PXZvaWQgMCYmdHlwZW9mIHQuY291bnQhPSJzdHJpbmciLFI9dWUuaGFzRGVmYXVsdFZhbHVlKHQpLCQ9RD90aGlzLnBsdXJhbFJlc29sdmVyLmdldFN1ZmZpeChmLHQuY291bnQsdCk6IiIsR3Q9dC5vcmRpbmFsJiZEP3RoaXMucGx1cmFsUmVzb2x2ZXIuZ2V0U3VmZml4KGYsdC5jb3VudCx7b3JkaW5hbDohMX0pOiIiLEllPUQmJiF0Lm9yZGluYWwmJnQuY291bnQ9PT0wJiZ0aGlzLnBsdXJhbFJlc29sdmVyLnNob3VsZFVzZUludGxBcGkoKSxLPUllJiZ0W2BkZWZhdWx0VmFsdWUke3RoaXMub3B0aW9ucy5wbHVyYWxTZXBhcmF0b3J9emVyb2BdfHx0W2BkZWZhdWx0VmFsdWUkeyR9YF18fHRbYGRlZmF1bHRWYWx1ZSR7R3R9YF18fHQuZGVmYXVsdFZhbHVlOyF0aGlzLmlzVmFsaWRMb29rdXAodSkmJlImJih2PSEwLHU9SyksdGhpcy5pc1ZhbGlkTG9va3VwKHUpfHwoUD0hMCx1PWEpO2NvbnN0IEh0PSh0Lm1pc3NpbmdLZXlOb1ZhbHVlRmFsbGJhY2tUb0tleXx8dGhpcy5vcHRpb25zLm1pc3NpbmdLZXlOb1ZhbHVlRmFsbGJhY2tUb0tleSkmJlA/dm9pZCAwOnUsXz1SJiZLIT09dSYmdGhpcy5vcHRpb25zLnVwZGF0ZU1pc3Npbmc7aWYoUHx8dnx8Xyl7aWYodGhpcy5sb2dnZXIubG9nKF8/InVwZGF0ZUtleSI6Im1pc3NpbmdLZXkiLGYsbCxhLF8/Szp1KSxzKXtjb25zdCBMPXRoaXMucmVzb2x2ZShhLHsuLi50LGtleVNlcGFyYXRvcjohMX0pO0wmJkwucmVzJiZ0aGlzLmxvZ2dlci53YXJuKCJTZWVtcyB0aGUgbG9hZGVkIHRyYW5zbGF0aW9ucyB3ZXJlIGluIGZsYXQgSlNPTiBmb3JtYXQgaW5zdGVhZCBvZiBuZXN0ZWQuIEVpdGhlciBzZXQga2V5U2VwYXJhdG9yOiBmYWxzZSBvbiBpbml0IG9yIG1ha2Ugc3VyZSB5b3VyIHRyYW5zbGF0aW9ucyBhcmUgcHVibGlzaGVkIGluIG5lc3RlZCBmb3JtYXQuIil9bGV0IFY9W107Y29uc3QgWj10aGlzLmxhbmd1YWdlVXRpbHMuZ2V0RmFsbGJhY2tDb2Rlcyh0aGlzLm9wdGlvbnMuZmFsbGJhY2tMbmcsdC5sbmd8fHRoaXMubGFuZ3VhZ2UpO2lmKHRoaXMub3B0aW9ucy5zYXZlTWlzc2luZ1RvPT09ImZhbGxiYWNrIiYmWiYmWlswXSlmb3IobGV0IEw9MDtMPFoubGVuZ3RoO0wrKylWLnB1c2goWltMXSk7ZWxzZSB0aGlzLm9wdGlvbnMuc2F2ZU1pc3NpbmdUbz09PSJhbGwiP1Y9dGhpcy5sYW5ndWFnZVV0aWxzLnRvUmVzb2x2ZUhpZXJhcmNoeSh0LmxuZ3x8dGhpcy5sYW5ndWFnZSk6Vi5wdXNoKHQubG5nfHx0aGlzLmxhbmd1YWdlKTtjb25zdCBUZT0oTCxJLFcpPT57Y29uc3Qga2U9UiYmVyE9PXU/VzpIdDt0aGlzLm9wdGlvbnMubWlzc2luZ0tleUhhbmRsZXI/dGhpcy5vcHRpb25zLm1pc3NpbmdLZXlIYW5kbGVyKEwsbCxJLGtlLF8sdCk6dGhpcy5iYWNrZW5kQ29ubmVjdG9yJiZ0aGlzLmJhY2tlbmRDb25uZWN0b3Iuc2F2ZU1pc3NpbmcmJnRoaXMuYmFja2VuZENvbm5lY3Rvci5zYXZlTWlzc2luZyhMLGwsSSxrZSxfLHQpLHRoaXMuZW1pdCgibWlzc2luZ0tleSIsTCxsLEksdSl9O3RoaXMub3B0aW9ucy5zYXZlTWlzc2luZyYmKHRoaXMub3B0aW9ucy5zYXZlTWlzc2luZ1BsdXJhbHMmJkQ/Vi5mb3JFYWNoKEw9Pntjb25zdCBJPXRoaXMucGx1cmFsUmVzb2x2ZXIuZ2V0U3VmZml4ZXMoTCx0KTtJZSYmdFtgZGVmYXVsdFZhbHVlJHt0aGlzLm9wdGlvbnMucGx1cmFsU2VwYXJhdG9yfXplcm9gXSYmSS5pbmRleE9mKGAke3RoaXMub3B0aW9ucy5wbHVyYWxTZXBhcmF0b3J9emVyb2ApPDAmJkkucHVzaChgJHt0aGlzLm9wdGlvbnMucGx1cmFsU2VwYXJhdG9yfXplcm9gKSxJLmZvckVhY2goVz0+e1RlKFtMXSxhK1csdFtgZGVmYXVsdFZhbHVlJHtXfWBdfHxLKX0pfSk6VGUoVixhLEspKX11PXRoaXMuZXh0ZW5kVHJhbnNsYXRpb24odSxlLHQsZyxyKSxQJiZ1PT09YSYmdGhpcy5vcHRpb25zLmFwcGVuZE5hbWVzcGFjZVRvTWlzc2luZ0tleSYmKHU9YCR7bH06JHthfWApLChQfHx2KSYmdGhpcy5vcHRpb25zLnBhcnNlTWlzc2luZ0tleUhhbmRsZXImJih0aGlzLm9wdGlvbnMuY29tcGF0aWJpbGl0eUFQSSE9PSJ2MSI/dT10aGlzLm9wdGlvbnMucGFyc2VNaXNzaW5nS2V5SGFuZGxlcih0aGlzLm9wdGlvbnMuYXBwZW5kTmFtZXNwYWNlVG9NaXNzaW5nS2V5P2Ake2x9OiR7YX1gOmEsdj91OnZvaWQgMCk6dT10aGlzLm9wdGlvbnMucGFyc2VNaXNzaW5nS2V5SGFuZGxlcih1KSl9cmV0dXJuIGk/KGcucmVzPXUsZy51c2VkUGFyYW1zPXRoaXMuZ2V0VXNlZFBhcmFtc0RldGFpbHModCksZyk6dX1leHRlbmRUcmFuc2xhdGlvbihlLHQscixpLHMpe3ZhciBhPXRoaXM7aWYodGhpcy5pMThuRm9ybWF0JiZ0aGlzLmkxOG5Gb3JtYXQucGFyc2UpZT10aGlzLmkxOG5Gb3JtYXQucGFyc2UoZSx7Li4udGhpcy5vcHRpb25zLmludGVycG9sYXRpb24uZGVmYXVsdFZhcmlhYmxlcywuLi5yfSxyLmxuZ3x8dGhpcy5sYW5ndWFnZXx8aS51c2VkTG5nLGkudXNlZE5TLGkudXNlZEtleSx7cmVzb2x2ZWQ6aX0pO2Vsc2UgaWYoIXIuc2tpcEludGVycG9sYXRpb24pe3IuaW50ZXJwb2xhdGlvbiYmdGhpcy5pbnRlcnBvbGF0b3IuaW5pdCh7Li4ucixpbnRlcnBvbGF0aW9uOnsuLi50aGlzLm9wdGlvbnMuaW50ZXJwb2xhdGlvbiwuLi5yLmludGVycG9sYXRpb259fSk7Y29uc3QgZj10eXBlb2YgZT09InN0cmluZyImJihyJiZyLmludGVycG9sYXRpb24mJnIuaW50ZXJwb2xhdGlvbi5za2lwT25WYXJpYWJsZXMhPT12b2lkIDA/ci5pbnRlcnBvbGF0aW9uLnNraXBPblZhcmlhYmxlczp0aGlzLm9wdGlvbnMuaW50ZXJwb2xhdGlvbi5za2lwT25WYXJpYWJsZXMpO2xldCBjO2lmKGYpe2NvbnN0IHU9ZS5tYXRjaCh0aGlzLmludGVycG9sYXRvci5uZXN0aW5nUmVnZXhwKTtjPXUmJnUubGVuZ3RofWxldCBnPXIucmVwbGFjZSYmdHlwZW9mIHIucmVwbGFjZSE9InN0cmluZyI/ci5yZXBsYWNlOnI7aWYodGhpcy5vcHRpb25zLmludGVycG9sYXRpb24uZGVmYXVsdFZhcmlhYmxlcyYmKGc9ey4uLnRoaXMub3B0aW9ucy5pbnRlcnBvbGF0aW9uLmRlZmF1bHRWYXJpYWJsZXMsLi4uZ30pLGU9dGhpcy5pbnRlcnBvbGF0b3IuaW50ZXJwb2xhdGUoZSxnLHIubG5nfHx0aGlzLmxhbmd1YWdlfHxpLnVzZWRMbmcsciksZil7Y29uc3QgdT1lLm1hdGNoKHRoaXMuaW50ZXJwb2xhdG9yLm5lc3RpbmdSZWdleHApLHA9dSYmdS5sZW5ndGg7YzxwJiYoci5uZXN0PSExKX0hci5sbmcmJnRoaXMub3B0aW9ucy5jb21wYXRpYmlsaXR5QVBJIT09InYxIiYmaSYmaS5yZXMmJihyLmxuZz10aGlzLmxhbmd1YWdlfHxpLnVzZWRMbmcpLHIubmVzdCE9PSExJiYoZT10aGlzLmludGVycG9sYXRvci5uZXN0KGUsZnVuY3Rpb24oKXtmb3IodmFyIHU9YXJndW1lbnRzLmxlbmd0aCxwPW5ldyBBcnJheSh1KSxkPTA7ZDx1O2QrKylwW2RdPWFyZ3VtZW50c1tkXTtyZXR1cm4gcyYmc1swXT09PXBbMF0mJiFyLmNvbnRleHQ/KGEubG9nZ2VyLndhcm4oYEl0IHNlZW1zIHlvdSBhcmUgbmVzdGluZyByZWN1cnNpdmVseSBrZXk6ICR7cFswXX0gaW4ga2V5OiAke3RbMF19YCksbnVsbCk6YS50cmFuc2xhdGUoLi4ucCx0KX0scikpLHIuaW50ZXJwb2xhdGlvbiYmdGhpcy5pbnRlcnBvbGF0b3IucmVzZXQoKX1jb25zdCBvPXIucG9zdFByb2Nlc3N8fHRoaXMub3B0aW9ucy5wb3N0UHJvY2VzcyxsPXR5cGVvZiBvPT0ic3RyaW5nIj9bb106bztyZXR1cm4gZSE9bnVsbCYmbCYmbC5sZW5ndGgmJnIuYXBwbHlQb3N0UHJvY2Vzc29yIT09ITEmJihlPXd0LmhhbmRsZShsLGUsdCx0aGlzLm9wdGlvbnMmJnRoaXMub3B0aW9ucy5wb3N0UHJvY2Vzc1Bhc3NSZXNvbHZlZD97aTE4blJlc29sdmVkOnsuLi5pLHVzZWRQYXJhbXM6dGhpcy5nZXRVc2VkUGFyYW1zRGV0YWlscyhyKX0sLi4ucn06cix0aGlzKSksZX1yZXNvbHZlKGUpe2xldCB0PWFyZ3VtZW50cy5sZW5ndGg+MSYmYXJndW1lbnRzWzFdIT09dm9pZCAwP2FyZ3VtZW50c1sxXTp7fSxyLGkscyxhLG87cmV0dXJuIHR5cGVvZiBlPT0ic3RyaW5nIiYmKGU9W2VdKSxlLmZvckVhY2gobD0+e2lmKHRoaXMuaXNWYWxpZExvb2t1cChyKSlyZXR1cm47Y29uc3QgZj10aGlzLmV4dHJhY3RGcm9tS2V5KGwsdCksYz1mLmtleTtpPWM7bGV0IGc9Zi5uYW1lc3BhY2VzO3RoaXMub3B0aW9ucy5mYWxsYmFja05TJiYoZz1nLmNvbmNhdCh0aGlzLm9wdGlvbnMuZmFsbGJhY2tOUykpO2NvbnN0IHU9dC5jb3VudCE9PXZvaWQgMCYmdHlwZW9mIHQuY291bnQhPSJzdHJpbmciLHA9dSYmIXQub3JkaW5hbCYmdC5jb3VudD09PTAmJnRoaXMucGx1cmFsUmVzb2x2ZXIuc2hvdWxkVXNlSW50bEFwaSgpLGQ9dC5jb250ZXh0IT09dm9pZCAwJiYodHlwZW9mIHQuY29udGV4dD09InN0cmluZyJ8fHR5cGVvZiB0LmNvbnRleHQ9PSJudW1iZXIiKSYmdC5jb250ZXh0IT09IiIsbT10LmxuZ3M/dC5sbmdzOnRoaXMubGFuZ3VhZ2VVdGlscy50b1Jlc29sdmVIaWVyYXJjaHkodC5sbmd8fHRoaXMubGFuZ3VhZ2UsdC5mYWxsYmFja0xuZyk7Zy5mb3JFYWNoKHk9Pnt0aGlzLmlzVmFsaWRMb29rdXAocil8fChvPXksIUhlW2Ake21bMF19LSR7eX1gXSYmdGhpcy51dGlscyYmdGhpcy51dGlscy5oYXNMb2FkZWROYW1lc3BhY2UmJiF0aGlzLnV0aWxzLmhhc0xvYWRlZE5hbWVzcGFjZShvKSYmKEhlW2Ake21bMF19LSR7eX1gXT0hMCx0aGlzLmxvZ2dlci53YXJuKGBrZXkgIiR7aX0iIGZvciBsYW5ndWFnZXMgIiR7bS5qb2luKCIsICIpfSIgd29uJ3QgZ2V0IHJlc29sdmVkIGFzIG5hbWVzcGFjZSAiJHtvfSIgd2FzIG5vdCB5ZXQgbG9hZGVkYCwiVGhpcyBtZWFucyBzb21ldGhpbmcgSVMgV1JPTkcgaW4geW91ciBzZXR1cC4gWW91IGFjY2VzcyB0aGUgdCBmdW5jdGlvbiBiZWZvcmUgaTE4bmV4dC5pbml0IC8gaTE4bmV4dC5sb2FkTmFtZXNwYWNlIC8gaTE4bmV4dC5jaGFuZ2VMYW5ndWFnZSB3YXMgZG9uZS4gV2FpdCBmb3IgdGhlIGNhbGxiYWNrIG9yIFByb21pc2UgdG8gcmVzb2x2ZSBiZWZvcmUgYWNjZXNzaW5nIGl0ISEhIikpLG0uZm9yRWFjaCh4PT57aWYodGhpcy5pc1ZhbGlkTG9va3VwKHIpKXJldHVybjthPXg7Y29uc3QgUz1bY107aWYodGhpcy5pMThuRm9ybWF0JiZ0aGlzLmkxOG5Gb3JtYXQuYWRkTG9va3VwS2V5cyl0aGlzLmkxOG5Gb3JtYXQuYWRkTG9va3VwS2V5cyhTLGMseCx5LHQpO2Vsc2V7bGV0IHY7dSYmKHY9dGhpcy5wbHVyYWxSZXNvbHZlci5nZXRTdWZmaXgoeCx0LmNvdW50LHQpKTtjb25zdCBQPWAke3RoaXMub3B0aW9ucy5wbHVyYWxTZXBhcmF0b3J9emVyb2AsRD1gJHt0aGlzLm9wdGlvbnMucGx1cmFsU2VwYXJhdG9yfW9yZGluYWwke3RoaXMub3B0aW9ucy5wbHVyYWxTZXBhcmF0b3J9YDtpZih1JiYoUy5wdXNoKGMrdiksdC5vcmRpbmFsJiZ2LmluZGV4T2YoRCk9PT0wJiZTLnB1c2goYyt2LnJlcGxhY2UoRCx0aGlzLm9wdGlvbnMucGx1cmFsU2VwYXJhdG9yKSkscCYmUy5wdXNoKGMrUCkpLGQpe2NvbnN0IFI9YCR7Y30ke3RoaXMub3B0aW9ucy5jb250ZXh0U2VwYXJhdG9yfSR7dC5jb250ZXh0fWA7Uy5wdXNoKFIpLHUmJihTLnB1c2goUit2KSx0Lm9yZGluYWwmJnYuaW5kZXhPZihEKT09PTAmJlMucHVzaChSK3YucmVwbGFjZShELHRoaXMub3B0aW9ucy5wbHVyYWxTZXBhcmF0b3IpKSxwJiZTLnB1c2goUitQKSl9fWxldCBPO2Zvcig7Tz1TLnBvcCgpOyl0aGlzLmlzVmFsaWRMb29rdXAocil8fChzPU8scj10aGlzLmdldFJlc291cmNlKHgseSxPLHQpKX0pKX0pfSkse3JlczpyLHVzZWRLZXk6aSxleGFjdFVzZWRLZXk6cyx1c2VkTG5nOmEsdXNlZE5TOm99fWlzVmFsaWRMb29rdXAoZSl7cmV0dXJuIGUhPT12b2lkIDAmJiEoIXRoaXMub3B0aW9ucy5yZXR1cm5OdWxsJiZlPT09bnVsbCkmJiEoIXRoaXMub3B0aW9ucy5yZXR1cm5FbXB0eVN0cmluZyYmZT09PSIiKX1nZXRSZXNvdXJjZShlLHQscil7bGV0IGk9YXJndW1lbnRzLmxlbmd0aD4zJiZhcmd1bWVudHNbM10hPT12b2lkIDA/YXJndW1lbnRzWzNdOnt9O3JldHVybiB0aGlzLmkxOG5Gb3JtYXQmJnRoaXMuaTE4bkZvcm1hdC5nZXRSZXNvdXJjZT90aGlzLmkxOG5Gb3JtYXQuZ2V0UmVzb3VyY2UoZSx0LHIsaSk6dGhpcy5yZXNvdXJjZVN0b3JlLmdldFJlc291cmNlKGUsdCxyLGkpfWdldFVzZWRQYXJhbXNEZXRhaWxzKCl7bGV0IGU9YXJndW1lbnRzLmxlbmd0aD4wJiZhcmd1bWVudHNbMF0hPT12b2lkIDA/YXJndW1lbnRzWzBdOnt9O2NvbnN0IHQ9WyJkZWZhdWx0VmFsdWUiLCJvcmRpbmFsIiwiY29udGV4dCIsInJlcGxhY2UiLCJsbmciLCJsbmdzIiwiZmFsbGJhY2tMbmciLCJucyIsImtleVNlcGFyYXRvciIsIm5zU2VwYXJhdG9yIiwicmV0dXJuT2JqZWN0cyIsInJldHVybkRldGFpbHMiLCJqb2luQXJyYXlzIiwicG9zdFByb2Nlc3MiLCJpbnRlcnBvbGF0aW9uIl0scj1lLnJlcGxhY2UmJnR5cGVvZiBlLnJlcGxhY2UhPSJzdHJpbmciO2xldCBpPXI/ZS5yZXBsYWNlOmU7aWYociYmdHlwZW9mIGUuY291bnQ8InUiJiYoaS5jb3VudD1lLmNvdW50KSx0aGlzLm9wdGlvbnMuaW50ZXJwb2xhdGlvbi5kZWZhdWx0VmFyaWFibGVzJiYoaT17Li4udGhpcy5vcHRpb25zLmludGVycG9sYXRpb24uZGVmYXVsdFZhcmlhYmxlcywuLi5pfSksIXIpe2k9ey4uLml9O2Zvcihjb25zdCBzIG9mIHQpZGVsZXRlIGlbc119cmV0dXJuIGl9c3RhdGljIGhhc0RlZmF1bHRWYWx1ZShlKXtjb25zdCB0PSJkZWZhdWx0VmFsdWUiO2Zvcihjb25zdCByIGluIGUpaWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUscikmJnQ9PT1yLnN1YnN0cmluZygwLHQubGVuZ3RoKSYmZVtyXSE9PXZvaWQgMClyZXR1cm4hMDtyZXR1cm4hMX19Y29uc3QgbWU9bj0+bi5jaGFyQXQoMCkudG9VcHBlckNhc2UoKStuLnNsaWNlKDEpO2NsYXNzIEtle2NvbnN0cnVjdG9yKGUpe3RoaXMub3B0aW9ucz1lLHRoaXMuc3VwcG9ydGVkTG5ncz10aGlzLm9wdGlvbnMuc3VwcG9ydGVkTG5nc3x8ITEsdGhpcy5sb2dnZXI9Qy5jcmVhdGUoImxhbmd1YWdlVXRpbHMiKX1nZXRTY3JpcHRQYXJ0RnJvbUNvZGUoZSl7aWYoZT1sZShlKSwhZXx8ZS5pbmRleE9mKCItIik8MClyZXR1cm4gbnVsbDtjb25zdCB0PWUuc3BsaXQoIi0iKTtyZXR1cm4gdC5sZW5ndGg9PT0yfHwodC5wb3AoKSx0W3QubGVuZ3RoLTFdLnRvTG93ZXJDYXNlKCk9PT0ieCIpP251bGw6dGhpcy5mb3JtYXRMYW5ndWFnZUNvZGUodC5qb2luKCItIikpfWdldExhbmd1YWdlUGFydEZyb21Db2RlKGUpe2lmKGU9bGUoZSksIWV8fGUuaW5kZXhPZigiLSIpPDApcmV0dXJuIGU7Y29uc3QgdD1lLnNwbGl0KCItIik7cmV0dXJuIHRoaXMuZm9ybWF0TGFuZ3VhZ2VDb2RlKHRbMF0pfWZvcm1hdExhbmd1YWdlQ29kZShlKXtpZih0eXBlb2YgZT09InN0cmluZyImJmUuaW5kZXhPZigiLSIpPi0xKXtjb25zdCB0PVsiaGFucyIsImhhbnQiLCJsYXRuIiwiY3lybCIsImNhbnMiLCJtb25nIiwiYXJhYiJdO2xldCByPWUuc3BsaXQoIi0iKTtyZXR1cm4gdGhpcy5vcHRpb25zLmxvd2VyQ2FzZUxuZz9yPXIubWFwKGk9PmkudG9Mb3dlckNhc2UoKSk6ci5sZW5ndGg9PT0yPyhyWzBdPXJbMF0udG9Mb3dlckNhc2UoKSxyWzFdPXJbMV0udG9VcHBlckNhc2UoKSx0LmluZGV4T2YoclsxXS50b0xvd2VyQ2FzZSgpKT4tMSYmKHJbMV09bWUoclsxXS50b0xvd2VyQ2FzZSgpKSkpOnIubGVuZ3RoPT09MyYmKHJbMF09clswXS50b0xvd2VyQ2FzZSgpLHJbMV0ubGVuZ3RoPT09MiYmKHJbMV09clsxXS50b1VwcGVyQ2FzZSgpKSxyWzBdIT09InNnbiImJnJbMl0ubGVuZ3RoPT09MiYmKHJbMl09clsyXS50b1VwcGVyQ2FzZSgpKSx0LmluZGV4T2YoclsxXS50b0xvd2VyQ2FzZSgpKT4tMSYmKHJbMV09bWUoclsxXS50b0xvd2VyQ2FzZSgpKSksdC5pbmRleE9mKHJbMl0udG9Mb3dlckNhc2UoKSk+LTEmJihyWzJdPW1lKHJbMl0udG9Mb3dlckNhc2UoKSkpKSxyLmpvaW4oIi0iKX1yZXR1cm4gdGhpcy5vcHRpb25zLmNsZWFuQ29kZXx8dGhpcy5vcHRpb25zLmxvd2VyQ2FzZUxuZz9lLnRvTG93ZXJDYXNlKCk6ZX1pc1N1cHBvcnRlZENvZGUoZSl7cmV0dXJuKHRoaXMub3B0aW9ucy5sb2FkPT09Imxhbmd1YWdlT25seSJ8fHRoaXMub3B0aW9ucy5ub25FeHBsaWNpdFN1cHBvcnRlZExuZ3MpJiYoZT10aGlzLmdldExhbmd1YWdlUGFydEZyb21Db2RlKGUpKSwhdGhpcy5zdXBwb3J0ZWRMbmdzfHwhdGhpcy5zdXBwb3J0ZWRMbmdzLmxlbmd0aHx8dGhpcy5zdXBwb3J0ZWRMbmdzLmluZGV4T2YoZSk+LTF9Z2V0QmVzdE1hdGNoRnJvbUNvZGVzKGUpe2lmKCFlKXJldHVybiBudWxsO2xldCB0O3JldHVybiBlLmZvckVhY2gocj0+e2lmKHQpcmV0dXJuO2NvbnN0IGk9dGhpcy5mb3JtYXRMYW5ndWFnZUNvZGUocik7KCF0aGlzLm9wdGlvbnMuc3VwcG9ydGVkTG5nc3x8dGhpcy5pc1N1cHBvcnRlZENvZGUoaSkpJiYodD1pKX0pLCF0JiZ0aGlzLm9wdGlvbnMuc3VwcG9ydGVkTG5ncyYmZS5mb3JFYWNoKHI9PntpZih0KXJldHVybjtjb25zdCBpPXRoaXMuZ2V0TGFuZ3VhZ2VQYXJ0RnJvbUNvZGUocik7aWYodGhpcy5pc1N1cHBvcnRlZENvZGUoaSkpcmV0dXJuIHQ9aTt0PXRoaXMub3B0aW9ucy5zdXBwb3J0ZWRMbmdzLmZpbmQocz0+e2lmKHM9PT1pKXJldHVybiBzO2lmKCEocy5pbmRleE9mKCItIik8MCYmaS5pbmRleE9mKCItIik8MCkmJihzLmluZGV4T2YoIi0iKT4wJiZpLmluZGV4T2YoIi0iKTwwJiZzLnN1YnN0cmluZygwLHMuaW5kZXhPZigiLSIpKT09PWl8fHMuaW5kZXhPZihpKT09PTAmJmkubGVuZ3RoPjEpKXJldHVybiBzfSl9KSx0fHwodD10aGlzLmdldEZhbGxiYWNrQ29kZXModGhpcy5vcHRpb25zLmZhbGxiYWNrTG5nKVswXSksdH1nZXRGYWxsYmFja0NvZGVzKGUsdCl7aWYoIWUpcmV0dXJuW107aWYodHlwZW9mIGU9PSJmdW5jdGlvbiImJihlPWUodCkpLHR5cGVvZiBlPT0ic3RyaW5nIiYmKGU9W2VdKSxBcnJheS5pc0FycmF5KGUpKXJldHVybiBlO2lmKCF0KXJldHVybiBlLmRlZmF1bHR8fFtdO2xldCByPWVbdF07cmV0dXJuIHJ8fChyPWVbdGhpcy5nZXRTY3JpcHRQYXJ0RnJvbUNvZGUodCldKSxyfHwocj1lW3RoaXMuZm9ybWF0TGFuZ3VhZ2VDb2RlKHQpXSkscnx8KHI9ZVt0aGlzLmdldExhbmd1YWdlUGFydEZyb21Db2RlKHQpXSkscnx8KHI9ZS5kZWZhdWx0KSxyfHxbXX10b1Jlc29sdmVIaWVyYXJjaHkoZSx0KXtjb25zdCByPXRoaXMuZ2V0RmFsbGJhY2tDb2Rlcyh0fHx0aGlzLm9wdGlvbnMuZmFsbGJhY2tMbmd8fFtdLGUpLGk9W10scz1hPT57YSYmKHRoaXMuaXNTdXBwb3J0ZWRDb2RlKGEpP2kucHVzaChhKTp0aGlzLmxvZ2dlci53YXJuKGByZWplY3RpbmcgbGFuZ3VhZ2UgY29kZSBub3QgZm91bmQgaW4gc3VwcG9ydGVkTG5nczogJHthfWApKX07cmV0dXJuIHR5cGVvZiBlPT0ic3RyaW5nIiYmKGUuaW5kZXhPZigiLSIpPi0xfHxlLmluZGV4T2YoIl8iKT4tMSk/KHRoaXMub3B0aW9ucy5sb2FkIT09Imxhbmd1YWdlT25seSImJnModGhpcy5mb3JtYXRMYW5ndWFnZUNvZGUoZSkpLHRoaXMub3B0aW9ucy5sb2FkIT09Imxhbmd1YWdlT25seSImJnRoaXMub3B0aW9ucy5sb2FkIT09ImN1cnJlbnRPbmx5IiYmcyh0aGlzLmdldFNjcmlwdFBhcnRGcm9tQ29kZShlKSksdGhpcy5vcHRpb25zLmxvYWQhPT0iY3VycmVudE9ubHkiJiZzKHRoaXMuZ2V0TGFuZ3VhZ2VQYXJ0RnJvbUNvZGUoZSkpKTp0eXBlb2YgZT09InN0cmluZyImJnModGhpcy5mb3JtYXRMYW5ndWFnZUNvZGUoZSkpLHIuZm9yRWFjaChhPT57aS5pbmRleE9mKGEpPDAmJnModGhpcy5mb3JtYXRMYW5ndWFnZUNvZGUoYSkpfSksaX19bGV0IGFyPVt7bG5nczpbImFjaCIsImFrIiwiYW0iLCJhcm4iLCJiciIsImZpbCIsImd1biIsImxuIiwibWZlIiwibWciLCJtaSIsIm9jIiwicHQiLCJwdC1CUiIsInRnIiwidGwiLCJ0aSIsInRyIiwidXoiLCJ3YSJdLG5yOlsxLDJdLGZjOjF9LHtsbmdzOlsiYWYiLCJhbiIsImFzdCIsImF6IiwiYmciLCJibiIsImNhIiwiZGEiLCJkZSIsImRldiIsImVsIiwiZW4iLCJlbyIsImVzIiwiZXQiLCJldSIsImZpIiwiZm8iLCJmdXIiLCJmeSIsImdsIiwiZ3UiLCJoYSIsImhpIiwiaHUiLCJoeSIsImlhIiwiaXQiLCJrayIsImtuIiwia3UiLCJsYiIsIm1haSIsIm1sIiwibW4iLCJtciIsIm5haCIsIm5hcCIsIm5iIiwibmUiLCJubCIsIm5uIiwibm8iLCJuc28iLCJwYSIsInBhcCIsInBtcyIsInBzIiwicHQtUFQiLCJybSIsInNjbyIsInNlIiwic2kiLCJzbyIsInNvbiIsInNxIiwic3YiLCJzdyIsInRhIiwidGUiLCJ0ayIsInVyIiwieW8iXSxucjpbMSwyXSxmYzoyfSx7bG5nczpbImF5IiwiYm8iLCJjZ2ciLCJmYSIsImh0IiwiaWQiLCJqYSIsImpibyIsImthIiwia20iLCJrbyIsImt5IiwibG8iLCJtcyIsInNhaCIsInN1IiwidGgiLCJ0dCIsInVnIiwidmkiLCJ3byIsInpoIl0sbnI6WzFdLGZjOjN9LHtsbmdzOlsiYmUiLCJicyIsImNuciIsImR6IiwiaHIiLCJydSIsInNyIiwidWsiXSxucjpbMSwyLDVdLGZjOjR9LHtsbmdzOlsiYXIiXSxucjpbMCwxLDIsMywxMSwxMDBdLGZjOjV9LHtsbmdzOlsiY3MiLCJzayJdLG5yOlsxLDIsNV0sZmM6Nn0se2xuZ3M6WyJjc2IiLCJwbCJdLG5yOlsxLDIsNV0sZmM6N30se2xuZ3M6WyJjeSJdLG5yOlsxLDIsMyw4XSxmYzo4fSx7bG5nczpbImZyIl0sbnI6WzEsMl0sZmM6OX0se2xuZ3M6WyJnYSJdLG5yOlsxLDIsMyw3LDExXSxmYzoxMH0se2xuZ3M6WyJnZCJdLG5yOlsxLDIsMywyMF0sZmM6MTF9LHtsbmdzOlsiaXMiXSxucjpbMSwyXSxmYzoxMn0se2xuZ3M6WyJqdiJdLG5yOlswLDFdLGZjOjEzfSx7bG5nczpbImt3Il0sbnI6WzEsMiwzLDRdLGZjOjE0fSx7bG5nczpbImx0Il0sbnI6WzEsMiwxMF0sZmM6MTV9LHtsbmdzOlsibHYiXSxucjpbMSwyLDBdLGZjOjE2fSx7bG5nczpbIm1rIl0sbnI6WzEsMl0sZmM6MTd9LHtsbmdzOlsibW5rIl0sbnI6WzAsMSwyXSxmYzoxOH0se2xuZ3M6WyJtdCJdLG5yOlsxLDIsMTEsMjBdLGZjOjE5fSx7bG5nczpbIm9yIl0sbnI6WzIsMV0sZmM6Mn0se2xuZ3M6WyJybyJdLG5yOlsxLDIsMjBdLGZjOjIwfSx7bG5nczpbInNsIl0sbnI6WzUsMSwyLDNdLGZjOjIxfSx7bG5nczpbImhlIiwiaXciXSxucjpbMSwyLDIwLDIxXSxmYzoyMn1dLG9yPXsxOm49Pisobj4xKSwyOm49PisobiE9MSksMzpuPT4wLDQ6bj0+biUxMD09MSYmbiUxMDAhPTExPzA6biUxMD49MiYmbiUxMDw9NCYmKG4lMTAwPDEwfHxuJTEwMD49MjApPzE6Miw1Om49Pm49PTA/MDpuPT0xPzE6bj09Mj8yOm4lMTAwPj0zJiZuJTEwMDw9MTA/MzpuJTEwMD49MTE/NDo1LDY6bj0+bj09MT8wOm4+PTImJm48PTQ/MToyLDc6bj0+bj09MT8wOm4lMTA+PTImJm4lMTA8PTQmJihuJTEwMDwxMHx8biUxMDA+PTIwKT8xOjIsODpuPT5uPT0xPzA6bj09Mj8xOm4hPTgmJm4hPTExPzI6Myw5Om49Pisobj49MiksMTA6bj0+bj09MT8wOm49PTI/MTpuPDc/MjpuPDExPzM6NCwxMTpuPT5uPT0xfHxuPT0xMT8wOm49PTJ8fG49PTEyPzE6bj4yJiZuPDIwPzI6MywxMjpuPT4rKG4lMTAhPTF8fG4lMTAwPT0xMSksMTM6bj0+KyhuIT09MCksMTQ6bj0+bj09MT8wOm49PTI/MTpuPT0zPzI6MywxNTpuPT5uJTEwPT0xJiZuJTEwMCE9MTE/MDpuJTEwPj0yJiYobiUxMDA8MTB8fG4lMTAwPj0yMCk/MToyLDE2Om49Pm4lMTA9PTEmJm4lMTAwIT0xMT8wOm4hPT0wPzE6MiwxNzpuPT5uPT0xfHxuJTEwPT0xJiZuJTEwMCE9MTE/MDoxLDE4Om49Pm49PTA/MDpuPT0xPzE6MiwxOTpuPT5uPT0xPzA6bj09MHx8biUxMDA+MSYmbiUxMDA8MTE/MTpuJTEwMD4xMCYmbiUxMDA8MjA/MjozLDIwOm49Pm49PTE/MDpuPT0wfHxuJTEwMD4wJiZuJTEwMDwyMD8xOjIsMjE6bj0+biUxMDA9PTE/MTpuJTEwMD09Mj8yOm4lMTAwPT0zfHxuJTEwMD09ND8zOjAsMjI6bj0+bj09MT8wOm49PTI/MToobjwwfHxuPjEwKSYmbiUxMD09MD8yOjN9O2NvbnN0IGxyPVsidjEiLCJ2MiIsInYzIl0sdXI9WyJ2NCJdLF9lPXt6ZXJvOjAsb25lOjEsdHdvOjIsZmV3OjMsbWFueTo0LG90aGVyOjV9LGZyPSgpPT57Y29uc3Qgbj17fTtyZXR1cm4gYXIuZm9yRWFjaChlPT57ZS5sbmdzLmZvckVhY2godD0+e25bdF09e251bWJlcnM6ZS5ucixwbHVyYWxzOm9yW2UuZmNdfX0pfSksbn07Y2xhc3MgY3J7Y29uc3RydWN0b3IoZSl7bGV0IHQ9YXJndW1lbnRzLmxlbmd0aD4xJiZhcmd1bWVudHNbMV0hPT12b2lkIDA/YXJndW1lbnRzWzFdOnt9O3RoaXMubGFuZ3VhZ2VVdGlscz1lLHRoaXMub3B0aW9ucz10LHRoaXMubG9nZ2VyPUMuY3JlYXRlKCJwbHVyYWxSZXNvbHZlciIpLCghdGhpcy5vcHRpb25zLmNvbXBhdGliaWxpdHlKU09OfHx1ci5pbmNsdWRlcyh0aGlzLm9wdGlvbnMuY29tcGF0aWJpbGl0eUpTT04pKSYmKHR5cGVvZiBJbnRsPiJ1Inx8IUludGwuUGx1cmFsUnVsZXMpJiYodGhpcy5vcHRpb25zLmNvbXBhdGliaWxpdHlKU09OPSJ2MyIsdGhpcy5sb2dnZXIuZXJyb3IoIllvdXIgZW52aXJvbm1lbnQgc2VlbXMgbm90IHRvIGJlIEludGwgQVBJIGNvbXBhdGlibGUsIHVzZSBhbiBJbnRsLlBsdXJhbFJ1bGVzIHBvbHlmaWxsLiBXaWxsIGZhbGxiYWNrIHRvIHRoZSBjb21wYXRpYmlsaXR5SlNPTiB2MyBmb3JtYXQgaGFuZGxpbmcuIikpLHRoaXMucnVsZXM9ZnIoKSx0aGlzLnBsdXJhbFJ1bGVzQ2FjaGU9e319YWRkUnVsZShlLHQpe3RoaXMucnVsZXNbZV09dH1jbGVhckNhY2hlKCl7dGhpcy5wbHVyYWxSdWxlc0NhY2hlPXt9fWdldFJ1bGUoZSl7bGV0IHQ9YXJndW1lbnRzLmxlbmd0aD4xJiZhcmd1bWVudHNbMV0hPT12b2lkIDA/YXJndW1lbnRzWzFdOnt9O2lmKHRoaXMuc2hvdWxkVXNlSW50bEFwaSgpKXRyeXtjb25zdCByPWxlKGU9PT0iZGV2Ij8iZW4iOmUpLGk9dC5vcmRpbmFsPyJvcmRpbmFsIjoiY2FyZGluYWwiLHM9SlNPTi5zdHJpbmdpZnkoe2NsZWFuZWRDb2RlOnIsdHlwZTppfSk7aWYocyBpbiB0aGlzLnBsdXJhbFJ1bGVzQ2FjaGUpcmV0dXJuIHRoaXMucGx1cmFsUnVsZXNDYWNoZVtzXTtjb25zdCBhPW5ldyBJbnRsLlBsdXJhbFJ1bGVzKHIse3R5cGU6aX0pO3JldHVybiB0aGlzLnBsdXJhbFJ1bGVzQ2FjaGVbc109YSxhfWNhdGNoe3JldHVybn1yZXR1cm4gdGhpcy5ydWxlc1tlXXx8dGhpcy5ydWxlc1t0aGlzLmxhbmd1YWdlVXRpbHMuZ2V0TGFuZ3VhZ2VQYXJ0RnJvbUNvZGUoZSldfW5lZWRzUGx1cmFsKGUpe2xldCB0PWFyZ3VtZW50cy5sZW5ndGg+MSYmYXJndW1lbnRzWzFdIT09dm9pZCAwP2FyZ3VtZW50c1sxXTp7fTtjb25zdCByPXRoaXMuZ2V0UnVsZShlLHQpO3JldHVybiB0aGlzLnNob3VsZFVzZUludGxBcGkoKT9yJiZyLnJlc29sdmVkT3B0aW9ucygpLnBsdXJhbENhdGVnb3JpZXMubGVuZ3RoPjE6ciYmci5udW1iZXJzLmxlbmd0aD4xfWdldFBsdXJhbEZvcm1zT2ZLZXkoZSx0KXtsZXQgcj1hcmd1bWVudHMubGVuZ3RoPjImJmFyZ3VtZW50c1syXSE9PXZvaWQgMD9hcmd1bWVudHNbMl06e307cmV0dXJuIHRoaXMuZ2V0U3VmZml4ZXMoZSxyKS5tYXAoaT0+YCR7dH0ke2l9YCl9Z2V0U3VmZml4ZXMoZSl7bGV0IHQ9YXJndW1lbnRzLmxlbmd0aD4xJiZhcmd1bWVudHNbMV0hPT12b2lkIDA/YXJndW1lbnRzWzFdOnt9O2NvbnN0IHI9dGhpcy5nZXRSdWxlKGUsdCk7cmV0dXJuIHI/dGhpcy5zaG91bGRVc2VJbnRsQXBpKCk/ci5yZXNvbHZlZE9wdGlvbnMoKS5wbHVyYWxDYXRlZ29yaWVzLnNvcnQoKGkscyk9Pl9lW2ldLV9lW3NdKS5tYXAoaT0+YCR7dGhpcy5vcHRpb25zLnByZXBlbmR9JHt0Lm9yZGluYWw/YG9yZGluYWwke3RoaXMub3B0aW9ucy5wcmVwZW5kfWA6IiJ9JHtpfWApOnIubnVtYmVycy5tYXAoaT0+dGhpcy5nZXRTdWZmaXgoZSxpLHQpKTpbXX1nZXRTdWZmaXgoZSx0KXtsZXQgcj1hcmd1bWVudHMubGVuZ3RoPjImJmFyZ3VtZW50c1syXSE9PXZvaWQgMD9hcmd1bWVudHNbMl06e307Y29uc3QgaT10aGlzLmdldFJ1bGUoZSxyKTtyZXR1cm4gaT90aGlzLnNob3VsZFVzZUludGxBcGkoKT9gJHt0aGlzLm9wdGlvbnMucHJlcGVuZH0ke3Iub3JkaW5hbD9gb3JkaW5hbCR7dGhpcy5vcHRpb25zLnByZXBlbmR9YDoiIn0ke2kuc2VsZWN0KHQpfWA6dGhpcy5nZXRTdWZmaXhSZXRyb0NvbXBhdGlibGUoaSx0KToodGhpcy5sb2dnZXIud2Fybihgbm8gcGx1cmFsIHJ1bGUgZm91bmQgZm9yOiAke2V9YCksIiIpfWdldFN1ZmZpeFJldHJvQ29tcGF0aWJsZShlLHQpe2NvbnN0IHI9ZS5ub0Ficz9lLnBsdXJhbHModCk6ZS5wbHVyYWxzKE1hdGguYWJzKHQpKTtsZXQgaT1lLm51bWJlcnNbcl07dGhpcy5vcHRpb25zLnNpbXBsaWZ5UGx1cmFsU3VmZml4JiZlLm51bWJlcnMubGVuZ3RoPT09MiYmZS5udW1iZXJzWzBdPT09MSYmKGk9PT0yP2k9InBsdXJhbCI6aT09PTEmJihpPSIiKSk7Y29uc3Qgcz0oKT0+dGhpcy5vcHRpb25zLnByZXBlbmQmJmkudG9TdHJpbmcoKT90aGlzLm9wdGlvbnMucHJlcGVuZCtpLnRvU3RyaW5nKCk6aS50b1N0cmluZygpO3JldHVybiB0aGlzLm9wdGlvbnMuY29tcGF0aWJpbGl0eUpTT049PT0idjEiP2k9PT0xPyIiOnR5cGVvZiBpPT0ibnVtYmVyIj9gX3BsdXJhbF8ke2kudG9TdHJpbmcoKX1gOnMoKTp0aGlzLm9wdGlvbnMuY29tcGF0aWJpbGl0eUpTT049PT0idjIifHx0aGlzLm9wdGlvbnMuc2ltcGxpZnlQbHVyYWxTdWZmaXgmJmUubnVtYmVycy5sZW5ndGg9PT0yJiZlLm51bWJlcnNbMF09PT0xP3MoKTp0aGlzLm9wdGlvbnMucHJlcGVuZCYmci50b1N0cmluZygpP3RoaXMub3B0aW9ucy5wcmVwZW5kK3IudG9TdHJpbmcoKTpyLnRvU3RyaW5nKCl9c2hvdWxkVXNlSW50bEFwaSgpe3JldHVybiFsci5pbmNsdWRlcyh0aGlzLm9wdGlvbnMuY29tcGF0aWJpbGl0eUpTT04pfX1jb25zdCBWZT1mdW5jdGlvbihuLGUsdCl7bGV0IHI9YXJndW1lbnRzLmxlbmd0aD4zJiZhcmd1bWVudHNbM10hPT12b2lkIDA/YXJndW1lbnRzWzNdOiIuIixpPWFyZ3VtZW50cy5sZW5ndGg+NCYmYXJndW1lbnRzWzRdIT09dm9pZCAwP2FyZ3VtZW50c1s0XTohMCxzPVh0KG4sZSx0KTtyZXR1cm4hcyYmaSYmdHlwZW9mIHQ9PSJzdHJpbmciJiYocz1MZShuLHQscikscz09PXZvaWQgMCYmKHM9TGUoZSx0LHIpKSksc30seWU9bj0+bi5yZXBsYWNlKC9cJC9nLCIkJCQkIik7Y2xhc3MgcHJ7Y29uc3RydWN0b3IoKXtsZXQgZT1hcmd1bWVudHMubGVuZ3RoPjAmJmFyZ3VtZW50c1swXSE9PXZvaWQgMD9hcmd1bWVudHNbMF06e307dGhpcy5sb2dnZXI9Qy5jcmVhdGUoImludGVycG9sYXRvciIpLHRoaXMub3B0aW9ucz1lLHRoaXMuZm9ybWF0PWUuaW50ZXJwb2xhdGlvbiYmZS5pbnRlcnBvbGF0aW9uLmZvcm1hdHx8KHQ9PnQpLHRoaXMuaW5pdChlKX1pbml0KCl7bGV0IGU9YXJndW1lbnRzLmxlbmd0aD4wJiZhcmd1bWVudHNbMF0hPT12b2lkIDA/YXJndW1lbnRzWzBdOnt9O2UuaW50ZXJwb2xhdGlvbnx8KGUuaW50ZXJwb2xhdGlvbj17ZXNjYXBlVmFsdWU6ITB9KTtjb25zdHtlc2NhcGU6dCxlc2NhcGVWYWx1ZTpyLHVzZVJhd1ZhbHVlVG9Fc2NhcGU6aSxwcmVmaXg6cyxwcmVmaXhFc2NhcGVkOmEsc3VmZml4Om8sc3VmZml4RXNjYXBlZDpsLGZvcm1hdFNlcGFyYXRvcjpmLHVuZXNjYXBlU3VmZml4OmMsdW5lc2NhcGVQcmVmaXg6ZyxuZXN0aW5nUHJlZml4OnUsbmVzdGluZ1ByZWZpeEVzY2FwZWQ6cCxuZXN0aW5nU3VmZml4OmQsbmVzdGluZ1N1ZmZpeEVzY2FwZWQ6bSxuZXN0aW5nT3B0aW9uc1NlcGFyYXRvcjp5LG1heFJlcGxhY2VzOngsYWx3YXlzRm9ybWF0OlN9PWUuaW50ZXJwb2xhdGlvbjt0aGlzLmVzY2FwZT10IT09dm9pZCAwP3Q6dHIsdGhpcy5lc2NhcGVWYWx1ZT1yIT09dm9pZCAwP3I6ITAsdGhpcy51c2VSYXdWYWx1ZVRvRXNjYXBlPWkhPT12b2lkIDA/aTohMSx0aGlzLnByZWZpeD1zP04ocyk6YXx8Int7Iix0aGlzLnN1ZmZpeD1vP04obyk6bHx8In19Iix0aGlzLmZvcm1hdFNlcGFyYXRvcj1mfHwiLCIsdGhpcy51bmVzY2FwZVByZWZpeD1jPyIiOmd8fCItIix0aGlzLnVuZXNjYXBlU3VmZml4PXRoaXMudW5lc2NhcGVQcmVmaXg/IiI6Y3x8IiIsdGhpcy5uZXN0aW5nUHJlZml4PXU/Tih1KTpwfHxOKCIkdCgiKSx0aGlzLm5lc3RpbmdTdWZmaXg9ZD9OKGQpOm18fE4oIikiKSx0aGlzLm5lc3RpbmdPcHRpb25zU2VwYXJhdG9yPXl8fCIsIix0aGlzLm1heFJlcGxhY2VzPXh8fDFlMyx0aGlzLmFsd2F5c0Zvcm1hdD1TIT09dm9pZCAwP1M6ITEsdGhpcy5yZXNldFJlZ0V4cCgpfXJlc2V0KCl7dGhpcy5vcHRpb25zJiZ0aGlzLmluaXQodGhpcy5vcHRpb25zKX1yZXNldFJlZ0V4cCgpe2NvbnN0IGU9KHQscik9PnQmJnQuc291cmNlPT09cj8odC5sYXN0SW5kZXg9MCx0KTpuZXcgUmVnRXhwKHIsImciKTt0aGlzLnJlZ2V4cD1lKHRoaXMucmVnZXhwLGAke3RoaXMucHJlZml4fSguKz8pJHt0aGlzLnN1ZmZpeH1gKSx0aGlzLnJlZ2V4cFVuZXNjYXBlPWUodGhpcy5yZWdleHBVbmVzY2FwZSxgJHt0aGlzLnByZWZpeH0ke3RoaXMudW5lc2NhcGVQcmVmaXh9KC4rPykke3RoaXMudW5lc2NhcGVTdWZmaXh9JHt0aGlzLnN1ZmZpeH1gKSx0aGlzLm5lc3RpbmdSZWdleHA9ZSh0aGlzLm5lc3RpbmdSZWdleHAsYCR7dGhpcy5uZXN0aW5nUHJlZml4fSguKz8pJHt0aGlzLm5lc3RpbmdTdWZmaXh9YCl9aW50ZXJwb2xhdGUoZSx0LHIsaSl7bGV0IHMsYSxvO2NvbnN0IGw9dGhpcy5vcHRpb25zJiZ0aGlzLm9wdGlvbnMuaW50ZXJwb2xhdGlvbiYmdGhpcy5vcHRpb25zLmludGVycG9sYXRpb24uZGVmYXVsdFZhcmlhYmxlc3x8e30sZj1wPT57aWYocC5pbmRleE9mKHRoaXMuZm9ybWF0U2VwYXJhdG9yKTwwKXtjb25zdCB4PVZlKHQsbCxwLHRoaXMub3B0aW9ucy5rZXlTZXBhcmF0b3IsdGhpcy5vcHRpb25zLmlnbm9yZUpTT05TdHJ1Y3R1cmUpO3JldHVybiB0aGlzLmFsd2F5c0Zvcm1hdD90aGlzLmZvcm1hdCh4LHZvaWQgMCxyLHsuLi5pLC4uLnQsaW50ZXJwb2xhdGlvbmtleTpwfSk6eH1jb25zdCBkPXAuc3BsaXQodGhpcy5mb3JtYXRTZXBhcmF0b3IpLG09ZC5zaGlmdCgpLnRyaW0oKSx5PWQuam9pbih0aGlzLmZvcm1hdFNlcGFyYXRvcikudHJpbSgpO3JldHVybiB0aGlzLmZvcm1hdChWZSh0LGwsbSx0aGlzLm9wdGlvbnMua2V5U2VwYXJhdG9yLHRoaXMub3B0aW9ucy5pZ25vcmVKU09OU3RydWN0dXJlKSx5LHIsey4uLmksLi4udCxpbnRlcnBvbGF0aW9ua2V5Om19KX07dGhpcy5yZXNldFJlZ0V4cCgpO2NvbnN0IGM9aSYmaS5taXNzaW5nSW50ZXJwb2xhdGlvbkhhbmRsZXJ8fHRoaXMub3B0aW9ucy5taXNzaW5nSW50ZXJwb2xhdGlvbkhhbmRsZXIsZz1pJiZpLmludGVycG9sYXRpb24mJmkuaW50ZXJwb2xhdGlvbi5za2lwT25WYXJpYWJsZXMhPT12b2lkIDA/aS5pbnRlcnBvbGF0aW9uLnNraXBPblZhcmlhYmxlczp0aGlzLm9wdGlvbnMuaW50ZXJwb2xhdGlvbi5za2lwT25WYXJpYWJsZXM7cmV0dXJuW3tyZWdleDp0aGlzLnJlZ2V4cFVuZXNjYXBlLHNhZmVWYWx1ZTpwPT55ZShwKX0se3JlZ2V4OnRoaXMucmVnZXhwLHNhZmVWYWx1ZTpwPT50aGlzLmVzY2FwZVZhbHVlP3llKHRoaXMuZXNjYXBlKHApKTp5ZShwKX1dLmZvckVhY2gocD0+e2ZvcihvPTA7cz1wLnJlZ2V4LmV4ZWMoZSk7KXtjb25zdCBkPXNbMV0udHJpbSgpO2lmKGE9ZihkKSxhPT09dm9pZCAwKWlmKHR5cGVvZiBjPT0iZnVuY3Rpb24iKXtjb25zdCB5PWMoZSxzLGkpO2E9dHlwZW9mIHk9PSJzdHJpbmciP3k6IiJ9ZWxzZSBpZihpJiZPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoaSxkKSlhPSIiO2Vsc2UgaWYoZyl7YT1zWzBdO2NvbnRpbnVlfWVsc2UgdGhpcy5sb2dnZXIud2FybihgbWlzc2VkIHRvIHBhc3MgaW4gdmFyaWFibGUgJHtkfSBmb3IgaW50ZXJwb2xhdGluZyAke2V9YCksYT0iIjtlbHNlIHR5cGVvZiBhIT0ic3RyaW5nIiYmIXRoaXMudXNlUmF3VmFsdWVUb0VzY2FwZSYmKGE9TWUoYSkpO2NvbnN0IG09cC5zYWZlVmFsdWUoYSk7aWYoZT1lLnJlcGxhY2Uoc1swXSxtKSxnPyhwLnJlZ2V4Lmxhc3RJbmRleCs9YS5sZW5ndGgscC5yZWdleC5sYXN0SW5kZXgtPXNbMF0ubGVuZ3RoKTpwLnJlZ2V4Lmxhc3RJbmRleD0wLG8rKyxvPj10aGlzLm1heFJlcGxhY2VzKWJyZWFrfX0pLGV9bmVzdChlLHQpe2xldCByPWFyZ3VtZW50cy5sZW5ndGg+MiYmYXJndW1lbnRzWzJdIT09dm9pZCAwP2FyZ3VtZW50c1syXTp7fSxpLHMsYTtjb25zdCBvPShsLGYpPT57Y29uc3QgYz10aGlzLm5lc3RpbmdPcHRpb25zU2VwYXJhdG9yO2lmKGwuaW5kZXhPZihjKTwwKXJldHVybiBsO2NvbnN0IGc9bC5zcGxpdChuZXcgUmVnRXhwKGAke2N9WyBdKntgKSk7bGV0IHU9YHske2dbMV19YDtsPWdbMF0sdT10aGlzLmludGVycG9sYXRlKHUsYSk7Y29uc3QgcD11Lm1hdGNoKC8nL2cpLGQ9dS5tYXRjaCgvIi9nKTsocCYmcC5sZW5ndGglMj09PTAmJiFkfHxkLmxlbmd0aCUyIT09MCkmJih1PXUucmVwbGFjZSgvJy9nLCciJykpO3RyeXthPUpTT04ucGFyc2UodSksZiYmKGE9ey4uLmYsLi4uYX0pfWNhdGNoKG0pe3JldHVybiB0aGlzLmxvZ2dlci53YXJuKGBmYWlsZWQgcGFyc2luZyBvcHRpb25zIHN0cmluZyBpbiBuZXN0aW5nIGZvciBrZXkgJHtsfWAsbSksYCR7bH0ke2N9JHt1fWB9cmV0dXJuIGEuZGVmYXVsdFZhbHVlJiZhLmRlZmF1bHRWYWx1ZS5pbmRleE9mKHRoaXMucHJlZml4KT4tMSYmZGVsZXRlIGEuZGVmYXVsdFZhbHVlLGx9O2Zvcig7aT10aGlzLm5lc3RpbmdSZWdleHAuZXhlYyhlKTspe2xldCBsPVtdO2E9ey4uLnJ9LGE9YS5yZXBsYWNlJiZ0eXBlb2YgYS5yZXBsYWNlIT0ic3RyaW5nIj9hLnJlcGxhY2U6YSxhLmFwcGx5UG9zdFByb2Nlc3Nvcj0hMSxkZWxldGUgYS5kZWZhdWx0VmFsdWU7bGV0IGY9ITE7aWYoaVswXS5pbmRleE9mKHRoaXMuZm9ybWF0U2VwYXJhdG9yKSE9PS0xJiYhL3suKn0vLnRlc3QoaVsxXSkpe2NvbnN0IGM9aVsxXS5zcGxpdCh0aGlzLmZvcm1hdFNlcGFyYXRvcikubWFwKGc9PmcudHJpbSgpKTtpWzFdPWMuc2hpZnQoKSxsPWMsZj0hMH1pZihzPXQoby5jYWxsKHRoaXMsaVsxXS50cmltKCksYSksYSkscyYmaVswXT09PWUmJnR5cGVvZiBzIT0ic3RyaW5nIilyZXR1cm4gczt0eXBlb2YgcyE9InN0cmluZyImJihzPU1lKHMpKSxzfHwodGhpcy5sb2dnZXIud2FybihgbWlzc2VkIHRvIHJlc29sdmUgJHtpWzFdfSBmb3IgbmVzdGluZyAke2V9YCkscz0iIiksZiYmKHM9bC5yZWR1Y2UoKGMsZyk9PnRoaXMuZm9ybWF0KGMsZyxyLmxuZyx7Li4ucixpbnRlcnBvbGF0aW9ua2V5OmlbMV0udHJpbSgpfSkscy50cmltKCkpKSxlPWUucmVwbGFjZShpWzBdLHMpLHRoaXMucmVnZXhwLmxhc3RJbmRleD0wfXJldHVybiBlfX1jb25zdCBncj1uPT57bGV0IGU9bi50b0xvd2VyQ2FzZSgpLnRyaW0oKTtjb25zdCB0PXt9O2lmKG4uaW5kZXhPZigiKCIpPi0xKXtjb25zdCByPW4uc3BsaXQoIigiKTtlPXJbMF0udG9Mb3dlckNhc2UoKS50cmltKCk7Y29uc3QgaT1yWzFdLnN1YnN0cmluZygwLHJbMV0ubGVuZ3RoLTEpO2U9PT0iY3VycmVuY3kiJiZpLmluZGV4T2YoIjoiKTwwP3QuY3VycmVuY3l8fCh0LmN1cnJlbmN5PWkudHJpbSgpKTplPT09InJlbGF0aXZldGltZSImJmkuaW5kZXhPZigiOiIpPDA/dC5yYW5nZXx8KHQucmFuZ2U9aS50cmltKCkpOmkuc3BsaXQoIjsiKS5mb3JFYWNoKGE9PntpZihhKXtjb25zdFtvLC4uLmxdPWEuc3BsaXQoIjoiKSxmPWwuam9pbigiOiIpLnRyaW0oKS5yZXBsYWNlKC9eJyt8JyskL2csIiIpLGM9by50cmltKCk7dFtjXXx8KHRbY109ZiksZj09PSJmYWxzZSImJih0W2NdPSExKSxmPT09InRydWUiJiYodFtjXT0hMCksaXNOYU4oZil8fCh0W2NdPXBhcnNlSW50KGYsMTApKX19KX1yZXR1cm57Zm9ybWF0TmFtZTplLGZvcm1hdE9wdGlvbnM6dH19LE09bj0+e2NvbnN0IGU9e307cmV0dXJuKHQscixpKT0+e2xldCBzPWk7aSYmaS5pbnRlcnBvbGF0aW9ua2V5JiZpLmZvcm1hdFBhcmFtcyYmaS5mb3JtYXRQYXJhbXNbaS5pbnRlcnBvbGF0aW9ua2V5XSYmaVtpLmludGVycG9sYXRpb25rZXldJiYocz17Li4ucyxbaS5pbnRlcnBvbGF0aW9ua2V5XTp2b2lkIDB9KTtjb25zdCBhPXIrSlNPTi5zdHJpbmdpZnkocyk7bGV0IG89ZVthXTtyZXR1cm4gb3x8KG89bihsZShyKSxpKSxlW2FdPW8pLG8odCl9fTtjbGFzcyBocntjb25zdHJ1Y3Rvcigpe2xldCBlPWFyZ3VtZW50cy5sZW5ndGg+MCYmYXJndW1lbnRzWzBdIT09dm9pZCAwP2FyZ3VtZW50c1swXTp7fTt0aGlzLmxvZ2dlcj1DLmNyZWF0ZSgiZm9ybWF0dGVyIiksdGhpcy5vcHRpb25zPWUsdGhpcy5mb3JtYXRzPXtudW1iZXI6TSgodCxyKT0+e2NvbnN0IGk9bmV3IEludGwuTnVtYmVyRm9ybWF0KHQsey4uLnJ9KTtyZXR1cm4gcz0+aS5mb3JtYXQocyl9KSxjdXJyZW5jeTpNKCh0LHIpPT57Y29uc3QgaT1uZXcgSW50bC5OdW1iZXJGb3JtYXQodCx7Li4ucixzdHlsZToiY3VycmVuY3kifSk7cmV0dXJuIHM9PmkuZm9ybWF0KHMpfSksZGF0ZXRpbWU6TSgodCxyKT0+e2NvbnN0IGk9bmV3IEludGwuRGF0ZVRpbWVGb3JtYXQodCx7Li4ucn0pO3JldHVybiBzPT5pLmZvcm1hdChzKX0pLHJlbGF0aXZldGltZTpNKCh0LHIpPT57Y29uc3QgaT1uZXcgSW50bC5SZWxhdGl2ZVRpbWVGb3JtYXQodCx7Li4ucn0pO3JldHVybiBzPT5pLmZvcm1hdChzLHIucmFuZ2V8fCJkYXkiKX0pLGxpc3Q6TSgodCxyKT0+e2NvbnN0IGk9bmV3IEludGwuTGlzdEZvcm1hdCh0LHsuLi5yfSk7cmV0dXJuIHM9PmkuZm9ybWF0KHMpfSl9LHRoaXMuaW5pdChlKX1pbml0KGUpe2NvbnN0IHI9KGFyZ3VtZW50cy5sZW5ndGg+MSYmYXJndW1lbnRzWzFdIT09dm9pZCAwP2FyZ3VtZW50c1sxXTp7aW50ZXJwb2xhdGlvbjp7fX0pLmludGVycG9sYXRpb247dGhpcy5mb3JtYXRTZXBhcmF0b3I9ci5mb3JtYXRTZXBhcmF0b3I/ci5mb3JtYXRTZXBhcmF0b3I6ci5mb3JtYXRTZXBhcmF0b3J8fCIsIn1hZGQoZSx0KXt0aGlzLmZvcm1hdHNbZS50b0xvd2VyQ2FzZSgpLnRyaW0oKV09dH1hZGRDYWNoZWQoZSx0KXt0aGlzLmZvcm1hdHNbZS50b0xvd2VyQ2FzZSgpLnRyaW0oKV09TSh0KX1mb3JtYXQoZSx0LHIpe2xldCBpPWFyZ3VtZW50cy5sZW5ndGg+MyYmYXJndW1lbnRzWzNdIT09dm9pZCAwP2FyZ3VtZW50c1szXTp7fTtjb25zdCBzPXQuc3BsaXQodGhpcy5mb3JtYXRTZXBhcmF0b3IpO2lmKHMubGVuZ3RoPjEmJnNbMF0uaW5kZXhPZigiKCIpPjEmJnNbMF0uaW5kZXhPZigiKSIpPDAmJnMuZmluZChvPT5vLmluZGV4T2YoIikiKT4tMSkpe2NvbnN0IG89cy5maW5kSW5kZXgobD0+bC5pbmRleE9mKCIpIik+LTEpO3NbMF09W3NbMF0sLi4ucy5zcGxpY2UoMSxvKV0uam9pbih0aGlzLmZvcm1hdFNlcGFyYXRvcil9cmV0dXJuIHMucmVkdWNlKChvLGwpPT57Y29uc3R7Zm9ybWF0TmFtZTpmLGZvcm1hdE9wdGlvbnM6Y309Z3IobCk7aWYodGhpcy5mb3JtYXRzW2ZdKXtsZXQgZz1vO3RyeXtjb25zdCB1PWkmJmkuZm9ybWF0UGFyYW1zJiZpLmZvcm1hdFBhcmFtc1tpLmludGVycG9sYXRpb25rZXldfHx7fSxwPXUubG9jYWxlfHx1LmxuZ3x8aS5sb2NhbGV8fGkubG5nfHxyO2c9dGhpcy5mb3JtYXRzW2ZdKG8scCx7Li4uYywuLi5pLC4uLnV9KX1jYXRjaCh1KXt0aGlzLmxvZ2dlci53YXJuKHUpfXJldHVybiBnfWVsc2UgdGhpcy5sb2dnZXIud2FybihgdGhlcmUgd2FzIG5vIGZvcm1hdCBmdW5jdGlvbiBmb3IgJHtmfWApO3JldHVybiBvfSxlKX19Y29uc3QgZHI9KG4sZSk9PntuLnBlbmRpbmdbZV0hPT12b2lkIDAmJihkZWxldGUgbi5wZW5kaW5nW2VdLG4ucGVuZGluZ0NvdW50LS0pfTtjbGFzcyBtciBleHRlbmRzIGhle2NvbnN0cnVjdG9yKGUsdCxyKXtsZXQgaT1hcmd1bWVudHMubGVuZ3RoPjMmJmFyZ3VtZW50c1szXSE9PXZvaWQgMD9hcmd1bWVudHNbM106e307c3VwZXIoKSx0aGlzLmJhY2tlbmQ9ZSx0aGlzLnN0b3JlPXQsdGhpcy5zZXJ2aWNlcz1yLHRoaXMubGFuZ3VhZ2VVdGlscz1yLmxhbmd1YWdlVXRpbHMsdGhpcy5vcHRpb25zPWksdGhpcy5sb2dnZXI9Qy5jcmVhdGUoImJhY2tlbmRDb25uZWN0b3IiKSx0aGlzLndhaXRpbmdSZWFkcz1bXSx0aGlzLm1heFBhcmFsbGVsUmVhZHM9aS5tYXhQYXJhbGxlbFJlYWRzfHwxMCx0aGlzLnJlYWRpbmdDYWxscz0wLHRoaXMubWF4UmV0cmllcz1pLm1heFJldHJpZXM+PTA/aS5tYXhSZXRyaWVzOjUsdGhpcy5yZXRyeVRpbWVvdXQ9aS5yZXRyeVRpbWVvdXQ+PTE/aS5yZXRyeVRpbWVvdXQ6MzUwLHRoaXMuc3RhdGU9e30sdGhpcy5xdWV1ZT1bXSx0aGlzLmJhY2tlbmQmJnRoaXMuYmFja2VuZC5pbml0JiZ0aGlzLmJhY2tlbmQuaW5pdChyLGkuYmFja2VuZCxpKX1xdWV1ZUxvYWQoZSx0LHIsaSl7Y29uc3Qgcz17fSxhPXt9LG89e30sbD17fTtyZXR1cm4gZS5mb3JFYWNoKGY9PntsZXQgYz0hMDt0LmZvckVhY2goZz0+e2NvbnN0IHU9YCR7Zn18JHtnfWA7IXIucmVsb2FkJiZ0aGlzLnN0b3JlLmhhc1Jlc291cmNlQnVuZGxlKGYsZyk/dGhpcy5zdGF0ZVt1XT0yOnRoaXMuc3RhdGVbdV08MHx8KHRoaXMuc3RhdGVbdV09PT0xP2FbdV09PT12b2lkIDAmJihhW3VdPSEwKToodGhpcy5zdGF0ZVt1XT0xLGM9ITEsYVt1XT09PXZvaWQgMCYmKGFbdV09ITApLHNbdV09PT12b2lkIDAmJihzW3VdPSEwKSxsW2ddPT09dm9pZCAwJiYobFtnXT0hMCkpKX0pLGN8fChvW2ZdPSEwKX0pLChPYmplY3Qua2V5cyhzKS5sZW5ndGh8fE9iamVjdC5rZXlzKGEpLmxlbmd0aCkmJnRoaXMucXVldWUucHVzaCh7cGVuZGluZzphLHBlbmRpbmdDb3VudDpPYmplY3Qua2V5cyhhKS5sZW5ndGgsbG9hZGVkOnt9LGVycm9yczpbXSxjYWxsYmFjazppfSkse3RvTG9hZDpPYmplY3Qua2V5cyhzKSxwZW5kaW5nOk9iamVjdC5rZXlzKGEpLHRvTG9hZExhbmd1YWdlczpPYmplY3Qua2V5cyhvKSx0b0xvYWROYW1lc3BhY2VzOk9iamVjdC5rZXlzKGwpfX1sb2FkZWQoZSx0LHIpe2NvbnN0IGk9ZS5zcGxpdCgifCIpLHM9aVswXSxhPWlbMV07dCYmdGhpcy5lbWl0KCJmYWlsZWRMb2FkaW5nIixzLGEsdCksIXQmJnImJnRoaXMuc3RvcmUuYWRkUmVzb3VyY2VCdW5kbGUocyxhLHIsdm9pZCAwLHZvaWQgMCx7c2tpcENvcHk6ITB9KSx0aGlzLnN0YXRlW2VdPXQ/LTE6Mix0JiZyJiYodGhpcy5zdGF0ZVtlXT0wKTtjb25zdCBvPXt9O3RoaXMucXVldWUuZm9yRWFjaChsPT57WnQobC5sb2FkZWQsW3NdLGEpLGRyKGwsZSksdCYmbC5lcnJvcnMucHVzaCh0KSxsLnBlbmRpbmdDb3VudD09PTAmJiFsLmRvbmUmJihPYmplY3Qua2V5cyhsLmxvYWRlZCkuZm9yRWFjaChmPT57b1tmXXx8KG9bZl09e30pO2NvbnN0IGM9bC5sb2FkZWRbZl07Yy5sZW5ndGgmJmMuZm9yRWFjaChnPT57b1tmXVtnXT09PXZvaWQgMCYmKG9bZl1bZ109ITApfSl9KSxsLmRvbmU9ITAsbC5lcnJvcnMubGVuZ3RoP2wuY2FsbGJhY2sobC5lcnJvcnMpOmwuY2FsbGJhY2soKSl9KSx0aGlzLmVtaXQoImxvYWRlZCIsbyksdGhpcy5xdWV1ZT10aGlzLnF1ZXVlLmZpbHRlcihsPT4hbC5kb25lKX1yZWFkKGUsdCxyKXtsZXQgaT1hcmd1bWVudHMubGVuZ3RoPjMmJmFyZ3VtZW50c1szXSE9PXZvaWQgMD9hcmd1bWVudHNbM106MCxzPWFyZ3VtZW50cy5sZW5ndGg+NCYmYXJndW1lbnRzWzRdIT09dm9pZCAwP2FyZ3VtZW50c1s0XTp0aGlzLnJldHJ5VGltZW91dCxhPWFyZ3VtZW50cy5sZW5ndGg+NT9hcmd1bWVudHNbNV06dm9pZCAwO2lmKCFlLmxlbmd0aClyZXR1cm4gYShudWxsLHt9KTtpZih0aGlzLnJlYWRpbmdDYWxscz49dGhpcy5tYXhQYXJhbGxlbFJlYWRzKXt0aGlzLndhaXRpbmdSZWFkcy5wdXNoKHtsbmc6ZSxuczp0LGZjTmFtZTpyLHRyaWVkOmksd2FpdDpzLGNhbGxiYWNrOmF9KTtyZXR1cm59dGhpcy5yZWFkaW5nQ2FsbHMrKztjb25zdCBvPShmLGMpPT57aWYodGhpcy5yZWFkaW5nQ2FsbHMtLSx0aGlzLndhaXRpbmdSZWFkcy5sZW5ndGg+MCl7Y29uc3QgZz10aGlzLndhaXRpbmdSZWFkcy5zaGlmdCgpO3RoaXMucmVhZChnLmxuZyxnLm5zLGcuZmNOYW1lLGcudHJpZWQsZy53YWl0LGcuY2FsbGJhY2spfWlmKGYmJmMmJmk8dGhpcy5tYXhSZXRyaWVzKXtzZXRUaW1lb3V0KCgpPT57dGhpcy5yZWFkLmNhbGwodGhpcyxlLHQscixpKzEscyoyLGEpfSxzKTtyZXR1cm59YShmLGMpfSxsPXRoaXMuYmFja2VuZFtyXS5iaW5kKHRoaXMuYmFja2VuZCk7aWYobC5sZW5ndGg9PT0yKXt0cnl7Y29uc3QgZj1sKGUsdCk7ZiYmdHlwZW9mIGYudGhlbj09ImZ1bmN0aW9uIj9mLnRoZW4oYz0+byhudWxsLGMpKS5jYXRjaChvKTpvKG51bGwsZil9Y2F0Y2goZil7byhmKX1yZXR1cm59cmV0dXJuIGwoZSx0LG8pfXByZXBhcmVMb2FkaW5nKGUsdCl7bGV0IHI9YXJndW1lbnRzLmxlbmd0aD4yJiZhcmd1bWVudHNbMl0hPT12b2lkIDA/YXJndW1lbnRzWzJdOnt9LGk9YXJndW1lbnRzLmxlbmd0aD4zP2FyZ3VtZW50c1szXTp2b2lkIDA7aWYoIXRoaXMuYmFja2VuZClyZXR1cm4gdGhpcy5sb2dnZXIud2FybigiTm8gYmFja2VuZCB3YXMgYWRkZWQgdmlhIGkxOG5leHQudXNlLiBXaWxsIG5vdCBsb2FkIHJlc291cmNlcy4iKSxpJiZpKCk7dHlwZW9mIGU9PSJzdHJpbmciJiYoZT10aGlzLmxhbmd1YWdlVXRpbHMudG9SZXNvbHZlSGllcmFyY2h5KGUpKSx0eXBlb2YgdD09InN0cmluZyImJih0PVt0XSk7Y29uc3Qgcz10aGlzLnF1ZXVlTG9hZChlLHQscixpKTtpZighcy50b0xvYWQubGVuZ3RoKXJldHVybiBzLnBlbmRpbmcubGVuZ3RofHxpKCksbnVsbDtzLnRvTG9hZC5mb3JFYWNoKGE9Pnt0aGlzLmxvYWRPbmUoYSl9KX1sb2FkKGUsdCxyKXt0aGlzLnByZXBhcmVMb2FkaW5nKGUsdCx7fSxyKX1yZWxvYWQoZSx0LHIpe3RoaXMucHJlcGFyZUxvYWRpbmcoZSx0LHtyZWxvYWQ6ITB9LHIpfWxvYWRPbmUoZSl7bGV0IHQ9YXJndW1lbnRzLmxlbmd0aD4xJiZhcmd1bWVudHNbMV0hPT12b2lkIDA/YXJndW1lbnRzWzFdOiIiO2NvbnN0IHI9ZS5zcGxpdCgifCIpLGk9clswXSxzPXJbMV07dGhpcy5yZWFkKGkscywicmVhZCIsdm9pZCAwLHZvaWQgMCwoYSxvKT0+e2EmJnRoaXMubG9nZ2VyLndhcm4oYCR7dH1sb2FkaW5nIG5hbWVzcGFjZSAke3N9IGZvciBsYW5ndWFnZSAke2l9IGZhaWxlZGAsYSksIWEmJm8mJnRoaXMubG9nZ2VyLmxvZyhgJHt0fWxvYWRlZCBuYW1lc3BhY2UgJHtzfSBmb3IgbGFuZ3VhZ2UgJHtpfWAsbyksdGhpcy5sb2FkZWQoZSxhLG8pfSl9c2F2ZU1pc3NpbmcoZSx0LHIsaSxzKXtsZXQgYT1hcmd1bWVudHMubGVuZ3RoPjUmJmFyZ3VtZW50c1s1XSE9PXZvaWQgMD9hcmd1bWVudHNbNV06e30sbz1hcmd1bWVudHMubGVuZ3RoPjYmJmFyZ3VtZW50c1s2XSE9PXZvaWQgMD9hcmd1bWVudHNbNl06KCk9Pnt9O2lmKHRoaXMuc2VydmljZXMudXRpbHMmJnRoaXMuc2VydmljZXMudXRpbHMuaGFzTG9hZGVkTmFtZXNwYWNlJiYhdGhpcy5zZXJ2aWNlcy51dGlscy5oYXNMb2FkZWROYW1lc3BhY2UodCkpe3RoaXMubG9nZ2VyLndhcm4oYGRpZCBub3Qgc2F2ZSBrZXkgIiR7cn0iIGFzIHRoZSBuYW1lc3BhY2UgIiR7dH0iIHdhcyBub3QgeWV0IGxvYWRlZGAsIlRoaXMgbWVhbnMgc29tZXRoaW5nIElTIFdST05HIGluIHlvdXIgc2V0dXAuIFlvdSBhY2Nlc3MgdGhlIHQgZnVuY3Rpb24gYmVmb3JlIGkxOG5leHQuaW5pdCAvIGkxOG5leHQubG9hZE5hbWVzcGFjZSAvIGkxOG5leHQuY2hhbmdlTGFuZ3VhZ2Ugd2FzIGRvbmUuIFdhaXQgZm9yIHRoZSBjYWxsYmFjayBvciBQcm9taXNlIHRvIHJlc29sdmUgYmVmb3JlIGFjY2Vzc2luZyBpdCEhISIpO3JldHVybn1pZighKHI9PW51bGx8fHI9PT0iIikpe2lmKHRoaXMuYmFja2VuZCYmdGhpcy5iYWNrZW5kLmNyZWF0ZSl7Y29uc3QgbD17Li4uYSxpc1VwZGF0ZTpzfSxmPXRoaXMuYmFja2VuZC5jcmVhdGUuYmluZCh0aGlzLmJhY2tlbmQpO2lmKGYubGVuZ3RoPDYpdHJ5e2xldCBjO2YubGVuZ3RoPT09NT9jPWYoZSx0LHIsaSxsKTpjPWYoZSx0LHIsaSksYyYmdHlwZW9mIGMudGhlbj09ImZ1bmN0aW9uIj9jLnRoZW4oZz0+byhudWxsLGcpKS5jYXRjaChvKTpvKG51bGwsYyl9Y2F0Y2goYyl7byhjKX1lbHNlIGYoZSx0LHIsaSxvLGwpfSFlfHwhZVswXXx8dGhpcy5zdG9yZS5hZGRSZXNvdXJjZShlWzBdLHQscixpKX19fWNvbnN0IFdlPSgpPT4oe2RlYnVnOiExLGluaXRJbW1lZGlhdGU6ITAsbnM6WyJ0cmFuc2xhdGlvbiJdLGRlZmF1bHROUzpbInRyYW5zbGF0aW9uIl0sZmFsbGJhY2tMbmc6WyJkZXYiXSxmYWxsYmFja05TOiExLHN1cHBvcnRlZExuZ3M6ITEsbm9uRXhwbGljaXRTdXBwb3J0ZWRMbmdzOiExLGxvYWQ6ImFsbCIscHJlbG9hZDohMSxzaW1wbGlmeVBsdXJhbFN1ZmZpeDohMCxrZXlTZXBhcmF0b3I6Ii4iLG5zU2VwYXJhdG9yOiI6IixwbHVyYWxTZXBhcmF0b3I6Il8iLGNvbnRleHRTZXBhcmF0b3I6Il8iLHBhcnRpYWxCdW5kbGVkTGFuZ3VhZ2VzOiExLHNhdmVNaXNzaW5nOiExLHVwZGF0ZU1pc3Npbmc6ITEsc2F2ZU1pc3NpbmdUbzoiZmFsbGJhY2siLHNhdmVNaXNzaW5nUGx1cmFsczohMCxtaXNzaW5nS2V5SGFuZGxlcjohMSxtaXNzaW5nSW50ZXJwb2xhdGlvbkhhbmRsZXI6ITEscG9zdFByb2Nlc3M6ITEscG9zdFByb2Nlc3NQYXNzUmVzb2x2ZWQ6ITEscmV0dXJuTnVsbDohMSxyZXR1cm5FbXB0eVN0cmluZzohMCxyZXR1cm5PYmplY3RzOiExLGpvaW5BcnJheXM6ITEscmV0dXJuZWRPYmplY3RIYW5kbGVyOiExLHBhcnNlTWlzc2luZ0tleUhhbmRsZXI6ITEsYXBwZW5kTmFtZXNwYWNlVG9NaXNzaW5nS2V5OiExLGFwcGVuZE5hbWVzcGFjZVRvQ0lNb2RlOiExLG92ZXJsb2FkVHJhbnNsYXRpb25PcHRpb25IYW5kbGVyOm49PntsZXQgZT17fTtpZih0eXBlb2YgblsxXT09Im9iamVjdCImJihlPW5bMV0pLHR5cGVvZiBuWzFdPT0ic3RyaW5nIiYmKGUuZGVmYXVsdFZhbHVlPW5bMV0pLHR5cGVvZiBuWzJdPT0ic3RyaW5nIiYmKGUudERlc2NyaXB0aW9uPW5bMl0pLHR5cGVvZiBuWzJdPT0ib2JqZWN0Inx8dHlwZW9mIG5bM109PSJvYmplY3QiKXtjb25zdCB0PW5bM118fG5bMl07T2JqZWN0LmtleXModCkuZm9yRWFjaChyPT57ZVtyXT10W3JdfSl9cmV0dXJuIGV9LGludGVycG9sYXRpb246e2VzY2FwZVZhbHVlOiEwLGZvcm1hdDpuPT5uLHByZWZpeDoie3siLHN1ZmZpeDoifX0iLGZvcm1hdFNlcGFyYXRvcjoiLCIsdW5lc2NhcGVQcmVmaXg6Ii0iLG5lc3RpbmdQcmVmaXg6IiR0KCIsbmVzdGluZ1N1ZmZpeDoiKSIsbmVzdGluZ09wdGlvbnNTZXBhcmF0b3I6IiwiLG1heFJlcGxhY2VzOjFlMyxza2lwT25WYXJpYWJsZXM6ITB9fSksSmU9bj0+KHR5cGVvZiBuLm5zPT0ic3RyaW5nIiYmKG4ubnM9W24ubnNdKSx0eXBlb2Ygbi5mYWxsYmFja0xuZz09InN0cmluZyImJihuLmZhbGxiYWNrTG5nPVtuLmZhbGxiYWNrTG5nXSksdHlwZW9mIG4uZmFsbGJhY2tOUz09InN0cmluZyImJihuLmZhbGxiYWNrTlM9W24uZmFsbGJhY2tOU10pLG4uc3VwcG9ydGVkTG5ncyYmbi5zdXBwb3J0ZWRMbmdzLmluZGV4T2YoImNpbW9kZSIpPDAmJihuLnN1cHBvcnRlZExuZ3M9bi5zdXBwb3J0ZWRMbmdzLmNvbmNhdChbImNpbW9kZSJdKSksbiksWD0oKT0+e30seXI9bj0+e09iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKE9iamVjdC5nZXRQcm90b3R5cGVPZihuKSkuZm9yRWFjaCh0PT57dHlwZW9mIG5bdF09PSJmdW5jdGlvbiImJihuW3RdPW5bdF0uYmluZChuKSl9KX07Y2xhc3MgUSBleHRlbmRzIGhle2NvbnN0cnVjdG9yKCl7bGV0IGU9YXJndW1lbnRzLmxlbmd0aD4wJiZhcmd1bWVudHNbMF0hPT12b2lkIDA/YXJndW1lbnRzWzBdOnt9LHQ9YXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDA7aWYoc3VwZXIoKSx0aGlzLm9wdGlvbnM9SmUoZSksdGhpcy5zZXJ2aWNlcz17fSx0aGlzLmxvZ2dlcj1DLHRoaXMubW9kdWxlcz17ZXh0ZXJuYWw6W119LHlyKHRoaXMpLHQmJiF0aGlzLmlzSW5pdGlhbGl6ZWQmJiFlLmlzQ2xvbmUpe2lmKCF0aGlzLm9wdGlvbnMuaW5pdEltbWVkaWF0ZSlyZXR1cm4gdGhpcy5pbml0KGUsdCksdGhpcztzZXRUaW1lb3V0KCgpPT57dGhpcy5pbml0KGUsdCl9LDApfX1pbml0KCl7dmFyIGU9dGhpcztsZXQgdD1hcmd1bWVudHMubGVuZ3RoPjAmJmFyZ3VtZW50c1swXSE9PXZvaWQgMD9hcmd1bWVudHNbMF06e30scj1hcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMDt0aGlzLmlzSW5pdGlhbGl6aW5nPSEwLHR5cGVvZiB0PT0iZnVuY3Rpb24iJiYocj10LHQ9e30pLCF0LmRlZmF1bHROUyYmdC5kZWZhdWx0TlMhPT0hMSYmdC5ucyYmKHR5cGVvZiB0Lm5zPT0ic3RyaW5nIj90LmRlZmF1bHROUz10Lm5zOnQubnMuaW5kZXhPZigidHJhbnNsYXRpb24iKTwwJiYodC5kZWZhdWx0TlM9dC5uc1swXSkpO2NvbnN0IGk9V2UoKTt0aGlzLm9wdGlvbnM9ey4uLmksLi4udGhpcy5vcHRpb25zLC4uLkplKHQpfSx0aGlzLm9wdGlvbnMuY29tcGF0aWJpbGl0eUFQSSE9PSJ2MSImJih0aGlzLm9wdGlvbnMuaW50ZXJwb2xhdGlvbj17Li4uaS5pbnRlcnBvbGF0aW9uLC4uLnRoaXMub3B0aW9ucy5pbnRlcnBvbGF0aW9ufSksdC5rZXlTZXBhcmF0b3IhPT12b2lkIDAmJih0aGlzLm9wdGlvbnMudXNlckRlZmluZWRLZXlTZXBhcmF0b3I9dC5rZXlTZXBhcmF0b3IpLHQubnNTZXBhcmF0b3IhPT12b2lkIDAmJih0aGlzLm9wdGlvbnMudXNlckRlZmluZWROc1NlcGFyYXRvcj10Lm5zU2VwYXJhdG9yKTtjb25zdCBzPWM9PmM/dHlwZW9mIGM9PSJmdW5jdGlvbiI/bmV3IGM6YzpudWxsO2lmKCF0aGlzLm9wdGlvbnMuaXNDbG9uZSl7dGhpcy5tb2R1bGVzLmxvZ2dlcj9DLmluaXQocyh0aGlzLm1vZHVsZXMubG9nZ2VyKSx0aGlzLm9wdGlvbnMpOkMuaW5pdChudWxsLHRoaXMub3B0aW9ucyk7bGV0IGM7dGhpcy5tb2R1bGVzLmZvcm1hdHRlcj9jPXRoaXMubW9kdWxlcy5mb3JtYXR0ZXI6dHlwZW9mIEludGw8InUiJiYoYz1ocik7Y29uc3QgZz1uZXcgS2UodGhpcy5vcHRpb25zKTt0aGlzLnN0b3JlPW5ldyBHZSh0aGlzLm9wdGlvbnMucmVzb3VyY2VzLHRoaXMub3B0aW9ucyk7Y29uc3QgdT10aGlzLnNlcnZpY2VzO3UubG9nZ2VyPUMsdS5yZXNvdXJjZVN0b3JlPXRoaXMuc3RvcmUsdS5sYW5ndWFnZVV0aWxzPWcsdS5wbHVyYWxSZXNvbHZlcj1uZXcgY3IoZyx7cHJlcGVuZDp0aGlzLm9wdGlvbnMucGx1cmFsU2VwYXJhdG9yLGNvbXBhdGliaWxpdHlKU09OOnRoaXMub3B0aW9ucy5jb21wYXRpYmlsaXR5SlNPTixzaW1wbGlmeVBsdXJhbFN1ZmZpeDp0aGlzLm9wdGlvbnMuc2ltcGxpZnlQbHVyYWxTdWZmaXh9KSxjJiYoIXRoaXMub3B0aW9ucy5pbnRlcnBvbGF0aW9uLmZvcm1hdHx8dGhpcy5vcHRpb25zLmludGVycG9sYXRpb24uZm9ybWF0PT09aS5pbnRlcnBvbGF0aW9uLmZvcm1hdCkmJih1LmZvcm1hdHRlcj1zKGMpLHUuZm9ybWF0dGVyLmluaXQodSx0aGlzLm9wdGlvbnMpLHRoaXMub3B0aW9ucy5pbnRlcnBvbGF0aW9uLmZvcm1hdD11LmZvcm1hdHRlci5mb3JtYXQuYmluZCh1LmZvcm1hdHRlcikpLHUuaW50ZXJwb2xhdG9yPW5ldyBwcih0aGlzLm9wdGlvbnMpLHUudXRpbHM9e2hhc0xvYWRlZE5hbWVzcGFjZTp0aGlzLmhhc0xvYWRlZE5hbWVzcGFjZS5iaW5kKHRoaXMpfSx1LmJhY2tlbmRDb25uZWN0b3I9bmV3IG1yKHModGhpcy5tb2R1bGVzLmJhY2tlbmQpLHUucmVzb3VyY2VTdG9yZSx1LHRoaXMub3B0aW9ucyksdS5iYWNrZW5kQ29ubmVjdG9yLm9uKCIqIixmdW5jdGlvbihwKXtmb3IodmFyIGQ9YXJndW1lbnRzLmxlbmd0aCxtPW5ldyBBcnJheShkPjE/ZC0xOjApLHk9MTt5PGQ7eSsrKW1beS0xXT1hcmd1bWVudHNbeV07ZS5lbWl0KHAsLi4ubSl9KSx0aGlzLm1vZHVsZXMubGFuZ3VhZ2VEZXRlY3RvciYmKHUubGFuZ3VhZ2VEZXRlY3Rvcj1zKHRoaXMubW9kdWxlcy5sYW5ndWFnZURldGVjdG9yKSx1Lmxhbmd1YWdlRGV0ZWN0b3IuaW5pdCYmdS5sYW5ndWFnZURldGVjdG9yLmluaXQodSx0aGlzLm9wdGlvbnMuZGV0ZWN0aW9uLHRoaXMub3B0aW9ucykpLHRoaXMubW9kdWxlcy5pMThuRm9ybWF0JiYodS5pMThuRm9ybWF0PXModGhpcy5tb2R1bGVzLmkxOG5Gb3JtYXQpLHUuaTE4bkZvcm1hdC5pbml0JiZ1LmkxOG5Gb3JtYXQuaW5pdCh0aGlzKSksdGhpcy50cmFuc2xhdG9yPW5ldyB1ZSh0aGlzLnNlcnZpY2VzLHRoaXMub3B0aW9ucyksdGhpcy50cmFuc2xhdG9yLm9uKCIqIixmdW5jdGlvbihwKXtmb3IodmFyIGQ9YXJndW1lbnRzLmxlbmd0aCxtPW5ldyBBcnJheShkPjE/ZC0xOjApLHk9MTt5PGQ7eSsrKW1beS0xXT1hcmd1bWVudHNbeV07ZS5lbWl0KHAsLi4ubSl9KSx0aGlzLm1vZHVsZXMuZXh0ZXJuYWwuZm9yRWFjaChwPT57cC5pbml0JiZwLmluaXQodGhpcyl9KX1pZih0aGlzLmZvcm1hdD10aGlzLm9wdGlvbnMuaW50ZXJwb2xhdGlvbi5mb3JtYXQscnx8KHI9WCksdGhpcy5vcHRpb25zLmZhbGxiYWNrTG5nJiYhdGhpcy5zZXJ2aWNlcy5sYW5ndWFnZURldGVjdG9yJiYhdGhpcy5vcHRpb25zLmxuZyl7Y29uc3QgYz10aGlzLnNlcnZpY2VzLmxhbmd1YWdlVXRpbHMuZ2V0RmFsbGJhY2tDb2Rlcyh0aGlzLm9wdGlvbnMuZmFsbGJhY2tMbmcpO2MubGVuZ3RoPjAmJmNbMF0hPT0iZGV2IiYmKHRoaXMub3B0aW9ucy5sbmc9Y1swXSl9IXRoaXMuc2VydmljZXMubGFuZ3VhZ2VEZXRlY3RvciYmIXRoaXMub3B0aW9ucy5sbmcmJnRoaXMubG9nZ2VyLndhcm4oImluaXQ6IG5vIGxhbmd1YWdlRGV0ZWN0b3IgaXMgdXNlZCBhbmQgbm8gbG5nIGlzIGRlZmluZWQiKSxbImdldFJlc291cmNlIiwiaGFzUmVzb3VyY2VCdW5kbGUiLCJnZXRSZXNvdXJjZUJ1bmRsZSIsImdldERhdGFCeUxhbmd1YWdlIl0uZm9yRWFjaChjPT57dGhpc1tjXT1mdW5jdGlvbigpe3JldHVybiBlLnN0b3JlW2NdKC4uLmFyZ3VtZW50cyl9fSksWyJhZGRSZXNvdXJjZSIsImFkZFJlc291cmNlcyIsImFkZFJlc291cmNlQnVuZGxlIiwicmVtb3ZlUmVzb3VyY2VCdW5kbGUiXS5mb3JFYWNoKGM9Pnt0aGlzW2NdPWZ1bmN0aW9uKCl7cmV0dXJuIGUuc3RvcmVbY10oLi4uYXJndW1lbnRzKSxlfX0pO2NvbnN0IGw9SigpLGY9KCk9Pntjb25zdCBjPShnLHUpPT57dGhpcy5pc0luaXRpYWxpemluZz0hMSx0aGlzLmlzSW5pdGlhbGl6ZWQmJiF0aGlzLmluaXRpYWxpemVkU3RvcmVPbmNlJiZ0aGlzLmxvZ2dlci53YXJuKCJpbml0OiBpMThuZXh0IGlzIGFscmVhZHkgaW5pdGlhbGl6ZWQuIFlvdSBzaG91bGQgY2FsbCBpbml0IGp1c3Qgb25jZSEiKSx0aGlzLmlzSW5pdGlhbGl6ZWQ9ITAsdGhpcy5vcHRpb25zLmlzQ2xvbmV8fHRoaXMubG9nZ2VyLmxvZygiaW5pdGlhbGl6ZWQiLHRoaXMub3B0aW9ucyksdGhpcy5lbWl0KCJpbml0aWFsaXplZCIsdGhpcy5vcHRpb25zKSxsLnJlc29sdmUodSkscihnLHUpfTtpZih0aGlzLmxhbmd1YWdlcyYmdGhpcy5vcHRpb25zLmNvbXBhdGliaWxpdHlBUEkhPT0idjEiJiYhdGhpcy5pc0luaXRpYWxpemVkKXJldHVybiBjKG51bGwsdGhpcy50LmJpbmQodGhpcykpO3RoaXMuY2hhbmdlTGFuZ3VhZ2UodGhpcy5vcHRpb25zLmxuZyxjKX07cmV0dXJuIHRoaXMub3B0aW9ucy5yZXNvdXJjZXN8fCF0aGlzLm9wdGlvbnMuaW5pdEltbWVkaWF0ZT9mKCk6c2V0VGltZW91dChmLDApLGx9bG9hZFJlc291cmNlcyhlKXtsZXQgcj1hcmd1bWVudHMubGVuZ3RoPjEmJmFyZ3VtZW50c1sxXSE9PXZvaWQgMD9hcmd1bWVudHNbMV06WDtjb25zdCBpPXR5cGVvZiBlPT0ic3RyaW5nIj9lOnRoaXMubGFuZ3VhZ2U7aWYodHlwZW9mIGU9PSJmdW5jdGlvbiImJihyPWUpLCF0aGlzLm9wdGlvbnMucmVzb3VyY2VzfHx0aGlzLm9wdGlvbnMucGFydGlhbEJ1bmRsZWRMYW5ndWFnZXMpe2lmKGkmJmkudG9Mb3dlckNhc2UoKT09PSJjaW1vZGUiJiYoIXRoaXMub3B0aW9ucy5wcmVsb2FkfHx0aGlzLm9wdGlvbnMucHJlbG9hZC5sZW5ndGg9PT0wKSlyZXR1cm4gcigpO2NvbnN0IHM9W10sYT1vPT57aWYoIW98fG89PT0iY2ltb2RlIilyZXR1cm47dGhpcy5zZXJ2aWNlcy5sYW5ndWFnZVV0aWxzLnRvUmVzb2x2ZUhpZXJhcmNoeShvKS5mb3JFYWNoKGY9PntmIT09ImNpbW9kZSImJnMuaW5kZXhPZihmKTwwJiZzLnB1c2goZil9KX07aT9hKGkpOnRoaXMuc2VydmljZXMubGFuZ3VhZ2VVdGlscy5nZXRGYWxsYmFja0NvZGVzKHRoaXMub3B0aW9ucy5mYWxsYmFja0xuZykuZm9yRWFjaChsPT5hKGwpKSx0aGlzLm9wdGlvbnMucHJlbG9hZCYmdGhpcy5vcHRpb25zLnByZWxvYWQuZm9yRWFjaChvPT5hKG8pKSx0aGlzLnNlcnZpY2VzLmJhY2tlbmRDb25uZWN0b3IubG9hZChzLHRoaXMub3B0aW9ucy5ucyxvPT57IW8mJiF0aGlzLnJlc29sdmVkTGFuZ3VhZ2UmJnRoaXMubGFuZ3VhZ2UmJnRoaXMuc2V0UmVzb2x2ZWRMYW5ndWFnZSh0aGlzLmxhbmd1YWdlKSxyKG8pfSl9ZWxzZSByKG51bGwpfXJlbG9hZFJlc291cmNlcyhlLHQscil7Y29uc3QgaT1KKCk7cmV0dXJuIHR5cGVvZiBlPT0iZnVuY3Rpb24iJiYocj1lLGU9dm9pZCAwKSx0eXBlb2YgdD09ImZ1bmN0aW9uIiYmKHI9dCx0PXZvaWQgMCksZXx8KGU9dGhpcy5sYW5ndWFnZXMpLHR8fCh0PXRoaXMub3B0aW9ucy5ucykscnx8KHI9WCksdGhpcy5zZXJ2aWNlcy5iYWNrZW5kQ29ubmVjdG9yLnJlbG9hZChlLHQscz0+e2kucmVzb2x2ZSgpLHIocyl9KSxpfXVzZShlKXtpZighZSl0aHJvdyBuZXcgRXJyb3IoIllvdSBhcmUgcGFzc2luZyBhbiB1bmRlZmluZWQgbW9kdWxlISBQbGVhc2UgY2hlY2sgdGhlIG9iamVjdCB5b3UgYXJlIHBhc3NpbmcgdG8gaTE4bmV4dC51c2UoKSIpO2lmKCFlLnR5cGUpdGhyb3cgbmV3IEVycm9yKCJZb3UgYXJlIHBhc3NpbmcgYSB3cm9uZyBtb2R1bGUhIFBsZWFzZSBjaGVjayB0aGUgb2JqZWN0IHlvdSBhcmUgcGFzc2luZyB0byBpMThuZXh0LnVzZSgpIik7cmV0dXJuIGUudHlwZT09PSJiYWNrZW5kIiYmKHRoaXMubW9kdWxlcy5iYWNrZW5kPWUpLChlLnR5cGU9PT0ibG9nZ2VyInx8ZS5sb2cmJmUud2FybiYmZS5lcnJvcikmJih0aGlzLm1vZHVsZXMubG9nZ2VyPWUpLGUudHlwZT09PSJsYW5ndWFnZURldGVjdG9yIiYmKHRoaXMubW9kdWxlcy5sYW5ndWFnZURldGVjdG9yPWUpLGUudHlwZT09PSJpMThuRm9ybWF0IiYmKHRoaXMubW9kdWxlcy5pMThuRm9ybWF0PWUpLGUudHlwZT09PSJwb3N0UHJvY2Vzc29yIiYmd3QuYWRkUG9zdFByb2Nlc3NvcihlKSxlLnR5cGU9PT0iZm9ybWF0dGVyIiYmKHRoaXMubW9kdWxlcy5mb3JtYXR0ZXI9ZSksZS50eXBlPT09IjNyZFBhcnR5IiYmdGhpcy5tb2R1bGVzLmV4dGVybmFsLnB1c2goZSksdGhpc31zZXRSZXNvbHZlZExhbmd1YWdlKGUpe2lmKCEoIWV8fCF0aGlzLmxhbmd1YWdlcykmJiEoWyJjaW1vZGUiLCJkZXYiXS5pbmRleE9mKGUpPi0xKSlmb3IobGV0IHQ9MDt0PHRoaXMubGFuZ3VhZ2VzLmxlbmd0aDt0Kyspe2NvbnN0IHI9dGhpcy5sYW5ndWFnZXNbdF07aWYoIShbImNpbW9kZSIsImRldiJdLmluZGV4T2Yocik+LTEpJiZ0aGlzLnN0b3JlLmhhc0xhbmd1YWdlU29tZVRyYW5zbGF0aW9ucyhyKSl7dGhpcy5yZXNvbHZlZExhbmd1YWdlPXI7YnJlYWt9fX1jaGFuZ2VMYW5ndWFnZShlLHQpe3ZhciByPXRoaXM7dGhpcy5pc0xhbmd1YWdlQ2hhbmdpbmdUbz1lO2NvbnN0IGk9SigpO3RoaXMuZW1pdCgibGFuZ3VhZ2VDaGFuZ2luZyIsZSk7Y29uc3Qgcz1sPT57dGhpcy5sYW5ndWFnZT1sLHRoaXMubGFuZ3VhZ2VzPXRoaXMuc2VydmljZXMubGFuZ3VhZ2VVdGlscy50b1Jlc29sdmVIaWVyYXJjaHkobCksdGhpcy5yZXNvbHZlZExhbmd1YWdlPXZvaWQgMCx0aGlzLnNldFJlc29sdmVkTGFuZ3VhZ2UobCl9LGE9KGwsZik9PntmPyhzKGYpLHRoaXMudHJhbnNsYXRvci5jaGFuZ2VMYW5ndWFnZShmKSx0aGlzLmlzTGFuZ3VhZ2VDaGFuZ2luZ1RvPXZvaWQgMCx0aGlzLmVtaXQoImxhbmd1YWdlQ2hhbmdlZCIsZiksdGhpcy5sb2dnZXIubG9nKCJsYW5ndWFnZUNoYW5nZWQiLGYpKTp0aGlzLmlzTGFuZ3VhZ2VDaGFuZ2luZ1RvPXZvaWQgMCxpLnJlc29sdmUoZnVuY3Rpb24oKXtyZXR1cm4gci50KC4uLmFyZ3VtZW50cyl9KSx0JiZ0KGwsZnVuY3Rpb24oKXtyZXR1cm4gci50KC4uLmFyZ3VtZW50cyl9KX0sbz1sPT57IWUmJiFsJiZ0aGlzLnNlcnZpY2VzLmxhbmd1YWdlRGV0ZWN0b3ImJihsPVtdKTtjb25zdCBmPXR5cGVvZiBsPT0ic3RyaW5nIj9sOnRoaXMuc2VydmljZXMubGFuZ3VhZ2VVdGlscy5nZXRCZXN0TWF0Y2hGcm9tQ29kZXMobCk7ZiYmKHRoaXMubGFuZ3VhZ2V8fHMoZiksdGhpcy50cmFuc2xhdG9yLmxhbmd1YWdlfHx0aGlzLnRyYW5zbGF0b3IuY2hhbmdlTGFuZ3VhZ2UoZiksdGhpcy5zZXJ2aWNlcy5sYW5ndWFnZURldGVjdG9yJiZ0aGlzLnNlcnZpY2VzLmxhbmd1YWdlRGV0ZWN0b3IuY2FjaGVVc2VyTGFuZ3VhZ2UmJnRoaXMuc2VydmljZXMubGFuZ3VhZ2VEZXRlY3Rvci5jYWNoZVVzZXJMYW5ndWFnZShmKSksdGhpcy5sb2FkUmVzb3VyY2VzKGYsYz0+e2EoYyxmKX0pfTtyZXR1cm4hZSYmdGhpcy5zZXJ2aWNlcy5sYW5ndWFnZURldGVjdG9yJiYhdGhpcy5zZXJ2aWNlcy5sYW5ndWFnZURldGVjdG9yLmFzeW5jP28odGhpcy5zZXJ2aWNlcy5sYW5ndWFnZURldGVjdG9yLmRldGVjdCgpKTohZSYmdGhpcy5zZXJ2aWNlcy5sYW5ndWFnZURldGVjdG9yJiZ0aGlzLnNlcnZpY2VzLmxhbmd1YWdlRGV0ZWN0b3IuYXN5bmM/dGhpcy5zZXJ2aWNlcy5sYW5ndWFnZURldGVjdG9yLmRldGVjdC5sZW5ndGg9PT0wP3RoaXMuc2VydmljZXMubGFuZ3VhZ2VEZXRlY3Rvci5kZXRlY3QoKS50aGVuKG8pOnRoaXMuc2VydmljZXMubGFuZ3VhZ2VEZXRlY3Rvci5kZXRlY3Qobyk6byhlKSxpfWdldEZpeGVkVChlLHQscil7dmFyIGk9dGhpcztjb25zdCBzPWZ1bmN0aW9uKGEsbyl7bGV0IGw7aWYodHlwZW9mIG8hPSJvYmplY3QiKXtmb3IodmFyIGY9YXJndW1lbnRzLmxlbmd0aCxjPW5ldyBBcnJheShmPjI/Zi0yOjApLGc9MjtnPGY7ZysrKWNbZy0yXT1hcmd1bWVudHNbZ107bD1pLm9wdGlvbnMub3ZlcmxvYWRUcmFuc2xhdGlvbk9wdGlvbkhhbmRsZXIoW2Esb10uY29uY2F0KGMpKX1lbHNlIGw9ey4uLm99O2wubG5nPWwubG5nfHxzLmxuZyxsLmxuZ3M9bC5sbmdzfHxzLmxuZ3MsbC5ucz1sLm5zfHxzLm5zLGwua2V5UHJlZml4IT09IiImJihsLmtleVByZWZpeD1sLmtleVByZWZpeHx8cnx8cy5rZXlQcmVmaXgpO2NvbnN0IHU9aS5vcHRpb25zLmtleVNlcGFyYXRvcnx8Ii4iO2xldCBwO3JldHVybiBsLmtleVByZWZpeCYmQXJyYXkuaXNBcnJheShhKT9wPWEubWFwKGQ9PmAke2wua2V5UHJlZml4fSR7dX0ke2R9YCk6cD1sLmtleVByZWZpeD9gJHtsLmtleVByZWZpeH0ke3V9JHthfWA6YSxpLnQocCxsKX07cmV0dXJuIHR5cGVvZiBlPT0ic3RyaW5nIj9zLmxuZz1lOnMubG5ncz1lLHMubnM9dCxzLmtleVByZWZpeD1yLHN9dCgpe3JldHVybiB0aGlzLnRyYW5zbGF0b3ImJnRoaXMudHJhbnNsYXRvci50cmFuc2xhdGUoLi4uYXJndW1lbnRzKX1leGlzdHMoKXtyZXR1cm4gdGhpcy50cmFuc2xhdG9yJiZ0aGlzLnRyYW5zbGF0b3IuZXhpc3RzKC4uLmFyZ3VtZW50cyl9c2V0RGVmYXVsdE5hbWVzcGFjZShlKXt0aGlzLm9wdGlvbnMuZGVmYXVsdE5TPWV9aGFzTG9hZGVkTmFtZXNwYWNlKGUpe2xldCB0PWFyZ3VtZW50cy5sZW5ndGg+MSYmYXJndW1lbnRzWzFdIT09dm9pZCAwP2FyZ3VtZW50c1sxXTp7fTtpZighdGhpcy5pc0luaXRpYWxpemVkKXJldHVybiB0aGlzLmxvZ2dlci53YXJuKCJoYXNMb2FkZWROYW1lc3BhY2U6IGkxOG5leHQgd2FzIG5vdCBpbml0aWFsaXplZCIsdGhpcy5sYW5ndWFnZXMpLCExO2lmKCF0aGlzLmxhbmd1YWdlc3x8IXRoaXMubGFuZ3VhZ2VzLmxlbmd0aClyZXR1cm4gdGhpcy5sb2dnZXIud2FybigiaGFzTG9hZGVkTmFtZXNwYWNlOiBpMThuLmxhbmd1YWdlcyB3ZXJlIHVuZGVmaW5lZCBvciBlbXB0eSIsdGhpcy5sYW5ndWFnZXMpLCExO2NvbnN0IHI9dC5sbmd8fHRoaXMucmVzb2x2ZWRMYW5ndWFnZXx8dGhpcy5sYW5ndWFnZXNbMF0saT10aGlzLm9wdGlvbnM/dGhpcy5vcHRpb25zLmZhbGxiYWNrTG5nOiExLHM9dGhpcy5sYW5ndWFnZXNbdGhpcy5sYW5ndWFnZXMubGVuZ3RoLTFdO2lmKHIudG9Mb3dlckNhc2UoKT09PSJjaW1vZGUiKXJldHVybiEwO2NvbnN0IGE9KG8sbCk9Pntjb25zdCBmPXRoaXMuc2VydmljZXMuYmFja2VuZENvbm5lY3Rvci5zdGF0ZVtgJHtvfXwke2x9YF07cmV0dXJuIGY9PT0tMXx8Zj09PTB8fGY9PT0yfTtpZih0LnByZWNoZWNrKXtjb25zdCBvPXQucHJlY2hlY2sodGhpcyxhKTtpZihvIT09dm9pZCAwKXJldHVybiBvfXJldHVybiEhKHRoaXMuaGFzUmVzb3VyY2VCdW5kbGUocixlKXx8IXRoaXMuc2VydmljZXMuYmFja2VuZENvbm5lY3Rvci5iYWNrZW5kfHx0aGlzLm9wdGlvbnMucmVzb3VyY2VzJiYhdGhpcy5vcHRpb25zLnBhcnRpYWxCdW5kbGVkTGFuZ3VhZ2VzfHxhKHIsZSkmJighaXx8YShzLGUpKSl9bG9hZE5hbWVzcGFjZXMoZSx0KXtjb25zdCByPUooKTtyZXR1cm4gdGhpcy5vcHRpb25zLm5zPyh0eXBlb2YgZT09InN0cmluZyImJihlPVtlXSksZS5mb3JFYWNoKGk9Pnt0aGlzLm9wdGlvbnMubnMuaW5kZXhPZihpKTwwJiZ0aGlzLm9wdGlvbnMubnMucHVzaChpKX0pLHRoaXMubG9hZFJlc291cmNlcyhpPT57ci5yZXNvbHZlKCksdCYmdChpKX0pLHIpOih0JiZ0KCksUHJvbWlzZS5yZXNvbHZlKCkpfWxvYWRMYW5ndWFnZXMoZSx0KXtjb25zdCByPUooKTt0eXBlb2YgZT09InN0cmluZyImJihlPVtlXSk7Y29uc3QgaT10aGlzLm9wdGlvbnMucHJlbG9hZHx8W10scz1lLmZpbHRlcihhPT5pLmluZGV4T2YoYSk8MCYmdGhpcy5zZXJ2aWNlcy5sYW5ndWFnZVV0aWxzLmlzU3VwcG9ydGVkQ29kZShhKSk7cmV0dXJuIHMubGVuZ3RoPyh0aGlzLm9wdGlvbnMucHJlbG9hZD1pLmNvbmNhdChzKSx0aGlzLmxvYWRSZXNvdXJjZXMoYT0+e3IucmVzb2x2ZSgpLHQmJnQoYSl9KSxyKToodCYmdCgpLFByb21pc2UucmVzb2x2ZSgpKX1kaXIoZSl7aWYoZXx8KGU9dGhpcy5yZXNvbHZlZExhbmd1YWdlfHwodGhpcy5sYW5ndWFnZXMmJnRoaXMubGFuZ3VhZ2VzLmxlbmd0aD4wP3RoaXMubGFuZ3VhZ2VzWzBdOnRoaXMubGFuZ3VhZ2UpKSwhZSlyZXR1cm4icnRsIjtjb25zdCB0PVsiYXIiLCJzaHUiLCJzcXIiLCJzc2giLCJ4YWEiLCJ5aGQiLCJ5dWQiLCJhYW8iLCJhYmgiLCJhYnYiLCJhY20iLCJhY3EiLCJhY3ciLCJhY3giLCJhY3kiLCJhZGYiLCJhZHMiLCJhZWIiLCJhZWMiLCJhZmIiLCJhanAiLCJhcGMiLCJhcGQiLCJhcmIiLCJhcnEiLCJhcnMiLCJhcnkiLCJhcnoiLCJhdXoiLCJhdmwiLCJheWgiLCJheWwiLCJheW4iLCJheXAiLCJiYnoiLCJwZ2EiLCJoZSIsIml3IiwicHMiLCJwYnQiLCJwYnUiLCJwc3QiLCJwcnAiLCJwcmQiLCJ1ZyIsInVyIiwieWRkIiwieWRzIiwieWloIiwiamkiLCJ5aSIsImhibyIsIm1lbiIsInhtbiIsImZhIiwianByIiwicGVvIiwicGVzIiwicHJzIiwiZHYiLCJzYW0iLCJja2IiXSxyPXRoaXMuc2VydmljZXMmJnRoaXMuc2VydmljZXMubGFuZ3VhZ2VVdGlsc3x8bmV3IEtlKFdlKCkpO3JldHVybiB0LmluZGV4T2Yoci5nZXRMYW5ndWFnZVBhcnRGcm9tQ29kZShlKSk+LTF8fGUudG9Mb3dlckNhc2UoKS5pbmRleE9mKCItYXJhYiIpPjE/InJ0bCI6Imx0ciJ9c3RhdGljIGNyZWF0ZUluc3RhbmNlKCl7bGV0IGU9YXJndW1lbnRzLmxlbmd0aD4wJiZhcmd1bWVudHNbMF0hPT12b2lkIDA/YXJndW1lbnRzWzBdOnt9LHQ9YXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTp2b2lkIDA7cmV0dXJuIG5ldyBRKGUsdCl9Y2xvbmVJbnN0YW5jZSgpe2xldCBlPWFyZ3VtZW50cy5sZW5ndGg+MCYmYXJndW1lbnRzWzBdIT09dm9pZCAwP2FyZ3VtZW50c1swXTp7fSx0PWFyZ3VtZW50cy5sZW5ndGg+MSYmYXJndW1lbnRzWzFdIT09dm9pZCAwP2FyZ3VtZW50c1sxXTpYO2NvbnN0IHI9ZS5mb3JrUmVzb3VyY2VTdG9yZTtyJiZkZWxldGUgZS5mb3JrUmVzb3VyY2VTdG9yZTtjb25zdCBpPXsuLi50aGlzLm9wdGlvbnMsLi4uZSxpc0Nsb25lOiEwfSxzPW5ldyBRKGkpO3JldHVybihlLmRlYnVnIT09dm9pZCAwfHxlLnByZWZpeCE9PXZvaWQgMCkmJihzLmxvZ2dlcj1zLmxvZ2dlci5jbG9uZShlKSksWyJzdG9yZSIsInNlcnZpY2VzIiwibGFuZ3VhZ2UiXS5mb3JFYWNoKG89PntzW29dPXRoaXNbb119KSxzLnNlcnZpY2VzPXsuLi50aGlzLnNlcnZpY2VzfSxzLnNlcnZpY2VzLnV0aWxzPXtoYXNMb2FkZWROYW1lc3BhY2U6cy5oYXNMb2FkZWROYW1lc3BhY2UuYmluZChzKX0sciYmKHMuc3RvcmU9bmV3IEdlKHRoaXMuc3RvcmUuZGF0YSxpKSxzLnNlcnZpY2VzLnJlc291cmNlU3RvcmU9cy5zdG9yZSkscy50cmFuc2xhdG9yPW5ldyB1ZShzLnNlcnZpY2VzLGkpLHMudHJhbnNsYXRvci5vbigiKiIsZnVuY3Rpb24obyl7Zm9yKHZhciBsPWFyZ3VtZW50cy5sZW5ndGgsZj1uZXcgQXJyYXkobD4xP2wtMTowKSxjPTE7YzxsO2MrKylmW2MtMV09YXJndW1lbnRzW2NdO3MuZW1pdChvLC4uLmYpfSkscy5pbml0KGksdCkscy50cmFuc2xhdG9yLm9wdGlvbnM9aSxzLnRyYW5zbGF0b3IuYmFja2VuZENvbm5lY3Rvci5zZXJ2aWNlcy51dGlscz17aGFzTG9hZGVkTmFtZXNwYWNlOnMuaGFzTG9hZGVkTmFtZXNwYWNlLmJpbmQocyl9LHN9dG9KU09OKCl7cmV0dXJue29wdGlvbnM6dGhpcy5vcHRpb25zLHN0b3JlOnRoaXMuc3RvcmUsbGFuZ3VhZ2U6dGhpcy5sYW5ndWFnZSxsYW5ndWFnZXM6dGhpcy5sYW5ndWFnZXMscmVzb2x2ZWRMYW5ndWFnZTp0aGlzLnJlc29sdmVkTGFuZ3VhZ2V9fX1jb25zdCBFPVEuY3JlYXRlSW5zdGFuY2UoKTtFLmNyZWF0ZUluc3RhbmNlPVEuY3JlYXRlSW5zdGFuY2U7RS5jcmVhdGVJbnN0YW5jZTtFLmRpcjtFLmluaXQ7RS5sb2FkUmVzb3VyY2VzO0UucmVsb2FkUmVzb3VyY2VzO0UudXNlO0UuY2hhbmdlTGFuZ3VhZ2U7RS5nZXRGaXhlZFQ7RS50O0UuZXhpc3RzO0Uuc2V0RGVmYXVsdE5hbWVzcGFjZTtFLmhhc0xvYWRlZE5hbWVzcGFjZTtFLmxvYWROYW1lc3BhY2VzO0UubG9hZExhbmd1YWdlcztmdW5jdGlvbiBicihuKXtyZXR1cm4gbiYmbi5fX2VzTW9kdWxlJiZPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobiwiZGVmYXVsdCIpP24uZGVmYXVsdDpufXZhciBlZT17fSxiZSx6ZTtmdW5jdGlvbiB2cigpe2lmKHplKXJldHVybiBiZTt6ZT0xO3ZhciBuLGUsdD17JyInOiciJywiXFwiOiJcXCIsIi8iOiIvIixiOiJcYiIsZjoiXGYiLG46YApgLHI6IlxyIix0OiIJIn0scjtmdW5jdGlvbiBpKHApe3Rocm93e25hbWU6IlN5bnRheEVycm9yIixtZXNzYWdlOnAsYXQ6bix0ZXh0OnJ9fWZ1bmN0aW9uIHMocCl7cmV0dXJuIHAmJnAhPT1lJiZpKCJFeHBlY3RlZCAnIitwKyInIGluc3RlYWQgb2YgJyIrZSsiJyIpLGU9ci5jaGFyQXQobiksbis9MSxlfWZ1bmN0aW9uIGEoKXt2YXIgcCxkPSIiO2ZvcihlPT09Ii0iJiYoZD0iLSIscygiLSIpKTtlPj0iMCImJmU8PSI5IjspZCs9ZSxzKCk7aWYoZT09PSIuIilmb3IoZCs9Ii4iO3MoKSYmZT49IjAiJiZlPD0iOSI7KWQrPWU7aWYoZT09PSJlInx8ZT09PSJFIilmb3IoZCs9ZSxzKCksKGU9PT0iLSJ8fGU9PT0iKyIpJiYoZCs9ZSxzKCkpO2U+PSIwIiYmZTw9IjkiOylkKz1lLHMoKTtyZXR1cm4gcD1OdW1iZXIoZCksaXNGaW5pdGUocCl8fGkoIkJhZCBudW1iZXIiKSxwfWZ1bmN0aW9uIG8oKXt2YXIgcCxkLG09IiIseTtpZihlPT09JyInKWZvcig7cygpOyl7aWYoZT09PSciJylyZXR1cm4gcygpLG07aWYoZT09PSJcXCIpaWYocygpLGU9PT0idSIpe2Zvcih5PTAsZD0wO2Q8NCYmKHA9cGFyc2VJbnQocygpLDE2KSwhIWlzRmluaXRlKHApKTtkKz0xKXk9eSoxNitwO20rPVN0cmluZy5mcm9tQ2hhckNvZGUoeSl9ZWxzZSBpZih0eXBlb2YgdFtlXT09InN0cmluZyIpbSs9dFtlXTtlbHNlIGJyZWFrO2Vsc2UgbSs9ZX1pKCJCYWQgc3RyaW5nIil9ZnVuY3Rpb24gbCgpe2Zvcig7ZSYmZTw9IiAiOylzKCl9ZnVuY3Rpb24gZigpe3N3aXRjaChlKXtjYXNlInQiOnJldHVybiBzKCJ0IikscygiciIpLHMoInUiKSxzKCJlIiksITA7Y2FzZSJmIjpyZXR1cm4gcygiZiIpLHMoImEiKSxzKCJsIikscygicyIpLHMoImUiKSwhMTtjYXNlIm4iOnJldHVybiBzKCJuIikscygidSIpLHMoImwiKSxzKCJsIiksbnVsbDtkZWZhdWx0OmkoIlVuZXhwZWN0ZWQgJyIrZSsiJyIpfX1mdW5jdGlvbiBjKCl7dmFyIHA9W107aWYoZT09PSJbIil7aWYocygiWyIpLGwoKSxlPT09Il0iKXJldHVybiBzKCJdIikscDtmb3IoO2U7KXtpZihwLnB1c2godSgpKSxsKCksZT09PSJdIilyZXR1cm4gcygiXSIpLHA7cygiLCIpLGwoKX19aSgiQmFkIGFycmF5Iil9ZnVuY3Rpb24gZygpe3ZhciBwLGQ9e307aWYoZT09PSJ7Iil7aWYocygieyIpLGwoKSxlPT09In0iKXJldHVybiBzKCJ9IiksZDtmb3IoO2U7KXtpZihwPW8oKSxsKCkscygiOiIpLE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChkLHApJiZpKCdEdXBsaWNhdGUga2V5ICInK3ArJyInKSxkW3BdPXUoKSxsKCksZT09PSJ9IilyZXR1cm4gcygifSIpLGQ7cygiLCIpLGwoKX19aSgiQmFkIG9iamVjdCIpfWZ1bmN0aW9uIHUoKXtzd2l0Y2gobCgpLGUpe2Nhc2UieyI6cmV0dXJuIGcoKTtjYXNlIlsiOnJldHVybiBjKCk7Y2FzZSciJzpyZXR1cm4gbygpO2Nhc2UiLSI6cmV0dXJuIGEoKTtkZWZhdWx0OnJldHVybiBlPj0iMCImJmU8PSI5Ij9hKCk6ZigpfX1yZXR1cm4gYmU9ZnVuY3Rpb24ocCxkKXt2YXIgbTtyZXR1cm4gcj1wLG49MCxlPSIgIixtPXUoKSxsKCksZSYmaSgiU3ludGF4IGVycm9yIiksdHlwZW9mIGQ9PSJmdW5jdGlvbiI/ZnVuY3Rpb24geSh4LFMpe3ZhciBPLHYsUD14W1NdO2lmKFAmJnR5cGVvZiBQPT0ib2JqZWN0Iilmb3IoTyBpbiB1KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChQLE8pJiYodj15KFAsTyksdHlwZW9mIHY+InUiP2RlbGV0ZSBQW09dOlBbT109dik7cmV0dXJuIGQuY2FsbCh4LFMsUCl9KHsiIjptfSwiIik6bX0sYmV9dmFyIHZlLFFlO2Z1bmN0aW9uIFNyKCl7aWYoUWUpcmV0dXJuIHZlO1FlPTE7dmFyIG49L1tcXCJceDAwLVx4MWZceDdmLVx4OWZcdTAwYWRcdTA2MDAtXHUwNjA0XHUwNzBmXHUxN2I0XHUxN2I1XHUyMDBjLVx1MjAwZlx1MjAyOC1cdTIwMmZcdTIwNjAtXHUyMDZmXHVmZWZmXHVmZmYwLVx1ZmZmZl0vZyxlLHQscj17IlxiIjoiXFxiIiwiCSI6IlxcdCIsIlxuIjoiXFxuIiwiXGYiOiJcXGYiLCJcciI6IlxcciIsJyInOidcXCInLCJcXCI6IlxcXFwifSxpO2Z1bmN0aW9uIHMobyl7cmV0dXJuIG4ubGFzdEluZGV4PTAsbi50ZXN0KG8pPyciJytvLnJlcGxhY2UobixmdW5jdGlvbihsKXt2YXIgZj1yW2xdO3JldHVybiB0eXBlb2YgZj09InN0cmluZyI/ZjoiXFx1IisoIjAwMDAiK2wuY2hhckNvZGVBdCgwKS50b1N0cmluZygxNikpLnNsaWNlKC00KX0pKyciJzonIicrbysnIid9ZnVuY3Rpb24gYShvLGwpe3ZhciBmLGMsZyx1LHA9ZSxkLG09bFtvXTtzd2l0Y2gobSYmdHlwZW9mIG09PSJvYmplY3QiJiZ0eXBlb2YgbS50b0pTT049PSJmdW5jdGlvbiImJihtPW0udG9KU09OKG8pKSx0eXBlb2YgaT09ImZ1bmN0aW9uIiYmKG09aS5jYWxsKGwsbyxtKSksdHlwZW9mIG0pe2Nhc2Uic3RyaW5nIjpyZXR1cm4gcyhtKTtjYXNlIm51bWJlciI6cmV0dXJuIGlzRmluaXRlKG0pP1N0cmluZyhtKToibnVsbCI7Y2FzZSJib29sZWFuIjpjYXNlIm51bGwiOnJldHVybiBTdHJpbmcobSk7Y2FzZSJvYmplY3QiOmlmKCFtKXJldHVybiJudWxsIjtpZihlKz10LGQ9W10sT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5hcHBseShtKT09PSJbb2JqZWN0IEFycmF5XSIpe2Zvcih1PW0ubGVuZ3RoLGY9MDtmPHU7Zis9MSlkW2ZdPWEoZixtKXx8Im51bGwiO3JldHVybiBnPWQubGVuZ3RoPT09MD8iW10iOmU/YFsKYCtlK2Quam9pbihgLApgK2UpK2AKYCtwKyJdIjoiWyIrZC5qb2luKCIsIikrIl0iLGU9cCxnfWlmKGkmJnR5cGVvZiBpPT0ib2JqZWN0Iilmb3IodT1pLmxlbmd0aCxmPTA7Zjx1O2YrPTEpYz1pW2ZdLHR5cGVvZiBjPT0ic3RyaW5nIiYmKGc9YShjLG0pLGcmJmQucHVzaChzKGMpKyhlPyI6ICI6IjoiKStnKSk7ZWxzZSBmb3IoYyBpbiBtKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtLGMpJiYoZz1hKGMsbSksZyYmZC5wdXNoKHMoYykrKGU/IjogIjoiOiIpK2cpKTtyZXR1cm4gZz1kLmxlbmd0aD09PTA/Int9IjplP2B7CmArZStkLmpvaW4oYCwKYCtlKStgCmArcCsifSI6InsiK2Quam9pbigiLCIpKyJ9IixlPXAsZ319cmV0dXJuIHZlPWZ1bmN0aW9uKG8sbCxmKXt2YXIgYztpZihlPSIiLHQ9IiIsdHlwZW9mIGY9PSJudW1iZXIiKWZvcihjPTA7YzxmO2MrPTEpdCs9IiAiO2Vsc2UgdHlwZW9mIGY9PSJzdHJpbmciJiYodD1mKTtpZihpPWwsbCYmdHlwZW9mIGwhPSJmdW5jdGlvbiImJih0eXBlb2YgbCE9Im9iamVjdCJ8fHR5cGVvZiBsLmxlbmd0aCE9Im51bWJlciIpKXRocm93IG5ldyBFcnJvcigiSlNPTi5zdHJpbmdpZnkiKTtyZXR1cm4gYSgiIix7IiI6b30pfSx2ZX12YXIgcWU7ZnVuY3Rpb24gUHIoKXtyZXR1cm4gcWV8fChxZT0xLGVlLnBhcnNlPXZyKCksZWUuc3RyaW5naWZ5PVNyKCkpLGVlfXZhciB4cj17fS50b1N0cmluZyxPcj1BcnJheS5pc0FycmF5fHxmdW5jdGlvbihuKXtyZXR1cm4geHIuY2FsbChuKT09IltvYmplY3QgQXJyYXldIn0sWWU9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZyxSdD1mdW5jdGlvbihlKXt2YXIgdD1ZZS5jYWxsKGUpLHI9dD09PSJbb2JqZWN0IEFyZ3VtZW50c10iO3JldHVybiByfHwocj10IT09IltvYmplY3QgQXJyYXldIiYmZSE9PW51bGwmJnR5cGVvZiBlPT0ib2JqZWN0IiYmdHlwZW9mIGUubGVuZ3RoPT0ibnVtYmVyIiYmZS5sZW5ndGg+PTAmJlllLmNhbGwoZS5jYWxsZWUpPT09IltvYmplY3QgRnVuY3Rpb25dIikscn0sU2UsWmU7ZnVuY3Rpb24gd3IoKXtpZihaZSlyZXR1cm4gU2U7WmU9MTt2YXIgbjtpZighT2JqZWN0LmtleXMpe3ZhciBlPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksdD1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLHI9UnQsaT1PYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLHM9IWkuY2FsbCh7dG9TdHJpbmc6bnVsbH0sInRvU3RyaW5nIiksYT1pLmNhbGwoZnVuY3Rpb24oKXt9LCJwcm90b3R5cGUiKSxvPVsidG9TdHJpbmciLCJ0b0xvY2FsZVN0cmluZyIsInZhbHVlT2YiLCJoYXNPd25Qcm9wZXJ0eSIsImlzUHJvdG90eXBlT2YiLCJwcm9wZXJ0eUlzRW51bWVyYWJsZSIsImNvbnN0cnVjdG9yIl0sbD1mdW5jdGlvbih1KXt2YXIgcD11LmNvbnN0cnVjdG9yO3JldHVybiBwJiZwLnByb3RvdHlwZT09PXV9LGY9eyRhcHBsaWNhdGlvbkNhY2hlOiEwLCRjb25zb2xlOiEwLCRleHRlcm5hbDohMCwkZnJhbWU6ITAsJGZyYW1lRWxlbWVudDohMCwkZnJhbWVzOiEwLCRpbm5lckhlaWdodDohMCwkaW5uZXJXaWR0aDohMCwkb25tb3pmdWxsc2NyZWVuY2hhbmdlOiEwLCRvbm1vemZ1bGxzY3JlZW5lcnJvcjohMCwkb3V0ZXJIZWlnaHQ6ITAsJG91dGVyV2lkdGg6ITAsJHBhZ2VYT2Zmc2V0OiEwLCRwYWdlWU9mZnNldDohMCwkcGFyZW50OiEwLCRzY3JvbGxMZWZ0OiEwLCRzY3JvbGxUb3A6ITAsJHNjcm9sbFg6ITAsJHNjcm9sbFk6ITAsJHNlbGY6ITAsJHdlYmtpdEluZGV4ZWREQjohMCwkd2Via2l0U3RvcmFnZUluZm86ITAsJHdpbmRvdzohMH0sYz1mdW5jdGlvbigpe2lmKHR5cGVvZiB3aW5kb3c+InUiKXJldHVybiExO2Zvcih2YXIgdSBpbiB3aW5kb3cpdHJ5e2lmKCFmWyIkIit1XSYmZS5jYWxsKHdpbmRvdyx1KSYmd2luZG93W3VdIT09bnVsbCYmdHlwZW9mIHdpbmRvd1t1XT09Im9iamVjdCIpdHJ5e2wod2luZG93W3VdKX1jYXRjaHtyZXR1cm4hMH19Y2F0Y2h7cmV0dXJuITB9cmV0dXJuITF9KCksZz1mdW5jdGlvbih1KXtpZih0eXBlb2Ygd2luZG93PiJ1Inx8IWMpcmV0dXJuIGwodSk7dHJ5e3JldHVybiBsKHUpfWNhdGNoe3JldHVybiExfX07bj1mdW5jdGlvbihwKXt2YXIgZD1wIT09bnVsbCYmdHlwZW9mIHA9PSJvYmplY3QiLG09dC5jYWxsKHApPT09IltvYmplY3QgRnVuY3Rpb25dIix5PXIocCkseD1kJiZ0LmNhbGwocCk9PT0iW29iamVjdCBTdHJpbmddIixTPVtdO2lmKCFkJiYhbSYmIXkpdGhyb3cgbmV3IFR5cGVFcnJvcigiT2JqZWN0LmtleXMgY2FsbGVkIG9uIGEgbm9uLW9iamVjdCIpO3ZhciBPPWEmJm07aWYoeCYmcC5sZW5ndGg+MCYmIWUuY2FsbChwLDApKWZvcih2YXIgdj0wO3Y8cC5sZW5ndGg7Kyt2KVMucHVzaChTdHJpbmcodikpO2lmKHkmJnAubGVuZ3RoPjApZm9yKHZhciBQPTA7UDxwLmxlbmd0aDsrK1ApUy5wdXNoKFN0cmluZyhQKSk7ZWxzZSBmb3IodmFyIEQgaW4gcCkhKE8mJkQ9PT0icHJvdG90eXBlIikmJmUuY2FsbChwLEQpJiZTLnB1c2goU3RyaW5nKEQpKTtpZihzKWZvcih2YXIgUj1nKHApLCQ9MDskPG8ubGVuZ3RoOysrJCkhKFImJm9bJF09PT0iY29uc3RydWN0b3IiKSYmZS5jYWxsKHAsb1skXSkmJlMucHVzaChvWyRdKTtyZXR1cm4gU319cmV0dXJuIFNlPW4sU2V9dmFyIFJyPUFycmF5LnByb3RvdHlwZS5zbGljZSxBcj1SdCxYZT1PYmplY3Qua2V5cyxuZT1YZT9mdW5jdGlvbihlKXtyZXR1cm4gWGUoZSl9OndyKCksZXQ9T2JqZWN0LmtleXM7bmUuc2hpbT1mdW5jdGlvbigpe2lmKE9iamVjdC5rZXlzKXt2YXIgZT1mdW5jdGlvbigpe3ZhciB0PU9iamVjdC5rZXlzKGFyZ3VtZW50cyk7cmV0dXJuIHQmJnQubGVuZ3RoPT09YXJndW1lbnRzLmxlbmd0aH0oMSwyKTtlfHwoT2JqZWN0LmtleXM9ZnVuY3Rpb24ocil7cmV0dXJuIEFyKHIpP2V0KFJyLmNhbGwocikpOmV0KHIpfSl9ZWxzZSBPYmplY3Qua2V5cz1uZTtyZXR1cm4gT2JqZWN0LmtleXN8fG5lfTt2YXIgRXI9bmUsQXQ9e2V4cG9ydHM6e319LERyPSJGdW5jdGlvbi5wcm90b3R5cGUuYmluZCBjYWxsZWQgb24gaW5jb21wYXRpYmxlICIsTHI9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZyxGcj1NYXRoLm1heCwkcj0iW29iamVjdCBGdW5jdGlvbl0iLHR0PWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByPVtdLGk9MDtpPGUubGVuZ3RoO2krPTEpcltpXT1lW2ldO2Zvcih2YXIgcz0wO3M8dC5sZW5ndGg7cys9MSlyW3MrZS5sZW5ndGhdPXRbc107cmV0dXJuIHJ9LENyPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByPVtdLGk9dCxzPTA7aTxlLmxlbmd0aDtpKz0xLHMrPTEpcltzXT1lW2ldO3JldHVybiByfSxJcj1mdW5jdGlvbihuLGUpe2Zvcih2YXIgdD0iIixyPTA7cjxuLmxlbmd0aDtyKz0xKXQrPW5bcl0scisxPG4ubGVuZ3RoJiYodCs9ZSk7cmV0dXJuIHR9LFRyPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7aWYodHlwZW9mIHQhPSJmdW5jdGlvbiJ8fExyLmFwcGx5KHQpIT09JHIpdGhyb3cgbmV3IFR5cGVFcnJvcihEcit0KTtmb3IodmFyIHI9Q3IoYXJndW1lbnRzLDEpLGkscz1mdW5jdGlvbigpe2lmKHRoaXMgaW5zdGFuY2VvZiBpKXt2YXIgYz10LmFwcGx5KHRoaXMsdHQocixhcmd1bWVudHMpKTtyZXR1cm4gT2JqZWN0KGMpPT09Yz9jOnRoaXN9cmV0dXJuIHQuYXBwbHkoZSx0dChyLGFyZ3VtZW50cykpfSxhPUZyKDAsdC5sZW5ndGgtci5sZW5ndGgpLG89W10sbD0wO2w8YTtsKyspb1tsXT0iJCIrbDtpZihpPUZ1bmN0aW9uKCJiaW5kZXIiLCJyZXR1cm4gZnVuY3Rpb24gKCIrSXIobywiLCIpKyIpeyByZXR1cm4gYmluZGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTsgfSIpKHMpLHQucHJvdG90eXBlKXt2YXIgZj1mdW5jdGlvbigpe307Zi5wcm90b3R5cGU9dC5wcm90b3R5cGUsaS5wcm90b3R5cGU9bmV3IGYsZi5wcm90b3R5cGU9bnVsbH1yZXR1cm4gaX0sa3I9VHIsJGU9RnVuY3Rpb24ucHJvdG90eXBlLmJpbmR8fGtyLE5yPUVycm9yLE1yPUV2YWxFcnJvcixqcj1SYW5nZUVycm9yLEJyPVJlZmVyZW5jZUVycm9yLEV0PVN5bnRheEVycm9yLGRlPVR5cGVFcnJvcixVcj1VUklFcnJvcixHcj1mdW5jdGlvbigpe2lmKHR5cGVvZiBTeW1ib2whPSJmdW5jdGlvbiJ8fHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzIT0iZnVuY3Rpb24iKXJldHVybiExO2lmKHR5cGVvZiBTeW1ib2wuaXRlcmF0b3I9PSJzeW1ib2wiKXJldHVybiEwO3ZhciBlPXt9LHQ9U3ltYm9sKCJ0ZXN0Iikscj1PYmplY3QodCk7aWYodHlwZW9mIHQ9PSJzdHJpbmcifHxPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodCkhPT0iW29iamVjdCBTeW1ib2xdInx8T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHIpIT09IltvYmplY3QgU3ltYm9sXSIpcmV0dXJuITE7dmFyIGk9NDI7ZVt0XT1pO2Zvcih0IGluIGUpcmV0dXJuITE7aWYodHlwZW9mIE9iamVjdC5rZXlzPT0iZnVuY3Rpb24iJiZPYmplY3Qua2V5cyhlKS5sZW5ndGghPT0wfHx0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXM9PSJmdW5jdGlvbiImJk9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGUpLmxlbmd0aCE9PTApcmV0dXJuITE7dmFyIHM9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTtpZihzLmxlbmd0aCE9PTF8fHNbMF0hPT10fHwhT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKGUsdCkpcmV0dXJuITE7aWYodHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I9PSJmdW5jdGlvbiIpe3ZhciBhPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSx0KTtpZihhLnZhbHVlIT09aXx8YS5lbnVtZXJhYmxlIT09ITApcmV0dXJuITF9cmV0dXJuITB9LHJ0PXR5cGVvZiBTeW1ib2w8InUiJiZTeW1ib2wsSHI9R3IsS3I9ZnVuY3Rpb24oKXtyZXR1cm4gdHlwZW9mIHJ0IT0iZnVuY3Rpb24ifHx0eXBlb2YgU3ltYm9sIT0iZnVuY3Rpb24ifHx0eXBlb2YgcnQoImZvbyIpIT0ic3ltYm9sInx8dHlwZW9mIFN5bWJvbCgiYmFyIikhPSJzeW1ib2wiPyExOkhyKCl9LFBlPXtfX3Byb3RvX186bnVsbCxmb286e319LF9yPU9iamVjdCxWcj1mdW5jdGlvbigpe3JldHVybntfX3Byb3RvX186UGV9LmZvbz09PVBlLmZvbyYmIShQZSBpbnN0YW5jZW9mIF9yKX0sV3I9RnVuY3Rpb24ucHJvdG90eXBlLmNhbGwsSnI9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSx6cj0kZSxRcj16ci5jYWxsKFdyLEpyKSxiLHFyPU5yLFlyPU1yLFpyPWpyLFhyPUJyLEg9RXQsRz1kZSxlbj1VcixEdD1GdW5jdGlvbix4ZT1mdW5jdGlvbihuKXt0cnl7cmV0dXJuIER0KCcidXNlIHN0cmljdCI7IHJldHVybiAoJytuKyIpLmNvbnN0cnVjdG9yOyIpKCl9Y2F0Y2h7fX0sVD1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO2lmKFQpdHJ5e1Qoe30sIiIpfWNhdGNoe1Q9bnVsbH12YXIgT2U9ZnVuY3Rpb24oKXt0aHJvdyBuZXcgR30sdG49VD9mdW5jdGlvbigpe3RyeXtyZXR1cm4gYXJndW1lbnRzLmNhbGxlZSxPZX1jYXRjaHt0cnl7cmV0dXJuIFQoYXJndW1lbnRzLCJjYWxsZWUiKS5nZXR9Y2F0Y2h7cmV0dXJuIE9lfX19KCk6T2Usaj1LcigpLHJuPVZyKCksdz1PYmplY3QuZ2V0UHJvdG90eXBlT2Z8fChybj9mdW5jdGlvbihuKXtyZXR1cm4gbi5fX3Byb3RvX199Om51bGwpLFU9e30sbm49dHlwZW9mIFVpbnQ4QXJyYXk+InUifHwhdz9iOncoVWludDhBcnJheSksaz17X19wcm90b19fOm51bGwsIiVBZ2dyZWdhdGVFcnJvciUiOnR5cGVvZiBBZ2dyZWdhdGVFcnJvcj4idSI/YjpBZ2dyZWdhdGVFcnJvciwiJUFycmF5JSI6QXJyYXksIiVBcnJheUJ1ZmZlciUiOnR5cGVvZiBBcnJheUJ1ZmZlcj4idSI/YjpBcnJheUJ1ZmZlciwiJUFycmF5SXRlcmF0b3JQcm90b3R5cGUlIjpqJiZ3P3coW11bU3ltYm9sLml0ZXJhdG9yXSgpKTpiLCIlQXN5bmNGcm9tU3luY0l0ZXJhdG9yUHJvdG90eXBlJSI6YiwiJUFzeW5jRnVuY3Rpb24lIjpVLCIlQXN5bmNHZW5lcmF0b3IlIjpVLCIlQXN5bmNHZW5lcmF0b3JGdW5jdGlvbiUiOlUsIiVBc3luY0l0ZXJhdG9yUHJvdG90eXBlJSI6VSwiJUF0b21pY3MlIjp0eXBlb2YgQXRvbWljcz4idSI/YjpBdG9taWNzLCIlQmlnSW50JSI6dHlwZW9mIEJpZ0ludD4idSI/YjpCaWdJbnQsIiVCaWdJbnQ2NEFycmF5JSI6dHlwZW9mIEJpZ0ludDY0QXJyYXk+InUiP2I6QmlnSW50NjRBcnJheSwiJUJpZ1VpbnQ2NEFycmF5JSI6dHlwZW9mIEJpZ1VpbnQ2NEFycmF5PiJ1Ij9iOkJpZ1VpbnQ2NEFycmF5LCIlQm9vbGVhbiUiOkJvb2xlYW4sIiVEYXRhVmlldyUiOnR5cGVvZiBEYXRhVmlldz4idSI/YjpEYXRhVmlldywiJURhdGUlIjpEYXRlLCIlZGVjb2RlVVJJJSI6ZGVjb2RlVVJJLCIlZGVjb2RlVVJJQ29tcG9uZW50JSI6ZGVjb2RlVVJJQ29tcG9uZW50LCIlZW5jb2RlVVJJJSI6ZW5jb2RlVVJJLCIlZW5jb2RlVVJJQ29tcG9uZW50JSI6ZW5jb2RlVVJJQ29tcG9uZW50LCIlRXJyb3IlIjpxciwiJWV2YWwlIjpldmFsLCIlRXZhbEVycm9yJSI6WXIsIiVGbG9hdDMyQXJyYXklIjp0eXBlb2YgRmxvYXQzMkFycmF5PiJ1Ij9iOkZsb2F0MzJBcnJheSwiJUZsb2F0NjRBcnJheSUiOnR5cGVvZiBGbG9hdDY0QXJyYXk+InUiP2I6RmxvYXQ2NEFycmF5LCIlRmluYWxpemF0aW9uUmVnaXN0cnklIjp0eXBlb2YgRmluYWxpemF0aW9uUmVnaXN0cnk+InUiP2I6RmluYWxpemF0aW9uUmVnaXN0cnksIiVGdW5jdGlvbiUiOkR0LCIlR2VuZXJhdG9yRnVuY3Rpb24lIjpVLCIlSW50OEFycmF5JSI6dHlwZW9mIEludDhBcnJheT4idSI/YjpJbnQ4QXJyYXksIiVJbnQxNkFycmF5JSI6dHlwZW9mIEludDE2QXJyYXk+InUiP2I6SW50MTZBcnJheSwiJUludDMyQXJyYXklIjp0eXBlb2YgSW50MzJBcnJheT4idSI/YjpJbnQzMkFycmF5LCIlaXNGaW5pdGUlIjppc0Zpbml0ZSwiJWlzTmFOJSI6aXNOYU4sIiVJdGVyYXRvclByb3RvdHlwZSUiOmomJnc/dyh3KFtdW1N5bWJvbC5pdGVyYXRvcl0oKSkpOmIsIiVKU09OJSI6dHlwZW9mIEpTT049PSJvYmplY3QiP0pTT046YiwiJU1hcCUiOnR5cGVvZiBNYXA+InUiP2I6TWFwLCIlTWFwSXRlcmF0b3JQcm90b3R5cGUlIjp0eXBlb2YgTWFwPiJ1Inx8IWp8fCF3P2I6dyhuZXcgTWFwKClbU3ltYm9sLml0ZXJhdG9yXSgpKSwiJU1hdGglIjpNYXRoLCIlTnVtYmVyJSI6TnVtYmVyLCIlT2JqZWN0JSI6T2JqZWN0LCIlcGFyc2VGbG9hdCUiOnBhcnNlRmxvYXQsIiVwYXJzZUludCUiOnBhcnNlSW50LCIlUHJvbWlzZSUiOnR5cGVvZiBQcm9taXNlPiJ1Ij9iOlByb21pc2UsIiVQcm94eSUiOnR5cGVvZiBQcm94eT4idSI/YjpQcm94eSwiJVJhbmdlRXJyb3IlIjpaciwiJVJlZmVyZW5jZUVycm9yJSI6WHIsIiVSZWZsZWN0JSI6dHlwZW9mIFJlZmxlY3Q+InUiP2I6UmVmbGVjdCwiJVJlZ0V4cCUiOlJlZ0V4cCwiJVNldCUiOnR5cGVvZiBTZXQ+InUiP2I6U2V0LCIlU2V0SXRlcmF0b3JQcm90b3R5cGUlIjp0eXBlb2YgU2V0PiJ1Inx8IWp8fCF3P2I6dyhuZXcgU2V0KClbU3ltYm9sLml0ZXJhdG9yXSgpKSwiJVNoYXJlZEFycmF5QnVmZmVyJSI6dHlwZW9mIFNoYXJlZEFycmF5QnVmZmVyPiJ1Ij9iOlNoYXJlZEFycmF5QnVmZmVyLCIlU3RyaW5nJSI6U3RyaW5nLCIlU3RyaW5nSXRlcmF0b3JQcm90b3R5cGUlIjpqJiZ3P3coIiJbU3ltYm9sLml0ZXJhdG9yXSgpKTpiLCIlU3ltYm9sJSI6aj9TeW1ib2w6YiwiJVN5bnRheEVycm9yJSI6SCwiJVRocm93VHlwZUVycm9yJSI6dG4sIiVUeXBlZEFycmF5JSI6bm4sIiVUeXBlRXJyb3IlIjpHLCIlVWludDhBcnJheSUiOnR5cGVvZiBVaW50OEFycmF5PiJ1Ij9iOlVpbnQ4QXJyYXksIiVVaW50OENsYW1wZWRBcnJheSUiOnR5cGVvZiBVaW50OENsYW1wZWRBcnJheT4idSI/YjpVaW50OENsYW1wZWRBcnJheSwiJVVpbnQxNkFycmF5JSI6dHlwZW9mIFVpbnQxNkFycmF5PiJ1Ij9iOlVpbnQxNkFycmF5LCIlVWludDMyQXJyYXklIjp0eXBlb2YgVWludDMyQXJyYXk+InUiP2I6VWludDMyQXJyYXksIiVVUklFcnJvciUiOmVuLCIlV2Vha01hcCUiOnR5cGVvZiBXZWFrTWFwPiJ1Ij9iOldlYWtNYXAsIiVXZWFrUmVmJSI6dHlwZW9mIFdlYWtSZWY+InUiP2I6V2Vha1JlZiwiJVdlYWtTZXQlIjp0eXBlb2YgV2Vha1NldD4idSI/YjpXZWFrU2V0fTtpZih3KXRyeXtudWxsLmVycm9yfWNhdGNoKG4pe3ZhciBzbj13KHcobikpO2tbIiVFcnJvci5wcm90b3R5cGUlIl09c259dmFyIGFuPWZ1bmN0aW9uIG4oZSl7dmFyIHQ7aWYoZT09PSIlQXN5bmNGdW5jdGlvbiUiKXQ9eGUoImFzeW5jIGZ1bmN0aW9uICgpIHt9Iik7ZWxzZSBpZihlPT09IiVHZW5lcmF0b3JGdW5jdGlvbiUiKXQ9eGUoImZ1bmN0aW9uKiAoKSB7fSIpO2Vsc2UgaWYoZT09PSIlQXN5bmNHZW5lcmF0b3JGdW5jdGlvbiUiKXQ9eGUoImFzeW5jIGZ1bmN0aW9uKiAoKSB7fSIpO2Vsc2UgaWYoZT09PSIlQXN5bmNHZW5lcmF0b3IlIil7dmFyIHI9bigiJUFzeW5jR2VuZXJhdG9yRnVuY3Rpb24lIik7ciYmKHQ9ci5wcm90b3R5cGUpfWVsc2UgaWYoZT09PSIlQXN5bmNJdGVyYXRvclByb3RvdHlwZSUiKXt2YXIgaT1uKCIlQXN5bmNHZW5lcmF0b3IlIik7aSYmdyYmKHQ9dyhpLnByb3RvdHlwZSkpfXJldHVybiBrW2VdPXQsdH0sbnQ9e19fcHJvdG9fXzpudWxsLCIlQXJyYXlCdWZmZXJQcm90b3R5cGUlIjpbIkFycmF5QnVmZmVyIiwicHJvdG90eXBlIl0sIiVBcnJheVByb3RvdHlwZSUiOlsiQXJyYXkiLCJwcm90b3R5cGUiXSwiJUFycmF5UHJvdG9fZW50cmllcyUiOlsiQXJyYXkiLCJwcm90b3R5cGUiLCJlbnRyaWVzIl0sIiVBcnJheVByb3RvX2ZvckVhY2glIjpbIkFycmF5IiwicHJvdG90eXBlIiwiZm9yRWFjaCJdLCIlQXJyYXlQcm90b19rZXlzJSI6WyJBcnJheSIsInByb3RvdHlwZSIsImtleXMiXSwiJUFycmF5UHJvdG9fdmFsdWVzJSI6WyJBcnJheSIsInByb3RvdHlwZSIsInZhbHVlcyJdLCIlQXN5bmNGdW5jdGlvblByb3RvdHlwZSUiOlsiQXN5bmNGdW5jdGlvbiIsInByb3RvdHlwZSJdLCIlQXN5bmNHZW5lcmF0b3IlIjpbIkFzeW5jR2VuZXJhdG9yRnVuY3Rpb24iLCJwcm90b3R5cGUiXSwiJUFzeW5jR2VuZXJhdG9yUHJvdG90eXBlJSI6WyJBc3luY0dlbmVyYXRvckZ1bmN0aW9uIiwicHJvdG90eXBlIiwicHJvdG90eXBlIl0sIiVCb29sZWFuUHJvdG90eXBlJSI6WyJCb29sZWFuIiwicHJvdG90eXBlIl0sIiVEYXRhVmlld1Byb3RvdHlwZSUiOlsiRGF0YVZpZXciLCJwcm90b3R5cGUiXSwiJURhdGVQcm90b3R5cGUlIjpbIkRhdGUiLCJwcm90b3R5cGUiXSwiJUVycm9yUHJvdG90eXBlJSI6WyJFcnJvciIsInByb3RvdHlwZSJdLCIlRXZhbEVycm9yUHJvdG90eXBlJSI6WyJFdmFsRXJyb3IiLCJwcm90b3R5cGUiXSwiJUZsb2F0MzJBcnJheVByb3RvdHlwZSUiOlsiRmxvYXQzMkFycmF5IiwicHJvdG90eXBlIl0sIiVGbG9hdDY0QXJyYXlQcm90b3R5cGUlIjpbIkZsb2F0NjRBcnJheSIsInByb3RvdHlwZSJdLCIlRnVuY3Rpb25Qcm90b3R5cGUlIjpbIkZ1bmN0aW9uIiwicHJvdG90eXBlIl0sIiVHZW5lcmF0b3IlIjpbIkdlbmVyYXRvckZ1bmN0aW9uIiwicHJvdG90eXBlIl0sIiVHZW5lcmF0b3JQcm90b3R5cGUlIjpbIkdlbmVyYXRvckZ1bmN0aW9uIiwicHJvdG90eXBlIiwicHJvdG90eXBlIl0sIiVJbnQ4QXJyYXlQcm90b3R5cGUlIjpbIkludDhBcnJheSIsInByb3RvdHlwZSJdLCIlSW50MTZBcnJheVByb3RvdHlwZSUiOlsiSW50MTZBcnJheSIsInByb3RvdHlwZSJdLCIlSW50MzJBcnJheVByb3RvdHlwZSUiOlsiSW50MzJBcnJheSIsInByb3RvdHlwZSJdLCIlSlNPTlBhcnNlJSI6WyJKU09OIiwicGFyc2UiXSwiJUpTT05TdHJpbmdpZnklIjpbIkpTT04iLCJzdHJpbmdpZnkiXSwiJU1hcFByb3RvdHlwZSUiOlsiTWFwIiwicHJvdG90eXBlIl0sIiVOdW1iZXJQcm90b3R5cGUlIjpbIk51bWJlciIsInByb3RvdHlwZSJdLCIlT2JqZWN0UHJvdG90eXBlJSI6WyJPYmplY3QiLCJwcm90b3R5cGUiXSwiJU9ialByb3RvX3RvU3RyaW5nJSI6WyJPYmplY3QiLCJwcm90b3R5cGUiLCJ0b1N0cmluZyJdLCIlT2JqUHJvdG9fdmFsdWVPZiUiOlsiT2JqZWN0IiwicHJvdG90eXBlIiwidmFsdWVPZiJdLCIlUHJvbWlzZVByb3RvdHlwZSUiOlsiUHJvbWlzZSIsInByb3RvdHlwZSJdLCIlUHJvbWlzZVByb3RvX3RoZW4lIjpbIlByb21pc2UiLCJwcm90b3R5cGUiLCJ0aGVuIl0sIiVQcm9taXNlX2FsbCUiOlsiUHJvbWlzZSIsImFsbCJdLCIlUHJvbWlzZV9yZWplY3QlIjpbIlByb21pc2UiLCJyZWplY3QiXSwiJVByb21pc2VfcmVzb2x2ZSUiOlsiUHJvbWlzZSIsInJlc29sdmUiXSwiJVJhbmdlRXJyb3JQcm90b3R5cGUlIjpbIlJhbmdlRXJyb3IiLCJwcm90b3R5cGUiXSwiJVJlZmVyZW5jZUVycm9yUHJvdG90eXBlJSI6WyJSZWZlcmVuY2VFcnJvciIsInByb3RvdHlwZSJdLCIlUmVnRXhwUHJvdG90eXBlJSI6WyJSZWdFeHAiLCJwcm90b3R5cGUiXSwiJVNldFByb3RvdHlwZSUiOlsiU2V0IiwicHJvdG90eXBlIl0sIiVTaGFyZWRBcnJheUJ1ZmZlclByb3RvdHlwZSUiOlsiU2hhcmVkQXJyYXlCdWZmZXIiLCJwcm90b3R5cGUiXSwiJVN0cmluZ1Byb3RvdHlwZSUiOlsiU3RyaW5nIiwicHJvdG90eXBlIl0sIiVTeW1ib2xQcm90b3R5cGUlIjpbIlN5bWJvbCIsInByb3RvdHlwZSJdLCIlU3ludGF4RXJyb3JQcm90b3R5cGUlIjpbIlN5bnRheEVycm9yIiwicHJvdG90eXBlIl0sIiVUeXBlZEFycmF5UHJvdG90eXBlJSI6WyJUeXBlZEFycmF5IiwicHJvdG90eXBlIl0sIiVUeXBlRXJyb3JQcm90b3R5cGUlIjpbIlR5cGVFcnJvciIsInByb3RvdHlwZSJdLCIlVWludDhBcnJheVByb3RvdHlwZSUiOlsiVWludDhBcnJheSIsInByb3RvdHlwZSJdLCIlVWludDhDbGFtcGVkQXJyYXlQcm90b3R5cGUlIjpbIlVpbnQ4Q2xhbXBlZEFycmF5IiwicHJvdG90eXBlIl0sIiVVaW50MTZBcnJheVByb3RvdHlwZSUiOlsiVWludDE2QXJyYXkiLCJwcm90b3R5cGUiXSwiJVVpbnQzMkFycmF5UHJvdG90eXBlJSI6WyJVaW50MzJBcnJheSIsInByb3RvdHlwZSJdLCIlVVJJRXJyb3JQcm90b3R5cGUlIjpbIlVSSUVycm9yIiwicHJvdG90eXBlIl0sIiVXZWFrTWFwUHJvdG90eXBlJSI6WyJXZWFrTWFwIiwicHJvdG90eXBlIl0sIiVXZWFrU2V0UHJvdG90eXBlJSI6WyJXZWFrU2V0IiwicHJvdG90eXBlIl19LHE9JGUsZmU9UXIsb249cS5jYWxsKEZ1bmN0aW9uLmNhbGwsQXJyYXkucHJvdG90eXBlLmNvbmNhdCksbG49cS5jYWxsKEZ1bmN0aW9uLmFwcGx5LEFycmF5LnByb3RvdHlwZS5zcGxpY2UpLGl0PXEuY2FsbChGdW5jdGlvbi5jYWxsLFN0cmluZy5wcm90b3R5cGUucmVwbGFjZSksY2U9cS5jYWxsKEZ1bmN0aW9uLmNhbGwsU3RyaW5nLnByb3RvdHlwZS5zbGljZSksdW49cS5jYWxsKEZ1bmN0aW9uLmNhbGwsUmVnRXhwLnByb3RvdHlwZS5leGVjKSxmbj0vW14lLltcXV0rfFxbKD86KC0/XGQrKD86XC5cZCspPyl8KFsiJ10pKCg/Oig/IVwyKVteXFxdfFxcLikqPylcMilcXXwoPz0oPzpcLnxcW1xdKSg/OlwufFxbXF18JSQpKS9nLGNuPS9cXChcXCk/L2cscG49ZnVuY3Rpb24oZSl7dmFyIHQ9Y2UoZSwwLDEpLHI9Y2UoZSwtMSk7aWYodD09PSIlIiYmciE9PSIlIil0aHJvdyBuZXcgSCgiaW52YWxpZCBpbnRyaW5zaWMgc3ludGF4LCBleHBlY3RlZCBjbG9zaW5nIGAlYCIpO2lmKHI9PT0iJSImJnQhPT0iJSIpdGhyb3cgbmV3IEgoImludmFsaWQgaW50cmluc2ljIHN5bnRheCwgZXhwZWN0ZWQgb3BlbmluZyBgJWAiKTt2YXIgaT1bXTtyZXR1cm4gaXQoZSxmbixmdW5jdGlvbihzLGEsbyxsKXtpW2kubGVuZ3RoXT1vP2l0KGwsY24sIiQxIik6YXx8c30pLGl9LGduPWZ1bmN0aW9uKGUsdCl7dmFyIHI9ZSxpO2lmKGZlKG50LHIpJiYoaT1udFtyXSxyPSIlIitpWzBdKyIlIiksZmUoayxyKSl7dmFyIHM9a1tyXTtpZihzPT09VSYmKHM9YW4ocikpLHR5cGVvZiBzPiJ1IiYmIXQpdGhyb3cgbmV3IEcoImludHJpbnNpYyAiK2UrIiBleGlzdHMsIGJ1dCBpcyBub3QgYXZhaWxhYmxlLiBQbGVhc2UgZmlsZSBhbiBpc3N1ZSEiKTtyZXR1cm57YWxpYXM6aSxuYW1lOnIsdmFsdWU6c319dGhyb3cgbmV3IEgoImludHJpbnNpYyAiK2UrIiBkb2VzIG5vdCBleGlzdCEiKX0sWT1mdW5jdGlvbihlLHQpe2lmKHR5cGVvZiBlIT0ic3RyaW5nInx8ZS5sZW5ndGg9PT0wKXRocm93IG5ldyBHKCJpbnRyaW5zaWMgbmFtZSBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZyIpO2lmKGFyZ3VtZW50cy5sZW5ndGg+MSYmdHlwZW9mIHQhPSJib29sZWFuIil0aHJvdyBuZXcgRygnImFsbG93TWlzc2luZyIgYXJndW1lbnQgbXVzdCBiZSBhIGJvb2xlYW4nKTtpZih1bigvXiU/W14lXSolPyQvLGUpPT09bnVsbCl0aHJvdyBuZXcgSCgiYCVgIG1heSBub3QgYmUgcHJlc2VudCBhbnl3aGVyZSBidXQgYXQgdGhlIGJlZ2lubmluZyBhbmQgZW5kIG9mIHRoZSBpbnRyaW5zaWMgbmFtZSIpO3ZhciByPXBuKGUpLGk9ci5sZW5ndGg+MD9yWzBdOiIiLHM9Z24oIiUiK2krIiUiLHQpLGE9cy5uYW1lLG89cy52YWx1ZSxsPSExLGY9cy5hbGlhcztmJiYoaT1mWzBdLGxuKHIsb24oWzAsMV0sZikpKTtmb3IodmFyIGM9MSxnPSEwO2M8ci5sZW5ndGg7Yys9MSl7dmFyIHU9cltjXSxwPWNlKHUsMCwxKSxkPWNlKHUsLTEpO2lmKChwPT09JyInfHxwPT09IicifHxwPT09ImAifHxkPT09JyInfHxkPT09IicifHxkPT09ImAiKSYmcCE9PWQpdGhyb3cgbmV3IEgoInByb3BlcnR5IG5hbWVzIHdpdGggcXVvdGVzIG11c3QgaGF2ZSBtYXRjaGluZyBxdW90ZXMiKTtpZigodT09PSJjb25zdHJ1Y3RvciJ8fCFnKSYmKGw9ITApLGkrPSIuIit1LGE9IiUiK2krIiUiLGZlKGssYSkpbz1rW2FdO2Vsc2UgaWYobyE9bnVsbCl7aWYoISh1IGluIG8pKXtpZighdCl0aHJvdyBuZXcgRygiYmFzZSBpbnRyaW5zaWMgZm9yICIrZSsiIGV4aXN0cywgYnV0IHRoZSBwcm9wZXJ0eSBpcyBub3QgYXZhaWxhYmxlLiIpO3JldHVybn1pZihUJiZjKzE+PXIubGVuZ3RoKXt2YXIgbT1UKG8sdSk7Zz0hIW0sZyYmImdldCJpbiBtJiYhKCJvcmlnaW5hbFZhbHVlImluIG0uZ2V0KT9vPW0uZ2V0Om89b1t1XX1lbHNlIGc9ZmUobyx1KSxvPW9bdV07ZyYmIWwmJihrW2FdPW8pfX1yZXR1cm4gb30sd2Usc3Q7ZnVuY3Rpb24gQ2UoKXtpZihzdClyZXR1cm4gd2U7c3Q9MTt2YXIgbj1ZLGU9bigiJU9iamVjdC5kZWZpbmVQcm9wZXJ0eSUiLCEwKXx8ITE7aWYoZSl0cnl7ZSh7fSwiYSIse3ZhbHVlOjF9KX1jYXRjaHtlPSExfXJldHVybiB3ZT1lLHdlfXZhciBobj1ZLGllPWhuKCIlT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvciUiLCEwKTtpZihpZSl0cnl7aWUoW10sImxlbmd0aCIpfWNhdGNoe2llPW51bGx9dmFyIEx0PWllLGF0PUNlKCksZG49RXQsQj1kZSxvdD1MdCxtbj1mdW5jdGlvbihlLHQscil7aWYoIWV8fHR5cGVvZiBlIT0ib2JqZWN0IiYmdHlwZW9mIGUhPSJmdW5jdGlvbiIpdGhyb3cgbmV3IEIoImBvYmpgIG11c3QgYmUgYW4gb2JqZWN0IG9yIGEgZnVuY3Rpb25gIik7aWYodHlwZW9mIHQhPSJzdHJpbmciJiZ0eXBlb2YgdCE9InN5bWJvbCIpdGhyb3cgbmV3IEIoImBwcm9wZXJ0eWAgbXVzdCBiZSBhIHN0cmluZyBvciBhIHN5bWJvbGAiKTtpZihhcmd1bWVudHMubGVuZ3RoPjMmJnR5cGVvZiBhcmd1bWVudHNbM10hPSJib29sZWFuIiYmYXJndW1lbnRzWzNdIT09bnVsbCl0aHJvdyBuZXcgQigiYG5vbkVudW1lcmFibGVgLCBpZiBwcm92aWRlZCwgbXVzdCBiZSBhIGJvb2xlYW4gb3IgbnVsbCIpO2lmKGFyZ3VtZW50cy5sZW5ndGg+NCYmdHlwZW9mIGFyZ3VtZW50c1s0XSE9ImJvb2xlYW4iJiZhcmd1bWVudHNbNF0hPT1udWxsKXRocm93IG5ldyBCKCJgbm9uV3JpdGFibGVgLCBpZiBwcm92aWRlZCwgbXVzdCBiZSBhIGJvb2xlYW4gb3IgbnVsbCIpO2lmKGFyZ3VtZW50cy5sZW5ndGg+NSYmdHlwZW9mIGFyZ3VtZW50c1s1XSE9ImJvb2xlYW4iJiZhcmd1bWVudHNbNV0hPT1udWxsKXRocm93IG5ldyBCKCJgbm9uQ29uZmlndXJhYmxlYCwgaWYgcHJvdmlkZWQsIG11c3QgYmUgYSBib29sZWFuIG9yIG51bGwiKTtpZihhcmd1bWVudHMubGVuZ3RoPjYmJnR5cGVvZiBhcmd1bWVudHNbNl0hPSJib29sZWFuIil0aHJvdyBuZXcgQigiYGxvb3NlYCwgaWYgcHJvdmlkZWQsIG11c3QgYmUgYSBib29sZWFuIik7dmFyIGk9YXJndW1lbnRzLmxlbmd0aD4zP2FyZ3VtZW50c1szXTpudWxsLHM9YXJndW1lbnRzLmxlbmd0aD40P2FyZ3VtZW50c1s0XTpudWxsLGE9YXJndW1lbnRzLmxlbmd0aD41P2FyZ3VtZW50c1s1XTpudWxsLG89YXJndW1lbnRzLmxlbmd0aD42P2FyZ3VtZW50c1s2XTohMSxsPSEhb3QmJm90KGUsdCk7aWYoYXQpYXQoZSx0LHtjb25maWd1cmFibGU6YT09PW51bGwmJmw/bC5jb25maWd1cmFibGU6IWEsZW51bWVyYWJsZTppPT09bnVsbCYmbD9sLmVudW1lcmFibGU6IWksdmFsdWU6cix3cml0YWJsZTpzPT09bnVsbCYmbD9sLndyaXRhYmxlOiFzfSk7ZWxzZSBpZihvfHwhaSYmIXMmJiFhKWVbdF09cjtlbHNlIHRocm93IG5ldyBkbigiVGhpcyBlbnZpcm9ubWVudCBkb2VzIG5vdCBzdXBwb3J0IGRlZmluaW5nIGEgcHJvcGVydHkgYXMgbm9uLWNvbmZpZ3VyYWJsZSwgbm9uLXdyaXRhYmxlLCBvciBub24tZW51bWVyYWJsZS4iKX0sRmU9Q2UoKSxGdD1mdW5jdGlvbigpe3JldHVybiEhRmV9O0Z0Lmhhc0FycmF5TGVuZ3RoRGVmaW5lQnVnPWZ1bmN0aW9uKCl7aWYoIUZlKXJldHVybiBudWxsO3RyeXtyZXR1cm4gRmUoW10sImxlbmd0aCIse3ZhbHVlOjF9KS5sZW5ndGghPT0xfWNhdGNoe3JldHVybiEwfX07dmFyIHluPUZ0LGJuPVksbHQ9bW4sdm49eW4oKSx1dD1MdCxmdD1kZSxTbj1ibigiJU1hdGguZmxvb3IlIiksUG49ZnVuY3Rpb24oZSx0KXtpZih0eXBlb2YgZSE9ImZ1bmN0aW9uIil0aHJvdyBuZXcgZnQoImBmbmAgaXMgbm90IGEgZnVuY3Rpb24iKTtpZih0eXBlb2YgdCE9Im51bWJlciJ8fHQ8MHx8dD40Mjk0OTY3Mjk1fHxTbih0KSE9PXQpdGhyb3cgbmV3IGZ0KCJgbGVuZ3RoYCBtdXN0IGJlIGEgcG9zaXRpdmUgMzItYml0IGludGVnZXIiKTt2YXIgcj1hcmd1bWVudHMubGVuZ3RoPjImJiEhYXJndW1lbnRzWzJdLGk9ITAscz0hMDtpZigibGVuZ3RoImluIGUmJnV0KXt2YXIgYT11dChlLCJsZW5ndGgiKTthJiYhYS5jb25maWd1cmFibGUmJihpPSExKSxhJiYhYS53cml0YWJsZSYmKHM9ITEpfXJldHVybihpfHxzfHwhcikmJih2bj9sdChlLCJsZW5ndGgiLHQsITAsITApOmx0KGUsImxlbmd0aCIsdCkpLGV9OyhmdW5jdGlvbihuKXt2YXIgZT0kZSx0PVkscj1QbixpPWRlLHM9dCgiJUZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseSUiKSxhPXQoIiVGdW5jdGlvbi5wcm90b3R5cGUuY2FsbCUiKSxvPXQoIiVSZWZsZWN0LmFwcGx5JSIsITApfHxlLmNhbGwoYSxzKSxsPUNlKCksZj10KCIlTWF0aC5tYXglIik7bi5leHBvcnRzPWZ1bmN0aW9uKHUpe2lmKHR5cGVvZiB1IT0iZnVuY3Rpb24iKXRocm93IG5ldyBpKCJhIGZ1bmN0aW9uIGlzIHJlcXVpcmVkIik7dmFyIHA9byhlLGEsYXJndW1lbnRzKTtyZXR1cm4gcihwLDErZigwLHUubGVuZ3RoLShhcmd1bWVudHMubGVuZ3RoLTEpKSwhMCl9O3ZhciBjPWZ1bmN0aW9uKCl7cmV0dXJuIG8oZSxzLGFyZ3VtZW50cyl9O2w/bChuLmV4cG9ydHMsImFwcGx5Iix7dmFsdWU6Y30pOm4uZXhwb3J0cy5hcHBseT1jfSkoQXQpO3ZhciAkdD1BdC5leHBvcnRzLEN0PVksSXQ9JHQseG49SXQoQ3QoIlN0cmluZy5wcm90b3R5cGUuaW5kZXhPZiIpKSxPbj1mdW5jdGlvbihlLHQpe3ZhciByPUN0KGUsISF0KTtyZXR1cm4gdHlwZW9mIHI9PSJmdW5jdGlvbiImJnhuKGUsIi5wcm90b3R5cGUuIik+LTE/SXQocik6cn0sdGU9KHR5cGVvZiBKU09OPCJ1Ij9KU09OOlByKCkpLnN0cmluZ2lmeSx3bj1PcixSbj1FcixBbj0kdCxUdD1PbixjdD1UdCgiQXJyYXkucHJvdG90eXBlLmpvaW4iKSxSZT1UdCgiQXJyYXkucHJvdG90eXBlLnB1c2giKSxwdD1mdW5jdGlvbihlLHQpe2Zvcih2YXIgcj0iIixpPTA7aTxlO2krPTEpcis9dDtyZXR1cm4gcn0sRW49ZnVuY3Rpb24obixlLHQpe3JldHVybiB0fSxEbj1mdW5jdGlvbihlKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCxyPXQmJnQuc3BhY2V8fCIiO3R5cGVvZiByPT0ibnVtYmVyIiYmKHI9cHQociwiICIpKTt2YXIgaT0hIXQmJnR5cGVvZiB0LmN5Y2xlcz09ImJvb2xlYW4iJiZ0LmN5Y2xlcyxzPXQmJnQucmVwbGFjZXI/QW4odC5yZXBsYWNlcik6RW4sYT10eXBlb2YgdD09ImZ1bmN0aW9uIj90OnQmJnQuY21wLG89YSYmZnVuY3Rpb24oZil7dmFyIGM9YS5sZW5ndGg+MiYmZnVuY3Rpb24odSl7cmV0dXJuIGZbdV19O3JldHVybiBmdW5jdGlvbihnLHUpe3JldHVybiBhKHtrZXk6Zyx2YWx1ZTpmW2ddfSx7a2V5OnUsdmFsdWU6Zlt1XX0sYz97X19wcm90b19fOm51bGwsZ2V0OmN9OnZvaWQgMCl9fSxsPVtdO3JldHVybiBmdW5jdGlvbiBmKGMsZyx1LHApe3ZhciBkPXI/YApgK3B0KHAscik6IiIsbT1yPyI6ICI6IjoiO2lmKHUmJnUudG9KU09OJiZ0eXBlb2YgdS50b0pTT049PSJmdW5jdGlvbiImJih1PXUudG9KU09OKCkpLHU9cyhjLGcsdSksdSE9PXZvaWQgMCl7aWYodHlwZW9mIHUhPSJvYmplY3QifHx1PT09bnVsbClyZXR1cm4gdGUodSk7aWYod24odSkpe2Zvcih2YXIgTz1bXSx5PTA7eTx1Lmxlbmd0aDt5Kyspe3ZhciB4PWYodSx5LHVbeV0scCsxKXx8dGUobnVsbCk7UmUoTyxkK3IreCl9cmV0dXJuIlsiK2N0KE8sIiwiKStkKyJdIn1pZihsLmluZGV4T2YodSkhPT0tMSl7aWYoaSlyZXR1cm4gdGUoIl9fY3ljbGVfXyIpO3Rocm93IG5ldyBUeXBlRXJyb3IoIkNvbnZlcnRpbmcgY2lyY3VsYXIgc3RydWN0dXJlIHRvIEpTT04iKX1lbHNlIFJlKGwsdSk7Zm9yKHZhciBTPVJuKHUpLnNvcnQobyYmbyh1KSksTz1bXSx5PTA7eTxTLmxlbmd0aDt5Kyspe3ZhciBnPVNbeV0sdj1mKHUsZyx1W2ddLHArMSk7aWYodil7dmFyIFA9dGUoZykrbSt2O1JlKE8sZCtyK1ApfX1yZXR1cm4gbC5zcGxpY2UobC5pbmRleE9mKHUpLDEpLCJ7IitjdChPLCIsIikrZCsifSJ9fSh7IiI6ZX0sIiIsZSwwKX0sTG49YnIoRG4pLEE9W107Zm9yKHZhciBBZT0wO0FlPDI1NjsrK0FlKUEucHVzaCgoQWUrMjU2KS50b1N0cmluZygxNikuc2xpY2UoMSkpO2Z1bmN0aW9uIEZuKG4sZT0wKXtyZXR1cm4oQVtuW2UrMF1dK0FbbltlKzFdXStBW25bZSsyXV0rQVtuW2UrM11dKyItIitBW25bZSs0XV0rQVtuW2UrNV1dKyItIitBW25bZSs2XV0rQVtuW2UrN11dKyItIitBW25bZSs4XV0rQVtuW2UrOV1dKyItIitBW25bZSsxMF1dK0FbbltlKzExXV0rQVtuW2UrMTJdXStBW25bZSsxM11dK0FbbltlKzE0XV0rQVtuW2UrMTVdXSkudG9Mb3dlckNhc2UoKX12YXIgcmUsJG49bmV3IFVpbnQ4QXJyYXkoMTYpO2Z1bmN0aW9uIENuKCl7aWYoIXJlJiYocmU9dHlwZW9mIGNyeXB0bzwidSImJmNyeXB0by5nZXRSYW5kb21WYWx1ZXMmJmNyeXB0by5nZXRSYW5kb21WYWx1ZXMuYmluZChjcnlwdG8pLCFyZSkpdGhyb3cgbmV3IEVycm9yKCJjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKCkgbm90IHN1cHBvcnRlZC4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS91dWlkanMvdXVpZCNnZXRyYW5kb212YWx1ZXMtbm90LXN1cHBvcnRlZCIpO3JldHVybiByZSgkbil9dmFyIEluPXR5cGVvZiBjcnlwdG88InUiJiZjcnlwdG8ucmFuZG9tVVVJRCYmY3J5cHRvLnJhbmRvbVVVSUQuYmluZChjcnlwdG8pLGd0PXtyYW5kb21VVUlEOklufTtmdW5jdGlvbiBodChuLGUsdCl7aWYoZ3QucmFuZG9tVVVJRCYmIWUmJiFuKXJldHVybiBndC5yYW5kb21VVUlEKCk7bj1ufHx7fTt2YXIgcj1uLnJhbmRvbXx8KG4ucm5nfHxDbikoKTtyZXR1cm4gcls2XT1yWzZdJjE1fDY0LHJbOF09cls4XSY2M3wxMjgsRm4ocil9Y29uc3Qga3Q9e2Nsb25lKG4pe3JldHVybiBuJiZKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG4pKX0sb2JqZWN0SGFzaChuKXtyZXR1cm4gTG4obil9LHN1bUFycmF5Om49Pm4ucmVkdWNlKChlLHQpPT5lK3QsMCkscHJlY2lzaW9uUm91bmQ6KG4sZT01KT0+e2NvbnN0IHQ9TWF0aC5wb3coMTAsZSk7cmV0dXJuIE1hdGgucm91bmQobip0KS90fSxjYWxjdWxhdGVSZWxpY01haW5TdGF0VmFsdWU6KG4sZSx0KT0+TmUuTWFpblN0YXRzVmFsdWVzW25dW2VdLmJhc2UrTmUuTWFpblN0YXRzVmFsdWVzW25dW2VdLmluY3JlbWVudCp0LHdyYXBwZWRGaXhlZFQ6bj0+KHtnZXQ6bj9FLmdldEZpeGVkVDpUbn0pLGZsaXBTdHJpbmdNYXBwaW5nOm49Pk9iamVjdC5mcm9tRW50cmllcyhPYmplY3QuZW50cmllcyhuKS5tYXAoKFtlLHRdKT0+W3QsZV0pKSx1dWlkOigpPT5odCgpLHV1aWRBbHBoYU9ubHk6KCk9Pmh0KCkucmVwbGFjZSgvW15hLXpBLVowLTldL2csIiIpLHN0cmlwVHJhaWxpbmdTbGFzaGVzOm49Pm4ucmVwbGFjZSgvXC8rJC8sIiIpLHNsZWVwOm49Pm5ldyBQcm9taXNlKGU9PnNldFRpbWVvdXQoZSxuKSksY29uc29sZVdhcm5XcmFwcGVyOm49PntuIGluc3RhbmNlb2YgRXJyb3I/Y29uc29sZS53YXJuKG4ubmFtZSxuLm1lc3NhZ2UpOmNvbnNvbGUud2FybigiQW4gdW5rbm93biBlcnJvciBvY2N1cnJlZCIsbil9LHZhbGlkYXRlVXVpZDpuPT57Y29uc3QgZT1uLnRyaW0oKTtyZXR1cm4vXlxkezl9JC8udGVzdChlKT9lOm51bGx9LHNtb290aFNjcm9sbE5lYXJlc3Q6KG4sZT0zMDApPT57Y29uc3QgdD1uLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLHI9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50fHxkb2N1bWVudC5ib2R5LGk9ci5zY3JvbGxUb3Ascz10LnRvcCtpLGE9dC5ib3R0b20raSxvPXIuY2xpZW50SGVpZ2h0O2xldCBsO2lmKHQudG9wPDApbD1zO2Vsc2UgaWYodC5ib3R0b20+bylsPWEtbys1O2Vsc2UgcmV0dXJuO2NvbnN0IGY9cGVyZm9ybWFuY2Uubm93KCksYz1pLGc9bC1jO2Z1bmN0aW9uIHUocCl7Y29uc3QgZD1wLWYsbT1NYXRoLm1pbihkL2UsMSkseT1tPC41PzIqbSptOjEtTWF0aC5wb3coLTIqbSsyLDIpLzI7ci5zY3JvbGxUbygwLGMrZyp5KSxkPGUmJnJlcXVlc3RBbmltYXRpb25GcmFtZSh1KX1yZXF1ZXN0QW5pbWF0aW9uRnJhbWUodSl9fSxUbj0oKT0+KCk9PiIiLGR0PTEwMDtmdW5jdGlvbiBtdChuLGUpe3JldHVybiBrbihuLGUpfWZ1bmN0aW9uIHl0KG4sZSl7cmV0dXJuWy4uLm4uZW50cmllcygpXS5maWx0ZXIoKFt0LHJdKT0+a3QucHJlY2lzaW9uUm91bmQodCk+ZSkucmVkdWNlKCh0LFtyLGldKT0+dCtpLDApfWZ1bmN0aW9uIGtuKG4sZSl7Y29uc3QgdD1uLm1hcChnPT5NYXRoLmZsb29yKGcqZHQpKSxyPTEwLGk9c2UoWy44LC45LDFdLm1hcChnPT5nKnIpKSxzPWJ0KHQubWFwKGc9PnNlKFsuLi5pLmtleXMoKV0ubWFwKHU9PmcqdSkpKSksYT1ObihzZSh0KSxpKSxvPWJ0KEFycmF5KGUpLmZpbGwoYSkpLGw9TXQocyxvKSxmPWR0KnIsYz1uZXcgTWFwO2Zvcihjb25zdFtnLHVdb2YgbCljLnNldChnL2YsdSk7cmV0dXJuIGN9ZnVuY3Rpb24gYnQobil7cmV0dXJuIG4ucmVkdWNlKChlLHQpPT5NdChlLHQpLHNlKFswXSkpfWZ1bmN0aW9uIE50KG4sZSx0KXtjb25zdCByPW5ldyBNYXA7Zm9yKGNvbnN0W2ksc11vZiBuKWZvcihjb25zdFthLG9db2YgZSl7Y29uc3QgbD10KGksYSksZj1yLmdldChsKTtmPT09dm9pZCAwP3Iuc2V0KGwscypvKTpyLnNldChsLGYrcypvKX1yZXR1cm4gcn1mdW5jdGlvbiBNdChuLGUpe3JldHVybiBOdChuLGUsKHQscik9PnQrcil9ZnVuY3Rpb24gTm4obixlKXtyZXR1cm4gTnQobixlLCh0LHIpPT50KnIpfWZ1bmN0aW9uIHNlKG4pe2NvbnN0IGU9bmV3IE1hcCx0PTEvbi5sZW5ndGg7Zm9yKGNvbnN0IHIgb2Ygbil7Y29uc3QgaT1lLmdldChyKTtpPT09dm9pZCAwP2Uuc2V0KHIsdCk6ZS5zZXQocixpK3QpfXJldHVybiBlfWZ1bmN0aW9uIE1uKG4sZSl7Y29uc3QgdD1rdC5wcmVjaXNpb25Sb3VuZChqbihuLGUpKSxyPUhuKCkqS24obi5wYXJ0KSpHbihuLnBhcnQsbi5tYWluLnN0YXQpO2xldCBpPTA7Zm9yKGNvbnN0IGMgb2YgVW4obi5tYWluLnN0YXQsNCkpe2NvbnN0IGc9X24obi5tYWluLnN0YXQsYyksdT1jLm1hcCh5PT55PT0iQVRLInx8eT09IkRFRiJ8fHk9PSJIUCI/LjQqZVt5XTplW3ldKSxwPXl0KG10KHUsNCksdCksZD15dChtdCh1LDUpLHQpLG09LjgqcCsuMipkO2krPWcqbX1jb25zdCBhPTEvKHIqaSksbz00MC8yLjE7cmV0dXJuIGEqby8yNDB9ZnVuY3Rpb24gam4obixlKXtsZXQgdD0wO2Zvcihjb25zdCByIG9mIG4uc3Vic3RhdHMpe2NvbnN0IGk9ci5zdGF0LHM9ci5yb2xsczt0Kz0ocy5sb3cqLjgrcy5taWQqLjkrcy5oaWdoKSpCbihpKSplW2ldfXJldHVybiB0fWZ1bmN0aW9uIEJuKG4pe3JldHVybiBuPT1oLkhQfHxuPT1oLkRFRnx8bj09aC5BVEs/LjQ6MX1mdW5jdGlvbiBVbihuLGUpe3JldHVybiBCdChTdC5maWx0ZXIodD0+dCE9biksZSl9ZnVuY3Rpb24gR24obixlKXtzd2l0Y2gobil7Y2FzZSJIZWFkIjpjYXNlIkhhbmRzIjpyZXR1cm4gMTtjYXNlIkJvZHkiOnN3aXRjaChlKXtjYXNlIkhQJSI6Y2FzZSJBVEslIjpjYXNlIkRFRiUiOnJldHVybiAuMjtjYXNlIkNSSVQgUmF0ZSI6Y2FzZSJDUklUIERNRyI6Y2FzZSJFZmZlY3QgSGl0IFJhdGUiOmNhc2UiT3V0Z29pbmcgSGVhbGluZyBCb29zdCI6cmV0dXJuIC4xO2RlZmF1bHQ6cmV0dXJuIDB9Y2FzZSJGZWV0Ijpzd2l0Y2goZSl7Y2FzZSJIUCUiOmNhc2UiQVRLJSI6Y2FzZSJERUYlIjpyZXR1cm4gLjM7Y2FzZSJTUEQiOnJldHVybiAuMTtkZWZhdWx0OnJldHVybiAwfWNhc2UiUGxhbmFyU3BoZXJlIjpzd2l0Y2goZSl7Y2FzZSJIUCUiOmNhc2UiQVRLJSI6Y2FzZSJERUYlIjpyZXR1cm4gLjEyO2Nhc2UiUGh5c2ljYWwgRE1HIEJvb3N0IjpjYXNlIkZpcmUgRE1HIEJvb3N0IjpjYXNlIkljZSBETUcgQm9vc3QiOmNhc2UiTGlnaHRuaW5nIERNRyBCb29zdCI6Y2FzZSJXaW5kIERNRyBCb29zdCI6Y2FzZSJRdWFudHVtIERNRyBCb29zdCI6Y2FzZSJJbWFnaW5hcnkgRE1HIEJvb3N0IjpyZXR1cm4gLjY0Lzc7ZGVmYXVsdDpyZXR1cm4gMH1jYXNlIkxpbmtSb3BlIjpzd2l0Y2goZSl7Y2FzZSJIUCUiOmNhc2UiQVRLJSI6Y2FzZSJERUYlIjpyZXR1cm4gLjgvMztjYXNlIkJyZWFrIEVmZmVjdCI6cmV0dXJuIC4xNTtjYXNlIkVuZXJneSBSZWdlbmVyYXRpb24gUmF0ZSI6cmV0dXJuIC4wNTtkZWZhdWx0OnJldHVybiAwfWRlZmF1bHQ6cmV0dXJuIGNvbnNvbGUuZXJyb3IoInVuZGVmaW5lZCBwYXJ0IiksMH19ZnVuY3Rpb24gSG4oKXtyZXR1cm4gMS8yfWZ1bmN0aW9uIEtuKG4pe3N3aXRjaChuKXtjYXNlIkhlYWQiOmNhc2UiSGFuZHMiOmNhc2UiQm9keSI6Y2FzZSJGZWV0IjpyZXR1cm4gMS80O2Nhc2UiUGxhbmFyU3BoZXJlIjpjYXNlIkxpbmtSb3BlIjpyZXR1cm4gMS8yO2RlZmF1bHQ6cmV0dXJuIGNvbnNvbGUuZXJyb3IoInVua25vd24gcGFydCIpLDB9fWZ1bmN0aW9uIHZ0KG4pe3N3aXRjaChuKXtjYXNlIkhQJSI6Y2FzZSJBVEslIjpjYXNlIkRFRiUiOmNhc2UiSFAiOmNhc2UiQVRLIjpjYXNlIkRFRiI6cmV0dXJuIDEwO2Nhc2UiU1BEIjpyZXR1cm4gNDtjYXNlIkNSSVQgUmF0ZSI6Y2FzZSJDUklUIERNRyI6cmV0dXJuIDY7Y2FzZSJFZmZlY3QgSGl0IFJhdGUiOmNhc2UiRWZmZWN0IFJFUyI6Y2FzZSJCcmVhayBFZmZlY3QiOnJldHVybiA4O2RlZmF1bHQ6cmV0dXJuIDB9fWZ1bmN0aW9uIF9uKG4sZSl7bGV0IHQ9MDtmb3IoY29uc3QgciBvZiBqdChlLnNsaWNlKDAsTWF0aC5taW4oNCxlLmxlbmd0aCkpKSl7bGV0IGk9MTAwLXZ0KG4pLHM9MTtmb3IoY29uc3QgYSBvZiByKXtjb25zdCBvPXZ0KGEpO3MqPW8vaSxpLT1vfXQrPXN9cmV0dXJuIHR9ZnVuY3Rpb24qanQobil7aWYobi5sZW5ndGg8MilyZXR1cm4geWllbGQgbjtjb25zdFtlLC4uLnRdPW47Zm9yKGNvbnN0IHIgb2YganQodCkpZm9yKGNvbnN0IGkgb2Ygbi5rZXlzKCkpeWllbGRbLi4uci5zbGljZSgwLGkpLGUsLi4uci5zbGljZShpKV19ZnVuY3Rpb24qQnQobixlKXtpZihlPDEpcmV0dXJuIHlpZWxkW107Zm9yKGNvbnN0W3Qscl1vZiBuLmVudHJpZXMoKSlmb3IoY29uc3QgaSBvZiBCdChuLnNsaWNlKHQrMSksZS0xKSl5aWVsZFtyLC4uLmldfWZ1bmN0aW9uIFZuKG4pe2NvbnN0e3JlbGljOmUsd2VpZ2h0czp0fT1uLmRhdGEscj1NbihlLHQpO3NlbGYucG9zdE1lc3NhZ2Uoe2RheXM6cn0pfXZhciBVdD0obj0+KG5bbi5PUFRJTUlaRVI9MF09Ik9QVElNSVpFUiIsbltuLkVTVF9UQlA9MV09IkVTVF9UQlAiLG4pKShVdHx8e30pO3NlbGYub25tZXNzYWdlPWZ1bmN0aW9uKG4pe3N3aXRjaChuLmRhdGEud29ya2VyVHlwZSl7Y2FzZSBVdC5FU1RfVEJQOlZuKG4pO2JyZWFrfX07Cg==",JE=e=>Uint8Array.from(atob(e),t=>t.charCodeAt(0)),h0=typeof self<"u"&&self.Blob&&new Blob(["URL.revokeObjectURL(import.meta.url);",JE(dm)],{type:"text/javascript;charset=utf-8"});function QE(e){let t;try{if(t=h0&&(self.URL||self.webkitURL).createObjectURL(h0),!t)throw"";const n=new Worker(t,{type:"module",name:e==null?void 0:e.name});return n.addEventListener("error",()=>{(self.URL||self.webkitURL).revokeObjectURL(t)}),n}catch{return new Worker("data:text/javascript;base64,"+dm,{type:"module",name:e==null?void 0:e.name})}}async function $E(e,t){const{displayRelics:n,weights:o}=e,s=[fi(n.Head,o),fi(n.Hands,o),fi(n.Body,o),fi(n.Feet,o),fi(n.PlanarSphere,o),fi(n.LinkRope,o)],r=await Promise.all(s),l={Head:r[0].days,Hands:r[1].days,Body:r[2].days,Feet:r[3].days,PlanarSphere:r[4].days,LinkRope:r[5].days};t(l)}const mr={days:0};function fi(e,t){return e?new Promise((n,o)=>{if(e.grade!=5)return n(mr);const s=new QE;Ou.calculateRelicSubstatRolls(e);const r={relic:e,weights:t,workerType:pl.EST_TBP};s.onmessage=l=>{const c=l.data;s.terminate(),n(c)},s.onerror=l=>{console.error("Worker error:",l),s.terminate(),n(mr)},s.postMessage(r)}):Promise.resolve(mr)}const hr={},f0={};let p0="";const qE=e=>{V(["charactersTab","common"]);const[t,n]=I.useState(null),[o,s]=I.useState(!1),{simScoringResult:r,displayRelics:l,showcaseMetadata:c,scoringType:d}=e;if(I.useEffect(()=>{if(d!=ns&&r!=null)return;const h=c.characterId,p=B.getScoringMetadata(h),S={displayRelics:l,weights:p.stats};p0=h;const D=_E(l,h),E=hr[D];if(E){E!=f0&&n(E);return}s(!0),hr[D]=f0,$E(S,y=>{const P=xE(l,y,p,h);hr[D]=P,p0==h&&(n(P),s(!1))})},[l,c,d,r]),d!=ns&&r!=null)return i.jsx(i.Fragment,{});const u={display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gridTemplateRows:"repeat(3, auto)",gap:"10px",width:"100%",marginTop:20};return i.jsxs(g,{vertical:!0,align:"center",children:[i.jsx("pre",{style:{fontSize:28,fontWeight:"bold",margin:0,textDecoration:"underline",marginTop:15},children:i.jsx(At,{text:"Stat Score Analysis",linkIcon:!0,url:"https://github.com/fribbels/hsr-optimizer/blob/main/docs/guides/en/stat-score.md"})}),o||!t?i.jsx(eC,{}):i.jsxs(g,{vertical:!0,gap:40,style:u,children:[i.jsx(pi,{relicAnalysis:t.Head}),i.jsx(pi,{relicAnalysis:t.Hands}),i.jsx(pi,{relicAnalysis:t.Body}),i.jsx(pi,{relicAnalysis:t.Feet}),i.jsx(pi,{relicAnalysis:t.PlanarSphere}),i.jsx(pi,{relicAnalysis:t.LinkRope})]})]})};function eC(){return i.jsx(g,{justify:"center",align:"center",style:{height:"100px"},children:i.jsx(Gr,{size:"large"})})}function pi(e){const{relicAnalysis:t}=e,n={width:"100%",flex:1,borderRadius:5,overflow:"hidden",padding:10,background:"rgb(29 42 81 / 73%)",boxShadow:Is,backdropFilter:"blur(5px)",border:"1px solid rgba(255, 255, 255, 0.10)",WebkitBackdropFilter:"blur(5px)",minHeight:302};return t?i.jsxs(g,{style:n,gap:10,children:[i.jsx(Jt,{setSelectedRelic:()=>{},relic:t.relic,unhoverable:!0,score:t.relic.scoringResult}),i.jsx(aC,{relicAnalysis:t})]}):i.jsx("div",{style:n})}const Vr={flex:1,borderRadius:6,overflow:"hidden",padding:10,background:"#243356",border:"1px solid #354b7d"},tC={fontSize:14,color:"rgb(159, 175, 207)"};function aC(e){const{relicAnalysis:t}=e;return t?i.jsxs(g,{vertical:!0,style:{width:"100%"},gap:10,children:[i.jsxs(g,{style:{height:111},gap:10,children:[i.jsx(g0,{relicAnalysis:t,index:0}),i.jsx(g0,{relicAnalysis:t,index:1})]}),i.jsx(g,{style:{...Vr,padding:"12px 14px 0px 14px",paddingLeft:15},gap:10,children:i.jsx(nC,{relicAnalysis:t})})]}):i.jsx("div",{style:Vr})}function nC(e){const{relicAnalysis:t}=e,n=(t==null?void 0:t.currentPotential)??0,o=Ct(n);return i.jsxs(g,{vertical:!0,justify:"space-between",style:{width:"100%"},children:[i.jsxs(g,{vertical:!0,children:[i.jsx(Zs,{index:0,relicAnalysis:t}),i.jsx(Zs,{index:1,relicAnalysis:t}),i.jsx(Zs,{index:2,relicAnalysis:t}),i.jsx(Zs,{index:3,relicAnalysis:t})]}),i.jsxs(g,{vertical:!0,style:{height:46,paddingBottom:10},justify:"space-between",gap:4,children:[i.jsx(sa,{style:{margin:0,paddingBottom:2}}),i.jsxs(g,{justify:"space-between",children:[i.jsx("span",{style:tC,children:"Perfection"}),i.jsxs("span",{children:[o,"%"]})]}),i.jsx("div",{style:{height:"100%",width:"100%",backgroundColor:"#304878",borderRadius:"20px",overflow:"hidden"},children:i.jsx("div",{style:{height:"100%",width:`${n}%`,background:`linear-gradient(
              to right,
              ${hm} 0%,
              ${mm} 40%,
              ${um} 80%
            )`,backgroundSize:`${100/(n||1)*100}% 100%`,borderRadius:"4px 0 0 4px"}})})]})]})}function g0(e){const{relicAnalysis:t,index:n}=e,o=n==0?"Days":"Weighted Rolls",s=n==0?"Estimated TBP":"Reroll Potential",r=n==0?la(Math.ceil(t.estDays)):Ct(t.weightedRolls),l=n==0?la(Math.ceil(t.estTbp/40)*40):Ct(t.rerollDelta)+"%";return i.jsxs(g,{style:{...Vr,padding:"6px 10px",backgroundColor:"#334f87",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.25)",border:"1px solid rgb(73 98 153)"},vertical:!0,flex:1,justify:"space-between",children:[i.jsxs(g,{vertical:!0,gap:2,children:[i.jsx("span",{style:{fontSize:"13px",color:"#9FAFCF"},children:o}),i.jsx("span",{style:{fontSize:"18px",fontWeight:"bold",color:"#E0E6F2"},children:r})]}),i.jsxs(g,{vertical:!0,gap:2,children:[i.jsx("span",{style:{fontSize:"13px",color:"#9FAFCF"},children:s}),i.jsx("span",{style:{fontSize:"18px",fontWeight:"bold",color:"#E0E6F2"},children:l})]})]})}const Ol={width:"16px",height:"16px",marginRight:"5px",borderRadius:"2px",marginBottom:3},um="#0e7eff",mm="#63a9ff",hm="#a5bcd9";function iC(){return i.jsx("div",{style:{...Ol,backgroundColor:um}})}function sC(){return i.jsx("div",{style:{...Ol,backgroundColor:mm}})}function oC(){return i.jsx("div",{style:{...Ol,backgroundColor:hm}})}function Zs(e){const{index:t,relicAnalysis:n}=e,o=n.relic.substats[t];if(o==null)return i.jsx("div",{style:{height:22,width:"100%"}});const s=n.weights[o.stat]??0,r=Kn(n.weights[o.stat]*lm(o.stat)),l=o.rolls,c=[];let d=0;for(let u=0;u<l.high;u++)c.push(i.jsx(iC,{},d++));for(let u=0;u<l.mid;u++)c.push(i.jsx(sC,{},d++));for(let u=0;u<l.low;u++)c.push(i.jsx(oC,{},d++));return i.jsxs(g,{style:{height:22,width:"100%",opacity:s?1:.05},justify:"space-between",children:[i.jsxs(g,{align:"flex-end",children:[i.jsx("img",{style:{width:Ve,height:Ve,marginRight:5,marginLeft:-3},src:k.getStatIcon(o.stat)}),c]}),i.jsxs("div",{children:["⨯ ",r]})]})}const{Text:S0}=Ce;function rC(e){const{t}=V(["charactersTab","modals","common"]);console.log("======================================================================= RENDER ShowcaseBuildAnalysis");const{token:n,combatScoreDetails:o,showcaseMetadata:s,scoringType:r,setScoringType:l,setCombatScoreDetails:c}=e,{characterMetadata:d}=s;return i.jsxs(g,{vertical:!0,style:{minHeight:1e3},children:[i.jsxs(g,{justify:"center",gap:10,children:[i.jsxs(g,{justify:"center",style:{paddingLeft:20,paddingRight:5,borderRadius:7,height:40,marginTop:10,backgroundColor:n.colorBgContainer+"85"},align:"center",children:[i.jsx(S0,{style:{width:150},children:t("CharacterPreview.AlgorithmSlider.Title")}),i.jsx(_a,{style:{width:354,height:30},onChange:u=>{l(u),window.store.getState().setSavedSessionKey(Ne.scoringType,u),Ee.delayedSave()},value:r,block:!0,options:[{label:d.scoringMetadata.simulation==null?t("CharacterPreview.AlgorithmSlider.Labels.CombatScoreTBD"):t("CharacterPreview.AlgorithmSlider.Labels.CombatScore"),value:Mi,disabled:d.scoringMetadata.simulation==null},{label:t("CharacterPreview.AlgorithmSlider.Labels.StatScore"),value:ns,disabled:!1},{label:t("CharacterPreview.AlgorithmSlider.Labels.NoneScore"),value:Ya,disabled:!1,className:"noneScoreLabel"}]})]}),i.jsxs(g,{justify:"center",style:{paddingLeft:20,paddingRight:5,borderRadius:7,height:40,marginTop:10,backgroundColor:n.colorBgContainer+"85"},align:"center",children:[i.jsx(S0,{style:{width:150},children:t("CharacterPreview.DetailsSlider.Title")}),i.jsx(_a,{style:{width:354,height:30},onChange:u=>{c(u),window.store.getState().setSavedSessionKey(Ne.combatScoreDetails,u),Ee.delayedSave()},value:o,block:!0,options:[{label:t("CharacterPreview.DetailsSlider.Labels.CombatStats"),value:il,disabled:d.scoringMetadata.simulation==null||r==ns},{label:t("CharacterPreview.DetailsSlider.Labels.DMGUpgrades"),value:nl,disabled:d.scoringMetadata.simulation==null||r==ns}]})]})]}),i.jsx(lC,{simScoringResult:e.simScoringResult}),i.jsx(cC,{simScoringResult:e.simScoringResult,displayRelics:e.displayRelics,showcaseMetadata:e.showcaseMetadata,scoringType:e.scoringType})]})}function lC(e){const t=wl(e,150),n=I.useMemo(()=>t?i.jsx(PE,{simScoringResult:t.simScoringResult}):null,[t]);return t?n:null}function cC(e){const t=wl(e,50),n=I.useMemo(()=>t?i.jsx(qE,{simScoringResult:t.simScoringResult,displayRelics:e.displayRelics,showcaseMetadata:e.showcaseMetadata,scoringType:e.scoringType}):null,[t]);return t?n:null}const dC=({rarity:e=0})=>{const t=[];for(let n=0;n<e;n++)t.push(i.jsx("img",{src:k.getStar(),style:{width:20,height:20}},n));return i.jsx(g,{gap:0,align:"center",children:t})};function uC(e){const{t}=V(["charactersTab","modals","common"]),{characterLevel:n,characterEidolon:o,characterName:s,characterPath:r,characterElement:l,characterMetadata:c}=e.showcaseMetadata,d=e.scoringType===Ya?12:4;return i.jsxs(g,{vertical:!0,children:[i.jsxs(g,{justify:"space-around",style:{height:26,marginBottom:d,marginTop:d},align:"center",children:[i.jsx("img",{style:{width:32},src:k.getElement(l)}),i.jsx(dC,{rarity:c.rarity}),i.jsx("img",{style:{width:32},src:k.getPathFromClass(r)})]}),i.jsxs(g,{vertical:!0,children:[i.jsx(En,{style:{fontSize:24,lineHeight:"30px",fontWeight:400,textAlign:"center"},children:s}),i.jsx(En,{style:{fontSize:16,fontWeight:400,textAlign:"center"},children:`${t("common:LevelShort",{level:n})} ${t("common:EidolonNShort",{eidolon:o})}`})]})]})}const ho="#2473e1";function b0(e,t,n,o){const r={...t[e]??{}};let l=!1;o.color&&(r.color||o.color!=ho)&&(r.color=o.color,l=!0),o.colorMode&&(r.colorMode||o.colorMode!=St.AUTO)&&(r.colorMode=o.colorMode,l=!0),l&&(t[e]=r,n(C.clone(t)),window.store.getState().setSavedSessionKey(Ne.showcaseStandardMode,o.colorMode===St.STANDARD),Ee.delayedSave())}const mC={targetDarkLuma:.26,maxDarkLuma:.45,minLightLuma:.55,targetLightLuma:.74,minNormalLuma:.3,targetNormalLuma:.5,maxNormalLuma:.7,targetMutesSaturation:.3,maxMutesSaturation:.4,targetVibrantSaturation:1,minVibrantSaturation:.35,weightSaturation:3,weightLuma:6.5,weightPopulation:.5};function hC(e){let t=0;return e.forEach(n=>{t=Math.max(t,n.getPopulation())}),t}function fC(e,t){return e.Vibrant===t||e.DarkVibrant===t||e.LightVibrant===t||e.Muted===t||e.DarkMuted===t||e.LightMuted===t}function gi(e,t,n,o,s,r,l,c,d,u){let h=null,p=0;return t.forEach(S=>{let[,D,E]=S.getHsl();if(D>=c&&D<=d&&E>=s&&E<=r&&!fC(e,S)){let y=pC(D,l,E,o,S.getPopulation(),n,u);(h===null||y>p)&&(h=S,p=y)}}),h}function pC(e,t,n,o,s,r,l){function c(...u){let h=0,p=0;for(let S=0;S<u.length;S+=2){let D=u[S],E=u[S+1];h+=D*E,p+=E}return h/p}function d(u,h){return 1-Math.abs(u-h)}return c(d(e,t),l.weightSaturation,d(n,o),l.weightLuma,s/r,l.weightPopulation)}function gC(e,t,n){let o={};return o.Vibrant=gi(o,e,t,n.targetNormalLuma,n.minNormalLuma,n.maxNormalLuma,n.targetVibrantSaturation,n.minVibrantSaturation,1,n),o.LightVibrant=gi(o,e,t,n.targetLightLuma,n.minLightLuma,1,n.targetVibrantSaturation,n.minVibrantSaturation,1,n),o.DarkVibrant=gi(o,e,t,n.targetDarkLuma,0,n.maxDarkLuma,n.targetVibrantSaturation,n.minVibrantSaturation,1,n),o.Muted=gi(o,e,t,n.targetNormalLuma,n.minNormalLuma,n.maxNormalLuma,n.targetMutesSaturation,0,n.maxMutesSaturation,n),o.LightMuted=gi(o,e,t,n.targetLightLuma,n.minLightLuma,1,n.targetMutesSaturation,0,n.maxMutesSaturation,n),o.DarkMuted=gi(o,e,t,n.targetDarkLuma,0,n.maxDarkLuma,n.targetMutesSaturation,0,n.maxMutesSaturation,n),o}function SC(e,t,n){if(e.Vibrant===null&&e.DarkVibrant===null&&e.LightVibrant===null){if(e.DarkVibrant===null&&e.DarkMuted!==null){let[o,s,r]=e.DarkMuted.getHsl();r=n.targetDarkLuma,e.DarkVibrant=new Oa(ka.hslToRgb(o,s,r),0)}if(e.LightVibrant===null&&e.LightMuted!==null){let[o,s,r]=e.LightMuted.getHsl();r=n.targetDarkLuma,e.DarkVibrant=new Oa(ka.hslToRgb(o,s,r),0)}}if(e.Vibrant===null&&e.DarkVibrant!==null){let[o,s,r]=e.DarkVibrant.getHsl();r=n.targetNormalLuma,e.Vibrant=new Oa(ka.hslToRgb(o,s,r),0)}else if(e.Vibrant===null&&e.LightVibrant!==null){let[o,s,r]=e.LightVibrant.getHsl();r=n.targetNormalLuma,e.Vibrant=new Oa(ka.hslToRgb(o,s,r),0)}if(e.DarkVibrant===null&&e.Vibrant!==null){let[o,s,r]=e.Vibrant.getHsl();r=n.targetDarkLuma,e.DarkVibrant=new Oa(ka.hslToRgb(o,s,r),0)}if(e.LightVibrant===null&&e.Vibrant!==null){let[o,s,r]=e.Vibrant.getHsl();r=n.targetLightLuma,e.LightVibrant=new Oa(ka.hslToRgb(o,s,r),0)}if(e.Muted===null&&e.Vibrant!==null){let[o,s,r]=e.Vibrant.getHsl();r=n.targetMutesSaturation,e.Muted=new Oa(ka.hslToRgb(o,s,r),0)}if(e.DarkMuted===null&&e.DarkVibrant!==null){let[o,s,r]=e.DarkVibrant.getHsl();r=n.targetMutesSaturation,e.DarkMuted=new Oa(ka.hslToRgb(o,s,r),0)}if(e.LightMuted===null&&e.LightVibrant!==null){let[o,s,r]=e.LightVibrant.getHsl();r=n.targetMutesSaturation,e.LightMuted=new Oa(ka.hslToRgb(o,s,r),0)}}const bC=(e,t)=>{const n={...mC,...t};let o=hC(e),s=gC(e,o,n);return SC(s,o,n),s.colors=e.sort((r,l)=>l._population-r._population),s};function D0(e,t){fd.from(e).maxColorCount(100).useGenerator(bC).addFilter((n,o,s,r)=>{const l=Wt(n,o,s,"rgb"),c=l.lch()[0]/100;return l.hsl()[1]>.05&&c>.1&&c<.9&&r>.75}).getPalette().then(n=>{const o={Vibrant:n.Vibrant.hex,DarkVibrant:n.DarkVibrant.hex,Muted:n.Muted.hex,DarkMuted:n.DarkMuted.hex,LightVibrant:n.LightVibrant.hex,LightMuted:n.LightMuted.hex},s=n.colors.map(l=>Wt(l._rgb).hex()).filter(l=>l!=o.Vibrant&&l!=o.DarkVibrant&&l!=o.Muted&&l!=o.DarkMuted&&l!=o.LightVibrant&&l!=o.LightMuted),r={...o,colors:s};t(r)}).catch(n=>{console.error(n)})}const fm=I.forwardRef((e,t)=>{var tt;const{id:n,source:o,characterId:s,simScoringResult:r,scoringType:l,seedColor:c,setSeedColor:d,colorMode:u,setColorMode:h}=e,{t:p}=V("charactersTab",{keyPrefix:"CharacterPreview.CustomizationSidebar"}),{t:S}=V("charactersTab",{keyPrefix:"CharacterPreview.ScoringSidebar"}),[D,E]=I.useState([]),y=window.store(ue=>ue.showcasePreferences),P=window.store(ue=>ue.setShowcasePreferences),[_,x]=I.useState(!1),G=window.store(ue=>ue.savedSession.showcaseDarkMode),M=window.store(ue=>ue.savedSession.showcaseUID),H=window.store(ue=>ue.savedSession.showcasePreciseSpd),Z=window.store(()=>B.getScoringMetadata(s)),X=window.store(()=>Z.stats[a.SPD]),W=window.store(()=>{var ue;return((ue=Z.simulation)==null?void 0:ue.deprioritizeBuffs)??!1});I.useImperativeHandle(t,()=>({onPortraitLoad:(ue,te)=>{var pe;(pe=B.getCharacterById(te))!=null&&pe.portrait?D0(ue,ge=>{const Le=XE(VE([ge.Vibrant,ge.DarkVibrant,ge.Muted,ge.DarkMuted,ge.LightVibrant,ge.LightMuted]));d(Le),fo[ue]=Le,E(m0(ge))}):setTimeout(()=>{D0(ue,ge=>{E(m0(ge))})},1e3)}}));function L(ue){ue!=ho&&(b0(s,y,P,{color:ue,colorMode:St.CUSTOM}),console.log("Set seed color to",ue),h(St.CUSTOM),d(ue))}function A(ue){b0(s,y,P,{colorMode:ue}),console.log("Set color mode to",ue),h(ue)}function O(ue){console.log("Set dark mode to",ue),window.store.getState().setSavedSessionKey(Ne.showcaseDarkMode,ue)}const j=ue=>{console.log("Set show UID to",ue),window.store.getState().setSavedSessionKey(Ne.showcaseUID,ue)};function ie(ue){console.log("Set precise spd to",ue),window.store.getState().setSavedSessionKey(Ne.showcasePreciseSpd,ue)}function ee(ue){console.log("Set spd value to",ue);const te=C.clone(B.getScoringMetadata(s));te.stats[a.SPD]=ue,B.updateCharacterScoreOverrides(s,te)}function me(ue){var ge;const te=(ge=ue==null?void 0:ue.target)==null?void 0:ge.value;if(te==null)return he(void 0);const pe=parseFloat(te);if(isNaN(pe))return he(void 0);he(pe)}function he(ue){console.log("Set spd benchmark to",ue);const te=C.clone(window.store.getState().showcaseTemporaryOptions);te[s]||(te[s]={});const pe=ue==-1?void 0:ue;te[s].spdBenchmark=pe,window.store.getState().setShowcaseTemporaryOptions(te)}function De(){window.store.getState().setStatTracesDrawerFocusCharacter(s),window.store.getState().setStatTracesDrawerOpen(!0)}function ae(ue){const te=B.getScoringMetadata(s);if(te!=null&&te.simulation){console.log("Set deprioritizeBuffs to",ue);const pe=C.clone(te.simulation);pe.deprioritizeBuffs=ue,B.updateSimulationScoreOverrides(s,pe)}}const Q=[{label:p("PaletteLabel"),colors:D}],{spdPrecisionOptions:Oe,spdWeightOptions:Ae,buffPriorityOptions:Ze}=I.useMemo(()=>({spdPrecisionOptions:[{value:!1,label:S("SpdPrecision.Low")},{value:!0,label:S("SpdPrecision.High")}],spdWeightOptions:[{value:1,label:S("SpdWeight.Max")},{value:0,label:S("SpdWeight.Min")}],buffPriorityOptions:[{value:!1,label:S("BuffPriority.High")},{value:!0,label:S("BuffPriority.Low")}]}),[S]);return o!=Tt.SHOWCASE_TAB&&o!=Tt.CHARACTER_TAB?i.jsx(i.Fragment,{}):i.jsxs(g,{vertical:!0,gap:16,style:{position:"absolute",marginLeft:1085,width:130},children:[i.jsxs(g,{vertical:!0,gap:6,style:{backgroundColor:"rgb(29 42 71)",boxShadow:E0,borderRadius:5,padding:Ii},children:[i.jsxs(g,{justify:"space-between",align:"center",style:{position:"relative"},children:[i.jsx("span",{}),i.jsx($,{style:{textAlign:"center",position:"absolute",left:"50%",transform:"translateX(-50%)"},children:S("Stats.Header")}),i.jsx("a",{href:"https://github.com/fribbels/hsr-optimizer/blob/main/docs/guides/en/score-customization.md",target:"_blank",style:{display:"inline-flex",alignItems:"center"},rel:"noreferrer",children:i.jsx("img",{src:k.getQuestion(),style:{height:16,width:16,opacity:.6,marginLeft:"auto"}})})]}),i.jsx(sa,{}),i.jsx(Y,{icon:i.jsx(Ga,{}),onClick:De,children:S("Stats.ButtonText")}),i.jsx(sa,{}),i.jsx($,{style:{textAlign:"center",marginBottom:2},children:S("SpdPrecision.Header")}),i.jsx(_a,{options:Oe,block:!0,value:H,onChange:ie}),l!=Ya&&i.jsxs(i.Fragment,{children:[i.jsx(sa,{}),i.jsx($,{style:{textAlign:"center",marginBottom:2},children:S("SpdWeight.Header")}),i.jsx(_a,{options:Ae,block:!0,value:X,onChange:ee})]}),l==Mi&&i.jsxs(i.Fragment,{children:[i.jsx(sa,{}),i.jsx($,{style:{textAlign:"center",marginBottom:2},children:S("BenchmarkSpd.Header")}),i.jsx($t,{size:"small",controls:!1,style:{width:"100%"},value:RC((tt=window.store.getState().showcaseTemporaryOptions[s])==null?void 0:tt.spdBenchmark),addonAfter:i.jsx(DC,{spdFilter:r==null?void 0:r.originalSpd,onShowcaseSpdBenchmarkChange:he,characterId:s,simScoringResult:r}),min:0,onBlur:me,onPressEnter:me})]}),l==Mi&&i.jsxs(i.Fragment,{children:[i.jsx(sa,{}),i.jsx($,{style:{textAlign:"center",marginBottom:2},children:S("BuffPriority.Header")}),i.jsx(_a,{options:Ze,block:!0,value:W,onChange:ae})]})]}),i.jsxs(g,{vertical:!0,gap:6,style:{backgroundColor:"rgb(29 42 71)",boxShadow:E0,borderRadius:5,padding:Ii},children:[i.jsx($,{style:{textAlign:"center"},children:p("Label")}),i.jsx(sa,{}),i.jsx(th,{presets:Q,defaultValue:"#1677ff",value:c,onChangeComplete:ue=>{const te=ue.toHexString();L(te)},disabledAlpha:!0,disabledFormat:!0,showText:!0}),i.jsx(sa,{}),i.jsx(_a,{vertical:!0,options:[{value:St.AUTO,label:p("Modes.Auto")},{value:St.CUSTOM,label:p("Modes.Custom")},{value:St.STANDARD,label:p("Modes.Standard")}],value:u,onChange:A}),i.jsx(sa,{}),i.jsx(_a,{options:[{value:!1,label:i.jsx(ld,{})},{value:!0,label:i.jsx(ah,{})}],block:!0,value:G,onChange:O}),o==Tt.SHOWCASE_TAB&&i.jsxs(i.Fragment,{children:[i.jsx(sa,{}),i.jsx($,{style:{textAlign:"center",marginBottom:2},children:p("ShowUID")}),i.jsx(_a,{options:[{value:!0,label:i.jsx(Sn,{})},{value:!1,label:i.jsx(Fa,{})}],block:!0,value:M,onChange:j})]}),i.jsx(sa,{}),i.jsxs(g,{justify:"space-between",children:[i.jsx(Y,{icon:i.jsx(pd,{style:{fontSize:30}}),loading:_,onClick:()=>R0(n,"clipboard",x,e.seedColor),type:"primary",style:{height:50,width:50,borderRadius:8}}),i.jsx(Y,{icon:i.jsx(qr,{style:{fontSize:30}}),loading:_,onClick:()=>R0(n,"download",x,e.seedColor),type:"primary",style:{height:50,width:50,borderRadius:8}})]})]})]})});fm.displayName="ShowcaseCustomizationSidebar";function DC(e){const{t}=V("optimizerTab",{keyPrefix:"Presets"}),{t:n}=V("charactersTab",{keyPrefix:"CharacterPreview.ScoringSidebar.BenchmarkSpd"}),o=I.useMemo(()=>{const s=Object.values(C.clone(xu(t))).slice(1);return e.spdFilter!=null&&s.map(r=>{r.disabled=r.value!=null&&r.value>e.spdFilter}),[{label:i.jsx("span",{children:n("BenchmarkOptionsLabel")}),title:"benchmark",options:[{label:i.jsx("b",{children:i.jsx("span",{children:n("CurrentSpdLabel")})}),value:-1},{label:i.jsx("span",{children:n("BaseSpdLabel")}),value:0}]},{label:i.jsx("span",{children:n("CommonBreakpointsLabel")}),options:s}]},[t,n,e.spdFilter,e.characterId,e.simScoringResult]);return i.jsx(z,{style:{width:34},labelRender:()=>i.jsx(i.Fragment,{}),dropdownStyle:{width:"fit-content"},options:o,placement:"bottomRight",listHeight:800,value:null,onChange:e.onShowcaseSpdBenchmarkChange})}function R0(e,t,n,o){n(!0),setTimeout(()=>{F.screenshotElementById(e,t).finally(()=>{n(!1)})},100)}function RC(e){return e==null||e<0?void 0:e}const E0="rgba(0, 0, 0, 0.25) 0px 0.0625em 0.0625em, rgba(0, 0, 0, 0.25) 0px 0.125em 0.5em, rgba(255, 255, 255, 0.15) 0px 0px 0px 1px inset",pm="#799ef4";function EC(){return{color:pm,colorMode:St.STANDARD}}function CC(e){return{color:e,colorMode:St.AUTO}}const fo={};function TC(e,t,n){var s;if(e==St.STANDARD)return St.STANDARD;const o=(s=t[n.id])==null?void 0:s.colorMode;return!o||o==St.STANDARD?St.AUTO:o}function yC(e,t,n){var s;return n==St.STANDARD?pm:(s=B.getCharacterById(e))!=null&&s.portrait&&fo[t]?fo[t]:({1001:["#718fe5"],1002:["#7dd3ea"],1003:["#d6b5c2"],1004:["#6385d8"],1005:["#ea8abc"],1006:["#8483eb"],1008:["#817fd1"],1009:["#9e80e6"],1013:["#8969ea"],1101:["#375ee1"],1102:["#5f55eb"],1103:["#8772f4"],1104:["#0f4eef"],1105:["#82b5e9"],1106:["#4b88e0"],1107:["#a99dd1"],1108:["#7777c9"],1109:["#c8d0f0"],1110:["#53b1e1"],1111:["#5d8ce2"],1112:["#0f349b"],1201:["#87d2da"],1202:["#f4b5d4"],1203:["#8ce2f4"],1204:["#94e6f1"],1205:["#4d69be"],1206:["#81adf1"],1207:["#90a0e6"],1208:["#dd9cf2"],1209:["#6db1f4"],1210:["#88aade"],1211:["#5f9ce2"],1212:["#3e65f2"],1213:["#72c3de"],1214:["#3571e7"],1215:["#9a90e6"],1217:["#8cf4fc"],1218:["#fff4f8"],1220:["#7fd9e1"],1221:["#a2e9f5"],1222:["#ffeef5"],1223:["#575aa0"],1224:["#f7b6f7"],1225:["#fce4f7"],1301:["#7c7c99"],1302:["#f77784"],1303:["#3964d1"],1304:["#7cbcea"],1305:["#3151c7"],1306:["#5866bc"],1307:["#a37df4"],1308:["#837bd4"],1309:["#d7a4f1"],1310:["#a0efec"],1312:["#b0b7d0"],1313:["#7e95e9"],1314:["#8a74dc"],1315:["#a49ed2"],1317:["#7789e2"],8001:["#5f81f4"],8002:["#5f81f4"],8003:["#756d96"],8004:["#756d96"],8005:["#8d7abc"],8006:["#8d7abc"],1401:["#aa81fa"],1402:["#86bdf1"],8007:["#f0a1fa"],8008:["#f0a1fa"],1403:["#979af7"],1404:["#ff94b1"],1405:["#93d4c2"],1407:["#b985fd"]}[e]??["#000000"])[0]}function kl(e){var p,S,D;const[t]=N.useForm(),{t:n}=V("modals",{keyPrefix:"EditCharacter"}),{t:o}=V("common"),[s,r]=I.useState(((p=e.initialCharacter)==null?void 0:p.form.characterId)||""),[l]=I.useState(((S=e.initialCharacter)==null?void 0:S.form.characterEidolon)||0),[c,d]=I.useState(((D=e.initialCharacter)==null?void 0:D.form.lightConeSuperimposition)||1);I.useEffect(()=>{var y,P,_,x,G;if(!e.open)return;const E={characterId:(y=e.initialCharacter)==null?void 0:y.form.characterId,characterLevel:80,characterEidolon:((P=e.initialCharacter)==null?void 0:P.form.characterEidolon)||0,lightCone:(_=e.initialCharacter)==null?void 0:_.form.lightCone,lightConeLevel:80,lightConeSuperimposition:((x=e.initialCharacter)==null?void 0:x.form.lightConeSuperimposition)||1};r(((G=e.initialCharacter)==null?void 0:G.form.characterId)??""),t.setFieldsValue(E)},[e.open]);function u(){const E=t.getFieldsValue();console.log("Character modal submitted with form:",E),e.onOk(E),e.setOpen(!1)}const h=()=>{e.setOpen(!1)};return i.jsx(_t,{open:e.open,width:400,destroyOnClose:!0,centered:!0,onOk:u,onCancel:h,footer:[i.jsx(Y,{onClick:h,children:o("Cancel")},"back"),i.jsx(Y,{type:"primary",onClick:u,children:o("Save")},"submit")],children:i.jsx(N,{form:t,preserve:!1,layout:"vertical",children:i.jsxs(g,{vertical:!0,gap:10,children:[i.jsxs(g,{vertical:!0,gap:5,children:[i.jsx($,{children:n("Character")}),i.jsx(N.Item,{name:"characterId",children:i.jsx(Li,{value:"",withIcon:!0,onChange:E=>{var G,M,H;r(E);const y=B.getCharacterById(E),P=E!=null&&E.startsWith("80")?6:((G=y==null?void 0:y.form)==null?void 0:G.characterEidolon)||0,_=((M=y==null?void 0:y.form)==null?void 0:M.lightCone)||void 0,x=((H=y==null?void 0:y.form)==null?void 0:H.lightConeSuperimposition)||1;t.setFieldValue("characterEidolon",P),t.setFieldValue("lightCone",_),t.setFieldValue("lightConeSuperimposition",x)}})}),i.jsx(N.Item,{name:"characterEidolon",children:i.jsxs(Ye.Group,{value:l,buttonStyle:"solid",style:{width:"100%",display:"flex"},children:[i.jsx(ua,{text:n("EidolonButton",{eidolon:0}),value:0}),i.jsx(ua,{text:n("EidolonButton",{eidolon:1}),value:1}),i.jsx(ua,{text:n("EidolonButton",{eidolon:2}),value:2}),i.jsx(ua,{text:n("EidolonButton",{eidolon:3}),value:3}),i.jsx(ua,{text:n("EidolonButton",{eidolon:4}),value:4}),i.jsx(ua,{text:n("EidolonButton",{eidolon:5}),value:5}),i.jsx(ua,{text:n("EidolonButton",{eidolon:6}),value:6})]})})]}),i.jsxs(g,{vertical:!0,gap:5,children:[i.jsx($,{children:n("Lightcone")}),i.jsx(N.Item,{name:"lightCone",children:i.jsx(Tl,{value:"",withIcon:!0,characterId:s,onChange:()=>{t.setFieldValue("lightConeSuperimposition",1)}})}),i.jsx(N.Item,{name:"lightConeSuperimposition",children:i.jsxs(Ye.Group,{value:c,onChange:E=>d(E.target.value),buttonStyle:"solid",style:{width:"100%",display:"flex"},children:[i.jsx(ua,{text:n("SuperimpositionButton",{superimposition:1}),value:1}),i.jsx(ua,{text:n("SuperimpositionButton",{superimposition:2}),value:2}),i.jsx(ua,{text:n("SuperimpositionButton",{superimposition:3}),value:3}),i.jsx(ua,{text:n("SuperimpositionButton",{superimposition:4}),value:4}),i.jsx(ua,{text:n("SuperimpositionButton",{superimposition:5}),value:5})]})})]})]})})})}function ua(e){return i.jsx(Ye.Button,{value:e.value,style:{flex:1,padding:"unset",textAlign:"center"},children:e.text})}function PC(e){const{characterId:t,token:n,simScoringResult:o,teamSelection:s,combatScoreDetails:r,displayRelics:l,setTeamSelectionByCharacter:c,setRedrawTeammates:d}=e,[u,h]=I.useState(!1),[p,S]=I.useState(),[D,E]=I.useState();return i.jsxs(g,{vertical:!0,children:[i.jsxs(g,{justify:"space-around",style:{padding:"0 5px"},children:[i.jsx(fr,{index:0,result:o,token:n,setCharacterModalOpen:h,setSelectedTeammateIndex:S,setCharacterModalInitialCharacter:E}),i.jsx(fr,{index:1,result:o,token:n,setCharacterModalOpen:h,setSelectedTeammateIndex:S,setCharacterModalInitialCharacter:E}),i.jsx(fr,{index:2,result:o,token:n,setCharacterModalOpen:h,setSelectedTeammateIndex:S,setCharacterModalInitialCharacter:E})]}),i.jsx(MC,{characterId:t,teamSelection:s,selectedTeammateIndex:p,characterModalInitialCharacter:D,isCharacterModalOpen:u,setCharacterModalOpen:h,setTeamSelectionByCharacter:c,setRedrawTeammates:d})]})}function IC(e){const{combatScoreDetails:t,simScoringResult:n}=e;return i.jsxs(i.Fragment,{children:[t==nl&&i.jsx(g,{vertical:!0,gap:$e,children:i.jsx(ME,{result:n})}),t==il&&i.jsx(g,{vertical:!0,gap:$e,children:i.jsx(BE,{result:n})})]})}function fr(e){const{t}=V(["charactersTab","modals","common"]),{result:n,index:o,token:s,setCharacterModalOpen:r,setSelectedTeammateIndex:l,setCharacterModalInitialCharacter:c}=e,d=n.simulationMetadata.teammates[o],u=64;return i.jsx(Yn.Grid,{style:{width:"33.3333%",textAlign:"center",padding:1,boxShadow:"none"},hoverable:!0,onClick:()=>{c({form:d}),r(!0),l(o)},className:"custom-grid",children:i.jsxs(g,{vertical:!0,align:"center",gap:0,children:[i.jsx("img",{src:k.getCharacterAvatarById(d.characterId),style:{height:u,width:u,borderRadius:u,backgroundColor:"rgba(124, 124, 124, 0.1)",border:wi}}),i.jsx(e0,{text:t("common:EidolonNShort",{eidolon:d.characterEidolon}),top:-12}),i.jsx("img",{src:k.getLightConeIconById(d.lightCone),style:{height:u,marginTop:-3}}),i.jsx(e0,{text:t("common:SuperimpositionNShort",{superimposition:d.lightConeSuperimposition}),top:-18})]})})}function BC(e){const{t}=V(["charactersTab"]),n=e.result,o=Object.values(e.relics).filter(u=>u==null?void 0:u.verified).length==6,s=Object.values(e.relics).filter(u=>!!u).length,r={fontSize:17,fontWeight:"600",textAlign:"center",color:"rgb(225, 165, 100)",height:23,whiteSpace:"nowrap"},l=!!n.simulationForm.lightCone,c=n.spdBenchmark==null?t("CharacterPreview.ScoreHeader.Title"):t("CharacterPreview.ScoreHeader.TitleBenchmark",{spd:GC(n.spdBenchmark)}),d=i.jsxs(g,{align:"center",vertical:!0,style:{marginBottom:6,paddingTop:3,paddingBottom:3},children:[i.jsx(En,{style:r,children:c}),i.jsx(En,{style:r,children:t("CharacterPreview.ScoreHeader.Score",{score:Ct(F.truncate10ths(Math.max(0,n.percent*100))),grade:WR(n.percent,o,s,l)})})]});return i.jsx(g,{vertical:!0,children:d})}function GC(e){return F.truncate10ths(e).toFixed(1)}function MC(e){const{t}=V(["charactersTab","modals","common"]),n=window.store(D=>D.globalThemeConfig),{characterId:o,teamSelection:s,selectedTeammateIndex:r,characterModalInitialCharacter:l,setTeamSelectionByCharacter:c,setRedrawTeammates:d,isCharacterModalOpen:u,setCharacterModalOpen:h}=e;function p(D){if(!D.characterId||!D.lightCone)return J.error(t("CharacterPreview.Messages.NoSelectedCharacter"));const y=F.clone(B.getScoringMetadata(o)).simulation;y.teammates[r]=D,B.updateSimulationScoreOverrides(o,y),c({[o]:Di}),d(Math.random())}const S=i.jsx(_a,{style:{marginLeft:10,marginRight:10,marginTop:2,marginBottom:0,alignItems:"center"},onChange:D=>{D==tc?window.modalApi.info({icon:null,width:400,okText:t("common:Ok"),maskClosable:!0,content:i.jsx("div",{style:{width:"100%"},children:i.jsxs(g,{vertical:!0,gap:10,children:[i.jsx($,{children:t("modals:ScoreFooter.ModalTitle")}),i.jsx(Y,{icon:i.jsx(id,{}),onClick:()=>{const y=F.clone(B.getMetadata().characters[o]).scoringMetadata.simulation;B.updateSimulationScoreOverrides(o,y),s!=as&&c({[o]:as}),d(Math.random()),J.success(t("modals:ScoreFooter.ResetSuccessMsg"))},children:t("modals:ScoreFooter.ResetButtonText")}),i.jsx(Y,{icon:i.jsx(nd,{}),onClick:()=>{var P;const y=F.clone(B.getScoringMetadata(o)).simulation;for(const _ of y.teammates){const x=(P=B.getCharacterById(_.characterId))==null?void 0:P.form;x!=null&&(_.characterEidolon=x.characterEidolon,x.lightCone&&(_.lightCone=x.lightCone,_.lightConeSuperimposition=x.lightConeSuperimposition||1))}B.updateSimulationScoreOverrides(o,y),s!=Di&&c({[o]:Di}),d(Math.random()),J.success(t("modals:ScoreFooter.SyncSuccessMsg"))},children:t("modals:ScoreFooter.SyncButtonText")})]})})}):c({[o]:D})},value:s,block:!0,options:[{value:as,label:i.jsx(g,{justify:"center",align:"center",children:t("modals:ScoreFooter.TeamOptions.Default")})},{label:i.jsx(Ga,{}),value:tc,className:"short-segmented"},{value:Di,label:i.jsx(g,{justify:"center",align:"center",children:t("modals:ScoreFooter.TeamOptions.Custom")})}]});return i.jsxs(g,{vertical:!0,gap:2,children:[i.jsx(jn,{theme:n,children:i.jsx(kl,{onOk:p,open:u,setOpen:h,initialCharacter:l})}),S]})}const Ao=({src:e,style:t,callback:n})=>{const[o,s]=I.useState({}),[r,l]=I.useState({}),[c,d]=I.useState(!1),[u,h]=I.useState(!0);return I.useEffect(()=>{if(e==o.src&&C.objectHash(t)==C.objectHash(o.style)||e==r.src&&C.objectHash(t)==C.objectHash(r.style))return;h(!0),l({src:e,style:t});const p=new Image;if(p.src=e,p.complete||p.naturalWidth>0){d(!0);return}d(!1),p.onload=()=>{d(!0)}},[o,e,t]),I.useEffect(()=>{c&&(setTimeout(()=>{h(!1)},150),s({src:r.src,style:r.style}),d(!1),n&&n(r.src))},[c]),i.jsx("img",{src:o.src,loading:"eager",style:{...o.style,filter:u?"blur(6px)":"none",transition:u?"":"filter 0.5s cubic-bezier(.41,.65,.39,.99)"}})},{Text:xC}=Ce;function vC(e){const{t}=V(["charactersTab","modals","common"]),{source:n,character:o,displayDimensions:s,setOriginalCharacterModalInitialCharacter:r,setOriginalCharacterModalOpen:l,setCharacterModalAdd:c,showcaseMetadata:d}=e,{tempLcParentW:u,tempLcParentH:h,tempLcInnerW:p,tempLcInnerH:S,newLcHeight:D,lcCenter:E}=s,{lightConeSrc:y,lightConeName:P,lightConeLevel:_,lightConeSuperimposition:x}=d;return i.jsxs(g,{vertical:!0,children:[P&&i.jsx(g,{vertical:!0,style:{position:"relative",height:0,top:D-35,paddingRight:5},align:"flex-end",children:i.jsx(xC,{style:{position:"absolute",height:30,backgroundColor:"rgb(0 0 0 / 70%)",padding:"3px 12px",borderRadius:8,fontSize:14,maxWidth:Ua-50,width:"fit-content",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",zIndex:21,textShadow:"0px 0px 10px black",border:wi,boxShadow:Hi,backdropFilter:Kr},children:`${t("common:SuperimpositionNShort",{superimposition:x})} - ${P}`})}),i.jsx(g,{className:"lightConeCard",style:{width:`${u}px`,height:`${h}px`,position:"relative",overflow:"hidden",zIndex:20,borderRadius:"8px",border:wi,boxShadow:Hi},onClick:()=>{n==Tt.SHOWCASE_TAB?(r(o),l(!0)):(c(!1),r(o),l(!0))},children:i.jsx(Ao,{src:y,style:{position:"absolute",width:420,top:-E+D/2,left:-8}})})]})}function _C(e){V(["charactersTab","modals","common"]);const{source:t,character:n,displayDimensions:o,setOriginalCharacterModalInitialCharacter:s,setOriginalCharacterModalOpen:r,setCharacterModalAdd:l,showcaseMetadata:c}=e,{tempLcParentW:d,tempLcParentH:u,tempLcInnerW:h,tempLcInnerH:p}=o,{lightConeSrc:S,lightConeName:D,lightConeLevel:E,lightConeSuperimposition:y}=c;return i.jsx("div",{className:"lightConeCard",style:{width:`${d}px`,height:`${u}px`,overflow:"hidden",borderRadius:"8px",zIndex:20,border:wi,boxShadow:Hi},onClick:()=>{t==Tt.SHOWCASE_TAB?(s(n),r(!0)):(l(!1),s(n),r(!0))},children:i.jsx(Ao,{src:S,style:{width:h,transform:`translate(${(h-d)/2/h*-100}%, ${(p-u)/2/p*-100+8}%)`}})})}function AC(e){const{t}=V(["charactersTab","modals","common"]),{showcaseMetadata:n}=e,{lightConeSrc:o,lightConeName:s,lightConeLevel:r,lightConeSuperimposition:l}=n;return i.jsxs(g,{vertical:!0,children:[i.jsx(aE,{style:{fontSize:18,fontWeight:400,marginLeft:10,marginRight:10,textAlign:"center"},children:`${s}`}),i.jsx(En,{style:{fontSize:16,fontWeight:400,marginBottom:5,textAlign:"center"},children:`${t("common:LevelShort",{level:r})} ${t("common:SuperimpositionNShort",{superimposition:l})}`})]})}const LC=({customPortrait:e,parentW:t,onPortraitLoad:n})=>{const o=t/e.customImageParams.croppedAreaPixels.width;return i.jsx("div",{style:{position:"absolute"},children:i.jsx(Ao,{src:e.imageUrl,style:{position:"relative",left:`-${e.customImageParams.croppedAreaPixels.x*o}px`,top:`-${e.customImageParams.croppedAreaPixels.y*o}px`,width:`${e.originalDimensions.width*o}px`,height:`${e.originalDimensions.height*o}px`,objectFit:"cover"},callback:n})})},{Text:FC}=Ce,C0="https://api.imgur.com/3/image",T0="b6ed18a250f2835",y0={width:0,height:0},P0={x:0,y:0},I0=1,B0={croppedArea:{x:0,y:0,width:0,height:0},croppedAreaPixels:{x:0,y:0,width:0,height:0}},pr=1,gr=5,HC=({existingConfig:e,aspectRatio:t,open:n,setOpen:o,onOk:s,title:r=w.t("modals:EditImage.DefaultTitle"),width:l=400,defaultImageUrl:c})=>{const[d,u]=I.useState(0),[h]=N.useForm(),{t:p}=V("modals",{keyPrefix:"EditImage"}),{t:S}=V("common"),[D,E]=I.useState(!1),[y,P]=I.useState(""),[_,x]=I.useState(e?e.originalDimensions:y0),[G,M]=I.useState(e?e.cropper.crop:P0),[H,Z]=I.useState(e?e.cropper.zoom:I0),[X,W]=I.useState(e?e.customImageParams:B0),[L,A]=I.useState("upload"),O=I.useCallback(()=>{h.resetFields(),u(0),E(!1),P(""),x(y0),M(P0),Z(I0),W(B0)},[h]);I.useEffect(()=>{n?e&&(h.setFieldsValue({imageUrl:e.imageUrl,artistName:e.artistName}),A("upload"),u(1),P(e.imageUrl),x(e.originalDimensions)):O()},[c,n,e,h,O]);const j=(te,pe)=>{d==1&&W({croppedArea:te,croppedAreaPixels:pe})},ie=()=>{const te=h.getFieldValue("artistName"),pe={originalDimensions:_,customImageParams:X,cropper:{zoom:H,crop:G}};switch(L){case"upload":s({type:"add",config:{...pe,artistName:te,imageUrl:y}}),u(0);break;case"url":h.validateFields().then(ge=>{s({type:"add",config:{...pe,imageUrl:ge.imageUrl,artistName:te}})}).catch(ge=>{console.error("Error:",ge)}).finally(()=>{u(0)});break;case"default":c||console.error("defaultImageUrl does not exist, but default image was chosen."),s({type:"delete",config:{}}),o(!1),u(0);break;default:console.warn(`Unexpected radio value: ${L}`),o(!1),u(0)}};async function ee(te){if(!te.includes("http"))return!1;E(!0);const pe=new Image;return pe.src=te,new Promise(ge=>{E(!1),pe.onerror=()=>ge(!1),pe.onload=async()=>{const Le=await createImageBitmap(pe);x({width:Le.width,height:Le.height}),ge(!0)}})}async function me(te){return E(!0),new Promise(pe=>{const ge=new FileReader;ge.onerror=()=>{E(!1),pe(!1)},ge.onload=Le=>{var vt;const et=new Image;et.src=(vt=Le.target)==null?void 0:vt.result,et.onload=async()=>{x({width:et.width,height:et.height}),E(!1),pe(!0)},et.onerror=()=>{E(!1),pe(!1)}},ge.readAsDataURL(te)})}async function he(te){try{return(await fetch(te,{method:"HEAD",mode:"cors"})).ok}catch{return console.log("CORS blocked image fetch, uploading to imgur:",te),!1}}const De=async te=>{const pe=new FormData;pe.append("image",te);try{E(!0);const ge=await fetch(C0,{method:"POST",headers:{Authorization:`Client-ID ${T0}`},body:pe});if(!ge.ok){const et=await ge.json();throw E(!1),new Error(`Imgur API error: ${et.data.error}`)}const Le=await ge.json();if(Le.data.width&&Le.data.height&&x({width:Le.data.width,height:Le.data.height}),Le.success){const et=Le.data.link;P(et),u(d+1),E(!1)}else throw E(!1),new Error("Image url upload to Imgur failed but did not return a typical error response")}catch(ge){return E(!1),console.error("There was an error uploading the image to Imgur:",ge),null}},ae=async te=>{const pe=new FormData;pe.append("image",te);try{E(!0);const ge=await fetch(C0,{method:"POST",headers:{Authorization:`Client-ID ${T0}`},body:pe});if(!ge.ok){const et=await ge.json();throw E(!1),new Error(`Imgur API error: ${et.data.error}`)}const Le=await ge.json();if(Le.data.width&&Le.data.height&&x({width:Le.data.width,height:Le.data.height}),Le.success){const et=Le.data.link;return E(!1),et}else throw E(!1),new Error("Image file upload to Imgur failed but did not return a typical error response")}catch(ge){return console.error("There was an error uploading the image to Imgur:",ge),E(!1),null}},Q=async te=>{if(!await me(te))return console.error("File is not a valid image file"),!1;const pe=await ae(te);return pe?(P(pe),u(d+1),!1):(J.error("Image upload failed"),!1)},Oe=async te=>{if(!te){h.setFields([{name:"imageUrl",errors:["An image URL is required"]}]);return}if(E(!0),!await ee(te)){h.setFields([{name:"imageUrl",errors:["URL does not lead to an image"]}]),E(!1);return}if(await he(te))P(te),u(d+1);else{const pe=await De(te);pe?(P(pe),u(d+1)):h.setFields([{name:"imageUrl",errors:["Failed to process image, upload image instead."]}])}E(!1)},Ae=async()=>{if(d!==0){console.error(`Stage #${d} not implemented!`);return}switch(L){case"url":await Oe(h.getFieldValue("imageUrl"));break;case"default":s({type:"delete",config:{}}),o(!1);break;case null:default:console.warn("Radio select must be either 'upload' or 'url'");break}},Ze=()=>u(d-1),tt=te=>A(te.target.value),ue=[{title:"Provide image",content:i.jsxs(i.Fragment,{children:[i.jsx(g,{justify:"center",style:{marginBottom:16},children:i.jsxs(Ye.Group,{onChange:tt,value:L,buttonStyle:"solid",children:[i.jsx(Ye.Button,{value:"upload",children:p("Upload.Radio.Upload")}),i.jsx(Ye.Button,{value:"url",children:p("Upload.Radio.Url")}),c&&i.jsx(Ye.Button,{value:"default",children:p("Upload.Radio.Default")})]})}),L==="upload"&&i.jsx(i.Fragment,{children:i.jsx(nh,{name:"file",multiple:!1,accept:"image/png, image/jpeg, image/jpg, image/gif",beforeUpload:Q,disabled:D,showUploadList:!1,children:D?i.jsx(g,{style:{height:"300px"},justify:"center",align:"center",children:i.jsx(Gr,{size:"large"})}):i.jsxs(g,{style:{height:"300px"},justify:"center",align:"center",vertical:!0,children:[i.jsx("p",{className:"ant-upload-drag-icon",children:i.jsx(ih,{})}),i.jsx("p",{className:"ant-upload-text",children:p("Upload.Upload.Method")}),i.jsx("p",{className:"ant-upload-hint",children:p("Upload.Upload.Limit")})]})})}),L==="url"&&i.jsx(N.Item,{name:"imageUrl",label:p("Upload.Url.Label"),style:{margin:"0 20px"},rules:[{required:!0,message:p("Upload.Url.Rule")}],children:i.jsx(Kt,{autoComplete:"off"})}),L==="default"&&i.jsx(g,{justify:"center",style:{height:"400px"},children:i.jsx("img",{src:c})})]})},{title:"Crop image",content:i.jsxs(i.Fragment,{children:[i.jsx("div",{style:{height:"380px",position:"relative"},children:i.jsx(sh,{image:y,crop:G,zoom:H,aspect:t,onCropChange:M,onCropComplete:j,onMediaLoaded:()=>{e&&(M(e.cropper.crop),Z(e.cropper.zoom))},onZoomChange:te=>{navigator.maxTouchPoints===0?(te<H&&Z(Math.max(pr,H*.95)),te>H&&Z(Math.min(gr,H*1.05))):Z(te)},zoomSpeed:navigator.maxTouchPoints===0?1e-4:1,minZoom:pr,maxZoom:gr})}),i.jsxs(g,{style:{width:"100%",marginTop:4},gap:8,align:"center",children:[i.jsx("label",{style:{whiteSpace:"nowrap"},children:p("Edit.Zoom")}),i.jsx(Ro,{style:{width:"100%"},min:pr,max:gr,step:.1,tooltip:{formatter:null},onChange:Z,value:H})]}),i.jsxs(g,{style:{marginTop:0},children:[i.jsxs(g,{vertical:!0,style:{flex:1},children:[i.jsxs("div",{children:[i.jsx(oh,{style:{marginRight:8}}),p("Edit.Drag")]}),i.jsxs("div",{style:{flex:1,marginTop:8},children:[i.jsx(rh,{style:{marginRight:8}}),p("Edit.Pinch")]})]}),i.jsxs(g,{vertical:!0,style:{flex:1},children:[i.jsx(FC,{style:{flex:1,marginLeft:3},children:p("Edit.ArtBy")}),i.jsx(N.Item,{name:"artistName",children:i.jsx(Kt,{style:{flex:1,marginTop:3},placeholder:p("Edit.CreditPlaceholder"),autoComplete:"off"})})]})]})]})}];return i.jsx(N,{form:h,layout:"vertical",children:i.jsx(_t,{open:n,width:l,destroyOnClose:!0,centered:!0,maskClosable:!1,onOk:ie,onCancel:()=>o(!1),transitionName:"",footer:[i.jsx(g,{justify:"flex-end",children:i.jsxs(g,{style:{marginTop:16},justify:"center",align:"center",gap:8,children:[D&&L!=="upload"&&i.jsx(Gr,{style:{textAlign:"center"},size:"large"}),i.jsx(Y,{onClick:()=>o(!1),children:S("Cancel")}),d>0&&e&&i.jsx(Y,{onClick:Ze,danger:!0,children:p("Footer.Change")}),d>0&&!e&&i.jsx(Y,{onClick:Ze,children:p("Footer.Previous")}),d<ue.length-1&&i.jsx(Y,{type:"primary",onClick:Ae,disabled:L==="upload",children:p("Footer.Next")}),d===ue.length-1&&i.jsx(Y,{type:"primary",onClick:ie,children:S("Submit")})]})},1)],title:r,children:i.jsxs("div",{style:{height:"505px",position:"relative"},children:[!e&&i.jsx(qs,{current:d,style:{marginBottom:12},children:ue.map(te=>i.jsx(qs.Step,{title:te.title=="Provide image"?p("Upload.Title"):p("Edit.Title")},te.title))}),ue.map((te,pe)=>i.jsx("div",{style:{display:d===pe?"block":"none"},children:te.content},te.title))]})})})};function wC(e){const{t}=V(["charactersTab","modals","common"]),n=window.store(ie=>ie.globalThemeConfig),o=window.store(ie=>ie.savedSession.showcaseUID),s=window.store(ie=>ie.scorerId),r=e.source==Tt.SHOWCASE_TAB&&o,{source:l,character:c,displayDimensions:d,customPortrait:u,editPortraitModalOpen:h,setEditPortraitModalOpen:p,onEditPortraitOk:S,simScoringResult:D,artistName:E,setOriginalCharacterModalInitialCharacter:y,setOriginalCharacterModalOpen:P,setCharacterModalAdd:_,onPortraitLoad:x}=e,{tempLcParentW:G,tempLcParentH:M,tempLcInnerW:H,tempLcInnerH:Z,tempInnerW:X,tempParentH:W,newLcHeight:L,newLcMargin:A,lcCenter:O,charCenter:j}=d;return i.jsxs("div",{style:{width:`${Ua}px`,height:`${W}px`,position:"relative",overflow:"hidden",borderRadius:"8px",border:wi,boxShadow:Hi},children:[c.portrait??u?i.jsx(LC,{customPortrait:u??c.portrait,parentW:Ua,onPortraitLoad:x}):i.jsx(Ao,{src:k.getCharacterPortraitById(c.id),style:{position:"absolute",left:-j.x*j.z/2*X/1024+Ua/2,top:-j.y*j.z/2*X/1024+W/2,width:X*j.z},callback:x}),i.jsx(jn,{theme:n,children:i.jsxs(g,{vertical:!0,style:{width:"max-content",marginLeft:6,marginTop:6},gap:7,children:[l!=Tt.SHOWCASE_TAB&&i.jsx(Y,{style:ar,className:"character-build-portrait-button",icon:i.jsx(Us,{}),onClick:()=>{_(!1),y(c),P(!0)},type:"primary",children:t("CharacterPreview.EditCharacter")}),l==Tt.SHOWCASE_TAB&&i.jsx(Y,{style:ar,className:"character-build-portrait-button",icon:i.jsx(Us,{}),onClick:()=>{y(c),P(!0)},type:"primary",children:t("CharacterPreview.EditCharacter")}),i.jsx(Y,{style:ar,className:"character-build-portrait-button",icon:i.jsx(Us,{}),onClick:()=>p(!0),type:"primary",children:t("CharacterPreview.EditPortrait")})]})}),i.jsx(jn,{theme:n,children:i.jsx(HC,{title:t("CharacterPreview.EditPortrait"),aspectRatio:Ua/Ds,existingConfig:u??c.portrait,open:h,setOpen:p,onOk:S,defaultImageUrl:k.getCharacterPortraitById(c.id),width:500})}),i.jsxs(g,{vertical:!0,gap:3,style:{marginBottom:3,paddingLeft:3,position:"absolute",bottom:0},children:[i.jsx("span",{style:{display:r?"inline":"none",backgroundColor:"rgb(20 20 20 / 30%)",color:"rgb(255 255 255 / 80%)",padding:"4px 12px",borderRadius:8,border:qc,backdropFilter:Kr,fontSize:14,width:"fit-content",maxWidth:Ua-150,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",zIndex:2,textShadow:"0px 0px 10px black"},children:s}),i.jsx("span",{style:{display:E?"inline":"none",backgroundColor:"rgb(20 20 20 / 30%)",color:"rgb(255 255 255 / 80%)",padding:"4px 12px",borderRadius:8,border:qc,backdropFilter:Kr,fontSize:14,width:"fit-content",maxWidth:Ua-150,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",zIndex:2,textShadow:"0px 0px 10px black"},children:t("CharacterPreview.ArtBy",{artistName:E??""})})]})]})}function OC(e){const{setSelectedRelic:t,setEditModalOpen:n,setAddModalOpen:o,displayRelics:s,source:r,characterId:l,scoredRelics:c,showcaseColors:d}=e;return i.jsxs(g,{gap:$e,children:[i.jsxs(g,{vertical:!0,gap:$e,children:[i.jsx(Jt,{setEditModalOpen:n,setSelectedRelic:t,setAddModalOpen:o,relic:{...s.Head,part:m.Parts.Head},source:r,characterId:l,score:c.find(u=>u.part==m.Parts.Head),scoringType:e.scoringType,showcaseTheme:d}),i.jsx(Jt,{setEditModalOpen:n,setSelectedRelic:t,setAddModalOpen:o,relic:{...s.Body,part:m.Parts.Body},source:r,characterId:l,score:c.find(u=>u.part==m.Parts.Body),scoringType:e.scoringType,showcaseTheme:d}),i.jsx(Jt,{setEditModalOpen:n,setSelectedRelic:t,setAddModalOpen:o,relic:{...s.PlanarSphere,part:m.Parts.PlanarSphere},source:r,characterId:l,score:c.find(u=>u.part==m.Parts.PlanarSphere),scoringType:e.scoringType,showcaseTheme:d})]}),i.jsxs(g,{vertical:!0,gap:$e,children:[i.jsx(Jt,{setEditModalOpen:n,setSelectedRelic:t,setAddModalOpen:o,relic:{...s.Hands,part:m.Parts.Hands},source:r,characterId:l,score:c.find(u=>u.part==m.Parts.Hands),scoringType:e.scoringType,showcaseTheme:d}),i.jsx(Jt,{setEditModalOpen:n,setSelectedRelic:t,setAddModalOpen:o,relic:{...s.Feet,part:m.Parts.Feet},source:r,characterId:l,score:c.find(u=>u.part==m.Parts.Feet),scoringType:e.scoringType,showcaseTheme:d}),i.jsx(Jt,{setEditModalOpen:n,setSelectedRelic:t,setAddModalOpen:o,relic:{...s.LinkRope,part:m.Parts.LinkRope},source:r,characterId:l,score:c.find(u=>u.part==m.Parts.LinkRope),scoringType:e.scoringType,showcaseTheme:d})]})]})}function kC(e){const{t}=V(["charactersTab","modals","common"]),{scoringResults:n}=e;return i.jsx(g,{vertical:!0,children:i.jsx(En,{style:{fontSize:17,fontWeight:600,letterSpacing:-.2,textAlign:"center",color:"#e1a564"},children:t("CharacterPreview.CharacterScore",{score:n.totalScore.toFixed(0),grade:n.totalScore==0?"":n.totalRating})})})}function KC(e){const{characterId:t}=e;return!t||!ql[t]?i.jsx(i.Fragment,{}):i.jsx(jn,{theme:{components:{Alert:{colorInfo:"#4bc65d",colorInfoBg:"#1f3464",colorInfoBorder:"#334d8a"}}},children:i.jsx(lh,{message:ql[t],type:"info",showIcon:!0,style:{marginTop:10}})})}const{useToken:jC}=Ft;function Ln(e){return i.jsx(Ye.Button,{value:e.value,style:{height:35,width:50,paddingLeft:10},children:i.jsx(J0,{preview:!1,width:30,src:e.src})})}Ln.propTypes={value:Yt.string,src:Yt.string};Lt($t)`
    width: 90px
`;function G0(e){var o,s;const t=(o=e.main)==null?void 0:o.stat,n=(s=e.main)==null?void 0:s.value;return t?gm(t,n):{}}function on(e,t){const n=e.substats[t];if(!(n!=null&&n.stat))return{};const o=n.stat,s=n.value;return gm(o,s,e)}function gm(e,t,n){return e==a.SPD?n!=null&&n.verified?{stat:e,value:t.toFixed(1)}:{stat:e,value:t%1!==0?t.toFixed(1):Math.floor(t)}:F.isFlat(e)?{stat:e,value:Math.floor(t)}:{stat:e,value:F.precisionRound(Math.floor(t*10)/10).toFixed(1)}}function Rs(e){var M,H,Z,X,W;const{t}=V(["modals","common","gameData"]),{token:n}=jC(),[o]=N.useForm(),[s,r]=I.useState([]),l=window.store(L=>L.characters),c=I.useMemo(()=>Il({currentCharacters:l,longNameLabel:!0}),[l,w.resolvedLanguage]),d=I.useMemo(function(){const A=[];for(const O of[...Object.entries(m.SetsRelics),...Object.entries(m.SetsOrnaments)].filter(j=>!Gi[j[1]]))A.push({label:i.jsxs(g,{align:"center",gap:10,children:[i.jsx("img",{style:{height:22,width:22},src:k.getSetImage(O[1])}),w.t(`gameData:RelicSets.${rt[O[1]]}.Name`)]}),value:O[1]});return A},[w.resolvedLanguage]),u=N.useWatch("equippedBy",o),[h,p]=I.useState([]);I.useEffect(()=>{let L={grade:5,enhance:15,part:m.Parts.Head,mainStatType:m.Stats.HP,mainStatValue:Math.floor(m.MainStatsValues[m.Stats.HP][5].base+m.MainStatsValues[m.Stats.HP][5].increment*15)};const A=e.selectedRelic;!A||e.type!="edit"||(L={equippedBy:A.equippedBy??"None",grade:A.grade,enhance:A.enhance,set:A.set,part:A.part,mainStatType:G0(A).stat,mainStatValue:G0(A).value,substatType0:on(A,0).stat,substatValue0:on(A,0).value,substatType1:on(A,1).stat,substatValue1:on(A,1).value,substatType2:on(A,2).stat,substatValue2:on(A,2).value,substatType3:on(A,3).stat,substatValue3:on(A,3).value}),E(L),o.setFieldsValue(L)},[e.selectedRelic,e.open,o,e]),I.useEffect(()=>{var A,O,j,ie;let L=[];(A=e.selectedRelic)!=null&&A.part&&(L=Object.entries(m.PartsMainStats[(O=e.selectedRelic)==null?void 0:O.part]).map(ee=>({label:i.jsxs(g,{align:"center",gap:10,children:[i.jsx("img",{src:k.getStatIcon(ee[1],!0),style:{width:22,height:22}}),t(`common:Stats.${ee[1]}`)]}),value:ee[1]}))),r(L),o.setFieldValue("mainStatType",(ie=(j=e.selectedRelic)==null?void 0:j.main)==null?void 0:ie.stat)},[(M=e.selectedRelic)==null?void 0:M.part,(Z=(H=e.selectedRelic)==null?void 0:H.main)==null?void 0:Z.stat,o,t]),I.useEffect(()=>{var L,A,O,j;s.length>0&&(s.map(ee=>ee.value).includes((A=(L=e.selectedRelic)==null?void 0:L.main)==null?void 0:A.stat)?o.setFieldValue("mainStatType",(j=(O=e.selectedRelic)==null?void 0:O.main)==null?void 0:j.stat):o.setFieldValue("mainStatType",s[0].value)),y()},[o,s,(W=(X=e.selectedRelic)==null?void 0:X.main)==null?void 0:W.stat]);const S=L=>{const A=CR(L);A&&(WC(e.selectedRelic,A)&&(A.verified=!1),console.log(t("Relic.Messages.EditSuccess"),A),e.onOk(A),e.setOpen(!1))},D=()=>{J.error(t("Relic.Messages.SubmitFail")),e.setOpen(!1)},E=L=>{var ee,me;let A=[];L.part&&(A=Object.entries(m.PartsMainStats[L.part]).map(he=>({label:i.jsxs(g,{align:"center",gap:10,children:[i.jsx("img",{src:k.getStatIcon(he[1],!0),style:{width:22,height:22}}),t(`common:Stats.${he[1]}`)]}),value:he[1]})),r(A),o.setFieldValue("mainStatType",(ee=A[0])==null?void 0:ee.value));const O=((me=A[0])==null?void 0:me.value)||o.getFieldValue("mainStatType"),j=o.getFieldValue("enhance"),ie=o.getFieldValue("grade");if(O!=null&&j!=null&&ie!=null){const he=[m.Stats.OHB,m.Stats.Physical_DMG,m.Stats.Physical_DMG,m.Stats.Fire_DMG,m.Stats.Ice_DMG,m.Stats.Lightning_DMG,m.Stats.Wind_DMG,m.Stats.Quantum_DMG,m.Stats.Imaginary_DMG],De=[m.Stats.HP,m.Stats.ATK,m.Stats.SPD];let ae=C.calculateRelicMainStatValue(O,ie,j);he.includes(O)?ae=F.truncate10ths(ae):De.includes(O)?ae=Math.floor(ae):ae=ae.toFixed(1),o.setFieldValue("mainStatValue",ae)}};function y(){const L=TR(o.getFieldsValue());p(L)}const P=()=>{e.setOpen(!1)},_=()=>{o.submit()},x=()=>{o.setFieldValue("enhance",Math.floor(Math.min(o.getFieldValue("enhance")+3,15)/3)*3)},G=I.useMemo(()=>{const L=[];for(let A=15;A>=0;A--)L.push({value:A,label:"+"+A});return L},[]);return i.jsx(N,{form:o,layout:"vertical",preserve:!1,onFinish:S,onFinishFailed:D,onValuesChange:E,children:i.jsx(_t,{width:560,centered:!0,destroyOnClose:!0,open:e.open,onCancel:()=>e.setOpen(!1),footer:[i.jsx(Y,{onClick:P,children:t("common:Cancel")},"back"),i.jsx(Y,{type:"primary",onClick:_,children:t("common:Submit")},"submit")],children:i.jsxs(g,{vertical:!0,gap:5,children:[i.jsxs(g,{gap:10,children:[i.jsxs(g,{vertical:!0,gap:5,children:[i.jsx($,{children:t("Relic.Part")}),i.jsx(N.Item,{name:"part",children:i.jsxs(Ye.Group,{buttonStyle:"solid",children:[i.jsx(Ln,{value:m.Parts.Head,src:k.getPart(m.Parts.Head)}),i.jsx(Ln,{value:m.Parts.Hands,src:k.getPart(m.Parts.Hands)}),i.jsx(Ln,{value:m.Parts.Body,src:k.getPart(m.Parts.Body)}),i.jsx(Ln,{value:m.Parts.Feet,src:k.getPart(m.Parts.Feet)}),i.jsx(Ln,{value:m.Parts.PlanarSphere,src:k.getPart(m.Parts.PlanarSphere)}),i.jsx(Ln,{value:m.Parts.LinkRope,src:k.getPart(m.Parts.LinkRope)})]})}),i.jsx($,{children:t("Relic.Set")}),i.jsx(N.Item,{name:"set",children:i.jsx(z,{showSearch:!0,allowClear:!0,style:{width:300},placeholder:t("Relic.Set"),options:d,maxTagCount:"responsive"})}),i.jsx($,{children:t("Relic.Enhance")}),i.jsxs(g,{gap:10,children:[i.jsx(N.Item,{name:"enhance",children:i.jsx(z,{showSearch:!0,style:{width:115},options:G})}),i.jsx(Y,{style:{width:50},onClick:x,children:"+3"}),i.jsx(N.Item,{name:"grade",children:i.jsx(z,{showSearch:!0,style:{width:115},options:[{value:2,label:"2 ★"},{value:3,label:"3 ★"},{value:4,label:"4 ★"},{value:5,label:"5 ★"}],onChange:y})})]}),i.jsx($,{children:t("Relic.Mainstat")}),i.jsxs(g,{gap:10,children:[i.jsx(N.Item,{name:"mainStatType",children:i.jsx(z,{showSearch:!0,style:{width:210},maxTagCount:"responsive",options:s,disabled:s.length<=1})}),i.jsx(N.Item,{name:"mainStatValue",children:i.jsx($t,{controls:!1,disabled:!0,style:{width:80}})})]})]}),i.jsx("div",{style:{display:"block",minWidth:12}}),i.jsxs(g,{vertical:!0,gap:5,style:{},children:[i.jsx($,{children:t("Relic.Wearer")}),i.jsx(N.Item,{name:"equippedBy",children:i.jsx(z,{showSearch:!0,filterOption:F.titleFilterOption,style:{height:35},options:c,optionLabelProp:"title"})}),i.jsx("div",{style:{height:180,overflow:"hidden",marginTop:7,borderRadius:10,boxShadow:`0px 0px 0px 1px ${n.colorBorder} inset`},children:i.jsx("img",{style:{width:"100%"},src:k.getCharacterPreviewById(u=="None"?"":u)})})]})]}),i.jsx(g,{gap:20,children:i.jsxs(g,{vertical:!0,gap:5,style:{width:"100%"},children:[i.jsxs(g,{justify:"space-between",children:[i.jsx($,{children:t("Relic.Substat")}),i.jsx(g,{style:{width:180},children:i.jsx($,{children:t("Relic.Upgrades")})})]}),i.jsx(Ns,{index:0,upgrades:h,relicForm:o,resetUpgradeValues:y,plusThree:x}),i.jsx(Ns,{index:1,upgrades:h,relicForm:o,resetUpgradeValues:y,plusThree:x}),i.jsx(Ns,{index:2,upgrades:h,relicForm:o,resetUpgradeValues:y,plusThree:x}),i.jsx(Ns,{index:3,upgrades:h,relicForm:o,resetUpgradeValues:y,plusThree:x})]})})]})})})}function Ns(e){const t=I.useRef(null),[n,o]=Et.useState(!1),s=`substatType${e.index}`,r=`substatValue${e.index}`,{t:l}=V("modals",{keyPrefix:"Relic"}),c=()=>{t.current&&t.current.select()};function d(p){console.log(e,p),e.relicForm.setFieldValue(r,e.upgrades[e.index][p]),e.resetUpgradeValues(),e.plusThree()}const u=I.useMemo(()=>{const p=[];for(const S of Object.entries(m.SubStats))p.push({label:i.jsxs(g,{align:"center",gap:10,children:[i.jsx("img",{style:{width:22,height:22},src:k.getStatIcon(S[1],!0)}),w.t(`common:Stats.${S[1]}`)]}),value:S[1]});return p},[w.resolvedLanguage]);function h(p){var D,E;const S=(E=(D=e.upgrades)==null?void 0:D[e.index])==null?void 0:E[p.quality];return i.jsx(g,{style:{width:"100%"},children:i.jsx(Y,{type:n?"default":"dashed",style:{width:"100%",padding:0},onClick:()=>d(p.quality),disabled:S==null,tabIndex:-1,children:S||""})})}return i.jsxs(g,{gap:10,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:[i.jsxs(g,{gap:10,children:[i.jsx(N.Item,{name:s,children:i.jsx(z,{showSearch:!0,allowClear:!0,style:{width:210},placeholder:l("SubstatPlaceholder"),maxTagCount:"responsive",options:u,listHeight:750,onChange:()=>{e.relicForm.getFieldValue(s)?e.relicForm.setFieldValue(r,0):e.relicForm.setFieldValue(r,void 0),e.resetUpgradeValues()},tabIndex:0})}),i.jsx(N.Item,{name:`substatValue${e.index}`,children:i.jsx(Kt,{ref:t,onFocus:c,style:{width:80},onChange:e.resetUpgradeValues,tabIndex:0})})]}),i.jsx(ch,{style:{width:12}}),i.jsxs(g,{gap:5,style:{width:"100%"},children:[i.jsx(h,{quality:"low"}),i.jsx(h,{quality:"mid"}),i.jsx(h,{quality:"high"})]})]})}function M0(e){var t;return C.objectHash({grade:e.grade,enhance:e.enhance,part:e.part,set:e.set,mainStatType:(t=e.main)==null?void 0:t.stat,substats:e.substats.map(n=>({stat:n.stat,value:F.truncate1000ths(C.precisionRound(n.value))}))})}function WC(e,t){if(!e||!t)return!0;const n=M0(e),o=M0(t);return n!=o}const{useToken:ZC}=Ft;window.Vibrant=fd;function Kl(e){var ai;const{source:t,character:n,setOriginalCharacterModalOpen:o,setOriginalCharacterModalInitialCharacter:s,setCharacterModalAdd:r}=e,{token:l}=ZC(),[c,d]=I.useState(),[u,h]=I.useState(!1),[p,S]=I.useState(!1),[D,E]=I.useState(!1),[y,P]=I.useState(),[_,x]=I.useState({}),[G,M]=I.useState(Mi),[H,Z]=I.useState(il),X=I.useRef(),W=I.useRef(ho),L=window.store(Fe=>Fe.relicsById),[A,O]=I.useState(0),j=window.store(Fe=>Fe.showcasePreferences),ie=I.useRef(null),[ee,me]=I.useState(ho),[he,De]=I.useState(window.store.getState().savedSession[Ne.showcaseStandardMode]?St.STANDARD:St.AUTO),ae=window.store(Fe=>Fe.activeKey),Q=window.store(Fe=>Fe.savedSession.showcaseDarkMode);window.store(Fe=>{var Dt;return(Dt=Fe.scoringMetadataOverrides[n==null?void 0:n.id])==null?void 0:Dt.stats[a.SPD]}),window.store(Fe=>{var Dt;return(Dt=Fe.scoringMetadataOverrides[n==null?void 0:n.id])==null?void 0:Dt.traces}),window.store(Fe=>{var Dt,en;return(en=(Dt=Fe.scoringMetadataOverrides[n==null?void 0:n.id])==null?void 0:Dt.simulation)==null?void 0:en.deprioritizeBuffs});const Oe=window.store(Fe=>Fe.showcaseTemporaryOptions);if(!n||ae!=de.CHARACTERS&&ae!=de.SHOWCASE)return i.jsx("div",{style:{height:Ds,width:1068,borderRadius:8,backgroundColor:l.colorBgLayout,border:`1px solid ${l.colorBgContainer}`}});console.log("======================================================================= RENDER CharacterPreview",t);function Ae(Fe){x({..._,...Fe})}const{scoringResults:Ze,displayRelics:tt}=ZR(t,n,L),ue=Ze.relics||[],te=$R(n),pe=QR(n,X,_),ge=UR(n,tt,G,pe,te,Oe),Le=((ai=B.getCharacterById(n==null?void 0:n.id))==null?void 0:ai.portrait)??void 0,et=(Le==null?void 0:Le.imageUrl)??k.getCharacterPortraitById(n.id),vt=yC(n.id,et,he),Zt=he==St.STANDARD?EC():j[n.id]??CC(vt),Da=TC(he,j,n),q=Le?fo[et]?Da==St.AUTO?vt:Zt.color??vt:W.current:Da==St.AUTO?vt:Zt.color??vt;W.current=q;const ze={algorithm:Ft.darkAlgorithm,token:{colorBgLayout:q,colorPrimary:q},components:{Segmented:{trackBg:NE(),itemSelectedBg:ZE(q,Q)}}},re=dh(ze),at={cardBackgroundColor:KE(re.colorPrimaryActive,Q),cardBorderColor:jE(re.colorPrimaryActive,Q)},Nt=VR(n,!!ge),ti=NR(n),Pn=zR(n,tt,te);return i.jsxs(g,{vertical:!0,style:{width:1068},children:[i.jsx(Rs,{selectedRelic:c,type:"edit",onOk:Fe=>XR(Fe,c,d),setOpen:h,open:u}),i.jsx(Rs,{selectedRelic:c,type:"edit",onOk:Fe=>YR(Fe,d),setOpen:S,open:p}),i.jsx(fm,{ref:ie,source:t,id:e.id,characterId:n.id,simScoringResult:ge,token:re,showcasePreferences:Zt,setOverrideTheme:()=>{},scoringType:G,seedColor:q,setSeedColor:me,colorMode:Da,setColorMode:De}),i.jsx(jn,{theme:ze,children:i.jsxs(g,{id:e.id,className:"characterPreview",style:{position:"relative",display:n?"flex":"none",height:Ds,background:WE(l.colorBgLayout,Q),backgroundBlendMode:"screen",overflow:"hidden",borderRadius:7,transition:Nr()},gap:$e,children:[i.jsx("div",{style:{backgroundImage:`url(${et})`,backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"150%",position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:0,filter:`blur(20px) brightness(${Q?.5:.7}) saturate(${.8})`,WebkitFilter:`blur(20px) brightness(${Q?.5:.7}) saturate(${.8})`}}),t!=Tt.BUILDS_MODAL&&i.jsxs(g,{vertical:!0,gap:8,className:"character-build-portrait",children:[i.jsx(wC,{source:t,character:n,displayDimensions:Nt,customPortrait:Le,editPortraitModalOpen:D,setEditPortraitModalOpen:E,onEditPortraitOk:Fe=>JR(n,Fe,P,E),simScoringResult:ge,artistName:ti,setOriginalCharacterModalInitialCharacter:s,setOriginalCharacterModalOpen:o,setCharacterModalAdd:r,onPortraitLoad:Fe=>{var Dt;return(Dt=ie.current)==null?void 0:Dt.onPortraitLoad(Fe,n.id)}}),ge&&i.jsx(vC,{source:t,character:n,showcaseMetadata:te,displayDimensions:Nt,setOriginalCharacterModalInitialCharacter:s,setOriginalCharacterModalOpen:o,setCharacterModalAdd:r})]}),i.jsxs(g,{vertical:!0,justify:"space-between",gap:8,style:{},children:[i.jsxs(g,{vertical:!0,style:{width:VS,height:"100%",borderRadius:8,zIndex:10,backgroundColor:at.cardBackgroundColor,transition:Nr(),flex:1,paddingRight:2,paddingLeft:2,paddingBottom:3,boxShadow:Hi+ju,border:`1px solid ${at.cardBorderColor}`},justify:"space-between",children:[i.jsx(uC,{showcaseMetadata:te,scoringType:G}),i.jsx(Zr,{characterId:n.id,finalStats:Pn,elementalDmgValue:te.elementalDmgType,scoringType:G,simScore:ge?ge.originalSimResult.simScore:void 0}),ge&&i.jsxs(i.Fragment,{children:[i.jsx(BC,{result:ge,relics:tt}),i.jsx(PC,{characterId:te.characterId,token:re,simScoringResult:ge,teamSelection:pe,combatScoreDetails:H,displayRelics:tt,setTeamSelectionByCharacter:Ae,setRedrawTeammates:O}),i.jsx(IC,{combatScoreDetails:H,simScoringResult:ge})]}),!ge&&i.jsxs(i.Fragment,{children:[G!=Ya&&i.jsx(kC,{scoringResults:Ze}),i.jsx(AC,{showcaseMetadata:te})]})]}),!ge&&i.jsx(i.Fragment,{children:i.jsx(_C,{source:t,character:n,showcaseMetadata:te,displayDimensions:Nt,setOriginalCharacterModalInitialCharacter:s,setOriginalCharacterModalOpen:o,setCharacterModalAdd:r})})]}),i.jsx(OC,{setSelectedRelic:d,setEditModalOpen:h,setAddModalOpen:S,displayRelics:tt,source:t,scoringType:G,characterId:te.characterId,scoredRelics:ue,showcaseColors:at})]})}),i.jsx(KC,{characterId:te.characterId}),t!=Tt.BUILDS_MODAL&&i.jsx(rC,{token:l,simScoringResult:ge,combatScoreDetails:H,showcaseMetadata:te,scoringType:G,displayRelics:tt,setScoringType:M,setCombatScoreDetails:Z})]})}const NC="ArrowLeft",VC="ArrowUp",zC="ArrowRight",UC="ArrowDown",jl=(e,t,n)=>{const o=e.previousCellPosition;let s,r,l;function c(d){return d>=r||d<=-1?null:(l=t.current.api.getDisplayedRowAtIndex(d),t.current.api.setNodesSelected({nodes:[l],newValue:!0}),n(l),{rowIndex:d,column:o.column,rowPinned:o.rowPinned})}switch(e.key){case VC:return s=o.rowIndex-1,c(s);case UC:return s=o.rowIndex+1,r=e.api.getDisplayedRowCount(),c(s);case NC:case zC:default:return null}},XC=({open:e,setOpen:t,selectedCharacter:n})=>{var _,x;const{t:o}=V(["modals","gameData","common"]),[s,r]=_t.useModal(),[l,c]=I.useState(null),d=o(`gameData:Characters.${n==null?void 0:n.id}.Name`);I.useEffect(()=>{var G;e&&((G=n==null?void 0:n.builds)!=null&&G.length)&&(c(0),p(n.builds))},[e,n]);const u=I.useMemo(()=>{var G;if(l!=null&&((G=n==null?void 0:n.builds)!=null&&G[l].build)){const M=window.store.getState().relicsById,H=Object.values(n.builds[l].build).map(W=>M[W]),Z={};H.filter(W=>!!W).map(W=>Z[W.part]=W);const X=JSON.parse(JSON.stringify(n));return X.equipped=Z,console.log("Previewing builds character:",X),i.jsx(Kl,{character:X,source:Tt.BUILDS_MODAL,id:"relicScorerPreview"})}return i.jsx("div",{style:{width:656,height:856,border:"1px solid #354b7d"}})},[l,n]);if(!((_=n==null?void 0:n.builds)!=null&&_.length))return i.jsxs(_t,{open:e,width:300,destroyOnClose:!0,onOk:()=>t(!1),onCancel:()=>t(!1),centered:!0,okText:o("common:Ok"),cancelText:o("common:Cancel"),children:[o("Builds.NoBuilds.NoneSaved"),r]});async function h(G){return s.confirm({title:o("common:Confirm"),icon:i.jsx(gd,{}),content:G,okText:o("common:Confirm"),cancelText:o("common:Cancel"),centered:!0})}function p(G){for(const M of G){const H=window.store.getState().relicsById,Z=Object.values(M.build).map(W=>H[W]),X=dt.scoreCharacterWithRelics(n,Z);M.score={score:Math.round(X.totalScore??0),rating:X.totalRating??"N/A"}}}function S(){t(!1)}const D=()=>{c(null),t(!1)},E=async()=>{await h(o("Builds.ConfirmDelete.DeleteAll"))&&(c(null),B.clearCharacterBuilds(n==null?void 0:n.id),window.forceCharacterTabUpdate(),Ee.delayedSave(),J.success(o("Builds.ConfirmDelete.SuccessMessageAll",{characterName:d})),t(!1))},y=async G=>{await h(o("Builds.ConfirmDelete.DeleteSingle",{name:G}))&&(c(null),B.deleteCharacterBuild(n==null?void 0:n.id,G),window.forceCharacterTabUpdate(),Ee.delayedSave(),J.success(o("Builds.ConfirmDelete.SuccessMessageSingle",{name:G})),(n==null?void 0:n.Builds.length)==0&&t(!1))},P=async G=>{await h(o("Builds.ConfirmEquip.Content"))&&(B.equipRelicIdsToCharacter(Object.values(G.build),n==null?void 0:n.id),window.forceCharacterTabUpdate(),Ee.delayedSave(),J.success(o("Builds.ConfirmEquip.SuccessMessage",{buildName:G.name})),D())};return i.jsx(_t,{open:e,width:1115,destroyOnClose:!0,centered:!0,onOk:S,onCancel:D,footer:[i.jsx(Y,{onClick:()=>E(),children:o("Builds.DeleteAll")},"delete"),i.jsx(Y,{onClick:D,children:o("common:Cancel")},"back")],children:i.jsxs(g,{gap:10,children:[n&&i.jsx(i.Fragment,{children:i.jsx(g,{vertical:!0,style:{overflowY:"auto",marginBottom:20,minWidth:400,maxWidth:400,height:840},gap:8,children:(x=n.builds)==null?void 0:x.map((G,M)=>i.jsx(Yn,{style:{backgroundColor:l===M?"#001529":void 0,cursor:"pointer"},onClick:H=>{H.target.closest("button")!==null||c(M)},hoverable:!0,children:i.jsxs(g,{justify:"space-between",gap:8,align:"center",children:[i.jsx(g,{vertical:!0,align:"flex-start",children:i.jsx($,{style:{flex:1,fontSize:16,fontWeight:600},children:G.name})}),i.jsxs(g,{gap:5,children:[i.jsx(Y,{onClick:()=>{P(G)},children:o("Builds.Equip")}),i.jsx(Y,{style:{width:35},type:"primary",icon:i.jsx(Jr,{}),onClick:()=>{y(G.name)}})]})]})},M))})}),r,u]})})},YC=({open:e,setOpen:t,onOk:n})=>{const[o]=N.useForm(),{t:s}=V("modals",{keyPrefix:"SaveBuild"}),{t:r}=V("common");function l(){const u=o.getFieldsValue();n(u.name)}const c=()=>{t(!1)};return i.jsx(_t,{open:e,width:350,destroyOnClose:!0,centered:!0,onOk:l,onCancel:c,footer:[i.jsx(Y,{onClick:c,children:r("Cancel")},"back"),i.jsx(Y,{type:"primary",onClick:l,children:r("Save")},"submit")],children:i.jsx(N,{form:o,preserve:!1,layout:"vertical",children:i.jsx(N.Item,{name:"name",label:s("Label"),rules:[{required:!0,message:s("Rule")}],style:{width:300},children:i.jsx(Kt,{})})})})};function JC(e){const{onOk:t,open:n,setOpen:o,currentCharacter:s}=e,[r]=N.useForm(),l=window.store(D=>D.characters),{t:c}=V("modals",{keyPrefix:"SwitchRelics"}),{t:d}=V("common"),u=I.useMemo(()=>Il({currentCharacters:l,excludeCharacters:[s],withNobodyOption:!1,longNameLabel:!0,longNameTitle:!0}),[l,s,c]);I.useEffect(()=>{n&&r.setFieldsValue({characterId:null})},[r,n]);function h(){const{selectedCharacter:D}=r.getFieldsValue();console.log("Switch relics modal submitted with:",D),t(D),o(!1)}const p=()=>{o(!1)},S=278;return i.jsx(_t,{open:n,width:S+47,destroyOnClose:!0,centered:!0,onOk:h,onCancel:p,footer:[i.jsx(Y,{onClick:p,children:d("Cancel")},"back"),i.jsx(Y,{type:"primary",onClick:h,children:d("Save")},"submit")],children:i.jsxs(N,{form:r,preserve:!1,layout:"vertical",children:[i.jsx(g,{justify:"space-between",align:"center",children:i.jsx($,{children:c("Title")})}),i.jsx(g,{vertical:!0,gap:$e,children:i.jsx(g,{gap:$e,children:i.jsx(N.Item,{name:"selectedCharacter",children:i.jsx(z,{labelInValue:!0,showSearch:!0,filterOption:F.titleFilterOption,style:{width:S},options:u})})})})]})})}const{Text:Sm}=Ce;function QC(e){const{t}=V(["charactersTab","common","gameData"]),[n,o]=Et.useState(B.getCharacters());window.setCharacterRows=o;const s=I.useMemo(()=>({rowHeight:46,rowDragManaged:!0,animateRows:!0,suppressDragLeaveHidesColumns:!0,suppressScrollOnNewData:!0}),[]),r=I.useMemo(()=>[{field:"",headerName:t("GridHeaders.Icon"),cellRenderer:bm,width:52},{field:"",headerName:t("GridHeaders.Priority"),cellRenderer:$C,width:60,rowDrag:!0},{field:"",headerName:t("GridHeaders.Character"),flex:1,cellRenderer:qC}],[t]),l=I.useMemo(()=>({sortable:!1,cellStyle:{display:"flex"}}),[]);return i.jsx(el,{ref:e.characterGrid,rowData:n,gridOptions:s,getRowNodeId:c=>c.id,columnDefs:r,defaultColDef:l,deltaRowDataMode:!0,headerHeight:24,onCellClicked:e.cellClickedListener,onCellDoubleClicked:e.cellDoubleClickedListener,onRowDragEnd:e.onRowDragEnd,onRowDragLeave:e.onRowDragLeave,navigateToNextCell:e.navigateToNextCell,isExternalFilterPresent:e.isExternalFilterPresent,doesExternalFilterPass:e.doesExternalFilterPass,rowSelection:"single"})}function $C(e){const t=e.data,n=B.getCharacters().find(o=>o.id==t.id);return i.jsx(Sm,{style:{height:"100%"},children:n.rank+1})}function qC(e){const t=w.getFixedT(null,"gameData","Characters"),n=e.data,o=t(`${n.id}.LongName`),r=(o.includes(" (")?o.split(" (").map(d=>d.trim()).map((d,u)=>u===1?` (${d} `:d):o.split(/ - |•/).map(d=>d.trim())).map((d,u)=>i.jsx("span",{style:{display:"inline-block"},children:d},u)),l=n.equipped?Object.values(n.equipped).filter(d=>d!=null).length:0;let c="#81d47e";return l<6&&(c="rgb(229, 135, 66)"),l<1&&(c="#d72f2f"),i.jsxs(g,{align:"center",justify:"flex-start",style:{height:"100%",width:"100%"},children:[i.jsx(Sm,{style:{margin:"auto",padding:"0px 5px",textAlign:"center",overflow:"hidden",whiteSpace:"break-spaces",textWrap:"wrap",fontSize:14,width:"100%",lineHeight:"18px"},children:r}),i.jsx(g,{style:{display:"block",width:3,height:"100%",backgroundColor:c,zIndex:2}})]})}function bm(e){const t=e.data,n=k.getCharacterAvatarById(t.id);return i.jsx("img",{src:n,style:{flex:"0 0 auto",maxWidth:"100%",width:48}})}const{useToken:eT}=Ft,tT={path:[],element:[]};function aT(){const{token:e}=eT(),[t,n]=_t.useModal();I.useState(!1),I.useState(!1);const[o,s]=I.useState(!1),[r,l]=I.useState(!1),[c,d]=I.useState(!1),[u,h]=I.useState(!1),[p,S]=I.useState(!1),[D,E]=I.useState(),y=I.useRef(""),[P,_]=I.useState(tT),{t:x}=V(["charactersTab","common","gameData"]);console.log("======================================================================= RENDER CharacterTab");const G=I.useRef();window.characterGrid=G;const M=window.store(q=>q.characterTabFocusCharacter),H=window.store(q=>q.setCharacterTabFocusCharacter),Z=window.store(q=>q.setScoringAlgorithmFocusCharacter),X=window.store.getState().charactersById[M],[,W]=Et.useReducer(q=>!q);window.forceCharacterTabUpdate=()=>{var q,ze;console.log("__________ CharacterTab forceCharacterTabUpdate"),W(),(ze=(q=G==null?void 0:G.current)==null?void 0:q.api)!=null&&ze.redrawRows?G.current.api.redrawRows():console.log("@forceCharacterTabUpdate: No characterGrid.current.api")};const L=[{key:"character group",type:"group",label:x("CharacterMenu.Character.Label"),children:[{label:x("CharacterMenu.Character.Options.Add"),key:"add"},{label:x("CharacterMenu.Character.Options.Edit"),key:"edit"},{label:x("CharacterMenu.Character.Options.Switch"),key:"switchRelics"},{label:x("CharacterMenu.Character.Options.Unequip"),key:"unequip"},{label:x("CharacterMenu.Character.Options.Delete"),key:"delete"}]},{key:"builds group",type:"group",label:x("CharacterMenu.Build.Label"),children:[{label:x("CharacterMenu.Build.Options.Save"),key:"saveBuild"},{label:x("CharacterMenu.Build.Options.View"),key:"viewBuilds"}]},{key:"scoring group",type:"group",label:x("CharacterMenu.Scoring.Label"),children:[{label:x("CharacterMenu.Scoring.Options.ScoringModal"),key:"scoring"}]},{key:"priority group",type:"group",label:x("CharacterMenu.Priority.Label"),children:[{label:x("CharacterMenu.Priority.Options.SortByScore"),key:"sortByScore"},{label:x("CharacterMenu.Priority.Options.MoveToTop"),key:"moveToTop"}]}],A=I.useCallback(()=>{G.current.api.onFilterChanged()},[]),O=I.useCallback(q=>{const ze=B.getMetadata().characters[q.data.id];return P.element.length&&!P.element.includes(ze.element)||P.path.length&&!P.path.includes(ze.path)?!1:x(`gameData:Characters.${q.data.id}.LongName`).toLowerCase().includes(y.current)},[P]),j=I.useCallback(()=>P.element.length+P.path.length+y.current.length>0,[P]),ie=I.useCallback(q=>{const ze=q.data;H(ze.id),console.log(`@CharacterTab::setCharacterTabFocusCharacter - [${ze.id}]`,q.data)},[H]),ee=window.store(q=>q.setActiveKey),me=I.useCallback(q=>{ee(de.OPTIMIZER),se.setCharacter(q.data.id),console.log(`@CharacterTab.cellDoubleClickedListener::setOptimizerTabFocusCharacter - focus [${q.data.id}]`,q.data)},[]),he=I.useCallback(q=>jl(q,G,ze=>ie(ze)),[]);function De(q,ze){const re=q.node.data;B.insertCharacter(re.id,ze),Ee.delayedSave(),G.current.api.redrawRows()}const ae=I.useCallback(q=>{De(q,q.overIndex)},[]),Q=I.useCallback(q=>{q.overIndex==0?De(q,0):q.overIndex==-1&&q.vDirection=="down"?De(q,B.getCharacters().length):q.overIndex==-1&&q.vDirection=="up"?De(q,0):De(q,q.overIndex)},[]);function Oe(){var at,Nt;const q=G.current.api.getSelectedNodes();if(!q||q.length==0)return;const re=q[0].data.id;B.removeCharacter(re),setCharacterRows(B.getCharacters()),H(void 0),(Nt=(at=window.relicsGrid)==null?void 0:at.current)!=null&&Nt.api&&window.relicsGrid.current.api.redrawRows(),Ee.delayedSave(),J.success(x("Messages.RemoveSuccess"))}function Ae(){console.log("unequipClicked",B.getCharacterById(M));const q=G.current.api.getSelectedNodes();if(!q||q.length==0)return;const re=q[0].data.id;B.unequipCharacter(re),G.current.api.redrawRows(),window.forceCharacterTabUpdate(),J.success(x("Messages.UnequipSuccess")),window.relicsGrid.current.api.redrawRows(),Ee.delayedSave()}function Ze(q){if(!q.characterId)return J.error(x("Messages.NoSelectedCharacter"));const ze=B.addFromForm(q);window.characterGrid.current.api.ensureIndexVisible(ze.rank)}function tt(q){if(!q)return J.error(x("Messages.NoSelectedCharacter"));B.switchRelics(X.id,q.value),Ee.delayedSave(),G.current.api.redrawRows(),window.forceCharacterTabUpdate(),J.success(x("Messages.SwitchSuccess",{charId:q.value})),window.relicsGrid.current.api.redrawRows()}function ue(){M&&Z(M),window.store.getState().setScoringModalOpen(!0)}function te(){B.insertCharacter(M,0),B.refreshCharacters(),Ee.delayedSave()}async function pe(){if(!await vt(i.jsx(i.Fragment,{children:i.jsx(Rt,{t:x,i18nKey:"Messages.SortByScoreWarning",children:i.jsx("br",{})})})))return;const ze=B.getCharacters().map(re=>({score:dt.scoreCharacter(re),character:re})).sort((re,at)=>at.score.totalScore-re.score.totalScore).map(re=>re.character);B.setCharacters(ze),B.refreshCharacters(),Ee.delayedSave()}function ge(q){const ze=dt.scoreCharacter(X),re=B.saveCharacterBuild(q,X.id,{score:ze.totalScore.toFixed(0),rating:ze.totalRating});if(re){J.error(re.error);return}J.success(x("charactersTab:Messages.SaveSuccess",{name:q})),Ee.delayedSave(),d(!1)}const et={items:L,onClick:async q=>{if(!X&&q.key!="add"&&q.key!="scoring"&&q.key!="sortByScore"){J.error(x("Messages.NoSelectedCharacter"));return}switch(q.key){case"add":S(!0),E(null),s(!0);break;case"edit":S(!1),E(X),s(!0);break;case"switchRelics":l(!0);break;case"unequip":if(!await vt(x("Messages.UnequipWarning",{charId:X.id})))return;Ae();break;case"delete":if(!await vt(x("Messages.DeleteWarning",{charId:X.id})))return;Oe();break;case"saveBuild":d(!0);break;case"viewBuilds":h(!0);break;case"scoring":ue();break;case"moveToTop":te();break;case"sortByScore":pe();break;default:console.error(`Unknown key ${q.key} in handleActionsMenuClick`)}}};async function vt(q){return t.confirm({title:x("common:Confirm"),icon:i.jsx(gd,{}),content:q,okText:x("common:Confirm"),cancelText:x("common:Cancel"),centered:!0})}const Zt=8,Da=280*3+Zt*2;return i.jsxs(g,{style:{height:"100%",marginBottom:200,width:1455},gap:Zt,children:[i.jsxs(g,{vertical:!0,gap:Zt,children:[i.jsx(Es,{placement:"topLeft",menu:et,trigger:["hover"],children:i.jsxs(Y,{style:{width:"100%",height:40,boxShadow:"unset",borderRadius:8},icon:i.jsx(cd,{}),type:"default",children:[x("CharacterMenu.ButtonText"),i.jsx(Eo,{})]})}),i.jsx(g,{vertical:!0,gap:8,style:{minWidth:240},children:i.jsx("div",{id:"characterGrid",className:"ag-theme-balham-dark",style:{display:"block",width:"100%",height:Da,..._l(e)},children:i.jsx(QC,{characterGrid:G,cellClickedListener:ie,cellDoubleClickedListener:me,onRowDragEnd:ae,onRowDragLeave:Q,navigateToNextCell:he,isExternalFilterPresent:j,doesExternalFilterPass:O})})})]}),i.jsxs(g,{vertical:!0,gap:Zt,children:[i.jsxs(g,{gap:8,style:{width:"100%",marginBottom:0,alignItems:"center"},justify:"space-between",children:[i.jsx(Kt,{allowClear:!0,size:"large",style:{height:40,fontSize:14,width:200,borderRadius:8},placeholder:x("SearchPlaceholder"),onChange:q=>{y.current=q.target.value.toLowerCase(),A()}}),i.jsx(g,{style:{flex:1},children:i.jsx(Ai,{name:"path",tags:Cl(),flexBasis:"12.5%",currentFilters:P,setCurrentFilters:_})}),i.jsx(g,{style:{width:408},children:i.jsx(Ai,{name:"element",tags:cu(),flexBasis:"14.2%",currentFilters:P,setCurrentFilters:_})})]}),i.jsx(I.Suspense,{children:i.jsx(Kl,{id:"characterTabPreview",source:Tt.CHARACTER_TAB,character:X,setOriginalCharacterModalOpen:s,setOriginalCharacterModalInitialCharacter:E,setCharacterModalAdd:S})})]}),i.jsx(kl,{onOk:Ze,open:o,setOpen:s,initialCharacter:D}),i.jsx(JC,{onOk:tt,open:r,setOpen:l,currentCharacter:X}),i.jsx(YC,{open:c,setOpen:d,onOk:ge}),i.jsx(XC,{open:u,setOpen:h,selectedCharacter:X,imgRenderer:bm}),n]})}const zr=900,Lo=1600;function nT(){return window.store(t=>t.activeKey)!=de.HOME?i.jsx(i.Fragment,{}):i.jsxs(g,{vertical:!0,style:{width:"100%",position:"relative",marginBottom:200},align:"center",children:[i.jsx(oT,{}),i.jsx(cT,{}),i.jsx(sT,{})]})}const x0=[{key:"1",label:i.jsx(v0,{i18nkey:"Explore"}),children:i.jsx(lT,{})},{key:"2",label:i.jsx(v0,{i18nkey:"Join"}),children:i.jsx(iT,{})}];function v0(e){const{t}=V("hometab",{keyPrefix:"CollapseLabels"});return i.jsx("div",{style:{marginRight:38,textAlign:"center"},children:i.jsx(Mt,{style:{fontSize:24,paddingInline:30,marginBlock:0},children:t(e.i18nkey)})})}function iT(){const{t:e}=V("hometab");return i.jsxs(g,{style:{padding:"0px 25px"},gap:50,children:[i.jsx(g,{vertical:!0,style:{flex:1,fontSize:20},gap:20,children:i.jsxs(Rt,{t:e,i18nKey:"CommunityCollapse",children:[i.jsx("span",{children:"A huge thanks to all our contributors, translators, users, and everyone who provided feedback, for supporting this project and helping to build it together!"}),i.jsxs("span",{children:["Come be a part of our Star Rail community! Join the ",i.jsx(At,{url:"https://discord.gg/rDmB4Un7qg"})," server to hang out, or check out the ",i.jsx(At,{url:"https://github.com/fribbels/hsr-optimizer"})," repo if you'd like to contribute."]})]})}),i.jsx(g,{style:{flex:1},align:"flex-start",children:i.jsx("a",{href:"https://github.com/fribbels/hsr-optimizer/graphs/contributors",target:"_blank",rel:"noreferrer",style:{width:"100%"},children:i.jsx("img",{src:"https://contrib.rocks/image?repo=fribbels/hsr-optimizer&columns=10&anon=1",style:{width:"100%",maxWidth:Lo/2}})})})]})}function sT(){return i.jsx(Co,{ghost:!0,style:{width:"100%",maxWidth:Lo},expandIcon:({isActive:e})=>i.jsx(uh.RightOutlined,{style:{marginLeft:10},rotate:e?90:0}),items:x0,defaultActiveKey:x0.map(e=>e.key)})}function oT(){return i.jsx("div",{style:{position:"absolute",top:0,width:"100%",maxWidth:Lo,height:zr,maxHeight:zr,backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundImage:`
            linear-gradient(to top, rgba(24, 34, 57, 0) 99.5%, rgba(24, 34, 57, 1) 100%),
            linear-gradient(to bottom, rgba(24, 34, 57, 0) 99.5%, rgba(24, 34, 57, 1) 100%),
            linear-gradient(to left, rgba(24, 34, 57, 0) 98%, rgba(24, 34, 57, 1) 99.5%),
            linear-gradient(to right, rgba(24, 34, 57, 0) 98%, rgba(24, 34, 57, 1) 99.5%),
            url(${k.getHomeBackground("nous")})
          `,backgroundSize:"cover"}})}const Sr=20;function rT(e){return i.jsx("div",{style:{padding:"15px 15px 0px 15px"},children:i.jsx(uT,{src:k.getHomeFeature(e.id,w.resolvedLanguage),fallbackSrc:k.getHomeFeature(e.id),style:{width:"100%",height:593,borderRadius:8,outline:"rgba(255, 255, 255, 0.15) solid 1px",boxShadow:"rgb(0 0 0 / 50%) 2px 2px 3px",objectFit:"cover"}})})}function Vs(e){const{t}=V("hometab",{keyPrefix:"FeatureCards"});return i.jsx(Yn,{title:i.jsx("span",{style:{fontSize:20},children:e.title}),style:{flex:1,cursor:"default",fontSize:16,minWidth:500},hoverable:!0,cover:i.jsx(rT,{id:e.id}),children:i.jsxs(g,{align:"center",gap:10,justify:"space-between",children:[i.jsx("span",{children:e.content}),i.jsx(Y,{size:"large",iconPosition:"end",href:e.url,target:"_blank",icon:i.jsx(q0,{}),children:t("LearnMore")})]})})}function lT(){const{t:e}=V("hometab",{keyPrefix:"FeatureCards"});return i.jsx(g,{style:{maxWidth:Lo,minWidth:1e3,width:"100%",padding:"0px 20px"},children:i.jsxs(g,{vertical:!0,style:{width:"100%"},gap:Sr,children:[i.jsxs(g,{gap:Sr,children:[i.jsx(Vs,{title:e("Showcase.Title"),id:"showcase",content:e("Showcase.Content"),url:"https://github.com/fribbels/hsr-optimizer/blob/main/docs/guides/en/dps-score.md"}),i.jsx(Vs,{title:e("Optimizer.Title"),id:"optimizer",content:e("Optimizer.Content"),url:"https://github.com/fribbels/hsr-optimizer/blob/main/docs/guides/en/optimizer.md"})]}),i.jsxs(g,{gap:Sr,style:{width:"100%"},children:[i.jsx(Vs,{title:e("Calculator.Title"),id:"calculator",content:e("Calculator.Content"),url:"https://github.com/fribbels/hsr-optimizer/blob/main/docs/guides/en/advanced-rotations.md"}),i.jsx(Vs,{title:e("Organizer.Title"),id:"relics",content:e("Organizer.Content"),url:"https://github.com/fribbels/hsr-optimizer/blob/main/docs/guides/en/relics-tab.md"})]})]})})}function cT(){const{t:e}=V("hometab");return i.jsxs(g,{vertical:!0,style:{width:"100%",zIndex:1,height:zr,paddingBottom:40},align:"center",justify:"space-between",children:[i.jsx("h1",{style:{marginTop:50,fontSize:50,color:"white",textShadow:"#000000 2px 2px 20px",textAlign:"center",fontFamily:"Tahoma, Geneva, Verdana, sans-serif"},children:i.jsxs(Rt,{t:e,i18nKey:"Welcome",children:["Welcome to the",i.jsx("br",{}),"Fribbels Star Rail Optimizer"]})}),i.jsx(dT,{})]})}function dT(){const e=window.store(s=>s.scorerId),{t}=V("hometab",{keyPrefix:"SearchBar"}),n=I.useRef(null);function o(){var l,c;const s=(c=(l=n==null?void 0:n.current)==null?void 0:l.input)==null?void 0:c.value;if(!s)return;if(!C.validateUuid(s))return J.warning(t("Message"));window.history.pushState({},"",`/hsr-optimizer#showcase?id=${s}`),window.store.getState().setActiveKey(de.SHOWCASE)}return i.jsxs(g,{vertical:!0,className:"homeCard",style:{width:700,height:115,padding:20},align:"center",justify:"center",gap:5,children:[i.jsxs(g,{justify:"space-between",style:{width:"100%"},children:[i.jsx(g,{justify:"flex-start",style:{paddingLeft:3,paddingBottom:5,fontSize:17,textShadow:"rgb(0, 0, 0) 2px 2px 20px, rgb(0, 0, 0) 0px 0px 5px"},children:t("Label")}),i.jsx(g,{style:{fontSize:16,opacity:.8,marginRight:2},children:i.jsx(At,{text:t("Api"),noUnderline:!0,url:"https://enka.network/?hsr"})})]}),i.jsxs(Qr.Compact,{style:{width:"100%"},children:[i.jsx(Y,{size:"large",type:"primary",icon:i.jsx(mh,{}),style:{width:60},onClick:o}),i.jsx(Kt,{ref:n,placeholder:t("Placeholder"),style:{width:"100%"},allowClear:!0,size:"large",defaultValue:e,onPressEnter:o})]})]})}function uT(e){const[t,n]=Et.useState(!1);return i.jsx("img",{style:e.style,src:e.src,onError:o=>{t||(o.currentTarget.src=e.fallbackSrc,n(!0))}})}const kn=250,La=100,{Text:mT}=Ce;function hT(){const[e,t]=I.useState(!1),{t:n}=V(["importSaveTab"],{keyPrefix:"ClearData"}),{t:o}=V("common");function s(){console.log("Clear data"),t(!0),setTimeout(()=>{t(!1),B.resetStore(),J.success(n("SuccessMessage"))},La)}return i.jsxs(g,{vertical:!0,gap:5,children:[i.jsx(mT,{children:n("Label")}),i.jsx(Cn,{title:n("WarningTitle"),description:n("WarningDescription"),onConfirm:s,placement:"bottom",okText:o("Yes"),cancelText:o("Cancel"),children:i.jsx(Y,{type:"primary",icon:i.jsx(Jr,{}),loading:e,style:{width:kn},children:n("ButtonText")})})]})}const{Text:br}=Ce;function fT(){const[e,t]=I.useState(0),[n,o]=I.useState(void 0),[s,r]=I.useState(!1),[l,c]=I.useState(!1),{t:d}=V("importSaveTab",{keyPrefix:"LoadData"});function u(E){return new Promise(()=>{const y=new FileReader;return y.readAsText(E),y.onload=()=>{const P=String(y.result),_=JSON.parse(P);if(_.fileType||_.source){r(!0),setTimeout(()=>{r(!1),o(void 0),t(1)},La);return}r(!0),setTimeout(()=>{r(!1),o(_),t(1)},La)},!1})}function h(){c(!0),setTimeout(()=>{B.setStore(n,!1),window.refreshRelicsScore(),setTimeout(()=>{t(2),c(!1),Ee.save()},La)},La)}function p(){return i.jsx(g,{style:{minHeight:100},children:i.jsxs(g,{vertical:!0,gap:10,children:[i.jsx(br,{children:d("Stage1.Label")}),i.jsx(Sd,{accept:".json",name:"file",beforeUpload:u,children:i.jsx(Y,{style:{width:kn},icon:i.jsx($r,{}),loading:s,onClick:()=>t(0),children:d("Stage1.ButtonText")})})]})})}function S(){return!(n!=null&&n.relics)||!n.characters?i.jsx(g,{style:{minHeight:100},children:i.jsx(g,{vertical:!0,gap:10,style:{display:e>=1?"flex":"none"},children:d("Stage2.ErrorMsg")})}):i.jsx(g,{style:{minHeight:100},children:i.jsxs(g,{vertical:!0,gap:10,style:{display:e>=1?"flex":"none"},children:[i.jsx(br,{children:d("Stage2.Label",{relicCount:n.relics.length,characterCount:n.characters.length})}),i.jsx(Y,{style:{width:kn},icon:i.jsx(ts,{}),type:"primary",onClick:h,loading:l,children:d("Stage2.ButtonText")})]})})}function D(){return i.jsx(g,{style:{minHeight:100},children:i.jsx(g,{vertical:!0,gap:10,style:{display:e>=2?"flex":"none"},children:i.jsx(br,{children:d("Stage3.SuccessMessage")})})})}return i.jsx(g,{gap:5,children:i.jsx(qs,{direction:"vertical",current:e,items:[{title:"",description:p()},{title:"",description:S()},{title:"",description:D()}]})})}function pT(e){const t=B.getMetadata().relics.relicSets,n={metadata:{trailblazer:"Stelle",current_trailblazer_path:"Destruction"},characters:[],relics:[]};for(const o of e.data.avatar_list){const s={characterEidolon:o.rank,characterId:o.id.toString(),characterLevel:o.level,lightCone:null,lightConeLevel:80,lightConeSuperimposition:1};o.equip!=null&&(s.lightCone=o.equip.id.toString(),s.lightConeSuperimposition=o.equip.rank),n.characters.push(s);const r=[...o.relics,...o.ornaments];for(const c of r){const d=[];for(const u of c.properties){const h={stat:A0(u.property_type),value:_0(u.value)};d.push(h)}n.relics.push({enhance:c.level,equippedBy:o.id.toString(),grade:c.rarity,id:F.randomId(),part:RT(c.pos),set:ET(c.id,t),main:{stat:A0(c.main_property.property_type),value:_0(c.main_property.value)},substats:d,verified:!1})}const l=ST(o.id);l&&(n.metadata=l)}return n.relics.map(o=>Xn.augment(o)),n}function _0(e){return e.endsWith("%")?F.precisionRound(parseFloat(e.slice(0,e.length-1))):F.precisionRound(parseFloat(e))}const gT={8001:{trailblazer:"Caelus",current_trailblazer_path:"Destruction"},8002:{trailblazer:"Stelle",current_trailblazer_path:"Destruction"},8003:{trailblazer:"Caelus",current_trailblazer_path:"Preservation"},8004:{trailblazer:"Stelle",current_trailblazer_path:"Preservation"},8006:{trailblazer:"Stelle",current_trailblazer_path:"Harmony"},8005:{trailblazer:"Caelus",current_trailblazer_path:"Harmony"}};function ST(e){return gT[e]}const bT={27:m.Stats.HP,32:m.Stats.HP_P,29:m.Stats.ATK,33:m.Stats.ATK_P,31:m.Stats.DEF,34:m.Stats.DEF_P,51:m.Stats.SPD,52:m.Stats.CR,53:m.Stats.CD,56:m.Stats.EHR,57:m.Stats.RES,59:m.Stats.BE,54:m.Stats.ERR,55:m.Stats.OHB,12:m.Stats.Physical_DMG,14:m.Stats.Fire_DMG,16:m.Stats.Ice_DMG,18:m.Stats.Lightning_DMG,20:m.Stats.Wind_DMG,22:m.Stats.Quantum_DMG,24:m.Stats.Imaginary_DMG};function A0(e){return bT[e]||""}const DT={1:b.Head,2:b.Hands,3:b.Body,4:b.Feet,5:b.PlanarSphere,6:b.LinkRope};function RT(e){return DT[e]||""}function ET(e,t){const n=e.toString().substring(1,4);return L0[e]?t[L0[e].set].name:t[n].name}const L0={55001:{set:"101",part:"3",main:"436"},55002:{set:"101",part:"4",main:"441"},55003:{set:"102",part:"3",main:"434"},55004:{set:"103",part:"3",main:"433"},55005:{set:"103",part:"4",main:"443"},55006:{set:"105",part:"3",main:"434"}},{Text:CT}=Ce,TT=Object.values(Tn.characters),yT=Tn.relics.reduce((e,t)=>(e[t.id]=t,e),{});class Wl{constructor(t){Ue(this,"config");Ue(this,"badRollInfo");this.config=t,this.badRollInfo=!1}parse(t){const n=w.getFixedT(null,"importSaveTab","Import.ParserError"),o=w.getFixedT(null,"importSaveTab","Import.ParserWarning"),s={metadata:{trailblazer:"Stelle",current_trailblazer_path:"Destruction"},characters:[],relics:[]};if(t.source!=this.config.sourceString)throw new Error(n("BadSource",{jsonSource:t.source,configSource:this.config.sourceString}));if(t.version!==this.config.latestOutputVersion)throw new Error(n("BadVersion",{jsonVersion:t.version,configVersion:this.config.latestOutputVersion}));const r=t.build||"v0.0.0";return sd.lt(r,this.config.latestBuildVersion)&&(console.log(`Current: ${r}, Latest: ${this.config.latestBuildVersion}`),J.warning(i.jsxs(CT,{children:[n("OutdatedVersion",{buildVersion:r})," ",i.jsx("a",{target:"_blank",style:{color:"#3f8eff"},href:this.config.releases,rel:"noreferrer",children:this.config.releases})]}),15)),s.metadata.trailblazer=t.metadata.trailblazer||"Stelle",s.metadata.current_trailblazer_path=t.metadata.current_trailblazer_path||"Stelle",t.relics&&(s.relics=t.relics.map(c=>IT(c,this)).map(c=>Xn.augment(c)).filter(c=>c?!0:(console.warn("Could not parse relic"),!1))),this.badRollInfo&&(J.warning(o("BadRollInfo"),10),this.badRollInfo=!1),t.characters&&(s.characters=t.characters.map(c=>PT(c,t.light_cones)).filter(c=>c?!0:(console.warn("Could not parse character"),!1))),s}}function PT(e,t){let n;t&&(n=t.find(r=>r.location===e.id));const o=e.id,s=n==null?void 0:n.id;return o?{characterId:o,characterLevel:e.level||80,characterEidolon:e.eidolon||0,lightCone:s||null,lightConeLevel:(n==null?void 0:n.level)||80,lightConeSuperimposition:(n==null?void 0:n.superimposition)||1}:null}function IT(e,t){var p;const o=hh.findBestMatch(e.slot,Object.values(b)).bestMatch.target,s=e.set_id,r=yT[s].name,l=Math.min(Math.max(e.level,0),15),c=Math.min(Math.max(e.rarity,2),5),{main:d,substats:u}=GT(e,o,c,l,t);let h;if(e.location!==""){const S=(p=TT.find(D=>D.id==e.location))==null?void 0:p.id;S&&(h=S)}return{part:o,set:r,enhance:l,grade:c,main:d,substats:u,equippedBy:h,verified:t.config.speedVerified}}function BT(e,t){switch(t){case"Hands":return m.Stats.ATK;case"Head":return m.Stats.HP;default:return MT(e.mainstat)}}function GT(e,t,n,o,s){const r=BT(e,t);if(!r)throw new Error(w.t("importSaveTab:Import.ParserError.BadMainstat",{mainstat:e.mainstat,part:t}));const l=vT(t),c=`${n}${l}`,d=Object.values(B.getMetadata().relics.relicMainAffixes[c].affixes),u=xT(r),h=d.find(D=>D.property===u),p=h.base+h.step*o,S=e.substats.map(D=>{if(!s.config.speedVerified)return{stat:Dr(D.key),value:D.value};if(D.step==null||D.count==null||D.count>Math.max(1,e.rarity*2-4)||D.count<=0||D.step>2*D.count||D.step<0)return s.badRollInfo=!0,{stat:Dr(D.key),value:D.value};const{rolls:E,errorFlag:y}=vl(D.count,D.step);return y&&(s.badRollInfo=!0),{stat:Dr(D.key),value:D.value,rolls:E,addedRolls:D.count-1}});return{main:{stat:r,value:F.truncate10000ths(p*(F.isFlat(r)?1:100))},substats:S}}function Dr(e){switch(e){case"ATK":return m.Stats.ATK;case"HP":return m.Stats.HP;case"DEF":return m.Stats.DEF;case"ATK_":return m.Stats.ATK_P;case"HP_":return m.Stats.HP_P;case"DEF_":return m.Stats.DEF_P;case"SPD":return m.Stats.SPD;case"CRIT Rate_":return m.Stats.CR;case"CRIT DMG_":return m.Stats.CD;case"Effect Hit Rate_":return m.Stats.EHR;case"Effect RES_":return m.Stats.RES;case"Break Effect_":return m.Stats.BE;default:return null}}function MT(e){switch(e){case"ATK":return m.Stats.ATK_P;case"HP":return m.Stats.HP_P;case"DEF":return m.Stats.DEF_P;case"SPD":return m.Stats.SPD;case"CRIT Rate":return m.Stats.CR;case"CRIT DMG":return m.Stats.CD;case"Effect Hit Rate":return m.Stats.EHR;case"Break Effect":return m.Stats.BE;case"Energy Regeneration Rate":return m.Stats.ERR;case"Outgoing Healing Boost":return m.Stats.OHB;case"Physical DMG Boost":return m.Stats.Physical_DMG;case"Fire DMG Boost":return m.Stats.Fire_DMG;case"Ice DMG Boost":return m.Stats.Ice_DMG;case"Lightning DMG Boost":return m.Stats.Lightning_DMG;case"Wind DMG Boost":return m.Stats.Wind_DMG;case"Quantum DMG Boost":return m.Stats.Quantum_DMG;case"Imaginary DMG Boost":return m.Stats.Imaginary_DMG;default:return null}}function xT(e){switch(e){case m.Stats.HP_P:return"HPAddedRatio";case m.Stats.ATK_P:return"AttackAddedRatio";case m.Stats.DEF_P:return"DefenceAddedRatio";case m.Stats.HP:return"HPDelta";case m.Stats.ATK:return"AttackDelta";case m.Stats.DEF:return"DefenceDelta";case m.Stats.SPD:return"SpeedDelta";case m.Stats.CD:return"CriticalDamageBase";case m.Stats.CR:return"CriticalChanceBase";case m.Stats.EHR:return"StatusProbabilityBase";case m.Stats.RES:return"StatusResistanceBase";case m.Stats.BE:return"BreakDamageAddedRatioBase";case m.Stats.ERR:return"SPRatioBase";case m.Stats.OHB:return"HealRatioBase";case m.Stats.Physical_DMG:return"PhysicalAddedRatio";case m.Stats.Fire_DMG:return"FireAddedRatio";case m.Stats.Ice_DMG:return"IceAddedRatio";case m.Stats.Lightning_DMG:return"ThunderAddedRatio";case m.Stats.Wind_DMG:return"WindAddedRatio";case m.Stats.Quantum_DMG:return"QuantumAddedRatio";case m.Stats.Imaginary_DMG:return"ImaginaryAddedRatio";default:return null}}function vT(e){switch(e){case m.Parts.Head:return 1;case m.Parts.Hands:return 2;case m.Parts.Body:return 3;case m.Parts.Feet:return 4;case m.Parts.PlanarSphere:return 5;case m.Parts.LinkRope:return 6;default:return null}}const Zl={name:"HSR-Scanner",author:"Kel-z",homepage:"https://github.com/kel-z/HSR-Scanner",releases:"https://github.com/kel-z/HSR-Scanner/releases/latest",defaultFileName:"HSRScanData.json",sourceString:"HSR-Scanner",latestBuildVersion:"v1.2.0",latestOutputVersion:4,speedVerified:!1},Nl={name:"Reliquary Archiver",author:"IceDynamix",homepage:"https://github.com/IceDynamix/reliquary-archiver",releases:"https://github.com/IceDynamix/reliquary-archiver/releases/latest",defaultFileName:"archiver_output.json",sourceString:"reliquary_archiver",latestBuildVersion:"v0.3.0",latestOutputVersion:4,speedVerified:!0},Dm={name:"Yas Scanner",author:"wormtql, YCR160",homepage:"https://github.com/wormtql/yas",releases:"",defaultFileName:"hsr.json",sourceString:"yas-scanner",latestBuildVersion:"v0.0.0",latestOutputVersion:3,speedVerified:!1},_T=new Wl(Zl),AT=new Wl(Nl),LT=new Wl(Dm),Rm={[Zl.sourceString]:_T,[Nl.sourceString]:AT,[Dm.sourceString]:LT},FT=Object.keys(Rm);function HT(){const{t:e}=V("importSaveTab",{keyPrefix:"Import.Stage1.ReliquaryDesc"});return i.jsx(i.Fragment,{children:i.jsxs("li",{children:[i.jsx("b",{children:e("Title")})," (",i.jsx(At,{text:e("Link"),url:Nl.releases,linkIcon:!0}),")",i.jsxs("ul",{children:[i.jsx("li",{children:i.jsx("b",{style:{color:"#82e192"},children:e("OnlineMsg",{version:"3.1"})})}),i.jsx("li",{children:e("l1")}),i.jsx("li",{children:e("l2")})]})]})})}const{Text:vn}=Ce;function wT(){const[e,t]=I.useState(0),[n,o]=I.useState([]),[s,r]=I.useState([]),[l,c]=I.useState(!1),[d,u]=I.useState(!1),[h,p]=I.useState(!1),{t:S}=V(["importSaveTab","common"]);function D(M){return new Promise(()=>{const H=new FileReader;return H.readAsText(M),H.onload=()=>{const Z=String(H.result);E(Z)},!1})}function E(M){try{const H=JSON.parse(M);if(console.log("JSON",H),c(!0),!H)throw new Error(S("Import.ErrorMsg.InvalidJson"));if(H.data){const A=pT(H),O=A.relics;let j=A.characters;j=j.sort((ie,ee)=>ee.characterLevel-ie.characterLevel),j.map(ie=>{ie.characterLevel=80,ie.lightConeLevel=80}),setTimeout(()=>{r(j),o(O),t(1),c(!1)},La);return}if(!FT.includes(H.source))throw new Error(S("Import.ErrorMsg.InvalidFile"));const X=Rm[H.source].parse(H);let W=X.characters;const L=X.relics;W=W.sort((A,O)=>O.characterLevel-A.characterLevel),W.map(A=>{A.characterLevel=80,A.lightConeLevel=80}),setTimeout(()=>{c(!1),o(L),r(W),t(1),p(!1)},La)}catch(H){let Z=S("Import.ErrorMsg.Unknown");H instanceof Error&&(Z=H.message),console.error(H),J.error(S("Import.ErrorMsg.Fragment")+Z,10),setTimeout(()=>{c(!1),o(void 0),r(void 0),t(1)},La)}}function y(){u(!0),setTimeout(()=>{B.mergeRelicsWithState(n),Ee.delayedSave(),setTimeout(()=>{u(!1),t(2)},100)},La)}function P(){u(!0),setTimeout(()=>{const M=h?s==null?void 0:s.filter(H=>B.getCharacterById(H.characterId)):s;B.mergeRelicsWithState(n,M),Ee.delayedSave(),setTimeout(()=>{u(!1),t(2)},100)},La)}function _(){return i.jsx(g,{style:{minHeight:100,marginBottom:30},gap:30,children:i.jsxs(g,{vertical:!0,gap:10,children:[i.jsx(vn,{children:S("Import.Stage1.Header")}),i.jsx(vn,{children:i.jsxs("ul",{children:[i.jsx(HT,{}),i.jsxs("li",{children:[S("Import.Stage1.KelzDesc.Title")," (",i.jsx(At,{text:S("Import.Stage1.KelzDesc.Link"),url:Zl.releases,linkIcon:!0}),")",i.jsxs("ul",{children:[i.jsx("li",{children:S("Import.Stage1.KelzDesc.l1")}),i.jsx("li",{children:S("Import.Stage1.KelzDesc.l2")})]})]}),i.jsxs("li",{children:[S("Import.Stage1.ScorerDesc.Title")," (",i.jsx(At,{text:S("Import.Stage1.ScorerDesc.Link"),linkIcon:!0,onClick:()=>window.store.getState().setActiveKey(de.SHOWCASE)}),")",i.jsxs("ul",{children:[i.jsx("li",{children:S("Import.Stage1.ScorerDesc.l1")}),i.jsx("li",{children:S("Import.Stage1.ScorerDesc.l2")})]})]}),i.jsxs("li",{children:[S("Import.Stage1.HoyolabDesc.Title")," (",i.jsx(At,{text:S("Import.Stage1.HoyolabDesc.Link"),url:"https://github.com/fribbels/hsr-optimizer/discussions/403",linkIcon:!0}),")",i.jsxs("ul",{children:[i.jsx("li",{children:S("Import.Stage1.HoyolabDesc.l1")}),i.jsx("li",{children:S("Import.Stage1.HoyolabDesc.l2")})]})]})]})}),i.jsx(g,{vertical:!0,align:"flex-start",children:i.jsxs(g,{gap:10,align:"center",children:[i.jsx(Sd,{accept:".json",name:"file",beforeUpload:D,children:i.jsx(Y,{style:{width:kn},icon:i.jsx($r,{}),loading:l,onClick:()=>t(0),children:S("Import.Stage1.ButtonText")})}),S("Import.Stage1.Or"),i.jsx(Kt,{style:{width:kn},className:"centered-placeholder",placeholder:S("Import.Stage1.Placeholder"),value:"",disabled:l,onChange:M=>{const H=M.target.value;try{const Z=JSON.parse(H);E(H)}catch{}}})]})})]})})}function x(){return n?i.jsx(g,{style:{minHeight:250},children:i.jsxs(g,{vertical:!0,gap:10,style:{display:e>=1?"flex":"none"},children:[i.jsx(vn,{children:S("Import.Stage2.FileInfo",{relicCount:n.length??0,characterCount:(s==null?void 0:s.length)??0})}),i.jsx(vn,{children:S("Import.Stage2.RelicsImport.Label",{relicCount:n.length??0})}),i.jsx(Y,{style:{width:kn},type:"primary",onClick:y,loading:d,children:S("Import.Stage2.RelicsImport.ButtonText",{relicCount:n.length??0})}),i.jsx(Mt,{children:i.jsx(vn,{style:{fontSize:12},children:S("Import.Stage2.Or")})}),i.jsx(vn,{children:S("Import.Stage2.CharactersImport.Label",{relicCount:n.length??0,characterCount:(s==null?void 0:s.length)??0})}),i.jsx(fh,{checked:h,disabled:d,onChange:M=>p(M.target.checked),children:S("Import.Stage2.CharactersImport.OnlyImportExisting")}),i.jsx(Cn,{title:S("Import.Stage2.CharactersImport.WarningTitle"),description:S("Import.Stage2.CharactersImport.WarningDescription"),onConfirm:P,placement:"bottom",okText:S("common:Yes"),cancelText:S("common:Cancel"),children:i.jsx(Y,{style:{width:kn},type:"primary",loading:d,children:S("Import.Stage2.CharactersImport.ButtonText",{relicCount:n.length??0,characterCount:(s==null?void 0:s.length)??0})})})]})}):i.jsx(g,{style:{minHeight:100},children:i.jsx(g,{vertical:!0,gap:10,style:{display:e>=1?"flex":"none"},children:S("Import.Stage2.NoRelics")})})}function G(){return i.jsx(g,{style:{minHeight:100},children:i.jsx(g,{vertical:!0,gap:10,style:{display:e>=2?"flex":"none"},children:i.jsx(vn,{children:S("Import.Stage3.SuccessMessage")})})})}return i.jsx(g,{gap:5,children:i.jsx(qs,{direction:"vertical",current:e,items:[{title:"",description:_()},{title:"",description:x()},{title:"",description:G()}]})})}const{Text:OT}=Ce,kT=250,KT=async(e,t)=>{if("showSaveFilePicker"in window&&(()=>{try{return window.self===window.top}catch{return!1}})())try{const s=await(await window.showSaveFilePicker({suggestedName:t,types:[{description:"JSON",accept:{"text/json":[".json"]}}]})).createWritable();await s.write(e),await s.close()}catch(o){C.consoleWarnWrapper(o)}else{const o=URL.createObjectURL(e),s=document.createElement("a");s.href=o,s.download=t,s.style.display="none",document.body.append(s),s.click(),setTimeout(()=>{URL.revokeObjectURL(o),s.remove()},1e3)}};function jT(){const{t:e}=V("importSaveTab",{keyPrefix:"SaveData"});async function t(){try{const n=Ee.save(),o=new Blob([n],{type:"text/json;charset=utf-8"});await KT(o,"fribbels-optimizer-save.json"),J.success(e("SuccessMessage"))}catch(n){console.warn(n)}}return i.jsxs(g,{vertical:!0,gap:5,children:[i.jsx(OT,{children:e("Label")}),i.jsx(Y,{type:"primary",onClick:t,icon:i.jsx(qr,{}),style:{width:kT},children:e("ButtonText")})]})}function WT(){const e="large",{t}=V("importSaveTab",{keyPrefix:"TabLabels"});return i.jsx("div",{children:i.jsx(g,{vertical:!0,gap:5,style:{marginLeft:20,width:1200},children:i.jsx(ph,{defaultActiveKey:"1",size:e,style:{marginBottom:32},items:[{label:t("Import"),key:"Import",children:i.jsx(wT,{})},{label:t("Load"),key:"Load",children:i.jsx(fT,{})},{label:t("Save"),key:"Save",children:i.jsx(jT,{})},{label:t("Clear"),key:"Clear",children:i.jsx(hT,{})}]})})})}const Dn={},F0=40;function ZT(){return window.store(t=>t.activeKey)!=de.METADATA_TEST?i.jsx(i.Fragment,{}):i.jsxs(g,{vertical:!0,style:{width:3e3,height:"fit-content"},children:[i.jsx("h1",{style:{marginLeft:20},children:"Metadata viewer"}),i.jsx(Co,{items:[{key:"1",label:"Simulation sets",children:i.jsx(UT,{})},{key:"2",label:"Conditional sets presets",children:i.jsx(zT,{})},{key:"3",label:"Substat weight dashboard",children:i.jsx(NT,{})}]})]})}function NT(){const e=Tn.relics.slice().reverse(),t=Object.values(B.getMetadata().characters);for(let n=0;n<e.length;n++)Dn[e[n].name]=n;return i.jsxs(g,{vertical:!0,gap:10,children:[i.jsx(ot,{grid:rn(t.filter(n=>n.path=="Destruction"))}),i.jsx(ot,{grid:rn(t.filter(n=>n.path=="Hunt"))}),i.jsx(ot,{grid:rn(t.filter(n=>n.path=="Erudition"))}),i.jsx(ot,{grid:rn(t.filter(n=>n.path=="Nihility"))}),i.jsx(ot,{grid:rn(t.filter(n=>n.path=="Remembrance"))}),i.jsx(ot,{grid:rn(t.filter(n=>n.path=="Preservation"))}),i.jsx(ot,{grid:rn(t.filter(n=>n.path=="Harmony"))}),i.jsx(ot,{grid:rn(t.filter(n=>n.path=="Abundance"))})]})}function rn(e,t){const n=[a.ATK,a.ATK_P,a.DEF,a.DEF_P,a.HP,a.HP_P,a.SPD,a.CR,a.CD,a.EHR,a.RES,a.BE,a.ERR,a.OHB,a.Physical_DMG,a.Fire_DMG,a.Ice_DMG,a.Lightning_DMG,a.Wind_DMG,a.Quantum_DMG,a.Imaginary_DMG],o=n.map(r=>k.getStatIcon(r));o.unshift(k.getBlank());const s=[[]];for(let r=0;r<n.length+1;r++)s[0][r]=i.jsx(Xa,{src:o[r]});for(let r=0;r<e.length;r++){const l=e[r],c=[];c.push(i.jsx(Xa,{src:k.getCharacterAvatarById(l.id)}));for(const d of Object.values(l.scoringMetadata.stats))c.push(i.jsx("div",{children:d||""}));s.push(c)}return s}const VT={fnAshblazingSet:R.TheAshblazingGrandDuke,fnPioneerSet:R.PioneerDiverOfDeadWaters,fnSacerdosSet:R.SacerdosRelivedOrdeal,PRISONER_SET:R.PrisonerInDeepConfinement,WASTELANDER_SET:R.WastelanderOfBanditryDesert,VALOROUS_SET:R.TheWindSoaringValorous,BANANA_SET:R.TheWondrousBananAmusementPark};function zT(){const e=Tn.relics.slice().reverse(),t=Object.values(B.getMetadata().characters);for(let n=0;n<e.length;n++)Dn[e[n].name]=n;return i.jsxs(g,{vertical:!0,gap:10,children:[i.jsx(ot,{grid:ln(t.filter(n=>n.path=="Destruction"),e)}),i.jsx(ot,{grid:ln(t.filter(n=>n.path=="Hunt"),e)}),i.jsx(ot,{grid:ln(t.filter(n=>n.path=="Erudition"),e)}),i.jsx(ot,{grid:ln(t.filter(n=>n.path=="Nihility"),e)}),i.jsx(ot,{grid:ln(t.filter(n=>n.path=="Remembrance"),e)}),i.jsx(ot,{grid:ln(t.filter(n=>n.path=="Preservation"),e)}),i.jsx(ot,{grid:ln(t.filter(n=>n.path=="Harmony"),e)}),i.jsx(ot,{grid:ln(t.filter(n=>n.path=="Abundance"),e)})]})}function ln(e,t){const n=t.map(s=>k.getSetImage(s.name));n.unshift(k.getBlank());const o=[[]];for(let s=0;s<t.length+1;s++)o[0][s]=i.jsx(Xa,{src:n[s]});for(let s=0;s<e.length;s++){const r=e[s],l=[];l.push(i.jsx(Xa,{src:k.getCharacterAvatarById(r.id)}));for(const c of r.scoringMetadata.presets){const d=VT[c.name],u=Dn[d];l[u+1]=i.jsx("div",{children:c.value===!0?"⚪":c.value})}o.push(l)}return o}function UT(){const e=Tn.relics.slice().reverse(),n=Object.values(B.getMetadata().characters).filter(o=>o.scoringMetadata.simulation);for(let o=0;o<e.length;o++)Dn[e[o].name]=o;return i.jsxs(g,{vertical:!0,gap:50,children:[i.jsx(ot,{grid:cn(n.filter(o=>o.path=="Destruction"),e)}),i.jsx(ot,{grid:cn(n.filter(o=>o.path=="Hunt"),e)}),i.jsx(ot,{grid:cn(n.filter(o=>o.path=="Erudition"),e)}),i.jsx(ot,{grid:cn(n.filter(o=>o.path=="Nihility"),e)}),i.jsx(ot,{grid:cn(n.filter(o=>o.path=="Remembrance"),e)}),i.jsx(ot,{grid:cn(n.filter(o=>o.path=="Preservation"),e)}),i.jsx(ot,{grid:cn(n.filter(o=>o.path=="Harmony"),e)}),i.jsx(ot,{grid:cn(n.filter(o=>o.path=="Abundance"),e)})]})}function cn(e,t){const n=t.map(s=>k.getSetImage(s.name));n.unshift(k.getBlank());const o=[[]];for(let s=0;s<t.length+1;s++)o[0][s]=i.jsx(Xa,{src:n[s]});for(let s=0;s<e.length;s++){const r=e[s],l=[];l.push(i.jsx(Xa,{src:k.getCharacterAvatarById(r.id)}));for(const c of r.scoringMetadata.simulation.relicSets)if(c.length==2){const d=Dn[c[0]];l[d+1]=i.jsx(Xa,{src:k.getSetImage(c[0])})}else for(const d of c){const u=Dn[d];l[u+1]=i.jsx(Xa,{src:k.getSetImage(d)})}for(const c of r.scoringMetadata.simulation.ornamentSets){const d=Dn[c];l[d+1]=i.jsx(Xa,{src:k.getSetImage(c)})}o.push(l)}return o}function Xa(e){return i.jsx("img",{src:e.src,style:{width:40}})}function ot(e){const[t,n]=I.useState(null);for(const o of e.grid)for(let s=0;s<Object.values(Dn).length+1;s++)o[s]||(o[s]=null);return i.jsx("table",{style:{borderCollapse:"collapse",width:"fit-content",lineHeight:"0px"},children:i.jsx("tbody",{children:e.grid.map((o,s)=>i.jsx("tr",{onMouseEnter:r=>r.currentTarget.style.backgroundColor="rgba(255,255,255,0.11)",onMouseLeave:r=>r.currentTarget.style.backgroundColor="",children:o.map((r,l)=>i.jsx("td",{style:{height:F0,width:F0,border:"1px solid #464d6bc4",padding:0,textAlign:"center",backgroundColor:t===l?"rgba(255,255,255,0.11)":""},onMouseEnter:()=>n(l),onMouseLeave:()=>n(null),children:i.jsx("div",{children:r||""})},`${s}-${l}`))},s))})})}function XT(e){const{relicSetIndex:t,ornamentSetIndex:n}=e.newRowData,o=e.request,s=Ki(o),r=Ru(t),l=Eu(n),c=Bl(e.newRelics,r[0],r[1],l),d=[];for(const u of qt){const h=C.clone(c);h.stats[u]=(h.stats[u]??0)+1;const p=Ha(o,s,[{request:h,simType:qa.SubstatRolls,key:u}])[0];d.push({stat:u,simRequest:h,simResult:p})}return d}function YT(e,t,n){const o=C.clone(se.calculateRelicsFromId(e.id,n)),s=C.clone(se.calculateRelicsFromId(t.id,n)),r=C.clone(n);qe.condenseSingleRelicByPartSubstatsForOptimizer(o),qe.condenseSingleRelicByPartSubstatsForOptimizer(s),r.trace=!0;const l=Un(r,o,null,new $a(!0),new Ma(!0)),c=Un(r,s,null,new $a(!0),new Ma(!0)),d=Qu(c,r),u=B.getMetadata().characters[r.characterId],h=ei[u.element];return{oldRowData:e,newRowData:t,oldRelics:o,newRelics:s,request:r,oldX:l,newX:c,buffGroups:d,elementalDmgValue:h}}function JT(){var t,n,o;const e=((o=(n=(t=window.optimizerGrid)==null?void 0:t.current)==null?void 0:n.api)==null?void 0:o.getGridOption("pinnedTopRowData"))??[];return e&&e.length?e[0]:null}function H0(e,t){return(t==null?void 0:t.characterId)!=e}function QT(){return Gl[window.store.getState().optimizationId]}function $T(e){const{t}=V("optimizerTab",{keyPrefix:"ExpandedDataPanel.SubstatUpgrades"}),{t:n}=V("common",{keyPrefix:"ShortSpacedStats"}),o=e.analysis;if(Object.values(o.newRelics).some(d=>d.set==-1))return i.jsx(i.Fragment,{});const s=XT(o),r=["COMBO_DMG","EHP","HEAL_VALUE","SHIELD_VALUE"],l=[];for(const d of r){let u=!1;const h={key:d,upgrades:[]};for(const p of s){const S=o.newX[d].get(),E=p.simResult.tracedX[d].get()-S;if(E>1){const y=E/S;h.upgrades.push({key:p.stat,value:E,percent:y}),u=!0}}u&&l.push(h)}const c=[];for(const d of l){d.upgrades.sort((h,p)=>p.value-h.value);const u=[{title:t("ColumnHeaders.Substat"),dataIndex:"key",align:"center",width:100,render:h=>i.jsxs(g,{children:[i.jsx("img",{src:k.getStatIcon(h),style:{width:Ve,height:Ve,marginLeft:3,marginRight:3}}),n(h)]})},{title:t(`ColumnHeaders.${d.key}_P`),dataIndex:"percent",align:"center",width:110,render:h=>i.jsx(i.Fragment,{children:h==0?"":`${Kn(F.truncate100ths(h*100))}%`})},{title:t(`ColumnHeaders.${d.key}`),dataIndex:"value",align:"center",width:110,render:h=>i.jsx(i.Fragment,{children:h==0?"":`${Ct(h)}`})}];c.push(i.jsx(Qn,{className:"remove-table-bottom-border",columns:u,dataSource:d.upgrades,pagination:!1,size:"small",style:{flex:"1 1 calc(30% - 10px)",border:"1px solid #354b7d",boxShadow:Is,borderRadius:5,overflow:"hidden"}},d.key))}return i.jsx(g,{align:"start",gap:10,justify:"space-between",wrap:!0,style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"10px"},children:c})}function qT(){const e=window.store(r=>r.optimizerSelectedRowData),t=window.store(r=>r.optimizerTabFocusCharacter);if(N.useWatch(["characterId"],window.optimizerForm),N.useWatch(["lightCone"],window.optimizerForm),window.store.getState().activeKey!=de.OPTIMIZER)return i.jsx(i.Fragment,{});let n=QT()??se.getForm();const o=JT();if(H0(t,n)&&(n=se.getForm(),H0(t,n)))return i.jsx(i.Fragment,{});if(e==null||o==null||n==null||B.getCharacterById(n.characterId)==null)return i.jsx(i.Fragment,{});if(e.statSim)return i.jsx(i.Fragment,{});const s=YT(o,e,n);return console.log("Optimizer result",s),i.jsx(ey,{analysis:s})}function ey(e){const t=wl(e,50),n=I.useMemo(()=>t?i.jsx(ty,{analysis:t.analysis}):null,[t]);return t?n:null}function ty(e){const{analysis:t}=e;return i.jsx(Gu,{children:i.jsx(cs,{id:Ia.analysis,children:i.jsxs(g,{justify:"space-between",style:{width:"100%",paddingTop:4},gap:10,children:[i.jsxs(g,{vertical:!0,gap:10,children:[i.jsx(gE,{analysis:t}),i.jsx(dE,{analysis:t}),i.jsx($T,{analysis:t})]}),i.jsx($u,{buffGroups:t.buffGroups,singleColumn:!0})]})})})}function ay(){const e=window.store(M=>M.optimizerBuild),[t,n]=I.useState(),[o,s]=I.useState(!1);if(window.store.getState().activeKey!=de.OPTIMIZER)return i.jsx(i.Fragment,{});function r(M){const H=Al.onEditOk(t,M);n(H)}const l=B.getRelicsById(),c=se.getForm().characterId,d=e!=null&&e.Head?l[e.Head]:void 0,u=e!=null&&e.Hands?l[e.Hands]:void 0,h=e!=null&&e.Body?l[e.Body]:void 0,p=e!=null&&e.Feet?l[e.Feet]:void 0,S=e!=null&&e.PlanarSphere?l[e.PlanarSphere]:void 0,D=e!=null&&e.LinkRope?l[e.LinkRope]:void 0,E=d?dt.scoreCurrentRelic(d,c):void 0,y=u?dt.scoreCurrentRelic(u,c):void 0,P=h?dt.scoreCurrentRelic(h,c):void 0,_=p?dt.scoreCurrentRelic(p,c):void 0,x=S?dt.scoreCurrentRelic(S,c):void 0,G=D?dt.scoreCurrentRelic(D,c):void 0;return i.jsxs("div",{children:[i.jsxs(g,{gap:5,id:"optimizerBuildPreviewContainer",justify:"space-between",style:{paddingLeft:1,paddingRight:1},children:[i.jsx(Jt,{setEditModalOpen:s,setSelectedRelic:n,relic:d,score:E}),i.jsx(Jt,{setEditModalOpen:s,setSelectedRelic:n,relic:u,score:y}),i.jsx(Jt,{setEditModalOpen:s,setSelectedRelic:n,relic:h,score:P}),i.jsx(Jt,{setEditModalOpen:s,setSelectedRelic:n,relic:p,score:_}),i.jsx(Jt,{setEditModalOpen:s,setSelectedRelic:n,relic:S,score:x}),i.jsx(Jt,{setEditModalOpen:s,setSelectedRelic:n,relic:D,score:G})]}),i.jsx(Rs,{selectedRelic:t,type:"edit",onOk:r,setOpen:s,open:o})]})}const{useToken:Em}=Ft,{useBreakpoint:ny}=gh,{Text:po}=Ce;function iy(e){return[{label:i.jsx("div",{style:{width:"100%",fontWeight:e==vi?"bold":""},children:w.t("optimizerTab:Sidebar.GPUOptions.Experimental")}),key:vi},{label:i.jsx("div",{style:{width:"100%",fontWeight:e==xi?"bold":""},children:w.t("optimizerTab:Sidebar.GPUOptions.Stable")}),key:xi},{label:i.jsx("div",{style:{width:"100%",fontWeight:e==Pa?"bold":""},children:w.t("optimizerTab:Sidebar.GPUOptions.CPU")}),key:Pa}]}function ja(e){const t=e.total?`${la(e.right)} / ${la(e.total)} - (${la(Math.ceil(e.right/e.total*100))}%)`:`${la(e.right)}`;return i.jsxs(g,{justify:"space-between",children:[i.jsx(po,{style:{lineHeight:"24px"},children:e.left}),i.jsx(Mt,{style:{margin:"auto 10px",flexGrow:1,width:"unset",minWidth:"unset"},dashed:!0}),i.jsx(po,{style:{lineHeight:"24px"},children:t})]})}const us=5;function sy(){const{lg:e,xl:t,xxl:n}=ny(),o=B.getState().settings[je.PermutationsSidebarBehavior.name]==je.PermutationsSidebarBehavior.NoShow,s=B.getState().settings[je.PermutationsSidebarBehavior.name]==je.PermutationsSidebarBehavior.ShowXL,r=B.getState().settings[je.PermutationsSidebarBehavior.name]==je.PermutationsSidebarBehavior.ShowXXL,l=o||!(e&&s&&!t||e&&r&&!n);return i.jsx(uy,{isFullSize:l})}function w0(){const{t:e}=V("optimizerTab",{keyPrefix:"Sidebar.GPUOptions"}),t=window.store(n=>n.savedSession[Ne.computeEngine]);return i.jsx(Es,{menu:{items:iy(t),onClick:n=>{n.key==Pa?(window.store.getState().setSavedSessionKey(Ne.computeEngine,Pa),J.success(e("EngineSwitchSuccessMsg.CPU"))):Ud(!0).then(o=>{o&&(window.store.getState().setSavedSessionKey(Ne.computeEngine,n.key),J.success(n.key==vi?e("EngineSwitchSuccessMsg.Experimental"):e("EngineSwitchSuccessMsg.Stable")))})}},className:"custom-dropdown-button",trigger:["click"],children:i.jsx(Y,{style:{padding:3},children:i.jsxs(g,{justify:"space-around",align:"center",style:{width:"100%"},children:[i.jsx("div",{style:{width:1}}),i.jsx(po,{children:e(`Display.${t}`)}),i.jsx(Eo,{})]})})})}function oy(){const e=Ml(),t=e.getGridOption("pinnedTopRowData"),n=e.getSelectedNodes();if(!n||n.length==0)J.warning(w.t("optimizerTab:Sidebar.Pinning.Messages.NoneSelected"));else if(n[0].data.statSim)J.warning(w.t("optimizerTab:Sidebar.Pinning.Messages.SimSelected"));else if(t.find(o=>String(o.id)==String(n[0].data.id)))J.warning(w.t("optimizerTab:Sidebar.Pinning.Messages.AlreadyPinned"));else{const o=n[0].data;o&&(t.push(o),e.updateGridOptions({pinnedTopRowData:t}))}}function ry(){const e=Ml(),t=e==null?void 0:e.getGridOption("pinnedTopRowData");t!=null&&t.length&&e.updateGridOptions({pinnedTopRowData:[t[0]]})}function ly(){console.log("Filter clicked"),se.applyRowFilters()}function cy(e,t,n,o,s,r){if(!e)return w.t("optimizerTab:Sidebar.ProgressText.Progress");let l=Date.now();t&&(l=t);const c=r==Pa?o:Math.max(o,65536*512),d=l-e;if(!t&&d<5e3&&o<5e6||!o)return w.t("optimizerTab:Sidebar.ProgressText.CalculatingETA");const u=d/o*(n-o),h=c/(d/1e3);return s?w.t("optimizerTab:Sidebar.ProgressText.TimeRemaining",{rate:la(Math.floor(h)),timeRemaining:F.msToReadable(u)}):w.t("optimizerTab:Sidebar.ProgressText.Finished",{rate:la(Math.floor(h))})}function dy(e){const{t}=V("modals",{keyPrefix:"ManyPerms"});return i.jsx(_t,{title:t("Title"),open:e.manyPermsModalOpen,width:900,destroyOnClose:!0,centered:!0,onOk:()=>e.setManyPermsModalOpen(!1),onCancel:()=>e.setManyPermsModalOpen(!1),footer:null,children:i.jsxs(g,{justify:"space-between",align:"center",style:{height:45,marginTop:30,marginBottom:15},gap:16,children:[i.jsx(po,{children:t("Text")}),i.jsx(Y,{onClick:()=>e.setManyPermsModalOpen(!1),style:{width:250},type:"primary",children:t("Cancel")}),i.jsx(Y,{onClick:()=>{e.setManyPermsModalOpen(!1),e.startSearch()},style:{width:250},type:"primary",children:t("Proceed")})]})})}function uy(e){const{token:t}=Em(),n="rgba(0, 0, 0, 0.25) 0px 0.0625em 0.0625em, rgba(0, 0, 0, 0.25) 0px 0.125em 0.5em, rgba(255, 255, 255, 0.15) 0px 0px 0px 1px inset";return i.jsx(g,{vertical:!0,style:{overflow:"clip"},children:i.jsx(g,{justify:e.isFullSize?"center":"space-evenly",style:e.isFullSize?{position:"sticky",top:"25.6%",transform:"translateY(-50%)",paddingLeft:10,height:150}:{height:121,overflow:"clip",position:"fixed",width:"100%",bottom:0,left:0,backgroundColor:"rgb(29 42 71)",boxShadow:n,borderRadius:5,padding:Ii,zIndex:3},children:i.jsx(g,{style:e.isFullSize?{borderRadius:5,backgroundColor:t.colorBgContainer,padding:Ii,height:"fit-content",width:233,boxShadow:n,gap:Ii}:void 0,children:i.jsxs(g,{vertical:e.isFullSize,gap:e.isFullSize?5:20,children:[i.jsx(my,{isFullSize:e.isFullSize}),i.jsx(fy,{isFullSize:e.isFullSize}),i.jsx(hy,{isFullSize:e.isFullSize})]})})})})}function my(e){const t=window.store(c=>c.permutationDetails),n=window.store(c=>c.permutations),o=window.store(c=>c.permutationsSearched),s=window.store(c=>c.permutationsResults),{t:r}=V("optimizerTab",{keyPrefix:"Sidebar"}),{t:l}=V("common",{keyPrefix:"ReadableParts"});return i.jsxs(g,{vertical:!0,gap:e.isFullSize?10:5,style:{minWidth:211},children:[i.jsxs(g,{justify:"space-between",align:"center",children:[i.jsx($,{children:r("Permutations")}),i.jsx(ft,{type:ut.optimizationDetails()})]}),e.isFullSize&&i.jsxs(g,{vertical:!0,children:[i.jsx(ja,{left:l("Head"),right:t.Head,total:t.HeadTotal}),i.jsx(ja,{left:l("Hands"),right:t.Hands,total:t.HandsTotal}),i.jsx(ja,{left:l("Body"),right:t.Body,total:t.BodyTotal}),i.jsx(ja,{left:l("Feet"),right:t.Feet,total:t.FeetTotal}),i.jsx(ja,{left:l("PlanarSphere"),right:t.PlanarSphere,total:t.PlanarSphereTotal}),i.jsx(ja,{left:l("LinkRope"),right:t.LinkRope,total:t.LinkRopeTotal})]}),i.jsxs(g,{vertical:!0,children:[i.jsx(ja,{left:r("Perms"),right:n}),i.jsx(ja,{left:r("Searched"),right:o}),i.jsx(ja,{left:r("Results"),right:s})]}),e.isFullSize&&i.jsx(Cm,{})]})}function Cm(){const e=window.store(c=>c.permutations),t=window.store(c=>c.permutationsSearched),n=window.store(c=>c.optimizerStartTime),o=window.store(c=>c.optimizerEndTime),s=window.store(c=>c.optimizerRunningEngine),r=window.store(c=>c.optimizationInProgress),{token:l}=Em();return i.jsxs(g,{vertical:!0,children:[i.jsx($,{children:cy(n,o,e,t,r,s)}),i.jsx(Sh,{strokeColor:l.colorPrimary,steps:17,size:[8,5],percent:Math.floor(t/e*100)})]})}function hy(e){const{t}=V("optimizerTab",{keyPrefix:"Sidebar.ResultsGroup"});return i.jsxs(g,{vertical:!0,gap:5,children:[i.jsxs(g,{justify:"space-between",align:"center",children:[i.jsx($,{children:t("Header")}),i.jsx(ft,{type:ut.actions()})]}),i.jsxs(g,{gap:e.isFullSize?us:8,justify:"space-around",children:[i.jsx(Y,{type:"primary",onClick:se.equipClicked,style:{width:"100px"},children:t("Equip")}),i.jsx(Y,{onClick:ly,style:{width:"100px"},children:t("Filter")})]}),i.jsxs(g,{gap:e.isFullSize?us:8,justify:"space-around",children:[i.jsx(Y,{style:{width:"100px"},onClick:oy,children:t("Pin")}),i.jsx(Y,{style:{width:"100px"},onClick:ry,children:t("Clear")})]})]})}function fy(e){const{t}=V("optimizerTab",{keyPrefix:"Sidebar"}),{t:n}=V("common"),o=window.store(D=>D.permutations),s=window.store(D=>D.optimizationInProgress),r=window.store(D=>D.setOptimizationInProgress),l=window.store(D=>D.savedSession[Ne.computeEngine]),[c,d]=I.useState(!1);function u(){console.log("Cancel clicked"),r(!1),io.cancel(window.store.getState().optimizationId)}function h(){window.optimizerStartClicked()}function p(){o<1e9||l==vi||l==xi?h():d(!0)}function S(){console.log("Reset clicked"),se.resetFilters()}return i.jsxs(g,{vertical:e.isFullSize,gap:e.isFullSize?5:20,style:e.isFullSize?{display:"flex",flexDirection:"column"}:{display:"flex",flexDirection:"row-reverse"},children:[i.jsx(dy,{startSearch:h,manyPermsModalOpen:c,setManyPermsModalOpen:d}),i.jsxs(g,{vertical:!0,gap:5,children:[i.jsx($,{children:t("ControlsGroup.Header")}),i.jsxs(g,{gap:us,style:{marginBottom:2},vertical:!0,children:[i.jsx(g,{gap:us,children:i.jsx(Y,{icon:i.jsx(bd,{}),type:"primary",loading:s,onClick:p,style:{flex:1,minWidth:211},children:t("ControlsGroup.Start")})}),e.isFullSize&&i.jsx(w0,{}),i.jsxs(g,{gap:us,children:[i.jsx(Y,{onClick:u,style:{flex:1},children:n("Cancel")}),i.jsx(Cn,{title:t("ControlsGroup.ResetConfirm.Title"),description:t("ControlsGroup.ResetConfirm.Description"),onConfirm:S,okText:n("Yes"),cancelText:n("No"),children:i.jsx(Y,{style:{flex:1},children:n("Reset")})})]})]})]}),i.jsxs(g,{vertical:!0,gap:5,style:{flex:1,minWidth:211},children:[i.jsxs(g,{justify:"space-between",align:"center",children:[i.jsx($,{children:t("StatViewGroup.Header")}),i.jsx(ft,{type:ut.statDisplay()})]}),i.jsx(py,{}),i.jsx(gy,{isFullSize:e.isFullSize})]}),!e.isFullSize&&i.jsxs(g,{vertical:!0,gap:3,style:{flex:1,minWidth:211},children:[i.jsx($,{children:t("ComputeEngine")}),i.jsx(w0,{}),i.jsx(Cm,{})]})]})}function py(){const{t:e}=V("optimizerTab",{keyPrefix:"Sidebar"}),t=window.store(o=>o.statDisplay),n=window.store(o=>o.setStatDisplay);return i.jsxs(Ye.Group,{onChange:o=>{const{target:{value:s}}=o;n(s)},optionType:"button",buttonStyle:"solid",value:t,style:{width:"100%",display:"flex"},children:[i.jsx(Ye,{style:{display:"flex",flex:1,justifyContent:"center",paddingInline:0},value:"combat",children:e("StatViewGroup.CombatStats")}),i.jsx(Ye,{style:{display:"flex",flex:1,justifyContent:"center",paddingInline:0},value:"base",defaultChecked:!0,children:e("StatViewGroup.BasicStats")})]})}function gy(e){const{t}=V("optimizerTab",{keyPrefix:"Sidebar.StatViewGroup"}),n=window.store(l=>l.memoDisplay),o=window.store(l=>l.setMemoDisplay),s=window.store(l=>l.optimizerTabFocusCharacter),r=Tm(s);return i.jsxs(Ye.Group,{onChange:l=>{const{target:{value:c}}=l;o(c)},optionType:"button",buttonStyle:"solid",disabled:!r,value:r?n:"summoner",style:{width:"100%",display:r||!e.isFullSize?"flex":"none"},children:[i.jsx(Ye,{style:{display:"flex",flex:1,justifyContent:"center",paddingInline:0},value:"summoner",children:t("SummonerStats")}),i.jsx(Ye,{style:{display:"flex",flex:1,justifyContent:"center",paddingInline:0},value:"memo",defaultChecked:!0,children:t("MemospriteStats")})]})}function Tm(e){return e?B.getMetadata().characters[e].path=="Remembrance":!1}const{useToken:Sy}=Ft,by=[T.OHB,T.HEAL,T.SHIELD,T.MEMO_SKILL,T.MEMO_TALENT],Ji={WIDTH:1227,HEIGHT:600,MIN_HEIGHT:300};function Dy(){console.log("======================================================================= RENDER OptimizerGrid");const{token:e}=Sy(),{t,i18n:n}=V("optimizerTab"),o=I.useRef(),[s,r]=I.useState(!1),l=window.store(P=>P.optimizerTabFocusCharacter),c=I.useRef(n.resolvedLanguage);window.optimizerGrid=o;const d=I.useMemo(()=>se.getDataSource(),[]),u=window.store(P=>P.statDisplay),h=window.store(P=>P.memoDisplay),S=Tm(l)&&h==="memo",D=I.useMemo(()=>{let P=u==="combat"?S?bS(t):SS(t):S?gS(t):pS(t);if(l){const _=B.getMetadata().characters[l].scoringMetadata,x=new Set([..._.hiddenColumns??[],...by]),G=new Set(_.addedColumns??[]),M=Array.from(x).filter(H=>!G.has(H)).map(H=>u==="combat"?S?H.memoCombatGridColumn:H.combatGridColumn:S?H.memoBasicGridColumn:H.basicGridColumn);P=P.filter(H=>!M.includes(H.field))}return P},[l,u,h,t]);Tc.datasource=d;const E=I.useCallback(P=>jl(P,o,_=>se.cellClicked(_)),[]);I.useEffect(()=>{n.resolvedLanguage!==c.current&&(r(!0),c.current=n.resolvedLanguage,setTimeout(()=>r(!1),100))},[n.resolvedLanguage]);const y=I.useCallback(P=>({to:t("Grid.To"),pageSizeSelectorLabel:t("Grid.PageSelectorLabel"),of:t("Grid.Of"),page:t("Grid.Page")})[P.key]??P.defaultValue,[t]);return i.jsxs(g,{children:[s&&i.jsx("div",{style:{width:Ji.WIDTH,height:Ji.HEIGHT}}),!s&&i.jsx("div",{id:"optimizerGridContainer",className:"ag-theme-balham-dark",style:{width:Ji.WIDTH,minHeight:Ji.MIN_HEIGHT,height:Ji.HEIGHT,resize:"vertical",overflow:"hidden",boxShadow:Is,..._l(e)},children:i.jsx(el,{animateRows:!1,columnDefs:D,defaultColDef:fS,gridOptions:Tc,headerHeight:24,onCellClicked:se.cellClicked,ref:o,paginationNumberFormatter:P=>fn(P.value),getLocaleText:y,navigateToNextCell:E,rowSelection:"single"})})]})}function Ry(){const e=window.store(t=>t.settings.ExpandedInfoPanelPosition);return console.log("======================================================================= RENDER OptimizerTab"),i.jsxs(g,{children:[i.jsxs(g,{vertical:!0,gap:10,style:{marginBottom:100},children:[i.jsx(DD,{}),i.jsx(Dy,{}),i.jsxs(g,{vertical:!0,gap:10,style:{flexDirection:e==je.ExpandedInfoPanelPosition.Below?"column":"column-reverse"},children:[i.jsx(ay,{}),i.jsx(qT,{})]})]}),i.jsx(G2,{}),i.jsx(M2,{}),i.jsx(sy,{})]})}const Ey=(e,t)=>{const n=()=>{document.removeEventListener(e,t)};I.useEffect(()=>(document.addEventListener(e,t),()=>n()),[e,t])},{useToken:Cy}=Ft,{Text:Ty}=Ce,yy=34,Py=34,Iy=k.getBlank();function By(e){const t=window.store(A=>A.setRelicTabFilters),n=window.store(A=>A.setRelicsTabFocusCharacter),[o,s]=I.useState(),{t:r,i18n:l}=V(["relicsTab","common","gameData"]),c=I.useMemo(()=>ru(),[]);function d(A,O,j){function ie(ee){const me={[a.Physical_DMG]:"Physical",[a.Fire_DMG]:"Fire",[a.Ice_DMG]:"Ice",[a.Lightning_DMG]:"Lightning",[a.Wind_DMG]:"Wind",[a.Quantum_DMG]:"Quantum",[a.Imaginary_DMG]:"Imaginary"},he=me[ee]?30:Py,De=k.getElement(me[ee]),ae=De!=Iy?De:O(ee);return j?i.jsx(Y0,{title:l.exists(`common:Stats.${ee}`)?r(`common:Stats.${ee}`):r(`gameData:RelicSets.${rt[ee]}.Name`),mouseEnterDelay:.2,children:i.jsx("img",{style:{width:he},src:ae})}):i.jsx("img",{style:{width:he},src:ae})}return A.map(ee=>({key:ee,display:ie(ee)}))}function u(A){return A.map(O=>({key:O[0],display:i.jsx(g,{style:{height:yy},justify:"space-around",align:"center",children:i.jsx(Ty,{style:{fontSize:18},children:O[1]})})}))}function h(A){return A.map(O=>({key:O,display:K.renderGrade({grade:O})}))}function p(A){return A.map(O=>({key:O,display:K.renderGrade({grade:-1,verified:O=="true"})}))}function S(A){return A.map(O=>({key:O,display:K.renderEquippedBy(O)}))}const D=h([2,3,4,5]),E=p(["true","false"]),y=d(Object.values(R).filter(A=>!Gi[A]),A=>k.getSetImage(A,m.Parts.PlanarSphere),!0),P=d(Object.values(m.Parts),A=>k.getPart(A),!1),_=d(m.MainStats,A=>k.getStatIcon(A,!0),!0),x=d(m.SubStats,A=>k.getStatIcon(A,!0),!0),G=u([[0,"+0"],[3,"+3"],[6,"+6"],[9,"+9"],[12,"+12"],[15,"+15"]]),M=S(["true","false"]);window.refreshRelicsScore=()=>{setTimeout(()=>{H(o)},100)},Ey("refreshRelicsScore",window.refreshRelicsScore),I.useEffect(()=>{B.getState().settings[je.RelicPotentialLoadBehavior.name]==je.RelicPotentialLoadBehavior.ScoreAtStartup&&H(o)},[]);function H(A,O){var he,De;const j=O?[O]:Object.values(B.getRelicsById());console.log("idChange",A),n(A),s(A);const ie=c.map(ae=>ae.id),ee=window.store.getState().excludedRelicPotentialCharacters,me=new dt;for(const ae of j){const Q=A?me.getFutureRelicScore(ae,A):{current:0,best:0,average:0};Q.potentialSelected=A?me.scoreRelicPotential(ae,A):{bestPct:0,averagePct:0,rerollAvgPct:0},Q.potentialAllAll={bestPct:0,averagePct:0,rerollAvgPct:0},Q.potentialAllCustom={bestPct:0,averagePct:0,rerollAvgPct:0},Q.rerollAllAll={bestPct:0,averagePct:0,rerollAvgPct:0},Q.rerollAllCustom={bestPct:0,averagePct:0,rerollAvgPct:0},Q.rerollAvgSelected=Math.max(0,Q.potentialSelected.rerollAvgPct);for(const Oe of ie){const Ae=me.scoreRelicPotential(ae,Oe);Q.potentialAllAll={bestPct:Math.max(Ae.bestPct,Q.potentialAllAll.bestPct),averagePct:Math.max(Ae.averagePct,Q.potentialAllAll.averagePct),rerollAvgPct:0},Q.rerollAllAll={bestPct:0,averagePct:0,rerollAvgPct:Math.max(Ae.rerollAvgPct,Q.rerollAllAll.rerollAvgPct)},ee.includes(Oe)||(Q.potentialAllCustom={bestPct:Math.max(Ae.bestPct,Q.potentialAllCustom.bestPct),averagePct:Math.max(Ae.averagePct,Q.potentialAllCustom.averagePct),rerollAvgPct:0},Q.rerollAllCustom={bestPct:0,averagePct:0,rerollAvgPct:Math.max(Ae.rerollAvgPct,Q.rerollAllCustom.rerollAvgPct)})}if(Q.rerollAvgSelectedDelta=Q.rerollAvgSelected==0?0:Q.rerollAvgSelected-Q.potentialSelected.averagePct,Q.rerollAvgSelectedEquippedDelta=A?Q.rerollAvgSelected:0,A){const Oe=B.getCharacterById(A).equipped[ae.part];Oe&&(Q.rerollAvgSelectedEquippedDelta-=me.scoreRelicPotential(B.getRelicById(Oe),A).averagePct)}ae.weights=Q}O||(B.setRelics(C.clone(j)),A&&((De=(he=window.relicsGrid)==null?void 0:he.current)!=null&&De.api)&&(window.relicsGrid.current.api.getColumnState().filter(Q=>Q.sort!==null)||window.relicsGrid.current.api.applyColumnState({state:[{colId:"weights.current",sort:"desc"}],defaultState:{sort:null}})),B.refreshRelics())}function Z(){t({set:[],part:[],enhance:[],mainStats:[],subStats:[],grade:[],verified:[],equippedBy:[]})}function X(){const A=window.store.getState().relicsTabFocusCharacter;A&&window.store.getState().setScoringAlgorithmFocusCharacter(A),window.store.getState().setScoringModalOpen(!0)}function W(){H(o)}function L(A){H(o,A)}return window.rescoreSingleRelic=L,i.jsxs(g,{vertical:!0,gap:2,children:[i.jsxs(g,{gap:10,children:[i.jsxs(g,{vertical:!0,flex:1,children:[i.jsx($,{children:r("RelicFilterBar.Part")}),i.jsx(dn,{name:"part",tags:P,flexBasis:"15%"})]}),i.jsxs(g,{vertical:!0,style:{height:"100%"},flex:1,children:[i.jsx($,{children:r("RelicFilterBar.Enhance")}),i.jsx(dn,{name:"enhance",tags:G,flexBasis:"15%"})]}),i.jsxs(g,{vertical:!0,flex:.5,children:[i.jsx($,{children:r("RelicFilterBar.Grade")}),i.jsx(dn,{name:"grade",tags:D,flexBasis:"15%"})]}),i.jsxs(g,{vertical:!0,flex:.25,children:[i.jsx($,{children:r("RelicFilterBar.Verified")}),i.jsx(dn,{name:"verified",tags:E,flexBasis:"15%"})]}),i.jsxs(g,{vertical:!0,flex:.25,children:[i.jsx($,{children:r("RelicFilterBar.Equipped")}),i.jsx(dn,{name:"equippedBy",tags:M,flexBasis:"15%"})]}),i.jsxs(g,{vertical:!0,flex:.4,children:[i.jsx($,{children:r("RelicFilterBar.Clear")}),i.jsx(Y,{icon:i.jsx(bh,{}),onClick:Z,style:{flexGrow:1,height:"100%"},children:r("RelicFilterBar.ClearButton")})]})]}),i.jsxs(g,{vertical:!0,children:[i.jsx($,{children:r("RelicFilterBar.Set")}),i.jsx(dn,{name:"set",tags:y,flexBasis:`${100/Object.values($n).length}%`})]}),i.jsxs(g,{vertical:!0,children:[i.jsx($,{children:r("RelicFilterBar.Mainstat")}),i.jsx(dn,{name:"mainStats",tags:_})]}),i.jsxs(g,{vertical:!0,children:[i.jsx($,{children:r("RelicFilterBar.Substat")}),i.jsx(dn,{name:"subStats",tags:x})]}),i.jsxs(g,{gap:10,children:[i.jsxs(g,{vertical:!0,flex:.5,children:[i.jsx($,{children:r("RelicFilterBar.RecommendationHeader")}),i.jsxs(g,{gap:10,children:[i.jsx(Li,{value:o,selectStyle:{flex:1},onChange:A=>{setTimeout(()=>H(A),20)},withIcon:!0}),i.jsx(Y,{onClick:W,style:{flex:1,padding:"0px"},children:r("RelicFilterBar.ReapplyButton")}),i.jsx(Y,{onClick:X,style:{flex:1,padding:"0px"},children:r("RelicFilterBar.ScoringButton")})]})]}),i.jsx(g,{vertical:!0,flex:.25,gap:10,children:i.jsxs(g,{vertical:!0,children:[i.jsxs(g,{justify:"space-between",align:"center",children:[i.jsx($,{children:r("RelicFilterBar.Rating")}),i.jsx(ft,{type:ut.valueColumns()})]}),i.jsx(g,{gap:10,children:i.jsx(z,{mode:"multiple",allowClear:!0,value:e.valueColumns,onChange:e.setValueColumns,options:e.valueColumnOptions,maxTagCount:"responsive",style:{flex:1},listHeight:750,dropdownStyle:{width:"fit-content"}})})]})}),i.jsxs(g,{vertical:!0,flex:.25,children:[i.jsx($,{children:r("RelicFilterBar.CustomCharsHeader")}),i.jsx(Li,{value:window.store.getState().excludedRelicPotentialCharacters,selectStyle:{flex:1},onChange:A=>{const O=Array.from(A||new Map).filter(j=>j[1]).map(j=>j[0]);window.store.getState().setExcludedRelicPotentialCharacters(O),Ee.delayedSave(),setTimeout(()=>W(),100)},multipleSelect:!0})]})]})]})}function dn(e){const{token:t}=Cy(),n=window.store(l=>l.relicTabFilters),o=window.store(l=>l.setRelicTabFilters),s=n[e.name],r=(l,c)=>{const d=c?[...s,l]:s.filter(h=>h!=l),u=C.clone(n);u[e.name]=d,console.log("Relic tab filters",e.name,u),o(u)};return i.jsx(g,{style:{flexWrap:"wrap",flexGrow:1,backgroundColor:t.colorBgContainer,boxShadow:`0px 0px 0px 1px ${t.colorBorder} inset`,borderRadius:6,overflow:"hidden"},children:e.tags.map(l=>i.jsx(Q0,{checked:s.includes(l.key),onChange:c=>r(l.key,c),style:{flex:1,flexBasis:e.flexBasis,boxShadow:`1px 1px 1px 0px ${t.colorBorder}`,backgroundColor:s.includes(l.key)?t.colorPrimary:"transparent"},children:i.jsx(g,{align:"center",justify:"space-around",style:{height:"100%"},children:l.display})},l.key))})}const{useToken:Gy}=Ft,My="PLOT_ALL",Rr="PLOT_CUSTOM",Er=1460;function ym(){const{token:e}=Gy();console.log("======================================================================= RENDER RelicsTab");const t=I.useRef();window.relicsGrid=t;const[n,o]=I.useState(B.getRelics());window.setRelicRows=o;const[s,r]=I.useState(),[l,c]=I.useState([]),[d,u]=I.useState(!1),[h,p]=I.useState(!1),[S,D]=I.useState(!1),[E,y]=I.useState(Rr),[P,_]=I.useState("buckets"),[x,G]=I.useState(!1),M=window.store(U=>U.relicTabFilters),H=window.store(U=>U.inventoryWidth),Z=window.store(U=>U.setInventoryWidth),X=window.store(U=>U.rowLimit),W=window.store(U=>U.setRowLimit),{t:L,i18n:A}=V(["relicsTab","common","gameData"]),O=I.useRef(A.resolvedLanguage),j=[{value:"buckets",label:L("Toolbar.InsightOptions.Buckets")},{value:"top10",label:L("Toolbar.InsightOptions.Top10")}],ie=[{value:My,label:L("Toolbar.PlotOptions.PlotAll")},{value:Rr,label:L("Toolbar.PlotOptions.PlotCustom")}];I.useEffect(()=>{A.resolvedLanguage!==O.current&&(G(!0),setTimeout(()=>G(!1),100))},[A.resolvedLanguage]),I.useEffect(()=>{var ke,Je;if(!((Je=(ke=window.relicsGrid)==null?void 0:ke.current)!=null&&Je.api))return;if(console.log("RelicTabFilters",M),Object.values(M).filter(Me=>Me.length>0).length==0){window.relicsGrid.current.api.setFilterModel(null);return}const U={};U.set={conditions:M.set.map(Me=>({filterType:"text",type:"equals",filter:Me})),operator:"OR"},U.part={conditions:M.part.map(Me=>({filterType:"text",type:"equals",filter:Me})),operator:"OR"},U.grade={conditions:M.grade.map(Me=>({filterType:"number",type:"equals",filter:Me})),operator:"OR"},U.verified={conditions:[M.verified.includes("true")&&{filterType:"text",type:"true"},M.verified.includes("false")&&{filterType:"text",type:"false"}],operator:"OR"},U.equippedBy={conditions:[M.equippedBy.includes("true")&&{filterType:"text",type:"notBlank"},M.equippedBy.includes("false")&&{filterType:"text",type:"blank"}],operator:"OR"},U["main.stat"]={conditions:M.mainStats.map(Me=>({filterType:"text",type:"equals",filter:Me})),operator:"OR"};for(const Me of M.subStats)U[`augmentedStats.${Me}`]={filterType:"number",type:"greaterThan",filter:0};U.enhance={conditions:M.enhance.flatMap(Me=>[{filterType:"number",type:"equals",filter:Me},{filterType:"number",type:"equals",filter:Me+1},{filterType:"number",type:"equals",filter:Me+2}]),operator:"OR"},console.log("FilterModel",U),window.relicsGrid.current.api.setFilterModel(U)},[M]);const[ee,me]=I.useState(0),[he,De]=I.useState({set:void 0,part:void 0});I.useEffect(()=>{if(!s)return;const U=Math.max(1,X)*Math.max(1,H),ke=B.getRelics().filter(pt=>pt.ageIndex<=s.ageIndex),Je=ke.filter(pt=>s.part==pt.part).length-1;if(Je<U){me(Je),De({set:void 0,part:s.part});return}const Me=ke.filter(pt=>s.part==pt.part&&s.set==pt.set).length-1;me(Me),De({set:s.set,part:s.part})},[s,H,X]);const ae=I.useMemo(()=>[{label:L("RelicGrid.ValueColumns.SelectedCharacter.Label"),options:[{column:L("RelicGrid.ValueColumns.SelectedCharacter.ScoreCol.Header"),value:"weights.current",label:L("RelicGrid.ValueColumns.SelectedCharacter.ScoreCol.Label")},{column:L("RelicGrid.ValueColumns.SelectedCharacter.AvgPotCol.Header"),value:"weights.potentialSelected.averagePct",label:L("RelicGrid.ValueColumns.SelectedCharacter.AvgPotCol.Label"),percent:!0},{column:L("RelicGrid.ValueColumns.SelectedCharacter.MaxPotCol.Header"),value:"weights.potentialSelected.bestPct",label:L("RelicGrid.ValueColumns.SelectedCharacter.MaxPotCol.Label"),percent:!0},{column:L("RelicGrid.ValueColumns.SelectedCharacter.RerollAvg.Header"),value:"weights.rerollAvgSelected",label:L("RelicGrid.ValueColumns.SelectedCharacter.RerollAvg.Label"),percent:!0},{column:L("RelicGrid.ValueColumns.SelectedCharacter.RerollAvgDelta.Header"),value:"weights.rerollAvgSelectedDelta",label:L("RelicGrid.ValueColumns.SelectedCharacter.RerollAvgDelta.Label"),percent:!0},{column:L("RelicGrid.ValueColumns.SelectedCharacter.RerollAvgEquippedDelta.Header"),value:"weights.rerollAvgSelectedEquippedDelta",label:L("RelicGrid.ValueColumns.SelectedCharacter.RerollAvgEquippedDelta.Label"),percent:!0}]},{label:L("RelicGrid.ValueColumns.CustomCharacters.Label"),options:[{column:L("RelicGrid.ValueColumns.CustomCharacters.AvgPotCol.Header"),value:"weights.potentialAllCustom.averagePct",label:L("RelicGrid.ValueColumns.CustomCharacters.AvgPotCol.Label"),percent:!0},{column:L("RelicGrid.ValueColumns.CustomCharacters.MaxPotCol.Header"),value:"weights.potentialAllCustom.bestPct",label:L("RelicGrid.ValueColumns.CustomCharacters.MaxPotCol.Label"),percent:!0},{column:L("RelicGrid.ValueColumns.CustomCharacters.RerollAvg.Header"),value:"weights.rerollAllCustom.rerollAvgPct",label:L("RelicGrid.ValueColumns.CustomCharacters.RerollAvg.Label"),percent:!0}]},{label:L("RelicGrid.ValueColumns.AllCharacters.Label"),options:[{column:L("RelicGrid.ValueColumns.AllCharacters.AvgPotCol.Header"),value:"weights.potentialAllAll.averagePct",label:L("RelicGrid.ValueColumns.AllCharacters.AvgPotCol.Label"),percent:!0},{column:L("RelicGrid.ValueColumns.AllCharacters.MaxPotCol.Header"),value:"weights.potentialAllAll.bestPct",label:L("RelicGrid.ValueColumns.AllCharacters.MaxPotCol.Label"),percent:!0},{column:L("RelicGrid.ValueColumns.AllCharacters.RerollAvg.Header"),value:"weights.rerollAllAll.rerollAvgPct",label:L("RelicGrid.ValueColumns.AllCharacters.RerollAvg.Label"),percent:!0}]},{label:L("RelicGrid.ValueColumns.ComingSoon.Label"),options:[{column:L("RelicGrid.ValueColumns.ComingSoon.SetsPotential.Header"),disabled:!0,value:"weights.potentialAllSets",label:L("RelicGrid.ValueColumns.ComingSoon.SetsPotential.Label"),percent:!0}]}],[L]),Q=I.useMemo(()=>ae.flatMap(U=>U.options),[ae]),[Oe,Ae]=I.useState(["weights.current","weights.rerollAvgSelected","weights.rerollAvgSelectedDelta","weights.potentialSelected.averagePct","weights.potentialSelected.bestPct","weights.potentialAllCustom.averagePct","weights.potentialAllCustom.bestPct"]),Ze=I.useMemo(()=>[{field:"verified",hide:!0,filter:"agTextColumnFilter",filterParams:{maxNumConditions:2}},{field:"equippedBy",headerName:L("RelicGrid.Headers.EquippedBy"),width:40,cellRenderer:K.characterIcon,filter:"agTextColumnFilter"},{field:"set",cellRenderer:K.anySet,width:40,headerName:L("RelicGrid.Headers.Set"),filter:"agTextColumnFilter"},{field:"grade",width:30,cellRenderer:K.renderGradeCell,headerName:"★",headerClass:"large-grid-column-header",filter:"agNumberColumnFilter"},{field:"enhance",width:30,headerName:"+",headerClass:"large-grid-column-header",filter:"agNumberColumnFilter"},{field:"part",valueFormatter:K.readablePart,width:55,headerName:L("RelicGrid.Headers.Part"),filter:"agTextColumnFilter"},{field:"main.stat",valueFormatter:K.readableStat,headerName:L("RelicGrid.Headers.MainStat"),width:78,filter:"agTextColumnFilter"},{field:"main.value",headerName:L("RelicGrid.Headers.MainValue"),width:50,valueFormatter:K.mainValueRenderer,filter:"agNumberColumnFilter"},{field:`augmentedStats.${m.Stats.HP_P}`,headerName:L("RelicGrid.Headers.HPP"),cellStyle:be.getRelicGradient,valueFormatter:K.hideZeroesX100Tenths,filter:"agNumberColumnFilter"},{field:`augmentedStats.${m.Stats.ATK_P}`,headerName:L("RelicGrid.Headers.ATKP"),cellStyle:be.getRelicGradient,valueFormatter:K.hideZeroesX100Tenths,filter:"agNumberColumnFilter"},{field:`augmentedStats.${m.Stats.DEF_P}`,headerName:L("RelicGrid.Headers.DEFP"),cellStyle:be.getRelicGradient,valueFormatter:K.hideZeroesX100Tenths,filter:"agNumberColumnFilter"},{field:`augmentedStats.${m.Stats.HP}`,headerName:L("RelicGrid.Headers.HP"),cellStyle:be.getRelicGradient,valueFormatter:K.hideZeroesFloor,filter:"agNumberColumnFilter"},{field:`augmentedStats.${m.Stats.ATK}`,headerName:L("RelicGrid.Headers.ATK"),cellStyle:be.getRelicGradient,valueFormatter:K.hideZeroesFloor,filter:"agNumberColumnFilter"},{field:`augmentedStats.${m.Stats.DEF}`,headerName:L("RelicGrid.Headers.DEF"),cellStyle:be.getRelicGradient,valueFormatter:K.hideZeroesFloor,filter:"agNumberColumnFilter"},{field:`augmentedStats.${m.Stats.SPD}`,headerName:L("RelicGrid.Headers.SPD"),cellStyle:be.getRelicGradient,valueFormatter:K.hideZeroes10thsRelicTabSpd,filter:"agNumberColumnFilter"},{field:`augmentedStats.${m.Stats.CR}`,headerName:L("RelicGrid.Headers.CR"),cellStyle:be.getRelicGradient,valueFormatter:K.hideZeroesX100Tenths,filter:"agNumberColumnFilter"},{field:`augmentedStats.${m.Stats.CD}`,headerName:L("RelicGrid.Headers.CD"),cellStyle:be.getRelicGradient,valueFormatter:K.hideZeroesX100Tenths,filter:"agNumberColumnFilter"},{field:`augmentedStats.${m.Stats.EHR}`,headerName:L("RelicGrid.Headers.EHR"),cellStyle:be.getRelicGradient,valueFormatter:K.hideZeroesX100Tenths,filter:"agNumberColumnFilter"},{field:`augmentedStats.${m.Stats.RES}`,headerName:L("RelicGrid.Headers.RES"),cellStyle:be.getRelicGradient,valueFormatter:K.hideZeroesX100Tenths,filter:"agNumberColumnFilter"},{field:`augmentedStats.${m.Stats.BE}`,headerName:L("RelicGrid.Headers.BE"),cellStyle:be.getRelicGradient,valueFormatter:K.hideZeroesX100Tenths,filter:"agNumberColumnFilter"},{field:"cv",valueGetter:xy,headerName:L("RelicGrid.Headers.CV"),cellStyle:be.getRelicGradient,valueFormatter:K.hideZeroesX100Tenths,filter:"agNumberColumnFilter"}].concat(Oe.map(U=>{const ke=Q.findIndex(Je=>Je.value===U);return[ke,Q[ke]]}).sort((U,ke)=>U[0]-ke[0]).map(([U,ke])=>({field:ke.value,headerName:ke.column,cellStyle:be.getRelicGradient,valueFormatter:ke.percent?K.hideNaNAndFloorPercent:K.hideNaNAndFloor,filter:"agNumberColumnFilter",width:75}))),[Q,Oe,L]),tt=I.useMemo(()=>({rowHeight:33,suppressDragLeaveHidesColumns:!0,suppressScrollOnNewData:!0,suppressMultiSort:!0,getRowId:U=>String(U.data.id)}),[]),ue=I.useMemo(()=>({sortable:!0,width:46,headerClass:"relicsTableHeader",sortingOrder:["desc","asc"],filterParams:{maxNumConditions:200},wrapHeaderText:!0,autoHeaderHeight:!0,suppressHeaderMenuButton:!0}),[]),te=I.useCallback(U=>{console.log("selectionChanged",U),c(U.api.getSelectedRows())},[]),pe=I.useCallback(U=>{console.log("rowClicked",U),U.type||t.current.api.getRowNode(U.id).setSelected(!0,!0),r(U.data)},[]),ge=I.useCallback(U=>{console.log("rowDblClicked",U),r(U.data),u(!0)},[]),Le=I.useCallback(U=>jl(U,t,ke=>pe(ke)),[]),et=I.useCallback(U=>U.key=="to"?L("RelicGrid.To"):U.key=="of"?L("RelicGrid.Of"):U.key,[L]);function vt(U){B.setRelic(U),window.forceCharacterTabUpdate(),o(B.getRelics()),Ee.delayedSave(),r(U),J.success(L("Messages.AddRelicSuccess")),console.log("onAddOk",U)}function Zt(U){const ke=Al.onEditOk(s,U);r(ke)}function Da(){if(console.log("edit clicked"),!s)return J.error(L("Messages.NoRelicSelected"));u(!0)}function q(){console.log("add clicked"),p(!0)}function ze(U){if(console.log("delete clicked"),l.length===0)return D(!1),J.error(L("Messages.NoRelicSelected"));D(U)}function re(){if(l.length===0)return J.error(L("Messages.NoRelicSelected"));l.forEach(U=>{B.deleteRelic(U.id)}),o(B.getRelics()),r(void 0),Ee.delayedSave(),J.success(L("Messages.DeleteRelicSuccess"))}const at=window.store.getState().relicsTabFocusCharacter;let Nt;at&&s&&(Nt=dt.scoreCurrentRelic(s,at));const ti=10,[Pn,ai]=I.useState(null),[Fe,Dt]=I.useState(null),en=window.store(U=>U.excludedRelicPotentialCharacters);return I.useEffect(()=>{if(s){const U=B.getMetadata().characters,ke=Object.keys(U).filter(Me=>!(E===Rr&&en.includes(Me))).map(Me=>({cid:Me,name:L(`gameData:Characters.${Me}.Name`),score:dt.scoreRelicPotential(s,Me,!0),color:"#000",owned:!!B.getCharacterById(Me)}));ke.sort((Me,pt)=>pt.score.bestPct-Me.score.bestPct),ke.forEach((Me,pt)=>{Me.color="hsl("+pt*360/(ti+1)+",50%,50%)"}),ai(ke.slice(0,ti));const Je=[[],[],[],[],[],[],[],[],[],[]];for(const Me of ke){let pt=Math.floor(Me.score.bestPct/10);pt=Math.min(9,Math.max(0,pt)),Je[pt].push(Me)}Je.forEach(Me=>Me.sort((pt,Ho)=>pt.name.localeCompare(Ho.name))),Dt(Je)}},[E,s,en,L]),i.jsxs(g,{style:{width:Er,marginBottom:100},children:[i.jsx(Rs,{selectedRelic:s,type:"add",onOk:vt,setOpen:p,open:h}),i.jsx(Rs,{selectedRelic:s,type:"edit",onOk:Zt,setOpen:u,open:d}),i.jsxs(g,{vertical:!0,gap:10,children:[i.jsx(By,{setValueColumns:Ae,valueColumns:Oe,valueColumnOptions:ae}),!x&&i.jsx("div",{id:"relicGrid",className:"ag-theme-balham-dark",style:{width:Er,height:500,resize:"vertical",overflow:"hidden",..._l(e)},children:i.jsx(el,{ref:t,rowData:n,gridOptions:tt,columnDefs:Ze,defaultColDef:ue,animateRows:!0,headerHeight:24,pagination:!0,paginationPageSizeSelector:!1,paginationPageSize:2100,paginationNumberFormatter:U=>U.value.toLocaleString(A.resolvedLanguage.split("_")[0]),getLocaleText:et,onSelectionChanged:te,onRowClicked:pe,onRowDoubleClicked:ge,navigateToNextCell:Le,rowSelection:"multiple"})}),x&&i.jsx("div",{style:{width:Er,height:500}}),i.jsxs(g,{gap:10,justify:"space-between",children:[i.jsx(Y,{type:"primary",onClick:Da,style:{width:170},disabled:l.length===0||l.length>1,children:L("Toolbar.EditRelic")}),i.jsx(Cn,{title:L("common:Confirm"),description:L("Toolbar.DeleteRelic.Warning",{count:l.length}),open:S,onOpenChange:ze,onConfirm:re,placement:"bottom",okText:L("common:Yes"),cancelText:L("common:Cancel"),children:i.jsx(Y,{type:"primary",style:{width:170},disabled:l.length===0,children:L("Toolbar.DeleteRelic.ButtonText")})}),i.jsx(Y,{type:"primary",onClick:q,style:{width:170},children:L("Toolbar.AddRelic")}),i.jsx(hs,{trigger:"click",onOpenChange:U=>{U||Ee.delayedSave()},content:i.jsxs(g,{gap:8,style:{minWidth:260},children:[i.jsxs(g,{vertical:!0,children:[i.jsx(g,{justify:"space-between",align:"center",children:i.jsx($,{children:L("Toolbar.RelicLocator.Width")})}),i.jsx($t,{defaultValue:window.store.getState().inventoryWidth,style:{width:"auto"},min:1,onChange:U=>{Z(U)}})]}),i.jsxs(g,{vertical:!0,children:[i.jsxs(g,{justify:"space-between",align:"center",gap:10,children:[i.jsx($,{children:L("Toolbar.RelicLocator.Filter")}),i.jsx(ft,{type:ut.locatorParams()})]}),i.jsx($t,{defaultValue:window.store.getState().rowLimit,style:{width:"auto"},min:1,onChange:U=>{W(U)}})]})]}),children:i.jsxs(g,{justify:"space-between",align:"center",style:{cursor:"pointer",paddingLeft:8,paddingRight:10,width:285,marginTop:1,borderRadius:5,height:30,background:"rgba(36, 51, 86)",boxShadow:"0 4px 30px rgba(0, 0, 0, 0.2)",outline:"1px solid rgba(63, 90, 150)"},children:[s&&i.jsxs(g,{align:"center",justify:"space-between",style:{width:"100%"},children:[i.jsxs(g,{gap:5,style:{minWidth:10},justify:"flex-start",children:[he.part&&i.jsx("img",{src:k.getPart(he.part),style:{height:25}}),he.set&&i.jsx("img",{src:k.getSetImage(he.set,void 0,!0),style:{height:26}}),!he.part&&!he.set&&i.jsx("div",{style:{width:10}})]}),i.jsx(Ce,{children:s?L("Toolbar.RelicLocator.Location",{columnIndex:ee%H+1,rowIndex:Math.ceil((ee+1)/H)}):""}),i.jsx(Ga,{})]}),!s&&i.jsxs(g,{style:{width:"100%",paddingBottom:2},justify:"space-between",children:[i.jsx("div",{style:{width:10}}),i.jsx("div",{children:L("Toolbar.RelicLocator.NoneSelected")}),i.jsx(Ga,{})]})]})}),i.jsx(g,{style:{display:"block"},children:i.jsx(ft,{type:ut.relicLocation()})}),i.jsx(z,{value:P,onChange:_,options:j,style:{width:275}}),i.jsx(g,{style:{display:"block"},children:i.jsx(ft,{type:ut.relicInsight()})}),i.jsx(z,{value:E,onChange:y,options:ie,style:{width:275}})]}),i.jsxs(g,{gap:10,children:[i.jsx(Jt,{relic:s,setSelectedRelic:r,setEditModalOpen:u,score:Nt}),i.jsx(g,{style:{display:"block"},children:i.jsx(ft,{type:ut.relics()})}),P==="top10"&&Pn&&i.jsxs(g,{gap:10,children:[i.jsx(g,{style:{borderRadius:8,overflow:"hidden",border:`1px solid ${e.colorBorderSecondary}`},children:i.jsx(Jl,{onClick:U=>{store.getState().setScoringAlgorithmFocusCharacter(U.points[0].data.cid),window.store.getState().setScoringModalOpen(!0)},data:Pn.map(U=>({x:[U.score.averagePct],y:[U.name],hoverinfo:"name",mode:"markers",type:"scatter",error_x:{type:"data",symmetric:!1,array:[U.score.bestPct-U.score.averagePct],arrayminus:[U.score.averagePct-U.score.worstPct]},marker:{color:U.color},name:U.name,cid:U.cid})).reverse(),layout:{plot_bgcolor:"rgba(0, 0, 0, 0)",paper_bgcolor:e.colorBgContainer,font:{color:"rgba(255, 255, 255, 0.85)"},autosize:!0,width:320,height:278,margin:{b:20,l:10,r:20,t:10},showlegend:!1,xaxis:{fixedrange:!0,range:[0,100],tick0:0,dtick:10,showgrid:!0,showline:!0,showticklabels:!0,type:"linear",zeroline:!0,gridcolor:"rgba(128, 128, 128, 0.15)"},yaxis:{fixedrange:!0,showticklabels:!1,gridcolor:"rgba(128, 128, 128, 0.15)"}},config:{displayModeBar:!1,editable:!1,scrollZoom:!1}})}),i.jsx("ol",{children:i.jsx(g,{vertical:!0,gap:5.5,children:Pn.map(U=>{const ke=i.jsx("svg",{width:10,height:10,children:i.jsx("rect",{width:10,height:10,style:{fill:U.color,strokeWidth:1,stroke:"rgb(0,0,0)"}})}),Je=Math.floor(U.score.worstPct),Me=Math.floor(U.score.bestPct),pt=Je===Me?`${Je}%`:`${Je}% - ${Me}%`;return i.jsx(g,{gap:4,children:i.jsx("li",{style:U.owned?{fontWeight:"bold"}:void 0,children:i.jsxs(g,{align:"center",gap:8,children:[ke,i.jsxs("a",{style:{height:"19px"},children:[" ",i.jsx("img",{src:k.getCharacterAvatarById(U.cid),style:{height:"19px"},onClick:Ho=>{store.getState().setScoringAlgorithmFocusCharacter(Ho.target.attributes.src.nodeValue.split("avatar/")[1].split(".webp")[0]),window.store.getState().setScoringModalOpen(!0)}})]}),U.name,": ",pt]})})},U.cid)})})})]}),i.jsx(g,{style:{borderRadius:8,overflow:"hidden",border:`1px solid ${e.colorBorderSecondary}`},children:P==="buckets"&&Fe&&i.jsx(Jl,{onClick:U=>{store.getState().setScoringAlgorithmFocusCharacter(U.points[0].data.cid[U.points[0].pointIndex]),window.store.getState().setScoringModalOpen(!0)},data:[{type:"scatter",x:[0,0,0,0,0,0,0,0,0,0],y:["0%+","10%+","20%+","30%+","40%+","50%+","60%+","70%+","80%+","90%+"],hoverinfo:"skip",mode:"markers",marker:{color:"rgba(0, 0, 0, 0)",symbol:"circle",size:16}},{type:"scatter",hoverinfo:"text",mode:"markers",x:Fe.flatMap((U,ke)=>U.map((Je,Me)=>Me+.5)),y:Fe.flatMap((U,ke)=>U.map((Je,Me)=>ke*10+"%+")),hovertext:Fe.flatMap((U,ke)=>U.map((Je,Me)=>[Je.name,Je.score.meta.bestAddedStats.length===0?"":L("RelicInsights.NewStats")+Je.score.meta.bestAddedStats.join(" / "),Je.score.meta.bestUpgradedStats==null?"":L("RelicInsights.UpgradedStats")+Je.score.meta.bestUpgradedStats.join(" / ")].filter(pt=>pt!=="").join("<br>"))),cid:Fe.flatMap((U,ke)=>U.map((Je,Me)=>Je.cid)),marker:{color:"rgba(0, 0, 0, 0)",symbol:"circle",size:16}}],layout:{plot_bgcolor:"rgba(0, 0, 0, 0)",paper_bgcolor:e.colorBgContainer,font:{color:"rgba(255, 255, 255, 0.85)"},autosize:!0,height:278,width:1222,margin:{b:5,l:50,r:20,t:0},hovermode:"closest",hoverdistance:20,showlegend:!1,images:Fe.flatMap((U,ke)=>U.map((Je,Me)=>({source:k.getCharacterAvatarById(Je.cid),xref:"x",yref:"y",x:Me+.6,y:ke,sizex:1,sizey:1,xanchor:"center",yanchor:"middle"}))),xaxis:{fixedrange:!0,range:[0,Math.max(...Fe.map(U=>U.length))+1],tick0:0,showgrid:!1,showticklabels:!1,type:"linear",zeroline:!1},yaxis:{fixedrange:!0,showticklabels:!0,gridcolor:"rgba(128, 128, 128, 0.15)"}},config:{displayModeBar:!1,editable:!1,scrollZoom:!1}})})]})]})]})}ym.propTypes={active:Yt.bool};function xy(e){return e.data.augmentedStats[a.CR]*2+e.data.augmentedStats[a.CD]}const{useToken:vy}=Ft,_y="https://9di5b7zvtb.execute-api.us-west-2.amazonaws.com/prod";function Ay(){const e=n=>{var o;return((o=Object.values(B.getMetadata().characters).find(s=>s.id==n))==null?void 0:o.id)||null},t=n=>{var o;return((o=Object.values(B.getMetadata().lightCones).find(s=>s.id==n))==null?void 0:o.id)||null};return[{characterId:e(1405),lightConeId:t(23041)},{characterId:e(1407),lightConeId:t(23040)},{characterId:e(1403),lightConeId:t(23038)},{characterId:e(1404),lightConeId:t(23039)},{characterId:e(1221),lightConeId:t(23030),rerun:!0},{characterId:e(1217),lightConeId:t(23017),rerun:!0},{custom:!0}].filter(n=>n.characterId!=null||n.custom)}const{Text:Ly}=Ce,Cr=10;function Pm(){const[e,t]=I.useState(!1),[n,o]=I.useState([]),[s,r]=I.useState(),l=I.useRef(null),c=window.store(E=>E.scorerId),d=window.store(E=>E.setScorerId),[u]=N.useForm();window.scorerForm=u;const{t:h}=V(["relicScorerTab","common"]),p=window.store(E=>E.activeKey);if(I.useEffect(()=>{if(p!=de.SHOWCASE)return;const E=window.location.href.split("?")[1];if(E){const y=E.split("id=")[1].split("&")[0];S({scorerId:y})}},[p]),I.useEffect(()=>{n.length&&c&&p==de.SHOWCASE&&window.history.replaceState({id:c},`profile: ${c}`,oa[de.SHOWCASE]+`?id=${c}`)},[p]),p!=de.SHOWCASE&&n.length==0)return i.jsx(i.Fragment,{});console.log("======================================================================= RENDER RelicScorerTab");function S(E){var P;if(l.current){J.warning(h("Messages.ThrottleWarning",{seconds:Math.max(1,Math.ceil(Cr-(new Date-l.current)/1e3))})),e&&t(!1);return}else t(!0),l.current=new Date,setTimeout(()=>{l.current=null},Cr*1e3);console.log("finish",E);const y=((P=E==null?void 0:E.scorerId)==null?void 0:P.toString().trim())||"";if(!y||y.length!=9){t(!1),J.error(h("Messages.InvalidIdWarning"));return}d(y),Ee.delayedSave(),window.history.replaceState({id:y},`profile: ${y}`,oa[de.SHOWCASE]+`?id=${y}`),fetch(`${_y}/profile/${y}`,{method:"GET"}).then(_=>{if(!_.ok&&!_.source)throw new Error(`HTTP error! Status: ${_.status}`);return _.json()}).then(_=>{console.log(_);let x;if(_.source=="mana")_=F.recursiveToCamel(_),x=[_.detailInfo.assistAvatars[0],_.detailInfo.assistAvatars[1],_.detailInfo.assistAvatars[2],_.detailInfo.avatarDetailList[0],_.detailInfo.avatarDetailList[1],_.detailInfo.avatarDetailList[2],_.detailInfo.avatarDetailList[3],_.detailInfo.avatarDetailList[4]].filter(M=>!!M);else if(_.source=="mihomo"){x=_.characters.filter(M=>!!M);for(const M of x){M.relicList=M.relics||[],M.equipment=M.light_cone,M.avatarId=M.id,M.equipment&&(M.equipment.tid=M.equipment.id);for(const H of M.relicList)H.tid=H.id,H.subAffixList=H.sub_affix}}else{if(!_.detailInfo)return t(!1),J.error(h("Messages.IdLoadError")),"ERROR";x=[..._.detailInfo.assistAvatarList||[],..._.detailInfo.avatarDetailList||[]].filter(M=>!!M).sort((M,H)=>H._assist&&M._assist?(M.pos||0)-(H.pos||0):H._assist?1:M._assist?-1:0).filter((M,H,Z)=>Z.findIndex(X=>X.avatarId===M.avatarId)===H)}console.log("characters",x);const G=x.map(M=>xl.convert(M)).filter((M,H,Z)=>Z.map(X=>X.id).indexOf(M.id)==H);for(let M=0;M<G.length;M++)G[M].index=M;o(G),G.length&&r(G[0]),t(!1),J.success(h("Messages.SuccessMsg")),u.setFieldValue("scorerId",y)}).catch(_=>{setTimeout(()=>{J.warning(h("Messages.LookupError")),console.error("Fetch error:",_),t(!1)},Math.max(0,Cr*1e3-(new Date-l.current)))})}let D;if(c)try{const E=parseInt(c);D=isNaN(E)?void 0:E}catch(E){console.error(E)}return i.jsx("div",{children:i.jsxs(g,{vertical:!0,gap:0,align:"center",children:[i.jsx(g,{gap:10,vertical:!0,align:"center",children:i.jsx(Ly,{children:h("Header.WithVersion",{beta_version:Zn})})}),i.jsx(N,{form:u,onFinish:S,initialValues:{scorerId:D},children:i.jsxs(g,{style:{margin:10,width:1100},justify:"center",align:"center",gap:10,children:[i.jsx(N.Item,{size:"default",name:"scorerId",children:i.jsx(Kt,{style:{width:150},placeholder:h("SubmissionBar.Placeholder")})}),i.jsx(Y,{type:"primary",htmlType:"submit",loading:e,style:{width:150},children:h("common:Submit")}),i.jsx(Y,{style:{width:"fit-content"},onClick:()=>window.store.getState().setScoringModalOpen(!0),children:h("SubmissionBar.AlgorithmButton")})]})}),i.jsx(Im,{availableCharacters:n,setAvailableCharacters:o,setSelectedCharacter:r,selectedCharacter:s})]})})}Pm.propTypes={active:Yt.bool};function Im(e){var L,A;const t=window.store(O=>O.activeKey);vy();const n=window.store(O=>O.setScoringAlgorithmFocusCharacter),[o,s]=I.useState(!1),[r,l]=I.useState(e.selectedCharacter),[c,d]=I.useState(!1),[u,h]=I.useState(!1),{t:p}=V(["relicScorerTab","gameData"]),E={items:[{label:i.jsxs(g,{gap:10,children:[i.jsx(ts,{}),p("ImportLabels.AllCharacters")]}),key:"import characters"},{label:i.jsxs(g,{gap:10,children:[i.jsx(ts,{}),p("ImportLabels.SingleCharacter")]}),key:"import single character"}],onClick:O=>{switch(O.key){case"import characters":console.log("importing with characters"),M();break;case"import single character":console.log("importing single character"),H();break;default:J.error(p("Messages.UnknownButtonClicked"));break}}};I.useEffect(()=>{var O;n((O=e.selectedCharacter)==null?void 0:O.id)},[(L=e.selectedCharacter)==null?void 0:L.id,n]);const y=[];for(let O=0;O<e.availableCharacters.length;O++){const j=e.availableCharacters[O];y.push({label:i.jsx(g,{align:"center",justify:"space-around",children:i.jsx("img",{style:{width:100,height:100,objectFit:"contain",borderRadius:50,border:"1px solid rgba(255, 255, 255, 0.2)",background:"rgba(255, 255, 255, 0.05)"},src:k.getCharacterAvatarById(j.id)})}),value:j.id,key:O})}function P(O){console.log("selectionChange",O),e.setSelectedCharacter(e.availableCharacters.find(j=>j.id==O))}async function _(){console.log("Simulate",e.selectedCharacter),s(!0),l(e.selectedCharacter)}function x(O){if(!O.characterId)return J.error(p("Messages.NoCharacterSelected"));if(e.availableCharacters.find(ie=>ie.id==O.characterId)&&e.selectedCharacter.id!=O.characterId)return J.error(p("Messages.CharacterAlreadyExists"));const j=e.availableCharacters[e.selectedCharacter.index];j.form=O,j.id=O.characterId,e.selectedCharacter.form=O,e.selectedCharacter.id=O.characterId,Object.values(e.selectedCharacter.equipped).filter(ie=>!!ie).map(ie=>ie.equippedBy=O.characterId),e.setAvailableCharacters(JSON.parse(JSON.stringify(e.availableCharacters))),e.setSelectedCharacter(JSON.parse(JSON.stringify(e.selectedCharacter))),console.log("Modified character",e.selectedCharacter)}function G(){const O=e.availableCharacters.flatMap(j=>Object.values(j.equipped)).filter(j=>!!j);console.log("importClicked",e.availableCharacters,O),B.mergePartialRelicsWithState(O),Ee.delayedSave()}function M(){for(const j of e.availableCharacters)B.addFromForm(j.form,!1);const O=e.availableCharacters.flatMap(j=>Object.values(j.equipped)).filter(j=>!!j);console.log("importCharactersClicked",e.availableCharacters,O),B.mergePartialRelicsWithState(O,e.availableCharacters),Ee.delayedSave()}function H(){B.addFromForm(e.selectedCharacter.form,!1);const O=e.availableCharacters.flatMap(j=>Object.values(j.equipped)).filter(j=>!!j);console.log("importCharacterClicked",e.selectedCharacter,O),B.mergePartialRelicsWithState(O,[e.selectedCharacter]),Ee.delayedSave()}async function Z(){d(!0),setTimeout(()=>{F.screenshotElementById("relicScorerPreview","clipboard").finally(()=>{d(!1)})},100)}async function X(){h(!0),setTimeout(()=>{const O=e.selectedCharacter?p(`gameData:Characters.${e.selectedCharacter.id}.Name`):null;F.screenshotElementById("relicScorerPreview","download",O).finally(()=>{h(!1)})},100)}function W(O){if(O.custom)return _();x({characterId:O.characterId,lightCone:O.lightConeId,characterLevel:80,lightConeLevel:80,characterEidolon:0,lightConeSuperimposition:O.lightConeSuperimposition||1})}return i.jsx(g,{style:{width:1375},justify:"space-around",children:i.jsxs(g,{vertical:!0,align:"center",gap:5,style:{marginBottom:100,width:1068},children:[i.jsxs(g,{vertical:!0,style:{display:e.availableCharacters.length>0?"flex":"none",width:"100%"},children:[i.jsx(Hy,{presetClicked:W,activeKey:t}),i.jsxs(g,{style:{display:e.availableCharacters.length>0?"flex":"none",marginBottom:5},justify:"space-between",gap:10,children:[i.jsx(Y,{style:{flex:1},onClick:Z,icon:i.jsx(pd,{}),loading:c,type:"primary",children:p("CopyScreenshot")}),i.jsx(Y,{style:{width:50},icon:i.jsx(qr,{}),onClick:X,loading:u}),i.jsxs(Es.Button,{style:{flex:1},className:"dropdownButton",onClick:G,menu:E,children:[i.jsx(ts,{}),p("ImportLabels.Relics")]}),i.jsx(Y,{style:{flex:1},icon:i.jsx(Dd,{}),onClick:_,children:p("SimulateRelics")})]})]}),i.jsx(_a,{style:{width:"100%",overflow:"hidden"},options:y,block:!0,onChange:P,value:(A=e.selectedCharacter)==null?void 0:A.id}),i.jsx("div",{id:"previewWrapper",style:{padding:"5px"},children:i.jsx(Kl,{class:"relicScorerCharacterPreview",character:e.selectedCharacter,source:Tt.SHOWCASE_TAB,id:"relicScorerPreview",setOriginalCharacterModalOpen:s,setOriginalCharacterModalInitialCharacter:l})}),i.jsx(kl,{onOk:x,open:o,setOpen:s,initialCharacter:r})]})})}Im.propTypes={availableCharacters:Yt.array,setAvailableCharacters:Yt.func,selectedCharacter:Yt.object,setSelectedCharacter:Yt.func};function Fy(e){const{preset:t}=e;return t.rerun?i.jsx("img",{src:k.getCharacterAvatarById(t.characterId),style:{height:ms,width:ms,borderRadius:ms,outline:"1px solid rgba(255, 255, 255, 0.2)",background:"rgba(255, 255, 255, 0.05)"}}):i.jsx("img",{src:k.getCharacterAvatarById(t.characterId),style:{height:mn,width:mn,borderRadius:mn,outline:"1px solid rgba(255, 255, 255, 0.2)",background:"rgba(255, 255, 255, 0.05)"}})}const ms=45,mn=95;function Hy(e){const[t,n]=I.useState(window.store.getState().savedSession[Ne.relicScorerSidebarOpen]);I.useEffect(()=>{window.store.getState().setSavedSessionKey(Ne.relicScorerSidebarOpen,t),Ee.delayedSave()},[t]);const o=I.useMemo(()=>{let s=0;return i.jsx(g,{vertical:!0,gap:3,justify:"center",style:{marginLeft:-8,width:110,flexDirection:"row",flexWrap:"wrap"},children:Ay().map(r=>{const l=r.custom?i.jsx(Wn,{component:Us,style:{fontSize:85}}):i.jsx(Fy,{preset:r});return i.jsx(Y,{type:"text",style:{width:r.rerun?ms+2:mn+8,height:r.rerun?ms+2:mn+8,paddingTop:2,display:e.activeKey==de.SHOWCASE?"flex":"none"},onClick:()=>e.presetClicked(r),children:l},s++)})})},[e]);return i.jsx(g,{vertical:!0,style:{position:"relative",left:-120,top:40,width:0,height:0},children:i.jsx(Es,{zIndexPopup:10,dropdownRender:()=>o,open:t,style:{},children:i.jsx("a",{onClick:s=>{s.preventDefault(),n(!t)},children:i.jsx(Y,{type:"primary",shape:"round",style:{height:mn,width:mn,borderRadius:mn,marginBottom:2},children:i.jsx(Wn,{component:Dd,style:{fontSize:55}})})})})})}const go=[.006,.005964,.005928216,.005892646704,.005857290823776,.005822147078833344,.005787214196360344,.0057524909111821825,.005717975965715089,.005683668109920798,.005649566101261274,.005615668704653705,.005581974692425783,.005548482844271228,.005515191947205601,.005482100795522367,.005449208190749233,.005416512941604738,.00538401386395511,.005351709780771379,.00531959952208675,.00528768192495423,.005255955833404505,.005224420098404077,.005193073577813653,.005161915136346771,.00513094364552869,.005100157983655518,.0050695570357535856,.005039139693539064,.005008904855377829,.004978851426245562,.004948978317688089,.004919284447781959,.004889768741095268,.0048604301286486965,.004831267547876804,.004802279942589543,.004773466262934007,.004744825465356403,.004716356512564264,.004688058373488879,.004659930023247946,.004631970443108458,.004604178620449807,.004576553548727109,.004549094227434746,.0045217996620701365,.004494668864097716,.00446770085091313,.004440894645807651,.0044142492779328055,.004387763782265209,.004361437199571617,.004335268576374188,.004309256964915942,.004283401423126446,.004257701014587688,.004232154808500162,.0042067618796491615,.004181521308371266,.004156432180521039,.004131493587437912,.004106704625913285,.004082064398157804,.004057572011768857,.004033226579698244,.004009027220220055,.003984973056898735,.003961063218557342,.003937296839245998,.003913673058210522,.0038901910198612588,.04253534861116301,.07584439342357738,.0978537140675431,.105347414622264,.09880559711913513,.08201639506747972,.06052272143553331,.039633005780615294,.02288634830101852,.011532204560383551,.00499355875488925,.0018181052569377857,.0005393311577894619,.00012422731568808565,2048781559582088e-20,2053394710113599e-21,7415178164348e-20],So=[.008,.007936,.007872512,.007809531904,.0077470556487679995,.007685079203577855,.0076235985699492324,.007562609781389638,.007502108903138521,.007442092031913413,.007382555295658106,.007323494853292841,.007264906894466498,.007206787639310767,.00714913333819628,.007091940271490709,.007035204749318783,.006978923111324233,.00692309172643364,.0068677069926221706,.006812765336681193,.006758263213987744,.006704197108275842,.006650563531409635,.006597359023158357,.00654458015097309,.006492223509765305,.006440285721687183,.006388763435913685,.006337653328426376,.006286952101798964,.006236656484984573,.006186763233104696,.006137269127239857,.006088170974221939,.006039465606428163,.005991149881576737,.005943220682524123,.005895674917063929,.005848509517727418,.005801721441585599,.005755307670052914,.00570926520869249,.00566359108702295,.005618282358326766,.005573336099460153,.005528749410664471,.005484519415379155,.005440643260056121,.005397118113975672,.005353941169063867,.005311109639711356,.005268620762593665,.005226471796492916,.0051846600221209715,.005143182741944004,.005102037280008452,.005061220981768384,.0050207312139142375,.004980565364202923,.0049407208412893,.004901195074558986,.004861985513962514,.004823089629850814,.004784504912812008,.046275731516717745,.08095642589545174,.10159812648728124,.1049611176833006,.09289642032292567,.07130085695712911,.04745438530228964,.027170589573400922,.013184241577222656,.005296345422062471,.0016994386548057395,.0004112204670939708,6766516402880222e-20,5971634998864304e-21,767367185684e-19],Si=[.006,.011963999999999999,.017892216,.023784862704,.029642153527776,.03546430060660934,.04125151480296969,.04700400571415187,.05272198167986696,.05840564978978776,.06405521589104904,.06967088459570274,.07525285928812853,.08080134213239976,.08631653407960535,.09179863487512771,.09724784306587694,.10266435600748168,.10804836987143679,.11340007965220816,.1187196791742949,.12400736109924913,.12926331693265364,.1344877370310577,.13968081060887136,.14484272574521814,.14997366939074683,.15507382737440234,.16014338441015594,.165182524103695,.17019142895907283,.1751702803853184,.1801192587030065,.18503854315078844,.1899283118918837,.1947887420205324,.1996200095684092,.20442228951099875,.20919575577393276,.21394058123928916,.21865693775185344,.2233449961253423,.22800492614859025,.2326368965916987,.23724107521214852,.24181762876087562,.24636672298831036,.2508885226503805,.2553831915144782,.25985089236539133,.264291787011199,.2687060362891318,.273093800071397,.2774552372709686,.2817905058473428,.28609976281225874,.2903831642353852,.29464086524997285,.298873020058473,.30307978193812213,.30726130324649337,.3114177354270144,.3155492290144523,.3196559336403656,.3237379980385234,.32779557005029225,.3318287966299905,.33583782385021055,.33982279690710926,.3437838601256666,.34772115696491257,.35163483002312307,.35552502104298433,.3980603696541474,.4739047630777248,.5717584771452678,.6771058917675319,.7759114888866671,.8579278839541468,.91845060538968,.9580836111702953,.9809699594713138,.9925021640316973,.9974957227865866,.9993138280435244,.9998531592013139,.999977386517002,.9999978743325978,.999999927727308,1.0000000018790896],zs=[.008,.015936,.023808511999999997,.031618043904,.039365099552768,.04705017875634585,.05467377732629508,.06223638710768472,.06973849601082324,.07718058804273666,.08456314333839476,.0918866381916876,.0991515450861541,.10635833272546487,.11350746606366115,.12059940633515186,.12763461108447063,.13461353419579486,.1415366259222285,.14840433291485067,.15521709825153185,.16197536146551958,.1686795585737954,.17533012210520504,.1819274811283634,.1884720612793365,.1949642847891018,.20140457051078897,.20779333394670266,.21413098727512903,.220417939376928,.22665459586191256,.23284135909501724,.2389786282222571,.24506679919647903,.2511062648029072,.25709741468448394,.26304063536700806,.268936310284072,.2747848198017994,.280586541243385,.2863418489134379,.29205111412213036,.29771470520915333,.3033329875674801,.30890632366694026,.3144350730776047,.31991959249298385,.32536023575303996,.33075735386701566,.3361112950360795,.3414224046757909,.34669102543838454,.3519174972348775,.35710215725699845,.3622453399989425,.36734737727895095,.3724085982607193,.37742932947463353,.3824098948388365,.3873506156801258,.3922518107546848,.3971137962686473,.40193688589849813,.40672139081131015,.4529971223280279,.5339535482234796,.6355516747107609,.7405127923940615,.8334092127169872,.9047100696741163,.9521644549764059,.9793350445498068,.9925192861270294,.9978156315490919,.9995150702038976,.9999262906709916,.9999939558350204,.9999999274700192,1.0000000042067378],ya=90,za=80,Tr=1e5,wy=.5625,Oy=.78125;var es=(e=>(e[e.NONE=0]="NONE",e[e.F2P=1]="F2P",e[e.EXPRESS=2]="EXPRESS",e[e.BP_EXPRESS=3]="BP_EXPRESS",e))(es||{}),bo=(e=>(e[e.NEW=0]="NEW",e[e.RERUN=1]="RERUN",e))(bo||{});const ky=ia("NONE",0,0,0),Vl=[ia("3.1",1,1,80),ia("3.1",2,1,27),ia("3.1",1,2,91),ia("3.1",2,2,40),ia("3.1",1,3,94),ia("3.1",2,3,45),ia("3.2",1,1,76),ia("3.2",2,1,33),ia("3.2",1,2,89),ia("3.2",2,2,43),ia("3.2",1,3,92),ia("3.2",2,3,49)];var Na=(e=>(e[e.E0=0]="E0",e[e.E1=1]="E1",e[e.E2=2]="E2",e[e.E3=3]="E3",e[e.E4=4]="E4",e[e.E5=5]="E5",e[e.E6=6]="E6",e[e.S1=7]="S1",e))(Na||{}),Va=(e=>(e[e.NONE=-1]="NONE",e[e.E0=0]="E0",e[e.E1=1]="E1",e[e.E2=2]="E2",e[e.E3=3]="E3",e[e.E4=4]="E4",e[e.E5=5]="E5",e[e.E6=6]="E6",e))(Va||{}),Fn=(e=>(e[e.NONE=0]="NONE",e[e.S1=1]="S1",e[e.S2=2]="S2",e[e.S3=3]="S3",e[e.S4=4]="S4",e[e.S5=5]="S5",e))(Fn||{}),Ta=(e=>(e.REFUND_NONE="REFUND_NONE",e.REFUND_LOW="REFUND_LOW",e.REFUND_AVG="REFUND_AVG",e.REFUND_HIGH="REFUND_HIGH",e))(Ta||{});const Bm={REFUND_NONE:0,REFUND_LOW:.04,REFUND_AVG:.075,REFUND_HIGH:.11},Ur={passes:0,jades:0,income:[],bannerRotation:0,strategy:0,starlight:"REFUND_AVG",pityCharacter:0,guaranteedCharacter:!1,pityLightCone:0,guaranteedLightCone:!1,currentEidolonLevel:-1,currentSuperimpositionLevel:0};function ia(e,t,n,o){return{passes:o,version:e,phase:t,type:n,id:Ky(e,t,n)}}function Ky(e,t,n){return`${e}_p${t}_${n}`}function jy(e){console.log("simulate Warps",e),window.store.getState().setWarpRequest(e);const t=Wy(e);window.store.getState().setWarpResult(t),Ee.delayedSave()}function Wy(e){const t=Vy(e),n=Zy(t),o=Object.fromEntries(n.map(({label:r})=>[r,{warps:0,wins:0}]));for(let r=0;r<Tr;r++){let l=0;for(const c of n){const{warpType:d,label:u,pity:h,guaranteed:p,redistributedCumulative:S,redistributedCumulativeNonPity:D,warpCap:E}=c,y=d==0?wy:Oy,P=O0(S,E,h)-h+1;if(Math.random()<y||p)l+=P;else{const _=O0(D??S,E,0)+1;l+=P+_}o[u].warps+=l,l<=t.warps&&o[u].wins++}}for(const r of n)o[r.label].warps/=Tr,o[r.label].wins/=Tr;return{milestoneResults:o,request:t}}function Zy(e){const{strategy:t,pityCharacter:n,guaranteedCharacter:o,pityLightCone:s,guaranteedLightCone:r,currentEidolonLevel:l,currentSuperimpositionLevel:c}=e,d=pn(n,ya,go),u=pn(0,ya,go),h=pn(s,za,So),p=pn(0,za,So);let S=[{warpType:0,label:"E0",guaranteed:o,pity:n,redistributedCumulative:d,redistributedCumulativeNonPity:u,warpCap:ya},{warpType:0,label:"E1",guaranteed:!1,pity:0,redistributedCumulative:Si,warpCap:ya},{warpType:0,label:"E2",guaranteed:!1,pity:0,redistributedCumulative:Si,warpCap:ya},{warpType:0,label:"E3",guaranteed:!1,pity:0,redistributedCumulative:Si,warpCap:ya},{warpType:0,label:"E4",guaranteed:!1,pity:0,redistributedCumulative:Si,warpCap:ya},{warpType:0,label:"E5",guaranteed:!1,pity:0,redistributedCumulative:Si,warpCap:ya},{warpType:0,label:"E6",guaranteed:!1,pity:0,redistributedCumulative:Si,warpCap:ya},{warpType:1,label:"S2",guaranteed:!1,pity:0,redistributedCumulative:zs,warpCap:za},{warpType:1,label:"S3",guaranteed:!1,pity:0,redistributedCumulative:zs,warpCap:za},{warpType:1,label:"S4",guaranteed:!1,pity:0,redistributedCumulative:zs,warpCap:za},{warpType:1,label:"S5",guaranteed:!1,pity:0,redistributedCumulative:zs,warpCap:za}];const D={warpType:1,label:"S1",guaranteed:r,pity:s,redistributedCumulative:h,redistributedCumulativeNonPity:p,warpCap:za};switch(t){case 0:S.splice(1,0,D);break;case 1:S.splice(2,0,D);break;case 2:S.splice(3,0,D);break;case 3:S.splice(4,0,D);break;case 4:S.splice(5,0,D);break;case 5:S.splice(6,0,D);break;case 6:S.splice(7,0,D);break;case 7:S.splice(0,0,D);break}S=l!==-1||c!==0?Ny(S,e):S;let y=l,P=c;for(const _ of S)_.warpType==0&&y++,_.warpType==1&&P++,_.label=y==-1?`S${P}`:`E${y}S${P}`;return S}function Ny(e,t){let n=t.currentEidolonLevel,o=t.currentSuperimpositionLevel,s=[];s=e.filter(p=>{switch(p.warpType){case 0:if(n>-1)return n--,!1;break;case 1:if(o>0)return o--,!1;break}return!0});const r=pn(t.pityCharacter,ya,go),l=pn(0,ya,go),c=pn(t.pityLightCone,za,So),d=pn(0,za,So),u=s.findIndex(p=>p.warpType===0);u>=0&&(s[u].pity=t.pityCharacter,s[u].guaranteed=t.guaranteedCharacter,s[u].redistributedCumulative=r,s[u].redistributedCumulativeNonPity=l);const h=s.findIndex(p=>p.warpType===1);return h>=0&&(s[h].pity=t.pityLightCone,s[h].guaranteed=t.guaranteedLightCone,s[h].redistributedCumulative=c,s[h].redistributedCumulativeNonPity=d),s}function Vy(e){const t=e.income.map(h=>Vl.find(p=>p.id==h)??ky);let n=0;for(const h of t)n+=h.passes;const o=e.jades,s=e.passes+n,r=Math.floor(o/160)+s,l=Math.floor((Bm[e.starlight]??0)*r),c=l*20,d=r+l;for(const[h,p]of Object.entries(e))p==null&&(e[h]=Ur[h]);const u={...e,warps:d,totalJade:o,totalPasses:s,totalStarlight:c};return e.bannerRotation==0&&(u.currentEidolonLevel=-1,u.currentSuperimpositionLevel=0),u}function pn(e,t,n){const o=[];for(let r=0;r<e;r++)o[r]=0;for(let r=e;r<t;r++)o[r]=r==0?n[r]:o[r-1]+n[r];const s=1-o[t-1];for(let r=e;r<t;r++)o[r]+=s*o[r];return o}function O0(e,t,n){const o=Math.random()*e[t-1];return zy(o,e,n)}function zy(e,t,n){let o=n,s=t.length-1;for(;o<s;){const r=Math.floor((o+s)/2);e>t[r]?o=r+1:s=r}return o}const{Text:k0}=Ce;function Uy(){const{t:e}=V("warpCalculatorTab");return i.jsxs(g,{vertical:!0,style:{height:1400,width:950},align:"center",children:[i.jsx(g,{justify:"space-around",style:{margin:15},children:i.jsx("pre",{style:{fontSize:28,fontWeight:"bold",margin:0},children:e("SectionTitles.Planner")})}),i.jsx(Yy,{}),i.jsx(Qy,{})]})}function Xy(e){return e?((!Array.isArray(e.income)||!e.income.every(t=>Vl.find(n=>n.id===t)))&&(e.income=[]),Object.assign({},Ur,e)):{...Ur}}function Yy(){const{t:e}=V("warpCalculatorTab",{keyPrefix:"SectionTitles"}),t=window.store(s=>s.warpRequest),[n]=N.useForm(),o=Xy(t);return i.jsx(N,{form:n,initialValues:o,style:{width:900},children:i.jsxs(Yn,{style:{width:900},children:[i.jsxs(g,{style:{marginBottom:30},children:[i.jsxs(g,{vertical:!0,style:{flex:1},children:[i.jsx(yr,{children:i.jsxs(g,{justify:"center",gap:10,children:[e("Settings"),i.jsx("a",{href:"https://github.com/fribbels/hsr-optimizer/blob/main/docs/guides/en/warp-planner.md",target:"_blank",style:{display:"inline-flex",alignItems:"center"},rel:"noreferrer",children:i.jsx("img",{src:k.getQuestion(),style:{height:16,width:16,opacity:.6,marginLeft:"auto"}})})]})}),i.jsxs(g,{vertical:!0,gap:16,children:[i.jsxs(g,{gap:25,justify:"space-between",children:[i.jsx(g,{align:"flex-end",gap:8,flex:1,children:i.jsxs(g,{vertical:!0,children:[i.jsx($,{children:e("Jades")}),i.jsx(N.Item,{name:"jades",children:i.jsx($t,{placeholder:"0",min:0,style:{width:"100%"},controls:!1,addonBefore:i.jsx("img",{src:k.getJade(),style:{height:24}})})})]})}),i.jsxs(g,{vertical:!0,flex:1,children:[i.jsx($,{children:e("Banner")}),i.jsx(N.Item,{name:"bannerRotation",children:i.jsxs(Ye.Group,{buttonStyle:"solid",block:!0,children:[i.jsx(Ye.Button,{value:bo.NEW,children:e("New")}),i.jsx(Ye.Button,{value:bo.RERUN,children:e("Rerun")})]})})]})]}),i.jsxs(g,{gap:25,children:[i.jsx(g,{align:"flex-end",gap:8,flex:1,children:i.jsxs(g,{vertical:!0,children:[i.jsx($,{children:e("Passes")}),i.jsx(N.Item,{name:"passes",children:i.jsx($t,{placeholder:"0",min:0,style:{width:"100%"},controls:!1,addonBefore:i.jsx("img",{src:k.getPass(),style:{height:24}})})})]})}),i.jsxs(g,{vertical:!0,flex:1,children:[i.jsx($,{children:e("Strategy")}),i.jsx(N.Item,{name:"strategy",children:i.jsx(z,{options:e5()})})]})]}),i.jsxs(g,{gap:25,children:[i.jsxs(g,{vertical:!0,style:{width:0,flex:1,overflow:"hidden"},children:[i.jsx($,{children:e("Starlight")}),i.jsxs(Qr.Compact,{style:{display:"flex"},children:[i.jsx(Kt,{disabled:!0,style:{width:36,backgroundColor:"rgba(255, 255, 255, 0.04)",cursor:"auto",backgroundImage:`url(${k.getStarlight()})`,backgroundSize:"24px",backgroundPosition:"center",backgroundRepeat:"no-repeat"}}),i.jsx(N.Item,{noStyle:!0,name:"starlight",children:i.jsx(z,{style:{flex:1},options:t5(),popupMatchSelectWidth:!1,optionLabelProp:"labelInValue"})})]})]}),i.jsxs(g,{vertical:!0,style:{width:0,flex:1,overflow:"hidden"},children:[i.jsx($,{children:e("AdditionalResources")}),i.jsx(N.Item,{name:"income",children:i.jsx(Ql,{multiple:!0,showCheckedStrategy:Ql.SHOW_CHILD,maxTagCount:0,listHeight:500,showSearch:!1,treeCheckable:!1,treeExpandAction:"click",placeholder:"None",treeDefaultExpandedKeys:Jy(o),allowClear:!0,treeData:$y(),popupMatchSelectWidth:500})})]})]})]})]}),i.jsx(fa,{width:40}),i.jsxs(g,{vertical:!0,style:{flex:1},justify:"space-between",children:[i.jsxs(g,{vertical:!0,children:[i.jsx(yr,{children:e("Character")}),i.jsx(j0,{banner:"Character"})]}),i.jsxs(g,{vertical:!0,children:[i.jsx(yr,{children:e("LightCone")}),i.jsx(j0,{banner:"LightCone"})]})]})]}),i.jsx(g,{style:{width:"100%"},gap:20,children:i.jsx(Y,{type:"primary",block:!0,style:{height:45},onClick:()=>{window.store.getState().setWarpResult(null),setTimeout(()=>jy(n.getFieldsValue()),50)},icon:i.jsx(bd,{}),children:e("Calculate")})})]})})}function Jy(e){return(e.income??[]).map(t=>parseInt(t.substring(t.length-1)))}function yr(e){return i.jsx(Ce.Title,{level:5,style:{margin:0,marginBottom:8,textAlign:"center"},children:e.children})}function Qy(){const{t:e,i18n:t}=V("warpCalculatorTab"),n=window.store(r=>r.warpResult);if(!(n!=null&&n.request))return i.jsx(i.Fragment,{});const o=Object.entries(n.milestoneResults??{}).map(([r,l])=>({key:r,warps:l.warps,wins:l.wins}));console.log(n);const s=[{title:e("ColumnTitles.Goal"),dataIndex:"key",key:"key",align:"center",width:200,render:(r,l)=>i.jsxs(g,{style:{position:"relative",marginLeft:5,height:"100%"},align:"center",children:[i.jsx("div",{style:{display:l.wins<Xr?"none":"block",width:`${l.wins*100}%`,borderRadius:4,position:"absolute",height:"100%",backgroundColor:Wt.scale(["#df524bcc","#efe959cc","#89d86dcc"]).domain([0,.33,1])(l.wins).hex(),zIndex:1}}),i.jsx(g,{style:{width:"100%",zIndex:2},justify:"center",align:"center",children:i.jsx(Bi,{color:"#000000aa",style:{opacity:K0(l.wins),border:0,padding:"2px 12px 2px 12px"},children:i.jsx(k0,{style:{margin:0,alignItems:"center"},children:i5(r)})})})]})},{title:i.jsx(g,{justify:"center",align:"center",gap:5,children:i.jsxs(Rt,{t:e,i18nKey:"ColumnTitles.Chance",values:{ticketCount:n.request.warps.toLocaleString(t.resolvedLanguage.split("_")[0])},children:["Success chance with [[ticketCount]]",i.jsx("img",{style:{height:18},src:k.getPass()})]})}),dataIndex:"wins",width:250,align:"center",render:r=>`${F.truncate10ths(r*100).toLocaleString(t.resolvedLanguage.split("_")[0],{minimumFractionDigits:1,maximumFractionDigits:1})}%`},{title:i.jsx(g,{justify:"center",align:"center",gap:5,children:i.jsxs(Rt,{t:e,i18nKey:"ColumnTitles.Average",children:["Average # of",i.jsx("img",{style:{height:18},src:k.getPass()}),"required"]})}),dataIndex:"warps",align:"center",width:250,render:(r,l)=>i.jsx(g,{align:"center",justify:"center",gap:4,children:i.jsxs(i.Fragment,{children:[`${Math.ceil(r)}`,i.jsx("img",{style:{height:16,opacity:K0(l.wins)},src:k.getPass()})]})})}];return i.jsxs(g,{vertical:!0,gap:20,style:{},align:"center",children:[i.jsx(g,{justify:"space-around",style:{marginTop:15},children:i.jsx("pre",{style:{fontSize:28,fontWeight:"bold",margin:0},children:e("SectionTitles.Results")})}),i.jsx(k0,{style:{fontSize:18},children:i.jsx("pre",{style:{margin:0},children:i.jsxs(g,{align:"center",gap:5,children:[i.jsx("span",{children:e("TotalAvailable")}),`( ${la(n.request.totalJade??0)}`,i.jsx("img",{style:{height:24},src:k.getJade()}),i.jsx("span",{children:") + ("}),la(n.request.totalPasses??0),i.jsx("img",{style:{height:24},src:k.getPass()}),i.jsx("span",{children:") + ("}),la(n.request.totalStarlight??0),i.jsx("img",{style:{height:24},src:k.getStarlight()}),i.jsx("span",{children:") "}),i.jsx("span",{children:"= "}),la(n.request.warps??0),i.jsx("img",{style:{height:24},src:k.getPass()})]})})}),i.jsx(g,{vertical:!0,gap:10,style:{width:"100%"},children:i.jsx(Qn,{style:{width:"100%"},columns:s,dataSource:o,pagination:!1,rowClassName:r=>`
            warp-table-row 
            ${r.wins<Xr?"warp-table-row-disabled":""}
          `})})]})}const Xr=.001;function K0(e){return e<Xr?.1:1}function j0(e){const{t}=V(["warpCalculatorTab","common"]),n=N.useWatch(["bannerRotation"]);return i.jsxs(g,{gap:25,style:{width:"100%"},children:[i.jsxs(g,{vertical:!0,flex:1,children:[i.jsx($,{children:t("PityCounter.PityCounter")}),i.jsx(N.Item,{name:`pity${e.banner}`,children:i.jsx($t,{placeholder:"0",min:0,max:e.banner=="Character"?89:79,style:{width:"100%"},controls:!1})})]}),i.jsxs(g,{vertical:!0,flex:1,style:{display:n==bo.RERUN?"flex":"none"},children:[i.jsx($,{children:t("PityCounter.CurrentEidolonSuperImp")}),i.jsx(N.Item,{name:e.banner==="Character"?"currentEidolonLevel":"currentSuperimpositionLevel",children:i.jsx(z,{options:e.banner=="Character"?a5():n5()})})]}),i.jsxs(g,{vertical:!0,flex:1,children:[i.jsx($,{children:t("PityCounter.Guaranteed")}),i.jsx(N.Item,{name:`guaranteed${e.banner}`,children:i.jsxs(Ye.Group,{block:!0,optionType:"button",buttonStyle:"solid",children:[i.jsx(Ye.Button,{value:!0,children:i.jsx(Sn,{})}),i.jsx(Ye.Button,{value:!1,children:i.jsx(Fa,{})})]})})]})]})}function $y(){var s;const e=w.getFixedT(null,"warpCalculatorTab","IncomeOptions"),t=(s=w.resolvedLanguage)==null?void 0:s.split("_")[0];return[es.F2P,es.EXPRESS,es.BP_EXPRESS].map(r=>({title:e(`Type.${r}`),value:r,selectable:!1,children:Vl.filter(l=>l.type===r).flatMap(l=>{const c=[{value:l.id,title:l.type==es.NONE?e("Type.0"):i.jsxs(g,{align:"center",gap:3,children:[i.jsx(qy,{option:l}),`+${l.passes.toLocaleString(t)}`,i.jsx("img",{style:{height:18},src:k.getPass()})]})}];return l.phase==2&&c.push({title:i.jsx(i.Fragment,{}),value:l.id+"divider",className:"tree-select-divider",disabled:!0}),c}).slice(0,-1)}))}function qy(e){const t=w.getFixedT(null,"warpCalculatorTab","IncomeOptions");return i.jsx("div",{style:{marginRight:2},children:t("Label",{versionNumber:e.option.version,phaseNumber:e.option.phase,type:t(`Type.${e.option.type}`)})})}function e5(){const e=w.getFixedT(null,"warpCalculatorTab","StrategyLabels");return[{value:Na.S1,label:e("S1")},{value:Na.E0,label:e("E0")},{value:Na.E1,label:e("E1")},{value:Na.E2,label:e("E2")},{value:Na.E3,label:e("E3")},{value:Na.E4,label:e("E4")},{value:Na.E5,label:e("E5")},{value:Na.E6,label:e("E6")}]}function t5(){return w.getFixedT(null,"warpCalculatorTab","StrategyLabels"),[{value:Ta.REFUND_NONE,label:"None",labelInValue:"None"},{value:Ta.REFUND_LOW,label:`${bi(Ta.REFUND_LOW)}% refund (Low)`,labelInValue:`${bi(Ta.REFUND_LOW)}% refund`},{value:Ta.REFUND_AVG,label:`${bi(Ta.REFUND_AVG,!0)}% refund (Average)`,labelInValue:`${bi(Ta.REFUND_AVG,!0)}% refund`},{value:Ta.REFUND_HIGH,label:`${bi(Ta.REFUND_HIGH)}% refund (High)`,labelInValue:`${bi(Ta.REFUND_HIGH)}% refund`}]}function bi(e,t=!1){const n=Bm[e]*100;return t?Ct(n):fn(n)}function a5(){const e=w.getFixedT(null,"warpCalculatorTab","EidolonLevels");return[{value:Va.NONE,label:e("NONE")},{value:Va.E0,label:e("E0")},{value:Va.E1,label:e("E1")},{value:Va.E2,label:e("E2")},{value:Va.E3,label:e("E3")},{value:Va.E4,label:e("E4")},{value:Va.E5,label:e("E5")},{value:Va.E6,label:e("E6")}]}function n5(){const e=w.getFixedT(null,"warpCalculatorTab","SuperimpositionLevels");return[{value:Fn.NONE,label:e("NONE")},{value:Fn.S1,label:e("S1")},{value:Fn.S2,label:e("S2")},{value:Fn.S3,label:e("S3")},{value:Fn.S4,label:e("S4")},{value:Fn.S5,label:e("S5")}]}function i5(e){const t=w.getFixedT(null,["warpCalculatorTab","common"]);return e=="S1"?t("common:SuperimpositionNShort",{superimposition:1}):t("warpCalculatorTab:TargetLabel",{superimposition:e.charAt(3),eidolon:e.charAt(1)})}async function s5(e,t,n){e.resultSort=T.COMBO.key;const o=Ki(e),s=new Array(Math.pow(Object.keys($n).length,4)).fill(1),r=new Array(Math.pow(Object.keys(qn).length,2)).fill(1),c=Jd(n,t,e,o,1,xi,s,r,!0,!0),d=Qd(c,0);await d.mapAsync(GPUMapMode.READ,0,1e4);const u=d.getMappedRange(0,1e4),h=new Float32Array(u),p=Un(e,{Head:t.Head[0],Hands:t.Hands[0],Body:t.Body[0],Feet:t.Feet[0],PlanarSphere:t.PlanarSphere[0],LinkRope:t.LinkRope[0]}),S=c5(p.a,h);return d.unmap(),d.destroy(),$d(c),S}const Wa=1,It=.01,o5=1e-4,r5={[f.BASE_ATK]:!0,[f.BASE_DEF]:!0,[f.BASE_HP]:!0,[f.BASE_SPD]:!0,[f.PHYSICAL_DMG_BOOST]:!0,[f.FIRE_DMG_BOOST]:!0,[f.ICE_DMG_BOOST]:!0,[f.LIGHTNING_DMG_BOOST]:!0,[f.WIND_DMG_BOOST]:!0,[f.IMAGINARY_DMG_BOOST]:!0,[f.QUANTUM_DMG_BOOST]:!0},l5={[f.BASIC_DMG]:Wa,[f.SKILL_DMG]:Wa,[f.ULT_DMG]:Wa,[f.FUA_DMG]:Wa,[f.DOT_DMG]:Wa,[f.BREAK_DMG]:Wa,[f.MEMO_SKILL_DMG]:Wa,[f.MEMO_TALENT_DMG]:Wa,[f.COMBO_DMG]:Wa,[f.HEAL_VALUE]:It,[f.SHIELD_VALUE]:It,[f.HP]:It,[f.ATK]:It,[f.DEF]:It,[f.EHP]:It,[f.UNCONVERTIBLE_HP_BUFF]:It,[f.UNCONVERTIBLE_ATK_BUFF]:It,[f.UNCONVERTIBLE_DEF_BUFF]:It,[f.BASIC_ADDITIONAL_DMG]:It,[f.SKILL_ADDITIONAL_DMG]:It,[f.ULT_ADDITIONAL_DMG]:It,[f.FUA_ADDITIONAL_DMG]:It,[f.DOT_ADDITIONAL_DMG]:It,[f.BREAK_ADDITIONAL_DMG]:It,[f.MEMO_SKILL_ADDITIONAL_DMG]:It,[f.MEMO_TALENT_ADDITIONAL_DMG]:It};function c5(e,t){const n={};let o=!0;const s=Object.keys(Vn);function r(l,c){const d=e[l]-t[l],u=Math.abs(d)<=c;u||(o=!1);const h=s[l];n[h]={key:h,cpu:e[l].toLocaleString("en-US",{useGrouping:!1,maximumFractionDigits:20}),gpu:t[l].toLocaleString("en-US",{useGrouping:!1,maximumFractionDigits:20}),deltaValue:d,deltaString:d.toLocaleString("en-US",{useGrouping:!1,maximumFractionDigits:20}),precision:c,pass:u}}for(let l=0;l<Object.keys(Vn).length;l++){if(r5[l])continue;const c=l5[l]??o5;r(l,c)}return{allPass:o,statDeltas:n}}function d5(e,t,n,o){const s={name:e,request:t,relics:n,done:!1};return s.execute=async()=>{const r=s5(t,n,o),l=await r;return s.done=!0,s.result=l,r},s}function u5(e){for(const[t,n]of Object.entries(e))n.map(o=>{const s=o.condensedStats;o.substats=[],s.map(([r,l])=>{o.substats.push({stat:vr[r],value:l})})});return e}function m5(){const e={Head:[{part:"Head",set:"Hunter of Glacial Forest",enhance:15,grade:5,main:{stat:a.HP,value:705.6},id:"cd85c14c-a662-4413-a149-a379e6d538d3",equippedBy:"1212",condensedStats:[[f.CR,.36016],[f.CD,.10368],[f.RES,.03456],[f.BE,.05184],[f.HP,705.6]],weightScore:0,substats:[]}],Hands:[{part:"Hands",set:"Hunter of Glacial Forest",enhance:15,grade:5,main:{stat:a.ATK,value:352.8},id:"798657c8-5c5c-4b44-9c5f-f5f094414289",equippedBy:"1212",condensedStats:[[f.HP_P,.03456],[f.SPD,4],[f.CD,.2268],[f.EHR,.03456],[f.ATK,352.8]],weightScore:0,substats:[]}],Body:[{part:"Body",set:"Hunter of Glacial Forest",enhance:15,grade:5,main:{stat:a.CD,value:64.8},id:"b3376a19-62f9-489e-80e6-8f98335af158",equippedBy:"1212",condensedStats:[[f.HP,114.31138],[f.ATK_P,.07344],[f.DEF_P,.0432],[f.CR,.081],[f.CD,.648]],weightScore:0,substats:[]}],Feet:[{part:"Feet",set:"Hunter of Glacial Forest",enhance:15,grade:5,main:{stat:a.SPD,value:25.032},id:"92c53d06-80d0-43a8-b896-2feeda419674",equippedBy:"1212",condensedStats:[[f.ATK,21.16877],[f.ATK_P,.11664],[f.DEF_P,.0486],[f.CD,.17496],[f.SPD,25.032]],weightScore:0,substats:[]}],PlanarSphere:[{part:"PlanarSphere",set:"Rutilant Arena",enhance:15,grade:5,main:{stat:a.Ice_DMG,value:38.8803},id:"80abbd56-b1a0-4587-a349-754c33627217",equippedBy:"1212",condensedStats:[[f.DEF,74.09071],[f.CR,.05508],[f.CD,.12312],[f.EHR,.0432],[f.ICE_DMG_BOOST,.388803]],weightScore:0,substats:[]}],LinkRope:[{part:"LinkRope",set:"Rutilant Arena",enhance:15,grade:5,main:{stat:a.ATK_P,value:43.2},id:"c521dc03-6c6e-45ef-9933-811367312441",equippedBy:"1212",condensedStats:[[f.HP,80.44134],[f.CR,.08424],[f.CD,.10368],[f.BE,.05832],[f.ATK_P,.43200000000000005]],weightScore:0,substats:[]}]};return u5(e)}const Do={metadata:{}},Ke="23001",h5=[{characterId:"1001",lightConeId:Ke},{characterId:"1002",lightConeId:Ke},{characterId:"1003",lightConeId:"23000"},{characterId:"1004",lightConeId:"23004"},{characterId:"1005",lightConeId:"23006"},{characterId:"1006",lightConeId:"23007"},{characterId:"1008",lightConeId:Ke},{characterId:"1009",lightConeId:Ke},{characterId:"1013",lightConeId:Ke},{characterId:"1101",lightConeId:"23003"},{characterId:"1102",lightConeId:"23001"},{characterId:"1103",lightConeId:Ke},{characterId:"1104",lightConeId:"23005"},{characterId:"1105",lightConeId:Ke},{characterId:"1106",lightConeId:Ke},{characterId:"1107",lightConeId:"23002"},{characterId:"1108",lightConeId:Ke},{characterId:"1109",lightConeId:Ke},{characterId:"1110",lightConeId:Ke},{characterId:"1111",lightConeId:Ke},{characterId:"1112",lightConeId:"23016"},{characterId:"1201",lightConeId:Ke},{characterId:"1202",lightConeId:Ke},{characterId:"1203",lightConeId:"23008"},{characterId:"1204",lightConeId:"23010"},{characterId:"1205",lightConeId:"23009"},{characterId:"1206",lightConeId:Ke},{characterId:"1207",lightConeId:Ke},{characterId:"1208",lightConeId:"23011"},{characterId:"1209",lightConeId:"23012"},{characterId:"1210",lightConeId:Ke},{characterId:"1211",lightConeId:"23013"},{characterId:"1212",lightConeId:"23014"},{characterId:"1213",lightConeId:"23015"},{characterId:"1214",lightConeId:Ke},{characterId:"1215",lightConeId:Ke},{characterId:"1217",lightConeId:"23017"},{characterId:"1218",lightConeId:"23029"},{characterId:"1220",lightConeId:"23031"},{characterId:"1221",lightConeId:"23030"},{characterId:"1222",lightConeId:"23032"},{characterId:"1223",lightConeId:Ke},{characterId:"1224",lightConeId:Ke},{characterId:"1301",lightConeId:Ke},{characterId:"1302",lightConeId:"23018"},{characterId:"1303",lightConeId:"23019"},{characterId:"1304",lightConeId:"23023"},{characterId:"1305",lightConeId:"23020"},{characterId:"1306",lightConeId:"23021"},{characterId:"1307",lightConeId:"23022"},{characterId:"1308",lightConeId:"23024"},{characterId:"1309",lightConeId:"23026"},{characterId:"1310",lightConeId:"23025"},{characterId:"1312",lightConeId:Ke},{characterId:"1314",lightConeId:"23028"},{characterId:"1315",lightConeId:"23027"},{characterId:"1317",lightConeId:"23033"},{characterId:"1225",lightConeId:"23035"},{characterId:"1313",lightConeId:"23034"},{characterId:"1401",lightConeId:"23037"},{characterId:"1402",lightConeId:"23036"},{characterId:"1403",lightConeId:"23038"},{characterId:"1404",lightConeId:"23039"},{characterId:"1405",lightConeId:"23041"},{characterId:"1407",lightConeId:"23040"},{characterId:"8001",lightConeId:Ke},{characterId:"8002",lightConeId:Ke},{characterId:"8003",lightConeId:Ke},{characterId:"8004",lightConeId:Ke},{characterId:"8005",lightConeId:Ke},{characterId:"8006",lightConeId:Ke},{characterId:"8007",lightConeId:Ke},{characterId:"8008",lightConeId:Ke}];async function f5(){const e=await dl();return e?(Do.metadata=B.getMetadata(),[...g5(e),...S5(e),...p5(e),...W0(e,4),...W0(e,3)]):[]}function p5(e){return h5.reverse().map(t=>Fo(t.characterId,t.lightConeId,e))}function W0(e,t){const n="1005",s=Object.values(Do.metadata.lightCones).filter(l=>l.rarity==t),r=[];for(const l of s){const c=Fo(n,l.id,e);r.push(c)}return r}function g5(e){const t="1005",n=Ke,o=[];for(const s of Qa){const r=Fo(t,n,e);r.name+=` — Ornament Sets  — ${s}`,r.relics.LinkRope[0].set=s,r.relics.PlanarSphere[0].set=s,o.push(r)}return o}function S5(e){const t="1005",n=Ke,o=[];for(const s of Ja){const r=Fo(t,n,e);r.name+=` — Relic Sets  — ${s}`,r.relics.Head[0].set=s,r.relics.Hands[0].set=s,r.relics.Body[0].set=s,r.relics.Feet[0].set=s,o.push(r)}return o}function Fo(e,t,n){const o=se.displayToForm(Pi(e,t,6,5)),s=m5();return o.sortOption=T.COMBO.key,Pr(o,0,"8008","21051"),Pr(o,1,"1225","23035"),Pr(o,2,"1309","23026"),d5(`E6S5 ${Do.metadata.characters[e].displayName} — ${Do.metadata.lightCones[t].displayName}`,o,s,n)}function Pr(e,t,n,o){const s=Pi(n,o,6,5,!0);t==0&&(e.teammate0=s),t==1&&(e.teammate1=s),t==2&&(e.teammate2=s)}function b5(){return window.store(t=>t.activeKey)!=de.WEBGPU_TEST?i.jsx(i.Fragment,{}):i.jsx(D5,{})}function D5(){const[e,t]=I.useState([]),[n,o]=I.useState(!1);async function s(){o(!1),window.WEBGPU_DEBUG=!0;const r=await f5(),l=r.length;let c=0,d=0;t(r),r.map(u=>u.name=`#${++c} — ${u.name}`);for(const u of r){await u.execute();const h=[...r].sort(R5);t(h),d++,d==l&&o(!0)}}return i.jsxs(g,{vertical:!0,style:{width:1200,minHeight:2e3},children:[i.jsx(Y,{type:"primary",onClick:s,style:{height:50,background:n?"#248453":void 0},disabled:!n&&e.length>0,children:n?"Tests complete":"Run all WebGPU tests"}),i.jsx(Co,{items:e.map(E5),expandIconPosition:"end",size:"small"})]})}function R5(e,t){return e.done!==t.done?e.done?-1:1:e.done&&t.done?e.result.allPass===t.result.allPass?0:e.result.allPass?1:-1:0}function E5(e){return{key:e.name,label:i.jsx(y5,{test:e}),children:i.jsx(T5,{test:e})}}const C5=[{title:"",dataIndex:"pass",render:e=>i.jsx(g,{style:{color:e?"#83ec66":"#ef7979",width:"100%"},justify:"space-around",children:e?i.jsx($s,{}):i.jsx(Yr,{})}),width:20},{title:"Stat",dataIndex:"key",render:e=>i.jsx(Qi,{text:e}),width:80},{title:"CPU",dataIndex:"cpu",render:e=>i.jsx(Qi,{text:e}),width:120},{title:"GPU",dataIndex:"gpu",render:e=>i.jsx(Qi,{text:e}),width:120},{title:"Delta",dataIndex:"deltaString",render:e=>i.jsx(Qi,{text:e}),width:120},{title:"Precision",dataIndex:"precision",render:e=>i.jsx(Qi,{text:e}),width:120}];function T5(e){const{test:t}=e;if(!t.result)return i.jsx(i.Fragment,{});const n=t.result.statDeltas,o=Object.values(n);return o.sort((s,r)=>Number(s.pass)-Number(r.pass)),i.jsx(Qn,{columns:C5,dataSource:o,size:"small",pagination:!1})}function y5(e){const{test:t}=e;return t.done?i.jsxs(g,{gap:8,style:{color:t.result.allPass?"#83ec66":"#ef7979"},children:[t.result.allPass?i.jsx($s,{}):i.jsx(Yr,{}),t.name]}):i.jsxs(g,{gap:8,style:{color:"e6e6e6"},children:[i.jsx(Dh,{}),t.name]})}function Qi(e){return i.jsx("div",{style:{margin:"0",fontFamily:"Segoe UI, Frutiger, Frutiger Linotype, Dejavu Sans, Helvetica Neue, Arial, sans-serif"},children:e.text})}const Gm=({error:{message:e}})=>i.jsxs(Ce,{children:["Something went wrong: ",e]});let Z0=!1;const P5=()=>{const e=window.store(p=>p.activeKey).split("?")[0],t=Et.useMemo(()=>i.jsx(nT,{}),[]),n=Et.useMemo(()=>i.jsx(Ry,{}),[]),o=Et.useMemo(()=>i.jsx(aT,{}),[]),s=Et.useMemo(()=>i.jsx(ym,{}),[]),r=Et.useMemo(()=>i.jsx(WT,{}),[]),l=Et.useMemo(()=>i.jsx(Pm,{}),[]),c=Et.useMemo(()=>i.jsx(Uy,{}),[]),d=Et.useMemo(()=>i.jsx(gR,{}),[]),u=Et.useMemo(()=>i.jsx(b5,{}),[]),h=Et.useMemo(()=>i.jsx(ZT,{}),[]);return I.useEffect(()=>{var S,D;let p=oa[e]||oa[de.OPTIMIZER];if(e==de.SHOWCASE){const E=(D=(S=window.location.hash.split("?")[1])==null?void 0:S.split("id=")[1])==null?void 0:D.split("&")[0];E&&(p+=`?id=${E}`)}console.log("Navigating activekey to route",e,p),window.history.pushState({},window.title,p),e==de.OPTIMIZER?Z0||(Z0=!0,Aa.initializeAllWorkers()):window.scrollTo(0,0)},[e]),i.jsxs(g,{justify:"space-around",style:{width:"100%"},children:[i.jsx(xa,{activeKey:e,tabKey:de.HOME,content:t}),i.jsx(xa,{activeKey:e,tabKey:de.OPTIMIZER,content:n}),i.jsx(xa,{activeKey:e,tabKey:de.CHARACTERS,content:o}),i.jsx(xa,{activeKey:e,tabKey:de.RELICS,content:s}),i.jsx(xa,{activeKey:e,tabKey:de.IMPORT,content:r}),i.jsx(xa,{activeKey:e,tabKey:de.SHOWCASE,content:l}),i.jsx(xa,{activeKey:e,tabKey:de.WARP,content:c}),i.jsx(xa,{activeKey:e,tabKey:de.CHANGELOG,content:d}),i.jsx(xa,{activeKey:e,tabKey:de.WEBGPU_TEST,content:u}),i.jsx(xa,{activeKey:e,tabKey:de.METADATA_TEST,content:h}),i.jsx(tl,{fallbackRender:Gm,children:i.jsx(kD,{})})]})};function xa(e){return i.jsx(tl,{fallbackRender:Gm,children:i.jsx("div",{style:{display:e.activeKey===e.tabKey?"contents":"none"},id:e.tabKey,children:e.content})})}const{getDesignToken:I5}=Ft,{Content:B5}=fs,G5=()=>{const[e,t]=Rh.useMessage(),[n,o]=Eh.useNotification(),[s,r]=_t.useModal();window.messageApi=e,window.notificationApi=n,window.modalApi=s;const l=window.store(d=>d.colorTheme),c=window.store(d=>d.globalThemeConfig);return I.useEffect(()=>{be.setToken(I5({token:l}))},[l]),I.useEffect(()=>{VD(B.getState().version)},[]),i.jsxs(jn,{theme:c,children:[t,o,r,i.jsxs(fs,{style:{minHeight:"100%"},children:[i.jsx($D,{}),i.jsxs(fs,{hasSider:!0,children:[i.jsx(lR,{}),i.jsx(B5,{style:{padding:10,margin:0,minHeight:280,marginLeft:"auto",marginRight:"auto",overflow:"initial",display:"flex",justifyContent:"space-around",width:"100%"},children:i.jsx(P5,{})}),i.jsx(MD,{}),i.jsx(mR,{}),i.jsx(hR,{})]})]})]})};function M5(){return i.jsx(G5,{})}const x5={21:{id:"21",affixes:{1:{affix_id:"1",property:"HPDelta",base:45.1584,step:15.80544}}},22:{id:"22",affixes:{1:{affix_id:"1",property:"AttackDelta",base:22.5792,step:7.90272}}},23:{id:"23",affixes:{1:{affix_id:"1",property:"HPAddedRatio",base:.027648,step:.009677},2:{affix_id:"2",property:"AttackAddedRatio",base:.027648,step:.009677},3:{affix_id:"3",property:"DefenceAddedRatio",base:.034560002,step:.012096001},4:{affix_id:"4",property:"CriticalChanceBase",base:.020736001,step:.007258},5:{affix_id:"5",property:"CriticalDamageBase",base:.041472,step:.014515},6:{affix_id:"6",property:"HealRatioBase",base:.022118,step:.0077410005},7:{affix_id:"7",property:"StatusProbabilityBase",base:.027648,step:.009677}}},24:{id:"24",affixes:{1:{affix_id:"1",property:"HPAddedRatio",base:.027648,step:.009677},2:{affix_id:"2",property:"AttackAddedRatio",base:.027648,step:.009677},3:{affix_id:"3",property:"DefenceAddedRatio",base:.034560002,step:.012096001},4:{affix_id:"4",property:"SpeedDelta",base:1.6128,step:1}}},25:{id:"25",affixes:{1:{affix_id:"1",property:"HPAddedRatio",base:.027648,step:.009677},2:{affix_id:"2",property:"AttackAddedRatio",base:.027648,step:.009677},3:{affix_id:"3",property:"DefenceAddedRatio",base:.034560002,step:.012096001},4:{affix_id:"4",property:"PhysicalAddedRatio",base:.024883,step:.008709},5:{affix_id:"5",property:"FireAddedRatio",base:.024883,step:.008709},6:{affix_id:"6",property:"IceAddedRatio",base:.024883,step:.008709},7:{affix_id:"7",property:"ThunderAddedRatio",base:.024883,step:.008709},8:{affix_id:"8",property:"WindAddedRatio",base:.024883,step:.008709},9:{affix_id:"9",property:"QuantumAddedRatio",base:.024883,step:.008709},10:{affix_id:"10",property:"ImaginaryAddedRatio",base:.024883,step:.008709}}},26:{id:"26",affixes:{1:{affix_id:"1",property:"BreakDamageAddedRatioBase",base:.041472,step:.014515},2:{affix_id:"2",property:"SPRatioBase",base:.012442,step:.0043550003},3:{affix_id:"3",property:"HPAddedRatio",base:.027648,step:.009677},4:{affix_id:"4",property:"AttackAddedRatio",base:.027648,step:.009677},5:{affix_id:"5",property:"DefenceAddedRatio",base:.034560002,step:.012096001}}},31:{id:"31",affixes:{1:{affix_id:"1",property:"HPDelta",base:67.7376,step:23.70816}}},32:{id:"32",affixes:{1:{affix_id:"1",property:"AttackDelta",base:33.8688,step:11.85408}}},33:{id:"33",affixes:{1:{affix_id:"1",property:"HPAddedRatio",base:.041472,step:.014515},2:{affix_id:"2",property:"AttackAddedRatio",base:.041472,step:.014515},3:{affix_id:"3",property:"DefenceAddedRatio",base:.05184,step:.018144},4:{affix_id:"4",property:"CriticalChanceBase",base:.031104,step:.010886001},5:{affix_id:"5",property:"CriticalDamageBase",base:.062208,step:.021773001},6:{affix_id:"6",property:"HealRatioBase",base:.033178,step:.011612},7:{affix_id:"7",property:"StatusProbabilityBase",base:.041472,step:.014515}}},34:{id:"34",affixes:{1:{affix_id:"1",property:"HPAddedRatio",base:.041472,step:.014515},2:{affix_id:"2",property:"AttackAddedRatio",base:.041472,step:.014515},3:{affix_id:"3",property:"DefenceAddedRatio",base:.05184,step:.018144},4:{affix_id:"4",property:"SpeedDelta",base:2.4192,step:1}}},35:{id:"35",affixes:{1:{affix_id:"1",property:"HPAddedRatio",base:.041472,step:.014515},2:{affix_id:"2",property:"AttackAddedRatio",base:.041472,step:.014515},3:{affix_id:"3",property:"DefenceAddedRatio",base:.05184,step:.018144},4:{affix_id:"4",property:"PhysicalAddedRatio",base:.037325,step:.013064001},5:{affix_id:"5",property:"FireAddedRatio",base:.037325,step:.013064001},6:{affix_id:"6",property:"IceAddedRatio",base:.037325,step:.013064001},7:{affix_id:"7",property:"ThunderAddedRatio",base:.037325,step:.013064001},8:{affix_id:"8",property:"WindAddedRatio",base:.037325,step:.013064001},9:{affix_id:"9",property:"QuantumAddedRatio",base:.037325,step:.013064001},10:{affix_id:"10",property:"ImaginaryAddedRatio",base:.037325,step:.013064001}}},36:{id:"36",affixes:{1:{affix_id:"1",property:"BreakDamageAddedRatioBase",base:.062208,step:.021773001},2:{affix_id:"2",property:"SPRatioBase",base:.018662,step:.0065320004},3:{affix_id:"3",property:"HPAddedRatio",base:.041472,step:.014515},4:{affix_id:"4",property:"AttackAddedRatio",base:.041472,step:.014515},5:{affix_id:"5",property:"DefenceAddedRatio",base:.05184,step:.018144}}},41:{id:"41",affixes:{1:{affix_id:"1",property:"HPDelta",base:90.3168,step:31.61088}}},42:{id:"42",affixes:{1:{affix_id:"1",property:"AttackDelta",base:45.1584,step:15.80544}}},43:{id:"43",affixes:{1:{affix_id:"1",property:"HPAddedRatio",base:.055296,step:.019354},2:{affix_id:"2",property:"AttackAddedRatio",base:.055296,step:.019354},3:{affix_id:"3",property:"DefenceAddedRatio",base:.06912,step:.024192},4:{affix_id:"4",property:"CriticalChanceBase",base:.041472,step:.014515},5:{affix_id:"5",property:"CriticalDamageBase",base:.082944,step:.029029999},6:{affix_id:"6",property:"HealRatioBase",base:.044237,step:.015483},7:{affix_id:"7",property:"StatusProbabilityBase",base:.055296,step:.019354}}},44:{id:"44",affixes:{1:{affix_id:"1",property:"HPAddedRatio",base:.055296,step:.019354},2:{affix_id:"2",property:"AttackAddedRatio",base:.055296,step:.019354},3:{affix_id:"3",property:"DefenceAddedRatio",base:.06912,step:.024192},4:{affix_id:"4",property:"SpeedDelta",base:3.2256,step:1.1}}},45:{id:"45",affixes:{1:{affix_id:"1",property:"HPAddedRatio",base:.055296,step:.019354},2:{affix_id:"2",property:"AttackAddedRatio",base:.055296,step:.019354},3:{affix_id:"3",property:"DefenceAddedRatio",base:.06912,step:.024192},4:{affix_id:"4",property:"PhysicalAddedRatio",base:.049766,step:.017418},5:{affix_id:"5",property:"FireAddedRatio",base:.049766,step:.017418},6:{affix_id:"6",property:"IceAddedRatio",base:.049766,step:.017418},7:{affix_id:"7",property:"ThunderAddedRatio",base:.049766,step:.017418},8:{affix_id:"8",property:"WindAddedRatio",base:.049766,step:.017418},9:{affix_id:"9",property:"QuantumAddedRatio",base:.049766,step:.017418},10:{affix_id:"10",property:"ImaginaryAddedRatio",base:.049766,step:.017418}}},46:{id:"46",affixes:{1:{affix_id:"1",property:"BreakDamageAddedRatioBase",base:.082944,step:.029029999},2:{affix_id:"2",property:"SPRatioBase",base:.024883,step:.008709},3:{affix_id:"3",property:"HPAddedRatio",base:.055296,step:.019354},4:{affix_id:"4",property:"AttackAddedRatio",base:.055296,step:.019354},5:{affix_id:"5",property:"DefenceAddedRatio",base:.06912,step:.024192}}},51:{id:"51",affixes:{1:{affix_id:"1",property:"HPDelta",base:112.896,step:39.5136}}},52:{id:"52",affixes:{1:{affix_id:"1",property:"AttackDelta",base:56.448,step:19.7568}}},53:{id:"53",affixes:{1:{affix_id:"1",property:"HPAddedRatio",base:.06912,step:.024192},2:{affix_id:"2",property:"AttackAddedRatio",base:.06912,step:.024192},3:{affix_id:"3",property:"DefenceAddedRatio",base:.0864,step:.030240001},4:{affix_id:"4",property:"CriticalChanceBase",base:.05184,step:.018144},5:{affix_id:"5",property:"CriticalDamageBase",base:.10368,step:.036288},6:{affix_id:"6",property:"HealRatioBase",base:.055296,step:.019354},7:{affix_id:"7",property:"StatusProbabilityBase",base:.06912,step:.024192}}},54:{id:"54",affixes:{1:{affix_id:"1",property:"HPAddedRatio",base:.06912,step:.024192},2:{affix_id:"2",property:"AttackAddedRatio",base:.06912,step:.024192},3:{affix_id:"3",property:"DefenceAddedRatio",base:.0864,step:.030240001},4:{affix_id:"4",property:"SpeedDelta",base:4.032,step:1.4}}},55:{id:"55",affixes:{1:{affix_id:"1",property:"HPAddedRatio",base:.06912,step:.024192},2:{affix_id:"2",property:"AttackAddedRatio",base:.06912,step:.024192},3:{affix_id:"3",property:"DefenceAddedRatio",base:.0864,step:.030240001},4:{affix_id:"4",property:"PhysicalAddedRatio",base:.062208,step:.021773001},5:{affix_id:"5",property:"FireAddedRatio",base:.062208,step:.021773001},6:{affix_id:"6",property:"IceAddedRatio",base:.062208,step:.021773001},7:{affix_id:"7",property:"ThunderAddedRatio",base:.062208,step:.021773001},8:{affix_id:"8",property:"WindAddedRatio",base:.062208,step:.021773001},9:{affix_id:"9",property:"QuantumAddedRatio",base:.062208,step:.021773001},10:{affix_id:"10",property:"ImaginaryAddedRatio",base:.062208,step:.021773001}}},56:{id:"56",affixes:{1:{affix_id:"1",property:"BreakDamageAddedRatioBase",base:.10368,step:.036288},2:{affix_id:"2",property:"SPRatioBase",base:.031104,step:.010886001},3:{affix_id:"3",property:"HPAddedRatio",base:.06912,step:.024192},4:{affix_id:"4",property:"AttackAddedRatio",base:.06912,step:.024192},5:{affix_id:"5",property:"DefenceAddedRatio",base:.0864,step:.030240001}}},433:{id:"433",affixes:{1:{affix_id:"1",property:"DefenceAddedRatio",base:.06912,step:.024192}}},434:{id:"434",affixes:{1:{affix_id:"1",property:"CriticalChanceBase",base:.041472,step:.014515}}},436:{id:"436",affixes:{1:{affix_id:"1",property:"HealRatioBase",base:.044237,step:.015483}}},441:{id:"441",affixes:{1:{affix_id:"1",property:"HPAddedRatio",base:.055296,step:.019354}}},443:{id:"443",affixes:{1:{affix_id:"1",property:"DefenceAddedRatio",base:.06912,step:.024192}}}},v5={2:{id:"2",affixes:{1:{affix_id:"1",property:"HPDelta",base:13.548016,step:1.693502,step_num:2},2:{affix_id:"2",property:"AttackDelta",base:6.774008,step:.846751,step_num:2},3:{affix_id:"3",property:"DefenceDelta",base:6.774008,step:.846751,step_num:2},4:{affix_id:"4",property:"HPAddedRatio",base:.013824001,step:.0017280006,step_num:2},5:{affix_id:"5",property:"AttackAddedRatio",base:.013824001,step:.0017280006,step_num:2},6:{affix_id:"6",property:"DefenceAddedRatio",base:.017280001,step:.0021600004,step_num:2},7:{affix_id:"7",property:"SpeedDelta",base:1,step:.1,step_num:2},8:{affix_id:"8",property:"CriticalChanceBase",base:.010368001,step:.0012960008,step_num:2},9:{affix_id:"9",property:"CriticalDamageBase",base:.020736001,step:.0025920009,step_num:2},10:{affix_id:"10",property:"StatusProbabilityBase",base:.013824001,step:.0017280006,step_num:2},11:{affix_id:"11",property:"StatusResistanceBase",base:.013824001,step:.0017280006,step_num:2},12:{affix_id:"12",property:"BreakDamageAddedRatioBase",base:.020736001,step:.0025920009,step_num:2}}},3:{id:"3",affixes:{1:{affix_id:"1",property:"HPDelta",base:20.322023,step:2.540253,step_num:2},2:{affix_id:"2",property:"AttackDelta",base:10.161012,step:1.270126,step_num:2},3:{affix_id:"3",property:"DefenceDelta",base:10.161012,step:1.270126,step_num:2},4:{affix_id:"4",property:"HPAddedRatio",base:.020736001,step:.0025920009,step_num:2},5:{affix_id:"5",property:"AttackAddedRatio",base:.020736001,step:.0025920009,step_num:2},6:{affix_id:"6",property:"DefenceAddedRatio",base:.02592,step:.0032400002,step_num:2},7:{affix_id:"7",property:"SpeedDelta",base:1.2,step:.1,step_num:2},8:{affix_id:"8",property:"CriticalChanceBase",base:.015552,step:.0019440008,step_num:2},9:{affix_id:"9",property:"CriticalDamageBase",base:.031104,step:.003888001,step_num:2},10:{affix_id:"10",property:"StatusProbabilityBase",base:.020736001,step:.0025920009,step_num:2},11:{affix_id:"11",property:"StatusResistanceBase",base:.020736001,step:.0025920009,step_num:2},12:{affix_id:"12",property:"BreakDamageAddedRatioBase",base:.031104,step:.003888001,step_num:2}}},4:{id:"4",affixes:{1:{affix_id:"1",property:"HPDelta",base:27.096031,step:3.387004,step_num:2},2:{affix_id:"2",property:"AttackDelta",base:13.548016,step:1.693502,step_num:2},3:{affix_id:"3",property:"DefenceDelta",base:13.548016,step:1.693502,step_num:2},4:{affix_id:"4",property:"HPAddedRatio",base:.027648,step:.0034560005,step_num:2},5:{affix_id:"5",property:"AttackAddedRatio",base:.027648,step:.0034560005,step_num:2},6:{affix_id:"6",property:"DefenceAddedRatio",base:.034560002,step:.0043200003,step_num:2},7:{affix_id:"7",property:"SpeedDelta",base:1.6,step:.2,step_num:2},8:{affix_id:"8",property:"CriticalChanceBase",base:.020736001,step:.0025920009,step_num:2},9:{affix_id:"9",property:"CriticalDamageBase",base:.041472,step:.0051840004,step_num:2},10:{affix_id:"10",property:"StatusProbabilityBase",base:.027648,step:.0034560005,step_num:2},11:{affix_id:"11",property:"StatusResistanceBase",base:.027648,step:.0034560005,step_num:2},12:{affix_id:"12",property:"BreakDamageAddedRatioBase",base:.041472,step:.0051840004,step_num:2}}},5:{id:"5",affixes:{1:{affix_id:"1",property:"HPDelta",base:33.87004,step:4.233755,step_num:2},2:{affix_id:"2",property:"AttackDelta",base:16.935019,step:2.116877,step_num:2},3:{affix_id:"3",property:"DefenceDelta",base:16.935019,step:2.116877,step_num:2},4:{affix_id:"4",property:"HPAddedRatio",base:.034560002,step:.0043200003,step_num:2},5:{affix_id:"5",property:"AttackAddedRatio",base:.034560002,step:.0043200003,step_num:2},6:{affix_id:"6",property:"DefenceAddedRatio",base:.0432,step:.0054,step_num:2},7:{affix_id:"7",property:"SpeedDelta",base:2,step:.3,step_num:2},8:{affix_id:"8",property:"CriticalChanceBase",base:.02592,step:.0032400002,step_num:2},9:{affix_id:"9",property:"CriticalDamageBase",base:.05184,step:.0064800004,step_num:2},10:{affix_id:"10",property:"StatusProbabilityBase",base:.034560002,step:.0043200003,step_num:2},11:{affix_id:"11",property:"StatusResistanceBase",base:.034560002,step:.0043200003,step_num:2},12:{affix_id:"12",property:"BreakDamageAddedRatioBase",base:.05184,step:.0064800004,step_num:2}}}},Ie=null,Qe="BASIC",ne="SKILL",Te="ULT",ve="FUA",_n="MEMO_SKILL",_5="MEMO_TALENT",Za=Tn.characters,N0=Tn.lightCones,Ir=[R.MessengerTraversingHackerspace,R.SacerdosRelivedOrdeal,R.ThiefOfShootingMeteor,R.WatchmakerMasterOfDreamMachinations,R.IronCavalryAgainstTheScourge],Be=[[R.PoetOfMourningCollapse,R.PoetOfMourningCollapse],[R.PioneerDiverOfDeadWaters,R.PioneerDiverOfDeadWaters],[R.EagleOfTwilightLine,R.EagleOfTwilightLine]],Vt=[R.DuranDynastyOfRunningWolves,R.SigoniaTheUnclaimedDesolation,R.InertSalsotto],we=[R.SigoniaTheUnclaimedDesolation],V0=[R.SprightlyVonwacq,R.PenaconyLandOfTheDreams,R.LushakaTheSunkenSeas],z0=[R.SprightlyVonwacq,R.BrokenKeel,R.PenaconyLandOfTheDreams,R.FleetOfTheAgeless,R.LushakaTheSunkenSeas],Mm={initialize:()=>{const e=L5(),t=F5(),n=Za;for(const u of Object.values(N0)){const h=u.id;e[h]?u.superimpositions=e[h]:u.superimpositions={};let p=200;t[h]!=null&&t[h]&&(p=t[h]),u.displayName=u.name,u.imageCenter=p}const o=H5(),s=w5(),r=Object.values(s);for(const u of r)for(const h of[b.Body,b.Feet,b.PlanarSphere,b.LinkRope])u.parts[h].length===0&&(u.parts[h]=al[h]);for(const[u,h]of Object.entries(Za)){if(!Za[u])continue;let p={x:1024,y:1024,z:1};o[u]!=null&&(p=o[u]),Za[u].traces=h.traces,Za[u].traceTree=h.traceTree,Za[u].imageCenter=p,Za[u].displayName=A5(Za[u]),Za[u].scoringMetadata=s[u]}const l=Tn.relics.reduce((u,h)=>(u[h.id]=h,u),{}),d={characters:n,lightCones:N0,relics:{relicMainAffixes:x5,relicSubAffixes:v5,relicSets:l}};return B.setMetadata(d),d}},U0={8001:"Caelus (Destruction)",8002:"Stelle (Destruction)",8003:"Caelus (Preservation)",8004:"Stelle (Preservation)",8005:"Caelus (Harmony)",8006:"Stelle (Harmony)",8007:"Caelus (Remembrance)",8008:"Stelle (Remembrance)",1213:"Imbibitor Lunae",1224:"March 7th (Hunt)"};function A5(e){return e.id in U0?U0[e.id]:e.name}function L5(){return{2e4:{},20001:{},20002:{},20003:{1:{[a.DEF_P]:.16},2:{[a.DEF_P]:.2},3:{[a.DEF_P]:.24},4:{[a.DEF_P]:.28},5:{[a.DEF_P]:.32}},20004:{},20005:{},20006:{},20007:{},20008:{},20009:{},20010:{},20011:{},20012:{},20013:{},20014:{},20015:{},20016:{},20017:{},20018:{},20019:{},20020:{},20021:{},20022:{},21e3:{1:{[a.ERR]:.08},2:{[a.ERR]:.1},3:{[a.ERR]:.12},4:{[a.ERR]:.14},5:{[a.ERR]:.16}},21001:{},21002:{1:{[a.DEF_P]:.16},2:{[a.DEF_P]:.18},3:{[a.DEF_P]:.2},4:{[a.DEF_P]:.22},5:{[a.DEF_P]:.24}},21003:{1:{[a.ATK_P]:.16},2:{[a.ATK_P]:.2},3:{[a.ATK_P]:.24},4:{[a.ATK_P]:.28},5:{[a.ATK_P]:.32}},21004:{1:{[a.BE]:.28},2:{[a.BE]:.35},3:{[a.BE]:.42},4:{[a.BE]:.49},5:{[a.BE]:.56}},21005:{},21006:{},21007:{1:{[a.OHB]:.1},2:{[a.OHB]:.125},3:{[a.OHB]:.15},4:{[a.OHB]:.175},5:{[a.OHB]:.2}},21008:{1:{[a.EHR]:.2},2:{[a.EHR]:.25},3:{[a.EHR]:.3},4:{[a.EHR]:.35},5:{[a.EHR]:.4}},21009:{},21010:{},21011:{},21012:{},21013:{},21014:{1:{[a.RES]:.16},2:{[a.RES]:.2},3:{[a.RES]:.24},4:{[a.RES]:.28},5:{[a.RES]:.32}},21015:{},21016:{1:{[a.DEF_P]:.16},2:{[a.DEF_P]:.2},3:{[a.DEF_P]:.24},4:{[a.DEF_P]:.28},5:{[a.DEF_P]:.32}},21017:{},21018:{},21019:{1:{[a.ATK_P]:.16},2:{[a.ATK_P]:.2},3:{[a.ATK_P]:.24},4:{[a.ATK_P]:.28},5:{[a.ATK_P]:.32}},21020:{1:{[a.ATK_P]:.16},2:{[a.ATK_P]:.2},3:{[a.ATK_P]:.24},4:{[a.ATK_P]:.28},5:{[a.ATK_P]:.32}},21021:{},21022:{1:{[a.BE]:.16},2:{[a.BE]:.2},3:{[a.BE]:.24},4:{[a.BE]:.28},5:{[a.BE]:.32}},21023:{},21024:{},21025:{},21026:{1:{[a.ATK_P]:.1},2:{[a.ATK_P]:.125},3:{[a.ATK_P]:.15},4:{[a.ATK_P]:.175},5:{[a.ATK_P]:.2}},21027:{},21028:{1:{[a.HP_P]:.16},2:{[a.HP_P]:.2},3:{[a.HP_P]:.24},4:{[a.HP_P]:.28},5:{[a.HP_P]:.32}},21029:{},21030:{1:{[a.DEF_P]:.16},2:{[a.DEF_P]:.2},3:{[a.DEF_P]:.24},4:{[a.DEF_P]:.28},5:{[a.DEF_P]:.32}},21031:{1:{[a.CR]:.12},2:{[a.CR]:.15},3:{[a.CR]:.18},4:{[a.CR]:.21},5:{[a.CR]:.24}},21032:{},21033:{1:{[a.ATK_P]:.24},2:{[a.ATK_P]:.3},3:{[a.ATK_P]:.36},4:{[a.ATK_P]:.42},5:{[a.ATK_P]:.48}},21034:{},21035:{1:{[a.BE]:.24},2:{[a.BE]:.3},3:{[a.BE]:.36},4:{[a.BE]:.42},5:{[a.BE]:.48}},21036:{},21037:{1:{[a.ATK_P]:.12},2:{[a.ATK_P]:.14},3:{[a.ATK_P]:.16},4:{[a.ATK_P]:.18},5:{[a.ATK_P]:.2}},21038:{},21039:{1:{[a.RES]:.12},2:{[a.RES]:.14},3:{[a.RES]:.16},4:{[a.RES]:.18},5:{[a.RES]:.2}},21040:{1:{[a.ATK_P]:.16},2:{[a.ATK_P]:.18},3:{[a.ATK_P]:.2},4:{[a.ATK_P]:.22},5:{[a.ATK_P]:.24}},21041:{},21042:{1:{[a.BE]:.28},2:{[a.BE]:.35},3:{[a.BE]:.42},4:{[a.BE]:.49},5:{[a.BE]:.56}},21043:{1:{[a.DEF_P]:.16},2:{[a.DEF_P]:.2},3:{[a.DEF_P]:.24},4:{[a.DEF_P]:.28},5:{[a.DEF_P]:.32}},21044:{1:{[a.CR]:.08},2:{[a.CR]:.1},3:{[a.CR]:.12},4:{[a.CR]:.14},5:{[a.CR]:.16}},21045:{1:{[m.Stats.BE]:.28},2:{[m.Stats.BE]:.35},3:{[m.Stats.BE]:.42},4:{[m.Stats.BE]:.49},5:{[m.Stats.BE]:.56}},21046:{1:{[m.Stats.ATK_P]:.16},2:{[m.Stats.ATK_P]:.2},3:{[m.Stats.ATK_P]:.24},4:{[m.Stats.ATK_P]:.28},5:{[m.Stats.ATK_P]:.32}},21047:{1:{[m.Stats.BE]:.28},2:{[m.Stats.BE]:.35},3:{[m.Stats.BE]:.42},4:{[m.Stats.BE]:.49},5:{[m.Stats.BE]:.56}},21048:{1:{[m.Stats.SPD_P]:.08},2:{[m.Stats.SPD_P]:.09},3:{[m.Stats.SPD_P]:.1},4:{[m.Stats.SPD_P]:.11},5:{[m.Stats.SPD_P]:.12}},21050:{1:{[m.Stats.CD]:.12},2:{[m.Stats.CD]:.15},3:{[m.Stats.CD]:.18},4:{[m.Stats.CD]:.21},5:{[m.Stats.CD]:.24}},21051:{1:{[m.Stats.ATK_P]:.16},2:{[m.Stats.ATK_P]:.2},3:{[m.Stats.ATK_P]:.24},4:{[m.Stats.ATK_P]:.28},5:{[m.Stats.ATK_P]:.32}},21052:{1:{[a.CR]:.12},2:{[a.CR]:.14},3:{[a.CR]:.16},4:{[a.CR]:.18},5:{[a.CR]:.2}},22e3:{1:{[a.EHR]:.2},2:{[a.EHR]:.25},3:{[a.EHR]:.3},4:{[a.EHR]:.35},5:{[a.EHR]:.4}},22001:{1:{[a.HP_P]:.08},2:{[a.HP_P]:.09},3:{[a.HP_P]:.1},4:{[a.HP_P]:.11},5:{[a.HP_P]:.12}},22002:{1:{[a.ATK_P]:.16},2:{[a.ATK_P]:.2},3:{[a.ATK_P]:.24},4:{[a.ATK_P]:.28},5:{[a.ATK_P]:.32}},22003:{1:{[a.HP_P]:.12},2:{[a.HP_P]:.15},3:{[a.HP_P]:.18},4:{[a.HP_P]:.21},5:{[a.HP_P]:.24}},22004:{1:{[a.ATK_P]:.08},2:{[a.ATK_P]:.1},3:{[a.ATK_P]:.12},4:{[a.ATK_P]:.14},5:{[a.ATK_P]:.16}},23e3:{},23001:{1:{[a.CR]:.18},2:{[a.CR]:.21},3:{[a.CR]:.24},4:{[a.CR]:.27},5:{[a.CR]:.3}},23002:{1:{[a.ATK_P]:.24},2:{[a.ATK_P]:.28},3:{[a.ATK_P]:.32},4:{[a.ATK_P]:.36},5:{[a.ATK_P]:.4}},23003:{1:{[a.ERR]:.1},2:{[a.ERR]:.12},3:{[a.ERR]:.14},4:{[a.ERR]:.16},5:{[a.ERR]:.18}},23004:{},23005:{1:{[a.DEF_P]:.24,[a.EHR]:.24},2:{[a.DEF_P]:.28,[a.EHR]:.28},3:{[a.DEF_P]:.32,[a.EHR]:.32},4:{[a.DEF_P]:.36,[a.EHR]:.36},5:{[a.DEF_P]:.4,[a.EHR]:.4}},23006:{},23007:{1:{[a.EHR]:.24},2:{[a.EHR]:.28},3:{[a.EHR]:.32},4:{[a.EHR]:.36},5:{[a.EHR]:.4}},23008:{1:{[a.ATK_P]:.24},2:{[a.ATK_P]:.28},3:{[a.ATK_P]:.32},4:{[a.ATK_P]:.36},5:{[a.ATK_P]:.4}},23009:{1:{[a.CR]:.18,[a.HP_P]:.18},2:{[a.CR]:.21,[a.HP_P]:.21},3:{[a.CR]:.24,[a.HP_P]:.24},4:{[a.CR]:.27,[a.HP_P]:.27},5:{[a.CR]:.3,[a.HP_P]:.3}},23010:{1:{[a.CD]:.36},2:{[a.CD]:.42},3:{[a.CD]:.48},4:{[a.CD]:.54},5:{[a.CD]:.6}},23011:{1:{[a.HP_P]:.24,[a.ERR]:.12},2:{[a.HP_P]:.28,[a.ERR]:.14},3:{[a.HP_P]:.32,[a.ERR]:.16},4:{[a.HP_P]:.36,[a.ERR]:.18},5:{[a.HP_P]:.4,[a.ERR]:.2}},23012:{1:{[a.CD]:.3},2:{[a.CD]:.35},3:{[a.CD]:.4},4:{[a.CD]:.45},5:{[a.CD]:.5}},23013:{1:{[a.HP_P]:.18,[a.OHB]:.12},2:{[a.HP_P]:.21,[a.OHB]:.14},3:{[a.HP_P]:.24,[a.OHB]:.16},4:{[a.HP_P]:.27,[a.OHB]:.18},5:{[a.HP_P]:.3,[a.OHB]:.2}},23014:{1:{[a.CD]:.2},2:{[a.CD]:.23},3:{[a.CD]:.26},4:{[a.CD]:.29},5:{[a.CD]:.32}},23015:{1:{[a.CR]:.18},2:{[a.CR]:.21},3:{[a.CR]:.24},4:{[a.CR]:.27},5:{[a.CR]:.3}},23016:{1:{[a.CR]:.18},2:{[a.CR]:.21},3:{[a.CR]:.24},4:{[a.CR]:.27},5:{[a.CR]:.3}},23017:{1:{[a.ERR]:.12},2:{[a.ERR]:.14},3:{[a.ERR]:.16},4:{[a.ERR]:.18},5:{[a.ERR]:.2}},23018:{1:{[a.CD]:.36},2:{[a.CD]:.42},3:{[a.CD]:.48},4:{[a.CD]:.54},5:{[a.CD]:.6}},23019:{1:{[a.BE]:.6},2:{[a.BE]:.7},3:{[a.BE]:.8},4:{[a.BE]:.9},5:{[a.BE]:1}},23020:{1:{[a.CD]:.2},2:{[a.CD]:.23},3:{[a.CD]:.26},4:{[a.CD]:.29},5:{[a.CD]:.32}},23021:{1:{[a.CD]:.32},2:{[a.CD]:.39},3:{[a.CD]:.46},4:{[a.CD]:.53},5:{[a.CD]:.6}},23022:{1:{[a.EHR]:.4},2:{[a.EHR]:.45},3:{[a.EHR]:.5},4:{[a.EHR]:.55},5:{[a.EHR]:.6}},23023:{1:{[a.DEF_P]:.4},2:{[a.DEF_P]:.46},3:{[a.DEF_P]:.52},4:{[a.DEF_P]:.58},5:{[a.DEF_P]:.64}},23024:{1:{[a.CD]:.36},2:{[a.CD]:.42},3:{[a.CD]:.48},4:{[a.CD]:.54},5:{[a.CD]:.6}},23025:{1:{[m.Stats.BE]:.6},2:{[m.Stats.BE]:.7},3:{[m.Stats.BE]:.8},4:{[m.Stats.BE]:.9},5:{[m.Stats.BE]:1}},23026:{},23027:{1:{[a.BE]:.6},2:{[a.BE]:.7},3:{[a.BE]:.8},4:{[a.BE]:.9},5:{[a.BE]:1}},23028:{1:{[m.Stats.CR]:.16},2:{[m.Stats.CR]:.19},3:{[m.Stats.CR]:.22},4:{[m.Stats.CR]:.25},5:{[m.Stats.CR]:.28}},23029:{1:{[m.Stats.EHR]:.6},2:{[m.Stats.EHR]:.7},3:{[m.Stats.EHR]:.8},4:{[m.Stats.EHR]:.9},5:{[m.Stats.EHR]:1}},23030:{1:{[m.Stats.CD]:.36},2:{[m.Stats.CD]:.42},3:{[m.Stats.CD]:.48},4:{[m.Stats.CD]:.54},5:{[m.Stats.CD]:.6}},23031:{1:{[m.Stats.CR]:.15},2:{[m.Stats.CR]:.175},3:{[m.Stats.CR]:.2},4:{[m.Stats.CR]:.225},5:{[m.Stats.CR]:.25}},23032:{1:{[m.Stats.BE]:.6},2:{[m.Stats.BE]:.7},3:{[m.Stats.BE]:.8},4:{[m.Stats.BE]:.9},5:{[m.Stats.BE]:1}},23033:{1:{[m.Stats.BE]:.6},2:{[m.Stats.BE]:.7},3:{[m.Stats.BE]:.8},4:{[m.Stats.BE]:.9},5:{[m.Stats.BE]:1}},23034:{},23035:{1:{[m.Stats.BE]:.6},2:{[m.Stats.BE]:.7},3:{[m.Stats.BE]:.8},4:{[m.Stats.BE]:.9},5:{[m.Stats.BE]:1}},23036:{1:{[m.Stats.SPD]:12},2:{[m.Stats.SPD]:14},3:{[m.Stats.SPD]:16},4:{[m.Stats.SPD]:18},5:{[m.Stats.SPD]:20}},23037:{1:{[m.Stats.CR]:.12},2:{[m.Stats.CR]:.14},3:{[m.Stats.CR]:.16},4:{[m.Stats.CR]:.18},5:{[m.Stats.CR]:.2}},23038:{1:{[m.Stats.CD]:.36},2:{[m.Stats.CD]:.42},3:{[m.Stats.CD]:.48},4:{[m.Stats.CD]:.54},5:{[m.Stats.CD]:.6}},23039:{1:{[m.Stats.HP_P]:.18},2:{[m.Stats.HP_P]:.21},3:{[m.Stats.HP_P]:.24},4:{[m.Stats.HP_P]:.27},5:{[m.Stats.HP_P]:.3}},23040:{1:{[m.Stats.HP_P]:.3},2:{[m.Stats.HP_P]:.375},3:{[m.Stats.HP_P]:.45},4:{[m.Stats.HP_P]:.525},5:{[m.Stats.HP_P]:.6}},23041:{},24e3:{},24001:{1:{[a.CR]:.08},2:{[a.CR]:.1},3:{[a.CR]:.12},4:{[a.CR]:.14},5:{[a.CR]:.16}},24002:{1:{[a.RES]:.08},2:{[a.RES]:.1},3:{[a.RES]:.12},4:{[a.RES]:.14},5:{[a.RES]:.16}},24003:{1:{[a.BE]:.2},2:{[a.BE]:.25},3:{[a.BE]:.3},4:{[a.BE]:.35},5:{[a.BE]:.4}},24004:{1:{[m.Stats.ATK_P]:.08},2:{[m.Stats.ATK_P]:.09},3:{[m.Stats.ATK_P]:.1},4:{[m.Stats.ATK_P]:.11},5:{[m.Stats.ATK_P]:.12}},24005:{1:{[m.Stats.SPD_P]:.06},2:{[m.Stats.SPD_P]:.075},3:{[m.Stats.SPD_P]:.09},4:{[m.Stats.SPD_P]:.105},5:{[m.Stats.SPD_P]:.12}}}}function F5(){return{2e4:270,20001:220,20002:160,20003:310,20004:180,20005:210,20006:390,20007:180,20008:220,20009:230,20010:250,20011:390,20012:300,20013:220,20014:210,20015:270,20016:270,20017:410,20018:190,20019:230,20020:250,21e3:150,21001:290,21002:160,21003:195,21004:150,21005:250,21006:170,21007:240,21008:140,21009:140,21010:160,21011:115,21012:160,21013:200,21014:140,21015:125,21016:180,21017:140,21018:210,21019:180,21020:230,21021:180,21022:300,21023:240,21024:140,21025:125,21026:160,21027:200,21028:250,21029:160,21030:305,21031:190,21032:245,21033:140,21034:220,21035:300,21036:220,21037:210,21038:130,21039:220,21040:150,21041:160,21042:200,21043:220,21044:150,21045:160,21046:145,21047:145,21048:250,22e3:275,22001:220,22002:160,22003:185,23e3:140,23001:150,23002:160,23003:250,23004:140,23005:150,23006:200,23007:210,23008:160,23009:130,23010:180,23011:180,23012:300,23013:180,23014:120,23015:190,23016:130,23017:190,23018:170,23019:270,23020:220,23021:150,23022:190,23023:140,23024:80,23025:125,23026:180,23027:140,23028:150,23029:140,23031:145,23032:180,23033:175,23034:175,23035:175,24e3:170,24001:270,24002:170,24003:250,24004:270,23037:150,23036:180,21052:200,21051:180,21050:260,20022:305,20021:320,23038:210,23039:165,24005:300}}function H5(){return{1001:{x:985,y:1075,z:1.05},1002:{x:1024,y:1e3,z:1},1003:{x:1015,y:1215,z:1.05},1004:{x:885,y:950,z:1},1005:{x:1e3,y:950,z:1.1},1006:{x:1050,y:950,z:1},1008:{x:1240,y:1e3,z:1},1009:{x:1024,y:975,z:1},1013:{x:970,y:910,z:1.1},1101:{x:950,y:1200,z:1.1},1102:{x:820,y:1075,z:1.1},1103:{x:1060,y:1030,z:1.3},1104:{x:1150,y:1110,z:1},1105:{x:1040,y:1024,z:1},1106:{x:780,y:1100,z:1},1107:{x:880,y:900,z:1.15},1108:{x:1e3,y:950,z:1},1109:{x:975,y:1025,z:1.1},1110:{x:1180,y:1050,z:1.05},1111:{x:930,y:1e3,z:1},1112:{x:1120,y:875,z:1},1201:{x:1e3,y:1024,z:1},1202:{x:1024,y:950,z:1},1203:{x:1024,y:975,z:1.05},1204:{x:1024,y:1024,z:1.1},1205:{x:990,y:800,z:1},1206:{x:1075,y:1015,z:1.2},1207:{x:900,y:1055,z:1.1},1208:{x:920,y:950,z:1},1209:{x:1e3,y:1e3,z:1},1210:{x:1e3,y:1024,z:1},1211:{x:1050,y:950,z:1.05},1212:{x:1024,y:930,z:1},1213:{x:1050,y:1e3,z:1.05},1214:{x:1e3,y:900,z:1},1215:{x:1e3,y:1024,z:1.1},1217:{x:950,y:975,z:1.075},1218:{x:950,y:900,z:1.1},1220:{x:1024,y:1050,z:1},1221:{x:1024,y:1075,z:1.1},1222:{x:1110,y:1e3,z:1.1},1223:{x:960,y:1024,z:1.05},1224:{x:825,y:950,z:1.1},1301:{x:1200,y:975,z:1},1302:{x:680,y:1e3,z:1.15},1303:{x:1060,y:1050,z:1},1304:{x:1150,y:1e3,z:1.05},1305:{x:965,y:840,z:1.15},1306:{x:1050,y:1050,z:1},1307:{x:950,y:925,z:1.25},1308:{x:1e3,y:900,z:1},1309:{x:1024,y:925,z:1},1310:{x:930,y:1075,z:1.25},1312:{x:1050,y:1075,z:1},1314:{x:1024,y:850,z:1.15},1315:{x:1e3,y:1100,z:1},1317:{x:1125,y:1175,z:1},8001:{x:1024,y:1100,z:1},8002:{x:1024,y:1024,z:1},8003:{x:980,y:1024,z:1.05},8004:{x:1050,y:1024,z:1.05},8005:{x:1040,y:1e3,z:1.1},8006:{x:1040,y:1e3,z:1.1},8007:{x:955,y:975,z:.95},8008:{x:955,y:975,z:.95},1225:{x:875,y:1125,z:1.15},1313:{x:1e3,y:950,z:1.075},1401:{x:1e3,y:1085,z:1.275},1402:{x:1200,y:750,z:1.1},1403:{x:875,y:1e3,z:1.075},1404:{x:925,y:1050,z:1.05},1405:{x:1235,y:1025,z:.9},1407:{x:875,y:950,z:1}}}function w5(){return{1001:{stats:{[a.ATK]:0,[a.ATK_P]:0,[a.DEF]:1,[a.DEF_P]:1,[a.HP]:.5,[a.HP_P]:.5,[a.SPD]:1,[a.CR]:0,[a.CD]:0,[a.EHR]:1,[a.RES]:.75,[a.BE]:0,[a.ERR]:1,[a.OHB]:0,[a.Physical_DMG]:0,[a.Fire_DMG]:0,[a.Ice_DMG]:0,[a.Lightning_DMG]:0,[a.Wind_DMG]:0,[a.Quantum_DMG]:0,[a.Imaginary_DMG]:0},parts:{[b.Body]:[a.DEF_P,a.EHR],[b.Feet]:[a.DEF_P,a.SPD],[b.PlanarSphere]:[a.DEF_P],[b.LinkRope]:[a.DEF_P,a.ERR]},presets:[oe.VALOROUS_SET],sortOption:T.SHIELD,addedColumns:[T.SHIELD],hiddenColumns:[T.SKILL,T.DOT]},1002:{stats:{[a.ATK]:.75,[a.ATK_P]:.75,[a.DEF]:0,[a.DEF_P]:0,[a.HP]:0,[a.HP_P]:0,[a.SPD]:1,[a.CR]:1,[a.CD]:1,[a.EHR]:0,[a.RES]:0,[a.BE]:0,[a.ERR]:0,[a.OHB]:0,[a.Physical_DMG]:0,[a.Fire_DMG]:0,[a.Ice_DMG]:0,[a.Lightning_DMG]:0,[a.Wind_DMG]:1,[a.Quantum_DMG]:0,[a.Imaginary_DMG]:0},parts:{[b.Body]:[a.CR,a.CD],[b.Feet]:[a.ATK_P,a.SPD],[b.PlanarSphere]:[a.ATK_P,a.Wind_DMG],[b.LinkRope]:[a.ATK_P]},presets:[oe.fnPioneerSet(4)],sortOption:T.ULT,hiddenColumns:[T.FUA,T.DOT],simulation:{parts:{[b.Body]:[a.CR,a.CD],[b.Feet]:[a.ATK_P,a.SPD],[b.PlanarSphere]:[a.ATK_P,a.Wind_DMG],[b.LinkRope]:[a.ATK_P]},substats:[a.CD,a.CR,a.ATK_P,a.ATK],comboAbilities:[Ie,Te,ne,ne,ne],comboDot:0,comboBreak:0,relicSets:[[R.ScholarLostInErudition,R.ScholarLostInErudition],[R.PioneerDiverOfDeadWaters,R.PioneerDiverOfDeadWaters],...Be],ornamentSets:[R.RutilantArena,...we],teammates:[{characterId:"1101",lightCone:"23003",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1303",lightCone:"23019",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1217",lightCone:"23017",characterEidolon:0,lightConeSuperimposition:1}]}},1003:{stats:{[a.ATK]:.75,[a.ATK_P]:.75,[a.DEF]:0,[a.DEF_P]:0,[a.HP]:0,[a.HP_P]:0,[a.SPD]:1,[a.CR]:1,[a.CD]:1,[a.EHR]:0,[a.RES]:0,[a.BE]:.5,[a.ERR]:0,[a.OHB]:0,[a.Physical_DMG]:0,[a.Fire_DMG]:1,[a.Ice_DMG]:0,[a.Lightning_DMG]:0,[a.Wind_DMG]:0,[a.Quantum_DMG]:0,[a.Imaginary_DMG]:0},parts:{[b.Body]:[a.CD,a.CR],[b.Feet]:[a.ATK_P,a.SPD],[b.PlanarSphere]:[a.ATK_P,a.Fire_DMG],[b.LinkRope]:[a.ATK_P]},presets:[oe.fnAshblazingSet(8),oe.fnPioneerSet(4),oe.VALOROUS_SET],sortOption:T.FUA,hiddenColumns:[],simulation:{parts:{[b.Body]:[a.CR,a.CD],[b.Feet]:[a.ATK_P,a.SPD],[b.PlanarSphere]:[a.ATK_P,a.Fire_DMG],[b.LinkRope]:[a.ATK_P]},substats:[a.CD,a.CR,a.ATK_P,a.ATK],comboAbilities:[Ie,Te,ve,ne,ve,ne,ve],comboDot:0,comboBreak:0,relicSets:[[R.TheAshblazingGrandDuke,R.TheAshblazingGrandDuke],...Be],ornamentSets:[R.DuranDynastyOfRunningWolves,...Vt,...we],teammates:[{characterId:"1112",lightCone:"23016",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1303",lightCone:"23019",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1304",lightCone:"23023",characterEidolon:0,lightConeSuperimposition:1}]}},1004:{stats:{[a.ATK]:.75,[a.ATK_P]:.75,[a.DEF]:0,[a.DEF_P]:0,[a.HP]:0,[a.HP_P]:0,[a.SPD]:1,[a.CR]:1,[a.CD]:1,[a.EHR]:1,[a.RES]:0,[a.BE]:0,[a.ERR]:1,[a.OHB]:0,[a.Physical_DMG]:0,[a.Fire_DMG]:0,[a.Ice_DMG]:0,[a.Lightning_DMG]:0,[a.Wind_DMG]:0,[a.Quantum_DMG]:0,[a.Imaginary_DMG]:1},parts:{[b.Body]:[a.CD,a.CR,a.EHR],[b.Feet]:[a.ATK_P,a.SPD],[b.PlanarSphere]:[a.ATK_P,a.Imaginary_DMG],[b.LinkRope]:[a.ATK_P,a.ERR]},presets:[oe.WASTELANDER_SET,oe.fnPioneerSet(4)],sortOption:T.SKILL,hiddenColumns:[T.FUA,T.DOT],simulation:{parts:{[b.Body]:[a.CR,a.CD],[b.Feet]:[a.ATK_P,a.SPD],[b.PlanarSphere]:[a.ATK_P,a.Imaginary_DMG],[b.LinkRope]:[a.ATK_P]},substats:[a.CD,a.CR,a.ATK_P,a.ATK],comboAbilities:[Ie,Te,ne,ne,ne],comboDot:0,comboBreak:0,errRopeEidolon:0,relicSets:[[R.PioneerDiverOfDeadWaters,R.PioneerDiverOfDeadWaters],[R.ScholarLostInErudition,R.ScholarLostInErudition],...Be],ornamentSets:[R.RutilantArena,R.FirmamentFrontlineGlamoth,R.IzumoGenseiAndTakamaDivineRealm,...we],teammates:[{characterId:"1308",lightCone:"23024",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1106",lightCone:"21015",characterEidolon:6,lightConeSuperimposition:5},{characterId:"1217",lightCone:"23017",characterEidolon:0,lightConeSuperimposition:1}]}},1005:{stats:{[a.ATK]:1,[a.ATK_P]:1,[a.DEF]:0,[a.DEF_P]:0,[a.HP]:0,[a.HP_P]:0,[a.SPD]:1,[a.CR]:0,[a.CD]:0,[a.EHR]:.5,[a.RES]:0,[a.BE]:0,[a.ERR]:0,[a.OHB]:0,[a.Physical_DMG]:0,[a.Fire_DMG]:0,[a.Ice_DMG]:0,[a.Lightning_DMG]:1,[a.Wind_DMG]:0,[a.Quantum_DMG]:0,[a.Imaginary_DMG]:0},parts:{[b.Body]:[a.ATK_P],[b.Feet]:[a.SPD,a.ATK_P],[b.PlanarSphere]:[a.ATK_P,a.Lightning_DMG],[b.LinkRope]:[a.ATK_P]},presets:[oe.PRISONER_SET,oe.fnAshblazingSet(6),oe.VALOROUS_SET],sortOption:T.DOT,hiddenColumns:[],simulation:{parts:{[b.Body]:[a.ATK_P],[b.Feet]:[a.ATK_P,a.SPD],[b.PlanarSphere]:[a.ATK_P,a.Lightning_DMG],[b.LinkRope]:[a.ATK_P]},substats:[a.ATK_P,a.ATK,a.EHR,a.CR,a.CD],breakpoints:{[a.EHR]:.282},comboAbilities:[Ie,Te,ne,ve,ne,ve],comboDot:16,comboBreak:0,relicSets:[[R.PrisonerInDeepConfinement,R.PrisonerInDeepConfinement],...Be],ornamentSets:[R.FirmamentFrontlineGlamoth],teammates:[{characterId:"1307",lightCone:"23022",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1303",lightCone:"23019",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1217",lightCone:"23017",characterEidolon:0,lightConeSuperimposition:1}]}},1006:{stats:{[a.ATK]:0,[a.ATK_P]:0,[a.DEF]:.5,[a.DEF_P]:.5,[a.HP]:.5,[a.HP_P]:.5,[a.SPD]:1,[a.CR]:0,[a.CD]:0,[a.EHR]:1,[a.RES]:.5,[a.BE]:0,[a.ERR]:1,[a.OHB]:0,[a.Physical_DMG]:0,[a.Fire_DMG]:0,[a.Ice_DMG]:0,[a.Lightning_DMG]:0,[a.Wind_DMG]:0,[a.Quantum_DMG]:1,[a.Imaginary_DMG]:0},parts:{[b.Body]:[a.CD,a.CR,a.EHR],[b.Feet]:[a.SPD],[b.PlanarSphere]:[a.Quantum_DMG,a.ATK_P,a.HP_P,a.DEF_P],[b.LinkRope]:[a.ERR,a.ATK_P,a.BE]},presets:[oe.fnPioneerSet(4)],sortOption:T.ULT,hiddenColumns:[T.FUA,T.DOT]},1008:{stats:{[a.ATK]:.75,[a.ATK_P]:.75,[a.DEF]:0,[a.DEF_P]:0,[a.HP]:0,[a.HP_P]:0,[a.SPD]:1,[a.CR]:1,[a.CD]:1,[a.EHR]:0,[a.RES]:0,[a.BE]:0,[a.ERR]:0,[a.OHB]:0,[a.Physical_DMG]:0,[a.Fire_DMG]:0,[a.Ice_DMG]:0,[a.Lightning_DMG]:1,[a.Wind_DMG]:0,[a.Quantum_DMG]:0,[a.Imaginary_DMG]:0},parts:{[b.Body]:[a.CR,a.CD],[b.Feet]:[a.ATK_P,a.SPD],[b.PlanarSphere]:[a.ATK_P,a.Lightning_DMG],[b.LinkRope]:[a.ATK_P]},presets:[],sortOption:T.SKILL,hiddenColumns:[T.FUA,T.DOT],simulation:{parts:{[b.Body]:[a.CR,a.CD],[b.Feet]:[a.ATK_P,a.SPD],[b.PlanarSphere]:[a.ATK_P,a.Lightning_DMG],[b.LinkRope]:[a.ATK_P]},substats:[a.CD,a.CR,a.ATK_P,a.ATK],comboAbilities:[Ie,Te,ne,ne,ne],comboDot:0,comboBreak:0,relicSets:[[R.ScholarLostInErudition,R.ScholarLostInErudition],...Be],ornamentSets:[R.RutilantArena,...we],teammates:[{characterId:"1101",lightCone:"23003",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1303",lightCone:"23019",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1217",lightCone:"23017",characterEidolon:0,lightConeSuperimposition:1}]}},1009:{stats:{[a.ATK]:.5,[a.ATK_P]:.5,[a.DEF]:.5,[a.DEF_P]:.5,[a.HP]:.75,[a.HP_P]:.75,[a.SPD]:1,[a.CR]:0,[a.CD]:0,[a.EHR]:0,[a.RES]:.5,[a.BE]:.5,[a.ERR]:1,[a.OHB]:0,[a.Physical_DMG]:0,[a.Fire_DMG]:1,[a.Ice_DMG]:0,[a.Lightning_DMG]:0,[a.Wind_DMG]:0,[a.Quantum_DMG]:0,[a.Imaginary_DMG]:0},parts:{[b.Body]:[],[b.Feet]:[a.SPD],[b.PlanarSphere]:[],[b.LinkRope]:[a.ATK_P,a.ERR]},presets:[],sortOption:T.SPD,hiddenColumns:[T.ULT,T.FUA]},1013:{stats:{[a.ATK]:.75,[a.ATK_P]:.75,[a.DEF]:0,[a.DEF_P]:0,[a.HP]:0,[a.HP_P]:0,[a.SPD]:1,[a.CR]:1,[a.CD]:1,[a.EHR]:0,[a.RES]:0,[a.BE]:0,[a.ERR]:0,[a.OHB]:0,[a.Physical_DMG]:0,[a.Fire_DMG]:0,[a.Ice_DMG]:1,[a.Lightning_DMG]:0,[a.Wind_DMG]:0,[a.Quantum_DMG]:0,[a.Imaginary_DMG]:0},parts:{[b.Body]:[a.CR,a.CD],[b.Feet]:[a.ATK_P,a.SPD],[b.PlanarSphere]:[a.ATK_P,a.Ice_DMG],[b.LinkRope]:[a.ATK_P]},presets:[oe.fnAshblazingSet(8),oe.VALOROUS_SET],sortOption:T.FUA,hiddenColumns:[T.DOT],simulation:{parts:{[b.Body]:[a.CR,a.CD],[b.Feet]:[a.ATK_P,a.SPD],[b.PlanarSphere]:[a.ATK_P,a.Ice_DMG],[b.LinkRope]:[a.ATK_P]},substats:[a.CD,a.CR,a.ATK_P,a.ATK],comboAbilities:[Ie,Te,ve,ne,ve,ne,ve],comboDot:0,comboBreak:0,relicSets:[[R.TheAshblazingGrandDuke,R.TheAshblazingGrandDuke],[R.ScholarLostInErudition,R.ScholarLostInErudition],[R.HunterOfGlacialForest,R.HunterOfGlacialForest],...Be],ornamentSets:[R.DuranDynastyOfRunningWolves,...Vt,...we],teammates:[{characterId:"1003",lightCone:"23000",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1303",lightCone:"23019",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1217",lightCone:"23017",characterEidolon:0,lightConeSuperimposition:1}]}},1101:{stats:{[a.ATK]:0,[a.ATK_P]:0,[a.DEF]:.5,[a.DEF_P]:.5,[a.HP]:.5,[a.HP_P]:.5,[a.SPD]:1,[a.CR]:0,[a.CD]:1,[a.EHR]:0,[a.RES]:.75,[a.BE]:0,[a.ERR]:1,[a.OHB]:0,[a.Physical_DMG]:0,[a.Fire_DMG]:0,[a.Ice_DMG]:0,[a.Lightning_DMG]:0,[a.Wind_DMG]:1,[a.Quantum_DMG]:0,[a.Imaginary_DMG]:0},parts:{[b.Body]:[a.CD],[b.Feet]:[a.SPD],[b.PlanarSphere]:[],[b.LinkRope]:[a.ERR]},presets:[],sortOption:T.CD,hiddenColumns:[T.SKILL,T.ULT,T.DOT]},1102:{stats:{[a.ATK]:.75,[a.ATK_P]:.75,[a.DEF]:0,[a.DEF_P]:0,[a.HP]:0,[a.HP_P]:0,[a.SPD]:1,[a.CR]:1,[a.CD]:1,[a.EHR]:0,[a.RES]:0,[a.BE]:0,[a.ERR]:0,[a.OHB]:0,[a.Physical_DMG]:0,[a.Fire_DMG]:0,[a.Ice_DMG]:0,[a.Lightning_DMG]:0,[a.Wind_DMG]:0,[a.Quantum_DMG]:1,[a.Imaginary_DMG]:0},parts:{[b.Body]:[a.CR,a.CD],[b.Feet]:[a.ATK_P,a.SPD],[b.PlanarSphere]:[a.ATK_P,a.Quantum_DMG],[b.LinkRope]:[a.ATK_P]},presets:[],sortOption:T.SKILL,hiddenColumns:[T.FUA,T.DOT],simulation:{parts:{[b.Body]:[a.CR,a.CD],[b.Feet]:[a.ATK_P,a.SPD],[b.PlanarSphere]:[a.ATK_P,a.Quantum_DMG],[b.LinkRope]:[a.ATK_P]},substats:[a.CD,a.CR,a.ATK_P,a.ATK],comboAbilities:[Ie,Te,ne,ne,ne],comboDot:0,comboBreak:0,relicSets:[[R.GeniusOfBrilliantStars,R.GeniusOfBrilliantStars],[R.ScholarLostInErudition,R.ScholarLostInErudition],...Be],ornamentSets:[R.RutilantArena,R.FirmamentFrontlineGlamoth,...we],teammates:[{characterId:"1006",lightCone:"23007",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1306",lightCone:"23003",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1217",lightCone:"23017",characterEidolon:0,lightConeSuperimposition:1}]}},1103:{stats:{[a.ATK]:.75,[a.ATK_P]:.75,[a.DEF]:0,[a.DEF_P]:0,[a.HP]:0,[a.HP_P]:0,[a.SPD]:1,[a.CR]:1,[a.CD]:1,[a.EHR]:0,[a.RES]:0,[a.BE]:0,[a.ERR]:0,[a.OHB]:0,[a.Physical_DMG]:0,[a.Fire_DMG]:0,[a.Ice_DMG]:0,[a.Lightning_DMG]:1,[a.Wind_DMG]:0,[a.Quantum_DMG]:0,[a.Imaginary_DMG]:0},parts:{[b.Body]:[a.CD,a.CR],[b.Feet]:[a.SPD,a.ATK_P],[b.PlanarSphere]:[a.ATK_P,a.Lightning_DMG],[b.LinkRope]:[a.ATK_P,a.ERR]},presets:[oe.fnPioneerSet(4)],sortOption:T.ULT,hiddenColumns:[T.FUA],simulation:{parts:{[b.Body]:[a.CR,a.CD],[b.Feet]:[a.ATK_P,a.SPD],[b.PlanarSphere]:[a.ATK_P,a.Lightning_DMG],[b.LinkRope]:[a.ATK_P]},substats:[a.CD,a.CR,a.ATK_P,a.ATK],comboAbilities:[Ie,Te,ne,ne,ne],comboDot:0,comboBreak:0,errRopeEidolon:0,deprioritizeBuffs:!0,relicSets:[[R.PioneerDiverOfDeadWaters,R.PioneerDiverOfDeadWaters],[R.ScholarLostInErudition,R.ScholarLostInErudition],[R.BandOfSizzlingThunder,R.BandOfSizzlingThunder],[R.EagleOfTwilightLine,R.EagleOfTwilightLine],...Be],ornamentSets:[R.FirmamentFrontlineGlamoth,R.RutilantArena,R.SprightlyVonwacq,...V0,...we],teammates:[{characterId:"1005",lightCone:"23006",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1303",lightCone:"23019",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1217",lightCone:"23017",characterEidolon:0,lightConeSuperimposition:1}]}},1104:{stats:{[a.ATK]:0,[a.ATK_P]:0,[a.DEF]:1,[a.DEF_P]:1,[a.HP]:.5,[a.HP_P]:.5,[a.SPD]:1,[a.CR]:0,[a.CD]:0,[a.EHR]:.75,[a.RES]:.75,[a.BE]:0,[a.ERR]:1,[a.OHB]:0,[a.Physical_DMG]:0,[a.Fire_DMG]:0,[a.Ice_DMG]:0,[a.Lightning_DMG]:0,[a.Wind_DMG]:0,[a.Quantum_DMG]:0,[a.Imaginary_DMG]:0},parts:{[b.Body]:[a.DEF_P],[b.Feet]:[a.DEF_P,a.SPD],[b.PlanarSphere]:[a.DEF_P],[b.LinkRope]:[a.DEF_P,a.ERR]},presets:[],sortOption:T.SHIELD,addedColumns:[T.SHIELD],hiddenColumns:[T.ULT,T.FUA,T.DOT]},1105:{stats:{[a.ATK]:0,[a.ATK_P]:0,[a.DEF]:.75,[a.DEF_P]:.75,[a.HP]:1,[a.HP_P]:1,[a.SPD]:1,[a.CR]:0,[a.CD]:0,[a.EHR]:0,[a.RES]:.75,[a.BE]:0,[a.ERR]:1,[a.OHB]:1,[a.Physical_DMG]:0,[a.Fire_DMG]:0,[a.Ice_DMG]:0,[a.Lightning_DMG]:0,[a.Wind_DMG]:0,[a.Quantum_DMG]:0,[a.Imaginary_DMG]:0},parts:{[b.Body]:[a.HP_P,a.OHB],[b.Feet]:[a.HP_P,a.SPD],[b.PlanarSphere]:[a.HP_P],[b.LinkRope]:[a.HP_P,a.ERR]},presets:[],sortOption:T.HEAL,addedColumns:[T.OHB,T.HEAL],hiddenColumns:[T.SKILL,T.ULT,T.FUA,T.DOT]},1106:{stats:{[a.ATK]:0,[a.ATK_P]:0,[a.DEF]:.75,[a.DEF_P]:.75,[a.HP]:.75,[a.HP_P]:.75,[a.SPD]:1,[a.CR]:0,[a.CD]:0,[a.EHR]:1,[a.RES]:.5,[a.BE]:0,[a.ERR]:1,[a.OHB]:0,[a.Physical_DMG]:0,[a.Fire_DMG]:0,[a.Ice_DMG]:1,[a.Lightning_DMG]:0,[a.Wind_DMG]:0,[a.Quantum_DMG]:0,[a.Imaginary_DMG]:0},parts:{[b.Body]:[a.EHR,a.HP_P,a.DEF_P],[b.Feet]:[a.SPD],[b.PlanarSphere]:[a.HP_P,a.DEF_P,a.Ice_DMG],[b.LinkRope]:[a.ERR]},presets:[oe.fnPioneerSet(4)],sortOption:T.SPD,hiddenColumns:[T.FUA,T.DOT]},1107:{stats:{[a.ATK]:.75,[a.ATK_P]:.75,[a.DEF]:0,[a.DEF_P]:0,[a.HP]:0,[a.HP_P]:0,[a.SPD]:1,[a.CR]:1,[a.CD]:1,[a.EHR]:0,[a.RES]:0,[a.BE]:0,[a.ERR]:0,[a.OHB]:0,[a.Physical_DMG]:1,[a.Fire_DMG]:0,[a.Ice_DMG]:0,[a.Lightning_DMG]:0,[a.Wind_DMG]:0,[a.Quantum_DMG]:0,[a.Imaginary_DMG]:0},parts:{[b.Body]:[a.CR,a.CD],[b.Feet]:[a.ATK_P,a.SPD],[b.PlanarSphere]:[a.ATK_P,a.Physical_DMG],[b.LinkRope]:[a.ATK_P]},presets:[oe.fnAshblazingSet(2),oe.fnSacerdosSet(1)],sortOption:T.FUA,hiddenColumns:[T.ULT,T.DOT],simulation:{parts:{[b.Body]:[a.CR,a.CD],[b.Feet]:[a.ATK_P,a.SPD],[b.PlanarSphere]:[a.ATK_P,a.Physical_DMG],[b.LinkRope]:[a.ATK_P]},substats:[a.CD,a.CR,a.ATK_P,a.ATK],comboAbilities:[Ie,Te,ne,ve,ve,ve],comboDot:0,comboBreak:0,relicSets:[[R.ChampionOfStreetwiseBoxing,R.ChampionOfStreetwiseBoxing],...Be],ornamentSets:[R.DuranDynastyOfRunningWolves,...Vt,...we],teammates:[{characterId:"1112",lightCone:"23016",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1303",lightCone:"23019",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1304",lightCone:"21016",characterEidolon:0,lightConeSuperimposition:5}]}},1108:{stats:{[a.ATK]:1,[a.ATK_P]:1,[a.DEF]:0,[a.DEF_P]:0,[a.HP]:0,[a.HP_P]:0,[a.SPD]:1,[a.CR]:0,[a.CD]:0,[a.EHR]:1,[a.RES]:0,[a.BE]:1,[a.ERR]:1,[a.OHB]:0,[a.Physical_DMG]:0,[a.Fire_DMG]:0,[a.Ice_DMG]:0,[a.Lightning_DMG]:0,[a.Wind_DMG]:1,[a.Quantum_DMG]:0,[a.Imaginary_DMG]:0},parts:{[b.Body]:[a.ATK_P,a.EHR],[b.Feet]:[a.SPD,a.ATK_P],[b.PlanarSphere]:[a.ATK_P,a.Wind_DMG],[b.LinkRope]:[a.ERR,a.ATK_P,a.BE]},presets:[oe.PRISONER_SET],sortOption:T.DOT,hiddenColumns:[T.FUA],simulation:{parts:{[b.Body]:[a.ATK_P],[b.Feet]:[a.ATK_P,a.SPD],[b.PlanarSphere]:[a.ATK_P,a.Wind_DMG],[b.LinkRope]:[a.ATK_P]},substats:[a.ATK_P,a.EHR,a.ATK,a.CR,a.CD],comboAbilities:[Ie,Te,ne,ne,ne],comboDot:60,comboBreak:0,relicSets:[[R.PrisonerInDeepConfinement,R.PrisonerInDeepConfinement],...Be],ornamentSets:[R.FirmamentFrontlineGlamoth],teammates:[{characterId:"1005",lightCone:"23006",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1303",lightCone:"23019",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1217",lightCone:"23017",characterEidolon:0,lightConeSuperimposition:1}]}},1109:{stats:{[a.ATK]:.75,[a.ATK_P]:.75,[a.DEF]:0,[a.DEF_P]:0,[a.HP]:0,[a.HP_P]:0,[a.SPD]:1,[a.CR]:1,[a.CD]:1,[a.EHR]:0,[a.RES]:0,[a.BE]:0,[a.ERR]:0,[a.OHB]:0,[a.Physical_DMG]:0,[a.Fire_DMG]:1,[a.Ice_DMG]:0,[a.Lightning_DMG]:0,[a.Wind_DMG]:0,[a.Quantum_DMG]:0,[a.Imaginary_DMG]:0},parts:{[b.Body]:[a.CR,a.CD],[b.Feet]:[a.ATK_P,a.SPD],[b.PlanarSphere]:[a.ATK_P,a.Fire_DMG],[b.LinkRope]:[a.ATK_P]},presets:[oe.fnPioneerSet(4)],sortOption:T.SKILL,hiddenColumns:[T.FUA],simulation:{parts:{[b.Body]:[a.CR,a.CD],[b.Feet]:[a.ATK_P,a.SPD],[b.PlanarSphere]:[a.ATK_P,a.Fire_DMG],[b.LinkRope]:[a.ATK_P]},substats:[a.CD,a.CR,a.ATK_P,a.ATK],comboAbilities:[Ie,Te,ne,ne,ne],comboDot:0,comboBreak:0,relicSets:[[R.PioneerDiverOfDeadWaters,R.PioneerDiverOfDeadWaters],[R.ScholarLostInErudition,R.ScholarLostInErudition],...Be],ornamentSets:[R.RutilantArena,R.FirmamentFrontlineGlamoth,...we],teammates:[{characterId:"1101",lightCone:"23003",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1303",lightCone:"23019",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1217",lightCone:"23017",characterEidolon:0,lightConeSuperimposition:1}]}},1110:{stats:{[a.ATK]:0,[a.ATK_P]:0,[a.DEF]:.75,[a.DEF_P]:.75,[a.HP]:1,[a.HP_P]:1,[a.SPD]:1,[a.CR]:0,[a.CD]:0,[a.EHR]:0,[a.RES]:.75,[a.BE]:0,[a.ERR]:1,[a.OHB]:1,[a.Physical_DMG]:0,[a.Fire_DMG]:0,[a.Ice_DMG]:0,[a.Lightning_DMG]:0,[a.Wind_DMG]:0,[a.Quantum_DMG]:0,[a.Imaginary_DMG]:0},parts:{[b.Body]:[a.HP_P,a.OHB],[b.Feet]:[a.HP_P,a.SPD],[b.PlanarSphere]:[a.HP_P],[b.LinkRope]:[a.HP_P,a.ERR]},presets:[],sortOption:T.HEAL,addedColumns:[T.OHB,T.HEAL],hiddenColumns:[T.SKILL,T.ULT,T.FUA,T.DOT]},1111:{stats:{[a.ATK]:1,[a.ATK_P]:1,[a.DEF]:0,[a.DEF_P]:0,[a.HP]:0,[a.HP_P]:0,[a.SPD]:1,[a.CR]:0,[a.CD]:0,[a.EHR]:1,[a.RES]:0,[a.BE]:.75,[a.ERR]:0,[a.OHB]:0,[a.Physical_DMG]:1,[a.Fire_DMG]:0,[a.Ice_DMG]:0,[a.Lightning_DMG]:0,[a.Wind_DMG]:0,[a.Quantum_DMG]:0,[a.Imaginary_DMG]:0},parts:{[b.Body]:[a.ATK_P,a.EHR],[b.Feet]:[a.SPD,a.ATK_P],[b.PlanarSphere]:[a.ATK_P,a.Physical_DMG],[b.LinkRope]:[a.ATK_P,a.BE]},presets:[oe.PRISONER_SET],sortOption:T.DOT,hiddenColumns:[T.FUA],simulation:{parts:{[b.Body]:[a.ATK_P],[b.Feet]:[a.ATK_P,a.SPD],[b.PlanarSphere]:[a.ATK_P,a.Physical_DMG],[b.LinkRope]:[a.ATK_P,a.BE]},substats:[a.BE,a.ATK_P,a.ATK,a.EHR,a.CR],comboAbilities:[Ie,Te,ne,Qe,Qe],comboDot:5,comboBreak:1,relicSets:[[R.PrisonerInDeepConfinement,R.PrisonerInDeepConfinement],...Be,Ir],ornamentSets:[R.TaliaKingdomOfBanditry,R.FirmamentFrontlineGlamoth],teammates:[{characterId:"1005",lightCone:"23006",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1303",lightCone:"23019",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1217",lightCone:"23017",characterEidolon:0,lightConeSuperimposition:1}]}},1112:{stats:{[a.ATK]:.75,[a.ATK_P]:.75,[a.DEF]:0,[a.DEF_P]:0,[a.HP]:0,[a.HP_P]:0,[a.SPD]:1,[a.CR]:1,[a.CD]:1,[a.EHR]:0,[a.RES]:0,[a.BE]:0,[a.ERR]:0,[a.OHB]:0,[a.Physical_DMG]:0,[a.Fire_DMG]:1,[a.Ice_DMG]:0,[a.Lightning_DMG]:0,[a.Wind_DMG]:0,[a.Quantum_DMG]:0,[a.Imaginary_DMG]:0},parts:{[b.Body]:[a.CR,a.CD],[b.Feet]:[a.ATK_P,a.SPD],[b.PlanarSphere]:[a.Fire_DMG,a.ATK_P],[b.LinkRope]:[a.ATK_P]},presets:[oe.fnAshblazingSet(0),oe.BANANA_SET,oe.fnPioneerSet(4),oe.fnSacerdosSet(1)],sortOption:T.FUA,hiddenColumns:[T.ULT,T.DOT],simulation:{parts:{[b.Body]:[a.CR,a.CD],[b.Feet]:[a.ATK_P,a.SPD],[b.PlanarSphere]:[a.ATK_P,a.Fire_DMG],[b.LinkRope]:[a.ATK_P]},substats:[a.CD,a.CR,a.ATK_P,a.ATK],errRopeEidolon:6,comboAbilities:[Ie,Te,ne,ve,ve],comboDot:0,comboBreak:0,deprioritizeBuffs:!0,relicSets:[[R.TheAshblazingGrandDuke,R.TheAshblazingGrandDuke],...Be],ornamentSets:[R.DuranDynastyOfRunningWolves,R.TheWondrousBananAmusementPark,...Vt,...we],teammates:[{characterId:"1305",lightCone:"23020",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1309",lightCone:"23026",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1304",lightCone:"23023",characterEidolon:0,lightConeSuperimposition:1}]}},1201:{stats:{[a.ATK]:.75,[a.ATK_P]:.75,[a.DEF]:0,[a.DEF_P]:0,[a.HP]:0,[a.HP_P]:0,[a.SPD]:1,[a.CR]:1,[a.CD]:1,[a.EHR]:0,[a.RES]:0,[a.BE]:0,[a.ERR]:0,[a.OHB]:0,[a.Physical_DMG]:0,[a.Fire_DMG]:0,[a.Ice_DMG]:0,[a.Lightning_DMG]:0,[a.Wind_DMG]:0,[a.Quantum_DMG]:1,[a.Imaginary_DMG]:0},parts:{[b.Body]:[a.CR,a.CD],[b.Feet]:[a.ATK_P,a.SPD],[b.PlanarSphere]:[a.ATK_P,a.Quantum_DMG],[b.LinkRope]:[a.ATK_P]},presets:[oe.VALOROUS_SET,oe.fnSacerdosSet(2)],sortOption:T.BASIC,hiddenColumns:[T.SKILL,T.DOT],simulation:{parts:{[b.Body]:[a.CR,a.CD],[b.Feet]:[a.ATK_P,a.SPD],[b.PlanarSphere]:[a.ATK_P,a.Quantum_DMG],[b.LinkRope]:[a.ATK_P]},substats:[a.CD,a.CR,a.ATK_P,a.ATK],comboAbilities:[Ie,Te,Qe,ve,Qe,ve],comboDot:0,comboBreak:0,relicSets:[[R.GeniusOfBrilliantStars,R.GeniusOfBrilliantStars],[R.PoetOfMourningCollapse,R.PoetOfMourningCollapse],[R.SacerdosRelivedOrdeal,R.SacerdosRelivedOrdeal],...Be],ornamentSets:[R.RutilantArena,...Vt,...we],teammates:[{characterId:"1006",lightCone:"23007",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1306",lightCone:"23003",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1217",lightCone:"23017",characterEidolon:0,lightConeSuperimposition:1}]}},1202:{stats:{[a.ATK]:.75,[a.ATK_P]:.75,[a.DEF]:.75,[a.DEF_P]:.75,[a.HP]:.75,[a.HP_P]:.75,[a.SPD]:1,[a.CR]:0,[a.CD]:0,[a.EHR]:0,[a.RES]:.5,[a.BE]:0,[a.ERR]:1,[a.OHB]:0,[a.Physical_DMG]:0,[a.Fire_DMG]:0,[a.Ice_DMG]:0,[a.Lightning_DMG]:0,[a.Wind_DMG]:0,[a.Quantum_DMG]:0,[a.Imaginary_DMG]:0},parts:{[b.Body]:[a.ATK_P,a.HP_P,a.DEF_P],[b.Feet]:[a.SPD],[b.PlanarSphere]:[a.HP_P,a.DEF_P,a.ATK_P],[b.LinkRope]:[a.ERR]},presets:[],sortOption:T.SPD,hiddenColumns:[T.ULT,T.FUA,T.DOT]},1203:{stats:{[a.ATK]:1,[a.ATK_P]:1,[a.DEF]:.75,[a.DEF_P]:.75,[a.HP]:.75,[a.HP_P]:.75,[a.SPD]:1,[a.CR]:0,[a.CD]:0,[a.EHR]:0,[a.RES]:.75,[a.BE]:0,[a.ERR]:1,[a.OHB]:1,[a.Physical_DMG]:0,[a.Fire_DMG]:0,[a.Ice_DMG]:0,[a.Lightning_DMG]:0,[a.Wind_DMG]:0,[a.Quantum_DMG]:0,[a.Imaginary_DMG]:0},parts:{[b.Body]:[a.OHB,a.HP_P,a.DEF_P,a.ATK_P],[b.Feet]:[a.SPD],[b.PlanarSphere]:[a.ATK_P,a.HP_P,a.DEF_P],[b.LinkRope]:[a.ERR]},presets:[oe.WASTELANDER_SET],sortOption:T.SPD,addedColumns:[T.OHB,T.HEAL],hiddenColumns:[T.SKILL,T.FUA,T.DOT]},1204:{stats:{[a.ATK]:.75,[a.ATK_P]:.75,[a.DEF]:0,[a.DEF_P]:0,[a.HP]:0,[a.HP_P]:0,[a.SPD]:1,[a.CR]:1,[a.CD]:1,[a.EHR]:0,[a.RES]:0,[a.BE]:0,[a.ERR]:0,[a.OHB]:0,[a.Physical_DMG]:0,[a.Fire_DMG]:0,[a.Ice_DMG]:0,[a.Lightning_DMG]:1,[a.Wind_DMG]:0,[a.Quantum_DMG]:0,[a.Imaginary_DMG]:0},parts:{[b.Body]:[a.CR,a.CD],[b.Feet]:[a.ATK_P,a.SPD],[b.PlanarSphere]:[a.ATK_P,a.Lightning_DMG],[b.LinkRope]:[a.ATK_P]},presets:[oe.fnAshblazingSet(8),oe.VALOROUS_SET,oe.BANANA_SET],sortOption:T.FUA,hiddenColumns:[T.DOT],simulation:{parts:{[b.Body]:[a.CR,a.CD],[b.Feet]:[a.ATK_P,a.SPD],[b.PlanarSphere]:[a.ATK_P,a.Lightning_DMG],[b.LinkRope]:[a.ATK_P]},substats:[a.CD,a.CR,a.ATK_P,a.ATK],comboAbilities:[Ie,Te,ne,ne,ne,ve],comboDot:0,comboBreak:0,relicSets:[[R.TheAshblazingGrandDuke,R.TheAshblazingGrandDuke],...Be],ornamentSets:[R.TheWondrousBananAmusementPark,R.InertSalsotto,...Vt,...we],teammates:[{characterId:"1306",lightCone:"23003",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1303",lightCone:"23019",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1217",lightCone:"23017",characterEidolon:0,lightConeSuperimposition:1}]}},1205:{stats:{[a.ATK]:.25,[a.ATK_P]:.25,[a.DEF]:0,[a.DEF_P]:0,[a.HP]:1,[a.HP_P]:1,[a.SPD]:1,[a.CR]:1,[a.CD]:1,[a.EHR]:0,[a.RES]:0,[a.BE]:0,[a.ERR]:0,[a.OHB]:0,[a.Physical_DMG]:0,[a.Fire_DMG]:0,[a.Ice_DMG]:0,[a.Lightning_DMG]:0,[a.Wind_DMG]:1,[a.Quantum_DMG]:0,[a.Imaginary_DMG]:0},parts:{[b.Body]:[a.CD,a.CR],[b.Feet]:[a.SPD,a.HP_P],[b.PlanarSphere]:[a.Wind_DMG,a.HP_P],[b.LinkRope]:[a.HP_P]},presets:[oe.VALOROUS_SET,oe.fnSacerdosSet(1)],sortOption:T.BASIC,hiddenColumns:[T.SKILL,T.DOT],simulation:{parts:{[b.Body]:[a.CR,a.CD],[b.Feet]:[a.HP_P,a.SPD],[b.PlanarSphere]:[a.HP_P,a.Wind_DMG],[b.LinkRope]:[a.HP_P]},substats:[a.CD,a.CR,a.HP_P,a.HP,a.ATK_P],comboAbilities:[Ie,Te,Qe,ve,Qe],comboDot:0,comboBreak:0,relicSets:[[R.LongevousDisciple,R.LongevousDisciple],...Be],ornamentSets:[R.BoneCollectionsSereneDemesne,R.RutilantArena,R.InertSalsotto,...we],teammates:[{characterId:"1212",lightCone:"23014",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1101",lightCone:"23003",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1203",lightCone:"20015",characterEidolon:0,lightConeSuperimposition:5}]}},1206:{stats:{[a.ATK]:.75,[a.ATK_P]:.75,[a.DEF]:0,[a.DEF_P]:0,[a.HP]:0,[a.HP_P]:0,[a.SPD]:1,[a.CR]:1,[a.CD]:1,[a.EHR]:0,[a.RES]:0,[a.BE]:.5,[a.ERR]:0,[a.OHB]:0,[a.Physical_DMG]:1,[a.Fire_DMG]:0,[a.Ice_DMG]:0,[a.Lightning_DMG]:0,[a.Wind_DMG]:0,[a.Quantum_DMG]:0,[a.Imaginary_DMG]:0},parts:{[b.Body]:[a.CR,a.CD],[b.Feet]:[a.ATK_P,a.SPD],[b.PlanarSphere]:[a.ATK_P,a.Physical_DMG],[b.LinkRope]:[a.ATK_P,a.BE]},presets:[],sortOption:T.SKILL,hiddenColumns:[T.FUA,T.DOT],simulation:{parts:{[b.Body]:[a.CR,a.CD],[b.Feet]:[a.ATK_P,a.SPD],[b.PlanarSphere]:[a.ATK_P,a.Physical_DMG],[b.LinkRope]:[a.ATK_P,a.BE]},substats:[a.CR,a.CD,a.ATK_P,a.BE],comboAbilities:[Ie,Te,ne,ne,ne],comboDot:0,comboBreak:1,relicSets:[[R.ScholarLostInErudition,R.ScholarLostInErudition],[R.ChampionOfStreetwiseBoxing,R.ChampionOfStreetwiseBoxing],[R.IronCavalryAgainstTheScourge,R.IronCavalryAgainstTheScourge],...Be],ornamentSets:[R.FirmamentFrontlineGlamoth,R.TaliaKingdomOfBanditry,...we,R.RutilantArena],teammates:[{characterId:"8006",lightCone:"21004",characterEidolon:6,lightConeSuperimposition:5},{characterId:"1303",lightCone:"23019",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1301",lightCone:"20015",characterEidolon:6,lightConeSuperimposition:5}]}},1207:{stats:{[a.ATK]:.75,[a.ATK_P]:.75,[a.DEF]:0,[a.DEF_P]:0,[a.HP]:0,[a.HP_P]:0,[a.SPD]:1,[a.CR]:1,[a.CD]:1,[a.EHR]:0,[a.RES]:0,[a.BE]:0,[a.ERR]:1,[a.OHB]:0,[a.Physical_DMG]:0,[a.Fire_DMG]:0,[a.Ice_DMG]:0,[a.Lightning_DMG]:0,[a.Wind_DMG]:0,[a.Quantum_DMG]:0,[a.Imaginary_DMG]:1},parts:{[b.Body]:[a.CR,a.CD],[b.Feet]:[a.SPD],[b.PlanarSphere]:[a.ATK_P,a.Imaginary_DMG],[b.LinkRope]:[a.ERR,a.ATK_P]},presets:[oe.WASTELANDER_SET,oe.fnSacerdosSet(1)],sortOption:T.ULT,hiddenColumns:[T.SKILL,T.FUA,T.DOT]},1208:{stats:{[a.ATK]:0,[a.ATK_P]:0,[a.DEF]:1,[a.DEF_P]:1,[a.HP]:1,[a.HP_P]:1,[a.SPD]:1,[a.CR]:0,[a.CD]:0,[a.EHR]:0,[a.RES]:.5,[a.BE]:0,[a.ERR]:1,[a.OHB]:0,[a.Physical_DMG]:0,[a.Fire_DMG]:0,[a.Ice_DMG]:0,[a.Lightning_DMG]:0,[a.Wind_DMG]:0,[a.Quantum_DMG]:0,[a.Imaginary_DMG]:0},parts:{[b.Body]:[a.HP_P,a.DEF_P],[b.Feet]:[a.HP_P,a.DEF_P,a.SPD],[b.PlanarSphere]:[a.HP_P,a.DEF_P],[b.LinkRope]:[a.HP_P,a.DEF_P,a.ERR]},presets:[],sortOption:T.EHP,addedColumns:[T.OHB,T.HEAL],hiddenColumns:[T.SKILL,T.FUA,T.DOT]},1209:{stats:{[a.ATK]:.75,[a.ATK_P]:.75,[a.DEF]:0,[a.DEF_P]:0,[a.HP]:0,[a.HP_P]:0,[a.SPD]:1,[a.CR]:1,[a.CD]:1,[a.EHR]:0,[a.RES]:0,[a.BE]:0,[a.ERR]:0,[a.OHB]:0,[a.Physical_DMG]:0,[a.Fire_DMG]:0,[a.Ice_DMG]:1,[a.Lightning_DMG]:0,[a.Wind_DMG]:0,[a.Quantum_DMG]:0,[a.Imaginary_DMG]:0},parts:{[b.Body]:[a.CR,a.CD],[b.Feet]:[a.ATK_P,a.SPD],[b.PlanarSphere]:[a.ATK_P,a.Ice_DMG],[b.LinkRope]:[a.ATK_P]},presets:[oe.VALOROUS_SET,oe.fnAshblazingSet(2)],sortOption:T.ULT,hiddenColumns:[T.DOT],simulation:{parts:{[b.Body]:[a.CD],[b.Feet]:[a.ATK_P,a.SPD],[b.PlanarSphere]:[a.ATK_P,a.Ice_DMG],[b.LinkRope]:[a.ATK_P]},substats:[a.CR,a.CD,a.ATK_P,a.ATK],comboAbilities:[Ie,Te,ne,ve,ne,ve,ne],comboDot:0,comboBreak:0,relicSets:[[R.ScholarLostInErudition,R.ScholarLostInErudition],[R.HunterOfGlacialForest,R.HunterOfGlacialForest],...Be],ornamentSets:[R.RutilantArena,R.FirmamentFrontlineGlamoth,...we],teammates:[{characterId:"1303",lightCone:"23019",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1106",lightCone:"21015",characterEidolon:6,lightConeSuperimposition:5},{characterId:"1217",lightCone:"23017",characterEidolon:0,lightConeSuperimposition:1}]}},1210:{stats:{[a.ATK]:.75,[a.ATK_P]:.75,[a.DEF]:.5,[a.DEF_P]:.5,[a.HP]:.5,[a.HP_P]:.5,[a.SPD]:1,[a.CR]:0,[a.CD]:0,[a.EHR]:1,[a.RES]:.5,[a.BE]:0,[a.ERR]:1,[a.OHB]:0,[a.Physical_DMG]:0,[a.Fire_DMG]:1,[a.Ice_DMG]:0,[a.Lightning_DMG]:0,[a.Wind_DMG]:0,[a.Quantum_DMG]:0,[a.Imaginary_DMG]:0},parts:{[b.Body]:[a.ATK_P,a.EHR],[b.Feet]:[a.SPD],[b.PlanarSphere]:[a.ATK_P,a.Fire_DMG],[b.LinkRope]:[a.ERR,a.ATK_P]},presets:[oe.PRISONER_SET],sortOption:T.DOT,hiddenColumns:[T.FUA]},1211:{stats:{[a.ATK]:0,[a.ATK_P]:0,[a.DEF]:.75,[a.DEF_P]:.75,[a.HP]:1,[a.HP_P]:1,[a.SPD]:1,[a.CR]:0,[a.CD]:0,[a.EHR]:0,[a.RES]:.75,[a.BE]:0,[a.ERR]:1,[a.OHB]:1,[a.Physical_DMG]:0,[a.Fire_DMG]:0,[a.Ice_DMG]:0,[a.Lightning_DMG]:0,[a.Wind_DMG]:0,[a.Quantum_DMG]:0,[a.Imaginary_DMG]:0},parts:{[b.Body]:[a.OHB],[b.Feet]:[a.SPD,a.HP_P],[b.PlanarSphere]:[a.HP_P],[b.LinkRope]:[a.HP_P,a.ERR]},presets:[],sortOption:T.HEAL,addedColumns:[T.OHB,T.HEAL],hiddenColumns:[T.SKILL,T.ULT,T.FUA,T.DOT]},1212:{stats:{[a.ATK]:.75,[a.ATK_P]:.75,[a.DEF]:0,[a.DEF_P]:0,[a.HP]:0,[a.HP_P]:0,[a.SPD]:1,[a.CR]:1,[a.CD]:1,[a.EHR]:0,[a.RES]:0,[a.BE]:0,[a.ERR]:0,[a.OHB]:0,[a.Physical_DMG]:0,[a.Fire_DMG]:0,[a.Ice_DMG]:1,[a.Lightning_DMG]:0,[a.Wind_DMG]:0,[a.Quantum_DMG]:0,[a.Imaginary_DMG]:0},parts:{[b.Body]:[a.CR,a.CD],[b.Feet]:[a.ATK_P,a.SPD],[b.PlanarSphere]:[a.ATK_P,a.Ice_DMG],[b.LinkRope]:[a.ATK_P]},presets:[],sortOption:T.SKILL,hiddenColumns:[T.FUA,T.DOT],simulation:{parts:{[b.Body]:[a.CD],[b.Feet]:[a.ATK_P,a.SPD],[b.PlanarSphere]:[a.ATK_P,a.Ice_DMG],[b.LinkRope]:[a.ATK_P]},substats:[a.CD,a.CR,a.ATK_P,a.ATK],errRopeEidolon:0,comboAbilities:[Ie,Te,ne,ne,ne],comboDot:0,comboBreak:0,relicSets:[[R.ScholarLostInErudition,R.ScholarLostInErudition],[R.HunterOfGlacialForest,R.HunterOfGlacialForest],...Be],ornamentSets:[R.RutilantArena,...we],teammates:[{characterId:"1101",lightCone:"23003",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1303",lightCone:"23019",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1217",lightCone:"23017",characterEidolon:0,lightConeSuperimposition:1}]}},1213:{stats:{[a.ATK]:.75,[a.ATK_P]:.75,[a.DEF]:0,[a.DEF_P]:0,[a.HP]:0,[a.HP_P]:0,[a.SPD]:1,[a.CR]:1,[a.CD]:1,[a.EHR]:0,[a.RES]:0,[a.BE]:0,[a.ERR]:0,[a.OHB]:0,[a.Physical_DMG]:0,[a.Fire_DMG]:0,[a.Ice_DMG]:0,[a.Lightning_DMG]:0,[a.Wind_DMG]:0,[a.Quantum_DMG]:0,[a.Imaginary_DMG]:1},parts:{[b.Body]:[a.CR,a.CD],[b.Feet]:[a.ATK_P,a.SPD],[b.PlanarSphere]:[a.ATK_P,a.Imaginary_DMG],[b.LinkRope]:[a.ATK_P]},presets:[oe.WASTELANDER_SET],sortOption:T.BASIC,hiddenColumns:[T.SKILL,T.FUA,T.DOT],simulation:{parts:{[b.Body]:[a.CR,a.CD],[b.Feet]:[a.ATK_P,a.SPD],[b.PlanarSphere]:[a.ATK_P,a.Imaginary_DMG],[b.LinkRope]:[a.ATK_P]},substats:[a.CD,a.CR,a.ATK_P,a.ATK],comboAbilities:[Ie,Te,Qe,Qe],comboDot:0,comboBreak:0,relicSets:[[R.MusketeerOfWildWheat,R.MusketeerOfWildWheat],[R.WastelanderOfBanditryDesert,R.WastelanderOfBanditryDesert],...Be],ornamentSets:[R.RutilantArena,...we],teammates:[{characterId:"1306",lightCone:"23003",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1202",lightCone:"21018",characterEidolon:6,lightConeSuperimposition:5},{characterId:"1217",lightCone:"23017",characterEidolon:0,lightConeSuperimposition:1}]}},1214:{stats:{[a.ATK]:.75,[a.ATK_P]:.75,[a.DEF]:0,[a.DEF_P]:0,[a.HP]:0,[a.HP_P]:0,[a.SPD]:1,[a.CR]:1,[a.CD]:1,[a.EHR]:0,[a.RES]:0,[a.BE]:1,[a.ERR]:0,[a.OHB]:0,[a.Physical_DMG]:0,[a.Fire_DMG]:0,[a.Ice_DMG]:0,[a.Lightning_DMG]:0,[a.Wind_DMG]:0,[a.Quantum_DMG]:1,[a.Imaginary_DMG]:0},parts:{[b.Body]:[a.CR,a.CD],[b.Feet]:[a.ATK_P,a.SPD],[b.PlanarSphere]:[a.Quantum_DMG,a.ATK_P],[b.LinkRope]:[a.ATK_P,a.BE]},presets:[oe.fnAshblazingSet(3),oe.VALOROUS_SET],sortOption:T.SKILL,hiddenColumns:[T.DOT],simulation:{parts:{[b.Body]:[a.CR,a.CD],[b.Feet]:[a.ATK_P,a.SPD],[b.PlanarSphere]:[a.ATK_P,a.Quantum_DMG],[b.LinkRope]:[a.ATK_P,a.BE]},substats:[a.BE,a.ATK_P,a.CR,a.CD,a.ATK],comboAbilities:[Ie,Te,ve,ne,ve,ne,ve],comboDot:0,comboBreak:1,relicSets:[[R.GeniusOfBrilliantStars,R.GeniusOfBrilliantStars],[R.PoetOfMourningCollapse,R.PoetOfMourningCollapse],...Be],ornamentSets:[R.TaliaKingdomOfBanditry,R.InertSalsotto,R.SpaceSealingStation,R.FirmamentFrontlineGlamoth,...Vt,...we],teammates:[{characterId:"8006",lightCone:"21004",characterEidolon:6,lightConeSuperimposition:5},{characterId:"1303",lightCone:"23019",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1301",lightCone:"20015",characterEidolon:6,lightConeSuperimposition:5}]}},1215:{stats:{[a.ATK]:0,[a.ATK_P]:0,[a.DEF]:.75,[a.DEF_P]:.75,[a.HP]:.75,[a.HP_P]:.75,[a.SPD]:1,[a.CR]:0,[a.CD]:0,[a.EHR]:0,[a.RES]:.5,[a.BE]:0,[a.ERR]:1,[a.OHB]:0,[a.Physical_DMG]:0,[a.Fire_DMG]:0,[a.Ice_DMG]:0,[a.Lightning_DMG]:0,[a.Wind_DMG]:0,[a.Quantum_DMG]:0,[a.Imaginary_DMG]:0},parts:{[b.Body]:[],[b.Feet]:[a.SPD],[b.PlanarSphere]:[],[b.LinkRope]:[a.ERR]},presets:[],sortOption:T.SPD,hiddenColumns:[T.ULT,T.FUA,T.DOT]},1217:{stats:{[a.ATK]:0,[a.ATK_P]:0,[a.DEF]:.75,[a.DEF_P]:.75,[a.HP]:1,[a.HP_P]:1,[a.SPD]:1,[a.CR]:0,[a.CD]:0,[a.EHR]:0,[a.RES]:.75,[a.BE]:0,[a.ERR]:1,[a.OHB]:1,[a.Physical_DMG]:0,[a.Fire_DMG]:0,[a.Ice_DMG]:0,[a.Lightning_DMG]:0,[a.Wind_DMG]:0,[a.Quantum_DMG]:0,[a.Imaginary_DMG]:0},parts:{[b.Body]:[a.HP_P,a.OHB],[b.Feet]:[a.SPD,a.HP_P],[b.PlanarSphere]:[a.HP_P],[b.LinkRope]:[a.HP_P,a.ERR]},presets:[],sortOption:T.HEAL,addedColumns:[T.OHB,T.HEAL],hiddenColumns:[T.SKILL,T.ULT,T.FUA,T.DOT]},1218:{stats:{[m.Stats.ATK]:.5,[m.Stats.ATK_P]:.5,[m.Stats.DEF]:.5,[m.Stats.DEF_P]:.5,[m.Stats.HP]:.5,[m.Stats.HP_P]:.5,[m.Stats.SPD]:1,[m.Stats.CR]:0,[m.Stats.CD]:0,[m.Stats.EHR]:1,[m.Stats.RES]:.5,[m.Stats.BE]:0,[m.Stats.ERR]:0,[m.Stats.OHB]:0,[m.Stats.Physical_DMG]:0,[m.Stats.Fire_DMG]:1,[m.Stats.Ice_DMG]:0,[m.Stats.Lightning_DMG]:0,[m.Stats.Wind_DMG]:0,[m.Stats.Quantum_DMG]:0,[m.Stats.Imaginary_DMG]:0},parts:{[m.Parts.Body]:[m.Stats.EHR],[m.Parts.Feet]:[m.Stats.SPD],[m.Parts.PlanarSphere]:[],[m.Parts.LinkRope]:[m.Stats.ATK_P,m.Stats.ERR]},presets:[oe.PRISONER_SET],sortOption:T.EHR,hiddenColumns:[T.FUA]},1220:{stats:{[m.Stats.ATK]:.75,[m.Stats.ATK_P]:.75,[m.Stats.DEF]:0,[m.Stats.DEF_P]:0,[m.Stats.HP]:0,[m.Stats.HP_P]:0,[m.Stats.SPD]:1,[m.Stats.CR]:1,[m.Stats.CD]:1,[m.Stats.EHR]:0,[m.Stats.RES]:0,[m.Stats.BE]:0,[m.Stats.ERR]:0,[m.Stats.OHB]:0,[m.Stats.Physical_DMG]:0,[m.Stats.Fire_DMG]:0,[m.Stats.Ice_DMG]:0,[m.Stats.Lightning_DMG]:0,[m.Stats.Wind_DMG]:1,[m.Stats.Quantum_DMG]:0,[m.Stats.Imaginary_DMG]:0},parts:{[m.Parts.Body]:[m.Stats.CR,m.Stats.CD],[m.Parts.Feet]:[m.Stats.ATK_P,m.Stats.SPD],[m.Parts.PlanarSphere]:[m.Stats.ATK_P,m.Stats.Wind_DMG],[m.Parts.LinkRope]:[m.Stats.ATK_P]},presets:[oe.fnAshblazingSet(1),oe.VALOROUS_SET],sortOption:T.ULT,hiddenColumns:[T.DOT],simulation:{parts:{[b.Body]:[a.CR,a.CD],[b.Feet]:[a.ATK_P,a.SPD],[b.PlanarSphere]:[a.ATK_P,a.Wind_DMG],[b.LinkRope]:[a.ATK_P]},substats:[a.ATK_P,a.CR,a.CD,a.ATK],comboAbilities:[Ie,Te,ne,ve,ve,Te,ne,ve,ve],comboDot:0,comboBreak:0,relicSets:[[R.TheWindSoaringValorous,R.TheWindSoaringValorous],[R.TheAshblazingGrandDuke,R.TheAshblazingGrandDuke],[R.EagleOfTwilightLine,R.EagleOfTwilightLine],...Be],ornamentSets:[R.DuranDynastyOfRunningWolves,...Vt,...we],teammates:[{characterId:"1112",lightCone:"23016",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1309",lightCone:"23026",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1304",lightCone:"23023",characterEidolon:0,lightConeSuperimposition:1}]}},1221:{stats:{[m.Stats.ATK]:.75,[m.Stats.ATK_P]:.75,[m.Stats.DEF]:0,[m.Stats.DEF_P]:0,[m.Stats.HP]:0,[m.Stats.HP_P]:0,[m.Stats.SPD]:1,[m.Stats.CR]:1,[m.Stats.CD]:1,[m.Stats.EHR]:0,[m.Stats.RES]:0,[m.Stats.BE]:0,[m.Stats.ERR]:0,[m.Stats.OHB]:0,[m.Stats.Physical_DMG]:1,[m.Stats.Fire_DMG]:0,[m.Stats.Ice_DMG]:0,[m.Stats.Lightning_DMG]:0,[m.Stats.Wind_DMG]:0,[m.Stats.Quantum_DMG]:0,[m.Stats.Imaginary_DMG]:0},parts:{[m.Parts.Body]:[m.Stats.CR,m.Stats.CD],[m.Parts.Feet]:[m.Stats.ATK_P,m.Stats.SPD],[m.Parts.PlanarSphere]:[m.Stats.ATK_P,m.Stats.Physical_DMG],[m.Parts.LinkRope]:[m.Stats.ATK_P]},presets:[oe.VALOROUS_SET,oe.fnPioneerSet(4),oe.fnAshblazingSet(8)],sortOption:T.FUA,hiddenColumns:[T.ULT,T.DOT],simulation:{parts:{[b.Body]:[a.CR,a.CD],[b.Feet]:[a.ATK_P,a.SPD],[b.PlanarSphere]:[a.ATK_P,a.Physical_DMG],[b.LinkRope]:[a.ATK_P]},substats:[a.CD,a.CR,a.ATK_P,a.ATK],errRopeEidolon:0,comboAbilities:[Ie,Te,ne,ve],comboDot:0,comboBreak:0,relicSets:[[R.TheWindSoaringValorous,R.TheWindSoaringValorous],...Be],ornamentSets:[R.DuranDynastyOfRunningWolves,...Vt,...we],teammates:[{characterId:"1309",lightCone:"23026",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1202",lightCone:"21018",characterEidolon:6,lightConeSuperimposition:5},{characterId:"1217",lightCone:"23017",characterEidolon:0,lightConeSuperimposition:1}]}},1222:{stats:{[m.Stats.ATK]:.75,[m.Stats.ATK_P]:.75,[m.Stats.DEF]:.5,[m.Stats.DEF_P]:.5,[m.Stats.HP]:.5,[m.Stats.HP_P]:.5,[m.Stats.SPD]:1,[m.Stats.CR]:0,[m.Stats.CD]:0,[m.Stats.EHR]:0,[m.Stats.RES]:.75,[m.Stats.BE]:1,[m.Stats.ERR]:1,[m.Stats.OHB]:0,[m.Stats.Physical_DMG]:0,[m.Stats.Fire_DMG]:1,[m.Stats.Ice_DMG]:0,[m.Stats.Lightning_DMG]:0,[m.Stats.Wind_DMG]:0,[m.Stats.Quantum_DMG]:0,[m.Stats.Imaginary_DMG]:0},parts:{[m.Parts.Body]:[m.Stats.ATK_P,m.Stats.OHB,m.Stats.DEF_P,m.Stats.HP_P],[m.Parts.Feet]:[m.Stats.SPD],[m.Parts.PlanarSphere]:[m.Stats.ATK_P,m.Stats.DEF_P,m.Stats.HP_P,m.Stats.Fire_DMG],[m.Parts.LinkRope]:[m.Stats.BE,m.Stats.ERR,m.Stats.ATK_P]},presets:[oe.BANANA_SET,oe.fnAshblazingSet(6),oe.VALOROUS_SET],sortOption:T.BE,addedColumns:[T.OHB,T.HEAL],hiddenColumns:[T.DOT]},1223:{stats:{[m.Stats.ATK]:.75,[m.Stats.ATK_P]:.75,[m.Stats.DEF]:0,[m.Stats.DEF_P]:0,[m.Stats.HP]:0,[m.Stats.HP_P]:0,[m.Stats.SPD]:1,[m.Stats.CR]:1,[m.Stats.CD]:1,[m.Stats.EHR]:0,[m.Stats.RES]:0,[m.Stats.BE]:0,[m.Stats.ERR]:0,[m.Stats.OHB]:0,[m.Stats.Physical_DMG]:0,[m.Stats.Fire_DMG]:0,[m.Stats.Ice_DMG]:0,[m.Stats.Lightning_DMG]:1,[m.Stats.Wind_DMG]:0,[m.Stats.Quantum_DMG]:0,[m.Stats.Imaginary_DMG]:0},parts:{[m.Parts.Body]:[m.Stats.CR,m.Stats.CD],[m.Parts.Feet]:[m.Stats.ATK_P,m.Stats.SPD],[m.Parts.PlanarSphere]:[m.Stats.ATK_P,m.Stats.Lightning_DMG],[m.Parts.LinkRope]:[m.Stats.ATK_P]},presets:[oe.fnPioneerSet(4),oe.fnAshblazingSet(6),oe.VALOROUS_SET],sortOption:T.FUA,hiddenColumns:[T.DOT],simulation:{parts:{[b.Body]:[a.CR,a.CD],[b.Feet]:[a.ATK_P,a.SPD],[b.PlanarSphere]:[a.ATK_P,a.Lightning_DMG],[b.LinkRope]:[a.ATK_P]},substats:[a.ATK_P,a.CR,a.CD,a.ATK],comboAbilities:[Ie,ne,Te,ve,ve],comboDot:0,comboBreak:0,deprioritizeBuffs:!0,relicSets:[[R.PioneerDiverOfDeadWaters,R.PioneerDiverOfDeadWaters],[R.TheAshblazingGrandDuke,R.TheAshblazingGrandDuke],...Be],ornamentSets:[R.DuranDynastyOfRunningWolves,R.IzumoGenseiAndTakamaDivineRealm,...Vt,...we],teammates:[{characterId:"1112",lightCone:"23016",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1309",lightCone:"23026",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1304",lightCone:"23023",characterEidolon:0,lightConeSuperimposition:1}]}},1224:{stats:{[m.Stats.ATK]:.75,[m.Stats.ATK_P]:.75,[m.Stats.DEF]:0,[m.Stats.DEF_P]:0,[m.Stats.HP]:0,[m.Stats.HP_P]:0,[m.Stats.SPD]:1,[m.Stats.CR]:1,[m.Stats.CD]:1,[m.Stats.EHR]:0,[m.Stats.RES]:0,[m.Stats.BE]:0,[m.Stats.ERR]:0,[m.Stats.OHB]:0,[m.Stats.Physical_DMG]:0,[m.Stats.Fire_DMG]:0,[m.Stats.Ice_DMG]:0,[m.Stats.Lightning_DMG]:0,[m.Stats.Wind_DMG]:0,[m.Stats.Quantum_DMG]:0,[m.Stats.Imaginary_DMG]:1},parts:{[m.Parts.Body]:[m.Stats.CR,m.Stats.CD],[m.Parts.Feet]:[m.Stats.ATK_P,m.Stats.SPD],[m.Parts.PlanarSphere]:[m.Stats.ATK_P,m.Stats.Imaginary_DMG],[m.Parts.LinkRope]:[m.Stats.ATK_P]},presets:[oe.fnAshblazingSet(2),oe.VALOROUS_SET],sortOption:T.BASIC,hiddenColumns:[T.SKILL,T.DOT],simulation:{parts:{[b.Body]:[a.CR,a.CD],[b.Feet]:[a.ATK_P,a.SPD],[b.PlanarSphere]:[a.ATK_P,a.Imaginary_DMG],[b.LinkRope]:[a.ATK_P]},substats:[a.ATK_P,a.CR,a.CD,a.ATK],comboAbilities:[Ie,Te,Qe,ve],comboDot:0,comboBreak:0,deprioritizeBuffs:!0,relicSets:[[R.MusketeerOfWildWheat,R.MusketeerOfWildWheat],[R.WastelanderOfBanditryDesert,R.WastelanderOfBanditryDesert],...Be],ornamentSets:[R.RutilantArena,R.IzumoGenseiAndTakamaDivineRealm,...we],teammates:[{characterId:"1112",lightCone:"23016",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1309",lightCone:"23026",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1304",lightCone:"23023",characterEidolon:0,lightConeSuperimposition:1}]}},1225:{stats:{[a.ATK]:0,[a.ATK_P]:0,[a.DEF]:0,[a.DEF_P]:0,[a.HP]:0,[a.HP_P]:0,[a.SPD]:1,[a.CR]:0,[a.CD]:0,[a.EHR]:1,[a.RES]:0,[a.BE]:1,[a.ERR]:1,[a.OHB]:0,[a.Physical_DMG]:0,[a.Fire_DMG]:1,[a.Ice_DMG]:0,[a.Lightning_DMG]:0,[a.Wind_DMG]:0,[a.Quantum_DMG]:0,[a.Imaginary_DMG]:0},parts:{[b.Body]:[],[b.Feet]:[a.SPD],[b.PlanarSphere]:[],[b.LinkRope]:[a.ERR,a.BE]},presets:[],sortOption:T.BASIC,hiddenColumns:[T.SKILL,T.FUA,T.DOT],simulation:{parts:{[b.Body]:[a.CR,a.ATK_P,a.EHR],[b.Feet]:[a.SPD,a.ATK_P],[b.PlanarSphere]:[a.ATK_P,a.Fire_DMG],[b.LinkRope]:[a.BE]},substats:[a.BE,a.ATK_P,a.CR,a.CD,a.EHR],errRopeEidolon:0,breakpoints:{[a.EHR]:.67},comboAbilities:[Ie,Te,Qe,Qe,Qe],comboDot:0,comboBreak:3,deprioritizeBuffs:!0,relicSets:[[R.ThiefOfShootingMeteor,R.ThiefOfShootingMeteor],[R.EagleOfTwilightLine,R.EagleOfTwilightLine],Ir,...Be],ornamentSets:[R.ForgeOfTheKalpagniLantern,R.TaliaKingdomOfBanditry,...V0],teammates:[{characterId:"1310",lightCone:"23025",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1303",lightCone:"23019",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1222",lightCone:"23032",characterEidolon:0,lightConeSuperimposition:1}]}},1301:{stats:{[a.ATK]:0,[a.ATK_P]:0,[a.DEF]:.75,[a.DEF_P]:.75,[a.HP]:.75,[a.HP_P]:.75,[a.SPD]:1,[a.CR]:0,[a.CD]:0,[a.EHR]:0,[a.RES]:.75,[a.BE]:1,[a.ERR]:1,[a.OHB]:1,[a.Physical_DMG]:0,[a.Fire_DMG]:0,[a.Ice_DMG]:0,[a.Lightning_DMG]:0,[a.Wind_DMG]:0,[a.Quantum_DMG]:0,[a.Imaginary_DMG]:0},parts:{[b.Body]:[a.OHB],[b.Feet]:[a.SPD],[b.PlanarSphere]:[],[b.LinkRope]:[a.ERR,a.BE]},presets:[],sortOption:T.BE,addedColumns:[T.OHB,T.HEAL],hiddenColumns:[T.SKILL,T.FUA,T.DOT]},1302:{stats:{[a.ATK]:.75,[a.ATK_P]:.75,[a.DEF]:0,[a.DEF_P]:0,[a.HP]:0,[a.HP_P]:0,[a.SPD]:1,[a.CR]:1,[a.CD]:1,[a.EHR]:0,[a.RES]:0,[a.BE]:0,[a.ERR]:0,[a.OHB]:0,[a.Physical_DMG]:1,[a.Fire_DMG]:0,[a.Ice_DMG]:0,[a.Lightning_DMG]:0,[a.Wind_DMG]:0,[a.Quantum_DMG]:0,[a.Imaginary_DMG]:0},parts:{[b.Body]:[a.CR,a.CD],[b.Feet]:[a.ATK_P,a.SPD],[b.PlanarSphere]:[a.Physical_DMG,a.ATK_P],[b.LinkRope]:[a.ATK_P]},presets:[],sortOption:T.ULT,hiddenColumns:[T.FUA,T.DOT],simulation:{parts:{[b.Body]:[a.CR,a.CD],[b.Feet]:[a.ATK_P,a.SPD],[b.PlanarSphere]:[a.ATK_P,a.Physical_DMG],[b.LinkRope]:[a.ATK_P]},substats:[a.CD,a.CR,a.ATK_P,a.ATK],comboAbilities:[Ie,Te,ne,ne,ne],comboDot:0,comboBreak:0,errRopeEidolon:0,relicSets:[[R.ScholarLostInErudition,R.ScholarLostInErudition],[R.ChampionOfStreetwiseBoxing,R.ChampionOfStreetwiseBoxing],...Be],ornamentSets:[R.InertSalsotto,...we,R.FirmamentFrontlineGlamoth],teammates:[{characterId:"1303",lightCone:"23019",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1202",lightCone:"21018",characterEidolon:6,lightConeSuperimposition:5},{characterId:"1217",lightCone:"23017",characterEidolon:0,lightConeSuperimposition:1}]}},1303:{stats:{[a.ATK]:0,[a.ATK_P]:0,[a.DEF]:.5,[a.DEF_P]:.5,[a.HP]:.5,[a.HP_P]:.5,[a.SPD]:1,[a.CR]:0,[a.CD]:0,[a.EHR]:0,[a.RES]:.5,[a.BE]:1,[a.ERR]:1,[a.OHB]:0,[a.Physical_DMG]:0,[a.Fire_DMG]:0,[a.Ice_DMG]:0,[a.Lightning_DMG]:0,[a.Wind_DMG]:0,[a.Quantum_DMG]:0,[a.Imaginary_DMG]:0},parts:{[b.Body]:[],[b.Feet]:[],[b.PlanarSphere]:[],[b.LinkRope]:[a.ERR,a.BE]},presets:[],sortOption:T.BE,hiddenColumns:[T.SKILL,T.ULT,T.FUA,T.DOT]},1304:{stats:{[a.ATK]:0,[a.ATK_P]:0,[a.DEF]:1,[a.DEF_P]:1,[a.HP]:0,[a.HP_P]:0,[a.SPD]:1,[a.CR]:1,[a.CD]:1,[a.EHR]:0,[a.RES]:0,[a.BE]:0,[a.ERR]:1,[a.OHB]:0,[a.Physical_DMG]:0,[a.Fire_DMG]:0,[a.Ice_DMG]:0,[a.Lightning_DMG]:0,[a.Wind_DMG]:0,[a.Quantum_DMG]:0,[a.Imaginary_DMG]:1},parts:{[b.Body]:[a.DEF_P,a.CR,a.CD],[b.Feet]:[a.DEF_P,a.SPD],[b.PlanarSphere]:[a.Imaginary_DMG,a.DEF_P],[b.LinkRope]:[a.DEF_P,a.ERR]},presets:[oe.VALOROUS_SET,oe.fnPioneerSet(4)],sortOption:T.FUA,addedColumns:[T.SHIELD],hiddenColumns:[T.SKILL,T.DOT],simulation:{parts:{[b.Body]:[a.CR,a.CD,a.DEF_P],[b.Feet]:[a.DEF_P,a.SPD],[b.PlanarSphere]:[a.DEF_P,a.Imaginary_DMG],[b.LinkRope]:[a.DEF_P]},substats:[a.CD,a.CR,a.DEF_P,a.DEF],breakpoints:{[a.DEF]:4e3},comboAbilities:[Ie,Te,Qe,ve,Qe,ve],comboDot:0,comboBreak:0,deprioritizeBuffs:!0,relicSets:[[R.PioneerDiverOfDeadWaters,R.PioneerDiverOfDeadWaters],[R.KnightOfPurityPalace,R.KnightOfPurityPalace],[R.TheAshblazingGrandDuke,R.KnightOfPurityPalace,R.PioneerDiverOfDeadWaters],...Be],ornamentSets:[R.DuranDynastyOfRunningWolves,R.InertSalsotto,...Vt,...we,...z0],teammates:[{characterId:"1112",lightCone:"23016",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1309",lightCone:"23026",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1305",lightCone:"23020",characterEidolon:0,lightConeSuperimposition:1}]}},1305:{stats:{[a.ATK]:.75,[a.ATK_P]:.75,[a.DEF]:0,[a.DEF_P]:0,[a.HP]:0,[a.HP_P]:0,[a.SPD]:1,[a.CR]:1,[a.CD]:1,[a.EHR]:0,[a.RES]:0,[a.BE]:0,[a.ERR]:0,[a.OHB]:0,[a.Physical_DMG]:0,[a.Fire_DMG]:0,[a.Ice_DMG]:0,[a.Lightning_DMG]:0,[a.Wind_DMG]:0,[a.Quantum_DMG]:0,[a.Imaginary_DMG]:1},parts:{[b.Body]:[a.CR,a.CD],[b.Feet]:[a.ATK_P,a.SPD],[b.PlanarSphere]:[a.ATK_P,a.Imaginary_DMG],[b.LinkRope]:[a.ATK_P]},presets:[oe.fnAshblazingSet(1),oe.fnPioneerSet(4),oe.VALOROUS_SET,oe.WASTELANDER_SET],sortOption:T.FUA,hiddenColumns:[T.DOT],simulation:{parts:{[b.Body]:[a.CR,a.CD],[b.Feet]:[a.ATK_P,a.SPD],[b.PlanarSphere]:[a.ATK_P,a.Imaginary_DMG],[b.LinkRope]:[a.ATK_P]},substats:[a.CD,a.CR,a.ATK_P,a.ATK],comboAbilities:[Ie,Te,ne,ve,ve,ne,ve,ve],comboDot:0,comboBreak:0,relicSets:[[R.PioneerDiverOfDeadWaters,R.PioneerDiverOfDeadWaters],...Be],ornamentSets:[R.DuranDynastyOfRunningWolves,R.IzumoGenseiAndTakamaDivineRealm,...Vt,...we],teammates:[{characterId:"1112",lightCone:"23016",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1309",lightCone:"23026",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1304",lightCone:"23023",characterEidolon:0,lightConeSuperimposition:1}]}},1306:{stats:{[a.ATK]:0,[a.ATK_P]:0,[a.DEF]:.5,[a.DEF_P]:.5,[a.HP]:.5,[a.HP_P]:.5,[a.SPD]:1,[a.CR]:0,[a.CD]:1,[a.EHR]:0,[a.RES]:.5,[a.BE]:0,[a.ERR]:1,[a.OHB]:0,[a.Physical_DMG]:0,[a.Fire_DMG]:0,[a.Ice_DMG]:0,[a.Lightning_DMG]:0,[a.Wind_DMG]:0,[a.Quantum_DMG]:0,[a.Imaginary_DMG]:0},parts:{[b.Body]:[a.CD],[b.Feet]:[a.SPD],[b.PlanarSphere]:[],[b.LinkRope]:[a.ERR]},presets:[],sortOption:T.CD,hiddenColumns:[T.SKILL,T.ULT,T.FUA,T.DOT]},1307:{stats:{[a.ATK]:1,[a.ATK_P]:1,[a.DEF]:0,[a.DEF_P]:0,[a.HP]:0,[a.HP_P]:0,[a.SPD]:1,[a.CR]:0,[a.CD]:0,[a.EHR]:1,[a.RES]:0,[a.BE]:0,[a.ERR]:0,[a.OHB]:0,[a.Physical_DMG]:0,[a.Fire_DMG]:0,[a.Ice_DMG]:0,[a.Lightning_DMG]:0,[a.Wind_DMG]:1,[a.Quantum_DMG]:0,[a.Imaginary_DMG]:0},parts:{[b.Body]:[a.ATK_P,a.EHR],[b.Feet]:[a.SPD,a.ATK_P],[b.PlanarSphere]:[a.Wind_DMG,a.ATK_P],[b.LinkRope]:[a.ATK_P]},presets:[oe.PRISONER_SET],sortOption:T.DOT,hiddenColumns:[T.FUA],simulation:{parts:{[b.Body]:[a.EHR,a.ATK_P],[b.Feet]:[a.ATK_P,a.SPD],[b.PlanarSphere]:[a.ATK_P,a.Wind_DMG],[b.LinkRope]:[a.ATK_P]},substats:[a.ATK_P,a.EHR,a.ATK,a.CR,a.CD],breakpoints:{[a.EHR]:1.2},comboAbilities:[Ie,ne,Te,Qe,Qe],comboDot:16,comboBreak:0,relicSets:[[R.PrisonerInDeepConfinement,R.PrisonerInDeepConfinement],...Be],ornamentSets:[R.FirmamentFrontlineGlamoth,R.PanCosmicCommercialEnterprise],teammates:[{characterId:"1005",lightCone:"23006",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1303",lightCone:"23019",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1217",lightCone:"23017",characterEidolon:0,lightConeSuperimposition:1}]}},1308:{stats:{[a.ATK]:.75,[a.ATK_P]:.75,[a.DEF]:0,[a.DEF_P]:0,[a.HP]:0,[a.HP_P]:0,[a.SPD]:1,[a.CR]:1,[a.CD]:1,[a.EHR]:0,[a.RES]:0,[a.BE]:0,[a.ERR]:0,[a.OHB]:0,[a.Physical_DMG]:0,[a.Fire_DMG]:0,[a.Ice_DMG]:0,[a.Lightning_DMG]:1,[a.Wind_DMG]:0,[a.Quantum_DMG]:0,[a.Imaginary_DMG]:0},parts:{[b.Body]:[a.CR,a.CD,a.ATK_P],[b.Feet]:[a.ATK_P,a.SPD],[b.PlanarSphere]:[a.Lightning_DMG,a.ATK_P],[b.LinkRope]:[a.ATK_P]},presets:[oe.fnPioneerSet(4)],sortOption:T.ULT,hiddenColumns:[T.FUA,T.DOT],simulation:{parts:{[b.Body]:[a.ATK_P,a.CR,a.CD],[b.Feet]:[a.ATK_P,a.SPD],[b.PlanarSphere]:[a.ATK_P,a.Lightning_DMG],[b.LinkRope]:[a.ATK_P]},substats:[a.CD,a.CR,a.ATK_P,a.ATK],comboAbilities:[Ie,Te,ne,ne],comboDot:0,comboBreak:0,relicSets:[[R.PioneerDiverOfDeadWaters,R.PioneerDiverOfDeadWaters],...Be],ornamentSets:[R.IzumoGenseiAndTakamaDivineRealm,...we],teammates:[{characterId:"1106",lightCone:"21015",characterEidolon:6,lightConeSuperimposition:5},{characterId:"1006",lightCone:"23007",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1304",lightCone:"21016",characterEidolon:0,lightConeSuperimposition:5}]}},1309:{stats:{[a.ATK]:1,[a.ATK_P]:1,[a.DEF]:.5,[a.DEF_P]:.5,[a.HP]:.5,[a.HP_P]:.5,[a.SPD]:1,[a.CR]:0,[a.CD]:0,[a.EHR]:0,[a.RES]:.5,[a.BE]:0,[a.ERR]:1,[a.OHB]:0,[a.Physical_DMG]:1,[a.Fire_DMG]:0,[a.Ice_DMG]:0,[a.Lightning_DMG]:0,[a.Wind_DMG]:0,[a.Quantum_DMG]:0,[a.Imaginary_DMG]:0},parts:{[b.Body]:[a.ATK_P],[b.Feet]:[a.ATK_P,a.SPD],[b.PlanarSphere]:[a.ATK_P,a.Physical_DMG],[m.Parts.LinkRope]:[a.ERR]},presets:[],sortOption:T.ATK,hiddenColumns:[T.SKILL,T.FUA,T.DOT]},1310:{stats:{[m.Stats.ATK]:.5,[m.Stats.ATK_P]:.5,[m.Stats.DEF]:0,[m.Stats.DEF_P]:0,[m.Stats.HP]:0,[m.Stats.HP_P]:0,[m.Stats.SPD]:1,[m.Stats.CR]:0,[m.Stats.CD]:0,[m.Stats.EHR]:0,[m.Stats.RES]:0,[m.Stats.BE]:1,[m.Stats.ERR]:0,[m.Stats.OHB]:0,[m.Stats.Physical_DMG]:0,[m.Stats.Fire_DMG]:0,[m.Stats.Ice_DMG]:0,[m.Stats.Lightning_DMG]:0,[m.Stats.Wind_DMG]:0,[m.Stats.Quantum_DMG]:0,[m.Stats.Imaginary_DMG]:0},parts:{[m.Parts.Body]:[m.Stats.ATK_P],[m.Parts.Feet]:[m.Stats.ATK_P,m.Stats.SPD],[m.Parts.PlanarSphere]:[m.Stats.ATK_P],[m.Parts.LinkRope]:[m.Stats.BE]},presets:[],sortOption:T.SKILL,hiddenColumns:[T.ULT,T.FUA,T.DOT],simulation:{parts:{[b.Body]:[a.ATK_P],[b.Feet]:[a.ATK_P,a.SPD],[b.PlanarSphere]:[a.ATK_P],[b.LinkRope]:[a.BE]},substats:[a.BE,a.ATK_P,a.ATK,a.CR,a.CD],comboAbilities:[Ie,Te,ne,ne,ne],comboDot:0,comboBreak:1,relicSets:[[R.IronCavalryAgainstTheScourge,R.IronCavalryAgainstTheScourge],...Be],ornamentSets:[R.ForgeOfTheKalpagniLantern],teammates:[{characterId:"8006",lightCone:"21004",characterEidolon:6,lightConeSuperimposition:5},{characterId:"1303",lightCone:"23019",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1301",lightCone:"20015",characterEidolon:6,lightConeSuperimposition:5}]}},1312:{stats:{[a.ATK]:.75,[a.ATK_P]:.75,[a.DEF]:0,[a.DEF_P]:0,[a.HP]:0,[a.HP_P]:0,[a.SPD]:1,[a.CR]:1,[a.CD]:1,[a.EHR]:0,[a.RES]:0,[a.BE]:0,[a.ERR]:0,[a.OHB]:0,[a.Physical_DMG]:0,[a.Fire_DMG]:0,[a.Ice_DMG]:1,[a.Lightning_DMG]:0,[a.Wind_DMG]:0,[a.Quantum_DMG]:0,[a.Imaginary_DMG]:0},parts:{[b.Body]:[a.CR,a.CD],[b.Feet]:[a.ATK_P,a.SPD],[b.PlanarSphere]:[a.ATK_P,a.Ice_DMG],[b.LinkRope]:[a.ATK_P]},presets:[oe.fnPioneerSet(4)],sortOption:T.ULT,hiddenColumns:[T.FUA,T.DOT],simulation:{parts:{[b.Body]:[a.CR,a.CD],[b.Feet]:[a.ATK_P,a.SPD],[b.PlanarSphere]:[a.ATK_P,a.Ice_DMG],[b.LinkRope]:[a.ATK_P]},substats:[a.CD,a.CR,a.ATK_P,a.ATK],comboAbilities:[Ie,Te,ne,ne,ne],comboDot:0,comboBreak:0,relicSets:[[R.ScholarLostInErudition,R.ScholarLostInErudition],[R.PioneerDiverOfDeadWaters,R.PioneerDiverOfDeadWaters],...Be],ornamentSets:[R.RutilantArena,R.FirmamentFrontlineGlamoth,R.InertSalsotto,...we],teammates:[{characterId:"1303",lightCone:"23019",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1106",lightCone:"21015",characterEidolon:6,lightConeSuperimposition:5},{characterId:"1217",lightCone:"23017",characterEidolon:0,lightConeSuperimposition:1}]}},1313:{stats:{[a.ATK]:0,[a.ATK_P]:0,[a.DEF]:.5,[a.DEF_P]:.5,[a.HP]:.5,[a.HP_P]:.5,[a.SPD]:1,[a.CR]:0,[a.CD]:1,[a.EHR]:0,[a.RES]:.75,[a.BE]:0,[a.ERR]:1,[a.OHB]:0,[a.Physical_DMG]:0,[a.Fire_DMG]:0,[a.Ice_DMG]:0,[a.Lightning_DMG]:0,[a.Wind_DMG]:0,[a.Quantum_DMG]:0,[a.Imaginary_DMG]:1},parts:{[b.Body]:[a.CD],[b.Feet]:[],[b.PlanarSphere]:[],[b.LinkRope]:[a.ERR]},presets:[],sortOption:T.CD,hiddenColumns:[T.SKILL,T.ULT,T.FUA,T.DOT]},1314:{stats:{[m.Stats.ATK]:.75,[m.Stats.ATK_P]:.75,[m.Stats.DEF]:0,[m.Stats.DEF_P]:0,[m.Stats.HP]:0,[m.Stats.HP_P]:0,[m.Stats.SPD]:1,[m.Stats.CR]:1,[m.Stats.CD]:1,[m.Stats.EHR]:0,[m.Stats.RES]:0,[m.Stats.BE]:0,[m.Stats.ERR]:0,[m.Stats.OHB]:0,[m.Stats.Physical_DMG]:0,[m.Stats.Fire_DMG]:0,[m.Stats.Ice_DMG]:0,[m.Stats.Lightning_DMG]:0,[m.Stats.Wind_DMG]:0,[m.Stats.Quantum_DMG]:1,[m.Stats.Imaginary_DMG]:0},parts:{[m.Parts.Body]:[m.Stats.CR,m.Stats.CD],[m.Parts.Feet]:[m.Stats.ATK_P,m.Stats.SPD],[m.Parts.PlanarSphere]:[m.Stats.ATK_P,m.Stats.Quantum_DMG],[m.Parts.LinkRope]:[m.Stats.ATK_P]},presets:[oe.VALOROUS_SET,oe.fnAshblazingSet(8)],sortOption:T.FUA,hiddenColumns:[T.SKILL,T.DOT],simulation:{parts:{[b.Body]:[a.CR,a.CD],[b.Feet]:[a.ATK_P,a.SPD],[b.PlanarSphere]:[a.ATK_P,a.Quantum_DMG],[b.LinkRope]:[a.ATK_P]},substats:[a.CD,a.CR,a.ATK_P,a.ATK],comboAbilities:[Ie,Te,ve,Qe,ve,Qe],comboDot:0,comboBreak:0,relicSets:[[R.GeniusOfBrilliantStars,R.GeniusOfBrilliantStars],[R.TheAshblazingGrandDuke,R.TheAshblazingGrandDuke],[R.PoetOfMourningCollapse,R.PoetOfMourningCollapse],...Be],ornamentSets:[R.DuranDynastyOfRunningWolves,R.IzumoGenseiAndTakamaDivineRealm,...Vt,...we],teammates:[{characterId:"1112",lightCone:"23016",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1309",lightCone:"23026",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1304",lightCone:"23023",characterEidolon:0,lightConeSuperimposition:1}]}},1315:{stats:{[a.ATK]:.25,[a.ATK_P]:.25,[a.DEF]:0,[a.DEF_P]:0,[a.HP]:0,[a.HP_P]:0,[a.SPD]:1,[a.CR]:.25,[a.CD]:.25,[a.EHR]:0,[a.RES]:0,[a.BE]:1,[a.ERR]:0,[a.OHB]:0,[a.Physical_DMG]:1,[a.Fire_DMG]:0,[a.Ice_DMG]:0,[a.Lightning_DMG]:0,[a.Wind_DMG]:0,[a.Quantum_DMG]:0,[a.Imaginary_DMG]:0},parts:{[b.Body]:[],[b.Feet]:[a.SPD],[b.PlanarSphere]:[],[b.LinkRope]:[a.BE]},presets:[],sortOption:T.BASIC,hiddenColumns:[T.SKILL,T.FUA,T.DOT],simulation:{parts:{[b.Body]:[a.CR,a.CD],[b.Feet]:[a.SPD],[b.PlanarSphere]:[a.Physical_DMG,a.ATK_P],[b.LinkRope]:[a.BE]},substats:[a.BE,a.CD,a.CR,a.ATK_P,a.ATK],comboAbilities:[Ie,Te,Qe,Qe,Qe],comboDot:0,comboBreak:1,relicSets:[[R.ThiefOfShootingMeteor,R.WatchmakerMasterOfDreamMachinations],[R.IronCavalryAgainstTheScourge,R.IronCavalryAgainstTheScourge],Ir,...Be],ornamentSets:[R.TaliaKingdomOfBanditry],teammates:[{characterId:"8006",lightCone:"21004",characterEidolon:6,lightConeSuperimposition:5},{characterId:"1303",lightCone:"23019",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1301",lightCone:"20015",characterEidolon:6,lightConeSuperimposition:5}]}},1317:{stats:{[a.ATK]:.5,[a.ATK_P]:.5,[a.DEF]:0,[a.DEF_P]:0,[a.HP]:0,[a.HP_P]:0,[a.SPD]:1,[a.CR]:0,[a.CD]:0,[a.EHR]:0,[a.RES]:0,[a.BE]:1,[a.ERR]:0,[a.OHB]:0,[a.Physical_DMG]:0,[a.Fire_DMG]:0,[a.Ice_DMG]:0,[a.Lightning_DMG]:0,[a.Wind_DMG]:0,[a.Quantum_DMG]:0,[a.Imaginary_DMG]:1},parts:{[b.Body]:[],[b.Feet]:[a.SPD],[b.PlanarSphere]:[],[b.LinkRope]:[a.BE]},presets:[oe.WASTELANDER_SET],sortOption:T.BASIC,hiddenColumns:[T.ULT,T.FUA,T.DOT],simulation:{parts:{[b.Body]:[a.ATK_P],[b.Feet]:[a.SPD],[b.PlanarSphere]:[a.Imaginary_DMG,a.ATK_P],[b.LinkRope]:[a.BE]},substats:[a.BE,a.ATK_P,a.ATK,a.CD,a.CR],breakpoints:{[a.ATK]:3200},comboAbilities:[Ie,Te,Qe,Qe,Qe,ne],comboDot:0,comboBreak:1,relicSets:[[R.IronCavalryAgainstTheScourge,R.IronCavalryAgainstTheScourge],[R.EagleOfTwilightLine,R.EagleOfTwilightLine],...Be],ornamentSets:[R.TaliaKingdomOfBanditry],teammates:[{characterId:"8006",lightCone:"21004",characterEidolon:6,lightConeSuperimposition:5},{characterId:"1303",lightCone:"23019",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1222",lightCone:"23032",characterEidolon:0,lightConeSuperimposition:1}]}},8001:{stats:{[a.ATK]:.75,[a.ATK_P]:.75,[a.DEF]:0,[a.DEF_P]:0,[a.HP]:0,[a.HP_P]:0,[a.SPD]:1,[a.CR]:1,[a.CD]:1,[a.EHR]:0,[a.RES]:0,[a.BE]:.5,[a.ERR]:0,[a.OHB]:0,[a.Physical_DMG]:1,[a.Fire_DMG]:0,[a.Ice_DMG]:0,[a.Lightning_DMG]:0,[a.Wind_DMG]:0,[a.Quantum_DMG]:0,[a.Imaginary_DMG]:0},parts:{[b.Body]:[a.CR,a.CD],[b.Feet]:[a.ATK_P,a.SPD],[b.PlanarSphere]:[a.ATK_P,a.Physical_DMG],[b.LinkRope]:[a.ATK_P,a.BE]},presets:[],sortOption:T.SKILL,hiddenColumns:[T.FUA,T.DOT],simulation:{parts:{[b.Body]:[a.CR,a.CD],[b.Feet]:[a.ATK_P,a.SPD],[b.PlanarSphere]:[a.ATK_P,a.Physical_DMG],[b.LinkRope]:[a.ATK_P,a.BE]},substats:[a.CD,a.CR,a.ATK_P,a.ATK],comboAbilities:[Ie,Te,ne,ne,ne],comboDot:0,comboBreak:1,relicSets:[[R.ScholarLostInErudition,R.ScholarLostInErudition],...Be],ornamentSets:[R.RutilantArena,R.FirmamentFrontlineGlamoth,...we],teammates:[{characterId:"1101",lightCone:"23003",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1303",lightCone:"23019",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1217",lightCone:"23017",characterEidolon:0,lightConeSuperimposition:1}]}},8002:{stats:{[a.ATK]:.75,[a.ATK_P]:.75,[a.DEF]:0,[a.DEF_P]:0,[a.HP]:0,[a.HP_P]:0,[a.SPD]:1,[a.CR]:1,[a.CD]:1,[a.EHR]:0,[a.RES]:0,[a.BE]:.5,[a.ERR]:0,[a.OHB]:0,[a.Physical_DMG]:1,[a.Fire_DMG]:0,[a.Ice_DMG]:0,[a.Lightning_DMG]:0,[a.Wind_DMG]:0,[a.Quantum_DMG]:0,[a.Imaginary_DMG]:0},parts:{[b.Body]:[a.CR,a.CD],[b.Feet]:[a.ATK_P,a.SPD],[b.PlanarSphere]:[a.ATK_P,a.Physical_DMG],[b.LinkRope]:[a.ATK_P,a.BE]},presets:[],sortOption:T.SKILL,hiddenColumns:[T.FUA,T.DOT],simulation:{parts:{[b.Body]:[a.CR,a.CD],[b.Feet]:[a.ATK_P,a.SPD],[b.PlanarSphere]:[a.ATK_P,a.Physical_DMG],[b.LinkRope]:[a.ATK_P,a.BE]},substats:[a.CD,a.CR,a.ATK_P,a.ATK],comboAbilities:[Ie,Te,ne,ne,ne],comboDot:0,comboBreak:1,relicSets:[[R.ScholarLostInErudition,R.ScholarLostInErudition],...Be],ornamentSets:[R.RutilantArena,R.FirmamentFrontlineGlamoth,...we],teammates:[{characterId:"1101",lightCone:"23003",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1303",lightCone:"23019",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1217",lightCone:"23017",characterEidolon:0,lightConeSuperimposition:1}]}},8003:{stats:{[a.ATK]:0,[a.ATK_P]:0,[a.DEF]:1,[a.DEF_P]:1,[a.HP]:.5,[a.HP_P]:.5,[a.SPD]:1,[a.CR]:0,[a.CD]:0,[a.EHR]:.75,[a.RES]:.75,[a.BE]:0,[a.ERR]:1,[a.OHB]:0,[a.Physical_DMG]:0,[a.Fire_DMG]:0,[a.Ice_DMG]:0,[a.Lightning_DMG]:0,[a.Wind_DMG]:0,[a.Quantum_DMG]:0,[a.Imaginary_DMG]:0},parts:{[b.Body]:[a.DEF_P],[b.Feet]:[a.DEF_P,a.SPD],[b.PlanarSphere]:[a.DEF_P],[b.LinkRope]:[a.DEF_P,a.ERR]},presets:[],sortOption:T.SHIELD,addedColumns:[T.SHIELD],hiddenColumns:[T.SKILL,T.FUA,T.DOT]},8004:{stats:{[a.ATK]:0,[a.ATK_P]:0,[a.DEF]:1,[a.DEF_P]:1,[a.HP]:.5,[a.HP_P]:.5,[a.SPD]:1,[a.CR]:0,[a.CD]:0,[a.EHR]:.75,[a.RES]:.75,[a.BE]:0,[a.ERR]:1,[a.OHB]:0,[a.Physical_DMG]:0,[a.Fire_DMG]:0,[a.Ice_DMG]:0,[a.Lightning_DMG]:0,[a.Wind_DMG]:0,[a.Quantum_DMG]:0,[a.Imaginary_DMG]:0},parts:{[b.Body]:[a.DEF_P],[b.Feet]:[a.DEF_P,a.SPD],[b.PlanarSphere]:[a.DEF_P],[b.LinkRope]:[a.DEF_P,a.ERR]},presets:[],sortOption:T.SHIELD,addedColumns:[T.SHIELD],hiddenColumns:[T.SKILL,T.FUA,T.DOT]},8005:{stats:{[a.ATK]:0,[a.ATK_P]:0,[a.DEF]:.5,[a.DEF_P]:.5,[a.HP]:.5,[a.HP_P]:.5,[a.SPD]:1,[a.CR]:0,[a.CD]:0,[a.EHR]:0,[a.RES]:.5,[a.BE]:1,[a.ERR]:1,[a.OHB]:0,[a.Physical_DMG]:0,[a.Fire_DMG]:0,[a.Ice_DMG]:0,[a.Lightning_DMG]:0,[a.Wind_DMG]:0,[a.Quantum_DMG]:0,[a.Imaginary_DMG]:0},parts:{[b.Body]:[],[b.Feet]:[a.SPD],[b.PlanarSphere]:[],[b.LinkRope]:[a.BE,a.ERR]},presets:[],sortOption:T.BE,hiddenColumns:[T.ULT,T.FUA,T.DOT]},8006:{stats:{[a.ATK]:0,[a.ATK_P]:0,[a.DEF]:.5,[a.DEF_P]:.5,[a.HP]:.5,[a.HP_P]:.5,[a.SPD]:1,[a.CR]:0,[a.CD]:0,[a.EHR]:0,[a.RES]:.5,[a.BE]:1,[a.ERR]:1,[a.OHB]:0,[a.Physical_DMG]:0,[a.Fire_DMG]:0,[a.Ice_DMG]:0,[a.Lightning_DMG]:0,[a.Wind_DMG]:0,[a.Quantum_DMG]:0,[a.Imaginary_DMG]:0},parts:{[b.Body]:[],[b.Feet]:[a.SPD],[b.PlanarSphere]:[],[b.LinkRope]:[a.BE,a.ERR]},presets:[],sortOption:T.BE,hiddenColumns:[T.ULT,T.FUA,T.DOT]},8007:{stats:{[a.ATK]:.25,[a.ATK_P]:.25,[a.DEF]:0,[a.DEF_P]:0,[a.HP]:0,[a.HP_P]:0,[a.SPD]:1,[a.CR]:.25,[a.CD]:1,[a.EHR]:0,[a.RES]:0,[a.BE]:0,[a.ERR]:1,[a.OHB]:0,[a.Physical_DMG]:0,[a.Fire_DMG]:0,[a.Ice_DMG]:1,[a.Lightning_DMG]:0,[a.Wind_DMG]:0,[a.Quantum_DMG]:0,[a.Imaginary_DMG]:0},parts:{[b.Body]:[a.CD],[b.Feet]:[a.ATK_P,a.SPD],[b.PlanarSphere]:[],[b.LinkRope]:[a.ATK_P,a.ERR]},presets:[oe.BANANA_SET],sortOption:T.CD,hiddenColumns:[T.SKILL,T.FUA,T.DOT],addedColumns:[T.MEMO_SKILL]},8008:{stats:{[a.ATK]:.25,[a.ATK_P]:.25,[a.DEF]:0,[a.DEF_P]:0,[a.HP]:0,[a.HP_P]:0,[a.SPD]:1,[a.CR]:.25,[a.CD]:1,[a.EHR]:0,[a.RES]:0,[a.BE]:0,[a.ERR]:1,[a.OHB]:0,[a.Physical_DMG]:0,[a.Fire_DMG]:0,[a.Ice_DMG]:1,[a.Lightning_DMG]:0,[a.Wind_DMG]:0,[a.Quantum_DMG]:0,[a.Imaginary_DMG]:0},parts:{[b.Body]:[a.CD],[b.Feet]:[a.ATK_P,a.SPD],[b.PlanarSphere]:[],[b.LinkRope]:[a.ATK_P,a.ERR]},presets:[oe.BANANA_SET],sortOption:T.CD,hiddenColumns:[T.SKILL,T.FUA,T.DOT],addedColumns:[T.MEMO_SKILL]},1401:{stats:{[a.ATK]:.75,[a.ATK_P]:.75,[a.DEF]:0,[a.DEF_P]:0,[a.HP]:0,[a.HP_P]:0,[a.SPD]:1,[a.CR]:1,[a.CD]:1,[a.EHR]:0,[a.RES]:0,[a.BE]:0,[a.ERR]:0,[a.OHB]:0,[a.Physical_DMG]:0,[a.Fire_DMG]:0,[a.Ice_DMG]:1,[a.Lightning_DMG]:0,[a.Wind_DMG]:0,[a.Quantum_DMG]:0,[a.Imaginary_DMG]:0},parts:{[b.Body]:[a.CR,a.CD],[b.Feet]:[a.ATK_P,a.SPD],[b.PlanarSphere]:[a.ATK_P,a.Ice_DMG],[b.LinkRope]:[a.ATK_P,a.ERR]},presets:[],sortOption:T.SKILL,hiddenColumns:[T.FUA,T.DOT],simulation:{parts:{[b.Body]:[a.CR,a.CD],[b.Feet]:[a.ATK_P,a.SPD],[b.PlanarSphere]:[a.ATK_P,a.Ice_DMG],[b.LinkRope]:[a.ATK_P]},substats:[a.CD,a.CR,a.ATK_P,a.ATK],comboAbilities:[Ie,Te,ne],comboDot:0,comboBreak:0,errRopeEidolon:0,relicSets:[[R.ScholarLostInErudition,R.ScholarLostInErudition],...Be],ornamentSets:[R.IzumoGenseiAndTakamaDivineRealm,R.RutilantArena,...we],teammates:[{characterId:"1314",lightCone:"23028",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1309",lightCone:"23026",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1222",lightCone:"23032",characterEidolon:0,lightConeSuperimposition:1}]}},1402:{stats:{[a.ATK]:.75,[a.ATK_P]:.75,[a.DEF]:0,[a.DEF_P]:0,[a.HP]:0,[a.HP_P]:0,[a.SPD]:1,[a.CR]:1,[a.CD]:1,[a.EHR]:0,[a.RES]:0,[a.BE]:0,[a.ERR]:1,[a.OHB]:0,[a.Physical_DMG]:0,[a.Fire_DMG]:0,[a.Ice_DMG]:0,[a.Lightning_DMG]:1,[a.Wind_DMG]:0,[a.Quantum_DMG]:0,[a.Imaginary_DMG]:0},parts:{[b.Body]:[a.CR,a.CD],[b.Feet]:[a.ATK_P,a.SPD],[b.PlanarSphere]:[a.ATK_P,a.Lightning_DMG],[b.LinkRope]:[a.ERR,a.ATK_P,a.ERR]},presets:[oe.BANANA_SET],sortOption:T.BASIC,hiddenColumns:[T.SKILL,T.ULT,T.FUA,T.DOT],addedColumns:[T.MEMO_SKILL,T.MEMO_TALENT],simulation:{parts:{[b.Body]:[a.CR,a.CD],[b.Feet]:[a.ATK_P,a.SPD],[b.PlanarSphere]:[a.ATK_P,a.Lightning_DMG],[b.LinkRope]:[a.ATK_P]},substats:[a.CD,a.CR,a.ATK_P,a.ATK],comboAbilities:[Ie,Te,Qe,_n,_n,Qe,_n],comboDot:0,comboBreak:0,errRopeEidolon:0,relicSets:[[R.HeroOfTriumphantSong,R.HeroOfTriumphantSong],...Be],ornamentSets:[R.TheWondrousBananAmusementPark,R.RutilantArena,...we],teammates:[{characterId:"1313",lightCone:"23034",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1309",lightCone:"23026",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1217",lightCone:"23017",characterEidolon:0,lightConeSuperimposition:1}]}},1403:{stats:{[a.ATK]:0,[a.ATK_P]:0,[a.DEF]:0,[a.DEF_P]:0,[a.HP]:.75,[a.HP_P]:.75,[a.SPD]:1,[a.CR]:1,[a.CD]:1,[a.EHR]:0,[a.RES]:0,[a.BE]:0,[a.ERR]:0,[a.OHB]:0,[a.Physical_DMG]:0,[a.Fire_DMG]:0,[a.Ice_DMG]:0,[a.Lightning_DMG]:0,[a.Wind_DMG]:0,[a.Quantum_DMG]:1,[a.Imaginary_DMG]:0},parts:{[b.Body]:[a.CD,a.CR,a.HP_P],[b.Feet]:[a.SPD,a.HP_P],[b.PlanarSphere]:[a.Quantum_DMG,a.HP_P],[b.LinkRope]:[a.HP_P,a.ERR]},presets:[oe.VALOROUS_SET],sortOption:T.FUA,hiddenColumns:[],simulation:{parts:{[b.Body]:[a.CR,a.CD,a.HP_P],[b.Feet]:[a.HP_P,a.SPD],[b.PlanarSphere]:[a.HP_P,a.Quantum_DMG],[b.LinkRope]:[a.HP_P]},substats:[a.CD,a.CR,a.HP_P,a.HP,a.ATK_P],comboAbilities:[Ie,Te,ve,Qe,ve,ve],comboDot:0,comboBreak:0,errRopeEidolon:0,deprioritizeBuffs:!0,relicSets:[[R.GeniusOfBrilliantStars,R.GeniusOfBrilliantStars],[R.LongevousDisciple,R.LongevousDisciple],[R.PoetOfMourningCollapse,R.PoetOfMourningCollapse],...Be],ornamentSets:[R.BoneCollectionsSereneDemesne,...Vt,...we,...z0],teammates:[{characterId:"1401",lightCone:"23037",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1103",lightCone:"20013",characterEidolon:6,lightConeSuperimposition:5},{characterId:"1222",lightCone:"23032",characterEidolon:0,lightConeSuperimposition:1}]}},1404:{stats:{[a.ATK]:0,[a.ATK_P]:0,[a.DEF]:0,[a.DEF_P]:0,[a.HP]:1,[a.HP_P]:1,[a.SPD]:1,[a.CR]:1,[a.CD]:1,[a.EHR]:0,[a.RES]:0,[a.BE]:0,[a.ERR]:0,[a.OHB]:0,[a.Physical_DMG]:0,[a.Fire_DMG]:0,[a.Ice_DMG]:0,[a.Lightning_DMG]:0,[a.Wind_DMG]:0,[a.Quantum_DMG]:0,[a.Imaginary_DMG]:1},parts:{[b.Body]:[a.CD,a.CR,a.HP_P],[b.Feet]:[a.SPD,a.HP_P],[b.PlanarSphere]:[a.Imaginary_DMG,a.HP_P],[b.LinkRope]:[a.HP_P]},presets:[oe.WASTELANDER_SET],sortOption:T.SKILL,hiddenColumns:[],simulation:{parts:{[b.Body]:[a.CD,a.HP_P],[b.Feet]:[a.HP_P,a.SPD],[b.PlanarSphere]:[a.HP_P,a.Imaginary_DMG],[b.LinkRope]:[a.HP_P]},substats:[a.CD,a.CR,a.HP_P,a.HP],comboAbilities:[Ie,ne,Te,ne],comboDot:0,comboBreak:0,relicSets:[[R.ScholarLostInErudition,R.ScholarLostInErudition],...Be],ornamentSets:[R.BoneCollectionsSereneDemesne,R.RutilantArena,...we],teammates:[{characterId:"1313",lightCone:"23034",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1403",lightCone:"23038",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1203",lightCone:"23008",characterEidolon:0,lightConeSuperimposition:1}]}},1405:{stats:{[a.ATK]:.75,[a.ATK_P]:.75,[a.DEF]:0,[a.DEF_P]:0,[a.HP]:0,[a.HP_P]:0,[a.SPD]:1,[a.CR]:1,[a.CD]:1,[a.EHR]:0,[a.RES]:0,[a.BE]:0,[a.ERR]:0,[a.OHB]:0,[a.Physical_DMG]:0,[a.Fire_DMG]:0,[a.Ice_DMG]:0,[a.Lightning_DMG]:0,[a.Wind_DMG]:1,[a.Quantum_DMG]:0,[a.Imaginary_DMG]:0},parts:{[b.Body]:[a.CR,a.CD,a.ATK_P],[b.Feet]:[a.ATK_P,a.SPD],[b.PlanarSphere]:[a.ATK_P,a.Wind_DMG],[b.LinkRope]:[a.ATK_P]},presets:[oe.fnPioneerSet(4),oe.GENIUS_SET],sortOption:T.SKILL,hiddenColumns:[T.FUA,T.DOT],simulation:{parts:{[b.Body]:[a.CR,a.CD,a.ATK_P],[b.Feet]:[a.ATK_P,a.SPD],[b.PlanarSphere]:[a.ATK_P,a.Wind_DMG],[b.LinkRope]:[a.ATK_P]},substats:[a.CD,a.CR,a.ATK_P,a.ATK],comboAbilities:[Ie,Te,ne,ne,ne,ne],comboDot:0,comboBreak:0,errRopeEidolon:0,deprioritizeBuffs:!1,relicSets:[[R.GeniusOfBrilliantStars,R.GeniusOfBrilliantStars],[R.PioneerDiverOfDeadWaters,R.PioneerDiverOfDeadWaters],[R.ScholarLostInErudition,R.ScholarLostInErudition],...Be],ornamentSets:[R.RutilantArena,R.FirmamentFrontlineGlamoth,R.IzumoGenseiAndTakamaDivineRealm,R.SpaceSealingStation,R.FirmamentFrontlineGlamoth,...we],teammates:[{characterId:"1313",lightCone:"23034",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1309",lightCone:"23026",characterEidolon:0,lightConeSuperimposition:1},{characterId:"1217",lightCone:"23017",characterEidolon:0,lightConeSuperimposition:1}]}},1407:{stats:{[a.ATK]:0,[a.ATK_P]:0,[a.DEF]:0,[a.DEF_P]:0,[a.HP]:1,[a.HP_P]:1,[a.SPD]:0,[a.CR]:1,[a.CD]:1,[a.EHR]:0,[a.RES]:0,[a.BE]:0,[a.ERR]:0,[a.OHB]:0,[a.Physical_DMG]:0,[a.Fire_DMG]:0,[a.Ice_DMG]:0,[a.Lightning_DMG]:0,[a.Wind_DMG]:0,[a.Quantum_DMG]:1,[a.Imaginary_DMG]:0},parts:{[b.Body]:[a.CR,a.CD,a.HP_P],[b.Feet]:[a.HP_P],[b.PlanarSphere]:[a.HP_P,a.Quantum_DMG],[b.LinkRope]:[a.HP_P]},presets:[oe.BANANA_SET],sortOption:T.MEMO_SKILL,addedColumns:[T.MEMO_SKILL,T.MEMO_TALENT],hiddenColumns:[T.FUA,T.DOT,T.ULT],simulation:{parts:{[b.Body]:[a.CR,a.CD,a.HP_P],[b.Feet]:[a.HP_P,a.SPD],[b.PlanarSphere]:[a.HP_P,a.Quantum_DMG],[b.LinkRope]:[a.HP_P]},substats:[a.CD,a.CR,a.HP_P,a.HP],comboAbilities:[Ie,ne,ne,Te,_n,_n,_n,_n,_5],comboDot:0,comboBreak:0,relicSets:[[R.PoetOfMourningCollapse,R.PoetOfMourningCollapse],...Be],ornamentSets:[R.BoneCollectionsSereneDemesne,...we],teammates:[{characterId:"1403",lightCone:"23038",characterEidolon:0,lightConeSuperimposition:1},{characterId:"8008",lightCone:"21050",characterEidolon:6,lightConeSuperimposition:5},{characterId:"1222",lightCone:"23032",characterEidolon:0,lightConeSuperimposition:1}]}}}}window.WorkerPool=Aa;window.Constants=m;window.DataParser=Mm;window.DB=B;window.Assets=k;window.RelicAugmenter=Xn;window.StatCalculator=yt;window.Gradient=be;window.SaveState=Ee;window.RelicFilters=qe;window.Renderer=K;window.Message=J;window.Hint=ut;window.CharacterConverter=xl;window.RelicScorer=dt;window.BufferPacker=bs;window.RelicRollFixer=Fi;window.colorTheme=wr.BLUE;Mm.initialize();Ee.load(!1);Ud(!1);const O5=({error:e})=>i.jsxs(Ce,{children:["Something went wrong: ",e.message]});document.addEventListener("DOMContentLoaded",function(){const e=Ch.createRoot(document.getElementById("root"));Th(document.body,{}),e.render(i.jsx(tl,{fallbackRender:O5,children:i.jsx(M5,{})}))});export{kt as A,Rn as B,Sa as C,Po as D,ec as E,ga as F,z5 as G,Zn as H,f as K,W5 as N,Oi as P,v as S,C as T,xt as U,Q5 as a,j5 as b,We as c,jt as d,n1 as e,ss as f,Y5 as g,ea as h,a as i,q1 as j,ef as k,i1 as l,X5 as m,J5 as n,jh as o,zn as p,Ss as q,ba as r,V5 as s,$5 as t,Bd as u,q5 as v,ki as w,Z5 as x,N5 as y,U5 as z};
