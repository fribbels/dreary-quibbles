var bo=Object.defineProperty;var To=(t,e,n)=>e in t?bo(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var U=(t,e,n)=>To(t,typeof e!="symbol"?e+"":e,n);const yo={1001:()=>import("./March7th-CUDkoBta.js"),1002:()=>import("./DanHeng-BsggHMdw.js"),1003:()=>import("./Himeko-C5WJ6lTs.js"),1004:()=>import("./Welt-DZudNwE1.js"),1005:()=>import("./Kafka-DJcVTPty.js"),1006:()=>import("./SilverWolf-DoBGQ5EH.js"),1008:()=>import("./Arlan-DBbKY8fC.js"),1009:()=>import("./Asta-DPzQO8OM.js"),1013:()=>import("./Herta-CuB_ANIK.js"),1101:()=>import("./Bronya-B82WInxs.js"),1102:()=>import("./Seele-DTrtRvsL.js"),1103:()=>import("./Serval-Caj8jt6L.js"),1104:()=>import("./Gepard-WEBgF0Xo.js"),1105:()=>import("./Natasha-C65EW8wL.js"),1106:()=>import("./Pela-CMhoacCB.js"),1107:()=>import("./Clara-Da3yDpFW.js"),1108:()=>import("./Sampo-CyxUcp1f.js"),1109:()=>import("./Hook-BNqT3K2D.js"),1110:()=>import("./Lynx-JcdGUbSm.js"),1111:()=>import("./Luka-BiIxd2Jq.js"),1112:()=>import("./Topaz-u8VhybQ9.js"),1201:()=>import("./Qingque-DdN9uGxq.js"),1202:()=>import("./Tingyun-BwaNrUOV.js"),1203:()=>import("./Luocha-Bo1lBvM7.js"),1204:()=>import("./JingYuan-DxOHFO2d.js"),1205:()=>import("./Blade-DqeewR37.js"),1206:()=>import("./Sushang-RncxHezI.js"),1207:()=>import("./Yukong-CXHup_To.js"),1208:()=>import("./FuXuan-CvXt_V-O.js"),1209:()=>import("./Yanqing-Bq2qYc3E.js"),1210:()=>import("./Guinaifen-DCvRV_KA.js"),1211:()=>import("./Bailu-CBPGxZQ1.js"),1212:()=>import("./Jingliu-D1LAdW8n.js"),1213:()=>import("./ImbibitorLunae-C0XzoNjk.js"),1214:()=>import("./Xueyi-CZndkk9k.js"),1215:()=>import("./Hanya-BMUf4Umo.js"),1217:()=>import("./Huohuo-C_437pij.js"),1218:()=>import("./Jiaoqiu-BX7dIcbE.js"),1220:()=>import("./Feixiao-DKxkzh0l.js"),1221:()=>import("./Yunli-UUX4osUg.js"),1222:()=>import("./Lingsha-Dk_vQ7rQ.js"),1223:()=>import("./Moze-CGgUeOyh.js"),1224:()=>import("./March7thImaginary-D9k1TS3n.js"),1225:()=>import("./Fugue-4Haclm2l.js"),1301:()=>import("./Gallagher-BAM4_pAo.js"),1302:()=>import("./Argenti-AVyQv6Qx.js"),1303:()=>import("./RuanMei-BF706XKb.js"),1304:()=>import("./Aventurine-BM9zdaX9.js"),1305:()=>import("./DrRatio-C49ia7a3.js"),1306:()=>import("./Sparkle-CWtQ9CWb.js"),1307:()=>import("./BlackSwan-DcTjhAem.js"),1308:()=>import("./Acheron-C_rn4aSY.js"),1309:()=>import("./Robin-DRbW98gW.js"),1310:()=>import("./Firefly-DEjubnzB.js"),1312:()=>import("./Misha-DKoEWwmg.js"),1313:()=>import("./Sunday-BZ8O7UJZ.js"),1314:()=>import("./Jade-Cli7Apnc.js"),1315:()=>import("./Boothill-QjNXR-_P.js"),1317:()=>import("./Rappa-BTxdODaK.js"),1401:()=>import("./TheHerta-UVeLi6P_.js"),1402:()=>import("./Aglaea-PQ9rhrDM.js"),1403:()=>import("./Tribbie-DV_Zo3Wt.js"),1404:()=>import("./Mydei-363ESws9.js"),1405:()=>import("./Anaxa-JyJEifjc.js"),1407:()=>import("./Castorice-kEXmp5bd.js"),8001:()=>import("./TrailblazerDestruction-DbHqDChS.js"),8002:()=>import("./TrailblazerDestruction-DbHqDChS.js"),8003:()=>import("./TrailblazerPreservation-CSwiyKI_.js"),8004:()=>import("./TrailblazerPreservation-CSwiyKI_.js"),8005:()=>import("./TrailblazerHarmony-D9kqqdSU.js"),8006:()=>import("./TrailblazerHarmony-D9kqqdSU.js"),8007:()=>import("./TrailblazerRemembrance-BZUvmKD7.js"),8008:()=>import("./TrailblazerRemembrance-BZUvmKD7.js")},Rt=new Map;async function Oo(t){const e=t.map(async n=>{if(!Rt.has(n)){const i=yo[n];if(!i)throw new Error(`No character found for ID: ${n}`);const o=await i();return Rt.set(n,o.default),o.default}return Promise.resolve(Rt.get(n))});return await Promise.all(e),t.map(n=>Rt.get(n))}const oe={get(t,e=!1){const{characterId:n,characterEidolon:i}=t;if(!Rt.has(n))throw new Error(`Character ${n} not preloaded.`);return Rt.get(n)(i,e)}},ie="3.2v5",p={ATK_P:"ATK%",ATK:"ATK",BE:"Break Effect",CD:"CRIT DMG",CR:"CRIT Rate",DEF_P:"DEF%",DEF:"DEF",EHR:"Effect Hit Rate",ERR:"Energy Regeneration Rate",Fire_DMG:"Fire DMG Boost",HP_P:"HP%",HP:"HP",Ice_DMG:"Ice DMG Boost",Imaginary_DMG:"Imaginary DMG Boost",Lightning_DMG:"Lightning DMG Boost",OHB:"Outgoing Healing Boost",Physical_DMG:"Physical DMG Boost",Quantum_DMG:"Quantum DMG Boost",RES:"Effect RES",SPD_P:"SPD%",SPD:"SPD",Wind_DMG:"Wind DMG Boost"},Lo=[p.HP_P,p.ATK_P,p.DEF_P,p.HP,p.ATK,p.SPD,p.CR,p.CD,p.EHR,p.BE,p.OHB,p.ERR,p.Physical_DMG,p.Fire_DMG,p.Ice_DMG,p.Lightning_DMG,p.Wind_DMG,p.Quantum_DMG,p.Imaginary_DMG],Ao={[p.HP_P]:{5:{base:6.912,increment:2.4192},4:{base:5.5296,increment:1.9354},3:{base:4.1472,increment:1.4515},2:{base:2.7648,increment:.9677}},[p.ATK_P]:{5:{base:6.912,increment:2.4192},4:{base:5.5296,increment:1.9354},3:{base:4.1472,increment:1.4515},2:{base:2.7648,increment:.9677}},[p.DEF_P]:{5:{base:8.64,increment:3.024},4:{base:6.912,increment:2.4192},3:{base:5.184,increment:1.8144},2:{base:3.456,increment:1.2096}},[p.HP]:{5:{base:112.896,increment:39.5136},4:{base:90.3168,increment:31.61088},3:{base:67.7376,increment:23.70816},2:{base:45.1584,increment:15.80544}},[p.ATK]:{5:{base:56.448,increment:19.7568},4:{base:45.1584,increment:15.80544},3:{base:33.8688,increment:11.85408},2:{base:22.5792,increment:7.90272}},[p.SPD]:{5:{base:4.032,increment:1.4},4:{base:3.226,increment:1.1},3:{base:2.419,increment:1},2:{base:1.613,increment:1}},[p.CR]:{5:{base:5.184,increment:1.8144},4:{base:4.1472,increment:1.4515},3:{base:3.1104,increment:1.0886},2:{base:2.0736,increment:.7258}},[p.CD]:{5:{base:10.368,increment:3.6288},4:{base:8.2944,increment:2.903},3:{base:6.2208,increment:2.1773},2:{base:4.1472,increment:1.4515}},[p.EHR]:{5:{base:6.912,increment:2.4192},4:{base:5.5296,increment:1.9354},3:{base:4.1472,increment:1.4515},2:{base:2.7648,increment:.9677}},[p.BE]:{5:{base:10.368,increment:3.6288},4:{base:8.2944,increment:2.903},3:{base:6.2208,increment:2.1773},2:{base:4.1472,increment:1.4515}},[p.ERR]:{5:{base:3.1104,increment:1.0886},4:{base:2.4883,increment:.8709},3:{base:1.8662,increment:.6532},2:{base:1.2442,increment:.4355}},[p.OHB]:{5:{base:5.5296,increment:1.9354},4:{base:4.4237,increment:1.5483},3:{base:3.3178,increment:1.1612},2:{base:2.2118,increment:.7741}},[p.Physical_DMG]:{5:{base:6.2208,increment:2.1773},4:{base:4.9766,increment:1.7418},3:{base:3.7325,increment:1.3064},2:{base:2.4883,increment:.8709}},[p.Fire_DMG]:{5:{base:6.2208,increment:2.1773},4:{base:4.9766,increment:1.7418},3:{base:3.7325,increment:1.3064},2:{base:2.4883,increment:.8709}},[p.Ice_DMG]:{5:{base:6.2208,increment:2.1773},4:{base:4.9766,increment:1.7418},3:{base:3.7325,increment:1.3064},2:{base:2.4883,increment:.8709}},[p.Lightning_DMG]:{5:{base:6.2208,increment:2.1773},4:{base:4.9766,increment:1.7418},3:{base:3.7325,increment:1.3064},2:{base:2.4883,increment:.8709}},[p.Wind_DMG]:{5:{base:6.2208,increment:2.1773},4:{base:4.9766,increment:1.7418},3:{base:3.7325,increment:1.3064},2:{base:2.4883,increment:.8709}},[p.Quantum_DMG]:{5:{base:6.2208,increment:2.1773},4:{base:4.9766,increment:1.7418},3:{base:3.7325,increment:1.3064},2:{base:2.4883,increment:.8709}},[p.Imaginary_DMG]:{5:{base:6.2208,increment:2.1773},4:{base:4.9766,increment:1.7418},3:{base:3.7325,increment:1.3064},2:{base:2.4883,increment:.8709}}},Ro=[p.HP_P,p.ATK_P,p.DEF_P,p.HP,p.ATK,p.DEF,p.SPD,p.CR,p.CD,p.EHR,p.RES,p.BE],Mo={[p.HP_P]:"HP %",[p.ATK_P]:"ATK %",[p.DEF_P]:"DEF %",[p.SPD_P]:"SPD %",[p.HP]:"HP",[p.ATK]:"ATK",[p.DEF]:"DEF",[p.SPD]:"SPD",[p.CR]:"CRIT Rate",[p.CD]:"CRIT DMG",[p.EHR]:"Effect HIT",[p.RES]:"Effect RES",[p.BE]:"Break Effect",[p.ERR]:"Energy Regen",[p.OHB]:"Healing Boost",[p.Physical_DMG]:"Physical DMG",[p.Fire_DMG]:"Fire DMG",[p.Ice_DMG]:"Ice DMG",[p.Lightning_DMG]:"Lightning DMG",[p.Wind_DMG]:"Wind DMG",[p.Quantum_DMG]:"Quantum DMG",[p.Imaginary_DMG]:"Imaginary DMG"},Z={Head:"Head",Hands:"Hands",Body:"Body",Feet:"Feet",PlanarSphere:"PlanarSphere",LinkRope:"LinkRope"},Po={[Z.Head]:"Head",[Z.Hands]:"Hands",[Z.Body]:"Body",[Z.Feet]:"Feet",[Z.PlanarSphere]:"Sphere",[Z.LinkRope]:"Rope"},Io={[Z.Head]:[p.HP],[Z.Hands]:[p.ATK],[Z.Body]:[p.HP_P,p.ATK_P,p.DEF_P,p.CR,p.CD,p.OHB,p.EHR],[Z.Feet]:[p.HP_P,p.ATK_P,p.DEF_P,p.SPD],[Z.PlanarSphere]:[p.HP_P,p.ATK_P,p.DEF_P,p.Physical_DMG,p.Fire_DMG,p.Ice_DMG,p.Lightning_DMG,p.Wind_DMG,p.Quantum_DMG,p.Imaginary_DMG],[Z.LinkRope]:[p.HP_P,p.ATK_P,p.DEF_P,p.BE,p.ERR]},Ht={PasserbyOfWanderingCloud:"Passerby of Wandering Cloud",MusketeerOfWildWheat:"Musketeer of Wild Wheat",KnightOfPurityPalace:"Knight of Purity Palace",HunterOfGlacialForest:"Hunter of Glacial Forest",ChampionOfStreetwiseBoxing:"Champion of Streetwise Boxing",GuardOfWutheringSnow:"Guard of Wuthering Snow",FiresmithOfLavaForging:"Firesmith of Lava-Forging",GeniusOfBrilliantStars:"Genius of Brilliant Stars",BandOfSizzlingThunder:"Band of Sizzling Thunder",EagleOfTwilightLine:"Eagle of Twilight Line",ThiefOfShootingMeteor:"Thief of Shooting Meteor",WastelanderOfBanditryDesert:"Wastelander of Banditry Desert",LongevousDisciple:"Longevous Disciple",MessengerTraversingHackerspace:"Messenger Traversing Hackerspace",TheAshblazingGrandDuke:"The Ashblazing Grand Duke",PrisonerInDeepConfinement:"Prisoner in Deep Confinement",PioneerDiverOfDeadWaters:"Pioneer Diver of Dead Waters",WatchmakerMasterOfDreamMachinations:"Watchmaker, Master of Dream Machinations",IronCavalryAgainstTheScourge:"Iron Cavalry Against the Scourge",TheWindSoaringValorous:"The Wind-Soaring Valorous",SacerdosRelivedOrdeal:"Sacerdos' Relived Ordeal",ScholarLostInErudition:"Scholar Lost in Erudition",HeroOfTriumphantSong:"Hero of Triumphant Song",PoetOfMourningCollapse:"Poet of Mourning Collapse"},Kt={SpaceSealingStation:"Space Sealing Station",FleetOfTheAgeless:"Fleet of the Ageless",PanCosmicCommercialEnterprise:"Pan-Cosmic Commercial Enterprise",BelobogOfTheArchitects:"Belobog of the Architects",CelestialDifferentiator:"Celestial Differentiator",InertSalsotto:"Inert Salsotto",TaliaKingdomOfBanditry:"Talia: Kingdom of Banditry",SprightlyVonwacq:"Sprightly Vonwacq",RutilantArena:"Rutilant Arena",BrokenKeel:"Broken Keel",FirmamentFrontlineGlamoth:"Firmament Frontline: Glamoth",PenaconyLandOfTheDreams:"Penacony, Land of the Dreams",SigoniaTheUnclaimedDesolation:"Sigonia, the Unclaimed Desolation",IzumoGenseiAndTakamaDivineRealm:"Izumo Gensei and Takama Divine Realm",DuranDynastyOfRunningWolves:"Duran, Dynasty of Running Wolves",ForgeOfTheKalpagniLantern:"Forge of the Kalpagni Lantern",LushakaTheSunkenSeas:"Lushaka, the Sunken Seas",TheWondrousBananAmusementPark:"The Wondrous BananAmusement Park",BoneCollectionsSereneDemesne:"Bone Collection's Serene Demesne",GiantTreeOfRaptBrooding:"Giant Tree of Rapt Brooding"},Kn={...Ht,...Kt},Pe=Object.values(Ht),Ie=Object.values(Kt),ae={};for(let t=0;t<Ie.length;t++)ae[Ie[t]]=t;const Mt={};for(let t=0;t<Pe.length;t++)Mt[Pe[t]]=t;Object.values(Ht).length;Object.values(Kt).length;const Kl={Abundance:"Abundance",Destruction:"Destruction",Erudition:"Erudition",Harmony:"Harmony",Hunt:"Hunt",Nihility:"Nihility",Preservation:"Preservation",Remembrance:"Remembrance"},Vl={Physical:"Physical",Quantum:"Quantum",Imaginary:"Imaginary",Ice:"Ice",Wind:"Wind",Fire:"Fire",Lightning:"Lightning"},gt={Physical:"PHYSICAL_RES_PEN",Fire:"FIRE_RES_PEN",Ice:"ICE_RES_PEN",Lightning:"LIGHTNING_RES_PEN",Wind:"WIND_RES_PEN",Quantum:"QUANTUM_RES_PEN",Imaginary:"IMAGINARY_RES_PEN"},ve={Sets:Kn,Parts:Z,Stats:p,MainStats:Lo,MainStatsValues:Ao,SubStats:Ro,SetsOrnaments:Kt,SetsRelics:Ht,SetsRelicsNames:Pe,SetsOrnamentsNames:Ie,StatsToReadable:Mo,PartsToReadable:Po,PartsMainStats:Io,RelicSetToIndex:Mt,OrnamentSetToIndex:ae,MAX_INT:2147483647,THREAD_BUFFER_LENGTH:15e4},nt={SET:0,ABILITY:1},Q={SINGLE:0,CONTINUOUS:1},vo=Object.fromEntries(Object.entries(Kn).map(([t,e])=>[t,{id:t,label:e,buffType:"SETS",ability:"SETS"}])),h={character(t){function e(n){return{id:t,label:`${t}_${n}`,ability:n,buffType:"CHARACTER"}}return{SOURCE_BASIC:e("Basic"),SOURCE_SKILL:e("Skill"),SOURCE_ULT:e("Ult"),SOURCE_TALENT:e("Talent"),SOURCE_TECHNIQUE:e("Technique"),SOURCE_TRACE:e("Trace"),SOURCE_MEMO:e("Memo"),SOURCE_E1:e("E1"),SOURCE_E2:e("E2"),SOURCE_E4:e("E4"),SOURCE_E6:e("E6")}},lightCone(t){return{SOURCE_LC:{id:t,label:`${t}_LC`,ability:"LC",buffType:"LIGHTCONE"}}},NONE:{id:"NONE",label:"NONE",buffType:"NONE",ability:"NONE"},...vo},xo={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){console&&console[t]&&console[t].apply(console,e)}};class se{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,n)}init(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=n.prefix||"i18next:",this.logger=e||xo,this.options=n,this.debug=n.debug}log(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return this.forward(n,"log","",!0)}warn(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return this.forward(n,"warn","",!0)}error(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return this.forward(n,"error","")}deprecate(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}forward(e,n,i,o){return o&&!this.debug?null:(typeof e[0]=="string"&&(e[0]=`${i}${this.prefix} ${e[0]}`),this.logger[n](e))}create(e){return new se(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new se(this.logger,e)}}var st=new se;class me{constructor(){this.observers={}}on(e,n){return e.split(" ").forEach(i=>{this.observers[i]||(this.observers[i]=new Map);const o=this.observers[i].get(n)||0;this.observers[i].set(n,o+1)}),this}off(e,n){if(this.observers[e]){if(!n){delete this.observers[e];return}this.observers[e].delete(n)}}emit(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(r=>{let[c,l]=r;for(let f=0;f<l;f++)c(...i)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(r=>{let[c,l]=r;for(let f=0;f<l;f++)c.apply(c,[e,...i])})}}const xt=()=>{let t,e;const n=new Promise((i,o)=>{t=i,e=o});return n.resolve=t,n.reject=e,n},an=t=>t==null?"":""+t,Go=(t,e,n)=>{t.forEach(i=>{e[i]&&(n[i]=e[i])})},ko=/###/g,sn=t=>t&&t.indexOf("###")>-1?t.replace(ko,"."):t,rn=t=>!t||typeof t=="string",kt=(t,e,n)=>{const i=typeof e!="string"?e:e.split(".");let o=0;for(;o<i.length-1;){if(rn(t))return{};const a=sn(i[o]);!t[a]&&n&&(t[a]=new n),Object.prototype.hasOwnProperty.call(t,a)?t=t[a]:t={},++o}return rn(t)?{}:{obj:t,k:sn(i[o])}},ln=(t,e,n)=>{const{obj:i,k:o}=kt(t,e,Object);if(i!==void 0||e.length===1){i[o]=n;return}let a=e[e.length-1],r=e.slice(0,e.length-1),c=kt(t,r,Object);for(;c.obj===void 0&&r.length;)a=`${r[r.length-1]}.${a}`,r=r.slice(0,r.length-1),c=kt(t,r,Object),c&&c.obj&&typeof c.obj[`${c.k}.${a}`]<"u"&&(c.obj=void 0);c.obj[`${c.k}.${a}`]=n},Fo=(t,e,n,i)=>{const{obj:o,k:a}=kt(t,e,Object);o[a]=o[a]||[],o[a].push(n)},re=(t,e)=>{const{obj:n,k:i}=kt(t,e);if(n)return n[i]},No=(t,e,n)=>{const i=re(t,n);return i!==void 0?i:re(e,n)},Vn=(t,e,n)=>{for(const i in e)i!=="__proto__"&&i!=="constructor"&&(i in t?typeof t[i]=="string"||t[i]instanceof String||typeof e[i]=="string"||e[i]instanceof String?n&&(t[i]=e[i]):Vn(t[i],e[i],n):t[i]=e[i]);return t},Bt=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var Uo={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const wo=t=>typeof t=="string"?t.replace(/[&<>"'\/]/g,e=>Uo[e]):t;class Ho{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const n=this.regExpMap.get(e);if(n!==void 0)return n;const i=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,i),this.regExpQueue.push(e),i}}const Ko=[" ",",","?","!",";"],Vo=new Ho(20),jo=(t,e,n)=>{e=e||"",n=n||"";const i=Ko.filter(r=>e.indexOf(r)<0&&n.indexOf(r)<0);if(i.length===0)return!0;const o=Vo.getRegExp(`(${i.map(r=>r==="?"?"\\?":r).join("|")})`);let a=!o.test(t);if(!a){const r=t.indexOf(n);r>0&&!o.test(t.substring(0,r))&&(a=!0)}return a},xe=function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!t)return;if(t[e])return t[e];const i=e.split(n);let o=t;for(let a=0;a<i.length;){if(!o||typeof o!="object")return;let r,c="";for(let l=a;l<i.length;++l)if(l!==a&&(c+=n),c+=i[l],r=o[c],r!==void 0){if(["string","number","boolean"].indexOf(typeof r)>-1&&l<i.length-1)continue;a+=l-a+1;break}o=r}return o},le=t=>t&&t.indexOf("_")>0?t.replace("_","-"):t;class cn extends me{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const n=this.options.ns.indexOf(e);n>-1&&this.options.ns.splice(n,1)}getResource(e,n,i){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const a=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator,r=o.ignoreJSONStructure!==void 0?o.ignoreJSONStructure:this.options.ignoreJSONStructure;let c;e.indexOf(".")>-1?c=e.split("."):(c=[e,n],i&&(Array.isArray(i)?c.push(...i):typeof i=="string"&&a?c.push(...i.split(a)):c.push(i)));const l=re(this.data,c);return!l&&!n&&!i&&e.indexOf(".")>-1&&(e=c[0],n=c[1],i=c.slice(2).join(".")),l||!r||typeof i!="string"?l:xe(this.data&&this.data[e]&&this.data[e][n],i,a)}addResource(e,n,i,o){let a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const r=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator;let c=[e,n];i&&(c=c.concat(r?i.split(r):i)),e.indexOf(".")>-1&&(c=e.split("."),o=n,n=c[1]),this.addNamespaces(n),ln(this.data,c,o),a.silent||this.emit("added",e,n,i,o)}addResources(e,n,i){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const a in i)(typeof i[a]=="string"||Array.isArray(i[a]))&&this.addResource(e,n,a,i[a],{silent:!0});o.silent||this.emit("added",e,n,i)}addResourceBundle(e,n,i,o,a){let r=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},c=[e,n];e.indexOf(".")>-1&&(c=e.split("."),o=i,i=n,n=c[1]),this.addNamespaces(n);let l=re(this.data,c)||{};r.skipCopy||(i=JSON.parse(JSON.stringify(i))),o?Vn(l,i,a):l={...l,...i},ln(this.data,c,l),r.silent||this.emit("added",e,n,i)}removeResourceBundle(e,n){this.hasResourceBundle(e,n)&&delete this.data[e][n],this.removeNamespaces(n),this.emit("removed",e,n)}hasResourceBundle(e,n){return this.getResource(e,n)!==void 0}getResourceBundle(e,n){return n||(n=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(e,n)}:this.getResource(e,n)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const n=this.getDataByLanguage(e);return!!(n&&Object.keys(n)||[]).find(o=>n[o]&&Object.keys(n[o]).length>0)}toJSON(){return this.data}}var jn={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,n,i,o){return t.forEach(a=>{this.processors[a]&&(e=this.processors[a].process(e,n,i,o))}),e}};const un={};class ce extends me{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Go(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=st.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const i=this.resolve(e,n);return i&&i.res!==void 0}extractFromKey(e,n){let i=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;i===void 0&&(i=":");const o=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let a=n.ns||this.options.defaultNS||[];const r=i&&e.indexOf(i)>-1,c=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!jo(e,i,o);if(r&&!c){const l=e.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:e,namespaces:a};const f=e.split(i);(i!==o||i===o&&this.options.ns.indexOf(f[0])>-1)&&(a=f.shift()),e=f.join(o)}return typeof a=="string"&&(a=[a]),{key:e,namespaces:a}}translate(e,n,i){if(typeof n!="object"&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),typeof n=="object"&&(n={...n}),n||(n={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const o=n.returnDetails!==void 0?n.returnDetails:this.options.returnDetails,a=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,{key:r,namespaces:c}=this.extractFromKey(e[e.length-1],n),l=c[c.length-1],f=n.lng||this.language,u=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(f&&f.toLowerCase()==="cimode"){if(u){const B=n.nsSeparator||this.options.nsSeparator;return o?{res:`${l}${B}${r}`,usedKey:r,exactUsedKey:r,usedLng:f,usedNS:l,usedParams:this.getUsedParamsDetails(n)}:`${l}${B}${r}`}return o?{res:r,usedKey:r,exactUsedKey:r,usedLng:f,usedNS:l,usedParams:this.getUsedParamsDetails(n)}:r}const d=this.resolve(e,n);let m=d&&d.res;const E=d&&d.usedKey||r,C=d&&d.exactUsedKey||r,D=Object.prototype.toString.apply(m),S=["[object Number]","[object Function]","[object RegExp]"],I=n.joinArrays!==void 0?n.joinArrays:this.options.joinArrays,y=!this.i18nFormat||this.i18nFormat.handleAsObject;if(y&&m&&(typeof m!="string"&&typeof m!="boolean"&&typeof m!="number")&&S.indexOf(D)<0&&!(typeof I=="string"&&Array.isArray(m))){if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const B=this.options.returnedObjectHandler?this.options.returnedObjectHandler(E,m,{...n,ns:c}):`key '${r} (${this.language})' returned an object instead of string.`;return o?(d.res=B,d.usedParams=this.getUsedParamsDetails(n),d):B}if(a){const B=Array.isArray(m),O=B?[]:{},N=B?C:E;for(const R in m)if(Object.prototype.hasOwnProperty.call(m,R)){const L=`${N}${a}${R}`;O[R]=this.translate(L,{...n,joinArrays:!1,ns:c}),O[R]===L&&(O[R]=m[R])}m=O}}else if(y&&typeof I=="string"&&Array.isArray(m))m=m.join(I),m&&(m=this.extendTranslation(m,e,n,i));else{let B=!1,O=!1;const N=n.count!==void 0&&typeof n.count!="string",R=ce.hasDefaultValue(n),L=N?this.pluralResolver.getSuffix(f,n.count,n):"",St=n.ordinal&&N?this.pluralResolver.getSuffix(f,n.count,{ordinal:!1}):"",ct=N&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),k=ct&&n[`defaultValue${this.options.pluralSeparator}zero`]||n[`defaultValue${L}`]||n[`defaultValue${St}`]||n.defaultValue;!this.isValidLookup(m)&&R&&(B=!0,m=k),this.isValidLookup(m)||(O=!0,m=r);const ut=(n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&O?void 0:m,X=R&&k!==m&&this.options.updateMissing;if(O||B||X){if(this.logger.log(X?"updateKey":"missingKey",f,l,r,X?k:m),a){const H=this.resolve(r,{...n,keySeparator:!1});H&&H.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let q=[];const it=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if(this.options.saveMissingTo==="fallback"&&it&&it[0])for(let H=0;H<it.length;H++)q.push(it[H]);else this.options.saveMissingTo==="all"?q=this.languageUtils.toResolveHierarchy(n.lng||this.language):q.push(n.lng||this.language);const rt=(H,P,x)=>{const K=R&&x!==m?x:ut;this.options.missingKeyHandler?this.options.missingKeyHandler(H,l,P,K,X,n):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(H,l,P,K,X,n),this.emit("missingKey",H,l,P,m)};this.options.saveMissing&&(this.options.saveMissingPlurals&&N?q.forEach(H=>{const P=this.pluralResolver.getSuffixes(H,n);ct&&n[`defaultValue${this.options.pluralSeparator}zero`]&&P.indexOf(`${this.options.pluralSeparator}zero`)<0&&P.push(`${this.options.pluralSeparator}zero`),P.forEach(x=>{rt([H],r+x,n[`defaultValue${x}`]||k)})}):rt(q,r,k))}m=this.extendTranslation(m,e,n,d,i),O&&m===r&&this.options.appendNamespaceToMissingKey&&(m=`${l}:${r}`),(O||B)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?m=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}:${r}`:r,B?m:void 0):m=this.options.parseMissingKeyHandler(m))}return o?(d.res=m,d.usedParams=this.getUsedParamsDetails(n),d):m}extendTranslation(e,n,i,o,a){var r=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...i},i.lng||this.language||o.usedLng,o.usedNS,o.usedKey,{resolved:o});else if(!i.skipInterpolation){i.interpolation&&this.interpolator.init({...i,interpolation:{...this.options.interpolation,...i.interpolation}});const f=typeof e=="string"&&(i&&i.interpolation&&i.interpolation.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let u;if(f){const m=e.match(this.interpolator.nestingRegexp);u=m&&m.length}let d=i.replace&&typeof i.replace!="string"?i.replace:i;if(this.options.interpolation.defaultVariables&&(d={...this.options.interpolation.defaultVariables,...d}),e=this.interpolator.interpolate(e,d,i.lng||this.language||o.usedLng,i),f){const m=e.match(this.interpolator.nestingRegexp),E=m&&m.length;u<E&&(i.nest=!1)}!i.lng&&this.options.compatibilityAPI!=="v1"&&o&&o.res&&(i.lng=this.language||o.usedLng),i.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var m=arguments.length,E=new Array(m),C=0;C<m;C++)E[C]=arguments[C];return a&&a[0]===E[0]&&!i.context?(r.logger.warn(`It seems you are nesting recursively key: ${E[0]} in key: ${n[0]}`),null):r.translate(...E,n)},i)),i.interpolation&&this.interpolator.reset()}const c=i.postProcess||this.options.postProcess,l=typeof c=="string"?[c]:c;return e!=null&&l&&l.length&&i.applyPostProcessor!==!1&&(e=jn.handle(l,e,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...o,usedParams:this.getUsedParamsDetails(i)},...i}:i,this)),e}resolve(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i,o,a,r,c;return typeof e=="string"&&(e=[e]),e.forEach(l=>{if(this.isValidLookup(i))return;const f=this.extractFromKey(l,n),u=f.key;o=u;let d=f.namespaces;this.options.fallbackNS&&(d=d.concat(this.options.fallbackNS));const m=n.count!==void 0&&typeof n.count!="string",E=m&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),C=n.context!==void 0&&(typeof n.context=="string"||typeof n.context=="number")&&n.context!=="",D=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);d.forEach(S=>{this.isValidLookup(i)||(c=S,!un[`${D[0]}-${S}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(c)&&(un[`${D[0]}-${S}`]=!0,this.logger.warn(`key "${o}" for languages "${D.join(", ")}" won't get resolved as namespace "${c}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),D.forEach(I=>{if(this.isValidLookup(i))return;r=I;const y=[u];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(y,u,I,S,n);else{let B;m&&(B=this.pluralResolver.getSuffix(I,n.count,n));const O=`${this.options.pluralSeparator}zero`,N=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(m&&(y.push(u+B),n.ordinal&&B.indexOf(N)===0&&y.push(u+B.replace(N,this.options.pluralSeparator)),E&&y.push(u+O)),C){const R=`${u}${this.options.contextSeparator}${n.context}`;y.push(R),m&&(y.push(R+B),n.ordinal&&B.indexOf(N)===0&&y.push(R+B.replace(N,this.options.pluralSeparator)),E&&y.push(R+O))}}let v;for(;v=y.pop();)this.isValidLookup(i)||(a=v,i=this.getResource(I,S,v,n))}))})}),{res:i,usedKey:o,exactUsedKey:a,usedLng:r,usedNS:c}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,n,i){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,n,i,o):this.resourceStore.getResource(e,n,i,o)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],i=e.replace&&typeof e.replace!="string";let o=i?e.replace:e;if(i&&typeof e.count<"u"&&(o.count=e.count),this.options.interpolation.defaultVariables&&(o={...this.options.interpolation.defaultVariables,...o}),!i){o={...o};for(const a of n)delete o[a]}return o}static hasDefaultValue(e){const n="defaultValue";for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&n===i.substring(0,n.length)&&e[i]!==void 0)return!0;return!1}}const De=t=>t.charAt(0).toUpperCase()+t.slice(1);class fn{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=st.create("languageUtils")}getScriptPartFromCode(e){if(e=le(e),!e||e.indexOf("-")<0)return null;const n=e.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(e){if(e=le(e),!e||e.indexOf("-")<0)return e;const n=e.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(e){if(typeof e=="string"&&e.indexOf("-")>-1){const n=["hans","hant","latn","cyrl","cans","mong","arab"];let i=e.split("-");return this.options.lowerCaseLng?i=i.map(o=>o.toLowerCase()):i.length===2?(i[0]=i[0].toLowerCase(),i[1]=i[1].toUpperCase(),n.indexOf(i[1].toLowerCase())>-1&&(i[1]=De(i[1].toLowerCase()))):i.length===3&&(i[0]=i[0].toLowerCase(),i[1].length===2&&(i[1]=i[1].toUpperCase()),i[0]!=="sgn"&&i[2].length===2&&(i[2]=i[2].toUpperCase()),n.indexOf(i[1].toLowerCase())>-1&&(i[1]=De(i[1].toLowerCase())),n.indexOf(i[2].toLowerCase())>-1&&(i[2]=De(i[2].toLowerCase()))),i.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let n;return e.forEach(i=>{if(n)return;const o=this.formatLanguageCode(i);(!this.options.supportedLngs||this.isSupportedCode(o))&&(n=o)}),!n&&this.options.supportedLngs&&e.forEach(i=>{if(n)return;const o=this.getLanguagePartFromCode(i);if(this.isSupportedCode(o))return n=o;n=this.options.supportedLngs.find(a=>{if(a===o)return a;if(!(a.indexOf("-")<0&&o.indexOf("-")<0)&&(a.indexOf("-")>0&&o.indexOf("-")<0&&a.substring(0,a.indexOf("-"))===o||a.indexOf(o)===0&&o.length>1))return a})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(e,n){if(!e)return[];if(typeof e=="function"&&(e=e(n)),typeof e=="string"&&(e=[e]),Array.isArray(e))return e;if(!n)return e.default||[];let i=e[n];return i||(i=e[this.getScriptPartFromCode(n)]),i||(i=e[this.formatLanguageCode(n)]),i||(i=e[this.getLanguagePartFromCode(n)]),i||(i=e.default),i||[]}toResolveHierarchy(e,n){const i=this.getFallbackCodes(n||this.options.fallbackLng||[],e),o=[],a=r=>{r&&(this.isSupportedCode(r)?o.push(r):this.logger.warn(`rejecting language code not found in supportedLngs: ${r}`))};return typeof e=="string"&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&a(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&a(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&a(this.getLanguagePartFromCode(e))):typeof e=="string"&&a(this.formatLanguageCode(e)),i.forEach(r=>{o.indexOf(r)<0&&a(this.formatLanguageCode(r))}),o}}let zo=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],$o={1:t=>+(t>1),2:t=>+(t!=1),3:t=>0,4:t=>t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2,5:t=>t==0?0:t==1?1:t==2?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5,6:t=>t==1?0:t>=2&&t<=4?1:2,7:t=>t==1?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2,8:t=>t==1?0:t==2?1:t!=8&&t!=11?2:3,9:t=>+(t>=2),10:t=>t==1?0:t==2?1:t<7?2:t<11?3:4,11:t=>t==1||t==11?0:t==2||t==12?1:t>2&&t<20?2:3,12:t=>+(t%10!=1||t%100==11),13:t=>+(t!==0),14:t=>t==1?0:t==2?1:t==3?2:3,15:t=>t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2,16:t=>t%10==1&&t%100!=11?0:t!==0?1:2,17:t=>t==1||t%10==1&&t%100!=11?0:1,18:t=>t==0?0:t==1?1:2,19:t=>t==1?0:t==0||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3,20:t=>t==1?0:t==0||t%100>0&&t%100<20?1:2,21:t=>t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0,22:t=>t==1?0:t==2?1:(t<0||t>10)&&t%10==0?2:3};const Wo=["v1","v2","v3"],Yo=["v4"],dn={zero:0,one:1,two:2,few:3,many:4,other:5},Jo=()=>{const t={};return zo.forEach(e=>{e.lngs.forEach(n=>{t[n]={numbers:e.nr,plurals:$o[e.fc]}})}),t};class Qo{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=n,this.logger=st.create("pluralResolver"),(!this.options.compatibilityJSON||Yo.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=Jo(),this.pluralRulesCache={}}addRule(e,n){this.rules[e]=n}clearCache(){this.pluralRulesCache={}}getRule(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{const i=le(e==="dev"?"en":e),o=n.ordinal?"ordinal":"cardinal",a=JSON.stringify({cleanedCode:i,type:o});if(a in this.pluralRulesCache)return this.pluralRulesCache[a];const r=new Intl.PluralRules(i,{type:o});return this.pluralRulesCache[a]=r,r}catch{return}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=this.getRule(e,n);return this.shouldUseIntlApi()?i&&i.resolvedOptions().pluralCategories.length>1:i&&i.numbers.length>1}getPluralFormsOfKey(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,i).map(o=>`${n}${o}`)}getSuffixes(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=this.getRule(e,n);return i?this.shouldUseIntlApi()?i.resolvedOptions().pluralCategories.sort((o,a)=>dn[o]-dn[a]).map(o=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${o}`):i.numbers.map(o=>this.getSuffix(e,o,n)):[]}getSuffix(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const o=this.getRule(e,i);return o?this.shouldUseIntlApi()?`${this.options.prepend}${i.ordinal?`ordinal${this.options.prepend}`:""}${o.select(n)}`:this.getSuffixRetroCompatible(o,n):(this.logger.warn(`no plural rule found for: ${e}`),"")}getSuffixRetroCompatible(e,n){const i=e.noAbs?e.plurals(n):e.plurals(Math.abs(n));let o=e.numbers[i];this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1&&(o===2?o="plural":o===1&&(o=""));const a=()=>this.options.prepend&&o.toString()?this.options.prepend+o.toString():o.toString();return this.options.compatibilityJSON==="v1"?o===1?"":typeof o=="number"?`_plural_${o.toString()}`:a():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1?a():this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString()}shouldUseIntlApi(){return!Wo.includes(this.options.compatibilityJSON)}}const mn=function(t,e,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,a=No(t,e,n);return!a&&o&&typeof n=="string"&&(a=xe(t,n,i),a===void 0&&(a=xe(e,n,i))),a},Se=t=>t.replace(/\$/g,"$$$$");class Zo{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=st.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(n=>n),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:n,escapeValue:i,useRawValueToEscape:o,prefix:a,prefixEscaped:r,suffix:c,suffixEscaped:l,formatSeparator:f,unescapeSuffix:u,unescapePrefix:d,nestingPrefix:m,nestingPrefixEscaped:E,nestingSuffix:C,nestingSuffixEscaped:D,nestingOptionsSeparator:S,maxReplaces:I,alwaysFormat:y}=e.interpolation;this.escape=n!==void 0?n:wo,this.escapeValue=i!==void 0?i:!0,this.useRawValueToEscape=o!==void 0?o:!1,this.prefix=a?Bt(a):r||"{{",this.suffix=c?Bt(c):l||"}}",this.formatSeparator=f||",",this.unescapePrefix=u?"":d||"-",this.unescapeSuffix=this.unescapePrefix?"":u||"",this.nestingPrefix=m?Bt(m):E||Bt("$t("),this.nestingSuffix=C?Bt(C):D||Bt(")"),this.nestingOptionsSeparator=S||",",this.maxReplaces=I||1e3,this.alwaysFormat=y!==void 0?y:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(n,i)=>n&&n.source===i?(n.lastIndex=0,n):new RegExp(i,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,n,i,o){let a,r,c;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},f=E=>{if(E.indexOf(this.formatSeparator)<0){const I=mn(n,l,E,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(I,void 0,i,{...o,...n,interpolationkey:E}):I}const C=E.split(this.formatSeparator),D=C.shift().trim(),S=C.join(this.formatSeparator).trim();return this.format(mn(n,l,D,this.options.keySeparator,this.options.ignoreJSONStructure),S,i,{...o,...n,interpolationkey:D})};this.resetRegExp();const u=o&&o.missingInterpolationHandler||this.options.missingInterpolationHandler,d=o&&o.interpolation&&o.interpolation.skipOnVariables!==void 0?o.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:E=>Se(E)},{regex:this.regexp,safeValue:E=>this.escapeValue?Se(this.escape(E)):Se(E)}].forEach(E=>{for(c=0;a=E.regex.exec(e);){const C=a[1].trim();if(r=f(C),r===void 0)if(typeof u=="function"){const S=u(e,a,o);r=typeof S=="string"?S:""}else if(o&&Object.prototype.hasOwnProperty.call(o,C))r="";else if(d){r=a[0];continue}else this.logger.warn(`missed to pass in variable ${C} for interpolating ${e}`),r="";else typeof r!="string"&&!this.useRawValueToEscape&&(r=an(r));const D=E.safeValue(r);if(e=e.replace(a[0],D),d?(E.regex.lastIndex+=r.length,E.regex.lastIndex-=a[0].length):E.regex.lastIndex=0,c++,c>=this.maxReplaces)break}}),e}nest(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o,a,r;const c=(l,f)=>{const u=this.nestingOptionsSeparator;if(l.indexOf(u)<0)return l;const d=l.split(new RegExp(`${u}[ ]*{`));let m=`{${d[1]}`;l=d[0],m=this.interpolate(m,r);const E=m.match(/'/g),C=m.match(/"/g);(E&&E.length%2===0&&!C||C.length%2!==0)&&(m=m.replace(/'/g,'"'));try{r=JSON.parse(m),f&&(r={...f,...r})}catch(D){return this.logger.warn(`failed parsing options string in nesting for key ${l}`,D),`${l}${u}${m}`}return r.defaultValue&&r.defaultValue.indexOf(this.prefix)>-1&&delete r.defaultValue,l};for(;o=this.nestingRegexp.exec(e);){let l=[];r={...i},r=r.replace&&typeof r.replace!="string"?r.replace:r,r.applyPostProcessor=!1,delete r.defaultValue;let f=!1;if(o[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(o[1])){const u=o[1].split(this.formatSeparator).map(d=>d.trim());o[1]=u.shift(),l=u,f=!0}if(a=n(c.call(this,o[1].trim(),r),r),a&&o[0]===e&&typeof a!="string")return a;typeof a!="string"&&(a=an(a)),a||(this.logger.warn(`missed to resolve ${o[1]} for nesting ${e}`),a=""),f&&(a=l.reduce((u,d)=>this.format(u,d,i.lng,{...i,interpolationkey:o[1].trim()}),a.trim())),e=e.replace(o[0],a),this.regexp.lastIndex=0}return e}}const Xo=t=>{let e=t.toLowerCase().trim();const n={};if(t.indexOf("(")>-1){const i=t.split("(");e=i[0].toLowerCase().trim();const o=i[1].substring(0,i[1].length-1);e==="currency"&&o.indexOf(":")<0?n.currency||(n.currency=o.trim()):e==="relativetime"&&o.indexOf(":")<0?n.range||(n.range=o.trim()):o.split(";").forEach(r=>{if(r){const[c,...l]=r.split(":"),f=l.join(":").trim().replace(/^'+|'+$/g,""),u=c.trim();n[u]||(n[u]=f),f==="false"&&(n[u]=!1),f==="true"&&(n[u]=!0),isNaN(f)||(n[u]=parseInt(f,10))}})}return{formatName:e,formatOptions:n}},bt=t=>{const e={};return(n,i,o)=>{let a=o;o&&o.interpolationkey&&o.formatParams&&o.formatParams[o.interpolationkey]&&o[o.interpolationkey]&&(a={...a,[o.interpolationkey]:void 0});const r=i+JSON.stringify(a);let c=e[r];return c||(c=t(le(i),o),e[r]=c),c(n)}};class qo{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=st.create("formatter"),this.options=e,this.formats={number:bt((n,i)=>{const o=new Intl.NumberFormat(n,{...i});return a=>o.format(a)}),currency:bt((n,i)=>{const o=new Intl.NumberFormat(n,{...i,style:"currency"});return a=>o.format(a)}),datetime:bt((n,i)=>{const o=new Intl.DateTimeFormat(n,{...i});return a=>o.format(a)}),relativetime:bt((n,i)=>{const o=new Intl.RelativeTimeFormat(n,{...i});return a=>o.format(a,i.range||"day")}),list:bt((n,i)=>{const o=new Intl.ListFormat(n,{...i});return a=>o.format(a)})},this.init(e)}init(e){const i=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}}).interpolation;this.formatSeparator=i.formatSeparator?i.formatSeparator:i.formatSeparator||","}add(e,n){this.formats[e.toLowerCase().trim()]=n}addCached(e,n){this.formats[e.toLowerCase().trim()]=bt(n)}format(e,n,i){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const a=n.split(this.formatSeparator);if(a.length>1&&a[0].indexOf("(")>1&&a[0].indexOf(")")<0&&a.find(c=>c.indexOf(")")>-1)){const c=a.findIndex(l=>l.indexOf(")")>-1);a[0]=[a[0],...a.splice(1,c)].join(this.formatSeparator)}return a.reduce((c,l)=>{const{formatName:f,formatOptions:u}=Xo(l);if(this.formats[f]){let d=c;try{const m=o&&o.formatParams&&o.formatParams[o.interpolationkey]||{},E=m.locale||m.lng||o.locale||o.lng||i;d=this.formats[f](c,E,{...u,...o,...m})}catch(m){this.logger.warn(m)}return d}else this.logger.warn(`there was no format function for ${f}`);return c},e)}}const ti=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class ei extends me{constructor(e,n,i){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=n,this.services=i,this.languageUtils=i.languageUtils,this.options=o,this.logger=st.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=o.maxParallelReads||10,this.readingCalls=0,this.maxRetries=o.maxRetries>=0?o.maxRetries:5,this.retryTimeout=o.retryTimeout>=1?o.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(i,o.backend,o)}queueLoad(e,n,i,o){const a={},r={},c={},l={};return e.forEach(f=>{let u=!0;n.forEach(d=>{const m=`${f}|${d}`;!i.reload&&this.store.hasResourceBundle(f,d)?this.state[m]=2:this.state[m]<0||(this.state[m]===1?r[m]===void 0&&(r[m]=!0):(this.state[m]=1,u=!1,r[m]===void 0&&(r[m]=!0),a[m]===void 0&&(a[m]=!0),l[d]===void 0&&(l[d]=!0)))}),u||(c[f]=!0)}),(Object.keys(a).length||Object.keys(r).length)&&this.queue.push({pending:r,pendingCount:Object.keys(r).length,loaded:{},errors:[],callback:o}),{toLoad:Object.keys(a),pending:Object.keys(r),toLoadLanguages:Object.keys(c),toLoadNamespaces:Object.keys(l)}}loaded(e,n,i){const o=e.split("|"),a=o[0],r=o[1];n&&this.emit("failedLoading",a,r,n),!n&&i&&this.store.addResourceBundle(a,r,i,void 0,void 0,{skipCopy:!0}),this.state[e]=n?-1:2,n&&i&&(this.state[e]=0);const c={};this.queue.forEach(l=>{Fo(l.loaded,[a],r),ti(l,e),n&&l.errors.push(n),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(f=>{c[f]||(c[f]={});const u=l.loaded[f];u.length&&u.forEach(d=>{c[f][d]===void 0&&(c[f][d]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",c),this.queue=this.queue.filter(l=>!l.done)}read(e,n,i){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,r=arguments.length>5?arguments[5]:void 0;if(!e.length)return r(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:n,fcName:i,tried:o,wait:a,callback:r});return}this.readingCalls++;const c=(f,u)=>{if(this.readingCalls--,this.waitingReads.length>0){const d=this.waitingReads.shift();this.read(d.lng,d.ns,d.fcName,d.tried,d.wait,d.callback)}if(f&&u&&o<this.maxRetries){setTimeout(()=>{this.read.call(this,e,n,i,o+1,a*2,r)},a);return}r(f,u)},l=this.backend[i].bind(this.backend);if(l.length===2){try{const f=l(e,n);f&&typeof f.then=="function"?f.then(u=>c(null,u)).catch(c):c(null,f)}catch(f){c(f)}return}return l(e,n,c)}prepareLoading(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),o&&o();typeof e=="string"&&(e=this.languageUtils.toResolveHierarchy(e)),typeof n=="string"&&(n=[n]);const a=this.queueLoad(e,n,i,o);if(!a.toLoad.length)return a.pending.length||o(),null;a.toLoad.forEach(r=>{this.loadOne(r)})}load(e,n,i){this.prepareLoading(e,n,{},i)}reload(e,n,i){this.prepareLoading(e,n,{reload:!0},i)}loadOne(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const i=e.split("|"),o=i[0],a=i[1];this.read(o,a,"read",void 0,void 0,(r,c)=>{r&&this.logger.warn(`${n}loading namespace ${a} for language ${o} failed`,r),!r&&c&&this.logger.log(`${n}loaded namespace ${a} for language ${o}`,c),this.loaded(e,r,c)})}saveMissing(e,n,i,o,a){let r=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},c=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(n)){this.logger.warn(`did not save key "${i}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(i==null||i==="")){if(this.backend&&this.backend.create){const l={...r,isUpdate:a},f=this.backend.create.bind(this.backend);if(f.length<6)try{let u;f.length===5?u=f(e,n,i,o,l):u=f(e,n,i,o),u&&typeof u.then=="function"?u.then(d=>c(null,d)).catch(c):c(null,u)}catch(u){c(u)}else f(e,n,i,o,c,l)}!e||!e[0]||this.store.addResource(e[0],n,i,o)}}}const pn=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),typeof t[1]=="string"&&(e.defaultValue=t[1]),typeof t[2]=="string"&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const n=t[3]||t[2];Object.keys(n).forEach(i=>{e[i]=n[i]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),gn=t=>(typeof t.ns=="string"&&(t.ns=[t.ns]),typeof t.fallbackLng=="string"&&(t.fallbackLng=[t.fallbackLng]),typeof t.fallbackNS=="string"&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs&&t.supportedLngs.indexOf("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),t),Yt=()=>{},ni=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(n=>{typeof t[n]=="function"&&(t[n]=t[n].bind(t))})};class Ut extends me{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(super(),this.options=gn(e),this.services={},this.logger=st,this.modules={external:[]},ni(this),n&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,n),this;setTimeout(()=>{this.init(e,n)},0)}}init(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof n=="function"&&(i=n,n={}),!n.defaultNS&&n.defaultNS!==!1&&n.ns&&(typeof n.ns=="string"?n.defaultNS=n.ns:n.ns.indexOf("translation")<0&&(n.defaultNS=n.ns[0]));const o=pn();this.options={...o,...this.options,...gn(n)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...o.interpolation,...this.options.interpolation}),n.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=n.keySeparator),n.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=n.nsSeparator);const a=u=>u?typeof u=="function"?new u:u:null;if(!this.options.isClone){this.modules.logger?st.init(a(this.modules.logger),this.options):st.init(null,this.options);let u;this.modules.formatter?u=this.modules.formatter:typeof Intl<"u"&&(u=qo);const d=new fn(this.options);this.store=new cn(this.options.resources,this.options);const m=this.services;m.logger=st,m.resourceStore=this.store,m.languageUtils=d,m.pluralResolver=new Qo(d,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),u&&(!this.options.interpolation.format||this.options.interpolation.format===o.interpolation.format)&&(m.formatter=a(u),m.formatter.init(m,this.options),this.options.interpolation.format=m.formatter.format.bind(m.formatter)),m.interpolator=new Zo(this.options),m.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},m.backendConnector=new ei(a(this.modules.backend),m.resourceStore,m,this.options),m.backendConnector.on("*",function(E){for(var C=arguments.length,D=new Array(C>1?C-1:0),S=1;S<C;S++)D[S-1]=arguments[S];e.emit(E,...D)}),this.modules.languageDetector&&(m.languageDetector=a(this.modules.languageDetector),m.languageDetector.init&&m.languageDetector.init(m,this.options.detection,this.options)),this.modules.i18nFormat&&(m.i18nFormat=a(this.modules.i18nFormat),m.i18nFormat.init&&m.i18nFormat.init(this)),this.translator=new ce(this.services,this.options),this.translator.on("*",function(E){for(var C=arguments.length,D=new Array(C>1?C-1:0),S=1;S<C;S++)D[S-1]=arguments[S];e.emit(E,...D)}),this.modules.external.forEach(E=>{E.init&&E.init(this)})}if(this.format=this.options.interpolation.format,i||(i=Yt),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const u=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);u.length>0&&u[0]!=="dev"&&(this.options.lng=u[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(u=>{this[u]=function(){return e.store[u](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(u=>{this[u]=function(){return e.store[u](...arguments),e}});const l=xt(),f=()=>{const u=(d,m)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),l.resolve(m),i(d,m)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return u(null,this.t.bind(this));this.changeLanguage(this.options.lng,u)};return this.options.resources||!this.options.initImmediate?f():setTimeout(f,0),l}loadResources(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Yt;const o=typeof e=="string"?e:this.language;if(typeof e=="function"&&(i=e),!this.options.resources||this.options.partialBundledLanguages){if(o&&o.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return i();const a=[],r=c=>{if(!c||c==="cimode")return;this.services.languageUtils.toResolveHierarchy(c).forEach(f=>{f!=="cimode"&&a.indexOf(f)<0&&a.push(f)})};o?r(o):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(l=>r(l)),this.options.preload&&this.options.preload.forEach(c=>r(c)),this.services.backendConnector.load(a,this.options.ns,c=>{!c&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),i(c)})}else i(null)}reloadResources(e,n,i){const o=xt();return typeof e=="function"&&(i=e,e=void 0),typeof n=="function"&&(i=n,n=void 0),e||(e=this.languages),n||(n=this.options.ns),i||(i=Yt),this.services.backendConnector.reload(e,n,a=>{o.resolve(),i(a)}),o}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&jn.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let n=0;n<this.languages.length;n++){const i=this.languages[n];if(!(["cimode","dev"].indexOf(i)>-1)&&this.store.hasLanguageSomeTranslations(i)){this.resolvedLanguage=i;break}}}changeLanguage(e,n){var i=this;this.isLanguageChangingTo=e;const o=xt();this.emit("languageChanging",e);const a=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},r=(l,f)=>{f?(a(f),this.translator.changeLanguage(f),this.isLanguageChangingTo=void 0,this.emit("languageChanged",f),this.logger.log("languageChanged",f)):this.isLanguageChangingTo=void 0,o.resolve(function(){return i.t(...arguments)}),n&&n(l,function(){return i.t(...arguments)})},c=l=>{!e&&!l&&this.services.languageDetector&&(l=[]);const f=typeof l=="string"?l:this.services.languageUtils.getBestMatchFromCodes(l);f&&(this.language||a(f),this.translator.language||this.translator.changeLanguage(f),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(f)),this.loadResources(f,u=>{r(u,f)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?c(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(c):this.services.languageDetector.detect(c):c(e),o}getFixedT(e,n,i){var o=this;const a=function(r,c){let l;if(typeof c!="object"){for(var f=arguments.length,u=new Array(f>2?f-2:0),d=2;d<f;d++)u[d-2]=arguments[d];l=o.options.overloadTranslationOptionHandler([r,c].concat(u))}else l={...c};l.lng=l.lng||a.lng,l.lngs=l.lngs||a.lngs,l.ns=l.ns||a.ns,l.keyPrefix!==""&&(l.keyPrefix=l.keyPrefix||i||a.keyPrefix);const m=o.options.keySeparator||".";let E;return l.keyPrefix&&Array.isArray(r)?E=r.map(C=>`${l.keyPrefix}${m}${C}`):E=l.keyPrefix?`${l.keyPrefix}${m}${r}`:r,o.t(E,l)};return typeof e=="string"?a.lng=e:a.lngs=e,a.ns=n,a.keyPrefix=i,a}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const i=n.lng||this.resolvedLanguage||this.languages[0],o=this.options?this.options.fallbackLng:!1,a=this.languages[this.languages.length-1];if(i.toLowerCase()==="cimode")return!0;const r=(c,l)=>{const f=this.services.backendConnector.state[`${c}|${l}`];return f===-1||f===0||f===2};if(n.precheck){const c=n.precheck(this,r);if(c!==void 0)return c}return!!(this.hasResourceBundle(i,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||r(i,e)&&(!o||r(a,e)))}loadNamespaces(e,n){const i=xt();return this.options.ns?(typeof e=="string"&&(e=[e]),e.forEach(o=>{this.options.ns.indexOf(o)<0&&this.options.ns.push(o)}),this.loadResources(o=>{i.resolve(),n&&n(o)}),i):(n&&n(),Promise.resolve())}loadLanguages(e,n){const i=xt();typeof e=="string"&&(e=[e]);const o=this.options.preload||[],a=e.filter(r=>o.indexOf(r)<0&&this.services.languageUtils.isSupportedCode(r));return a.length?(this.options.preload=o.concat(a),this.loadResources(r=>{i.resolve(),n&&n(r)}),i):(n&&n(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],i=this.services&&this.services.languageUtils||new fn(pn());return n.indexOf(i.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new Ut(e,n)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Yt;const i=e.forkResourceStore;i&&delete e.forkResourceStore;const o={...this.options,...e,isClone:!0},a=new Ut(o);return(e.debug!==void 0||e.prefix!==void 0)&&(a.logger=a.logger.clone(e)),["store","services","language"].forEach(c=>{a[c]=this[c]}),a.services={...this.services},a.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},i&&(a.store=new cn(this.store.data,o),a.services.resourceStore=a.store),a.translator=new ce(a.services,o),a.translator.on("*",function(c){for(var l=arguments.length,f=new Array(l>1?l-1:0),u=1;u<l;u++)f[u-1]=arguments[u];a.emit(c,...f)}),a.init(o,n),a.translator.options=o,a.translator.backendConnector.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},a}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const w=Ut.createInstance();w.createInstance=Ut.createInstance;w.createInstance;w.dir;w.init;w.loadResources;w.reloadResources;w.use;w.changeLanguage;w.getFixedT;w.t;w.exists;w.setDefaultNamespace;w.hasLoadedNamespace;w.loadNamespaces;w.loadLanguages;function oi(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Jt={},_e,hn;function ii(){if(hn)return _e;hn=1;var t,e,n={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},i;function o(E){throw{name:"SyntaxError",message:E,at:t,text:i}}function a(E){return E&&E!==e&&o("Expected '"+E+"' instead of '"+e+"'"),e=i.charAt(t),t+=1,e}function r(){var E,C="";for(e==="-"&&(C="-",a("-"));e>="0"&&e<="9";)C+=e,a();if(e===".")for(C+=".";a()&&e>="0"&&e<="9";)C+=e;if(e==="e"||e==="E")for(C+=e,a(),(e==="-"||e==="+")&&(C+=e,a());e>="0"&&e<="9";)C+=e,a();return E=Number(C),isFinite(E)||o("Bad number"),E}function c(){var E,C,D="",S;if(e==='"')for(;a();){if(e==='"')return a(),D;if(e==="\\")if(a(),e==="u"){for(S=0,C=0;C<4&&(E=parseInt(a(),16),!!isFinite(E));C+=1)S=S*16+E;D+=String.fromCharCode(S)}else if(typeof n[e]=="string")D+=n[e];else break;else D+=e}o("Bad string")}function l(){for(;e&&e<=" ";)a()}function f(){switch(e){case"t":return a("t"),a("r"),a("u"),a("e"),!0;case"f":return a("f"),a("a"),a("l"),a("s"),a("e"),!1;case"n":return a("n"),a("u"),a("l"),a("l"),null;default:o("Unexpected '"+e+"'")}}function u(){var E=[];if(e==="["){if(a("["),l(),e==="]")return a("]"),E;for(;e;){if(E.push(m()),l(),e==="]")return a("]"),E;a(","),l()}}o("Bad array")}function d(){var E,C={};if(e==="{"){if(a("{"),l(),e==="}")return a("}"),C;for(;e;){if(E=c(),l(),a(":"),Object.prototype.hasOwnProperty.call(C,E)&&o('Duplicate key "'+E+'"'),C[E]=m(),l(),e==="}")return a("}"),C;a(","),l()}}o("Bad object")}function m(){switch(l(),e){case"{":return d();case"[":return u();case'"':return c();case"-":return r();default:return e>="0"&&e<="9"?r():f()}}return _e=function(E,C){var D;return i=E,t=0,e=" ",D=m(),l(),e&&o("Syntax error"),typeof C=="function"?function S(I,y){var v,B,O=I[y];if(O&&typeof O=="object")for(v in m)Object.prototype.hasOwnProperty.call(O,v)&&(B=S(O,v),typeof B>"u"?delete O[v]:O[v]=B);return C.call(I,y,O)}({"":D},""):D},_e}var Be,En;function ai(){if(En)return Be;En=1;var t=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,n,i={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},o;function a(c){return t.lastIndex=0,t.test(c)?'"'+c.replace(t,function(l){var f=i[l];return typeof f=="string"?f:"\\u"+("0000"+l.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+c+'"'}function r(c,l){var f,u,d,m,E=e,C,D=l[c];switch(D&&typeof D=="object"&&typeof D.toJSON=="function"&&(D=D.toJSON(c)),typeof o=="function"&&(D=o.call(l,c,D)),typeof D){case"string":return a(D);case"number":return isFinite(D)?String(D):"null";case"boolean":case"null":return String(D);case"object":if(!D)return"null";if(e+=n,C=[],Object.prototype.toString.apply(D)==="[object Array]"){for(m=D.length,f=0;f<m;f+=1)C[f]=r(f,D)||"null";return d=C.length===0?"[]":e?`[
`+e+C.join(`,
`+e)+`
`+E+"]":"["+C.join(",")+"]",e=E,d}if(o&&typeof o=="object")for(m=o.length,f=0;f<m;f+=1)u=o[f],typeof u=="string"&&(d=r(u,D),d&&C.push(a(u)+(e?": ":":")+d));else for(u in D)Object.prototype.hasOwnProperty.call(D,u)&&(d=r(u,D),d&&C.push(a(u)+(e?": ":":")+d));return d=C.length===0?"{}":e?`{
`+e+C.join(`,
`+e)+`
`+E+"}":"{"+C.join(",")+"}",e=E,d}}return Be=function(c,l,f){var u;if(e="",n="",typeof f=="number")for(u=0;u<f;u+=1)n+=" ";else typeof f=="string"&&(n=f);if(o=l,l&&typeof l!="function"&&(typeof l!="object"||typeof l.length!="number"))throw new Error("JSON.stringify");return r("",{"":c})},Be}var Cn;function si(){return Cn||(Cn=1,Jt.parse=ii(),Jt.stringify=ai()),Jt}var ri={}.toString,li=Array.isArray||function(t){return ri.call(t)=="[object Array]"},Dn=Object.prototype.toString,zn=function(e){var n=Dn.call(e),i=n==="[object Arguments]";return i||(i=n!=="[object Array]"&&e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&Dn.call(e.callee)==="[object Function]"),i},be,Sn;function ci(){if(Sn)return be;Sn=1;var t;if(!Object.keys){var e=Object.prototype.hasOwnProperty,n=Object.prototype.toString,i=zn,o=Object.prototype.propertyIsEnumerable,a=!o.call({toString:null},"toString"),r=o.call(function(){},"prototype"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],l=function(m){var E=m.constructor;return E&&E.prototype===m},f={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},u=function(){if(typeof window>"u")return!1;for(var m in window)try{if(!f["$"+m]&&e.call(window,m)&&window[m]!==null&&typeof window[m]=="object")try{l(window[m])}catch{return!0}}catch{return!0}return!1}(),d=function(m){if(typeof window>"u"||!u)return l(m);try{return l(m)}catch{return!1}};t=function(E){var C=E!==null&&typeof E=="object",D=n.call(E)==="[object Function]",S=i(E),I=C&&n.call(E)==="[object String]",y=[];if(!C&&!D&&!S)throw new TypeError("Object.keys called on a non-object");var v=r&&D;if(I&&E.length>0&&!e.call(E,0))for(var B=0;B<E.length;++B)y.push(String(B));if(S&&E.length>0)for(var O=0;O<E.length;++O)y.push(String(O));else for(var N in E)!(v&&N==="prototype")&&e.call(E,N)&&y.push(String(N));if(a)for(var R=d(E),L=0;L<c.length;++L)!(R&&c[L]==="constructor")&&e.call(E,c[L])&&y.push(c[L]);return y}}return be=t,be}var ui=Array.prototype.slice,fi=zn,_n=Object.keys,te=_n?function(e){return _n(e)}:ci(),Bn=Object.keys;te.shim=function(){if(Object.keys){var e=function(){var n=Object.keys(arguments);return n&&n.length===arguments.length}(1,2);e||(Object.keys=function(i){return fi(i)?Bn(ui.call(i)):Bn(i)})}else Object.keys=te;return Object.keys||te};var di=te,$n={exports:{}},mi="Function.prototype.bind called on incompatible ",pi=Object.prototype.toString,gi=Math.max,hi="[object Function]",bn=function(e,n){for(var i=[],o=0;o<e.length;o+=1)i[o]=e[o];for(var a=0;a<n.length;a+=1)i[a+e.length]=n[a];return i},Ei=function(e,n){for(var i=[],o=n,a=0;o<e.length;o+=1,a+=1)i[a]=e[o];return i},Ci=function(t,e){for(var n="",i=0;i<t.length;i+=1)n+=t[i],i+1<t.length&&(n+=e);return n},Di=function(e){var n=this;if(typeof n!="function"||pi.apply(n)!==hi)throw new TypeError(mi+n);for(var i=Ei(arguments,1),o,a=function(){if(this instanceof o){var u=n.apply(this,bn(i,arguments));return Object(u)===u?u:this}return n.apply(e,bn(i,arguments))},r=gi(0,n.length-i.length),c=[],l=0;l<r;l++)c[l]="$"+l;if(o=Function("binder","return function ("+Ci(c,",")+"){ return binder.apply(this,arguments); }")(a),n.prototype){var f=function(){};f.prototype=n.prototype,o.prototype=new f,f.prototype=null}return o},Si=Di,Fe=Function.prototype.bind||Si,_i=Error,Bi=EvalError,bi=RangeError,Ti=ReferenceError,Wn=SyntaxError,pe=TypeError,yi=URIError,Oi=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},n=Symbol("test"),i=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(i)!=="[object Symbol]")return!1;var o=42;e[n]=o;for(n in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var a=Object.getOwnPropertySymbols(e);if(a.length!==1||a[0]!==n||!Object.prototype.propertyIsEnumerable.call(e,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var r=Object.getOwnPropertyDescriptor(e,n);if(r.value!==o||r.enumerable!==!0)return!1}return!0},Tn=typeof Symbol<"u"&&Symbol,Li=Oi,Ai=function(){return typeof Tn!="function"||typeof Symbol!="function"||typeof Tn("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:Li()},Te={__proto__:null,foo:{}},Ri=Object,Mi=function(){return{__proto__:Te}.foo===Te.foo&&!(Te instanceof Ri)},Pi=Function.prototype.call,Ii=Object.prototype.hasOwnProperty,vi=Fe,xi=vi.call(Pi,Ii),T,Gi=_i,ki=Bi,Fi=bi,Ni=Ti,It=Wn,Pt=pe,Ui=yi,Yn=Function,ye=function(t){try{return Yn('"use strict"; return ('+t+").constructor;")()}catch{}},Et=Object.getOwnPropertyDescriptor;if(Et)try{Et({},"")}catch{Et=null}var Oe=function(){throw new Pt},wi=Et?function(){try{return arguments.callee,Oe}catch{try{return Et(arguments,"callee").get}catch{return Oe}}}():Oe,Tt=Ai(),Hi=Mi(),V=Object.getPrototypeOf||(Hi?function(t){return t.__proto__}:null),At={},Ki=typeof Uint8Array>"u"||!V?T:V(Uint8Array),Ct={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?T:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?T:ArrayBuffer,"%ArrayIteratorPrototype%":Tt&&V?V([][Symbol.iterator]()):T,"%AsyncFromSyncIteratorPrototype%":T,"%AsyncFunction%":At,"%AsyncGenerator%":At,"%AsyncGeneratorFunction%":At,"%AsyncIteratorPrototype%":At,"%Atomics%":typeof Atomics>"u"?T:Atomics,"%BigInt%":typeof BigInt>"u"?T:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?T:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?T:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?T:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Gi,"%eval%":eval,"%EvalError%":ki,"%Float32Array%":typeof Float32Array>"u"?T:Float32Array,"%Float64Array%":typeof Float64Array>"u"?T:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?T:FinalizationRegistry,"%Function%":Yn,"%GeneratorFunction%":At,"%Int8Array%":typeof Int8Array>"u"?T:Int8Array,"%Int16Array%":typeof Int16Array>"u"?T:Int16Array,"%Int32Array%":typeof Int32Array>"u"?T:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Tt&&V?V(V([][Symbol.iterator]())):T,"%JSON%":typeof JSON=="object"?JSON:T,"%Map%":typeof Map>"u"?T:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Tt||!V?T:V(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?T:Promise,"%Proxy%":typeof Proxy>"u"?T:Proxy,"%RangeError%":Fi,"%ReferenceError%":Ni,"%Reflect%":typeof Reflect>"u"?T:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?T:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Tt||!V?T:V(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?T:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Tt&&V?V(""[Symbol.iterator]()):T,"%Symbol%":Tt?Symbol:T,"%SyntaxError%":It,"%ThrowTypeError%":wi,"%TypedArray%":Ki,"%TypeError%":Pt,"%Uint8Array%":typeof Uint8Array>"u"?T:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?T:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?T:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?T:Uint32Array,"%URIError%":Ui,"%WeakMap%":typeof WeakMap>"u"?T:WeakMap,"%WeakRef%":typeof WeakRef>"u"?T:WeakRef,"%WeakSet%":typeof WeakSet>"u"?T:WeakSet};if(V)try{null.error}catch(t){var Vi=V(V(t));Ct["%Error.prototype%"]=Vi}var ji=function t(e){var n;if(e==="%AsyncFunction%")n=ye("async function () {}");else if(e==="%GeneratorFunction%")n=ye("function* () {}");else if(e==="%AsyncGeneratorFunction%")n=ye("async function* () {}");else if(e==="%AsyncGenerator%"){var i=t("%AsyncGeneratorFunction%");i&&(n=i.prototype)}else if(e==="%AsyncIteratorPrototype%"){var o=t("%AsyncGenerator%");o&&V&&(n=V(o.prototype))}return Ct[e]=n,n},yn={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Vt=Fe,ue=xi,zi=Vt.call(Function.call,Array.prototype.concat),$i=Vt.call(Function.apply,Array.prototype.splice),On=Vt.call(Function.call,String.prototype.replace),fe=Vt.call(Function.call,String.prototype.slice),Wi=Vt.call(Function.call,RegExp.prototype.exec),Yi=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Ji=/\\(\\)?/g,Qi=function(e){var n=fe(e,0,1),i=fe(e,-1);if(n==="%"&&i!=="%")throw new It("invalid intrinsic syntax, expected closing `%`");if(i==="%"&&n!=="%")throw new It("invalid intrinsic syntax, expected opening `%`");var o=[];return On(e,Yi,function(a,r,c,l){o[o.length]=c?On(l,Ji,"$1"):r||a}),o},Zi=function(e,n){var i=e,o;if(ue(yn,i)&&(o=yn[i],i="%"+o[0]+"%"),ue(Ct,i)){var a=Ct[i];if(a===At&&(a=ji(i)),typeof a>"u"&&!n)throw new Pt("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:o,name:i,value:a}}throw new It("intrinsic "+e+" does not exist!")},jt=function(e,n){if(typeof e!="string"||e.length===0)throw new Pt("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof n!="boolean")throw new Pt('"allowMissing" argument must be a boolean');if(Wi(/^%?[^%]*%?$/,e)===null)throw new It("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var i=Qi(e),o=i.length>0?i[0]:"",a=Zi("%"+o+"%",n),r=a.name,c=a.value,l=!1,f=a.alias;f&&(o=f[0],$i(i,zi([0,1],f)));for(var u=1,d=!0;u<i.length;u+=1){var m=i[u],E=fe(m,0,1),C=fe(m,-1);if((E==='"'||E==="'"||E==="`"||C==='"'||C==="'"||C==="`")&&E!==C)throw new It("property names with quotes must have matching quotes");if((m==="constructor"||!d)&&(l=!0),o+="."+m,r="%"+o+"%",ue(Ct,r))c=Ct[r];else if(c!=null){if(!(m in c)){if(!n)throw new Pt("base intrinsic for "+e+" exists, but the property is not available.");return}if(Et&&u+1>=i.length){var D=Et(c,m);d=!!D,d&&"get"in D&&!("originalValue"in D.get)?c=D.get:c=c[m]}else d=ue(c,m),c=c[m];d&&!l&&(Ct[r]=c)}}return c},Le,Ln;function Ne(){if(Ln)return Le;Ln=1;var t=jt,e=t("%Object.defineProperty%",!0)||!1;if(e)try{e({},"a",{value:1})}catch{e=!1}return Le=e,Le}var Xi=jt,ee=Xi("%Object.getOwnPropertyDescriptor%",!0);if(ee)try{ee([],"length")}catch{ee=null}var Jn=ee,An=Ne(),qi=Wn,yt=pe,Rn=Jn,ta=function(e,n,i){if(!e||typeof e!="object"&&typeof e!="function")throw new yt("`obj` must be an object or a function`");if(typeof n!="string"&&typeof n!="symbol")throw new yt("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new yt("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new yt("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new yt("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new yt("`loose`, if provided, must be a boolean");var o=arguments.length>3?arguments[3]:null,a=arguments.length>4?arguments[4]:null,r=arguments.length>5?arguments[5]:null,c=arguments.length>6?arguments[6]:!1,l=!!Rn&&Rn(e,n);if(An)An(e,n,{configurable:r===null&&l?l.configurable:!r,enumerable:o===null&&l?l.enumerable:!o,value:i,writable:a===null&&l?l.writable:!a});else if(c||!o&&!a&&!r)e[n]=i;else throw new qi("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},Ge=Ne(),Qn=function(){return!!Ge};Qn.hasArrayLengthDefineBug=function(){if(!Ge)return null;try{return Ge([],"length",{value:1}).length!==1}catch{return!0}};var ea=Qn,na=jt,Mn=ta,oa=ea(),Pn=Jn,In=pe,ia=na("%Math.floor%"),aa=function(e,n){if(typeof e!="function")throw new In("`fn` is not a function");if(typeof n!="number"||n<0||n>4294967295||ia(n)!==n)throw new In("`length` must be a positive 32-bit integer");var i=arguments.length>2&&!!arguments[2],o=!0,a=!0;if("length"in e&&Pn){var r=Pn(e,"length");r&&!r.configurable&&(o=!1),r&&!r.writable&&(a=!1)}return(o||a||!i)&&(oa?Mn(e,"length",n,!0,!0):Mn(e,"length",n)),e};(function(t){var e=Fe,n=jt,i=aa,o=pe,a=n("%Function.prototype.apply%"),r=n("%Function.prototype.call%"),c=n("%Reflect.apply%",!0)||e.call(r,a),l=Ne(),f=n("%Math.max%");t.exports=function(m){if(typeof m!="function")throw new o("a function is required");var E=c(e,r,arguments);return i(E,1+f(0,m.length-(arguments.length-1)),!0)};var u=function(){return c(e,a,arguments)};l?l(t.exports,"apply",{value:u}):t.exports.apply=u})($n);var Zn=$n.exports,Xn=jt,qn=Zn,sa=qn(Xn("String.prototype.indexOf")),ra=function(e,n){var i=Xn(e,!!n);return typeof i=="function"&&sa(e,".prototype.")>-1?qn(i):i},Qt=(typeof JSON<"u"?JSON:si()).stringify,la=li,ca=di,ua=Zn,to=ra,vn=to("Array.prototype.join"),Ae=to("Array.prototype.push"),xn=function(e,n){for(var i="",o=0;o<e;o+=1)i+=n;return i},fa=function(t,e,n){return n},da=function(e){var n=arguments.length>1?arguments[1]:void 0,i=n&&n.space||"";typeof i=="number"&&(i=xn(i," "));var o=!!n&&typeof n.cycles=="boolean"&&n.cycles,a=n&&n.replacer?ua(n.replacer):fa,r=typeof n=="function"?n:n&&n.cmp,c=r&&function(f){var u=r.length>2&&function(m){return f[m]};return function(d,m){return r({key:d,value:f[d]},{key:m,value:f[m]},u?{__proto__:null,get:u}:void 0)}},l=[];return function f(u,d,m,E){var C=i?`
`+xn(E,i):"",D=i?": ":":";if(m&&m.toJSON&&typeof m.toJSON=="function"&&(m=m.toJSON()),m=a(u,d,m),m!==void 0){if(typeof m!="object"||m===null)return Qt(m);if(la(m)){for(var v=[],S=0;S<m.length;S++){var I=f(m,S,m[S],E+1)||Qt(null);Ae(v,C+i+I)}return"["+vn(v,",")+C+"]"}if(l.indexOf(m)!==-1){if(o)return Qt("__cycle__");throw new TypeError("Converting circular structure to JSON")}else Ae(l,m);for(var y=ca(m).sort(c&&c(m)),v=[],S=0;S<y.length;S++){var d=y[S],B=f(m,d,m[d],E+1);if(B){var O=Qt(d)+D+B;Ae(v,C+i+O)}}return l.splice(l.indexOf(m),1),"{"+vn(v,",")+C+"}"}}({"":e},"",e,0)},ma=oi(da),z=[];for(var Re=0;Re<256;++Re)z.push((Re+256).toString(16).slice(1));function pa(t,e=0){return(z[t[e+0]]+z[t[e+1]]+z[t[e+2]]+z[t[e+3]]+"-"+z[t[e+4]]+z[t[e+5]]+"-"+z[t[e+6]]+z[t[e+7]]+"-"+z[t[e+8]]+z[t[e+9]]+"-"+z[t[e+10]]+z[t[e+11]]+z[t[e+12]]+z[t[e+13]]+z[t[e+14]]+z[t[e+15]]).toLowerCase()}var Zt,ga=new Uint8Array(16);function ha(){if(!Zt&&(Zt=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Zt))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Zt(ga)}var Ea=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Gn={randomUUID:Ea};function kn(t,e,n){if(Gn.randomUUID&&!e&&!t)return Gn.randomUUID();t=t||{};var i=t.random||(t.rng||ha)();return i[6]=i[6]&15|64,i[8]=i[8]&63|128,pa(i)}const g={clone(t){return t&&JSON.parse(JSON.stringify(t))},objectHash(t){return ma(t)},sumArray:t=>t.reduce((e,n)=>e+n,0),precisionRound:(t,e=5)=>{const n=Math.pow(10,e);return Math.round(t*n)/n},calculateRelicMainStatValue:(t,e,n)=>ve.MainStatsValues[t][e].base+ve.MainStatsValues[t][e].increment*n,wrappedFixedT:t=>({get:t?w.getFixedT:Ca}),flipStringMapping:t=>Object.fromEntries(Object.entries(t).map(([e,n])=>[n,e])),uuid:()=>kn(),uuidAlphaOnly:()=>kn().replace(/[^a-zA-Z0-9]/g,""),stripTrailingSlashes:t=>t.replace(/\/+$/,""),sleep:t=>new Promise(e=>setTimeout(e,t)),consoleWarnWrapper:t=>{t instanceof Error?console.warn(t.name,t.message):console.warn("An unknown error occurred",t)},validateUuid:t=>{const e=t.trim();return/^\d{9}$/.test(e)?e:null},smoothScrollNearest:(t,e=300)=>{const n=t.getBoundingClientRect(),i=document.documentElement||document.body,o=i.scrollTop,a=n.top+o,r=n.bottom+o,c=i.clientHeight;let l;if(n.top<0)l=a;else if(n.bottom>c)l=r-c+5;else return;const f=performance.now(),u=o,d=l-u;function m(E){const C=E-f,D=Math.min(C/e,1),S=D<.5?2*D*D:1-Math.pow(-2*D+2,2)/2;i.scrollTo(0,u+d*S),C<e&&requestAnimationFrame(m)}requestAnimationFrame(m)}},Ca=()=>()=>"";var Da=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.Adversarial"),{SOURCE_LC:i}=h.lightCone("20014"),o=[.1,.12,.14,.16,.18],a={defeatedEnemySpdBuff:!0},r={defeatedEnemySpdBuff:{lc:!0,id:"defeatedEnemySpdBuff",formItem:"switch",text:n("Content.defeatedEnemySpdBuff.text"),content:n("Content.defeatedEnemySpdBuff.content",{SpdBuff:g.precisionRound(100*o[t])})}};return{content:()=>Object.values(r),defaults:()=>a,precomputeEffects:(c,l,f)=>{const u=l.lightConeConditionals;c.SPD_P.buff(u.defeatedEnemySpdBuff?o[t]:0,i)},finalizeCalculations:()=>{}}},Sa=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.Amber"),{SOURCE_LC:i}=h.lightCone("20003"),o=[.16,.2,.24,.28,.32],a={hp50DefBuff:!0},r={hp50DefBuff:{lc:!0,id:"hp50DefBuff",formItem:"switch",text:n("Content.hp50DefBuff.text"),content:n("Content.hp50DefBuff.content",{DefBuff:g.precisionRound(100*o[t])})}};return{content:()=>Object.values(r),defaults:()=>a,precomputeEffects:(c,l,f)=>{const u=l.lightConeConditionals;c.DEF_P.buff(u.hp50DefBuff?o[t]:0,i)},finalizeCalculations:()=>{}}},_a=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.Arrows"),{SOURCE_LC:i}=h.lightCone("20000"),o=[.12,.15,.18,.21,.24],a={critBuff:!0},r={critBuff:{lc:!0,id:"critBuff",formItem:"switch",text:n("Content.critBuff.text"),content:n("Content.critBuff.content",{CritBuff:g.precisionRound(100*o[t])})}};return{content:()=>Object.values(r),defaults:()=>a,precomputeEffects:(c,l,f)=>{const u=l.lightConeConditionals;c.CR.buff(u.critBuff?o[t]:0,i)},finalizeCalculations:()=>{}}},Ba=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.Chorus"),{SOURCE_LC:i}=h.lightCone("20005"),o=[.08,.09,.1,.11,.12],a={inBattleAtkBuff:!0},r={inBattleAtkBuff:{lc:!0,id:"inBattleAtkBuff",formItem:"switch",text:n("Content.inBattleAtkBuff.text"),content:n("Content.inBattleAtkBuff.content",{AtkBuff:g.precisionRound(100*o[t])})}},c={inBattleAtkBuff:r.inBattleAtkBuff};return{content:()=>Object.values(r),teammateContent:()=>Object.values(c),defaults:()=>a,teammateDefaults:()=>({inBattleAtkBuff:!0}),precomputeEffects:()=>{},precomputeMutualEffects:(l,f,u)=>{const d=f.lightConeConditionals;l.ATK_P.buffTeam(d.inBattleAtkBuff?o[t]:0,i)},finalizeCalculations:()=>{}}};const jl=.06,zl=0;var lt=(t=>(t[t.BASIC=1]="BASIC",t[t.SKILL=2]="SKILL",t[t.ULT=4]="ULT",t[t.FUA=8]="FUA",t[t.DOT=16]="DOT",t[t.BREAK=32]="BREAK",t[t.MEMO_SKILL=64]="MEMO_SKILL",t[t.MEMO_TALENT=128]="MEMO_TALENT",t))(lt||{});const pt=1,W=2,$=4,et=8,ge=16,wt=32,eo=64,Fn=128,ba=256,$l=0,Wl=1;function Ta(t,e){const n=" ".repeat(e*2);return t.split(`
`).map(i=>n+i).join(`
`)}function vt(t){return t?"true":"false"}function Yl(t){return t?"false":"true"}function ya(t,e){return t.teammateIndex===0?e.teammate0:t.teammateIndex===1?e.teammate1:e.teammate2}function Y(t,e,n,i){let o;if(t.teammateIndex!=null){const a=ya(t,n);o={...n,teammateCharacterConditionals:a.characterConditionals,teammateLightConeConditionals:a.lightConeConditionals}}else o=n;t.activation==Q.SINGLE?!n.conditionalState[t.id]&&t.condition(e,o,i)&&(n.conditionalState[t.id]=1,t.effect(e,o,i)):t.activation==Q.CONTINUOUS&&t.condition(e,o,i)&&t.effect(e,o,i)}function ot(t,e){return`
fn evaluate${t.id}(p_x: ptr<function, ComputedStats>, p_m: ptr<function, ComputedStats>, p_sets: ptr<function, Sets>, p_state: ptr<function, ConditionalState>) {
  let x = *p_x;
${Ta(e.trim(),1)}
}
  `}const no={HP_P:0,ATK_P:0,DEF_P:0,SPD_P:0,HP:1e-8,ATK:1e-8,DEF:1e-8,SPD:1e-8,CR:1e-8,CD:1e-8,EHR:1e-8,RES:1e-8,BE:1e-8,ERR:1e-8,OHB:1e-8,PHYSICAL_DMG_BOOST:1e-8,FIRE_DMG_BOOST:1e-8,ICE_DMG_BOOST:1e-8,LIGHTNING_DMG_BOOST:1e-8,WIND_DMG_BOOST:1e-8,QUANTUM_DMG_BOOST:1e-8,IMAGINARY_DMG_BOOST:1e-8,ELEMENTAL_DMG:1e-8};function oo(){return Float32Array.from(Object.values(no))}const Oa=oo();class he{constructor(e=!1,n=!1){U(this,"a",oo());U(this,"m");U(this,"buffs");U(this,"buffsMemo");U(this,"trace");U(this,"relicSetIndex");U(this,"ornamentSetIndex");U(this,"sets");U(this,"setsArray");U(this,"id");U(this,"weight");this.m=n?null:new he(e,!0,()=>this),this.buffs=[],this.buffsMemo=[],this.trace=e,this.relicSetIndex=0,this.ornamentSetIndex=0,this.sets={},this.setsArray=[],this.id=-1,this.weight=0,Object.keys(no).forEach((i,o)=>{const a=(r,c)=>this.trace&&this.buffs.push({stat:i,key:o,value:r,source:c});Object.defineProperty(this,i,{value:{buff:(r,c)=>{r!=0&&(this.a[o]+=r,a(r,c))},set:(r,c)=>{this.a[o]=r,a(r,c)},get:()=>this.a[o]},writable:!1,enumerable:!0,configurable:!0}),Object.defineProperty(this,`$${i}`,{get:()=>this.a[o],enumerable:!0,configurable:!0})}),Object.defineProperty(this,"#show",{get:()=>this.toBasicStatsObject(),enumerable:!0,configurable:!0})}init(e,n,i,o,a){this.relicSetIndex=e,this.ornamentSetIndex=n,this.sets=i,this.setsArray=o,this.id=a,this.a.set(Oa),this.trace&&(this.buffs=[],this.buffsMemo=[])}initMemo(){this.m.a.set(this.a),this.trace&&(this.m.buffs=[],this.m.buffsMemo=[])}setWeight(e){this.weight=e}set(e,n,i){this.a[e]=n}get(e){return this.a[e]}toBasicStatsObject(){return La(this.a,this.weight,this.relicSetIndex,this.ornamentSetIndex)}}function La(t,e=0,n=0,i=0){return{"HP%":t[s.HP_P],"ATK%":t[s.ATK_P],"DEF%":t[s.DEF_P],"SPD%":t[s.SPD_P],HP:t[s.HP],ATK:t[s.ATK],DEF:t[s.DEF],SPD:t[s.SPD],"CRIT Rate":t[s.CR],"CRIT DMG":t[s.CD],"Effect Hit Rate":t[s.EHR],"Effect RES":t[s.RES],"Break Effect":t[s.BE],"Energy Regeneration Rate":t[s.ERR],"Outgoing Healing Boost":t[s.OHB],"Physical DMG Boost":t[s.PHYSICAL_DMG_BOOST],"Fire DMG Boost":t[s.FIRE_DMG_BOOST],"Ice DMG Boost":t[s.ICE_DMG_BOOST],"Lightning DMG Boost":t[s.LIGHTNING_DMG_BOOST],"Wind DMG Boost":t[s.WIND_DMG_BOOST],"Quantum DMG Boost":t[s.QUANTUM_DMG_BOOST],"Imaginary DMG Boost":t[s.IMAGINARY_DMG_BOOST],ELEMENTAL_DMG:t[s.ELEMENTAL_DMG],WEIGHT:e,relicSetIndex:n,ornamentSetIndex:i}}const Aa={HP_P:{label:"HP %"},ATK_P:{label:"ATK %"},DEF_P:{label:"DEF %"},SPD_P:{label:"SPD %"},HP:{flat:!0,label:"HP"},ATK:{flat:!0,label:"ATK"},DEF:{flat:!0,label:"DEF"},SPD:{flat:!0,default:1e-4,label:"SPD"},CR:{label:"Crit Rate"},CD:{label:"Crit DMG"},EHR:{label:"Effect Hit Rate"},RES:{label:"Effect RES"},BE:{label:"Break Effect"},ERR:{label:"Energy Regeneration Rate"},OHB:{label:"Outgoing Healing Boost"},PHYSICAL_DMG_BOOST:{label:"Physical DMG Boost"},FIRE_DMG_BOOST:{label:"Fire DMG Boost"},ICE_DMG_BOOST:{label:"Ice DMG Boost"},LIGHTNING_DMG_BOOST:{label:"Thunder DMG Boost"},WIND_DMG_BOOST:{label:"Wind DMG Boost"},QUANTUM_DMG_BOOST:{label:"Quantum DMG Boost"},IMAGINARY_DMG_BOOST:{label:"Imaginary DMG Boost"},ELEMENTAL_DMG:{label:"Elemental DMG"},BASE_HP:{flat:!0,label:"Base HP"},BASE_ATK:{flat:!0,label:"Base ATK"},BASE_DEF:{flat:!0,label:"Base DEF"},BASE_SPD:{flat:!0,label:"Base SPD"},MEMO_BASE_HP_SCALING:{label:"Memosprite base HP scaling"},MEMO_BASE_DEF_SCALING:{label:"Memosprite base DEF scaling"},MEMO_BASE_ATK_SCALING:{label:"Memosprite base ATK scaling"},MEMO_BASE_SPD_SCALING:{label:"Memosprite base SPD scaling"},MEMO_BASE_HP_FLAT:{flat:!0,label:"Memosprite base HP flat"},MEMO_BASE_DEF_FLAT:{flat:!0,label:"Memosprite base DEF flat"},MEMO_BASE_ATK_FLAT:{flat:!0,label:"Memosprite base ATK flat"},MEMO_BASE_SPD_FLAT:{flat:!0,label:"Memosprite base SPD flat"},UNCONVERTIBLE_HP_BUFF:{flat:!0,label:"Unconvertible HP"},UNCONVERTIBLE_ATK_BUFF:{flat:!0,label:"Unconvertible ATK"},UNCONVERTIBLE_DEF_BUFF:{flat:!0,label:"Unconvertible DEF"},UNCONVERTIBLE_SPD_BUFF:{flat:!0,label:"Unconvertible SPD"},UNCONVERTIBLE_CR_BUFF:{label:"Unconvertible Crit Rate"},UNCONVERTIBLE_CD_BUFF:{label:"Unconvertible Crit DMG"},UNCONVERTIBLE_EHR_BUFF:{label:"Unconvertible Effect Hit Rate"},UNCONVERTIBLE_BE_BUFF:{label:"Unconvertible Break Effect"},UNCONVERTIBLE_OHB_BUFF:{label:"Unconvertible Outgoing Healing Boost"},UNCONVERTIBLE_RES_BUFF:{label:"Unconvertible Effect RES"},UNCONVERTIBLE_ERR_BUFF:{label:"Unconvertible Energy Regeneration Rate"},DMG_RED_MULTI:{default:1,label:"DMG reduction"},EHP:{flat:!0,label:"Effective HP"},SUMMONS:{flat:!0,label:"Summons"},MEMOSPRITE:{bool:!0,label:"Memosprite"},ENEMY_WEAKNESS_BROKEN:{bool:!0,label:"Enemy weakness broken"},MEMO_BUFF_PRIORITY:{bool:!0,label:"Prioritize memosprite buffs"},DEPRIORITIZE_BUFFS:{bool:!0,label:"Deprioritize buffs"},COMBO_DMG:{flat:!0,label:"Combo DMG"},DOT_CHANCE:{label:"Dot base chance"},EFFECT_RES_PEN:{label:"Effect RES PEN"},DOT_SPLIT:{label:"Dot DMG split"},DOT_STACKS:{flat:!0,label:"Dot stacks"},HEAL_TYPE:{flat:!0,label:"Heal ability type"},HEAL_FLAT:{flat:!0,label:"Heal flat"},HEAL_SCALING:{label:"Heal scaling"},HEAL_VALUE:{flat:!0,label:"Heal value"},SHIELD_FLAT:{flat:!0,label:"Shield flat"},SHIELD_SCALING:{label:"Shield scaling"},SHIELD_VALUE:{flat:!0,label:"Shield value"},SHIELD_BOOST:{label:"Shield boost"},SKILL_OHB:{label:"Skill Outgoing Healing Boost"},ULT_OHB:{label:"Ult Outgoing Healing Boost"},PHYSICAL_RES_PEN:{label:"Physical RES PEN"},FIRE_RES_PEN:{label:"Fire RES PEN"},ICE_RES_PEN:{label:"Ice RES PEN"},LIGHTNING_RES_PEN:{label:"Lightning RES PEN"},WIND_RES_PEN:{label:"Wind RES PEN"},QUANTUM_RES_PEN:{label:"Quantum RES PEN"},IMAGINARY_RES_PEN:{label:"Imaginary RES PEN"},SUPER_BREAK_DEF_PEN:{label:"Super Break DEF PEN"},SUPER_BREAK_DMG_BOOST:{label:"Super Break DMG Boost"},SUPER_BREAK_VULNERABILITY:{label:"Super Break Vulnerability"},ADDITIONAL_DMG_BOOST:{label:"Additional DMG boost"},ULT_ADDITIONAL_DMG_CR_OVERRIDE:{label:"Ult Additional DMG CR override"},ULT_ADDITIONAL_DMG_CD_OVERRIDE:{label:"Ult Additional DMG CD override"},BASIC_DMG_TYPE:{flat:!0,default:pt,label:"Basic DMG type"},SKILL_DMG_TYPE:{flat:!0,default:W,label:"Skill DMG type"},ULT_DMG_TYPE:{flat:!0,default:$,label:"Ult DMG type"},FUA_DMG_TYPE:{flat:!0,default:et,label:"Fua DMG type"},DOT_DMG_TYPE:{flat:!0,default:ge,label:"Dot DMG type"},BREAK_DMG_TYPE:{flat:!0,default:wt,label:"Break DMG type"},MEMO_SKILL_DMG_TYPE:{flat:!0,default:Fn,label:"Memo Skill DMG type"},MEMO_TALENT_DMG_TYPE:{flat:!0,default:Fn,label:"Memo Talent DMG type"},ADDITIONAL_DMG_TYPE:{flat:!0,default:ba,label:"Additional DMG type"},SUPER_BREAK_DMG_TYPE:{flat:!0,default:wt|eo,label:"Super Break DMG type"}},Nn={ATK_SCALING:{separated:!0,label:"ATK scaling"},DEF_SCALING:{separated:!0,label:"DEF scaling"},HP_SCALING:{separated:!0,label:"HP scaling"},SPECIAL_SCALING:{separated:!0,label:"Special scaling"},ATK_P_BOOST:{label:"ATK % boost"},CR_BOOST:{label:"Crit Rate boost"},CD_BOOST:{label:"Crit DMG boost"},DMG_BOOST:{separated:!0,label:"DMG boost"},VULNERABILITY:{label:"Vulnerability"},RES_PEN:{label:"RES PEN"},DEF_PEN:{label:"DEF PEN"},BREAK_DEF_PEN:{label:"Break DEF PEN"},TOUGHNESS_DMG:{flat:!0,separated:!0,label:"Toughness DMG"},SUPER_BREAK_MODIFIER:{label:"Super Break multiplier"},BREAK_EFFICIENCY_BOOST:{label:"Break Efficiency boost"},TRUE_DMG_MODIFIER:{label:"True DMG multiplier"},FINAL_DMG_BOOST:{label:"Final DMG multiplier"},BREAK_DMG_MODIFIER:{separated:!0,label:"Break DMG multiplier"},ADDITIONAL_DMG_SCALING:{separated:!0,label:"Additional DMG scaling"},ADDITIONAL_DMG:{flat:!0,separated:!0,label:"Additional DMG"},DMG:{flat:!0,label:"DMG"}},Ra={BASIC:"Basic",SKILL:"Skill",ULT:"Ult",FUA:"Fua",DOT:"Dot",BREAK:"Break",MEMO_SKILL:"Memo Skill",MEMO_TALENT:"Memo Talent"},Ma={...Aa,...Object.values(lt).filter(t=>typeof t=="number").reduce((t,e)=>{const n=lt[e];return Object.entries(Nn).forEach(([i,o])=>{t[`${n}_${i}`]={...o,label:`${Ra[n]} ${o.label}`}}),t},{}),...Object.entries(Nn).reduce((t,[e,n])=>(n.separated||(t[e]=n),t),{})},io=Object.fromEntries(Object.entries(Ma).map(([t,e],n)=>{const i=e;return[t,{name:t,index:n,default:i.default??0,flat:i.flat??!1,whole:i.whole??!1,bool:i.bool??!1,category:i.category??1,label:i.label}]})),Ue=Object.fromEntries(Object.entries(io).map(([t,e])=>[t,e.default])),we=Object.values(io).sort((t,e)=>t.index-e.index);function Pa(){function t(e){return{name:e,abilityDmg:0,additionalDmg:0,breakDmg:0,superBreakDmg:0,jointDmg:0,trueDmg:0,dotDmg:0,memoDmg:0}}return{BASIC_DMG:t("BASIC_DMG"),SKILL_DMG:t("SKILL_DMG"),ULT_DMG:t("ULT_DMG"),FUA_DMG:t("FUA_DMG"),DOT_DMG:t("DOT_DMG"),BREAK_DMG:t("BREAK_DMG"),MEMO_SKILL_DMG:t("MEMO_SKILL_DMG"),MEMO_TALENT_DMG:t("MEMO_TALENT_DMG")}}const s=Object.keys(Ue).reduce((t,e,n)=>(t[e]=n,t),{});class He{constructor(e=!1,n=!1,i){U(this,"a",va());U(this,"c");U(this,"m");U(this,"summoner");U(this,"buffs");U(this,"buffsMemo");U(this,"trace");U(this,"dmgSplits");this.c=new he(e,!0,()=>this),this.m=n?null:new He(e,!0,()=>this),this.summoner=n?i:null,this.buffs=[],this.buffsMemo=[],this.trace=e,this.dmgSplits=this.trace?Pa():null,Object.keys(Ue).forEach((o,a)=>{const r=(u,d)=>this.trace&&this.buffs.push({stat:o,key:a,value:u,source:d}),c=(u,d)=>this.trace&&this.buffsMemo.push({stat:o,key:a,value:u,source:d}),l=(u,d)=>this.trace&&(this.buffs=this.buffs.filter(m=>m.key!==a).concat({stat:o,key:a,value:u,source:d})),f=(u,d)=>this.trace&&(this.buffsMemo=this.buffsMemo.filter(m=>m.key!==a).concat({stat:o,key:a,value:u,source:d}));Object.defineProperty(this,o,{value:{buff:(u,d)=>{u!=0&&(this.a[a]+=u,r(u,d))},buffSingle:(u,d)=>{u!=0&&(this.a[s.DEPRIORITIZE_BUFFS]||(this.a[s.MEMO_BUFF_PRIORITY]?(this.m.a[a]+=u,c(u,d)):(this.a[a]+=u,r(u,d))))},buffMemo:(u,d)=>{u!=0&&(this.a[s.DEPRIORITIZE_BUFFS]||this.m&&(this.m.a[a]+=u,c(u,d)))},buffTeam:(u,d)=>{u!=0&&(this.a[a]+=u,r(u,d),this.m&&(this.m.a[a]+=u,c(u,d)))},buffDual:(u,d)=>{u!=0&&(this.a[s.DEPRIORITIZE_BUFFS]||(this.a[a]+=u,r(u,d),this.m&&(this.m.a[a]+=u,c(u,d))))},buffBaseDual:(u,d)=>{u!=0&&(this.a[a]+=u,r(u,d),this.m&&(this.m.a[a]+=u,c(u,d)))},buffBaseDualDynamic:(u,d,m,E)=>{if(!(u<.001)){this.a[a]+=u,r(u,d),this.m&&(this.m.a[a]+=u,c(u,d));for(const C of m.conditionalRegistry[Un[o]]??[])Y(C,this,m,E)}},multiply:(u,d)=>{this.a[a]*=u,r(u,d)},multiplyTeam:(u,d)=>{this.a[a]*=u,r(u,d),this.m&&(this.m.a[a]*=u,c(u,d))},buffDynamic:(u,d,m,E)=>{if(!(u<.001)){this.a[a]+=u,r(u,d);for(const C of m.conditionalRegistry[Un[o]]||[])Y(C,this,m,E)}},set:(u,d)=>{this.a[a]=u,l(u,d)},config:(u,d)=>{this.a[a]=u,l(u,d),this.m&&(this.m.a[a]=u,f(u,d))},get:()=>this.a[a]},writable:!1,enumerable:!0,configurable:!0}),Object.defineProperty(this,`$${o}`,{get:()=>this.a[a],enumerable:!0,configurable:!0})}),Object.defineProperty(this,"#show",{get:()=>this.toComputedStatsObject(),enumerable:!0,configurable:!0})}setPrecompute(e){this.a.set(e),this.buffs=[],this.buffsMemo=[]}tracePrecompute(e){this.buffs=e.buffs,this.buffsMemo=e.buffsMemo}setBasic(e){this.c=e}get(e){return this.a[e]}toComputedStatsObject(){return Ia(this.a)}}function Ia(t){const e={};for(const n in s){const i=n,o=xa[i]??i,a=s[i];e[o]=t[a]}return e}function va(){return Float32Array.from(Object.values(Ue))}const xa={ATK_P:p.ATK_P,ATK:p.ATK,BE:p.BE,CD:p.CD,CR:p.CR,DEF_P:p.DEF_P,DEF:p.DEF,EHR:p.EHR,ERR:p.ERR,FIRE_DMG_BOOST:p.Fire_DMG,HP_P:p.HP_P,HP:p.HP,ICE_DMG_BOOST:p.Ice_DMG,IMAGINARY_DMG_BOOST:p.Imaginary_DMG,LIGHTNING_DMG_BOOST:p.Lightning_DMG,OHB:p.OHB,PHYSICAL_DMG_BOOST:p.Physical_DMG,QUANTUM_DMG_BOOST:p.Quantum_DMG,RES:p.RES,SPD_P:p.SPD_P,SPD:p.SPD,WIND_DMG_BOOST:p.Wind_DMG},Un={ATK_P:p.ATK_P,ATK:p.ATK,BE:p.BE,CD:p.CD,CR:p.CR,DEF_P:p.DEF_P,DEF:p.DEF,EHR:p.EHR,ERR:p.ERR,FIRE_DMG_BOOST:p.Fire_DMG,HP_P:p.HP_P,HP:p.HP,ICE_DMG_BOOST:p.Ice_DMG,IMAGINARY_DMG_BOOST:p.Imaginary_DMG,LIGHTNING_DMG_BOOST:p.Lightning_DMG,OHB:p.OHB,PHYSICAL_DMG_BOOST:p.Physical_DMG,QUANTUM_DMG_BOOST:p.Quantum_DMG,RES:p.RES,SPD_P:p.SPD_P,SPD:p.SPD,WIND_DMG_BOOST:p.Wind_DMG},Ga={[gt.Physical]:s.PHYSICAL_RES_PEN,[gt.Fire]:s.FIRE_RES_PEN,[gt.Ice]:s.ICE_RES_PEN,[gt.Lightning]:s.LIGHTNING_RES_PEN,[gt.Wind]:s.WIND_RES_PEN,[gt.Quantum]:s.QUANTUM_RES_PEN,[gt.Imaginary]:s.IMAGINARY_RES_PEN};function ka(t,e){return t.a[Ga[e]]}const ao={[p.Physical_DMG]:s.PHYSICAL_DMG_BOOST,[p.Fire_DMG]:s.FIRE_DMG_BOOST,[p.Ice_DMG]:s.ICE_DMG_BOOST,[p.Lightning_DMG]:s.LIGHTNING_DMG_BOOST,[p.Wind_DMG]:s.WIND_DMG_BOOST,[p.Quantum_DMG]:s.QUANTUM_DMG_BOOST,[p.Imaginary_DMG]:s.IMAGINARY_DMG_BOOST};function Fa(t,e){return t.a[ao[e]]}function wn(t,e,n){const i=ao[e];t.a[i]+=n}const ke={[p.ATK_P]:s.ATK_P,[p.ATK]:s.ATK,[p.BE]:s.BE,[p.CD]:s.CD,[p.CR]:s.CR,[p.DEF_P]:s.DEF_P,[p.DEF]:s.DEF,[p.EHR]:s.EHR,[p.ERR]:s.ERR,[p.Fire_DMG]:s.FIRE_DMG_BOOST,[p.HP_P]:s.HP_P,[p.HP]:s.HP,[p.Ice_DMG]:s.ICE_DMG_BOOST,[p.Imaginary_DMG]:s.IMAGINARY_DMG_BOOST,[p.Lightning_DMG]:s.LIGHTNING_DMG_BOOST,[p.OHB]:s.OHB,[p.Physical_DMG]:s.PHYSICAL_DMG_BOOST,[p.Quantum_DMG]:s.QUANTUM_DMG_BOOST,[p.RES]:s.RES,[p.SPD_P]:s.SPD_P,[p.SPD]:s.SPD,[p.Wind_DMG]:s.WIND_DMG_BOOST};var Ft=(t=>(t[t.MAIN=0]="MAIN",t[t.MEMO=1]="MEMO",t[t.DUAL=2]="DUAL",t[t.TEAM=3]="TEAM",t[t.SINGLE=4]="SINGLE",t))(Ft||{});function _(t,e,n,i){switch(t){case 0:e.buff(n,i);break;case 1:e.buffMemo(n,i);break;case 2:e.buffDual(n,i);break;case 3:e.buffTeam(n,i);break;case 4:e.buffSingle(n,i);break}}function Jl(t){return~t}function Ql(t,e,n,i,o=0){n!=0&&(e&t.a[s.BASIC_DMG_TYPE]&&_(o,t.BASIC_TRUE_DMG_MODIFIER,n,i),e&t.a[s.SKILL_DMG_TYPE]&&_(o,t.SKILL_TRUE_DMG_MODIFIER,n,i),e&t.a[s.ULT_DMG_TYPE]&&_(o,t.ULT_TRUE_DMG_MODIFIER,n,i),e&t.a[s.FUA_DMG_TYPE]&&_(o,t.FUA_TRUE_DMG_MODIFIER,n,i),e&t.a[s.DOT_DMG_TYPE]&&_(o,t.DOT_TRUE_DMG_MODIFIER,n,i),e&t.a[s.BREAK_DMG_TYPE]&&_(o,t.BREAK_TRUE_DMG_MODIFIER,n,i),e&t.a[s.MEMO_SKILL_DMG_TYPE]&&_(o,t.MEMO_SKILL_TRUE_DMG_MODIFIER,n,i),e&t.a[s.MEMO_TALENT_DMG_TYPE]&&_(o,t.MEMO_TALENT_TRUE_DMG_MODIFIER,n,i))}function A(t,e,n,i,o=0){n!=0&&(e&t.a[s.BASIC_DMG_TYPE]&&_(o,t.BASIC_DMG_BOOST,n,i),e&t.a[s.SKILL_DMG_TYPE]&&_(o,t.SKILL_DMG_BOOST,n,i),e&t.a[s.ULT_DMG_TYPE]&&_(o,t.ULT_DMG_BOOST,n,i),e&t.a[s.FUA_DMG_TYPE]&&_(o,t.FUA_DMG_BOOST,n,i),e&t.a[s.DOT_DMG_TYPE]&&_(o,t.DOT_DMG_BOOST,n,i),e&t.a[s.BREAK_DMG_TYPE]&&_(o,t.BREAK_DMG_BOOST,n,i),e&t.a[s.MEMO_SKILL_DMG_TYPE]&&_(o,t.MEMO_SKILL_DMG_BOOST,n,i),e&t.a[s.MEMO_TALENT_DMG_TYPE]&&_(o,t.MEMO_TALENT_DMG_BOOST,n,i),e&t.a[s.ADDITIONAL_DMG_TYPE]&&_(o,t.ADDITIONAL_DMG_BOOST,n,i),e&t.a[s.SUPER_BREAK_DMG_TYPE]&&_(o,t.SUPER_BREAK_DMG_BOOST,n,i))}function Na(t,e,n,i,o=0){n!=0&&(e&t.a[s.BASIC_DMG_TYPE]&&_(o,t.BASIC_VULNERABILITY,n,i),e&t.a[s.SKILL_DMG_TYPE]&&_(o,t.SKILL_VULNERABILITY,n,i),e&t.a[s.ULT_DMG_TYPE]&&_(o,t.ULT_VULNERABILITY,n,i),e&t.a[s.FUA_DMG_TYPE]&&_(o,t.FUA_VULNERABILITY,n,i),e&t.a[s.DOT_DMG_TYPE]&&_(o,t.DOT_VULNERABILITY,n,i),e&t.a[s.BREAK_DMG_TYPE]&&_(o,t.BREAK_VULNERABILITY,n,i),e&t.a[s.MEMO_SKILL_DMG_TYPE]&&_(o,t.MEMO_SKILL_VULNERABILITY,n,i),e&t.a[s.MEMO_TALENT_DMG_TYPE]&&_(o,t.MEMO_TALENT_VULNERABILITY,n,i),e&t.a[s.SUPER_BREAK_DMG_TYPE]&&_(o,t.SUPER_BREAK_VULNERABILITY,n,i))}function Zl(t,e,n,i,o=0){n!=0&&(e&t.a[s.BASIC_DMG_TYPE]&&_(o,t.BASIC_RES_PEN,n,i),e&t.a[s.SKILL_DMG_TYPE]&&_(o,t.SKILL_RES_PEN,n,i),e&t.a[s.ULT_DMG_TYPE]&&_(o,t.ULT_RES_PEN,n,i),e&t.a[s.FUA_DMG_TYPE]&&_(o,t.FUA_RES_PEN,n,i),e&t.a[s.DOT_DMG_TYPE]&&_(o,t.DOT_RES_PEN,n,i),e&t.a[s.BREAK_DMG_TYPE]&&_(o,t.BREAK_RES_PEN,n,i),e&t.a[s.MEMO_SKILL_DMG_TYPE]&&_(o,t.MEMO_SKILL_RES_PEN,n,i),e&t.a[s.MEMO_TALENT_DMG_TYPE]&&_(o,t.MEMO_TALENT_RES_PEN,n,i))}function Dt(t,e,n,i,o=0){n!=0&&(e&t.a[s.BASIC_DMG_TYPE]&&_(o,t.BASIC_DEF_PEN,n,i),e&t.a[s.SKILL_DMG_TYPE]&&_(o,t.SKILL_DEF_PEN,n,i),e&t.a[s.ULT_DMG_TYPE]&&_(o,t.ULT_DEF_PEN,n,i),e&t.a[s.FUA_DMG_TYPE]&&_(o,t.FUA_DEF_PEN,n,i),e&t.a[s.DOT_DMG_TYPE]&&_(o,t.DOT_DEF_PEN,n,i),e&t.a[s.BREAK_DMG_TYPE]&&_(o,t.BREAK_DEF_PEN,n,i),e&t.a[s.MEMO_SKILL_DMG_TYPE]&&_(o,t.MEMO_SKILL_DEF_PEN,n,i),e&t.a[s.MEMO_TALENT_DMG_TYPE]&&_(o,t.MEMO_TALENT_DEF_PEN,n,i),e&t.a[s.SUPER_BREAK_DMG_TYPE]&&_(o,t.SUPER_BREAK_DEF_PEN,n,i))}function Xl(t,e,n,i,o=0){n!=0&&(e&t.a[s.BASIC_DMG_TYPE]&&_(o,t.BASIC_CR_BOOST,n,i),e&t.a[s.SKILL_DMG_TYPE]&&_(o,t.SKILL_CR_BOOST,n,i),e&t.a[s.ULT_DMG_TYPE]&&_(o,t.ULT_CR_BOOST,n,i),e&t.a[s.FUA_DMG_TYPE]&&_(o,t.FUA_CR_BOOST,n,i),e&t.a[s.MEMO_SKILL_DMG_TYPE]&&_(o,t.MEMO_SKILL_CR_BOOST,n,i),e&t.a[s.MEMO_TALENT_DMG_TYPE]&&_(o,t.MEMO_TALENT_CR_BOOST,n,i))}function Ua(t,e,n,i,o=0){n!=0&&(e&t.a[s.BASIC_DMG_TYPE]&&_(o,t.BASIC_CD_BOOST,n,i),e&t.a[s.SKILL_DMG_TYPE]&&_(o,t.SKILL_CD_BOOST,n,i),e&t.a[s.ULT_DMG_TYPE]&&_(o,t.ULT_CD_BOOST,n,i),e&t.a[s.FUA_DMG_TYPE]&&_(o,t.FUA_CD_BOOST,n,i),e&t.a[s.MEMO_SKILL_DMG_TYPE]&&_(o,t.MEMO_SKILL_CD_BOOST,n,i),e&t.a[s.MEMO_TALENT_DMG_TYPE]&&_(o,t.MEMO_TALENT_CD_BOOST,n,i))}var wa=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.CollapsingSky"),{SOURCE_LC:i}=h.lightCone("20002"),o=[.2,.25,.3,.35,.4],a={basicSkillDmgBuff:!0},r={basicSkillDmgBuff:{lc:!0,formItem:"switch",id:"basicSkillDmgBuff",text:n("Content.basicSkillDmgBuff.text"),content:n("Content.basicSkillDmgBuff.content",{DmgBuff:g.precisionRound(100*o[t])})}};return{content:()=>Object.values(r),defaults:()=>a,precomputeEffects:(c,l,f)=>{const u=l.lightConeConditionals;A(c,pt|W,u.basicSkillDmgBuff?o[t]:0,i)},finalizeCalculations:()=>{}}},Ha=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.Cornucopia"),{SOURCE_LC:i}=h.lightCone("20001"),o=[.12,.15,.18,.21,.24],a={healingBuff:!0},r={healingBuff:{lc:!0,id:"healingBuff",formItem:"switch",text:n("Content.healingBuff.text"),content:n("Content.healingBuff.content",{HealingBuff:g.precisionRound(100*o[t])})}};return{content:()=>Object.values(r),defaults:()=>a,precomputeEffects:(c,l,f)=>{const u=l.lightConeConditionals;c.SKILL_OHB.buff(u.healingBuff?o[t]:0,i),c.ULT_OHB.buff(u.healingBuff?o[t]:0,i)},finalizeCalculations:()=>{}}},Ka=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.DartingArrow"),{SOURCE_LC:i}=h.lightCone("20007"),o=[.24,.3,.36,.42,.48],a={defeatedEnemyAtkBuff:!0},r={defeatedEnemyAtkBuff:{lc:!0,id:"defeatedEnemyAtkBuff",formItem:"switch",text:n("Content.defeatedEnemyAtkBuff.text"),content:n("Content.defeatedEnemyAtkBuff.content",{AtkBuff:g.precisionRound(100*o[t])})}};return{content:()=>Object.values(r),defaults:()=>a,precomputeEffects:(c,l,f)=>{const u=l.lightConeConditionals;c.ATK_P.buff(u.defeatedEnemyAtkBuff?o[t]:0,i)},finalizeCalculations:()=>{}}},Va=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.DataBank"),{SOURCE_LC:i}=h.lightCone("20006"),o=[.28,.35,.42,.49,.56],a={ultDmgBuff:!0},r={ultDmgBuff:{lc:!0,id:"ultDmgBuff",formItem:"switch",text:n("Content.ultDmgBuff.text"),content:n("Content.ultDmgBuff.content",{DmgBuff:g.precisionRound(100*o[t])})}};return{content:()=>Object.values(r),defaults:()=>a,precomputeEffects:(c,l,f)=>{const u=l.lightConeConditionals;A(c,$,u.ultDmgBuff?o[t]:0,i)},finalizeCalculations:()=>{}}},ja=()=>({content:()=>[],defaults:()=>({}),precomputeEffects:()=>{},finalizeCalculations:()=>{}}),za=()=>({content:()=>[],defaults:()=>({}),precomputeEffects:()=>{},finalizeCalculations:()=>{}}),$a=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.HiddenShadow");h.lightCone("20018");const i=[.6,.75,.9,1.05,1.2],o={basicAtkBuff:!0},a={basicAtkBuff:{lc:!0,id:"basicAtkBuff",formItem:"switch",text:n("Content.basicAtkBuff.text"),content:n("Content.basicAtkBuff.content",{MultiplierBonus:g.precisionRound(100*i[t])})}};return{content:()=>Object.values(a),defaults:()=>o,precomputeEffects:(r,c,l)=>{c.lightConeConditionals},finalizeCalculations:(r,c,l)=>{const f=c.lightConeConditionals;r.BASIC_ADDITIONAL_DMG.buff((f.basicAtkBuff?i[t]:0)*r.a[s.ATK],h.NONE)},gpuFinalizeCalculations:(r,c)=>{const l=r.lightConeConditionals;return`
if (${vt(l.basicAtkBuff)}) {
  x.BASIC_ADDITIONAL_DMG += ${i[t]} * x.ATK;
}
      `}}},Wa=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.Loop"),{SOURCE_LC:i}=h.lightCone("20011"),o=[.24,.3,.36,.42,.48],a={enemySlowedDmgBuff:!0},r={enemySlowedDmgBuff:{lc:!0,id:"enemySlowedDmgBuff",formItem:"switch",text:n("Content.enemySlowedDmgBuff.text"),content:n("Content.enemySlowedDmgBuff.content",{DmgBuff:g.precisionRound(100*o[t])})}};return{content:()=>Object.values(r),defaults:()=>a,precomputeEffects:(c,l,f)=>{const u=l.lightConeConditionals;c.ELEMENTAL_DMG.buff(u.enemySlowedDmgBuff?o[t]:0,i)},finalizeCalculations:()=>{}}},Ya=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.Mediation"),{SOURCE_LC:i}=h.lightCone("20019"),o=[12,14,16,18,20],a={initialSpdBuff:!1},r={initialSpdBuff:!1},c={initialSpdBuff:{lc:!0,id:"initialSpdBuff",formItem:"switch",text:n("Content.initialSpdBuff.text"),content:n("Content.initialSpdBuff.content",{SpdBuff:o[t]})}},l={initialSpdBuff:c.initialSpdBuff};return{content:()=>Object.values(c),teammateContent:()=>Object.values(l),defaults:()=>a,teammateDefaults:()=>r,precomputeEffects:()=>{},precomputeMutualEffects:(f,u,d)=>{const m=u.lightConeConditionals;f.SPD.buffTeam(m.initialSpdBuff?o[t]:0,i)},finalizeCalculations:()=>{}}},Ja=()=>({content:()=>[],defaults:()=>({}),precomputeEffects:()=>{},finalizeCalculations:()=>{}}),Qa=()=>({content:()=>[],defaults:()=>({}),precomputeEffects:()=>{},finalizeCalculations:()=>{}}),Za=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.MutualDemise"),{SOURCE_LC:i}=h.lightCone("20016"),o=[.12,.15,.18,.21,.24],a={selfHp80CrBuff:!0},r={selfHp80CrBuff:{lc:!0,id:"selfHp80CrBuff",formItem:"switch",text:n("Content.selfHp80CrBuff.text"),content:n("Content.selfHp80CrBuff.content",{CritBuff:g.precisionRound(100*o[t])})}};return{content:()=>Object.values(r),defaults:()=>a,precomputeEffects:(c,l,f)=>{const u=l.lightConeConditionals;c.CR.buff(u.selfHp80CrBuff?o[t]:0,i)},finalizeCalculations:()=>{}}},Xa=()=>({content:()=>[],defaults:()=>({}),precomputeEffects:()=>{},finalizeCalculations:()=>{}}),qa=()=>({content:()=>[],defaults:()=>({}),precomputeEffects:()=>{},finalizeCalculations:()=>{}}),ts=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.Reminiscence"),{SOURCE_LC:i}=h.lightCone("20022"),o=[.08,.09,.1,.11,.12],a={dmgStacks:4},r={dmgStacks:{lc:!0,id:"dmgStacks",formItem:"slider",text:n("Content.dmgStacks.text"),content:n("Content.dmgStacks.content",{DmgBuff:g.precisionRound(o[t]*100)}),min:0,max:4}};return{content:()=>Object.values(r),defaults:()=>a,precomputeEffects:(c,l,f)=>{const u=l.lightConeConditionals;c.ELEMENTAL_DMG.buffDual(u.dmgStacks*o[t],i)},finalizeCalculations:()=>{}}},es=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.Sagacity"),{SOURCE_LC:i}=h.lightCone("20020"),o=[.24,.3,.36,.42,.48],a={postUltAtkBuff:!0},r={postUltAtkBuff:{lc:!0,id:"postUltAtkBuff",formItem:"switch",text:n("Content.postUltAtkBuff.text"),content:n("Content.postUltAtkBuff.content",{AtkBuff:g.precisionRound(100*o[t])})}};return{content:()=>Object.values(r),defaults:()=>a,precomputeEffects:(c,l,f)=>{const u=l.lightConeConditionals;c.ATK_P.buff(u.postUltAtkBuff?o[t]:0,i)},finalizeCalculations:()=>{}}},ns=()=>({content:()=>[],defaults:()=>({}),precomputeEffects:()=>{},finalizeCalculations:()=>{}}),os=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.ShatteredHome"),{SOURCE_LC:i}=h.lightCone("20009"),o=[.2,.25,.3,.35,.4],a={enemyHp50Buff:!0},r={enemyHp50Buff:{lc:!0,id:"enemyHp50Buff",formItem:"switch",text:n("Content.enemyHp50Buff.text"),content:n("Content.enemyHp50Buff.content",{DmgBuff:g.precisionRound(100*o[t])})}};return{content:()=>Object.values(r),defaults:()=>a,precomputeEffects:(c,l,f)=>{const u=l.lightConeConditionals;c.ELEMENTAL_DMG.buff(u.enemyHp50Buff?o[t]:0,i)},finalizeCalculations:()=>{}}},is=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.Void"),{SOURCE_LC:i}=h.lightCone("20004"),o=[.2,.25,0,30,.35,.4],a={initialEhrBuff:!0},r={initialEhrBuff:{lc:!0,id:"initialEhrBuff",formItem:"switch",text:n("Content.initialEhrBuff.text"),content:n("Content.initialEhrBuff.content",{EhrBuff:g.precisionRound(100*o[t])})}};return{content:()=>Object.values(r),defaults:()=>a,precomputeEffects:(c,l,f)=>{const u=l.lightConeConditionals;c.EHR.buff(u.initialEhrBuff?o[t]:0,i)},finalizeCalculations:()=>{}}},as=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.AfterTheCharmonyFall"),{SOURCE_LC:i}=h.lightCone("21045"),o=[.08,.1,.12,.14,.16],a={spdBuff:!0},r={spdBuff:{lc:!0,id:"spdBuff",formItem:"switch",text:n("Content.spdBuff.text"),content:n("Content.spdBuff.content",{SpdBuff:g.precisionRound(100*o[t])})}};return{content:()=>Object.values(r),defaults:()=>a,precomputeEffects:(c,l,f)=>{const u=l.lightConeConditionals;c.SPD_P.buff(u.spdBuff?o[t]:0,i)},finalizeCalculations:()=>{}}},ss=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.ASecretVow"),{SOURCE_LC:i}=h.lightCone("21012"),o=[.2,.25,.3,.35,.4],a={enemyHpHigherDmgBoost:!0},r={enemyHpHigherDmgBoost:{lc:!0,id:"enemyHpHigherDmgBoost",formItem:"switch",text:n("Content.enemyHpHigherDmgBoost.text"),content:n("Content.enemyHpHigherDmgBoost.content",{DmgBuff:g.precisionRound(100*o[t])})}};return{content:()=>Object.values(r),defaults:()=>a,precomputeEffects:(c,l,f)=>{const u=l.lightConeConditionals;c.ELEMENTAL_DMG.buff(o[t],i),c.ELEMENTAL_DMG.buff(u.enemyHpHigherDmgBoost?o[t]:0,i)},finalizeCalculations:()=>{}}},rs=()=>({content:()=>[],defaults:()=>({}),precomputeEffects:()=>{},finalizeCalculations:()=>{}}),ls=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.BoundlessChoreo"),{SOURCE_LC:i}=h.lightCone("21044"),o=[.24,.3,.36,.42,.48],a={enemyDefReducedSlowed:!0},r={enemyDefReducedSlowed:{lc:!0,id:"enemyDefReducedSlowed",formItem:"switch",text:n("Content.enemyDefReducedSlowed.text"),content:n("Content.enemyDefReducedSlowed.content",{CritBuff:g.precisionRound(100*o[t])})}};return{content:()=>Object.values(r),defaults:()=>a,precomputeEffects:(c,l,f)=>{const u=l.lightConeConditionals;c.CD.buff(u.enemyDefReducedSlowed?o[t]:0,i)},finalizeCalculations:()=>{}}},cs=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.CarveTheMoonWeaveTheClouds"),{SOURCE_LC:i}=h.lightCone("21032"),o=[.1,.125,.15,.175,.2],a=[.12,.15,.18,.21,.24],r=[.06,.075,.09,.105,.12],c={atkBuffActive:!0,cdBuffActive:!1,errBuffActive:!1},l={atkBuffActive:!0,cdBuffActive:!1,errBuffActive:!1},f={atkBuffActive:{lc:!0,id:"atkBuffActive",formItem:"switch",text:n("Content.atkBuffActive.text"),content:n("Content.atkBuffActive.content",{AtkBuff:g.precisionRound(100*o[t]),CritBuff:g.precisionRound(100*a[t]),RegenBuff:g.precisionRound(100*r[t])})},cdBuffActive:{lc:!0,id:"cdBuffActive",formItem:"switch",text:n("Content.cdBuffActive.text"),content:n("Content.cdBuffActive.content",{AtkBuff:g.precisionRound(100*o[t]),CritBuff:g.precisionRound(100*a[t]),RegenBuff:g.precisionRound(100*r[t])})},errBuffActive:{lc:!0,id:"errBuffActive",formItem:"switch",text:n("Content.errBuffActive.text"),content:n("Content.errBuffActive.content",{AtkBuff:g.precisionRound(100*o[t]),CritBuff:g.precisionRound(100*a[t]),RegenBuff:g.precisionRound(100*r[t])})}},u={atkBuffActive:f.atkBuffActive,cdBuffActive:f.cdBuffActive,errBuffActive:f.errBuffActive};return{content:()=>Object.values(f),teammateContent:()=>Object.values(u),defaults:()=>c,teammateDefaults:()=>l,precomputeEffects:()=>{},precomputeMutualEffects:(d,m,E)=>{const C=m.lightConeConditionals;d.ATK_P.buffTeam(C.atkBuffActive?o[t]:0,i),d.CD.buffTeam(C.cdBuffActive?a[t]:0,i),d.ERR.buffTeam(C.errBuffActive?r[t]:0,i)},finalizeCalculations:()=>{}}},us=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.ConcertForTwo"),{SOURCE_LC:i}=h.lightCone("21043"),o=[.04,.05,.06,.07,.08],a={teammateShieldStacks:4},r={teammateShieldStacks:{lc:!0,id:"teammateShieldStacks",formItem:"slider",text:n("Content.teammateShieldStacks.text"),content:n("Content.teammateShieldStacks.content",{DmgBuff:g.precisionRound(100*o[t])}),min:0,max:4}};return{content:()=>Object.values(r),defaults:()=>a,precomputeEffects:(c,l,f)=>{const u=l.lightConeConditionals;c.ELEMENTAL_DMG.buff(u.teammateShieldStacks*o[t],i)},finalizeCalculations:()=>{}}},fs=()=>({content:()=>[],defaults:()=>({}),precomputeEffects:()=>{},finalizeCalculations:()=>{}}),ds=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.DayOneOfMyNewLife"),{SOURCE_LC:i}=h.lightCone("21002"),o=[.08,.09,.1,.11,.12],a={dmgResBuff:!0},r={dmgResBuff:!0},c={dmgResBuff:{lc:!0,id:"dmgResBuff",formItem:"switch",text:n("Content.dmgResBuff.text"),content:n("Content.dmgResBuff.content",{ResBuff:g.precisionRound(100*o[t])})}},l={dmgResBuff:c.dmgResBuff};return{content:()=>Object.values(c),teammateContent:()=>Object.values(l),defaults:()=>a,teammateDefaults:()=>r,precomputeEffects:()=>{},precomputeMutualEffects:(f,u,d)=>{const m=u.lightConeConditionals;f.DMG_RED_MULTI.multiplyTeam(m.dmgResBuff?1-o[t]:1,i)},finalizeCalculations:()=>{}}},ms=(t,e)=>{const{SOURCE_LC:n}=h.lightCone("21039"),i=[.008,.009,.01,.011,.012],o=[.32,.36,.4,.44,.48];return{content:()=>[],defaults:()=>({}),precomputeEffects:()=>{},finalizeCalculations:(a,r,c)=>{a.ELEMENTAL_DMG.buff(Math.min(o[t],Math.floor(a.a[s.DEF]/100)*i[t]),n)},gpuFinalizeCalculations:()=>`
x.ELEMENTAL_DMG += min(${o[t]}, floor(x.DEF / 100) * ${i[t]});
      `}},ps=()=>({content:()=>[],defaults:()=>({}),precomputeEffects:()=>{},finalizeCalculations:()=>{}}),gs=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.DreamvilleAdventure"),{SOURCE_LC:i}=h.lightCone("21036"),o=[.12,.14,.16,.18,.2],a={ultDmgBuff:!1,skillDmgBuff:!1,basicDmgBuff:!1},r={ultDmgBuff:!1,skillDmgBuff:!1,basicDmgBuff:!1},c={ultDmgBuff:{lc:!0,id:"ultDmgBuff",formItem:"switch",text:n("Content.ultDmgBuff.text"),content:n("Content.ultDmgBuff.content",{DmgBuff:g.precisionRound(100*o[t])})},skillDmgBuff:{lc:!0,id:"skillDmgBuff",formItem:"switch",text:n("Content.skillDmgBuff.text"),content:n("Content.skillDmgBuff.content",{DmgBuff:g.precisionRound(100*o[t])})},basicDmgBuff:{lc:!0,id:"basicDmgBuff",formItem:"switch",text:n("Content.basicDmgBuff.text"),content:n("Content.basicDmgBuff.content",{DmgBuff:g.precisionRound(100*o[t])})}},l={ultDmgBuff:c.ultDmgBuff,skillDmgBuff:c.skillDmgBuff,basicDmgBuff:c.basicDmgBuff};return{content:()=>Object.values(c),teammateContent:()=>Object.values(l),defaults:()=>a,teammateDefaults:()=>r,precomputeEffects:()=>{},precomputeMutualEffects:(f,u,d)=>{const m=u.lightConeConditionals;A(f,pt,m.basicDmgBuff?o[t]:0,i,Ft.TEAM),A(f,W,m.skillDmgBuff?o[t]:0,i,Ft.TEAM),A(f,$,m.ultDmgBuff?o[t]:0,i,Ft.TEAM)},finalizeCalculations:()=>{}}},hs=(t,e)=>{const{SOURCE_LC:n}=h.lightCone("21008"),i=[.24,.3,.36,.42,.48];return{content:()=>[],defaults:()=>({}),precomputeEffects:o=>{A(o,ge,i[t],n)},finalizeCalculations:()=>{}}},Es=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.Fermata"),{SOURCE_LC:i}=h.lightCone("21022"),o=[.16,.2,.24,.28,.32],a={enemyShockWindShear:!0},r={enemyShockWindShear:{lc:!0,id:"enemyShockWindShear",formItem:"switch",text:n("Content.enemyShockWindShear.text"),content:n("Content.enemyShockWindShear.content",{DmgBuff:g.precisionRound(100*o[t])})}};return{content:()=>Object.values(r),defaults:()=>a,precomputeEffects:(c,l,f)=>{const u=l.lightConeConditionals;c.ELEMENTAL_DMG.buff(u.enemyShockWindShear?o[t]:0,i)},finalizeCalculations:()=>{}}},Cs=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.FinalVictor"),{SOURCE_LC:i}=h.lightCone("21037"),o=[.08,.09,.1,.11,.12],a={goodFortuneStacks:4},r={goodFortuneStacks:{lc:!0,id:"goodFortuneStacks",formItem:"slider",text:n("Content.goodFortuneStacks.text"),content:n("Content.goodFortuneStacks.content",{CritBuff:g.precisionRound(100*o[t])}),min:0,max:4}};return{content:()=>Object.values(r),defaults:()=>a,precomputeEffects:(c,l,f)=>{const u=l.lightConeConditionals;c.CD.buff(u.goodFortuneStacks*o[t],i)},finalizeCalculations:()=>{}}},Ds=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.FlamesAfar"),{SOURCE_LC:i}=h.lightCone("21038"),o=[.25,.3125,.375,.4375,.5],a={dmgBuff:!0},r={dmgBuff:{lc:!0,id:"dmgBuff",formItem:"switch",text:n("Content.dmgBuff.text"),content:n("Content.dmgBuff.content",{DmgBuff:g.precisionRound(100*o[t])})}};return{content:()=>Object.values(r),defaults:()=>a,precomputeEffects:(c,l,f)=>{const u=l.lightConeConditionals;c.ELEMENTAL_DMG.buff(u.dmgBuff?o[t]:0,i)},finalizeCalculations:()=>{}}},Ss=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.ForTomorrowsJourney"),{SOURCE_LC:i}=h.lightCone("22002"),o=[.18,.21,.24,.27,.3],a={ultDmgBuff:!0},r={ultDmgBuff:{lc:!0,id:"ultDmgBuff",formItem:"switch",text:n("Content.ultDmgBuff.text"),content:n("Content.ultDmgBuff.content",{DmgBuff:g.precisionRound(100*o[t])})}};return{content:()=>Object.values(r),defaults:()=>a,precomputeEffects:(c,l,f)=>{const u=l.lightConeConditionals;c.ELEMENTAL_DMG.buff(u.ultDmgBuff?o[t]:0,i)},finalizeCalculations:()=>{}}},_s=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.GeniusesGreetings"),{SOURCE_LC:i}=h.lightCone("21051"),o=[.2,.25,.3,.35,.4],a={basicDmgBoost:!0},r={basicDmgBoost:{lc:!0,id:"basicDmgBoost",formItem:"switch",text:n("Content.basicDmgBoost.text"),content:n("Content.basicDmgBoost.content",{DmgBuff:g.precisionRound(o[t]*100)})}};return{content:()=>Object.values(r),defaults:()=>a,precomputeEffects:(c,l,f)=>{const u=l.lightConeConditionals;c.BASIC_DMG_BOOST.buffDual(u.basicDmgBoost?o[t]:0,i)},finalizeCalculations:()=>{}}},Bs=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.GeniusesRepose"),{SOURCE_LC:i}=h.lightCone("21020"),o=[.24,.3,.36,.42,.48],a={defeatedEnemyCdBuff:!0},r={defeatedEnemyCdBuff:{lc:!0,id:"defeatedEnemyCdBuff",formItem:"switch",text:n("Content.defeatedEnemyCdBuff.text"),content:n("Content.defeatedEnemyCdBuff.content",{DmgBuff:g.precisionRound(100*o[t])})}};return{content:()=>Object.values(r),defaults:()=>a,precomputeEffects:(c,l,f)=>{const u=l.lightConeConditionals;c.CD.buff(u.defeatedEnemyCdBuff?o[t]:0,i)},finalizeCalculations:()=>{}}},bs=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.GoodNightAndSleepWell"),{SOURCE_LC:i}=h.lightCone("21001"),o=[.12,.15,.18,.21,.24],a={debuffStacksDmgIncrease:3},r={debuffStacksDmgIncrease:{lc:!0,id:"debuffStacksDmgIncrease",formItem:"slider",text:n("Content.debuffStacksDmgIncrease.text"),content:n("Content.debuffStacksDmgIncrease.content",{DmgBuff:g.precisionRound(100*o[t])}),min:0,max:3}};return{content:()=>Object.values(r),defaults:()=>a,precomputeEffects:(c,l,f)=>{const u=l.lightConeConditionals;c.ELEMENTAL_DMG.buff(u.debuffStacksDmgIncrease*o[t],i)},finalizeCalculations:()=>{}}},Ts=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.HeyOverHere"),{SOURCE_LC:i}=h.lightCone("22001"),o=[.16,.19,.22,.25,.28],a={postSkillHealBuff:!0},r={postSkillHealBuff:{lc:!0,id:"postSkillHealBuff",formItem:"switch",text:n("Content.postSkillHealBuff.text"),content:n("Content.postSkillHealBuff.content",{HealingBoost:g.precisionRound(100*o[t])})}};return{content:()=>Object.values(r),defaults:()=>a,precomputeEffects:(c,l,f)=>{const u=l.lightConeConditionals;c.OHB.buff(u.postSkillHealBuff?o[t]:0,i)},finalizeCalculations:()=>{}}},ys=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.IndeliblePromise"),{SOURCE_LC:i}=h.lightCone("21042"),o=[.15,.1875,.225,.2625,.3],a={crBuff:!0},r={crBuff:{lc:!0,id:"crBuff",formItem:"switch",text:n("Content.crBuff.text"),content:n("Content.crBuff.content",{CritBuff:g.precisionRound(100*o[t])})}};return{content:()=>Object.values(r),defaults:()=>a,precomputeEffects:(c,l,f)=>{const u=l.lightConeConditionals;c.CR.buff(u.crBuff?o[t]:0,i)},finalizeCalculations:()=>{}}},Os=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.ItsShowtime"),{SOURCE_LC:i}=h.lightCone("21041"),o=[.06,.07,.08,.09,.1],a=[.2,.24,.28,.32,.36],r={trickStacks:3},c={trickStacks:{lc:!0,id:"trickStacks",formItem:"slider",text:n("Content.trickStacks.text"),content:n("Content.trickStacks.content",{DmgBuff:g.precisionRound(100*o[t]),AtkBuff:g.precisionRound(100*a[t])}),min:0,max:3}};return{content:()=>Object.values(c),defaults:()=>r,precomputeEffects:(l,f,u)=>{const d=f.lightConeConditionals;l.ELEMENTAL_DMG.buff(d.trickStacks*o[t],i)},finalizeCalculations:()=>{},dynamicConditionals:[{id:"ItsShowtimeConversionConditional",type:nt.ABILITY,activation:Q.SINGLE,dependsOn:[p.EHR],chainsTo:[p.ATK],condition:function(l,f,u){return l.a[s.EHR]>=.8},effect:function(l,f,u){l.ATK.buffDynamic(a[t]*u.baseATK,i,f,u)},gpu:function(l,f){return ot(this,`
if (
  (*p_state).ItsShowtimeConversionConditional == 0.0 &&
  x.EHR >= 0.80
) {
  (*p_state).ItsShowtimeConversionConditional = 1.0;
  (*p_x).ATK += ${a[t]} * baseATK;
}
    `)}}]}},Ls=(t,e)=>{const{SOURCE_LC:n}=h.lightCone("21009"),i=[.16,.18,.2,.22,.24];return{content:()=>[],defaults:()=>({}),precomputeEffects:o=>{o.DMG_RED_MULTI.multiply(1-i[t],n)},finalizeCalculations:()=>{}}},As=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.MakeTheWorldClamor"),{SOURCE_LC:i}=h.lightCone("21013"),o=[.32,.4,.48,.56,.64],a=[20,23,26,29,32],r={ultDmgBuff:!0},c={ultDmgBuff:{lc:!0,id:"ultDmgBuff",formItem:"switch",text:n("Content.ultDmgBuff.text"),content:n("Content.ultDmgBuff.content",{Energy:a[t],DmgBuff:g.precisionRound(100*o[t])})}};return{content:()=>Object.values(c),defaults:()=>r,precomputeEffects:(l,f,u)=>{const d=f.lightConeConditionals;A(l,$,d.ultDmgBuff?o[t]:0,i)},finalizeCalculations:()=>{}}},Rs=()=>({content:()=>[],defaults:()=>({}),precomputeEffects:()=>{},finalizeCalculations:()=>{}}),Ms=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.NinjaRecordSoundHunt"),{SOURCE_LC:i}=h.lightCone("22003"),o=[.18,.225,.27,.315,.36],a={cdBuff:!0},r={cdBuff:{lc:!0,id:"cdBuff",formItem:"switch",text:n("Content.cdBuff.text"),content:n("Content.cdBuff.content",{sValuesCd:g.precisionRound(100*o[t])})}};return{content:()=>Object.values(r),defaults:()=>a,precomputeEffects:(c,l,f)=>{const u=l.lightConeConditionals;c.CD.buff(u.cdBuff?o[t]:0,i)},finalizeCalculations:()=>{}}},Ps=()=>({content:()=>[],defaults:()=>({}),precomputeEffects:()=>{},finalizeCalculations:()=>{}}),Is=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.OnlySilenceRemains"),{SOURCE_LC:i}=h.lightCone("21003"),o=[.12,.15,.18,.21,.24],a={enemies2CrBuff:!0},r={enemies2CrBuff:{lc:!0,id:"enemies2CrBuff",formItem:"switch",text:n("Content.enemies2CrBuff.text"),content:n("Content.enemies2CrBuff.content",{CritBuff:g.precisionRound(100*o[t])})}};return{content:()=>Object.values(r),defaults:()=>a,precomputeEffects:(c,l,f)=>{const u=l.lightConeConditionals;c.CR.buff(u.enemies2CrBuff&&f.enemyCount<=2?o[t]:0,i)},finalizeCalculations:()=>{}}},vs=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.PastAndFuture"),{SOURCE_LC:i}=h.lightCone("21025"),o=[.16,.2,.24,.28,.32],a={postSkillDmgBuff:!0},r={postSkillDmgBuff:{lc:!0,id:"postSkillDmgBuff",formItem:"switch",text:n("Content.postSkillDmgBuff.text"),content:n("Content.postSkillDmgBuff.content",{DmgBuff:g.precisionRound(100*o[t])})}};return{content:()=>[],teammateContent:()=>Object.values(r),defaults:()=>({}),teammateDefaults:()=>a,precomputeEffects:()=>{},precomputeTeammateEffects:(c,l,f)=>{const u=l.lightConeConditionals;c.ELEMENTAL_DMG.buffSingle(u.postSkillDmgBuff?o[t]:0,i)},finalizeCalculations:()=>{}}};const de={[p.HP]:{stat:p.HP,key:s.HP,property:"HP",unconvertibleProperty:"UNCONVERTIBLE_HP_BUFF",unconvertibleKey:s.UNCONVERTIBLE_HP_BUFF,percentStat:p.HP_P,percentKey:s.HP_P,baseProperty:"baseHP"},[p.ATK]:{stat:p.ATK,key:s.ATK,property:"ATK",unconvertibleProperty:"UNCONVERTIBLE_ATK_BUFF",unconvertibleKey:s.UNCONVERTIBLE_ATK_BUFF,percentStat:p.ATK_P,percentKey:s.ATK_P,baseProperty:"baseATK"},[p.DEF]:{stat:p.DEF,key:s.DEF,property:"DEF",unconvertibleProperty:"UNCONVERTIBLE_DEF_BUFF",unconvertibleKey:s.UNCONVERTIBLE_DEF_BUFF,percentStat:p.DEF_P,percentKey:s.DEF_P,baseProperty:"baseDEF"},[p.SPD]:{stat:p.SPD,key:s.SPD,property:"SPD",unconvertibleProperty:"UNCONVERTIBLE_SPD_BUFF",unconvertibleKey:s.UNCONVERTIBLE_SPD_BUFF,percentStat:p.SPD_P,percentKey:s.SPD_P,baseProperty:"baseSPD"},[p.CR]:{stat:p.CR,key:s.CR,property:"CR",unconvertibleKey:s.UNCONVERTIBLE_CR_BUFF,unconvertibleProperty:"UNCONVERTIBLE_CR_BUFF"},[p.CD]:{stat:p.CD,key:s.CD,property:"CD",unconvertibleKey:s.UNCONVERTIBLE_CD_BUFF,unconvertibleProperty:"UNCONVERTIBLE_CD_BUFF"},[p.EHR]:{stat:p.EHR,key:s.EHR,property:"EHR",unconvertibleKey:s.UNCONVERTIBLE_EHR_BUFF,unconvertibleProperty:"UNCONVERTIBLE_EHR_BUFF"},[p.BE]:{stat:p.BE,key:s.BE,property:"BE",unconvertibleKey:s.UNCONVERTIBLE_BE_BUFF,unconvertibleProperty:"UNCONVERTIBLE_BE_BUFF"},[p.OHB]:{stat:p.OHB,key:s.OHB,property:"OHB",unconvertibleKey:s.UNCONVERTIBLE_OHB_BUFF,unconvertibleProperty:"UNCONVERTIBLE_OHB_BUFF"},[p.RES]:{stat:p.RES,key:s.RES,property:"RES",unconvertibleKey:s.UNCONVERTIBLE_RES_BUFF,unconvertibleProperty:"UNCONVERTIBLE_RES_BUFF"},[p.ERR]:{stat:p.ERR,key:s.ERR,property:"ERR",unconvertibleKey:s.UNCONVERTIBLE_ERR_BUFF,unconvertibleProperty:"UNCONVERTIBLE_ERR_BUFF"}};function xs(t,e,n,i,o,a,r,c){var S;const l=de[t],f=de[e],u=i.a[l.key],d=i.a[l.unconvertibleKey]??0,m=o.conditionalState[n.id]??0,E=u-d;if(E<=0)return;const C=Math.max(0,c(E)),D=C-m;o.conditionalState[n.id]=C,(S=i[f.unconvertibleProperty])==null||S.buff(D,r),i[f.property].buffDynamic(D,r,o,a)}function Gs(t,e,n,i,o,a,r,c="true"){const l=de[t],f=de[e];return ot(n,`
if (!(${r})) {
  return;
}

let stateValue: f32 = (*p_state).${n.id};
let convertibleValue: f32 = x.${l.property} - x.${l.unconvertibleProperty};

if (!(${c}) || convertibleValue <= 0) {
  return;
}

let buffFull = max(0, ${a});
let buffDelta = buffFull - stateValue;

(*p_state).${n.id} += buffDelta;

(*p_x).${f.unconvertibleProperty} += buffDelta;
(*p_x).${f.property} += buffDelta;
`)}var ks=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.PerfectTiming"),{SOURCE_LC:i}=h.lightCone("21014"),o=[.33,.36,.39,.42,.45],a=[.15,.18,.21,.24,.27],r={resToHealingBoost:!0},c={resToHealingBoost:{lc:!0,id:"resToHealingBoost",formItem:"switch",text:n("Content.resToHealingBoost.text"),content:n("Content.resToHealingBoost.content",{Scaling:g.precisionRound(100*o[t]),Limit:g.precisionRound(100*a[t])})}};return{content:()=>Object.values(c),defaults:()=>r,precomputeEffects:()=>{},finalizeCalculations:(l,f)=>{},dynamicConditionals:[{id:"PerfectTimingConditional",type:nt.ABILITY,activation:Q.CONTINUOUS,dependsOn:[p.RES],chainsTo:[p.OHB],condition:function(l,f,u){return f.lightConeConditionals.resToHealingBoost},effect:function(l,f,u){xs(p.RES,p.OHB,this,l,f,u,i,d=>Math.min(a[t],o[t]*d))},gpu:function(l,f){const u=l.lightConeConditionals;return Gs(p.RES,p.OHB,this,l,f,`min(${a[t]}, ${o[t]} * convertibleValue)`,`${vt(u.resToHealingBoost)}`)}}]}},Fs=(t,e,n)=>{const i=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.PlanetaryRendezvous"),{SOURCE_LC:o}=h.lightCone("21011"),a=[.12,.15,.18,.21,.24],r={alliesSameElement:!0},c={alliesSameElement:!0},l={alliesSameElement:{lc:!0,id:"alliesSameElement",formItem:"switch",text:i("Content.alliesSameElement.text"),content:i("Content.alliesSameElement.content",{DmgBuff:g.precisionRound(100*a[t])})}},f={alliesSameElement:l.alliesSameElement};return{content:()=>Object.values(l),teammateContent:()=>Object.values(f),defaults:()=>r,teammateDefaults:()=>c,precomputeEffects:(u,d,m)=>{},precomputeMutualEffects:(u,d,m)=>{const E=d.lightConeConditionals;n.element==m.element&&u.ELEMENTAL_DMG.buffTeam(E.alliesSameElement?a[t]:0,o)},finalizeCalculations:()=>{}}};const ql=(t,e,n,i)=>{if(t.c.sets.TheAshblazingGrandDuke>>2){const a=.06*e.setConditionals.valueTheAshblazingGrandDuke;return i-a}else return 0},b=t=>function(e,n,i){return e>=t?i:n},tc={SKILL_TALENT_3_ULT_BASIC_5:{basic:b(5),skill:b(3),ult:b(5),talent:b(3)},SKILL_BASIC_3_ULT_TALENT_5:{basic:b(3),skill:b(3),ult:b(5),talent:b(5)},ULT_TALENT_3_SKILL_BASIC_5:{basic:b(5),skill:b(5),ult:b(3),talent:b(3)},ULT_BASIC_3_SKILL_TALENT_5:{basic:b(3),skill:b(5),ult:b(3),talent:b(5)},SKILL_ULT_3_BASIC_TALENT_5:{basic:b(5),skill:b(3),ult:b(3),talent:b(5)},SKILL_BASIC_MEMO_TALENT_3_ULT_TALENT_MEMO_SKILL_5:{basic:b(3),skill:b(3),ult:b(5),talent:b(5),memoTalent:b(3),memoSkill:b(5)},SKILL_TALENT_MEMO_TALENT_3_ULT_BASIC_MEMO_SKILL_5:{basic:b(5),skill:b(3),ult:b(5),talent:b(3),memoTalent:b(3),memoSkill:b(5)},ULT_BASIC_MEMO_TALENT_3_SKILL_TALENT_MEMO_SKILL_5:{basic:b(3),skill:b(5),ult:b(3),talent:b(5),memoTalent:b(3),memoSkill:b(5)}};function Ns(t,e){var n,i,o;return(t.path==e?1:0)+(((n=t.teammate0Metadata)==null?void 0:n.path)==e?1:0)+(((i=t.teammate1Metadata)==null?void 0:i.path)==e?1:0)+(((o=t.teammate2Metadata)==null?void 0:o.path)==e?1:0)}function ec(t,e){var n,i,o;return(t.element==e?1:0)+(((n=t.teammate0Metadata)==null?void 0:n.element)==e?1:0)+(((i=t.teammate1Metadata)==null?void 0:i.element)==e?1:0)+(((o=t.teammate2Metadata)==null?void 0:o.element)==e?1:0)}function nc(t,e){return t.path==e}var Us=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.PoisedToBloom"),{SOURCE_LC:i}=h.lightCone("21046"),o=[.16,.2,.24,.28,.32],a={cdBuff:!0},r={cdBuff:!0},c={cdBuff:{lc:!0,id:"cdBuff",formItem:"switch",text:n("Content.cdBuff.text"),content:n("Content.cdBuff.content",{CritBuff:g.precisionRound(100*o[t])})}},l={cdBuff:c.cdBuff};return{content:()=>Object.values(c),teammateContent:()=>Object.values(l),defaults:()=>a,teammateDefaults:()=>r,precomputeEffects:()=>{},precomputeMutualEffects:(f,u,d)=>{const m=u.lightConeConditionals;f.CD.buff(m.cdBuff&&Ns(d,d.path)>=2?o[t]:0,i)},finalizeCalculations:()=>{}}},ws=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.PostOpConversation"),{SOURCE_LC:i}=h.lightCone("21000"),o=[.12,.15,.18,.21,.24],a={postUltHealingBoost:!0},r={postUltHealingBoost:{lc:!0,id:"postUltHealingBoost",formItem:"switch",text:n("Content.postUltHealingBoost.text"),content:n("Content.postUltHealingBoost.content",{HealingBoost:g.precisionRound(100*o[t])})}};return{content:()=>Object.values(r),defaults:()=>a,precomputeEffects:(c,l,f)=>{const u=l.lightConeConditionals;c.ULT_OHB.buff(u.postUltHealingBoost?o[t]:0,i)},finalizeCalculations:()=>{}}},Hs=()=>({content:()=>[],defaults:()=>({}),precomputeEffects:()=>{},finalizeCalculations:()=>{}}),Ks=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.ResolutionShinesAsPearlsOfSweat"),{SOURCE_LC:i}=h.lightCone("21015"),o=[.12,.13,.14,.15,.16],a={targetEnsnared:!0},r={targetEnsnared:!0},c={targetEnsnared:{lc:!0,id:"targetEnsnared",formItem:"switch",text:n("Content.targetEnsnared.text"),content:n("Content.targetEnsnared.content",{BaseChance:g.precisionRound(60+10*t),DefShred:g.precisionRound(100*o[t])})}},l={targetEnsnared:c.targetEnsnared};return{content:()=>Object.values(c),teammateContent:()=>Object.values(l),defaults:()=>a,teammateDefaults:()=>r,precomputeEffects:()=>{},precomputeMutualEffects:(f,u,d)=>{const m=u.lightConeConditionals;f.DEF_PEN.buffTeam(m.targetEnsnared?o[t]:0,i)},finalizeCalculations:()=>{}}},Vs=()=>({content:()=>[],defaults:()=>({}),precomputeEffects:()=>{},finalizeCalculations:()=>{}}),js=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.RiverFlowsInSpring"),{SOURCE_LC:i}=h.lightCone("21024"),o=[.08,.09,.1,.11,.12],a=[.12,.15,.18,.21,.24],r={spdDmgBuff:!0},c={spdDmgBuff:{lc:!0,id:"spdDmgBuff",formItem:"switch",text:n("Content.spdDmgBuff.text"),content:n("Content.spdDmgBuff.content",{SpdBuff:g.precisionRound(100*o[t]),DmgBuff:g.precisionRound(100*a[t])})}};return{content:()=>Object.values(c),defaults:()=>r,precomputeEffects:(l,f,u)=>{const d=f.lightConeConditionals;l.SPD_P.buff(d.spdDmgBuff?o[t]:0,i),l.ELEMENTAL_DMG.buff(d.spdDmgBuff?a[t]:0,i)},finalizeCalculations:()=>{}}},zs=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.ShadowedByNight"),{SOURCE_LC:i}=h.lightCone("21047"),o=[.08,.09,.1,.11,.12],a={spdBuff:!0},r={spdBuff:{lc:!0,id:"spdBuff",formItem:"switch",text:n("Content.spdBuff.text"),content:n("Content.spdBuff.content",{SpdBuff:g.precisionRound(100*o[t])})}};return{content:()=>Object.values(r),defaults:()=>a,precomputeEffects:(c,l,f)=>{const u=l.lightConeConditionals;c.SPD_P.buff(u.spdBuff?o[t]:0,i)},finalizeCalculations:()=>{}}},$s=()=>({content:()=>[],defaults:()=>({}),precomputeEffects:()=>{},finalizeCalculations:()=>{}}),Ws=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.SubscribeForMore"),{SOURCE_LC:i}=h.lightCone("21017"),o=[.24,.3,.36,.42,.48],a={maxEnergyDmgBoost:!0},r={maxEnergyDmgBoost:{lc:!0,id:"maxEnergyDmgBoost",formItem:"switch",text:n("Content.maxEnergyDmgBoost.text"),content:n("Content.maxEnergyDmgBoost.content",{DmgBuff:g.precisionRound(100*o[t])})}};return{content:()=>Object.values(r),defaults:()=>a,precomputeEffects:(c,l,f)=>{const u=l.lightConeConditionals;A(c,pt|W,o[t],i),A(c,pt|W,u.maxEnergyDmgBoost?o[t]:0,i)},finalizeCalculations:()=>{}}},Ys=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.SweatNowCryLess"),{SOURCE_LC:i}=h.lightCone("21052"),o=[.24,.27,.3,.33,.36],a={dmgBoost:!0},r={dmgBoost:{lc:!0,id:"dmgBoost",formItem:"switch",text:n("Content.dmgBoost.text"),content:n("Content.dmgBoost.content",{DmgBuff:g.precisionRound(o[t]*100)})}};return{content:()=>Object.values(r),defaults:()=>a,precomputeEffects:(c,l,f)=>{const u=l.lightConeConditionals;c.ELEMENTAL_DMG.buffDual(u.dmgBoost?o[t]:0,i)},finalizeCalculations:()=>{}}},Js=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.Swordplay"),{SOURCE_LC:i}=h.lightCone("21010"),o=[.08,.1,.12,.14,.16],a={sameTargetHitStacks:5},r={sameTargetHitStacks:{lc:!0,id:"sameTargetHitStacks",formItem:"slider",text:n("Content.sameTargetHitStacks.text"),content:n("Content.sameTargetHitStacks.content",{DmgBuff:g.precisionRound(100*o[t])}),min:0,max:5}};return{content:()=>Object.values(r),defaults:()=>a,precomputeEffects:(c,l,f)=>{const u=l.lightConeConditionals;c.ELEMENTAL_DMG.buff(u.sameTargetHitStacks*o[t],i)},finalizeCalculations:()=>{}}},Qs=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.TheBirthOfTheSelf"),{SOURCE_LC:i}=h.lightCone("21006"),o=[.24,.3,.36,.42,.48],a={enemyHp50FuaBuff:!0},r={enemyHp50FuaBuff:{lc:!0,id:"enemyHp50FuaBuff",formItem:"switch",text:n("Content.enemyHp50FuaBuff.text"),content:n("Content.enemyHp50FuaBuff.content",{DmgBuff:g.precisionRound(100*o[t])})}};return{content:()=>Object.values(r),defaults:()=>a,precomputeEffects:(c,l,f)=>{const u=l.lightConeConditionals;A(c,et,o[t],i),A(c,et,u.enemyHp50FuaBuff?o[t]:0,i)},finalizeCalculations:()=>{}}},Zs=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.TheDayTheCosmosFell"),{SOURCE_LC:i}=h.lightCone("21040"),o=[.2,.25,.3,.35,.4],a={cdBuffActive:!0},r={cdBuffActive:{lc:!0,id:"cdBuffActive",formItem:"switch",text:n("Content.cdBuffActive.text"),content:n("Content.cdBuffActive.content",{CritBuff:g.precisionRound(100*o[t])})}};return{content:()=>Object.values(r),defaults:()=>a,precomputeEffects:(c,l,f)=>{const u=l.lightConeConditionals;c.CD.buff(u.cdBuffActive?o[t]:0,i)},finalizeCalculations:()=>{}}},Xs=(t,e)=>{const{SOURCE_LC:n}=h.lightCone("22004"),i=[.04,.05,.06,.07,.08],o={weaknessTypes:7},a={weaknessTypes:{lc:!0,id:"weaknessTypes",formItem:"slider",text:"Weakness types",content:w.t("BetaMessage",{ns:"conditionals",Version:ie}),min:0,max:7}};return{content:()=>Object.values(a),defaults:()=>o,precomputeEffects:(r,c,l)=>{const f=c.lightConeConditionals;r.ELEMENTAL_DMG.buff(f.weaknessTypes*i[t],n)},finalizeCalculations:()=>{}}},qs=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.TheMolesWelcomeYou"),{SOURCE_LC:i}=h.lightCone("21005"),o=[.12,.15,.18,.21,.24],a={atkBuffStacks:3},r={atkBuffStacks:{lc:!0,id:"atkBuffStacks",formItem:"slider",text:n("Content.atkBuffStacks.text"),content:n("Content.atkBuffStacks.content",{AtkBuff:g.precisionRound(100*o[t])}),min:0,max:3}};return{content:()=>Object.values(r),defaults:()=>a,precomputeEffects:(c,l,f)=>{const u=l.lightConeConditionals;c.ATK_P.buff(u.atkBuffStacks*o[t],i)},finalizeCalculations:()=>{}}},tr=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.TheSeriousnessOfBreakfast"),{SOURCE_LC:i}=h.lightCone("21027"),o=[.12,.15,.18,.21,.24],a=[.04,.05,.06,.07,.08],r={dmgBoost:!0,defeatedEnemyAtkStacks:3},c={dmgBoost:{lc:!0,id:"dmgBoost",formItem:"switch",text:n("Content.dmgBoost.text"),content:n("Content.dmgBoost.content",{DmgBuff:g.precisionRound(100*o[t])})},defeatedEnemyAtkStacks:{lc:!0,id:"defeatedEnemyAtkStacks",formItem:"slider",text:n("Content.defeatedEnemyAtkStacks.text"),content:n("Content.defeatedEnemyAtkStacks.content",{AtkBuff:g.precisionRound(100*a[t])}),min:0,max:3}};return{content:()=>Object.values(c),defaults:()=>r,precomputeEffects:(l,f,u)=>{const d=f.lightConeConditionals;l.ATK_P.buff(d.defeatedEnemyAtkStacks*a[t],i),l.ELEMENTAL_DMG.buff(d.dmgBoost?o[t]:0,i)},finalizeCalculations:()=>{}}},er=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.ThisIsMe");h.lightCone("21030");const i=[.6,.75,.9,1.05,1.2],o={defScalingUltDmg:!1},a={defScalingUltDmg:{lc:!0,id:"defScalingUltDmg",formItem:"switch",text:n("Content.defScalingUltDmg.text"),content:n("Content.defScalingUltDmg.content",{Multiplier:g.precisionRound(100*i[t])})}};return{content:()=>Object.values(a),defaults:()=>o,precomputeEffects:()=>{},finalizeCalculations:()=>{}}},nr=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.TodayIsAnotherPeacefulDay"),{SOURCE_LC:i}=h.lightCone("21034"),o=[.002,.0025,.003,.0035,.004],a={maxEnergyDmgBoost:!0},r={maxEnergyDmgBoost:{lc:!0,id:"maxEnergyDmgBoost",formItem:"switch",text:n("Content.maxEnergyDmgBoost.text"),content:n("Content.maxEnergyDmgBoost.content",{DmgStep:g.precisionRound(100*o[t])})}};return{content:()=>Object.values(r),defaults:()=>a,precomputeEffects:(c,l,f)=>{l.lightConeConditionals.maxEnergyDmgBoost&&c.ELEMENTAL_DMG.buff(Math.min(160,f.baseEnergy)*o[t],i)},finalizeCalculations:()=>{}}},or=()=>({content:()=>[],defaults:()=>({}),precomputeEffects:()=>{},finalizeCalculations:()=>{}}),ir=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.UnderTheBlueSky"),{SOURCE_LC:i}=h.lightCone("21019"),o=[.12,.15,.18,.21,.24],a={defeatedEnemyCrBuff:!0},r={defeatedEnemyCrBuff:{lc:!0,id:"defeatedEnemyCrBuff",formItem:"switch",text:n("Content.defeatedEnemyCrBuff.text"),content:n("Content.defeatedEnemyCrBuff.content",{CritBuff:g.precisionRound(100*o[t])})}};return{content:()=>Object.values(r),defaults:()=>a,precomputeEffects:(c,l,f)=>{const u=l.lightConeConditionals;c.CR.buff(u.defeatedEnemyCrBuff?o[t]:0,i)},finalizeCalculations:()=>{}}},ar=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.VictoryInABlink"),{SOURCE_LC:i}=h.lightCone("21050"),o=[.08,.1,.12,.14,.16],a={teamDmgBuff:!0},r={teamDmgBuff:!0},c={teamDmgBuff:{lc:!0,id:"teamDmgBuff",formItem:"switch",text:n("Content.teamDmgBuff.text"),content:n("Content.teamDmgBuff.content",{DmgBuff:g.precisionRound(o[t]*100)})}},l={teamDmgBuff:c.teamDmgBuff};return{content:()=>Object.values(c),teammateContent:()=>Object.values(l),defaults:()=>a,teammateDefaults:()=>r,precomputeEffects:(f,u,d)=>{},precomputeMutualEffects:(f,u,d)=>{const m=u.lightConeConditionals;f.ELEMENTAL_DMG.buffTeam(m.teamDmgBuff?o[t]:0,i)},finalizeCalculations:()=>{}}},sr=()=>({content:()=>[],defaults:()=>({}),precomputeEffects:()=>{},finalizeCalculations:()=>{}}),rr=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.WeAreWildfire"),{SOURCE_LC:i}=h.lightCone("21023"),o=[.08,.1,.12,.14,.16],a=[.3,.35,.4,.45,.5],r={initialDmgReductionBuff:!1},c={initialDmgReductionBuff:!1},l={initialDmgReductionBuff:{lc:!0,id:"initialDmgReductionBuff",formItem:"switch",text:n("Content.initialDmgReductionBuff.text"),content:n("Content.initialDmgReductionBuff.content",{Healing:g.precisionRound(100*a[t]),DmgReduction:o[t]})}},f={initialDmgReductionBuff:l.initialDmgReductionBuff};return{content:()=>Object.values(l),teammateContent:()=>Object.values(f),defaults:()=>r,teammateDefaults:()=>c,precomputeEffects:()=>{},precomputeMutualEffects:(u,d,m)=>{const E=d.lightConeConditionals;u.DMG_RED_MULTI.multiplyTeam(E.initialDmgReductionBuff?1-o[t]:1,i)},finalizeCalculations:()=>{}}},lr=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.WeWillMeetAgain");h.lightCone("21029");const i=[.48,.6,.72,.84,.96],o={extraDmgProc:!0},a={extraDmgProc:{lc:!0,id:"extraDmgProc",formItem:"switch",text:n("Content.extraDmgProc.text"),content:n("Content.extraDmgProc.content",{Multiplier:g.precisionRound(100*i[t])})}};return{content:()=>Object.values(a),defaults:()=>o,precomputeEffects:(r,c,l)=>{c.lightConeConditionals},finalizeCalculations:(r,c,l)=>{const f=c.lightConeConditionals;r.BASIC_ADDITIONAL_DMG.buff((f.extraDmgProc?i[t]:0)*r.a[s.ATK],h.NONE),r.SKILL_ADDITIONAL_DMG.buff((f.extraDmgProc?i[t]:0)*r.a[s.ATK],h.NONE)},gpuFinalizeCalculations:(r,c)=>{const l=r.lightConeConditionals;return`
if (${vt(l.extraDmgProc)}) {
  x.BASIC_ADDITIONAL_DMG += ${i[t]} * x.ATK;
  x.SKILL_ADDITIONAL_DMG += ${i[t]} * x.ATK;
}
      `}}},cr=()=>({content:()=>[],defaults:()=>({}),precomputeEffects:()=>{},finalizeCalculations:()=>{}}),ur=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.WoofWalkTime"),{SOURCE_LC:i}=h.lightCone("21026"),o=[.16,.2,.24,.28,.32],a={enemyBurnedBleeding:!0},r={enemyBurnedBleeding:{lc:!0,id:"enemyBurnedBleeding",formItem:"switch",text:n("Content.enemyBurnedBleeding.text"),content:n("Content.enemyBurnedBleeding.content",{DmgBuff:g.precisionRound(100*o[t])})}};return{content:()=>Object.values(r),defaults:()=>a,precomputeEffects:(c,l,f)=>{const u=l.lightConeConditionals;c.ELEMENTAL_DMG.buff(u.enemyBurnedBleeding?o[t]:0,i)},finalizeCalculations:()=>{}}},fr=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.AGroundedAscent"),{SOURCE_LC:i}=h.lightCone("23034"),o=[.15,.1725,.195,.2175,.24],a={dmgBuffStacks:3},r={dmgBuffStacks:3},c={dmgBuffStacks:{lc:!0,id:"dmgBuffStacks",formItem:"slider",text:n("Content.dmgBuffStacks.text"),content:n("Content.dmgBuffStacks.content",{DmgBuff:g.precisionRound(100*o[t])}),min:0,max:3}},l={dmgBuffStacks:c.dmgBuffStacks};return{content:()=>Object.values(c),teammateContent:()=>Object.values(l),defaults:()=>a,teammateDefaults:()=>r,precomputeEffects:()=>{},precomputeMutualEffects:(f,u,d)=>{const m=u.lightConeConditionals;u.actorId=="1313"?f.ELEMENTAL_DMG.buffDual(m.dmgBuffStacks*o[t],i):f.ELEMENTAL_DMG.buffSingle(m.dmgBuffStacks*o[t],i)},finalizeCalculations:()=>{}}},dr=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.AlongThePassingShore"),{SOURCE_LC:i}=h.lightCone("23024"),o=[.24,.28,.32,.36,.4],a=[.24,.28,.32,.36,.4],r={emptyBubblesDebuff:!0},c={emptyBubblesDebuff:{lc:!0,id:"emptyBubblesDebuff",formItem:"switch",text:n("Content.emptyBubblesDebuff.text"),content:n("Content.emptyBubblesDebuff.content",{UltDmgBoost:g.precisionRound(100*a[t]),DmgBoost:g.precisionRound(100*o[t])})}};return{content:()=>Object.values(c),defaults:()=>r,precomputeEffects:(l,f,u)=>{const d=f.lightConeConditionals;l.ELEMENTAL_DMG.buff(d.emptyBubblesDebuff?o[t]:0,i),A(l,$,d.emptyBubblesDebuff?a[t]:0,i)},finalizeCalculations:()=>{}}},mr=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.AnInstantBeforeAGaze"),{SOURCE_LC:i}=h.lightCone("23018"),o=[.0036,.0042,.0048,.0054,.006],a={maxEnergyUltDmgStacks:180},r={maxEnergyUltDmgStacks:{lc:!0,id:"maxEnergyUltDmgStacks",formItem:"slider",text:n("Content.maxEnergyUltDmgStacks.text"),content:n("Content.maxEnergyUltDmgStacks.content",{DmgStep:g.precisionRound(100*o[t])}),min:0,max:180}};return{content:()=>Object.values(r),defaults:()=>a,precomputeEffects:(c,l,f)=>{const u=l.lightConeConditionals;A(c,$,u.maxEnergyUltDmgStacks*o[t],i)},finalizeCalculations:()=>{}}},pr=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.BaptismOfPureThought"),{SOURCE_LC:i}=h.lightCone("23020"),o=[.08,.09,.1,.11,.12],a=[.36,.42,.48,.54,.6],r=[.24,.28,.32,.36,.4],c={debuffCdStacks:3,postUltBuff:!0},l={debuffCdStacks:{lc:!0,id:"debuffCdStacks",formItem:"slider",text:n("Content.debuffCdStacks.text"),content:n("Content.debuffCdStacks.content",{DmgStep:g.precisionRound(100*o[t])}),min:0,max:3},postUltBuff:{lc:!0,id:"postUltBuff",formItem:"switch",text:n("Content.postUltBuff.text"),content:n("Content.postUltBuff.content",{DmgStep:g.precisionRound(100*a[t]),DefIgnore:g.precisionRound(100*r[t])})}};return{content:()=>Object.values(l),defaults:()=>c,precomputeEffects:(f,u,d)=>{const m=u.lightConeConditionals;f.CD.buff(m.debuffCdStacks*o[t],i),f.ELEMENTAL_DMG.buff(m.postUltBuff?a[t]:0,i),Dt(f,et,m.postUltBuff?r[t]:0,i)},finalizeCalculations:()=>{}}},gr=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.BeforeDawn"),{SOURCE_LC:i}=h.lightCone("23010"),o=[.18,.21,.24,.27,.3],a=[.48,.56,.64,.72,.8],r={fuaDmgBoost:!0},c={fuaDmgBoost:{lc:!0,id:"fuaDmgBoost",formItem:"switch",text:n("Content.fuaDmgBoost.text"),content:n("Content.fuaDmgBoost.content",{DmgBuff:g.precisionRound(100*a[t])})}};return{content:()=>Object.values(c),defaults:()=>r,precomputeEffects:(l,f,u)=>{const d=f.lightConeConditionals;A(l,W|$,o[t],i),A(l,et,d.fuaDmgBoost?a[t]:0,i)},finalizeCalculations:()=>{}}},hr=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.BrighterThanTheSun"),{SOURCE_LC:i}=h.lightCone("23015"),o=[.18,.21,.24,.27,.3],a=[.06,.07,.08,.09,.1],r={dragonsCallStacks:2},c={dragonsCallStacks:{lc:!0,id:"dragonsCallStacks",formItem:"slider",text:n("Content.dragonsCallStacks.text"),content:n("Content.dragonsCallStacks.content",{AtkBuff:g.precisionRound(100*o[t]),RegenBuff:g.precisionRound(100*a[t])}),min:0,max:2}};return{content:()=>Object.values(c),defaults:()=>r,precomputeEffects:(l,f,u)=>{const d=f.lightConeConditionals;l.ATK_P.buff(d.dragonsCallStacks*o[t],i),l.ERR.buff(d.dragonsCallStacks*a[t],i)},finalizeCalculations:()=>{}}},Er=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.ButTheBattleIsntOver"),{SOURCE_LC:i}=h.lightCone("23003"),o=[.3,.35,.4,.45,.5],a={postSkillDmgBuff:!0},r={postSkillDmgBuff:{lc:!0,formItem:"switch",id:"postSkillDmgBuff",text:n("Content.postSkillDmgBuff.text"),content:n("Content.postSkillDmgBuff.content",{DmgBuff:g.precisionRound(100*o[t])})}};return{content:()=>[],teammateContent:()=>Object.values(r),defaults:()=>({}),teammateDefaults:()=>a,precomputeEffects:()=>{},precomputeTeammateEffects:(c,l,f)=>{const u=l.lightConeConditionals;c.ELEMENTAL_DMG.buffSingle(u.postSkillDmgBuff?o[t]:0,i)},finalizeCalculations:()=>{}}},Cr=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.CruisingInTheStellarSea"),{SOURCE_LC:i}=h.lightCone("24001"),o=[.08,.1,.12,.14,.16],a=[.2,.25,.3,.35,.4],r={enemyHp50CrBoost:!1,enemyDefeatedAtkBuff:!0},c={enemyHp50CrBoost:{lc:!0,id:"enemyHp50CrBoost",formItem:"switch",text:n("Content.enemyHp50CrBoost.text"),content:n("Content.enemyHp50CrBoost.content",{CritBuff:g.precisionRound(100*o[t])})},enemyDefeatedAtkBuff:{lc:!0,id:"enemyDefeatedAtkBuff",formItem:"switch",text:n("Content.enemyDefeatedAtkBuff.text"),content:n("Content.enemyDefeatedAtkBuff.content",{AtkBuff:g.precisionRound(100*a[t])})}};return{content:()=>Object.values(c),defaults:()=>r,precomputeEffects:(l,f,u)=>{const d=f.lightConeConditionals;l.CR.buff(d.enemyHp50CrBoost?o[t]:0,i),l.ATK_P.buff(d.enemyDefeatedAtkBuff?a[t]:0,i)},finalizeCalculations:()=>{}}},Dr=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.DanceAtSunset"),{SOURCE_LC:i}=h.lightCone("23030"),o=[.36,.42,.48,.54,.6],a={fuaDmgStacks:2},r={fuaDmgStacks:{lc:!0,formItem:"slider",id:"fuaDmgStacks",text:n("Content.fuaDmgStacks.text"),content:n("Content.fuaDmgStacks.content",{DmgBoost:g.precisionRound(100*o[t])}),min:0,max:2}};return{content:()=>Object.values(r),defaults:()=>a,precomputeEffects:(c,l,f)=>{const u=l.lightConeConditionals;A(c,et,u.fuaDmgStacks*o[t],i)},finalizeCalculations:()=>{}}},Sr=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.EarthlyEscapade"),{SOURCE_LC:i}=h.lightCone("23021"),o=[.1,.11,.12,.13,.14],a=[.28,.35,.42,.49,.56],r={maskActive:!1},c={maskActive:!0},l={maskActive:{lc:!0,id:"maskActive",formItem:"switch",text:n("Content.maskActive.text"),content:n("Content.maskActive.content",{CritRateBuff:g.precisionRound(100*o[t]),CritDmgBuff:g.precisionRound(100*a[t])})}},f={maskActive:l.maskActive};return{content:()=>Object.values(l),teammateContent:()=>Object.values(f),defaults:()=>r,teammateDefaults:()=>c,precomputeEffects:()=>{},precomputeTeammateEffects:(u,d,m)=>{const E=d.lightConeConditionals;u.CR.buffTeam(E.maskActive?o[t]:0,i),u.CD.buffTeam(E.maskActive?a[t]:0,i)},finalizeCalculations:()=>{}}},_r=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.EchoesOfTheCoffin"),{SOURCE_LC:i}=h.lightCone("23008"),o=[12,14,16,18,20],a=[3,3.5,4,4.5,5],r={postUltSpdBuff:!1},c={postUltSpdBuff:!1},l={postUltSpdBuff:{lc:!0,id:"postUltSpdBuff",formItem:"switch",text:n("Content.postUltSpdBuff.text"),content:n("Content.postUltSpdBuff.content",{EnergyRecovered:g.precisionRound(a[t]),SpdBuff:g.precisionRound(o[t])})}},f={postUltSpdBuff:l.postUltSpdBuff};return{content:()=>Object.values(l),teammateContent:()=>Object.values(f),defaults:()=>r,teammateDefaults:()=>c,precomputeEffects:()=>{},precomputeMutualEffects:(u,d,m)=>{const E=d.lightConeConditionals;u.SPD.buffTeam(E.postUltSpdBuff?o[t]:0,i)},finalizeCalculations:()=>{}}},Br=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.EternalCalculus"),{SOURCE_LC:i}=h.lightCone("24004"),o=[.04,.05,.06,.07,.08],a=[.08,.1,.12,.14,.16],r={atkBuffStacks:5,spdBuff:!1},c={atkBuffStacks:{lc:!0,id:"atkBuffStacks",formItem:"slider",text:n("Content.atkBuffStacks.text"),content:n("Content.atkBuffStacks.content",{AtkBuff:g.precisionRound(100*o[t])}),min:0,max:5},spdBuff:{lc:!0,id:"spdBuff",formItem:"switch",text:n("Content.spdBuff.text"),content:n("Content.spdBuff.content",{SpdBuff:g.precisionRound(100*a[t])})}};return{content:()=>Object.values(c),defaults:()=>r,precomputeEffects:(l,f,u)=>{const d=f.lightConeConditionals;l.ATK_P.buff(d.atkBuffStacks*o[t],i),l.SPD_P.buff(d.spdBuff?a[t]:0,i)},finalizeCalculations:()=>{}}},br=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.FlameOfBloodBlazeMyPath.Content"),{SOURCE_LC:i}=h.lightCone("23039"),o=[.3,.35,.4,.45,.5],a={skillUltDmgBoost:!0,bonusBoost:!0},r={skillUltDmgBoost:{lc:!0,id:"skillUltDmgBoost",formItem:"switch",text:n("skillUltDmgBoost.text"),content:n("skillUltDmgBoost.content",{DmgBoost:g.precisionRound(o[t]*100)})},bonusBoost:{lc:!0,id:"bonusBoost",formItem:"switch",text:n("bonusBoost.text"),content:n("bonusBoost.content",{HpConsumption:g.precisionRound((.06+.005*t)*100),BonusDmgBoost:g.precisionRound(o[t]*100)})}};return{content:()=>Object.values(r),defaults:()=>a,precomputeEffects:(c,l,f)=>{const u=l.lightConeConditionals;A(c,W|$,u.skillUltDmgBoost?o[t]:0,i),A(c,W|$,u.skillUltDmgBoost&&u.bonusBoost?o[t]:0,i)},finalizeCalculations:()=>{}}},Tr=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.FlowingNightglow"),{SOURCE_LC:i}=h.lightCone("23026"),o=[.03,.035,.04,.045,.05],a=[.48,.6,.72,.84,.96],r=[.24,.28,.32,.36,.4],c={cantillationStacks:5,cadenzaActive:!0},l={cadenzaActive:!0},f={cadenzaActive:{lc:!0,id:"cadenzaActive",formItem:"switch",text:n("Content.cadenzaActive.text"),content:n("Content.cadenzaActive.content",{RegenBuff:g.precisionRound(100*o[t]),AtkBuff:g.precisionRound(100*a[t]),DmgBuff:g.precisionRound(100*r[t])})},cantillationStacks:{lc:!0,id:"cantillationStacks",formItem:"slider",text:n("Content.cantillationStacks.text"),content:n("Content.cantillationStacks.content",{RegenBuff:g.precisionRound(100*o[t]),AtkBuff:g.precisionRound(100*a[t]),DmgBuff:g.precisionRound(100*r[t])}),min:0,max:5}},u={cadenzaActive:f.cadenzaActive};return{content:()=>Object.values(f),teammateContent:()=>Object.values(u),defaults:()=>c,teammateDefaults:()=>l,precomputeTeammateEffects:(d,m,E)=>{const C=m.lightConeConditionals;d.ELEMENTAL_DMG.buffTeam(C.cadenzaActive?r[t]:0,i)},precomputeEffects:(d,m,E)=>{const C=m.lightConeConditionals;d.ERR.buff(C.cantillationStacks*o[t],i),d.ATK_P.buff(C.cadenzaActive?a[t]:0,i)},finalizeCalculations:()=>{}}},yr=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.IfTimeWereAFlower.Content"),{SOURCE_LC:i}=h.lightCone("23038"),o=[.48,.6,.72,.84,.96],a={presage:!0},r={presage:!0},c={presage:{lc:!0,id:"presage",formItem:"switch",text:n("presage.text"),content:n("presage.content",{CdBuff:g.precisionRound(o[t]*100)})}},l={presage:c.presage};return{content:()=>Object.values(c),teammateContent:()=>Object.values(l),defaults:()=>a,teammateDefaults:()=>r,precomputeEffects:(f,u,d)=>{},precomputeMutualEffects:(f,u,d)=>{const m=u.lightConeConditionals;f.CD.buffTeam(m.presage?o[t]:0,i)},finalizeCalculations:()=>{}}},Or=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.IncessantRain"),{SOURCE_LC:i}=h.lightCone("23007"),o=[.12,.14,.16,.18,.2],a=[.12,.14,.16,.18,.2],r={enemy3DebuffsCrBoost:!0,targetCodeDebuff:!0},c={targetCodeDebuff:!0},l={enemy3DebuffsCrBoost:{lc:!0,id:"enemy3DebuffsCrBoost",formItem:"switch",text:n("Content.enemy3DebuffsCrBoost.text"),content:n("Content.enemy3DebuffsCrBoost.content",{CritBuff:g.precisionRound(100*o[t])})},targetCodeDebuff:{lc:!0,id:"targetCodeDebuff",formItem:"switch",text:n("Content.targetCodeDebuff.text"),content:n("Content.targetCodeDebuff.content",{DmgIncrease:g.precisionRound(100*a[t])})}},f={targetCodeDebuff:l.targetCodeDebuff};return{content:()=>Object.values(l),teammateContent:()=>Object.values(f),defaults:()=>r,teammateDefaults:()=>c,precomputeEffects:(u,d,m)=>{const E=d.lightConeConditionals;u.CR.buff(E.enemy3DebuffsCrBoost?o[t]:0,i)},precomputeMutualEffects:(u,d,m)=>{const E=d.lightConeConditionals;u.VULNERABILITY.buffTeam(E.targetCodeDebuff?a[t]:0,i)},finalizeCalculations:()=>{}}},Lr=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.InherentlyUnjustDestiny"),{SOURCE_LC:i}=h.lightCone("23023"),o=[.4,.46,.52,.58,.64],a=[.1,.115,.13,.145,.16],r={shieldCdBuff:!0,targetVulnerability:!0},c={targetVulnerability:!0},l={shieldCdBuff:{lc:!0,id:"shieldCdBuff",formItem:"switch",text:n("Content.shieldCdBuff.text"),content:n("Content.shieldCdBuff.content",{CritBuff:g.precisionRound(100*o[t])})},targetVulnerability:{lc:!0,id:"targetVulnerability",formItem:"switch",text:n("Content.targetVulnerability.text"),content:n("Content.targetVulnerability.content",{baseChance:g.precisionRound(100+15*t),Vulnerability:g.precisionRound(100*a[t])})}},f={targetVulnerability:l.targetVulnerability};return{content:()=>Object.values(l),teammateContent:()=>Object.values(f),defaults:()=>r,teammateDefaults:()=>c,precomputeEffects:(u,d,m)=>{const E=d.lightConeConditionals;u.CD.buff(E.shieldCdBuff?o[t]:0,i)},precomputeMutualEffects:(u,d,m)=>{const E=d.lightConeConditionals;u.VULNERABILITY.buffTeam(E.targetVulnerability?a[t]:0,i)},finalizeCalculations:()=>{}}},Ar=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.InTheNameOfTheWorld"),{SOURCE_LC:i}=h.lightCone("23004"),o=[.24,.28,.32,.36,.4],a=[.24,.28,.32,.36,.4],r=[.18,.21,.24,.27,.3],c={enemyDebuffedDmgBoost:!0,skillAtkBoost:!1},l={enemyDebuffedDmgBoost:{lc:!0,id:"enemyDebuffedDmgBoost",formItem:"switch",text:n("Content.enemyDebuffedDmgBoost.text"),content:n("Content.enemyDebuffedDmgBoost.content",{DmgBuff:g.precisionRound(100*o[t])})},skillAtkBoost:{lc:!0,id:"skillAtkBoost",formItem:"switch",text:n("Content.skillAtkBoost.text"),content:n("Content.skillAtkBoost.content",{EhrBuff:g.precisionRound(100*r[t]),AtkBuff:g.precisionRound(100*a[t])})}};return{content:()=>Object.values(l),defaults:()=>c,precomputeEffects:(f,u,d)=>{const m=u.lightConeConditionals;f.ELEMENTAL_DMG.buff(m.enemyDebuffedDmgBoost?o[t]:0,i)},finalizeCalculations:()=>{}}},Rr=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.InTheNight"),{SOURCE_LC:i}=h.lightCone("23001"),o=[.06,.07,.08,.09,.1],a=[.12,.14,.16,.18,.2],r={spdScalingBuffs:!0},c={spdScalingBuffs:{lc:!0,id:"spdScalingBuffs",formItem:"switch",text:n("Content.spdScalingBuffs.text"),content:n("Content.spdScalingBuffs.content",{DmgBuff:g.precisionRound(100*o[t]),CritBuff:g.precisionRound(100*a[t])})}};return{content:()=>Object.values(c),defaults:()=>r,precomputeEffects:()=>{},finalizeCalculations:(l,f,u)=>{const d=f.lightConeConditionals,m=Math.max(0,Math.min(6,Math.floor((l.a[s.SPD]-100)/10)));A(l,pt|W,d.spdScalingBuffs?m*o[t]:0,i),Ua(l,$,d.spdScalingBuffs?m*a[t]:0,i)},gpuFinalizeCalculations:(l,f)=>{const u=l.lightConeConditionals;return`
if (${vt(u.spdScalingBuffs)}) {
  let stacks = max(0, min(6, floor((x.SPD - 100) / 10)));

  buffAbilityDmg(p_x, BASIC_DMG_TYPE | SKILL_DMG_TYPE, stacks * ${o[t]}, 1);
  buffAbilityCd(p_x, ULT_DMG_TYPE, stacks * ${a[t]}, 1);
}
    `}}},Mr=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.IntoTheUnreachableVeil"),{SOURCE_LC:i}=h.lightCone("23037"),o=[.6,.7,.8,.9,1],a={skillUltDmgBoost:!0},r={skillUltDmgBoost:{lc:!0,id:"skillUltDmgBoost",formItem:"switch",text:n("Content.skillUltDmgBoost.text"),content:n("Content.skillUltDmgBoost.content",{DmgBuff:g.precisionRound(o[t]*100)})}};return{content:()=>Object.values(r),defaults:()=>a,precomputeEffects:(c,l,f)=>{const u=l.lightConeConditionals;A(c,W|$,u.skillUltDmgBoost?o[t]:0,i)},finalizeCalculations:()=>{}}},Pr=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.IShallBeMyOwnSword"),{SOURCE_LC:i}=h.lightCone("23014"),o=[.14,.165,.19,.215,.24],a=[.12,.14,.16,.18,.2],r={eclipseStacks:3,maxStackDefPen:!0},c={eclipseStacks:{lc:!0,id:"eclipseStacks",formItem:"slider",text:n("Content.eclipseStacks.text"),content:n("Content.eclipseStacks.content",{DmgBuff:g.precisionRound(100*o[t])}),min:0,max:3},maxStackDefPen:{lc:!0,id:"maxStackDefPen",formItem:"switch",text:n("Content.maxStackDefPen.text"),content:n("Content.maxStackDefPen.content",{DefIgnore:g.precisionRound(100*a[t])})}};return{content:()=>Object.values(c),defaults:()=>r,precomputeEffects:(l,f,u)=>{const d=f.lightConeConditionals;l.ELEMENTAL_DMG.buff(d.eclipseStacks*o[t],i),l.DEF_PEN.buff(d.maxStackDefPen&&d.eclipseStacks==3?a[t]:0,i)},finalizeCalculations:()=>{}}},Ir=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.IVentureForthToHunt"),{SOURCE_LC:i}=h.lightCone("23031"),o=[.27,.3,.33,.36,.39],a={luminfluxUltStacks:2},r={luminfluxUltStacks:{lc:!0,id:"luminfluxUltStacks",formItem:"slider",text:n("Content.luminfluxUltStacks.text"),content:n("Content.luminfluxUltStacks.content",{DefIgnore:g.precisionRound(100*o[t])}),min:0,max:2}};return{content:()=>Object.values(r),defaults:()=>a,precomputeEffects:(c,l,f)=>{const u=l.lightConeConditionals;Dt(c,$,u.luminfluxUltStacks*o[t],i)},finalizeCalculations:()=>{}}},vr=(t,e)=>{const{SOURCE_LC:n}=h.lightCone("23041"),i=[.6,.7,.8,.9,1],o=[.12,.15,.18,.21,.24],a={defPen:!0,dmgBoost:!0},r={defPen:!0},c={dmgBoost:{lc:!0,id:"dmgBoost",formItem:"switch",text:"DMG boost",content:w.t("BetaMessage",{ns:"conditionals",Version:ie})},defPen:{lc:!0,id:"defPen",formItem:"switch",text:"DEF PEN",content:w.t("BetaMessage",{ns:"conditionals",Version:ie})}},l={defPen:c.defPen};return{content:()=>Object.values(c),teammateContent:()=>Object.values(l),defaults:()=>a,teammateDefaults:()=>r,precomputeEffects:(f,u,d)=>{const m=u.lightConeConditionals;f.ELEMENTAL_DMG.buff(m.dmgBoost?i[t]:0,n)},precomputeMutualEffects:(f,u,d)=>{const m=u.lightConeConditionals;f.DEF_PEN.buffTeam(m.defPen?o[t]:0,n)},finalizeCalculations:()=>{}}},xr=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.LongRoadLeadsHome"),{SOURCE_LC:i}=h.lightCone("23035"),o=[.18,.21,.24,.27,.3],a={breakVulnerabilityStacks:2},r={breakVulnerabilityStacks:2},c={breakVulnerabilityStacks:{lc:!0,id:"breakVulnerabilityStacks",formItem:"slider",text:n("Content.breakVulnerabilityStacks.text"),content:n("Content.breakVulnerabilityStacks.content",{breakVulnerability:g.precisionRound(100*o[t])}),min:0,max:2}},l={breakVulnerabilityStacks:c.breakVulnerabilityStacks};return{content:()=>Object.values(c),teammateContent:()=>Object.values(l),defaults:()=>a,teammateDefaults:()=>r,precomputeEffects:()=>{},precomputeMutualEffects:(f,u,d)=>{const m=u.lightConeConditionals;Na(f,wt,m.breakVulnerabilityStacks*o[t],i,Ft.TEAM)},finalizeCalculations:()=>{}}},Gr=(t,e)=>{const{SOURCE_LC:n}=h.lightCone("23040"),i=[.3,.35,.4,.45,.5],o={deathFlower:!0},a={deathFlower:{lc:!0,id:"deathFlower",formItem:"switch",text:"Death Flower DEF PEN",content:w.t("BetaMessage",{ns:"conditionals",Version:ie})}};return{content:()=>Object.values(a),defaults:()=>o,precomputeEffects:(r,c,l)=>{const f=c.lightConeConditionals;r.DEF_PEN.buffDual(f.deathFlower?i[t]:0,n)},finalizeCalculations:()=>{}}},kr=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.MemorysCurtainNeverFalls.Content"),{SOURCE_LC:i}=h.lightCone("24005"),o=[.08,.1,.12,.14,.16],a={teamDmgBoost:!0},r={teamDmgBoost:!0},c={teamDmgBoost:{lc:!0,id:"teamDmgBoost",formItem:"switch",text:n("teamDmgBoost.text"),content:n("teamDmgBoost.content",{DmgBoost:g.precisionRound(o[t]*100)})}},l={teamDmgBoost:c.teamDmgBoost};return{content:()=>Object.values(c),teammateContent:()=>Object.values(l),defaults:()=>a,teammateDefaults:()=>r,precomputeEffects:(f,u,d)=>{u.lightConeConditionals},precomputeMutualEffects:(f,u,d)=>{const m=u.lightConeConditionals;f.ELEMENTAL_DMG.buffTeam(m.teamDmgBoost?o[t]:0,i)},finalizeCalculations:()=>{}}},Fr=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.MomentOfVictory"),{SOURCE_LC:i}=h.lightCone("23005"),o=[.24,.28,.32,.36,.4],a={selfAttackedDefBuff:!0},r={selfAttackedDefBuff:{lc:!0,id:"selfAttackedDefBuff",formItem:"switch",text:n("Content.selfAttackedDefBuff.text"),content:n("Content.selfAttackedDefBuff.content",{DefBuff:g.precisionRound(100*o[t])})}};return{content:()=>Object.values(r),defaults:()=>a,precomputeEffects:(c,l,f)=>{const u=l.lightConeConditionals;c.DEF_P.buff(u.selfAttackedDefBuff?o[t]:0,i)},finalizeCalculations:()=>{}}},Nr=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.NightOfFright"),{SOURCE_LC:i}=h.lightCone("23017"),o=[.024,.028,.032,.036,.04],a={atkBuffStacks:5},r={atkBuffStacks:5},c={atkBuffStacks:{lc:!0,id:"atkBuffStacks",formItem:"slider",text:n("Content.atkBuffStacks.text"),content:n("Content.atkBuffStacks.content",{AtkBuff:g.precisionRound(100*o[t])}),min:0,max:5}},l={atkBuffStacks:c.atkBuffStacks};return{content:()=>Object.values(c),teammateContent:()=>Object.values(l),defaults:()=>a,teammateDefaults:()=>r,precomputeEffects:()=>{},precomputeMutualEffects:(f,u,d)=>{const m=u.lightConeConditionals;f.ATK_P.buffTeam(m.atkBuffStacks*o[t],i)},finalizeCalculations:()=>{}}},Ur=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.NightOnTheMilkyWay"),{SOURCE_LC:i}=h.lightCone("23000"),o=[.09,.105,.12,.135,.15],a=[.3,.35,.4,.45,.5],r={enemyCountAtkBuff:!0,enemyWeaknessBreakDmgBuff:!0},c={enemyCountAtkBuff:{lc:!0,id:"enemyCountAtkBuff",formItem:"switch",text:n("Content.enemyCountAtkBuff.text"),content:n("Content.enemyCountAtkBuff.content",{AtkBuff:g.precisionRound(100*o[t])})},enemyWeaknessBreakDmgBuff:{lc:!0,id:"enemyWeaknessBreakDmgBuff",formItem:"switch",text:n("Content.enemyWeaknessBreakDmgBuff.text"),content:n("Content.enemyWeaknessBreakDmgBuff.content",{DmgBuff:g.precisionRound(100*a[t])})}};return{content:()=>Object.values(c),defaults:()=>r,precomputeEffects:(l,f,u)=>{const d=f.lightConeConditionals;l.ATK_P.buff(d.enemyCountAtkBuff?u.enemyCount*o[t]:0,i),l.ELEMENTAL_DMG.buff(d.enemyWeaknessBreakDmgBuff?a[t]:0,i)},finalizeCalculations:()=>{}}},wr=()=>({content:()=>[],defaults:()=>({}),precomputeEffects:()=>{},finalizeCalculations:()=>{}}),Hr=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.OnTheFallOfAnAeon"),{SOURCE_LC:i}=h.lightCone("24000"),o=[.08,.1,.12,.14,.16],a=[.12,.15,.18,.21,.24],r={atkBoostStacks:4,weaknessBreakDmgBuff:!0},c={atkBoostStacks:{lc:!0,id:"atkBoostStacks",formItem:"slider",text:n("Content.atkBoostStacks.text"),content:n("Content.atkBoostStacks.content",{AtkBuff:g.precisionRound(100*o[t])}),min:0,max:4},weaknessBreakDmgBuff:{lc:!0,id:"weaknessBreakDmgBuff",formItem:"switch",text:n("Content.weaknessBreakDmgBuff.text"),content:n("Content.weaknessBreakDmgBuff.content",{DmgBuff:g.precisionRound(100*a[t])})}};return{content:()=>Object.values(c),defaults:()=>r,precomputeEffects:(l,f,u)=>{const d=f.lightConeConditionals;l.ATK_P.buff(d.atkBoostStacks*o[t],i),l.ELEMENTAL_DMG.buff(d.weaknessBreakDmgBuff?a[t]:0,i)},finalizeCalculations:()=>{}}},Kr=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.PastSelfInTheMirror"),{SOURCE_LC:i}=h.lightCone("23019"),o=[.24,.28,.32,.36,.4],a={postUltDmgBuff:!0},r={postUltDmgBuff:!0},c={postUltDmgBuff:{lc:!0,id:"postUltDmgBuff",formItem:"switch",text:n("Content.postUltDmgBuff.text"),content:n("Content.postUltDmgBuff.content",{DmgBuff:g.precisionRound(100*o[t])})}},l={postUltDmgBuff:c.postUltDmgBuff};return{content:()=>Object.values(c),teammateContent:()=>Object.values(l),defaults:()=>a,teammateDefaults:()=>r,precomputeEffects:()=>{},precomputeMutualEffects:(f,u,d)=>{const m=u.lightConeConditionals;f.ELEMENTAL_DMG.buffTeam(m.postUltDmgBuff?o[t]:0,i)},finalizeCalculations:()=>{}}},Vr=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.PatienceIsAllYouNeed"),{SOURCE_LC:i}=h.lightCone("23006"),o=[.24,.28,.32,.36,.4],a=[.048,.056,.064,.072,.08],r=[.6,.7,.8,.9,1],c={spdStacks:3,dotEffect:!1},l={spdStacks:{lc:!0,id:"spdStacks",formItem:"slider",text:n("Content.spdStacks.text"),content:n("Content.spdStacks.content",{SpdBuff:g.precisionRound(100*a[t])}),min:0,max:3},dotEffect:{lc:!0,id:"dotEffect",formItem:"switch",text:n("Content.dotEffect.text"),content:n("Content.dotEffect.content",{Multiplier:g.precisionRound(100*r[t])})}};return{content:()=>Object.values(l),defaults:()=>c,precomputeEffects:(f,u,d)=>{const m=u.lightConeConditionals;f.SPD_P.buff(m.spdStacks*a[t],i),f.ELEMENTAL_DMG.buff(o[t],i)},finalizeCalculations:()=>{}}},jr=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.ReforgedRemembrance"),{SOURCE_LC:i}=h.lightCone("23022"),o=[.05,.06,.07,.08,.09],a=[.072,.079,.086,.093,.1],r={prophetStacks:4},c={prophetStacks:{lc:!0,id:"prophetStacks",formItem:"slider",text:n("Content.prophetStacks.text"),content:n("Content.prophetStacks.content",{AtkBuff:g.precisionRound(100*o[t]),DefIgnore:g.precisionRound(100*a[t])}),min:0,max:4}};return{content:()=>Object.values(c),defaults:()=>r,precomputeEffects:(l,f,u)=>{const d=f.lightConeConditionals;l.ATK_P.buff(d.prophetStacks*o[t],i),Dt(l,ge,d.prophetStacks*a[t],i)},finalizeCalculations:()=>{}}},zr=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.SailingTowardsASecondLife"),{SOURCE_LC:i}=h.lightCone("23027"),o=[.12,.14,.16,.18,.2],a=[.2,.23,.26,.29,.32],r={breakDmgDefShred:!0,spdBuffConditional:!0},c={breakDmgDefShred:{lc:!0,id:"breakDmgDefShred",formItem:"switch",text:n("Content.breakDmgDefShred.text"),content:n("Content.breakDmgDefShred.content",{DefIgnore:g.precisionRound(100*a[t])})},spdBuffConditional:{lc:!0,id:"spdBuffConditional",formItem:"switch",text:n("Content.spdBuffConditional.text"),content:n("Content.spdBuffConditional.content",{SpdBuff:g.precisionRound(100*o[t])})}};return{content:()=>Object.values(c),defaults:()=>r,precomputeEffects:(l,f,u)=>{const d=f.lightConeConditionals;Dt(l,wt,d.breakDmgDefShred?a[t]:0,i)},finalizeCalculations:(l,f,u)=>{},dynamicConditionals:[{id:"SailingTowardsASecondLifeConditional",type:nt.ABILITY,activation:Q.SINGLE,dependsOn:[p.BE],chainsTo:[p.SPD],condition:function(l,f,u){return f.lightConeConditionals.spdBuffConditional&&l.a[s.BE]>=1.5},effect:(l,f,u)=>{l.SPD.buffDynamic(o[t]*u.baseSPD,i,f,u)},gpu:function(l,f){return ot(this,`
if (
  (*p_state).SailingTowardsASecondLifeConditional == 0.0 &&
  x.BE >= 1.50
) {
  (*p_state).SailingTowardsASecondLifeConditional = 1.0;
  (*p_x).SPD += ${o[t]} * baseSPD;
}
    `)}}]}},$r=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.ScentAloneStaysTrue"),{SOURCE_LC:i}=h.lightCone("23032"),o=[.1,.12,.14,.16,.18],a=[.08,.1,.12,.14,.16],r={woefreeState:!0},c={woefreeState:!0,additionalVulnerability:!0},l={woefreeState:{lc:!0,id:"woefreeState",formItem:"switch",text:n("Content.woefreeState.text"),content:n("Content.woefreeState.content",{Vulnerability:g.precisionRound(100*o[t]),AdditionalVulnerability:g.precisionRound(100*a[t])})}},f={woefreeState:l.woefreeState,additionalVulnerability:{lc:!0,id:"additionalVulnerability",formItem:"switch",text:n("TeammateContent.additionalVulnerability.text"),content:n("TeammateContent.additionalVulnerability.content",{Vulnerability:g.precisionRound(100*o[t]),AdditionalVulnerability:g.precisionRound(100*a[t])})}};return{content:()=>Object.values(l),teammateContent:()=>Object.values(f),defaults:()=>r,teammateDefaults:()=>c,precomputeEffects:(u,d,m)=>{},precomputeMutualEffects:(u,d,m)=>{const E=d.lightConeConditionals;u.VULNERABILITY.buffTeam(E.woefreeState?o[t]:0,i)},precomputeTeammateEffects:(u,d,m)=>{const E=d.lightConeConditionals;u.VULNERABILITY.buffTeam(E.woefreeState&&E.additionalVulnerability?a[t]:0,i)},finalizeCalculations:(u,d,m)=>{const E=d.lightConeConditionals;u.VULNERABILITY.buff(E.woefreeState&&u.a[s.BE]>=1.5?a[t]:0,i)},gpuFinalizeCalculations:(u,d)=>{const m=u.lightConeConditionals;return`
if (${vt(m.woefreeState)} && x.BE >= 1.50) {
  x.VULNERABILITY += ${a[t]};
}
      `}}},Wr=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.SheAlreadyShutHerEyes"),{SOURCE_LC:i}=h.lightCone("23011"),o=[.09,.105,.12,.135,.15],a={hpLostDmgBuff:!0},r={hpLostDmgBuff:!0},c={hpLostDmgBuff:{lc:!0,id:"hpLostDmgBuff",formItem:"switch",text:n("Content.hpLostDmgBuff.text"),content:n("Content.hpLostDmgBuff.content",{DmgBuff:g.precisionRound(100*o[t])})}},l={hpLostDmgBuff:c.hpLostDmgBuff};return{content:()=>Object.values(c),teammateContent:()=>Object.values(l),defaults:()=>a,teammateDefaults:()=>r,precomputeEffects:()=>{},precomputeMutualEffects:(f,u,d)=>{const m=u.lightConeConditionals;f.ELEMENTAL_DMG.buffTeam(m.hpLostDmgBuff?o[t]:0,i)},finalizeCalculations:()=>{}}},Yr=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.SleepLikeTheDead"),{SOURCE_LC:i}=h.lightCone("23012"),o=[.36,.42,.48,.54,.6],a={missedCritCrBuff:!1},r={missedCritCrBuff:{lc:!0,id:"missedCritCrBuff",formItem:"switch",text:n("Content.missedCritCrBuff.text"),content:n("Content.missedCritCrBuff.content",{CritBuff:g.precisionRound(100*o[t])})}};return{content:()=>Object.values(r),defaults:()=>a,precomputeEffects:(c,l,f)=>{const u=l.lightConeConditionals;c.CR.buff(u.missedCritCrBuff?o[t]:0,i)},finalizeCalculations:()=>{}}},Jr=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.SolitaryHealing"),{SOURCE_LC:i}=h.lightCone("24003"),o=[.24,.3,.36,.42,.48],a={postUltDotDmgBuff:!0},r={postUltDotDmgBuff:{lc:!0,formItem:"switch",id:"postUltDotDmgBuff",text:n("Content.postUltDotDmgBuff.text"),content:n("Content.postUltDotDmgBuff.content",{DmgBuff:g.precisionRound(100*o[t])})}};return{content:()=>Object.values(r),defaults:()=>a,precomputeEffects:(c,l,f)=>{const u=l.lightConeConditionals;A(c,ge,u.postUltDotDmgBuff?o[t]:0,i)},finalizeCalculations:()=>{}}},Qr=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.SomethingIrreplaceable"),{SOURCE_LC:i}=h.lightCone("23002"),o=[.24,.28,.32,.36,.4],a=[.08,.09,.1,.11,.12],r={dmgBuff:!0},c={dmgBuff:{lc:!0,id:"dmgBuff",formItem:"switch",text:n("Content.dmgBuff.text"),content:n("Content.dmgBuff.content",{Multiplier:g.precisionRound(100*a[t]),DmgBuff:g.precisionRound(100*o[t])})}};return{content:()=>Object.values(c),defaults:()=>r,precomputeEffects:(l,f,u)=>{const d=f.lightConeConditionals;l.ELEMENTAL_DMG.buff(d.dmgBuff?o[t]:0,i)},finalizeCalculations:()=>{}}},Zr=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.TextureOfMemories"),{SOURCE_LC:i}=h.lightCone("24002"),o=[.12,.15,.18,.21,.24],a=[.16,.2,.24,.28,.32],r={activeShieldDmgDecrease:!0},c={activeShieldDmgDecrease:{lc:!0,id:"activeShieldDmgDecrease",formItem:"switch",text:n("Content.activeShieldDmgDecrease.text"),content:n("Content.activeShieldDmgDecrease.content",{ShieldHp:g.precisionRound(100*a[t]),DmgReduction:g.precisionRound(100*o[t])})}};return{content:()=>Object.values(c),defaults:()=>r,precomputeEffects:(l,f,u)=>{const d=f.lightConeConditionals;l.DMG_RED_MULTI.multiply(d.activeShieldDmgDecrease?1-o[t]:1,i)},finalizeCalculations:()=>{}}},Xr=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.TheUnreachableSide"),{SOURCE_LC:i}=h.lightCone("23009"),o=[.24,.28,.32,.36,.4],a={dmgBuff:!0},r={dmgBuff:{lc:!0,id:"dmgBuff",formItem:"switch",text:n("Content.dmgBuff.text"),content:n("Content.dmgBuff.content",{DmgBuff:g.precisionRound(o[t]*100)})}};return{content:()=>Object.values(r),defaults:()=>a,precomputeEffects:(c,l,f)=>{const u=l.lightConeConditionals;c.ELEMENTAL_DMG.buff(u.dmgBuff?o[t]:0,i)},finalizeCalculations:()=>{}}},qr=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.ThoseManySprings"),{SOURCE_LC:i}=h.lightCone("23029"),o=[.1,.12,.14,.16,.18],a=[.14,.16,.18,.2,.22],r={unarmoredVulnerability:!0,corneredVulnerability:!0},c={unarmoredVulnerability:!0,corneredVulnerability:!0},l={unarmoredVulnerability:{lc:!0,id:"unarmoredVulnerability",formItem:"switch",text:n("Content.unarmoredVulnerability.text"),content:n("Content.unarmoredVulnerability.content",{UnarmoredVulnerability:g.precisionRound(o[t]*100),CorneredVulnerability:g.precisionRound(a[t]*100)})},corneredVulnerability:{lc:!0,id:"corneredVulnerability",formItem:"switch",text:n("Content.corneredVulnerability.text"),content:n("Content.corneredVulnerability.content",{UnarmoredVulnerability:g.precisionRound(o[t]*100),CorneredVulnerability:g.precisionRound(a[t]*100)})}},f={unarmoredVulnerability:l.unarmoredVulnerability,corneredVulnerability:l.corneredVulnerability};return{content:()=>Object.values(l),teammateContent:()=>Object.values(f),defaults:()=>r,teammateDefaults:()=>c,precomputeEffects:()=>{},precomputeMutualEffects:(u,d,m)=>{const E=d.lightConeConditionals;u.VULNERABILITY.buffTeam(E.unarmoredVulnerability||E.corneredVulnerability?o[t]:0,i),u.VULNERABILITY.buffTeam(E.corneredVulnerability?a[t]:0,i)},finalizeCalculations:()=>{}}},tl=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.TimeWaitsForNoOne");h.lightCone("23013");const i=[.36,.42,.48,.54,.6],o={healingBasedDmgProc:!1},a={healingBasedDmgProc:{lc:!0,id:"healingBasedDmgProc",formItem:"switch",text:n("Content.healingBasedDmgProc.text"),content:n("Content.healingBasedDmgProc.content",{Multiplier:g.precisionRound(i[t]*100)})}};return{content:()=>Object.values(a),defaults:()=>o,precomputeEffects:()=>{},finalizeCalculations:()=>{}}},el=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.TimeWovenIntoGold"),{SOURCE_LC:i}=h.lightCone("23036"),o=[.09,.105,.12,.135,.15],a=[.09,.105,.12,.135,.15],r={brocadeStacks:6,maxStacksBasicDmgBoost:!0},c={brocadeStacks:{lc:!0,id:"brocadeStacks",formItem:"slider",text:n("Content.brocadeStacks.text"),content:n("Content.brocadeStacks.content",{CdBuff:g.precisionRound(o[t]*100),DmgBuff:g.precisionRound(a[t]*100)}),min:0,max:6},maxStacksBasicDmgBoost:{lc:!0,id:"maxStacksBasicDmgBoost",formItem:"switch",text:n("Content.maxStacksBasicDmgBoost.text"),content:n("Content.maxStacksBasicDmgBoost.content",{CdBuff:g.precisionRound(o[t]*100),DmgBuff:g.precisionRound(a[t]*100)})}};return{content:()=>Object.values(c),defaults:()=>r,precomputeEffects:(l,f,u)=>{const d=f.lightConeConditionals;l.CD.buffDual(d.brocadeStacks*o[t],i),l.BASIC_DMG_BOOST.buffDual(d.brocadeStacks>=6&&d.maxStacksBasicDmgBoost?d.brocadeStacks*a[t]:0,i)},finalizeCalculations:()=>{}}},nl=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.WhereaboutsShouldDreamsRest"),{SOURCE_LC:i}=h.lightCone("23025"),o=[.24,.28,.32,.36,.4],a={routedVulnerability:!0},r={routedVulnerability:{lc:!0,id:"routedVulnerability",formItem:"switch",text:n("Content.routedVulnerability.text"),content:n("Content.routedVulnerability.content",{Vulnerability:o[t]*100})}};return{content:()=>Object.values(r),defaults:()=>a,precomputeEffects:(c,l,f)=>{const u=l.lightConeConditionals;c.VULNERABILITY.buff(u.routedVulnerability?o[t]:0,i)},finalizeCalculations:()=>{}}},ol=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.WorrisomeBlissful"),{SOURCE_LC:i}=h.lightCone("23016"),o=[.3,.35,.4,.45,.5],a=[.12,.14,.16,.18,.2],r={targetTameStacks:2},c={targetTameStacks:2},l={targetTameStacks:{lc:!0,id:"targetTameStacks",formItem:"slider",text:n("Content.targetTameStacks.text"),content:n("Content.targetTameStacks.content",{CritBuff:g.precisionRound(100*a[t])}),min:0,max:2}},f={targetTameStacks:l.targetTameStacks};return{content:()=>Object.values(l),teammateContent:()=>Object.values(f),defaults:()=>r,teammateDefaults:()=>c,precomputeEffects:(u,d,m)=>{A(u,et,o[t],i)},precomputeMutualEffects:(u,d,m)=>{const E=d.lightConeConditionals;u.CD.buffTeam(E.targetTameStacks*a[t],i)},finalizeCalculations:()=>{}}},il=(t,e)=>{const n=g.wrappedFixedT(e).get(null,"conditionals","Lightcones.YetHopeIsPriceless"),{SOURCE_LC:i}=h.lightCone("23028"),o=[.12,.14,.16,.18,.2],a=[.2,.24,.28,.32,.36],r={fuaDmgBoost:!0,ultFuaDefShred:!0},c={fuaDmgBoost:{lc:!0,id:"fuaDmgBoost",formItem:"switch",text:n("Content.fuaDmgBoost.text"),content:n("Content.fuaDmgBoost.content",{DmgBuff:g.precisionRound(o[t]*100)})},ultFuaDefShred:{lc:!0,id:"ultFuaDefShred",formItem:"switch",text:n("Content.ultFuaDefShred.text"),content:n("Content.ultFuaDefShred.content",{DefShred:g.precisionRound(o[t]*100)})}};return{content:()=>Object.values(c),defaults:()=>r,precomputeEffects:(l,f,u)=>{const d=f.lightConeConditionals;Dt(l,$|et,d.ultFuaDefShred?a[t]:0,i)},finalizeCalculations:(l,f,u)=>{const d=f.lightConeConditionals;A(l,et,d.fuaDmgBoost?o[t]*Math.min(4,Math.floor(l.a[s.CD]-1.2)/.2):0,i)},gpuFinalizeCalculations:(l,f)=>{const u=l.lightConeConditionals;return`
if (${vt(u.fuaDmgBoost)}) {
  buffAbilityDmg(p_x, FUA_DMG_TYPE, ${o[t]} * min(4, floor(x.CD - 1.20) / 0.20), 1);
}
    `}}};const al={23e3:Ur,23001:Rr,23002:Qr,23003:Er,23004:Ar,23005:Fr,23006:Vr,23007:Or,23008:_r,23009:Xr,23010:gr,23011:Wr,23012:Yr,23013:tl,23014:Pr,23015:hr,23016:ol,23017:Nr,23018:mr,23019:Kr,23020:pr,23021:Sr,23022:jr,23023:Lr,23024:dr,23025:nl,23026:Tr,23027:zr,23028:il,23029:qr,23030:Dr,23031:Ir,23032:$r,23033:wr,23034:fr,23035:xr,24e3:Hr,24001:Cr,24002:Zr,24003:Jr,24004:Br,23036:el,23037:Mr,23038:yr,23039:br,23040:Gr,23041:vr,24005:kr},sl={21e3:ws,21001:bs,21002:ds,21003:Is,21004:Rs,21005:qs,21006:Qs,21007:$s,21008:hs,21009:Ls,21010:Js,21011:Fs,21012:ss,21013:As,21014:ks,21015:Ks,21016:or,21017:Ws,21018:fs,21019:ir,21020:Bs,21021:Hs,21022:Es,21023:rr,21024:js,21025:vs,21026:ur,21027:tr,21028:sr,21029:lr,21030:er,21031:Vs,21032:cs,21033:Ps,21034:nr,21035:cr,21036:gs,21037:Cs,21038:Ds,21039:ms,21040:Zs,21041:Os,21042:ys,21043:us,21044:ls,21045:as,21046:Us,21047:zs,21048:ps,21050:ar,21051:_s,21052:Ys,22e3:rs,22001:Ts,22002:Ss,22003:Ms,22004:Xs},rl={2e4:_a,20001:Ha,20002:wa,20003:Sa,20004:is,20005:Ba,20006:Va,20007:Ka,20008:za,20009:os,20010:ja,20011:Wa,20012:Ja,20013:Xa,20014:Da,20015:Qa,20016:Za,20017:qa,20018:$a,20019:Ya,20020:es,20021:ns,20022:ts},ll={...al,...sl,...rl},so={get:(t,e=!1)=>{const n=ll[t.lightCone];return!n||t.lightConePath!==t.path&&!(window!=null&&window.WEBGPU_DEBUG)?{content:()=>[],defaults:()=>({}),precomputeEffects:()=>{},finalizeCalculations:()=>{}}:n(t.lightConeSuperimposition-1,e,{element:t.element})}},Xt=65,ro={extractCharacter:(t,e,n)=>(e=e*Xt,{id:t[e]+n,HP:t[e+1],ATK:t[e+2],DEF:t[e+3],SPD:t[e+4],"CRIT Rate":t[e+5],"CRIT DMG":t[e+6],"Effect Hit Rate":t[e+7],"Effect RES":t[e+8],"Break Effect":t[e+9],"Energy Regeneration Rate":t[e+10],"Outgoing Healing Boost":t[e+11],ED:t[e+12],WEIGHT:t[e+13],EHP:t[e+14],HEAL:t[e+15],SHIELD:t[e+16],BASIC:t[e+17],SKILL:t[e+18],ULT:t[e+19],FUA:t[e+20],MEMO_SKILL:t[e+21],MEMO_TALENT:t[e+22],DOT:t[e+23],BREAK:t[e+24],COMBO:t[e+25],xHP:t[e+26],xATK:t[e+27],xDEF:t[e+28],xSPD:t[e+29],xCR:t[e+30],xCD:t[e+31],xEHR:t[e+32],xRES:t[e+33],xBE:t[e+34],xERR:t[e+35],xOHB:t[e+36],xELEMENTAL_DMG:t[e+37],relicSetIndex:t[e+38],ornamentSetIndex:t[e+39],mHP:t[e+40],mATK:t[e+41],mDEF:t[e+42],mSPD:t[e+43],mCR:t[e+44],mCD:t[e+45],mEHR:t[e+46],mRES:t[e+47],mBE:t[e+48],mERR:t[e+49],mOHB:t[e+50],mELEMENTAL_DMG:t[e+51],mxHP:t[e+52],mxATK:t[e+53],mxDEF:t[e+54],mxSPD:t[e+55],mxCR:t[e+56],mxCD:t[e+57],mxEHR:t[e+58],mxRES:t[e+59],mxBE:t[e+60],mxERR:t[e+61],mxOHB:t[e+62],mxELEMENTAL_DMG:t[e+63],mxEHP:t[e+64]}),extractArrayToResults:(t,e,n,i)=>{for(let o=0;o<e&&t[o*Xt+1];o++){const a=ro.extractCharacter(t,o,i);n.fixedSizePush(a)}},packCharacter:(t,e,n)=>{e=e*Xt;const i=n.c,o=n.a,a=i.a;if(t[e]=i.id,t[e+1]=a[s.HP],t[e+2]=a[s.ATK],t[e+3]=a[s.DEF],t[e+4]=a[s.SPD],t[e+5]=a[s.CR],t[e+6]=a[s.CD],t[e+7]=a[s.EHR],t[e+8]=a[s.RES],t[e+9]=a[s.BE],t[e+10]=a[s.ERR],t[e+11]=a[s.OHB],t[e+12]=a[s.ELEMENTAL_DMG],t[e+13]=i.weight,t[e+14]=o[s.EHP],t[e+15]=o[s.HEAL_VALUE],t[e+16]=o[s.SHIELD_VALUE],t[e+17]=o[s.BASIC_DMG],t[e+18]=o[s.SKILL_DMG],t[e+19]=o[s.ULT_DMG],t[e+20]=o[s.FUA_DMG],t[e+21]=o[s.MEMO_SKILL_DMG],t[e+22]=o[s.MEMO_TALENT_DMG],t[e+23]=o[s.DOT_DMG],t[e+24]=o[s.BREAK_DMG],t[e+25]=o[s.COMBO_DMG],t[e+26]=o[s.HP],t[e+27]=o[s.ATK],t[e+28]=o[s.DEF],t[e+29]=o[s.SPD],t[e+30]=o[s.CR],t[e+31]=o[s.CD],t[e+32]=o[s.EHR],t[e+33]=o[s.RES],t[e+34]=o[s.BE],t[e+35]=o[s.ERR],t[e+36]=o[s.OHB],t[e+37]=o[s.ELEMENTAL_DMG],t[e+38]=i.relicSetIndex,t[e+39]=i.ornamentSetIndex,n.a[s.MEMOSPRITE]){const r=n.m.c.a;t[e+40]=r[s.HP],t[e+41]=r[s.ATK],t[e+42]=r[s.DEF],t[e+43]=r[s.SPD],t[e+44]=r[s.CR],t[e+45]=r[s.CD],t[e+46]=r[s.EHR],t[e+47]=r[s.RES],t[e+48]=r[s.BE],t[e+49]=r[s.ERR],t[e+50]=r[s.OHB],t[e+51]=r[s.ELEMENTAL_DMG];const c=n.m.a;t[e+52]=c[s.HP],t[e+53]=c[s.ATK],t[e+54]=c[s.DEF],t[e+55]=c[s.SPD],t[e+56]=c[s.CR],t[e+57]=c[s.CD],t[e+58]=c[s.EHR],t[e+59]=c[s.RES],t[e+60]=c[s.BE],t[e+61]=c[s.ERR],t[e+62]=c[s.OHB],t[e+63]=c[s.ELEMENTAL_DMG],t[e+64]=c[s.EHP]}},cleanFloatBuffer:t=>{new Float32Array(t).fill(0)},createFloatBuffer:t=>new Float32Array(t*Xt).buffer},Ke={SpaceSealingStation:{key:"SpaceSealingStation",index:0,p2c:(t,e)=>{t.ATK_P.buff(.12,h.SpaceSealingStation)}},FleetOfTheAgeless:{key:"FleetOfTheAgeless",index:1,p2c:(t,e)=>{t.HP_P.buff(.12,h.FleetOfTheAgeless)}},PanCosmicCommercialEnterprise:{key:"PanCosmicCommercialEnterprise",index:2,p2c:(t,e)=>{t.EHR.buff(.1,h.PanCosmicCommercialEnterprise)}},BelobogOfTheArchitects:{key:"BelobogOfTheArchitects",index:3,p2c:(t,e)=>{t.DEF_P.buff(.15,h.BelobogOfTheArchitects)}},CelestialDifferentiator:{key:"CelestialDifferentiator",index:4,p2c:(t,e)=>{t.CD.buff(.16,h.CelestialDifferentiator)},p2x:(t,e,n)=>{n.enabledCelestialDifferentiator&&t.c.a[s.CD]>=1.2&&t.CR.buff(.6,h.CelestialDifferentiator)}},InertSalsotto:{key:"InertSalsotto",index:5,p2c:(t,e)=>{t.CR.buff(.08,h.InertSalsotto)}},TaliaKingdomOfBanditry:{key:"TaliaKingdomOfBanditry",index:6,p2c:(t,e)=>{t.BE.buff(.16,h.TaliaKingdomOfBanditry)}},SprightlyVonwacq:{key:"SprightlyVonwacq",index:7,p2c:(t,e)=>{t.ERR.buff(.05,h.SprightlyVonwacq)}},RutilantArena:{key:"RutilantArena",index:8,p2c:(t,e)=>{t.CR.buff(.08,h.RutilantArena)}},BrokenKeel:{key:"BrokenKeel",index:9,p2c:(t,e)=>{t.RES.buff(.1,h.BrokenKeel)}},FirmamentFrontlineGlamoth:{key:"FirmamentFrontlineGlamoth",index:10,p2c:(t,e)=>{t.ATK_P.buff(.12,h.FirmamentFrontlineGlamoth)}},PenaconyLandOfTheDreams:{key:"PenaconyLandOfTheDreams",index:11,p2c:(t,e)=>{t.ERR.buff(.05,h.PenaconyLandOfTheDreams)},p2x:(t,e,n)=>{n.enabledPenaconyLandOfTheDreams&&t.ELEMENTAL_DMG.buffMemo(.1,h.PenaconyLandOfTheDreams)}},SigoniaTheUnclaimedDesolation:{key:"SigoniaTheUnclaimedDesolation",index:12,p2c:(t,e)=>{t.CR.buff(.04,h.SigoniaTheUnclaimedDesolation)},p2x:(t,e,n)=>{t.CD.buff(.04*n.valueSigoniaTheUnclaimedDesolation,h.SigoniaTheUnclaimedDesolation)}},IzumoGenseiAndTakamaDivineRealm:{key:"IzumoGenseiAndTakamaDivineRealm",index:13,p2c:(t,e)=>{t.ATK_P.buff(.12,h.IzumoGenseiAndTakamaDivineRealm)},p2x:(t,e,n)=>{n.enabledIzumoGenseiAndTakamaDivineRealm&&t.CR.buff(.12,h.IzumoGenseiAndTakamaDivineRealm)}},DuranDynastyOfRunningWolves:{key:"DuranDynastyOfRunningWolves",index:14,p2c:(t,e)=>{},p2x:(t,e,n)=>{A(t,et,.05*n.valueDuranDynastyOfRunningWolves,h.DuranDynastyOfRunningWolves),n.valueDuranDynastyOfRunningWolves>=5&&t.CD.buff(.25,h.DuranDynastyOfRunningWolves)}},ForgeOfTheKalpagniLantern:{key:"ForgeOfTheKalpagniLantern",index:15,p2c:(t,e)=>{t.SPD_P.buff(.06,h.ForgeOfTheKalpagniLantern)},p2x:(t,e,n)=>{n.enabledForgeOfTheKalpagniLantern&&t.BE.buff(.4,h.ForgeOfTheKalpagniLantern)}},LushakaTheSunkenSeas:{key:"LushakaTheSunkenSeas",index:16,p2c:(t,e)=>{t.ERR.buff(.05,h.LushakaTheSunkenSeas)}},TheWondrousBananAmusementPark:{key:"TheWondrousBananAmusementPark",index:17,p2c:(t,e)=>{t.CD.buff(.16,h.TheWondrousBananAmusementPark)},p2x:(t,e,n)=>{n.enabledTheWondrousBananAmusementPark&&t.CD.buff(.32,h.TheWondrousBananAmusementPark)}},BoneCollectionsSereneDemesne:{key:"BoneCollectionsSereneDemesne",index:18,p2c:(t,e)=>{t.HP_P.buff(.12,h.BoneCollectionsSereneDemesne)}},GiantTreeOfRaptBrooding:{key:"GiantTreeOfRaptBrooding",index:19,p2c:(t,e)=>{t.SPD_P.buff(.06,h.GiantTreeOfRaptBrooding)}}},Ve={PasserbyOfWanderingCloud:{key:"PasserbyOfWanderingCloud",index:0,p2c:(t,e)=>{t.OHB.buff(.1,h.PasserbyOfWanderingCloud)}},MusketeerOfWildWheat:{key:"MusketeerOfWildWheat",index:1,p2c:(t,e)=>{t.ATK_P.buff(.12,h.MusketeerOfWildWheat)},p4c:(t,e)=>{t.SPD_P.buff(.06,h.MusketeerOfWildWheat)},p4x:(t,e,n)=>{A(t,pt,.1,h.MusketeerOfWildWheat)}},KnightOfPurityPalace:{key:"KnightOfPurityPalace",index:2,p2c:(t,e)=>{t.DEF_P.buff(.15,h.KnightOfPurityPalace)},p4x:(t,e,n)=>{t.SHIELD_BOOST.buff(.2,h.KnightOfPurityPalace)}},HunterOfGlacialForest:{key:"HunterOfGlacialForest",index:3,p2c:(t,e)=>{e.elementalDamageType==p.Ice_DMG&&t.ICE_DMG_BOOST.buff(.1,h.HunterOfGlacialForest)},p4x:(t,e,n)=>{n.enabledHunterOfGlacialForest&&t.CD.buff(.25,h.HunterOfGlacialForest)}},ChampionOfStreetwiseBoxing:{key:"ChampionOfStreetwiseBoxing",index:4,p2c:(t,e)=>{e.elementalDamageType==p.Physical_DMG&&t.PHYSICAL_DMG_BOOST.buff(.1,h.ChampionOfStreetwiseBoxing)},p4x:(t,e,n)=>{t.ATK_P.buff(.05*n.valueChampionOfStreetwiseBoxing,h.ChampionOfStreetwiseBoxing)}},GuardOfWutheringSnow:{key:"GuardOfWutheringSnow",index:5,p2c:(t,e)=>{},p2x:(t,e,n)=>{t.DMG_RED_MULTI.multiply(1-.08,h.GuardOfWutheringSnow)}},FiresmithOfLavaForging:{key:"FiresmithOfLavaForging",index:6,p2c:(t,e)=>{e.elementalDamageType==p.Fire_DMG&&t.FIRE_DMG_BOOST.buff(.1,h.FiresmithOfLavaForging)},p4x:(t,e,n)=>{A(t,W,.12,h.FiresmithOfLavaForging),n.enabledFiresmithOfLavaForging&&t.FIRE_DMG_BOOST.buff(.12,h.FiresmithOfLavaForging)}},GeniusOfBrilliantStars:{key:"GeniusOfBrilliantStars",index:7,p2c:(t,e)=>{e.elementalDamageType==p.Quantum_DMG&&t.QUANTUM_DMG_BOOST.buff(.1,h.GeniusOfBrilliantStars)},p4x:(t,e,n)=>{t.DEF_PEN.buff(n.enabledGeniusOfBrilliantStars?.2:.1,h.GeniusOfBrilliantStars)}},BandOfSizzlingThunder:{key:"BandOfSizzlingThunder",index:8,p2c:(t,e)=>{e.elementalDamageType==p.Lightning_DMG&&t.LIGHTNING_DMG_BOOST.buff(.1,h.BandOfSizzlingThunder)},p4x:(t,e,n)=>{n.enabledBandOfSizzlingThunder&&t.ATK_P.buff(.2,h.BandOfSizzlingThunder)}},EagleOfTwilightLine:{key:"EagleOfTwilightLine",index:9,p2c:(t,e)=>{e.elementalDamageType==p.Wind_DMG&&t.WIND_DMG_BOOST.buff(.1,h.EagleOfTwilightLine)}},ThiefOfShootingMeteor:{key:"ThiefOfShootingMeteor",index:10,p2c:(t,e)=>{t.BE.buff(.16,h.ThiefOfShootingMeteor)},p4c:(t,e)=>{t.BE.buff(.16,h.ThiefOfShootingMeteor)}},WastelanderOfBanditryDesert:{key:"WastelanderOfBanditryDesert",index:11,p2c:(t,e)=>{e.elementalDamageType==p.Imaginary_DMG&&t.IMAGINARY_DMG_BOOST.buff(.1,h.WastelanderOfBanditryDesert)},p4x:(t,e,n)=>{t.CD_BOOST.buff(.1*(n.valueWastelanderOfBanditryDesert==2?1:0),h.WastelanderOfBanditryDesert),n.valueWastelanderOfBanditryDesert>0&&t.CR_BOOST.buff(.1,h.WastelanderOfBanditryDesert)}},LongevousDisciple:{key:"LongevousDisciple",index:12,p2c:(t,e)=>{t.HP_P.buff(.12,h.LongevousDisciple)},p4x:(t,e,n)=>{t.CR.buff(.08*n.valueLongevousDisciple,h.LongevousDisciple)}},MessengerTraversingHackerspace:{key:"MessengerTraversingHackerspace",index:13,p2c:(t,e)=>{t.SPD_P.buff(.06,h.MessengerTraversingHackerspace)},p4x:(t,e,n)=>{n.enabledMessengerTraversingHackerspace&&t.SPD_P.buffTeam(.12,h.MessengerTraversingHackerspace)}},TheAshblazingGrandDuke:{key:"TheAshblazingGrandDuke",index:14,p2c:(t,e)=>{},p2x:(t,e,n)=>{A(t,et,.2,h.TheAshblazingGrandDuke)},p4x:(t,e,n)=>{t.ATK_P.buff(.06*n.valueTheAshblazingGrandDuke,h.TheAshblazingGrandDuke)}},PrisonerInDeepConfinement:{key:"PrisonerInDeepConfinement",index:15,p2c:(t,e)=>{t.ATK_P.buff(.12,h.PrisonerInDeepConfinement)},p4x:(t,e,n)=>{t.DEF_PEN.buff(.06*n.valuePrisonerInDeepConfinement,h.PrisonerInDeepConfinement)}},PioneerDiverOfDeadWaters:{key:"PioneerDiverOfDeadWaters",index:16,p2x:(t,e,n)=>{n.valuePioneerDiverOfDeadWaters>=0&&t.ELEMENTAL_DMG.buff(.12,h.PioneerDiverOfDeadWaters)},p4c:(t,e)=>{t.CR.buff(.04,h.PioneerDiverOfDeadWaters)},p4x:(t,e,n)=>{t.CD_BOOST.buff(ul[n.valuePioneerDiverOfDeadWaters],h.PioneerDiverOfDeadWaters),n.valuePioneerDiverOfDeadWaters>2&&t.CR.buff(.04,h.PioneerDiverOfDeadWaters)}},WatchmakerMasterOfDreamMachinations:{key:"WatchmakerMasterOfDreamMachinations",index:17,p2c:(t,e)=>{t.BE.buff(.16,h.WatchmakerMasterOfDreamMachinations)},p4x:(t,e,n)=>{n.enabledWatchmakerMasterOfDreamMachinations&&t.BE.buffTeam(.3,h.WatchmakerMasterOfDreamMachinations)}},IronCavalryAgainstTheScourge:{key:"IronCavalryAgainstTheScourge",index:18,p2c:(t,e)=>{t.BE.buff(.16,h.IronCavalryAgainstTheScourge)}},TheWindSoaringValorous:{key:"TheWindSoaringValorous",index:19,p2c:(t,e)=>{t.ATK_P.buff(.12,h.TheWindSoaringValorous)},p4c:(t,e)=>{t.CR.buff(.06,h.TheWindSoaringValorous)},p4x:(t,e,n)=>{n.enabledTheWindSoaringValorous&&A(t,$,.36,h.TheWindSoaringValorous)}},SacerdosRelivedOrdeal:{key:"SacerdosRelivedOrdeal",index:20,p2c:(t,e)=>{t.SPD_P.buff(.06,h.SacerdosRelivedOrdeal)},p4x:(t,e,n)=>{t.CD.buff(.18*n.valueSacerdosRelivedOrdeal,h.SacerdosRelivedOrdeal)}},ScholarLostInErudition:{key:"ScholarLostInErudition",index:21,p2c:(t,e)=>{t.CR.buff(.08,h.ScholarLostInErudition)},p4x:(t,e,n)=>{A(t,$|W,.2,h.ScholarLostInErudition),n.enabledScholarLostInErudition&&A(t,W,.25,h.ScholarLostInErudition)}},HeroOfTriumphantSong:{key:"HeroOfTriumphantSong",index:22,p2c:(t,e)=>{t.ATK_P.buff(.12,h.HeroOfTriumphantSong)},p4x:(t,e,n)=>{n.enabledHeroOfTriumphantSong&&(t.SPD_P.buff(.06,h.HeroOfTriumphantSong),t.CD.buffDual(.3,h.HeroOfTriumphantSong))}},PoetOfMourningCollapse:{key:"PoetOfMourningCollapse",index:23,p2c:(t,e)=>{e.elementalDamageType==p.Quantum_DMG&&t.QUANTUM_DMG_BOOST.buff(.1,h.PoetOfMourningCollapse)},p4c:(t,e)=>{t.SPD_P.buff(-.08,h.PoetOfMourningCollapse)},p4x:(t,e,n)=>{t.CR.buffBaseDual((t.c.a[s.SPD]<110?.2:0)+(t.c.a[s.SPD]<95?.12:0),h.PoetOfMourningCollapse)}}},cl={...Ve,...Ke},G=Object.fromEntries(Object.keys(cl).map(t=>[t,t])),ul={[-1]:0,0:0,1:.08,2:.12,3:.16,4:.24},lo=Object.entries(Ke).sort((t,e)=>t[1].index-e[1].index).map(t=>t[1]),fl=Object.entries(Ke).sort((t,e)=>t[1].index-e[1].index).map(t=>t[0]),Gt=Object.entries(Ve).sort((t,e)=>t[1].index-e[1].index).map(t=>t[1]),co=Object.entries(Ve).sort((t,e)=>t[1].index-e[1].index).map(t=>t[0]);function dl(t){const e=Object.create(null);for(let n=0;n<4;n++){const i=co[t[n]];e[i]=(e[i]??0)+1}return t[4]==t[5]&&(e[fl[t[4]]]=2),e}function ml(t,e,n,i){const o={};for(let a=0;a<4;a++){const r=i[a];if(o[r])continue;o[r]=!0;const c=co[r],l=n[c]??0;if(l>=2){const f=Gt[r];l>=2&&f.p2c&&f.p2c(t,e),l>=4&&f.p4c&&f.p4c(t,e)}}if(i[4]==i[5]){const a=lo[i[4]];a.p2c&&a.p2c(t,e)}}function pl(t,e){const n=t.a,i=e.characterStatsBreakdown.base,o=e.characterStatsBreakdown.lightCone,a=e.characterStatsBreakdown.traces;switch(n[s.ELEMENTAL_DMG]=0,e.elementalDamageType){case p.Physical_DMG:n[s.ELEMENTAL_DMG]=J(p.Physical_DMG,i,o,a,t,0);break;case p.Fire_DMG:n[s.ELEMENTAL_DMG]=J(p.Fire_DMG,i,o,a,t,0);break;case p.Ice_DMG:n[s.ELEMENTAL_DMG]=J(p.Ice_DMG,i,o,a,t,0);break;case p.Lightning_DMG:n[s.ELEMENTAL_DMG]=J(p.Lightning_DMG,i,o,a,t,0);break;case p.Wind_DMG:n[s.ELEMENTAL_DMG]=J(p.Wind_DMG,i,o,a,t,0);break;case p.Quantum_DMG:n[s.ELEMENTAL_DMG]=J(p.Quantum_DMG,i,o,a,t,0);break;case p.Imaginary_DMG:n[s.ELEMENTAL_DMG]=J(p.Imaginary_DMG,i,o,a,t,0);break}}function gl(t,e){const n=e.characterStatsBreakdown.base,i=e.characterStatsBreakdown.lightCone,o=e.characterStatsBreakdown.traces,a=t.a;a[s.SPD]=qt(p.SPD,p.SPD_P,e.baseSPD,i,o,t,0),a[s.HP]=qt(p.HP,p.HP_P,e.baseHP,i,o,t,0),a[s.ATK]=qt(p.ATK,p.ATK_P,e.baseATK,i,o,t,0),a[s.DEF]=qt(p.DEF,p.DEF_P,e.baseDEF,i,o,t,0),a[s.CR]=J(p.CR,n,i,o,t,0),a[s.CD]=J(p.CD,n,i,o,t,0),a[s.EHR]=J(p.EHR,n,i,o,t,0),a[s.RES]=J(p.RES,n,i,o,t,0),a[s.BE]=J(p.BE,n,i,o,t,0),a[s.ERR]=J(p.ERR,n,i,o,t,0),a[s.OHB]=J(p.OHB,n,i,o,t,0)}function hl(t,e,n){const i=n.lightConeConditionalController,o=n.characterConditionalController;i.calculateBasicEffects&&i.calculateBasicEffects(t,e,n),o.calculateBasicEffects&&o.calculateBasicEffects(t,e,n)}function El(t,e,n){const i=e.setConditionals,o=t.a,a=t.c,r=a.sets,c=a.setsArray,l=n.combatBuffs;if(o[s.ATK]+=a.a[s.ATK]+l.ATK+l.ATK_P*n.baseATK,o[s.DEF]+=a.a[s.DEF]+l.DEF+l.DEF_P*n.baseDEF,o[s.HP]+=a.a[s.HP]+l.HP+l.HP_P*n.baseHP,o[s.SPD]+=a.a[s.SPD]+l.SPD+l.SPD_P*n.baseSPD,o[s.CD]+=a.a[s.CD]+l.CD,o[s.CR]+=a.a[s.CR]+l.CR,o[s.BE]+=a.a[s.BE]+l.BE,o[s.EHR]+=a.a[s.EHR],o[s.RES]+=a.a[s.RES],o[s.ERR]+=a.a[s.ERR],o[s.OHB]+=a.a[s.OHB],o[s.BASE_ATK]=n.baseATK,o[s.BASE_DEF]=n.baseDEF,o[s.BASE_HP]=n.baseHP,o[s.BASE_SPD]=n.baseSPD,t.a[s.MEMOSPRITE]){const f=t.m.c,u=t.m.c.a,d=t.m.a;u[s.ATK]=t.a[s.MEMO_BASE_ATK_SCALING]*a.a[s.ATK]+t.a[s.MEMO_BASE_ATK_FLAT],u[s.DEF]=t.a[s.MEMO_BASE_DEF_SCALING]*a.a[s.DEF]+t.a[s.MEMO_BASE_DEF_FLAT],u[s.HP]=t.a[s.MEMO_BASE_HP_SCALING]*a.a[s.HP]+t.a[s.MEMO_BASE_HP_FLAT],u[s.SPD]=t.a[s.MEMO_BASE_SPD_SCALING]*a.a[s.SPD]+t.a[s.MEMO_BASE_SPD_FLAT],d[s.BASE_ATK]=f.a[s.ATK],d[s.BASE_DEF]=f.a[s.DEF],d[s.BASE_HP]=f.a[s.HP],d[s.BASE_SPD]=f.a[s.SPD],d[s.ATK]+=f.a[s.ATK],d[s.DEF]+=f.a[s.DEF],d[s.HP]+=f.a[s.HP],d[s.SPD]+=f.a[s.SPD],d[s.CD]+=a.a[s.CD],d[s.CR]+=a.a[s.CR],d[s.BE]+=a.a[s.BE],d[s.EHR]+=a.a[s.EHR],d[s.RES]+=a.a[s.RES],d[s.ERR]+=a.a[s.ERR],d[s.OHB]+=a.a[s.OHB]}if(o[s.ELEMENTAL_DMG]+=l.DMG_BOOST,o[s.EFFECT_RES_PEN]+=l.EFFECT_RES_PEN,o[s.VULNERABILITY]+=l.VULNERABILITY,o[s.BREAK_EFFICIENCY_BOOST]+=l.BREAK_EFFICIENCY,wn(t,n.elementalDamageType,a.a[s.ELEMENTAL_DMG]),t.a[s.MEMOSPRITE]&&wn(t.m,n.elementalDamageType,a.a[s.ELEMENTAL_DMG]),Cl(t,n,i,r,c),o[s.SPD]+=o[s.SPD_P]*n.baseSPD,o[s.ATK]+=o[s.ATK_P]*n.baseATK,o[s.DEF]+=o[s.DEF_P]*n.baseDEF,o[s.HP]+=o[s.HP_P]*n.baseHP,t.a[s.MEMOSPRITE]){const f=t.m.a;f[s.SPD]+=f[s.SPD_P]*f[s.BASE_SPD],f[s.ATK]+=f[s.ATK_P]*f[s.BASE_ATK],f[s.DEF]+=f[s.DEF_P]*f[s.BASE_DEF],f[s.HP]+=f[s.HP_P]*f[s.BASE_HP]}c[4]==c[5]&&(F(G.SpaceSealingStation,r)&&Y(uo,t,e,n),F(G.FleetOfTheAgeless,r)&&Y(fo,t,e,n),F(G.BelobogOfTheArchitects,r)&&Y(mo,t,e,n),F(G.PanCosmicCommercialEnterprise,r)&&Y(po,t,e,n),F(G.BrokenKeel,r)&&Y(go,t,e,n),F(G.TaliaKingdomOfBanditry,r)&&Y(ho,t,e,n),F(G.BoneCollectionsSereneDemesne,r)&&Y(Do,t,e,n),F(G.GiantTreeOfRaptBrooding,r)&&Y(Eo,t,e,n),F(G.GiantTreeOfRaptBrooding,r)&&Y(Co,t,e,n));for(const f of n.characterConditionalController.dynamicConditionals??[])Y(f,t,e,n);for(const f of n.lightConeConditionalController.dynamicConditionals??[])Y(f,t,e,n);for(const f of e.teammateDynamicConditionals??[])Y(f,t,e,n);return c[4]==c[5]&&(F(G.FirmamentFrontlineGlamoth,r)&&t.a[s.SPD]>=135&&t.ELEMENTAL_DMG.buff(t.a[s.SPD]>=160?.18:.12,h.FirmamentFrontlineGlamoth),F(G.RutilantArena,r)&&t.a[s.CR]>=.7&&A(t,pt|W,.2,h.RutilantArena),F(G.InertSalsotto,r)&&t.a[s.CR]>=.5&&A(t,$|et,.15,h.InertSalsotto)),Dl(G.IronCavalryAgainstTheScourge,r)&&t.a[s.BE]>=1.5&&(Dt(t,wt,.1,h.IronCavalryAgainstTheScourge),Dt(t,eo,t.a[s.BE]>=2.5?.15:0,h.IronCavalryAgainstTheScourge)),t}function Cl(t,e,n,i,o){const[a,r,c,l,f,u]=o;if(f==u){const d=lo[f];d.p2x&&d.p2x(t,e,n)}if(a===r&&r===c&&c===l){const d=Gt[a];d.p2x&&d.p2x(t,e,n),d.p4x&&d.p4x(t,e,n);return}if(a===r||a===c||a===l){const d=Gt[a];d.p2x&&d.p2x(t,e,n)}if((r===c||r===l)&&r!==a){const d=Gt[r];d.p2x&&d.p2x(t,e,n)}if(c===l&&c!==a&&c!==r){const d=Gt[c];d.p2x&&d.p2x(t,e,n)}}function F(t,e){return e[t]>>1}function Dl(t,e){return e[t]>>2}function Sl(t,e,n,i,o,a,r,c){const l=t.a;if(e!=null&&e.condensedStats)for(const f of e.condensedStats)l[f[0]]+=f[1];if(n!=null&&n.condensedStats)for(const f of n.condensedStats)l[f[0]]+=f[1];if(i!=null&&i.condensedStats)for(const f of i.condensedStats)l[f[0]]+=f[1];if(o!=null&&o.condensedStats)for(const f of o.condensedStats)l[f[0]]+=f[1];if(a!=null&&a.condensedStats)for(const f of a.condensedStats)l[f[0]]+=f[1];if(r!=null&&r.condensedStats)for(const f of r.condensedStats)l[f[0]]+=f[1];t.setWeight(e.weightScore+n.weightScore+i.weightScore+o.weightScore+a.weightScore+r.weightScore)}function J(t,e,n,i,o,a){return e[t]+n[t]+o.a[ke[t]]+i[t]+a}function qt(t,e,n,i,o,a,r){return n*(1+r+a.a[ke[e]]+o[e]+i[e])+a.a[ke[t]]+o[t]}const uo={id:"SpaceSealingStationConditional",type:nt.SET,activation:Q.SINGLE,dependsOn:[p.SPD],chainsTo:[p.ATK],condition:function(t,e,n){return F(G.SpaceSealingStation,t.c.sets)&&t.a[s.SPD]>=120},effect:(t,e,n)=>{t.ATK.buffDynamic(.12*n.baseATK,h.SpaceSealingStation,e,n)},gpu:function(){return ot(this,`
if (
  p2((*p_sets).SpaceSealingStation) >= 1 &&
  (*p_state).SpaceSealingStationConditional == 0.0 &&
  x.SPD >= 120
) {
  (*p_state).SpaceSealingStationConditional = 1.0;
  (*p_x).ATK += 0.12 * baseATK;
}
    `)}},fo={id:"FleetOfTheAgelessConditional",type:nt.SET,activation:Q.SINGLE,dependsOn:[p.SPD],chainsTo:[p.ATK],condition:function(t,e,n){return F(G.FleetOfTheAgeless,t.c.sets)&&t.a[s.SPD]>=120},effect:(t,e,n)=>{t.ATK.buffDynamic(.08*t.a[s.BASE_ATK],h.FleetOfTheAgeless,e,n),t.a[s.MEMOSPRITE]&&t.m.ATK.buffDynamic(.08*t.a[s.BASE_ATK],h.FleetOfTheAgeless,e,n)},gpu:function(){return ot(this,`
if (
  p2((*p_sets).FleetOfTheAgeless) >= 1 &&
  (*p_state).FleetOfTheAgelessConditional == 0.0 &&
  x.SPD >= 120
) {
  (*p_state).FleetOfTheAgelessConditional = 1.0;
  (*p_x).ATK += 0.08 * baseATK;
  (*p_m).ATK += 0.08 * baseATK;
}
    `)}},mo={id:"BelobogOfTheArchitectsConditional",type:nt.SET,activation:Q.SINGLE,dependsOn:[p.EHR],chainsTo:[p.DEF],condition:function(t,e,n){return F(G.BelobogOfTheArchitects,t.c.sets)&&t.a[s.EHR]>=.5},effect:(t,e,n)=>{t.DEF.buffDynamic(.15*n.baseDEF,h.BelobogOfTheArchitects,e,n)},gpu:function(){return ot(this,`
if (
  p2((*p_sets).BelobogOfTheArchitects) >= 1 &&
  (*p_state).BelobogOfTheArchitectsConditional == 0.0 &&
  x.EHR >= 0.50
) {
  (*p_state).BelobogOfTheArchitectsConditional = 1.0;
  (*p_x).DEF += 0.15 * baseDEF;
}
    `)}},po={id:"PanCosmicCommercialEnterpriseConditional",type:nt.SET,activation:Q.CONTINUOUS,dependsOn:[p.EHR],chainsTo:[p.ATK],condition:function(t,e,n){return F(G.PanCosmicCommercialEnterprise,t.c.sets)},effect:function(t,e,n){const i=e.conditionalState[this.id]||0,o=Math.min(.25,.25*t.a[s.EHR])*n.baseATK;return e.conditionalState[this.id]=o,t.ATK.buffDynamic(o-i,h.PanCosmicCommercialEnterprise,e,n),o},gpu:function(){return ot(this,`
if (
  p2((*p_sets).PanCosmicCommercialEnterprise) >= 1
) {
  let stateValue: f32 = (*p_state).PanCosmicCommercialEnterpriseConditional;
  let buffValue: f32 = min(0.25, 0.25 * x.EHR) * baseATK;

  (*p_state).PanCosmicCommercialEnterpriseConditional = buffValue;
  (*p_x).ATK += buffValue - stateValue;
}
    `)}},go={id:"BrokenKeelConditional",type:nt.SET,activation:Q.SINGLE,dependsOn:[p.RES],chainsTo:[p.CD],condition:function(t,e,n){return F(G.BrokenKeel,t.c.sets)&&t.a[s.RES]>=.3},effect:function(t,e,n){t.CD.buffDynamic(.1,h.BrokenKeel,e,n),t.a[s.MEMOSPRITE]&&t.m.CD.buffDynamic(.1,h.BrokenKeel,e,n)},gpu:function(){return ot(this,`
if (
  p2((*p_sets).BrokenKeel) >= 1 &&
  (*p_state).BrokenKeelConditional == 0.0 &&
  x.RES >= 0.30
) {
  (*p_state).BrokenKeelConditional = 1.0;
  (*p_x).CD += 0.10;
  (*p_m).CD += 0.10;
}
    `)}},ho={id:"TaliaKingdomOfBanditryConditional",type:nt.SET,activation:Q.SINGLE,dependsOn:[p.SPD],chainsTo:[p.BE],condition:function(t,e,n){return F(G.TaliaKingdomOfBanditry,t.c.sets)&&t.a[s.SPD]>=145},effect:function(t,e,n){t.BE.buffDynamic(.2,h.TaliaKingdomOfBanditry,e,n)},gpu:function(){return ot(this,`
if (
  p2((*p_sets).TaliaKingdomOfBanditry) >= 1 &&
  (*p_state).TaliaKingdomOfBanditryConditional == 0.0 &&
  x.SPD >= 145
) {
  (*p_state).TaliaKingdomOfBanditryConditional = 1.0;
  (*p_x).BE += 0.20;
}
    `)}},Eo={id:"GiantTreeOfRaptBrooding135Conditional",type:nt.SET,activation:Q.SINGLE,dependsOn:[p.SPD],chainsTo:[p.OHB],condition:function(t,e,n){return F(G.GiantTreeOfRaptBrooding,t.c.sets)&&t.a[s.SPD]>=135},effect:(t,e,n)=>{t.OHB.buffDynamic(.12,h.GiantTreeOfRaptBrooding,e,n),t.m.OHB.buffDynamic(.12,h.GiantTreeOfRaptBrooding,e,n)},gpu:function(){return ot(this,`
if (
  p2((*p_sets).GiantTreeOfRaptBrooding) >= 1 &&
  (*p_state).GiantTreeOfRaptBrooding135Conditional == 0.0 &&
  x.SPD >= 135
) {
  (*p_state).GiantTreeOfRaptBrooding135Conditional = 1.0;
  (*p_x).OHB += 0.12;
  (*p_m).OHB += 0.12;
}
    `)}},Co={id:"GiantTreeOfRaptBrooding180Conditional",type:nt.SET,activation:Q.SINGLE,dependsOn:[p.SPD],chainsTo:[p.OHB],condition:function(t,e,n){return F(G.GiantTreeOfRaptBrooding,t.c.sets)&&t.a[s.SPD]>=180},effect:(t,e,n)=>{t.OHB.buffDynamic(.08,h.GiantTreeOfRaptBrooding,e,n),t.m.OHB.buffDynamic(.08,h.GiantTreeOfRaptBrooding,e,n)},gpu:function(){return ot(this,`
if (
  p2((*p_sets).GiantTreeOfRaptBrooding) >= 1 &&
  (*p_state).GiantTreeOfRaptBrooding180Conditional == 0.0 &&
  x.SPD >= 180
) {
  (*p_state).GiantTreeOfRaptBrooding180Conditional = 1.0;
  (*p_x).OHB += 0.08;
  (*p_m).OHB += 0.08;
}
    `)}},Do={id:"BoneCollectionsSereneDemesneConditional",type:nt.SET,activation:Q.SINGLE,dependsOn:[p.HP],chainsTo:[p.CD],condition:function(t,e,n){return F(G.BoneCollectionsSereneDemesne,t.c.sets)&&t.a[s.HP]>=5e3},effect:(t,e,n)=>{t.CD.buffBaseDualDynamic(.28,h.BoneCollectionsSereneDemesne,e,n)},gpu:function(){return ot(this,`
if (
  p2((*p_sets).BoneCollectionsSereneDemesne) >= 1 &&
  (*p_state).BoneCollectionsSereneDemesneConditional == 0.0 &&
  x.HP >= 5000
) {
  (*p_state).BoneCollectionsSereneDemesneConditional = 1.0;
  (*p_x).CD += 0.28;
  (*p_m).CD += 0.28;
}
    `)}},_l=[uo,fo,mo,po,go,ho,Eo,Co,Do];function Bl(t,e){const n=oe.get(e),i=so.get(e),o=bl();ne(o,i.dynamicConditionals??[]),ne(o,n.dynamicConditionals??[]),ne(o,_l||[]),Me(o,e.teammate0Metadata,t,0),Me(o,e.teammate1Metadata,t,1),Me(o,e.teammate2Metadata,t,2),t.conditionalRegistry=o,t.conditionalState={}}function Me(t,e,n,i){if(e){const a=(oe.get(e).teammateDynamicConditionals??[]).map(r=>{const c=So(r,i);return n.teammateDynamicConditionals.push(c),c});ne(t,a)}}function So(t,e){const n={...t,teammateIndex:e};return n.id+=`_Teammate${e}`,n}function bl(){return{[p.HP]:[],[p.ATK]:[],[p.DEF]:[],[p.SPD]:[],[p.CR]:[],[p.CD]:[],[p.EHR]:[],[p.RES]:[],[p.BE]:[],[p.OHB]:[],[p.ERR]:[]}}function ne(t,e){for(const n of e)for(const i of n.dependsOn)t[i].push(n)}function Tl(t,e,n){const i=n.lightConeConditionalController,o=n.characterConditionalController;i.finalizeCalculations&&i.finalizeCalculations(t,e,n),o.finalizeCalculations&&o.finalizeCalculations(t,e,n)}function _o(t,e,n){t.a[s.MEMOSPRITE]&&_o(t.m,e,n);const i=n.enemyLevel,o=t.a;yl(t,n),Ol(t),Ll(t),o[s.CR]+=o[s.CR_BOOST],o[s.CD]+=o[s.CD_BOOST],o[s.ATK]+=o[s.ATK_P_BOOST]*n.baseATK,o[s.ELEMENTAL_DMG]+=Fa(t,n.elementalDamageType);const a=1+o[s.ELEMENTAL_DMG],r=o[s.DEF_PEN]+n.combatBuffs.DEF_PEN,c=o[s.ENEMY_WEAKNESS_BROKEN]?1:.9,l=n.enemyDamageResistance-o[s.RES_PEN]-n.combatBuffs.RES_PEN-ka(t,n.elementalResPenType),f=1+o[s.BREAK_EFFICIENCY_BOOST];o[s.BREAK_DMG]=c*3767.5533*n.elementalBreakScaling*Nt(i,r+o[s.BREAK_DEF_PEN])*(.5+n.enemyMaxToughness/120)*(1+o[s.VULNERABILITY]+o[s.BREAK_VULNERABILITY])*(1-l)*(1+o[s.BE])*(1+o[s.BREAK_DMG_BOOST]);const u=c*3767.5533/10*Nt(i,r+o[s.SUPER_BREAK_DEF_PEN])*(1+o[s.VULNERABILITY]+o[s.SUPER_BREAK_VULNERABILITY])*(1-l)*(1+o[s.BE])*(1+o[s.SUPER_BREAK_DMG_BOOST]);if(e.actionType=="DEFAULT"){const m=a+o[s.DOT_DMG_BOOST],E=Nt(i,r+o[s.DOT_DEF_PEN]),C=1+o[s.VULNERABILITY]+o[s.DOT_VULNERABILITY],D=1-(l-o[s.DOT_RES_PEN]),S=Pl(t,n),I=o[s.TRUE_DMG_MODIFIER]+o[s.DOT_TRUE_DMG_MODIFIER],y=ht(o,n,o[s.DOT_DMG],o[s.DOT_HP_SCALING],o[s.DOT_DEF_SCALING],o[s.DOT_ATK_SCALING],o[s.DOT_ATK_P_BOOST]);o[s.DOT_DMG]=Ml(t,e,s.DOT_DMG,y,c,m,E,C,D,S,I)}if((e.actionType=="BASIC"||e.actionType=="DEFAULT")&&n.activeAbilityFlags&lt.BASIC){const m=ht(o,n,o[s.BASIC_DMG],o[s.BASIC_HP_SCALING],o[s.BASIC_DEF_SCALING],o[s.BASIC_ATK_SCALING],o[s.BASIC_ATK_P_BOOST]);o[s.BASIC_DMG]=Ot(t,e,n,c,a,r,l,u,f,s.BASIC_DMG,m,o[s.BASIC_DMG_BOOST],o[s.BASIC_VULNERABILITY],o[s.BASIC_DEF_PEN],o[s.BASIC_RES_PEN],o[s.BASIC_CR_BOOST],o[s.BASIC_CD_BOOST],o[s.BASIC_FINAL_DMG_BOOST],o[s.BASIC_BREAK_EFFICIENCY_BOOST],o[s.BASIC_SUPER_BREAK_MODIFIER],o[s.BASIC_BREAK_DMG_MODIFIER],o[s.BASIC_TOUGHNESS_DMG],o[s.BASIC_ADDITIONAL_DMG],0,0,o[s.BASIC_TRUE_DMG_MODIFIER],t.a[s.MEMOSPRITE]?t.m.a[s.BASIC_DMG]:0)}if((e.actionType=="SKILL"||e.actionType=="DEFAULT")&&n.activeAbilityFlags&lt.SKILL){const m=ht(o,n,o[s.SKILL_DMG],o[s.SKILL_HP_SCALING],o[s.SKILL_DEF_SCALING],o[s.SKILL_ATK_SCALING],o[s.SKILL_ATK_P_BOOST]);o[s.SKILL_DMG]=Ot(t,e,n,c,a,r,l,u,f,s.SKILL_DMG,m,o[s.SKILL_DMG_BOOST],o[s.SKILL_VULNERABILITY],o[s.SKILL_DEF_PEN],o[s.SKILL_RES_PEN],o[s.SKILL_CR_BOOST],o[s.SKILL_CD_BOOST],o[s.SKILL_FINAL_DMG_BOOST],0,0,0,o[s.SKILL_TOUGHNESS_DMG],o[s.SKILL_ADDITIONAL_DMG],0,0,o[s.SKILL_TRUE_DMG_MODIFIER],t.a[s.MEMOSPRITE]?t.m.a[s.SKILL_DMG]:0)}if((e.actionType=="ULT"||e.actionType=="DEFAULT")&&n.activeAbilityFlags&lt.ULT){const m=ht(o,n,o[s.ULT_DMG],o[s.ULT_HP_SCALING],o[s.ULT_DEF_SCALING],o[s.ULT_ATK_SCALING],o[s.ULT_ATK_P_BOOST]);o[s.ULT_DMG]=Ot(t,e,n,c,a,r,l,u,f,s.ULT_DMG,m,o[s.ULT_DMG_BOOST],o[s.ULT_VULNERABILITY],o[s.ULT_DEF_PEN],o[s.ULT_RES_PEN],o[s.ULT_CR_BOOST],o[s.ULT_CD_BOOST],o[s.ULT_FINAL_DMG_BOOST],o[s.ULT_BREAK_EFFICIENCY_BOOST],0,0,o[s.ULT_TOUGHNESS_DMG],o[s.ULT_ADDITIONAL_DMG],o[s.ULT_ADDITIONAL_DMG_CR_OVERRIDE],o[s.ULT_ADDITIONAL_DMG_CD_OVERRIDE],o[s.ULT_TRUE_DMG_MODIFIER],t.a[s.MEMOSPRITE]?t.m.a[s.ULT_DMG]:0)}if((e.actionType=="FUA"||e.actionType=="DEFAULT")&&n.activeAbilityFlags&lt.FUA){const m=ht(o,n,o[s.FUA_DMG],o[s.FUA_HP_SCALING],o[s.FUA_DEF_SCALING],o[s.FUA_ATK_SCALING],o[s.FUA_ATK_P_BOOST]);o[s.FUA_DMG]=Ot(t,e,n,c,a,r,l,u,f,s.FUA_DMG,m,o[s.FUA_DMG_BOOST],o[s.FUA_VULNERABILITY],o[s.FUA_DEF_PEN],o[s.FUA_RES_PEN],o[s.FUA_CR_BOOST],o[s.FUA_CD_BOOST],0,0,0,0,o[s.FUA_TOUGHNESS_DMG],o[s.FUA_ADDITIONAL_DMG],0,0,o[s.FUA_TRUE_DMG_MODIFIER],t.a[s.MEMOSPRITE]?t.m.a[s.FUA_DMG]:0)}if((e.actionType=="MEMO_SKILL"||e.actionType=="DEFAULT")&&n.activeAbilityFlags&lt.MEMO_SKILL)if(t.a[s.MEMOSPRITE])o[s.MEMO_SKILL_DMG]+=t.m.a[s.MEMO_SKILL_DMG];else{const m=ht(o,n,o[s.MEMO_SKILL_DMG],o[s.MEMO_SKILL_HP_SCALING],o[s.MEMO_SKILL_DEF_SCALING],o[s.MEMO_SKILL_ATK_SCALING],o[s.MEMO_SKILL_ATK_P_BOOST]);o[s.MEMO_SKILL_DMG]=Ot(t,e,n,c,a,r,l,u,f,s.MEMO_SKILL_DMG,m,o[s.MEMO_SKILL_DMG_BOOST],0,0,0,0,0,0,0,0,0,o[s.MEMO_SKILL_TOUGHNESS_DMG],0,0,0,o[s.MEMO_SKILL_TRUE_DMG_MODIFIER],0)}if((e.actionType=="MEMO_TALENT"||e.actionType=="DEFAULT")&&n.activeAbilityFlags&lt.MEMO_TALENT)if(t.a[s.MEMOSPRITE])o[s.MEMO_TALENT_DMG]+=t.m.a[s.MEMO_TALENT_DMG];else{const m=ht(o,n,o[s.MEMO_TALENT_DMG],o[s.MEMO_TALENT_HP_SCALING],o[s.MEMO_TALENT_DEF_SCALING],o[s.MEMO_TALENT_ATK_SCALING],o[s.MEMO_TALENT_ATK_P_BOOST]);o[s.MEMO_TALENT_DMG]=Ot(t,e,n,c,a,r,l,u,f,s.MEMO_TALENT_DMG,m,o[s.MEMO_TALENT_DMG_BOOST],0,0,0,0,0,0,0,0,0,o[s.MEMO_TALENT_TOUGHNESS_DMG],0,0,0,o[s.MEMO_TALENT_TRUE_DMG_MODIFIER],0)}const d=o[s.BREAK_DMG]*(o[s.TRUE_DMG_MODIFIER]+o[s.BREAK_TRUE_DMG_MODIFIER]);if(t.trace&&e.actionType=="DEFAULT"){const m=we[s.BREAK_DMG].name,E=t.dmgSplits[m];E.breakDmg=o[s.BREAK_DMG],E.trueDmg=d}o[s.BREAK_DMG]+=d}const Hn=100;function ht(t,e,n,i,o,a,r){return n+i*t[s.HP]+o*t[s.DEF]+a*(t[s.ATK]+r*e.baseATK)}function Nt(t,e){return Hn/((t+20)*Math.max(0,1-e)+Hn)}function yl(t,e){const n=t.a;let i=n[s.HP]/(1-n[s.DEF]/(n[s.DEF]+200+10*e.enemyLevel));i*=1/n[s.DMG_RED_MULTI],n[s.EHP]=i}function Ol(t,e){const n=t.a;n[s.HEAL_VALUE]=n[s.HEAL_VALUE]*(1+n[s.OHB]+n[s.SKILL_OHB]*(n[s.HEAL_TYPE]==W?1:0)+n[s.ULT_OHB]*(n[s.HEAL_TYPE]==$?1:0))}function Ll(t,e){const n=t.a;n[s.SHIELD_VALUE]=n[s.SHIELD_VALUE]*(1+n[s.SHIELD_BOOST])}function Ot(t,e,n,i,o,a,r,c,l,f,u,d,m,E,C,D,S,I,y,v,B,O,N,R,L,St,ct){const k=t.a,_t=n.enemyLevel;let ut=0;if(u){const K=Math.min(1,k[s.CR]+D),j=k[s.CD]+k[s.CD_BOOST]+S,at=K*(1+j)+(1-K),ft=1+k[s.VULNERABILITY]+m,zt=Nt(_t,a+E),Ee=1-(r-C),$t=1+I+k[s.FINAL_DMG_BOOST];ut=Rl(u,i,o+d,zt,ft,at,Ee,$t)}let X=0;B&&(X=B*k[s.BREAK_DMG]);let q=0;const it=k[s.SUPER_BREAK_MODIFIER]+v;it>0&&(q=Al(c,it,l+y,O));let rt=0;if(N>0){const K=R||Math.min(1,k[s.CR]),j=L||k[s.CD],at=K*(1+j)+(1-K);rt=Il(N,i,o+k[s.ADDITIONAL_DMG_BOOST],Nt(_t,a),1+k[s.VULNERABILITY],at,1-r)}const H=ut+X+q+rt,P=(k[s.TRUE_DMG_MODIFIER]+St)*H;let x=0;if(ct>0&&(x=ct),t.trace&&e.actionType=="DEFAULT"){const K=we[f].name,j=t.dmgSplits[K];j.abilityDmg=ut,j.breakDmg=X,j.superBreakDmg=q,j.additionalDmg=rt,j.trueDmg=P,j.jointDmg=x}return H+P+x}function Al(t,e,n,i){return t*e*n*i}function Rl(t,e,n,i,o,a,r,c){return t*e*n*i*o*a*r*c}function Ml(t,e,n,i,o,a,r,c,l,f,u){const d=i*o*a*r*c*l*f,m=d*u;if(t.trace&&e.actionType=="DEFAULT"){const E=we[n].name,C=t.dmgSplits[E];C.dotDmg=d,C.trueDmg=m}return d+m}function Pl(t,e){const n=t.a,i=e.enemyEffectResistance,o=Math.min(1,n[s.DOT_CHANCE]*(1+n[s.EHR])*(1-i+n[s.EFFECT_RES_PEN]));return n[s.DOT_SPLIT]?(1+n[s.DOT_SPLIT]*o*(n[s.DOT_STACKS]-1))/(1+n[s.DOT_SPLIT]*(n[s.DOT_STACKS]-1)):o}function Il(t,e,n,i,o,a,r){return t*e*n*i*o*a*r}const vl={ATK:{key:"ATK",gpuProperty:"ATK",basicProperty:"ATK",combatProperty:"ATK",basicGridColumn:"ATK",combatGridColumn:"xATK",memoBasicGridColumn:"mATK",memoCombatGridColumn:"mxATK",optimizerKey:s.ATK},DEF:{key:"DEF",gpuProperty:"DEF",basicProperty:"DEF",combatProperty:"DEF",basicGridColumn:"DEF",combatGridColumn:"xDEF",memoBasicGridColumn:"mATK",memoCombatGridColumn:"mxATK",optimizerKey:s.DEF},HP:{key:"HP",gpuProperty:"HP",basicProperty:"HP",combatProperty:"HP",basicGridColumn:"HP",combatGridColumn:"xHP",memoBasicGridColumn:"mATK",memoCombatGridColumn:"mxATK",optimizerKey:s.HP},SPD:{key:"SPD",gpuProperty:"SPD",basicProperty:"SPD",combatProperty:"SPD",basicGridColumn:"SPD",combatGridColumn:"xSPD",memoBasicGridColumn:"mSPD",memoCombatGridColumn:"mxSPD",optimizerKey:s.SPD},CR:{key:"CR",gpuProperty:"CR",basicProperty:"CRIT Rate",combatProperty:"CRIT Rate",basicGridColumn:"CRIT Rate",combatGridColumn:"xCR",memoBasicGridColumn:"mCR",memoCombatGridColumn:"mxCR",optimizerKey:s.CR},CD:{key:"CD",gpuProperty:"CD",basicProperty:"CRIT DMG",combatProperty:"CRIT DMG",basicGridColumn:"CRIT DMG",combatGridColumn:"xCD",memoBasicGridColumn:"mCD",memoCombatGridColumn:"mxCD",optimizerKey:s.CD},EHR:{key:"EHR",gpuProperty:"EHR",basicProperty:"Effect Hit Rate",combatProperty:"Effect Hit Rate",basicGridColumn:"Effect Hit Rate",combatGridColumn:"xEHR",memoBasicGridColumn:"mEHR",memoCombatGridColumn:"mxEHR",optimizerKey:s.EHR},RES:{key:"RES",gpuProperty:"RES",basicProperty:"Effect RES",combatProperty:"Effect RES",basicGridColumn:"Effect RES",combatGridColumn:"xRES",memoBasicGridColumn:"mRES",memoCombatGridColumn:"mxRES",optimizerKey:s.RES},BE:{key:"BE",gpuProperty:"BE",basicProperty:"Break Effect",combatProperty:"Break Effect",basicGridColumn:"Break Effect",combatGridColumn:"xBE",memoBasicGridColumn:"mBE",memoCombatGridColumn:"mxBE",optimizerKey:s.BE},OHB:{key:"OHB",gpuProperty:"OHB",basicProperty:"Outgoing Healing Boost",combatProperty:"Outgoing Healing Boost",basicGridColumn:"Outgoing Healing Boost",combatGridColumn:"xOHB",memoBasicGridColumn:"mOHB",memoCombatGridColumn:"mxOHB",optimizerKey:s.OHB},ERR:{key:"ERR",gpuProperty:"ERR",basicProperty:"Energy Regeneration Rate",combatProperty:"Energy Regeneration Rate",basicGridColumn:"Energy Regeneration Rate",combatGridColumn:"xERR",memoBasicGridColumn:"mERR",memoCombatGridColumn:"mxERR",optimizerKey:s.ERR},ELEMENTAL_DMG:{key:"ELEMENTAL_DMG",gpuProperty:"ELEMENTAL_DMG",basicProperty:"ELEMENTAL_DMG",combatProperty:"ELEMENTAL_DMG",basicGridColumn:"ED",combatGridColumn:"xELEMENTAL_DMG",memoBasicGridColumn:"mELEMENTAL_DMG",memoCombatGridColumn:"mxELEMENTAL_DMG",optimizerKey:s.ELEMENTAL_DMG,isComputedRating:!0},EHP:{key:"EHP",gpuProperty:"EHP",basicProperty:"EHP",combatProperty:"EHP",basicGridColumn:"EHP",combatGridColumn:"EHP",memoBasicGridColumn:"mxEHP",memoCombatGridColumn:"mxEHP",optimizerKey:s.EHP,isComputedRating:!0},BASIC:{key:"BASIC",gpuProperty:"BASIC_DMG",basicProperty:"BASIC_DMG",combatProperty:"BASIC_DMG",basicGridColumn:"BASIC",combatGridColumn:"BASIC",memoBasicGridColumn:"BASIC",memoCombatGridColumn:"BASIC",optimizerKey:s.BASIC_DMG,isComputedRating:!0},SKILL:{key:"SKILL",gpuProperty:"SKILL_DMG",basicProperty:"SKILL_DMG",combatProperty:"SKILL_DMG",basicGridColumn:"SKILL",combatGridColumn:"SKILL",memoBasicGridColumn:"SKILL",memoCombatGridColumn:"SKILL",optimizerKey:s.SKILL_DMG,isComputedRating:!0},ULT:{key:"ULT",gpuProperty:"ULT_DMG",basicProperty:"ULT_DMG",combatProperty:"ULT_DMG",basicGridColumn:"ULT",combatGridColumn:"ULT",memoBasicGridColumn:"ULT",memoCombatGridColumn:"ULT",optimizerKey:s.ULT_DMG,isComputedRating:!0},FUA:{key:"FUA",gpuProperty:"FUA_DMG",basicProperty:"FUA_DMG",combatProperty:"FUA_DMG",basicGridColumn:"FUA",combatGridColumn:"FUA",memoBasicGridColumn:"FUA",memoCombatGridColumn:"FUA",optimizerKey:s.FUA_DMG,isComputedRating:!0},MEMO_SKILL:{key:"MEMO_SKILL",gpuProperty:"MEMO_SKILL_DMG",basicProperty:"MEMO_SKILL_DMG",combatProperty:"MEMO_SKILL_DMG",basicGridColumn:"MEMO_SKILL",combatGridColumn:"MEMO_SKILL",memoBasicGridColumn:"MEMO_SKILL",memoCombatGridColumn:"MEMO_SKILL",optimizerKey:s.MEMO_SKILL_DMG,isComputedRating:!0},MEMO_TALENT:{key:"MEMO_TALENT",gpuProperty:"MEMO_TALENT_DMG",basicProperty:"MEMO_TALENT_DMG",combatProperty:"MEMO_TALENT_DMG",basicGridColumn:"MEMO_TALENT",combatGridColumn:"MEMO_TALENT",memoBasicGridColumn:"MEMO_TALENT",memoCombatGridColumn:"MEMO_TALENT",optimizerKey:s.MEMO_TALENT_DMG,isComputedRating:!0},DOT:{key:"DOT",gpuProperty:"DOT_DMG",basicProperty:"DOT_DMG",combatProperty:"DOT_DMG",basicGridColumn:"DOT",combatGridColumn:"DOT",memoBasicGridColumn:"DOT",memoCombatGridColumn:"DOT",optimizerKey:s.DOT_DMG,isComputedRating:!0},BREAK:{key:"BREAK",gpuProperty:"BREAK_DMG",basicProperty:"BREAK_DMG",combatProperty:"BREAK_DMG",basicGridColumn:"BREAK",combatGridColumn:"BREAK",memoBasicGridColumn:"BREAK",memoCombatGridColumn:"BREAK",optimizerKey:s.BREAK_DMG,isComputedRating:!0},COMBO:{key:"COMBO",gpuProperty:"COMBO_DMG",basicProperty:"COMBO_DMG",combatProperty:"COMBO_DMG",basicGridColumn:"COMBO",combatGridColumn:"COMBO",memoBasicGridColumn:"COMBO",memoCombatGridColumn:"COMBO",optimizerKey:s.COMBO_DMG,isComputedRating:!0},HEAL:{key:"HEAL",gpuProperty:"HEAL_VALUE",basicProperty:"HEAL_VALUE",combatProperty:"HEAL_VALUE",basicGridColumn:"HEAL",combatGridColumn:"HEAL",memoBasicGridColumn:"HEAL",memoCombatGridColumn:"HEAL",optimizerKey:s.HEAL_VALUE,isComputedRating:!0},SHIELD:{key:"SHIELD",gpuProperty:"SHIELD_VALUE",basicProperty:"SHIELD_VALUE",combatProperty:"SHIELD_VALUE",basicGridColumn:"SHIELD",combatGridColumn:"SHIELD",memoBasicGridColumn:"SHIELD",memoCombatGridColumn:"SHIELD",optimizerKey:s.SHIELD_VALUE,isComputedRating:!0}},Lt=Object.values(Ht).length,xl=Object.values(Kt).length;async function Gl(t){var ut,X,q,it,rt,H;const e=t.data,n=e.request,i=e.context,o=e.relics,a=new Float32Array(e.buffer),r=o.LinkRope.length,c=o.PlanarSphere.length,l=o.Feet.length,f=o.Body.length,u=o.Hands.length,d=o.Head.length,m=e.relicSetSolutions,E=e.ornamentSetSolutions,C=n.statDisplay=="combat",D=!C,S=n.memoDisplay=="memo",I=!S;let y=0;e.isFirefox,await Oo([i.characterId,(ut=i.teammate0Metadata)==null?void 0:ut.characterId,(X=i.teammate1Metadata)==null?void 0:X.characterId,(q=i.teammate2Metadata)==null?void 0:q.characterId].filter(P=>!!P));const{failsBasicThresholdFilter:v,failsCombatThresholdFilter:B}=Ul(n,C);for(const P of i.actions)Bl(P,i);i.characterConditionalController=oe.get(i),i.lightConeConditionalController=so.get(i);function O(P,x,K){x!=null&&x.characterId&&(oe.get(x).teammateDynamicConditionals??[]).map(at=>{const ft=So(at,K);return P.teammateDynamicConditionals.push(ft),ft})}for(const P of i.actions)P.teammateDynamicConditionals=[],(it=i.teammate0Metadata)!=null&&it.characterId&&O(P,i.teammate0Metadata,0),(rt=i.teammate1Metadata)!=null&&rt.characterId&&O(P,i.teammate1Metadata,1),(H=i.teammate2Metadata)!=null&&H.characterId&&O(P,i.teammate2Metadata,2),P.precomputedX.a=new Float32Array(Object.values(P.precomputedX.a)),P.precomputedM.a=new Float32Array(Object.values(P.precomputedM.a));const N=Math.min(e.permutations,e.WIDTH),R=new he(!1),L=new He(!1),St=L.m,ct=Fl(n),k=kl(n),_t=Nl(n);for(let P=0;P<N;P++){const x=e.skip+P;if(x>=e.permutations)break;const K=x%r,j=(x-K)/r%c,at=(x-j*r-K)/(r*c)%l,ft=(x-at*c*r-j*r-K)/(r*c*l)%f,zt=(x-ft*l*c*r-at*c*r-j*r-K)/(r*c*l*f)%u,Ee=(x-zt*f*l*c*r-ft*l*c*r-at*c*r-j*r-K)/(r*c*l*f*u)%d,$t=o.Head[Ee],je=o.Hands[zt],ze=o.Body[ft],$e=o.Feet[at],We=o.PlanarSphere[j],Ye=o.LinkRope[K],Je=Mt[$t.set],Qe=Mt[je.set],Ze=Mt[ze.set],Xe=Mt[$e.set],qe=ae[We.set],tn=ae[Ye.set],en=Je+Ze*Lt+Qe*Lt*Lt+Xe*Lt*Lt*Lt,nn=qe+tn*xl;if(m[en]!=1||E[nn]!=1)continue;const Ce=[Je,Qe,Ze,Xe,qe,tn],on=dl(Ce);if(R.init(en,nn,on,Ce,P),ml(R,i,on,Ce),Sl(R,$t,je,ze,$e,We,Ye),gl(R,i),pl(R,i),D&&I&&(v(R.a)||k(R.a)))continue;L.setBasic(R),L.a[s.MEMOSPRITE]&&(St.setBasic(R.m),R.initMemo());let dt=0;for(let Wt=i.actions.length-1;Wt>=0;Wt--){const tt=wl(R,Wt,i),mt=L.a;L.setPrecompute(tt.precomputedX.a),L.a[s.MEMOSPRITE]&&St.setPrecompute(tt.precomputedM.a),hl(L,tt,i),El(L,tt,i),Tl(L,tt,i),_o(L,tt,i),tt.actionType==="BASIC"?dt+=mt[s.BASIC_DMG]:tt.actionType==="SKILL"?dt+=mt[s.SKILL_DMG]:tt.actionType==="ULT"?dt+=mt[s.ULT_DMG]:tt.actionType==="FUA"?dt+=mt[s.FUA_DMG]:tt.actionType==="MEMO_SKILL"?dt+=mt[s.MEMO_SKILL_DMG]:tt.actionType==="MEMO_TALENT"&&(dt+=mt[s.MEMO_TALENT_DMG]),Wt===0&&(dt+=i.comboDot*mt[s.DOT_DMG]+i.comboBreak*mt[s.BREAK_DMG],L.COMBO_DMG.set(dt,h.NONE))}D&&S&&(v(L.m.c.a)||k(L.m.c.a))||C&&I&&(B(L.a)||ct(L.a))||C&&S&&(B(L.m.a)||ct(L.m.a))||I&&_t(L.a)||S&&_t(L.m.a)||(ro.packCharacter(a,y,L),y++)}self.postMessage({rows:[],buffer:e.buffer},[e.buffer])}function M(t,e,n,i){(n!==0||i!==ve.MAX_INT)&&t.push(o=>o[e]<n||o[e]>i)}function kl(t){const e=[];return M(e,s.HP,t.minHp,t.maxHp),M(e,s.ATK,t.minAtk,t.maxAtk),M(e,s.DEF,t.minDef,t.maxDef),M(e,s.SPD,t.minSpd,t.maxSpd),M(e,s.CR,t.minCr,t.maxCr),M(e,s.CD,t.minCd,t.maxCd),M(e,s.EHR,t.minEhr,t.maxEhr),M(e,s.RES,t.minRes,t.maxRes),M(e,s.BE,t.minBe,t.maxBe),M(e,s.ERR,t.minErr,t.maxErr),n=>e.some(i=>i(n))}function Fl(t){const e=[];return M(e,s.HP,t.minHp,t.maxHp),M(e,s.ATK,t.minAtk,t.maxAtk),M(e,s.DEF,t.minDef,t.maxDef),M(e,s.SPD,t.minSpd,t.maxSpd),M(e,s.CR,t.minCr,t.maxCr),M(e,s.CD,t.minCd,t.maxCd),M(e,s.EHR,t.minEhr,t.maxEhr),M(e,s.RES,t.minRes,t.maxRes),M(e,s.BE,t.minBe,t.maxBe),M(e,s.ERR,t.minErr,t.maxErr),n=>e.some(i=>i(n))}function Nl(t){const e=[];return M(e,s.EHP,t.minEhp,t.maxEhp),M(e,s.BASIC_DMG,t.minBasic,t.maxBasic),M(e,s.SKILL_DMG,t.minSkill,t.maxSkill),M(e,s.ULT_DMG,t.minUlt,t.maxUlt),M(e,s.FUA_DMG,t.minFua,t.maxFua),M(e,s.MEMO_SKILL_DMG,t.minMemoSkill,t.maxMemoSkill),M(e,s.MEMO_TALENT_DMG,t.minMemoTalent,t.maxMemoTalent),M(e,s.DOT_DMG,t.minDot,t.maxDot),M(e,s.BREAK_DMG,t.minBreak,t.maxBreak),M(e,s.HEAL_VALUE,t.minHeal,t.maxHeal),M(e,s.SHIELD_VALUE,t.minShield,t.maxShield),n=>e.some(i=>i(n))}function Ul(t,e){const n=t.resultMinFilter,i=vl[t.resultSort],o=i.isComputedRating;if(e||o){const a=i.optimizerKey;return{failsBasicThresholdFilter:()=>!1,failsCombatThresholdFilter:r=>r[a]<n}}else{const a=i.gpuProperty,r=s[a];return{failsBasicThresholdFilter:c=>c[r]<n,failsCombatThresholdFilter:()=>!1}}}function wl(t,e,n){const i=n.actions[e];return{characterConditionals:i.characterConditionals,lightConeConditionals:i.lightConeConditionals,teammate0:i.teammate0,teammate1:i.teammate1,teammate2:i.teammate2,teammateDynamicConditionals:i.teammateDynamicConditionals,setConditionals:i.setConditionals,conditionalRegistry:i.conditionalRegistry,actionType:i.actionType,actionIndex:i.actionIndex,precomputedX:i.precomputedX,precomputedM:i.precomputedM,conditionalState:{}}}var Bo=(t=>(t[t.OPTIMIZER=0]="OPTIMIZER",t[t.EST_TBP=1]="EST_TBP",t))(Bo||{});self.onmessage=function(t){switch(t.data.workerType){case Bo.OPTIMIZER:Gl(t);break}};export{lt as A,pt as B,nt as C,ge as D,Vl as E,et as F,Jl as G,w as H,ie as I,s as K,zl as N,Kl as P,h as S,g as T,$ as U,tc as a,jl as b,A as c,W as d,Na as e,Ft as f,Xl as g,Q as h,p as i,xs as j,Gs as k,Ua as l,Zl as m,ql as n,ba as o,Dt as p,wt as q,ot as r,Yl as s,ec as t,Ns as u,nc as v,vt as w,$l as x,Wl as y,Ql as z};
